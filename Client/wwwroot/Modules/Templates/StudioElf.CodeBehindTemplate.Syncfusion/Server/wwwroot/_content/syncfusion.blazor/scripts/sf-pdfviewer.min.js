/*!*  filename: sf-pdfviewer.min.js 
*     version : 25.1.40 
*     Copyright Syncfusion Inc. 2001 - 2024. All rights reserved. 
*     Use of this code is subject to the terms of our license.
*     A copy of the current license can be obtained at any time by e-mailing 
*     licensing@syncfusion.com. Any infringement will be prosecuted under 
*     applicable laws. 
*/
(window.webpackJsonp=window.webpackJsonp||[]).push([[51],{"./bundles/sf-pdfviewer.js":function(e,t,i){"use strict";i.r(t);i("./modules/sf-pdfviewer.js")},"./modules/sf-pdfviewer.js":function(e,t){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}window.sfBlazor=window.sfBlazor||{},window.sfBlazor.PdfViewer=function(){"use strict";var e,t,n=(e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)},function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}),o=function(e,t,n,o){var a,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(s<3?a(r):s>3?a(t,n,r):a(t,n))||r);return s>3&&r&&Object.defineProperty(t,n,r),r},a=function(e,t,i,n){return new(i||(i=Promise))((function(o,a){function s(e){try{l(n.next(e))}catch(e){a(e)}}function r(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){e.done?o(e.value):new i((function(t){t(e.value)})).then(s,r)}l((n=n.apply(e,t||[])).next())}))},s=function(e,t){var i,n,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function r(a){return function(r){return function(a){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],n=0}finally{i=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,r])}}},r=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}n(t,e),o([sf.base.Property(!0)],t.prototype,"showTooltip",void 0),o([sf.base.Property()],t.prototype,"toolbarItems",void 0),o([sf.base.Property()],t.prototype,"annotationToolbarItems",void 0)}(sf.base.ChildProperty),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}n(t,e),o([sf.base.Property()],t.prototype,"ajaxHeaders",void 0),o([sf.base.Property(!1)],t.prototype,"withCredentials",void 0)}(sf.base.ChildProperty),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}n(t,e),o([sf.base.Property("")],t.prototype,"customStampName",void 0),o([sf.base.Property("")],t.prototype,"customStampImageSource",void 0)}(sf.base.ChildProperty),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}n(t,e),o([sf.base.Property(!0)],t.prototype,"showTooltip",void 0),o([sf.base.Property()],t.prototype,"annotationToolbarItem",void 0)}(sf.base.ChildProperty),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}n(t,e),o([sf.base.Property({x:0,y:0,width:0,height:0})],t.prototype,"bounds",void 0),o([sf.base.Property("")],t.prototype,"name",void 0),o([sf.base.Property(!1)],t.prototype,"isReadOnly",void 0),o([sf.base.Property("visible")],t.prototype,"visibility",void 0),o([sf.base.Property(!1)],t.prototype,"isRequired",void 0),o([sf.base.Property(!1)],t.prototype,"isPrint",void 0),o([sf.base.Property("")],t.prototype,"tooltip",void 0),o([sf.base.Property(0)],t.prototype,"pageNumber",void 0),o([sf.base.Property()],t.prototype,"signatureDialogSettings",void 0),o([sf.base.Property()],t.prototype,"signatureIndicatorSettings",void 0)}(sf.base.ChildProperty),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}n(t,e),o([sf.base.Property({x:0,y:0,width:0,height:0})],t.prototype,"bounds",void 0),o([sf.base.Property("")],t.prototype,"name",void 0),o([sf.base.Property(!1)],t.prototype,"isReadOnly",void 0),o([sf.base.Property("visible")],t.prototype,"visibility",void 0),o([sf.base.Property(!1)],t.prototype,"isRequired",void 0),o([sf.base.Property(!1)],t.prototype,"isPrint",void 0),o([sf.base.Property("")],t.prototype,"tooltip",void 0),o([sf.base.Property(0)],t.prototype,"pageNumber",void 0),o([sf.base.Property(!1)],t.prototype,"isInitialField",void 0),o([sf.base.Property()],t.prototype,"initialDialogSettings",void 0),o([sf.base.Property()],t.prototype,"initialIndicatorSettings",void 0)}(sf.base.ChildProperty),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}n(t,e),o([sf.base.Property(1)],t.prototype,"opacity",void 0),o([sf.base.Property("orange")],t.prototype,"backgroundColor",void 0),o([sf.base.Property(19)],t.prototype,"width",void 0),o([sf.base.Property(10)],t.prototype,"height",void 0),o([sf.base.Property(10)],t.prototype,"fontSize",void 0),o([sf.base.Property(null)],t.prototype,"text",void 0),o([sf.base.Property("black")],t.prototype,"color",void 0)}(sf.base.ChildProperty),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}n(t,e),o([sf.base.Property("Draw")],t.prototype,"displayMode",void 0),o([sf.base.Property(!1)],t.prototype,"hideSaveSignature",void 0)}(sf.base.ChildProperty),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}n(t,e),o([sf.base.Property("Load")],t.prototype,"load",void 0),o([sf.base.Property("Unload")],t.prototype,"unload",void 0),o([sf.base.Property("RenderPdfPages")],t.prototype,"renderPages",void 0),o([sf.base.Property("RenderPdfPages")],t.prototype,"print",void 0),o([sf.base.Property("Download")],t.prototype,"download",void 0),o([sf.base.Property("RenderThumbnailImages")],t.prototype,"renderThumbnail",void 0),o([sf.base.Property("RenderAnnotationComments")],t.prototype,"renderComments",void 0),o([sf.base.Property("ImportAnnotations")],t.prototype,"importAnnotations",void 0),o([sf.base.Property("ExportAnnotations")],t.prototype,"exportAnnotations",void 0),o([sf.base.Property("ImportFormFields")],t.prototype,"importFormFields",void 0),o([sf.base.Property("ExportFormFields")],t.prototype,"exportFormFields",void 0),o([sf.base.Property("RenderPdfTexts")],t.prototype,"renderTexts",void 0)}(sf.base.ChildProperty),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}n(t,e),o([sf.base.Property(1)],t.prototype,"pageNumber",void 0),o([sf.base.Property(1)],t.prototype,"opacity",void 0),o([sf.base.Property("#ff0000")],t.prototype,"color",void 0),o([sf.base.Property("Guest")],t.prototype,"author",void 0),o([sf.base.Property("")],t.prototype,"annotationSelectorSettings",void 0),o([sf.base.Property(null)],t.prototype,"customData",void 0),o([sf.base.Property(!1)],t.prototype,"isLock",void 0),o([sf.base.Property(!1)],t.prototype,"enableMultiPageAnnotation",void 0),o([sf.base.Property(!1)],t.prototype,"enableTextMarkupResizer",void 0),o([sf.base.Property(["None"])],t.prototype,"allowedInteractions",void 0),o([sf.base.Property(!0)],t.prototype,"isPrint",void 0)}(sf.base.ChildProperty),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}n(t,e),o([sf.base.Property(1)],t.prototype,"pageNumber",void 0),o([sf.base.Property(1)],t.prototype,"opacity",void 0),o([sf.base.Property("#00ff00")],t.prototype,"color",void 0),o([sf.base.Property("Guest")],t.prototype,"author",void 0),o([sf.base.Property("")],t.prototype,"annotationSelectorSettings",void 0),o([sf.base.Property(null)],t.prototype,"customData",void 0),o([sf.base.Property(!1)],t.prototype,"isLock",void 0),o([sf.base.Property(!1)],t.prototype,"enableMultiPageAnnotation",void 0),o([sf.base.Property(!1)],t.prototype,"enableTextMarkupResizer",void 0),o([sf.base.Property(["None"])],t.prototype,"allowedInteractions",void 0),o([sf.base.Property(!0)],t.prototype,"isPrint",void 0)}(sf.base.ChildProperty),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}n(t,e),o([sf.base.Property(1)],t.prototype,"pageNumber",void 0),o([sf.base.Property(1)],t.prototype,"opacity",void 0),o([sf.base.Property("#ffff00")],t.prototype,"color",void 0),o([sf.base.Property("Guest")],t.prototype,"author",void 0),o([sf.base.Property("")],t.prototype,"annotationSelectorSettings",void 0),o([sf.base.Property(null)],t.prototype,"customData",void 0),o([sf.base.Property(!1)],t.prototype,"isLock",void 0),o([sf.base.Property(!1)],t.prototype,"enableMultiPageAnnotation",void 0),o([sf.base.Property(!1)],t.prototype,"enableTextMarkupResizer",void 0),o([sf.base.Property(["None"])],t.prototype,"allowedInteractions",void 0),o([sf.base.Property(!0)],t.prototype,"isPrint",void 0)}(sf.base.ChildProperty),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}n(t,e),o([sf.base.Property({x:0,y:0})],t.prototype,"offset",void 0),o([sf.base.Property(1)],t.prototype,"pageNumber",void 0),o([sf.base.Property(1)],t.prototype,"opacity",void 0),o([sf.base.Property("#ffffff00")],t.prototype,"fillColor",void 0),o([sf.base.Property("#ff0000")],t.prototype,"strokeColor",void 0),o([sf.base.Property("Guest")],t.prototype,"author",void 0),o([sf.base.Property("1")],t.prototype,"thickness",void 0),o([sf.base.Property("None")],t.prototype,"lineHeadStartStyle",void 0),o([sf.base.Property("None")],t.prototype,"lineHeadEndStyle",void 0),o([sf.base.Property(0)],t.prototype,"borderDashArray",void 0),o([sf.base.Property("")],t.prototype,"annotationSelectorSettings",void 0),o([sf.base.Property(0)],t.prototype,"minHeight",void 0),o([sf.base.Property(0)],t.prototype,"minWidth",void 0),o([sf.base.Property(0)],t.prototype,"maxHeight",void 0),o([sf.base.Property(0)],t.prototype,"maxWidth",void 0),o([sf.base.Property(!1)],t.prototype,"isLock",void 0),o([sf.base.Property(null)],t.prototype,"customData",void 0),o([sf.base.Property(["None"])],t.prototype,"allowedInteractions",void 0),o([sf.base.Property(!0)],t.prototype,"isPrint",void 0)}(sf.base.ChildProperty),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}n(t,e),o([sf.base.Property({x:0,y:0})],t.prototype,"offset",void 0),o([sf.base.Property(1)],t.prototype,"pageNumber",void 0),o([sf.base.Property(1)],t.prototype,"opacity",void 0),o([sf.base.Property("#ffffff00")],t.prototype,"fillColor",void 0),o([sf.base.Property("#ff0000")],t.prototype,"strokeColor",void 0),o([sf.base.Property("Guest")],t.prototype,"author",void 0),o([sf.base.Property("1")],t.prototype,"thickness",void 0),o([sf.base.Property("None")],t.prototype,"lineHeadStartStyle",void 0),o([sf.base.Property("None")],t.prototype,"lineHeadEndStyle",void 0),o([sf.base.Property(0)],t.prototype,"borderDashArray",void 0),o([sf.base.Property("")],t.prototype,"annotationSelectorSettings",void 0),o([sf.base.Property(0)],t.prototype,"minHeight",void 0),o([sf.base.Property(0)],t.prototype,"minWidth",void 0),o([sf.base.Property(0)],t.prototype,"maxHeight",void 0),o([sf.base.Property(0)],t.prototype,"maxWidth",void 0),o([sf.base.Property(!1)],t.prototype,"isLock",void 0),o([sf.base.Property(null)],t.prototype,"customData",void 0),o([sf.base.Property(["None"])],t.prototype,"allowedInteractions",void 0),o([sf.base.Property(!0)],t.prototype,"isPrint",void 0)}(sf.base.ChildProperty),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}n(t,e),o([sf.base.Property({x:0,y:0})],t.prototype,"offset",void 0),o([sf.base.Property(1)],t.prototype,"pageNumber",void 0),o([sf.base.Property(100)],t.prototype,"width",void 0),o([sf.base.Property(50)],t.prototype,"height",void 0),o([sf.base.Property(1)],t.prototype,"opacity",void 0),o([sf.base.Property("#ffffff00")],t.prototype,"fillColor",void 0),o([sf.base.Property("#ff0000")],t.prototype,"strokeColor",void 0),o([sf.base.Property("Guest")],t.prototype,"author",void 0),o([sf.base.Property("1")],t.prototype,"thickness",void 0),o([sf.base.Property("")],t.prototype,"annotationSelectorSettings",void 0),o([sf.base.Property(0)],t.prototype,"minHeight",void 0),o([sf.base.Property(0)],t.prototype,"minWidth",void 0),o([sf.base.Property(0)],t.prototype,"maxHeight",void 0),o([sf.base.Property(0)],t.prototype,"maxWidth",void 0),o([sf.base.Property(!1)],t.prototype,"isLock",void 0),o([sf.base.Property(null)],t.prototype,"customData",void 0),o([sf.base.Property(["None"])],t.prototype,"allowedInteractions",void 0),o([sf.base.Property(!0)],t.prototype,"isPrint",void 0)}(sf.base.ChildProperty),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}n(t,e),o([sf.base.Property({x:0,y:0})],t.prototype,"offset",void 0),o([sf.base.Property(1)],t.prototype,"pageNumber",void 0),o([sf.base.Property(100)],t.prototype,"width",void 0),o([sf.base.Property(100)],t.prototype,"height",void 0),o([sf.base.Property(1)],t.prototype,"opacity",void 0),o([sf.base.Property("#ffffff00")],t.prototype,"fillColor",void 0),o([sf.base.Property("#ff0000")],t.prototype,"strokeColor",void 0),o([sf.base.Property("Guest")],t.prototype,"author",void 0),o([sf.base.Property("1")],t.prototype,"thickness",void 0),o([sf.base.Property("")],t.prototype,"annotationSelectorSettings",void 0),o([sf.base.Property(0)],t.prototype,"minHeight",void 0),o([sf.base.Property(0)],t.prototype,"minWidth",void 0),o([sf.base.Property(0)],t.prototype,"maxHeight",void 0),o([sf.base.Property(0)],t.prototype,"maxWidth",void 0),o([sf.base.Property(!1)],t.prototype,"isLock",void 0),o([sf.base.Property(null)],t.prototype,"customData",void 0),o([sf.base.Property(["None"])],t.prototype,"allowedInteractions",void 0),o([sf.base.Property(!0)],t.prototype,"isPrint",void 0)}(sf.base.ChildProperty),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}n(t,e),o([sf.base.Property(1)],t.prototype,"opacity",void 0),o([sf.base.Property("#ffffff00")],t.prototype,"fillColor",void 0),o([sf.base.Property("#000")],t.prototype,"fontColor",void 0),o([sf.base.Property(16)],t.prototype,"fontSize",void 0),o([sf.base.Property("Helvetica")],t.prototype,"fontFamily",void 0),o([sf.base.Property("Label")],t.prototype,"labelContent",void 0),o([sf.base.Property("")],t.prototype,"notes",void 0)}(sf.base.ChildProperty),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}n(t,e),o([sf.base.Property({x:0,y:0})],t.prototype,"offset",void 0),o([sf.base.Property(1)],t.prototype,"pageNumber",void 0),o([sf.base.Property(1)],t.prototype,"opacity",void 0),o([sf.base.Property("#ffffff00")],t.prototype,"fillColor",void 0),o([sf.base.Property("#ff0000")],t.prototype,"strokeColor",void 0),o([sf.base.Property("Guest")],t.prototype,"author",void 0),o([sf.base.Property("1")],t.prototype,"thickness",void 0),o([sf.base.Property("")],t.prototype,"annotationSelectorSettings",void 0),o([sf.base.Property(0)],t.prototype,"minHeight",void 0),o([sf.base.Property(0)],t.prototype,"minWidth",void 0),o([sf.base.Property(0)],t.prototype,"maxHeight",void 0),o([sf.base.Property(0)],t.prototype,"maxWidth",void 0),o([sf.base.Property(!1)],t.prototype,"isLock",void 0),o([sf.base.Property(null)],t.prototype,"customData",void 0),o([sf.base.Property(["None"])],t.prototype,"allowedInteractions",void 0),o([sf.base.Property(!0)],t.prototype,"isPrint",void 0)}(sf.base.ChildProperty),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}n(t,e),o([sf.base.Property({x:0,y:0})],t.prototype,"offset",void 0),o([sf.base.Property(1)],t.prototype,"pageNumber",void 0),o([sf.base.Property(150)],t.prototype,"width",void 0),o([sf.base.Property(50)],t.prototype,"height",void 0),o([sf.base.Property(1)],t.prototype,"opacity",void 0),o([sf.base.Property("Guest")],t.prototype,"author",void 0),o([sf.base.Property("")],t.prototype,"annotationSelectorSettings",void 0),o([sf.base.Property(0)],t.prototype,"minHeight",void 0),o([sf.base.Property(0)],t.prototype,"minWidth",void 0),o([sf.base.Property(0)],t.prototype,"maxHeight",void 0),o([sf.base.Property(0)],t.prototype,"maxWidth",void 0),o([sf.base.Property(!1)],t.prototype,"isLock",void 0),o([sf.base.Property(null)],t.prototype,"customData",void 0),o([sf.base.Property([])],t.prototype,"dynamicStamps",void 0),o([sf.base.Property([])],t.prototype,"signStamps",void 0),o([sf.base.Property([])],t.prototype,"standardBusinessStamps",void 0),o([sf.base.Property(["None"])],t.prototype,"allowedInteractions",void 0),o([sf.base.Property(!0)],t.prototype,"isPrint",void 0)}(sf.base.ChildProperty),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}n(t,e),o([sf.base.Property({x:0,y:0})],t.prototype,"offset",void 0),o([sf.base.Property(1)],t.prototype,"pageNumber",void 0),o([sf.base.Property(1)],t.prototype,"opacity",void 0),o([sf.base.Property("Guest")],t.prototype,"author",void 0),o([sf.base.Property(0)],t.prototype,"width",void 0),o([sf.base.Property(0)],t.prototype,"height",void 0),o([sf.base.Property(0)],t.prototype,"left",void 0),o([sf.base.Property(0)],t.prototype,"top",void 0),o([sf.base.Property(!1)],t.prototype,"isAddToMenu",void 0),o([sf.base.Property(0)],t.prototype,"minHeight",void 0),o([sf.base.Property(0)],t.prototype,"minWidth",void 0),o([sf.base.Property(0)],t.prototype,"maxHeight",void 0),o([sf.base.Property(0)],t.prototype,"maxWidth",void 0),o([sf.base.Property(!1)],t.prototype,"isLock",void 0),o([sf.base.Property("")],t.prototype,"customStamps",void 0),o([sf.base.Property(!0)],t.prototype,"enableCustomStamp",void 0),o([sf.base.Property(["None"])],t.prototype,"allowedInteractions",void 0),o([sf.base.Property(!0)],t.prototype,"isPrint",void 0)}(sf.base.ChildProperty),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}n(t,e),o([sf.base.Property({x:0,y:0})],t.prototype,"offset",void 0),o([sf.base.Property(1)],t.prototype,"pageNumber",void 0),o([sf.base.Property(1)],t.prototype,"opacity",void 0),o([sf.base.Property("#ff0000")],t.prototype,"fillColor",void 0),o([sf.base.Property("#ff0000")],t.prototype,"strokeColor",void 0),o([sf.base.Property("Guest")],t.prototype,"author",void 0),o([sf.base.Property("1")],t.prototype,"thickness",void 0),o([sf.base.Property("None")],t.prototype,"lineHeadStartStyle",void 0),o([sf.base.Property("None")],t.prototype,"lineHeadEndStyle",void 0),o([sf.base.Property(0)],t.prototype,"borderDashArray",void 0),o([sf.base.Property("")],t.prototype,"annotationSelectorSettings",void 0),o([sf.base.Property(0)],t.prototype,"minHeight",void 0),o([sf.base.Property(0)],t.prototype,"minWidth",void 0),o([sf.base.Property(0)],t.prototype,"maxHeight",void 0),o([sf.base.Property(0)],t.prototype,"maxWidth",void 0),o([sf.base.Property(!1)],t.prototype,"isLock",void 0),o([sf.base.Property(null)],t.prototype,"customData",void 0),o([sf.base.Property(40)],t.prototype,"leaderLength",void 0),o([sf.base.Property("move")],t.prototype,"resizeCursorType",void 0),o([sf.base.Property(["None"])],t.prototype,"allowedInteractions",void 0),o([sf.base.Property(!0)],t.prototype,"isPrint",void 0)}(sf.base.ChildProperty),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}n(t,e),o([sf.base.Property({x:0,y:0})],t.prototype,"offset",void 0),o([sf.base.Property(1)],t.prototype,"pageNumber",void 0),o([sf.base.Property(1)],t.prototype,"opacity",void 0),o([sf.base.Property("#ffffff00")],t.prototype,"fillColor",void 0),o([sf.base.Property("#ff0000")],t.prototype,"strokeColor",void 0),o([sf.base.Property("Guest")],t.prototype,"author",void 0),o([sf.base.Property("1")],t.prototype,"thickness",void 0),o([sf.base.Property("None")],t.prototype,"lineHeadStartStyle",void 0),o([sf.base.Property("None")],t.prototype,"lineHeadEndStyle",void 0),o([sf.base.Property(0)],t.prototype,"borderDashArray",void 0),o([sf.base.Property(0)],t.prototype,"minHeight",void 0),o([sf.base.Property(0)],t.prototype,"minWidth",void 0),o([sf.base.Property(0)],t.prototype,"maxHeight",void 0),o([sf.base.Property(0)],t.prototype,"maxWidth",void 0),o([sf.base.Property(!1)],t.prototype,"isLock",void 0),o([sf.base.Property("")],t.prototype,"annotationSelectorSettings",void 0),o([sf.base.Property(["None"])],t.prototype,"allowedInteractions",void 0),o([sf.base.Property(!0)],t.prototype,"isPrint",void 0)}(sf.base.ChildProperty),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}n(t,e),o([sf.base.Property({x:0,y:0})],t.prototype,"offset",void 0),o([sf.base.Property(1)],t.prototype,"pageNumber",void 0),o([sf.base.Property(1)],t.prototype,"opacity",void 0),o([sf.base.Property("#ffffff00")],t.prototype,"fillColor",void 0),o([sf.base.Property("#ff0000")],t.prototype,"strokeColor",void 0),o([sf.base.Property("Guest")],t.prototype,"author",void 0),o([sf.base.Property("1")],t.prototype,"thickness",void 0),o([sf.base.Property(0)],t.prototype,"minHeight",void 0),o([sf.base.Property(0)],t.prototype,"minWidth",void 0),o([sf.base.Property(0)],t.prototype,"maxHeight",void 0),o([sf.base.Property(0)],t.prototype,"maxWidth",void 0),o([sf.base.Property(!1)],t.prototype,"isLock",void 0),o([sf.base.Property("")],t.prototype,"annotationSelectorSettings",void 0),o([sf.base.Property(["None"])],t.prototype,"allowedInteractions",void 0),o([sf.base.Property(!0)],t.prototype,"isPrint",void 0)}(sf.base.ChildProperty),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}n(t,e),o([sf.base.Property({x:0,y:0})],t.prototype,"offset",void 0),o([sf.base.Property(1)],t.prototype,"pageNumber",void 0),o([sf.base.Property(100)],t.prototype,"width",void 0),o([sf.base.Property(90)],t.prototype,"height",void 0),o([sf.base.Property(1)],t.prototype,"opacity",void 0),o([sf.base.Property("#ffffff00")],t.prototype,"fillColor",void 0),o([sf.base.Property("#ff0000")],t.prototype,"strokeColor",void 0),o([sf.base.Property("Guest")],t.prototype,"author",void 0),o([sf.base.Property("1")],t.prototype,"thickness",void 0),o([sf.base.Property("")],t.prototype,"annotationSelectorSettings",void 0),o([sf.base.Property(0)],t.prototype,"minHeight",void 0),o([sf.base.Property(0)],t.prototype,"minWidth",void 0),o([sf.base.Property(0)],t.prototype,"maxHeight",void 0),o([sf.base.Property(0)],t.prototype,"maxWidth",void 0),o([sf.base.Property(!1)],t.prototype,"isLock",void 0),o([sf.base.Property(null)],t.prototype,"customData",void 0),o([sf.base.Property(["None"])],t.prototype,"allowedInteractions",void 0),o([sf.base.Property(!0)],t.prototype,"isPrint",void 0)}(sf.base.ChildProperty),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}n(t,e),o([sf.base.Property({x:0,y:0})],t.prototype,"offset",void 0),o([sf.base.Property(1)],t.prototype,"pageNumber",void 0),o([sf.base.Property(1)],t.prototype,"opacity",void 0),o([sf.base.Property("#ffffff00")],t.prototype,"fillColor",void 0),o([sf.base.Property("#ff0000")],t.prototype,"strokeColor",void 0),o([sf.base.Property("Guest")],t.prototype,"author",void 0),o([sf.base.Property("1")],t.prototype,"thickness",void 0),o([sf.base.Property(0)],t.prototype,"minHeight",void 0),o([sf.base.Property(0)],t.prototype,"minWidth",void 0),o([sf.base.Property(0)],t.prototype,"maxHeight",void 0),o([sf.base.Property(0)],t.prototype,"maxWidth",void 0),o([sf.base.Property(!1)],t.prototype,"isLock",void 0),o([sf.base.Property("")],t.prototype,"annotationSelectorSettings",void 0),o([sf.base.Property(["None"])],t.prototype,"allowedInteractions",void 0),o([sf.base.Property(!0)],t.prototype,"isPrint",void 0)}(sf.base.ChildProperty),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}n(t,e),o([sf.base.Property({x:0,y:0})],t.prototype,"offset",void 0),o([sf.base.Property(1)],t.prototype,"pageNumber",void 0),o([sf.base.Property(0)],t.prototype,"width",void 0),o([sf.base.Property(0)],t.prototype,"height",void 0),o([sf.base.Property(0)],t.prototype,"path",void 0),o([sf.base.Property(1)],t.prototype,"opacity",void 0),o([sf.base.Property("#ff0000")],t.prototype,"strokeColor",void 0),o([sf.base.Property(1)],t.prototype,"thickness",void 0),o([sf.base.Property("")],t.prototype,"annotationSelectorSettings",void 0),o([sf.base.Property(!1)],t.prototype,"isLock",void 0),o([sf.base.Property("Guest")],t.prototype,"author",void 0),o([sf.base.Property(["None"])],t.prototype,"allowedInteractions",void 0),o([sf.base.Property(null)],t.prototype,"customData",void 0),o([sf.base.Property(!0)],t.prototype,"isPrint",void 0)}(sf.base.ChildProperty),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}n(t,e),o([sf.base.Property({x:0,y:0})],t.prototype,"offset",void 0),o([sf.base.Property(1)],t.prototype,"pageNumber",void 0),o([sf.base.Property("Guest")],t.prototype,"author",void 0),o([sf.base.Property(1)],t.prototype,"opacity",void 0),o([sf.base.Property("")],t.prototype,"annotationSelectorSettings",void 0),o([sf.base.Property(null)],t.prototype,"customData",void 0),o([sf.base.Property(!1)],t.prototype,"isLock",void 0),o([sf.base.Property(["None"])],t.prototype,"allowedInteractions",void 0),o([sf.base.Property(!0)],t.prototype,"isPrint",void 0)}(sf.base.ChildProperty),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}n(t,e),o([sf.base.Property(1)],t.prototype,"scaleRatio",void 0),o([sf.base.Property("in")],t.prototype,"conversionUnit",void 0),o([sf.base.Property("in")],t.prototype,"displayUnit",void 0),o([sf.base.Property(96)],t.prototype,"depth",void 0)}(sf.base.ChildProperty),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}n(t,e),o([sf.base.Property({x:0,y:0})],t.prototype,"offset",void 0),o([sf.base.Property(1)],t.prototype,"pageNumber",void 0),o([sf.base.Property(1)],t.prototype,"opacity",void 0),o([sf.base.Property("#ffffff00")],t.prototype,"borderColor",void 0),o([sf.base.Property(1)],t.prototype,"borderWidth",void 0),o([sf.base.Property("solid")],t.prototype,"borderStyle",void 0),o([sf.base.Property("Guest")],t.prototype,"author",void 0),o([sf.base.Property("#ffffff00")],t.prototype,"fillColor",void 0),o([sf.base.Property(16)],t.prototype,"fontSize",void 0),o([sf.base.Property(151)],t.prototype,"width",void 0),o([sf.base.Property(24.6)],t.prototype,"height",void 0),o([sf.base.Property("#000")],t.prototype,"fontColor",void 0),o([sf.base.Property("Helvetica")],t.prototype,"fontFamily",void 0),o([sf.base.Property("TypeHere")],t.prototype,"defaultText",void 0),o([sf.base.Property("None")],t.prototype,"fontStyle",void 0),o([sf.base.Property("Left")],t.prototype,"textAlignment",void 0),o([sf.base.Property(!1)],t.prototype,"allowEditTextOnly",void 0),o([sf.base.Property("")],t.prototype,"annotationSelectorSettings",void 0),o([sf.base.Property(0)],t.prototype,"minHeight",void 0),o([sf.base.Property(0)],t.prototype,"minWidth",void 0),o([sf.base.Property(0)],t.prototype,"maxHeight",void 0),o([sf.base.Property(0)],t.prototype,"maxWidth",void 0),o([sf.base.Property(!1)],t.prototype,"isLock",void 0),o([sf.base.Property(null)],t.prototype,"customData",void 0),o([sf.base.Property(["None"])],t.prototype,"allowedInteractions",void 0),o([sf.base.Property(!0)],t.prototype,"isPrint",void 0),o([sf.base.Property(!1)],t.prototype,"isReadonly",void 0),o([sf.base.Property(!1)],t.prototype,"enableAutoFit",void 0)}(sf.base.ChildProperty),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}n(t,e),o([sf.base.Property("")],t.prototype,"selectionBorderColor",void 0),o([sf.base.Property("black")],t.prototype,"resizerBorderColor",void 0),o([sf.base.Property("#FF4081")],t.prototype,"resizerFillColor",void 0),o([sf.base.Property(8)],t.prototype,"resizerSize",void 0),o([sf.base.Property(1)],t.prototype,"selectionBorderThickness",void 0),o([sf.base.Property("Square")],t.prototype,"resizerShape",void 0),o([sf.base.Property("")],t.prototype,"selectorLineDashArray",void 0),o([sf.base.Property("Corners")],t.prototype,"resizerLocation",void 0),o([sf.base.Property(null)],t.prototype,"resizerCursorType",void 0)}(sf.base.ChildProperty),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}n(t,e),o([sf.base.Property("#fdd835")],t.prototype,"searchHighlightColor",void 0),o([sf.base.Property("#8b4c12")],t.prototype,"searchColor",void 0)}(sf.base.ChildProperty),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}n(t,e),o([sf.base.Property(1)],t.prototype,"opacity",void 0),o([sf.base.Property("#000000")],t.prototype,"strokeColor",void 0),o([sf.base.Property(1)],t.prototype,"thickness",void 0),o([sf.base.Property(150)],t.prototype,"width",void 0),o([sf.base.Property(100)],t.prototype,"height",void 0),o([sf.base.Property(1)],t.prototype,"saveSignatureLimit",void 0),o([sf.base.Property(1)],t.prototype,"saveInitialLimit",void 0),o([sf.base.Property([])],t.prototype,"signatureItem",void 0),o([sf.base.Property()],t.prototype,"typeSignatureFonts",void 0),o([sf.base.Property("")],t.prototype,"annotationSelectorSettings",void 0),o([sf.base.Property()],t.prototype,"signatureDialogSettings",void 0),o([sf.base.Property()],t.prototype,"initialDialogSettings",void 0)}(sf.base.ChildProperty),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}n(t,e),o([sf.base.Property("Guest")],t.prototype,"author",void 0),o([sf.base.Property(0)],t.prototype,"minHeight",void 0),o([sf.base.Property(0)],t.prototype,"minWidth",void 0),o([sf.base.Property(0)],t.prototype,"maxHeight",void 0),o([sf.base.Property(0)],t.prototype,"maxWidth",void 0),o([sf.base.Property(!1)],t.prototype,"isLock",void 0),o([sf.base.Property(!1)],t.prototype,"skipPrint",void 0),o([sf.base.Property(!1)],t.prototype,"skipDownload",void 0),o([sf.base.Property(null)],t.prototype,"customData",void 0),o([sf.base.Property(["None"])],t.prototype,"allowedInteractions",void 0)}(sf.base.ChildProperty),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}n(t,e),o([sf.base.Property()],t.prototype,"textData",void 0),o([sf.base.Property()],t.prototype,"pageText",void 0),o([sf.base.Property()],t.prototype,"pageSize",void 0)}(sf.base.ChildProperty),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}n(t,e),o([sf.base.Property()],t.prototype,"bounds",void 0),o([sf.base.Property()],t.prototype,"text",void 0)}(sf.base.ChildProperty),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}n(t,e),o([sf.base.Property()],t.prototype,"size",void 0),o([sf.base.Property()],t.prototype,"x",void 0),o([sf.base.Property()],t.prototype,"y",void 0),o([sf.base.Property()],t.prototype,"width",void 0),o([sf.base.Property()],t.prototype,"height",void 0),o([sf.base.Property()],t.prototype,"left",void 0),o([sf.base.Property()],t.prototype,"top",void 0),o([sf.base.Property()],t.prototype,"right",void 0),o([sf.base.Property()],t.prototype,"bottom",void 0),o([sf.base.Property()],t.prototype,"isEmpty",void 0)}(sf.base.ChildProperty),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}n(t,e),o([sf.base.Property(!0)],t.prototype,"enableTileRendering",void 0),o([sf.base.Property(0)],t.prototype,"x",void 0),o([sf.base.Property(0)],t.prototype,"y",void 0)}(sf.base.ChildProperty),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}n(t,e),o([sf.base.Property(100)],t.prototype,"delayPageRequestTimeOnScroll",void 0)}(sf.base.ChildProperty),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}n(t,e),o([sf.base.Property("")],t.prototype,"name",void 0),o([sf.base.Property(!1)],t.prototype,"isChecked",void 0),o([sf.base.Property(!1)],t.prototype,"isSelected",void 0),o([sf.base.Property("")],t.prototype,"id",void 0),o([sf.base.Property("")],t.prototype,"value",void 0),o([sf.base.Property("")],t.prototype,"type",void 0),o([sf.base.Property(!1)],t.prototype,"isReadOnly",void 0),o([sf.base.Property([""])],t.prototype,"signatureType",void 0),o([sf.base.Property("")],t.prototype,"fontName",void 0),o([sf.base.Property({x:0,y:0,width:0,height:0})],t.prototype,"bounds",void 0),o([sf.base.Property("Helvetica")],t.prototype,"fontFamily",void 0),o([sf.base.Property(10)],t.prototype,"fontSize",void 0),o([sf.base.Property("None")],t.prototype,"fontStyle",void 0),o([sf.base.Property("black")],t.prototype,"color",void 0),o([sf.base.Property("white")],t.prototype,"backgroundColor",void 0),o([sf.base.Property("Left")],t.prototype,"alignment",void 0),o([sf.base.Property("visible")],t.prototype,"visibility",void 0),o([sf.base.Property(0)],t.prototype,"maxLength",void 0),o([sf.base.Property(!1)],t.prototype,"isRequired",void 0),o([sf.base.Property(!1)],t.prototype,"isPrint",void 0),o([sf.base.Property("")],t.prototype,"tooltip",void 0),o([sf.base.Property("")],t.prototype,"options",void 0),o([sf.base.Property()],t.prototype,"signatureIndicatorSettings",void 0),o([sf.base.Property(1)],t.prototype,"thickness",void 0),o([sf.base.Property("#303030")],t.prototype,"borderColor",void 0),o([sf.base.Property(!1)],t.prototype,"isMultiline",void 0)}(sf.base.ChildProperty),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}n(t,e),o([sf.base.Property("RightClick")],t.prototype,"contextMenuAction",void 0),o([sf.base.Property([])],t.prototype,"contextMenuItems",void 0)}(sf.base.ChildProperty),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}n(t,e),o([sf.base.Property({x:0,y:0,width:0,height:0})],t.prototype,"bounds",void 0),o([sf.base.Property("")],t.prototype,"name",void 0),o([sf.base.Property("")],t.prototype,"value",void 0),o([sf.base.Property("Helvetica")],t.prototype,"fontFamily",void 0),o([sf.base.Property(10)],t.prototype,"fontSize",void 0),o([sf.base.Property(0)],t.prototype,"pageNumber",void 0),o([sf.base.Property("None")],t.prototype,"fontStyle",void 0),o([sf.base.Property("black")],t.prototype,"color",void 0),o([sf.base.Property("white")],t.prototype,"backgroundColor",void 0),o([sf.base.Property("Left")],t.prototype,"alignment",void 0),o([sf.base.Property(!1)],t.prototype,"isReadOnly",void 0),o([sf.base.Property("visible")],t.prototype,"visibility",void 0),o([sf.base.Property(0)],t.prototype,"maxLength",void 0),o([sf.base.Property(!1)],t.prototype,"isRequired",void 0),o([sf.base.Property(!1)],t.prototype,"isPrint",void 0),o([sf.base.Property("")],t.prototype,"tooltip",void 0),o([sf.base.Property(1)],t.prototype,"thickness",void 0),o([sf.base.Property("#303030")],t.prototype,"borderColor",void 0),o([sf.base.Property(!1)],t.prototype,"isMultiline",void 0)}(sf.base.ChildProperty),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}n(t,e),o([sf.base.Property({x:0,y:0,width:0,height:0})],t.prototype,"bounds",void 0),o([sf.base.Property("")],t.prototype,"name",void 0),o([sf.base.Property("")],t.prototype,"value",void 0),o([sf.base.Property(0)],t.prototype,"pageNumber",void 0),o([sf.base.Property("Helvetica")],t.prototype,"fontFamily",void 0),o([sf.base.Property(10)],t.prototype,"fontSize",void 0),o([sf.base.Property("None")],t.prototype,"fontStyle",void 0),o([sf.base.Property("black")],t.prototype,"color",void 0),o([sf.base.Property("white")],t.prototype,"backgroundColor",void 0),o([sf.base.Property("Left")],t.prototype,"alignment",void 0),o([sf.base.Property(!1)],t.prototype,"isReadOnly",void 0),o([sf.base.Property("visible")],t.prototype,"visibility",void 0),o([sf.base.Property(0)],t.prototype,"maxLength",void 0),o([sf.base.Property(!1)],t.prototype,"isRequired",void 0),o([sf.base.Property(!1)],t.prototype,"isPrint",void 0),o([sf.base.Property("")],t.prototype,"tooltip",void 0),o([sf.base.Property(1)],t.prototype,"thickness",void 0),o([sf.base.Property("#303030")],t.prototype,"borderColor",void 0)}(sf.base.ChildProperty),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}n(t,e),o([sf.base.Property({x:0,y:0,width:0,height:0})],t.prototype,"bounds",void 0),o([sf.base.Property("")],t.prototype,"name",void 0),o([sf.base.Property(!1)],t.prototype,"isChecked",void 0),o([sf.base.Property("white")],t.prototype,"backgroundColor",void 0),o([sf.base.Property(!1)],t.prototype,"isReadOnly",void 0),o([sf.base.Property("visible")],t.prototype,"visibility",void 0),o([sf.base.Property(!1)],t.prototype,"isPrint",void 0),o([sf.base.Property(0)],t.prototype,"pageNumber",void 0),o([sf.base.Property("")],t.prototype,"tooltip",void 0),o([sf.base.Property(!1)],t.prototype,"isRequired",void 0),o([sf.base.Property(1)],t.prototype,"thickness",void 0),o([sf.base.Property("#303030")],t.prototype,"borderColor",void 0)}(sf.base.ChildProperty),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}n(t,e),o([sf.base.Property({x:0,y:0,width:0,height:0})],t.prototype,"bounds",void 0),o([sf.base.Property("")],t.prototype,"name",void 0),o([sf.base.Property(!1)],t.prototype,"isSelected",void 0),o([sf.base.Property("white")],t.prototype,"backgroundColor",void 0),o([sf.base.Property(!1)],t.prototype,"isReadOnly",void 0),o([sf.base.Property(!1)],t.prototype,"isRequired",void 0),o([sf.base.Property(0)],t.prototype,"pageNumber",void 0),o([sf.base.Property("visible")],t.prototype,"visibility",void 0),o([sf.base.Property(!1)],t.prototype,"isPrint",void 0),o([sf.base.Property("")],t.prototype,"tooltip",void 0),o([sf.base.Property(1)],t.prototype,"thickness",void 0),o([sf.base.Property("#303030")],t.prototype,"borderColor",void 0)}(sf.base.ChildProperty),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}n(t,e),o([sf.base.Property({x:0,y:0,width:0,height:0})],t.prototype,"bounds",void 0),o([sf.base.Property("")],t.prototype,"name",void 0),o([sf.base.Property("")],t.prototype,"value",void 0),o([sf.base.Property("Helvetica")],t.prototype,"fontFamily",void 0),o([sf.base.Property(10)],t.prototype,"fontSize",void 0),o([sf.base.Property(0)],t.prototype,"pageNumber",void 0),o([sf.base.Property("None")],t.prototype,"fontStyle",void 0),o([sf.base.Property("black")],t.prototype,"color",void 0),o([sf.base.Property("white")],t.prototype,"backgroundColor",void 0),o([sf.base.Property("Left")],t.prototype,"alignment",void 0),o([sf.base.Property(!1)],t.prototype,"isReadOnly",void 0),o([sf.base.Property("visible")],t.prototype,"visibility",void 0),o([sf.base.Property(!1)],t.prototype,"isRequired",void 0),o([sf.base.Property(!1)],t.prototype,"isPrint",void 0),o([sf.base.Property("")],t.prototype,"tooltip",void 0),o([sf.base.Property("")],t.prototype,"options",void 0),o([sf.base.Property(1)],t.prototype,"thickness",void 0),o([sf.base.Property("#303030")],t.prototype,"borderColor",void 0)}(sf.base.ChildProperty),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}n(t,e),o([sf.base.Property({x:0,y:0,width:0,height:0})],t.prototype,"bounds",void 0),o([sf.base.Property("")],t.prototype,"name",void 0),o([sf.base.Property("")],t.prototype,"value",void 0),o([sf.base.Property("Helvetica")],t.prototype,"fontFamily",void 0),o([sf.base.Property(10)],t.prototype,"fontSize",void 0),o([sf.base.Property(0)],t.prototype,"pageNumber",void 0),o([sf.base.Property("None")],t.prototype,"fontStyle",void 0),o([sf.base.Property("black")],t.prototype,"color",void 0),o([sf.base.Property("white")],t.prototype,"backgroundColor",void 0),o([sf.base.Property("Left")],t.prototype,"alignment",void 0),o([sf.base.Property(!1)],t.prototype,"isReadOnly",void 0),o([sf.base.Property("visible")],t.prototype,"visibility",void 0),o([sf.base.Property(!1)],t.prototype,"isRequired",void 0),o([sf.base.Property(!1)],t.prototype,"isPrint",void 0),o([sf.base.Property("")],t.prototype,"tooltip",void 0),o([sf.base.Property([])],t.prototype,"options",void 0),o([sf.base.Property(1)],t.prototype,"thickness",void 0),o([sf.base.Property("#303030")],t.prototype,"borderColor",void 0)}(sf.base.ChildProperty),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}n(t,e),o([sf.base.Property("")],t.prototype,"itemName",void 0),o([sf.base.Property("")],t.prototype,"itemValue",void 0)}(sf.base.ChildProperty),function(){function e(e,t,i,n){window.sfBlazor=window.sfBlazor,this.blazorAction=Y.Default,this.lastAnnotation=null,this.cultureValue=null,this.signatureCollection=[],this.fileName=null,this.enableRtl=!1,this.allowServerDataBinding=!0,this.zIndex=-1,this.nameTable={},this.clipboardData={},this.zIndexTable=[],this.isTextSelectionStarted=!1,this.drawingObject=new p,this.defaultLocale={PdfViewer:"PDF Viewer",Cancel:"Cancel","Download file":"Download file",Download:"Download","Enter Password":"This document is password protected. Please enter a password.","File Corrupted":"File Corrupted","File Corrupted Content":"The file is corrupted and cannot be opened.","Fit Page":"Fit Page","Fit Width":"Fit Width",Automatic:"Automatic","Go To First Page":"Show first page","Invalid Password":"Incorrect Password. Please try again.","Next Page":"Show next page",OK:"OK",Open:"Open file","Page Number":"Current page number","Previous Page":"Show previous page","Go To Last Page":"Show last page",Zoom:"Zoom","Zoom In":"Zoom in","Zoom Out":"Zoom out","Page Thumbnails":"Page thumbnails",Bookmarks:"Bookmarks",Print:"Print file","Password Protected":"Password Required",Copy:"Copy","Text Selection":"Text selection tool",Panning:"Pan mode","Text Search":"Find text","Find in document":"Find in document","Match case":"Match case",Apply:"Apply",GoToPage:"Go to Page","No matches":"Viewer has finished searching the document. No more matches were found","No Text Found":"No Text Found",Undo:"Undo",Redo:"Redo",Annotation:"Add or Edit annotations",Highlight:"Highlight Text",Underline:"Underline Text",Strikethrough:"Strikethrough Text",Delete:"Delete annotation",Opacity:"Opacity","Color edit":"Change Color","Opacity edit":"Change Opacity","Highlight context":"Highlight","Underline context":"Underline","Strikethrough context":"Strikethrough","Server error":"Web-service is not listening. PDF Viewer depends on web-service for all it's features. Please start the web service to continue.","Client error":"Client-side error is found. Please check the custom headers provided in the AjaxRequestSettings property and web action methods in the ServerActionSettings property.","Open text":"Open","First text":"First Page","Previous text":"Previous Page","Next text":"Next Page","Last text":"Last Page","Zoom in text":"Zoom In","Zoom out text":"Zoom Out","Selection text":"Selection","Pan text":"Pan","Print text":"Print","Search text":"Search","Annotation Edit text":"Edit Annotation","Line Thickness":"Line Thickness","Line Properties":"Line Properties","Start Arrow":"Start Arrow","End Arrow":"End Arrow","Line Style":"Line Style","Fill Color":"Fill Color","Line Color":"Line Color",None:"None","Open Arrow":"Open","Closed Arrow":"Closed","Round Arrow":"Round","Square Arrow":"Square","Diamond Arrow":"Diamond",Butt:"Butt",Cut:"Cut",Paste:"Paste","Delete Context":"Delete",Properties:"Properties","Add Stamp":"Add Stamp","Add Shapes":"Add Shapes","Stroke edit":"Change Stroke Color","Change thickness":"Change Border Thickness","Add line":"Add Line","Add arrow":"Add Arrow","Add rectangle":"Add Rectangle","Add circle":"Add Circle","Add polygon":"Add Polygon","Add Comments":"Add Comments",Comments:"Comments",SubmitForm:"Submit Form","No Comments Yet":"No Comments Yet",Accepted:"Accepted",Completed:"Completed",Cancelled:"Cancelled",Rejected:"Rejected","Leader Length":"Leader Length","Scale Ratio":"Scale Ratio",Calibrate:"Calibrate","Calibrate Distance":"Calibrate Distance","Calibrate Perimeter":"Calibrate Perimeter","Calibrate Area":"Calibrate Area","Calibrate Radius":"Calibrate Radius","Calibrate Volume":"Calibrate Volume",Depth:"Depth",Closed:"Closed",Round:"Round",Square:"Square",Diamond:"Diamond",Edit:"Edit",Comment:"Comment","Comment Panel":"Comment Panel","Set Status":"Set Status",Post:"Post",Page:"Page","Add a comment":"Add a comment","Add a reply":"Add a reply","Import Annotations":"Import annotations from JSON file","Export Annotations":"Export annotation to JSON file","Export XFDF":"Export annotation to XFDF file","Import XFDF":"Import annotations from XFDF file",Add:"Add",Clear:"Clear",Bold:"Bold",Italic:"Italic",Strikethroughs:"Strikethrough",Underlines:"Underline",Superscript:"Superscript",Subscript:"Subscript","Align left":"Align Left","Align right":"Align Right",Center:"Center",Justify:"Justify","Font color":"Font Color","Text Align":"Text Align","Text Properties":"Font Style",SignatureFieldDialogHeaderText:"Add Signature",HandwrittenSignatureDialogHeaderText:"Add Signature",InitialFieldDialogHeaderText:"Add Initial",HandwrittenInitialDialogHeaderText:"Add Initial","Draw Ink":"Draw Ink",Create:"Create","Font family":"Font Family","Font size":"Font Size","Free Text":"Free Text","Import Failed":"Invalid JSON file type or file name; please select a valid JSON file","File not found":"Imported JSON file is not found in the desired location","Export Failed":"Export annotations action has failed; please ensure annotations are added properly",of:"of ",Dynamic:"Dynamic","Standard Business":"Standard Business","Sign Here":"Sign Here","Custom Stamp":"Custom Stamp","Enter Signature as Name":"Enter your name","Draw-hand Signature":"DRAW","Type Signature":"TYPE","Upload Signature":"UPLOAD","Browse Signature Image":"BROWSE","Save Signature":"Save Signature","Save Initial":"Save Initial",Textbox:"Textbox",Password:"Password","Check Box":"Checkbox","Radio Button":"Radio Button",Dropdown:"Drop Down","List Box":"List Box",Signature:"Signature","Delete FormField":"Delete Form Field","Textbox Properties":"Textbox Properties",Name:"Name",Tooltip:"Tooltip",Value:"Value","Form Field Visibility":"Form Field Visibility","Read Only":"Read Only",Required:"Required",Checked:"Checked","Show Printing":"Show Printing",Formatting:"Format",Fill:"Fill",Border:"Border","Border Color":"Border Color",Thickness:"Thickness","Max Length":"Max Length","List Item":"Item Name","Export Value":"Item Value","Dropdown Item List":"Dropdown Item List","List Box Item List":"List Box Item List",General:"GENERAL",Appearance:"APPEARANCE",Options:"OPTIONS","Delete Item":"Delete",Up:"Up",Down:"Down",Multiline:"Multiline",Revised:"Revised",Reviewed:"Reviewed",Received:"Received",Confidential:"Confidential",Approved:"Approved","Not Approved":"Not Approved",Witness:"Witness","Initial Here":"Initial Here",Draft:"Draft",Final:"Final","For Public Release":"For Public Release","Not For Public Release":"Not For Public Release","For Comment":"For Comment",Void:"Void","Preliminary Results":"Preliminary Results","Information Only":"Information Only",in:"in",m:"m",ft_in:"ft_in",ft:"ft",p:"p",cm:"cm",mm:"mm",pt:"pt",cu:"cu",sq:"sq",Initial:"Initial"},this._dotnetInstance=i,this.element=t,this.dataId=e,window.sfBlazor.setCompInstance(this),this.viewerBase=new Ve(this),sf.base.isNullOrUndefined(n)||(this.options=n,this.updateOptions(n)),this.drawing=new K(this)}return Object.defineProperty(e.prototype,"zoomPercentage",{get:function(){return 100*this.magnificationModule.zoomFactor},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bookmark",{get:function(){return this.bookmarkViewModule},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"print",{get:function(){return this.printModule},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"magnification",{get:function(){return this.magnificationModule},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"navigation",{get:function(){return this.navigationModule},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textSearch",{get:function(){return this.textSearchModule},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"toolbar",{get:function(){return this.toolbarModule},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"thumbnailView",{get:function(){return this.thumbnailViewModule},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"annotation",{get:function(){return this.annotationModule},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"formField",{get:function(){return this.formFieldsModule},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textSelection",{get:function(){return this.textSelectionModule},enumerable:!0,configurable:!0}),e.prototype.updateOptions=function(e){this.serviceUrl=e.serviceUrl,this.enableFormFieldsValidation=e.enableFormFieldsValidation,this.pageCount=e.pageCount,this.isDocumentEdited=e.isDocumentEdited,this.currentPageNumber=e.currentPageNumber,this.documentPath=e.documentPath,this.zoomValue=e.zoomValue,this.zoomMode=e.zoomMode,this.downloadFileName=e.downloadFileName,this.exportAnnotationFileName=e.exportAnnotationFileName,this.height=e.height,this.width=e.width,this.enableToolbar=e.enableToolbar,this.enableRtl=e.enableRtl,this.enableAnnotationToolbar=e.enableAnnotationToolbar,this.enableNavigationToolbar=e.enableNavigationToolbar,this.retryCount=e.retryCount,this.showNotificationDialog=e.showNotificationDialog,this.enableCommentPanel=e.enableCommentPanel,this.isCommandPanelOpen=e.isCommandPanelOpen,this.commentPanelVisible=e.commentPanelVisible,this.showDigitalSignatureAppearance=e.showDigitalSignatureAppearance,this.enableThumbnail=e.enableThumbnail,this.isThumbnailViewOpen=e.isThumbnailViewOpen,this.enableDownload=e.enableDownload,this.enablePrint=e.enablePrint,this.printMode=e.printMode,this.isSignatureEditable=e.isSignatureEditable,this.enableBookmark=e.enableBookmark,this.enableHyperlink=e.enableHyperlink,this.enableHandwrittenSignature=e.enableHandwrittenSignature,this.enableInkAnnotation=e.enableInkAnnotation,this.restrictZoomRequest=e.restrictZoomRequest,this.hyperlinkOpenState=e.hyperlinkOpenState,this.enableNavigation=e.enableNavigation,this.enableAutoComplete=e.enableAutoComplete,this.enableMagnification=e.enableMagnification,this.enableShapeLabel=e.enableShapeLabel,this.enableImportAnnotationMeasurement=e.enableImportAnnotationMeasurement,this.enablePinchZoom=e.enablePinchZoom,this.enableZoomOptimization=e.enableZoomOptimization,this.enableTextSelection=e.enableTextSelection,this.enableTextSearch=e.enableTextSearch,this.enableAnnotation=e.enableAnnotation,this.enableFormFields=e.enableFormFields,this.isFormFieldDocument=e.isFormFieldDocument,this.enableFreeText=e.enableFreeText,this.enableTextMarkupAnnotation=e.enableTextMarkupAnnotation,this.enableShapeAnnotation=e.enableShapeAnnotation,this.enableMeasureAnnotation=e.enableMeasureAnnotation,this.enableStampAnnotations=e.enableStampAnnotations,this.enableStickyNotesAnnotation=e.enableStickyNotesAnnotation,this.interactionMode=e.interactionMode,this.isExtractText=e.isExtractText,this.dateTimeFormat=e.stampSettings.dateTimeFormat,this.toolbarSettings=e.toolbarSettings,this.ajaxRequestSettings=e.ajaxRequestSettings,this.serverActionSettings=e.serverActionSettings,this.textSearchColorSettings=e.textSearchColorSettings,this.contextMenuSettings=e.contextMenuSettings,this.tileRenderingSettings=e.tileRenderingSettings,this.scrollSettings=e.scrollSettings,this.annotationSettings=e.annotationSettings,this.highlightSettings=e.highlightSettings,this.strikethroughSettings=e.strikethroughSettings,this.underlineSettings=e.underlineSettings,this.shapeLabelSettings=e.shapeLabelSettings,this.lineSettings=e.lineSettings,this.arrowSettings=e.arrowSettings,this.rectangleSettings=e.rectangleSettings,this.circleSettings=e.circleSettings,this.polygonSettings=e.polygonSettings,this.measurementSettings=e.measurementSettings,this.distanceSettings=e.distanceSettings,this.perimeterSettings=e.perimeterSettings,this.areaSettings=e.areaSettings,this.radiusSettings=e.radiusSettings,this.volumeSettings=e.volumeSettings,this.stampSettings=e.stampSettings,this.customStampSettings=e.customStampSettings,this.freeTextSettings=e.freeTextSettings,this.handWrittenSignatureSettings=e.handWrittenSignatureSettings,this.signatureFieldSettings=e.signatureFieldSettings,this.inkAnnotationSettings=e.inkAnnotationSettings,this.stickyNotesSettings=e.stickyNotesSettings,this.annotationSelectorSettings=e.annotationSelectorSettings,this.enableDesktopMode=e.enableDesktopMode,this.enablePrintRotation=e.enablePrintRotation,this.annotations||(this.annotations=e.annotations),e.selectedItems&&void 0===this.selectedItems&&(this.selectedItems=e.selectedItems),this.formFields=e.formFields,this.requiredModules()},e.prototype.updatePdfViewerOptions=function(e,t){this._dotnetInstance.invokeMethodAsync("UpdatePdfViewerOptions",e,t)},e.prototype.setOptions=function(e,t,i){for(var n=0,o=Object.keys(e);n<o.length;n++){var a=o[n];switch(a){case"locale":case"enableToolbar":case"enableCommentPanel":break;case"showDigitalSignatureAppearance":this.showDigitalSignatureAppearance=e.showDigitalSignatureAppearance;break;case"documentPath":i&&this.load(e.documentPath,null);break;case"interactionMode":this.interactionMode=e.interactionMode,"Pan"===e.interactionMode?(this.viewerBase.initiatePanning(),this.toolbar&&this.toolbar.updateInteractionTools(!1)):"TextSelection"===e.interactionMode&&(this.viewerBase.initiateTextSelectMode(),this.toolbar&&this.toolbar.updateInteractionTools(!0));break;case"height":this.height=e.height,this.viewerBase.updateHeight(),this.viewerBase.onWindowResize(),this.toolbar&&this.toolbar.annotationToolbarModule&&(this.toolbar.annotationToolbarModule.isToolbarHidden?this.toolbar.annotationToolbarModule.adjustViewer(!1):this.toolbar.annotationToolbarModule.adjustViewer(!0));break;case"width":this.width=e.width,this.viewerBase.updateWidth(),this.viewerBase.onWindowResize();break;case"customStamp":this.renderCustomerStamp(this.customStamp[0]);break;case"customStampSettings":this.customStampSettings=e.customStampSettings;break;case"enableFormFields":break;case"highlightSettings":case"underlineSettings":case"strikethroughSettings":this.annotationModule&&this.annotationModule.textMarkupAnnotationModule&&this.annotationModule.textMarkupAnnotationModule.updateTextMarkupSettings(a);break;case"commentPanelVisible":e.commentPanelVisible?this.annotation.showCommentsPanelInBlazor():this.viewerBase.navigationPane.closeCommentPanelContainer()}}this.updateOptions(e)},e.prototype.preRender=function(){this.localeObj=new sf.base.L10n(this.getModuleName(),this.defaultLocale,"en-US")},e.prototype.render=function(){this.viewerBase.initializeComponent(),this.enableTextSelection&&this.textSelectionModule?this.textSelectionModule.enableTextSelectionMode():this.viewerBase.disableTextSelectionMode(),this.drawing.renderLabels(this)},e.prototype.getModuleName=function(){return"PdfViewer"},e.prototype.getLocaleConstants=function(){return this.defaultLocale},e.prototype.setJsonData=function(e){this.viewerBase.ajaxData=e},e.prototype.onPropertyChanged=function(e,t){for(var i=0,n=Object.keys(e);i<n.length;i++){var o=n[i];switch(o){case"locale":case"enableToolbar":break;case"enableCommentPanel":this.toolbarModule&&this.toolbarModule.annotationToolbarModule&&this.toolbarModule.annotationToolbarModule.enableCommentPanelTool(this.enableCommentPanel),this.enableCommentPanel||this.viewerBase.navigationPane&&this.viewerBase.navigationPane.closeCommentPanelContainer();break;case"documentPath":this._dotnetInstance.invokeMethodAsync("LoadDocumentFromClient",e.documentPath);break;case"interactionMode":this.interactionMode=e.interactionMode,"Pan"===e.interactionMode?(this.viewerBase.initiatePanning(),this.toolbar&&this.toolbar.updateInteractionTools(!1)):"TextSelection"===e.interactionMode&&(this.viewerBase.initiateTextSelectMode(),this.toolbar&&this.toolbar.updateInteractionTools(!0));break;case"height":this.height=e.height,this.viewerBase.updateHeight(),this.viewerBase.onWindowResize(),this.toolbar&&this.toolbar.annotationToolbarModule&&(this.toolbar.annotationToolbarModule.isToolbarHidden?this.toolbar.annotationToolbarModule.adjustViewer(!1):this.toolbar.annotationToolbarModule.adjustViewer(!0));break;case"width":this.width=e.width,this.viewerBase.updateWidth(),this.viewerBase.onWindowResize();break;case"customStamp":this.renderCustomerStamp(this.customStamp[0]);break;case"customStampSettings":e.customStampSettings.customStamps&&this.renderCustomerStamp(this.customStampSettings.customStamps[0]);break;case"enableFormFields":if(this.enableFormFields&&this.formFieldsModule)for(var a=0;a<this.pageCount;a++)this.formFieldsModule.renderFormFields(a);else this.formFieldsModule=new pt(this,this.viewerBase),this.formFieldsModule.formFieldsReadOnly(this.enableFormFields);break;case"highlightSettings":case"underlineSettings":case"strikethroughSettings":this.annotationModule&&this.annotationModule.textMarkupAnnotationModule&&this.annotationModule.textMarkupAnnotationModule.updateTextMarkupSettings(o)}}},e.prototype.renderCustomerStamp=function(e){this.annotation.stampAnnotationModule.isStampAddMode=!0,this.annotationModule.stampAnnotationModule.isStampAnnotSelected=!0,this.viewerBase.stampAdded=!0,this.viewerBase.isAlreadyAdded=!1,this.annotation.stampAnnotationModule.createCustomStampAnnotation(e.customStampImageSource,e.customStampName)},e.prototype.getPersistData=function(){return"PdfViewer"},e.prototype.requiredModules=function(){this.enableMagnification&&sf.base.isNullOrUndefined(this.magnificationModule)&&(this.magnificationModule=new it(this,this.viewerBase)),this.enableNavigation&&sf.base.isNullOrUndefined(this.navigationModule)&&(this.navigationModule=new nt(this,this.viewerBase)),(this.enableToolbar||this.enableNavigationToolbar||this.enableAnnotationToolbar)&&sf.base.isNullOrUndefined(this.toolbarModule)&&(this.toolbarModule=new at(this,this.viewerBase)),this.enableHyperlink&&sf.base.isNullOrUndefined(this.linkAnnotationModule)&&(this.linkAnnotationModule=new Je(this,this.viewerBase)),this.enableThumbnail&&sf.base.isNullOrUndefined(this.thumbnailViewModule)&&(this.thumbnailViewModule=new ot(this,this.viewerBase)),this.enableBookmark&&sf.base.isNullOrUndefined(this.bookmarkViewModule)&&(this.bookmarkViewModule=new rt(this,this.viewerBase)),this.enableTextSelection&&sf.base.isNullOrUndefined(this.printModule)&&(this.textSelectionModule=new lt(this,this.viewerBase)),this.enableTextSearch&&sf.base.isNullOrUndefined(this.textSearchModule)&&(this.textSearchModule=new dt(this,this.viewerBase)),this.enablePrint&&sf.base.isNullOrUndefined(this.printModule)&&(this.printModule=new ht(this,this.viewerBase)),this.enableAnnotation&&sf.base.isNullOrUndefined(this.annotationModule)&&(this.annotationModule=new Ue(this,this.viewerBase)),this.enableFormFields&&sf.base.isNullOrUndefined(this.formFieldsModule)&&(this.formFieldsModule=new pt(this,this.viewerBase))},e.prototype.load=function(e,t){0!==this.pageCount?this.viewerBase.clear(!0):this.viewerBase.clear(!1),this.pageCount=0,this.currentPageNumber=0,this.updatePdfViewerOptions("PageCount",0),this.updatePdfViewerOptions("CurrentPageNumber",0),this.viewerBase.blazorUIAdaptor.resetToolbar(),this.viewerBase.initiatePageRender(e,t)},e.prototype.loadDocument=function(e,t,i){0!==this.pageCount?this.viewerBase.clear(!0):this.viewerBase.clear(!1),this.pageCount=0,this.currentPageNumber=0,this.viewerBase.blazorUIAdaptor.resetToolbar(),this.fileName=i,this.viewerBase.initiateLoadDocument(e,t,i)},e.prototype.loadSuccess=function(e,t){this.viewerBase.loadSuccess(e,t)},e.prototype.focusElement=function(e){var t=document.getElementById(e);null!=t&&t.focus()},e.prototype.download=function(){this.enableDownload&&this.viewerBase.download()},e.prototype.saveAsBlob=function(){var e=this;return this.enableDownload?new Promise((function(t,i){t(e.viewerBase.saveAsBlob())})):null},e.prototype.updateViewerContainer=function(){this.viewerBase.updateViewerContainer()},e.prototype.showNotificationPopup=function(e){this.viewerBase.showNotificationPopup(e)},e.prototype.focusFormField=function(e){var t=this;if("string"==typeof e)for(var i=this.retrieveFormFields(),n=0;n<i.length;n++)i[n].name===e&&(e=i[n]);if(e){this.viewerBase.isFocusField=!0,this.viewerBase.focusField=e;var o=parseFloat(e.id.split("_")[1]);this.navigationModule.goToPage(o+1),setTimeout((function(){var i=document.getElementById(e.id);i&&(i.focus(),t.viewerBase.isFocusField=!1,t.viewerBase.focusField=[])}),100)}},e.prototype.updateFormFieldsValue=function(e){var t=document.getElementById(e.id);if((t=t||document.getElementById(e.id+"_content_html_element").children[0].children[0])&&"Textbox"===e.type||"Password"===e.type)t.value=e.value;else if("RadioButton"===e.type||"CheckBox"===e.type){"CheckBox"===e.type&&(t.style.appearance="auto");var i=e.value.toLowerCase();!0===t.checked?"false"===i&&(t.checked=!1):"true"!==i&&"on"!==i&&"yes"!==i||(t.checked=!0)}else"DropDown"!==e.type&&"ListBox"!==e.type||("SELECT"===t.nodeName&&(t.options[t.selectedIndex].text=e.value),"DATALIST"===t.nodeName&&((t=document.getElementById(t.id.replace(this.element.id+"input_","editableDropdown"))).value=e.value));if("SignatureField"===e.type||"InitialField"===e.type){e.signatureType&&(e.signatureType=e.signatureType[0]),e.fontName=e.fontName?e.fontName:e.fontFamily;var n=this.getFormFieldByID(e.id).Value===e.value;t.classList.contains("e-pdfviewer-signatureformfields-signature")&&!n&&this.annotation.deleteAnnotationById(e.id),e.signatureType&&e.value||(e.signatureType=(e.value&&e.value.indexOf("base64"))>-1?"Image":e.value&&e.value.startsWith("M")&&e.value.split(",")[1].split(" ")[1].startsWith("L")?"Path":"Type"),n||this.formFieldsModule.drawSignature(e.signatureType,e.value,t,e.fontName)}else this.formFieldsModule.updateDataInSession(t)},e.prototype.getFormFieldByID=function(e){var t=window.sessionStorage.getItem(this.viewerBase.documentId+"_formfields"),i=JSON.parse(t);return i[i.findIndex((function(t){return t.uniqueID===e}))]},e.prototype.undo=function(){this.annotationModule&&this.annotationModule.undo()},e.prototype.redo=function(){this.annotationModule&&this.annotationModule.redo()},e.prototype.unload=function(){this.viewerBase.clear(!0),this.updatePdfViewerOptions("PageCount",0),this.pageCount=0,this.viewerBase.blazorUIAdaptor.resetToolbar(),this.magnificationModule.zoomTo(100)},e.prototype.destroy=function(e){sf.base.isNullOrUndefined(this.element)||e||null!==this.element.parentElement&&this.element.parentElement.removeChild(this.element),this.viewerBase.navigationPane&&(this.viewerBase.navigationPane.restrictUpdateZoomValue=!1),this.viewerBase.destroy(),this.viewerBase.navigationPane&&(this.viewerBase.navigationPane.restrictUpdateZoomValue=!0)},e.prototype.importAnnotation=function(e,t){if(this.annotationModule)if("string"==typeof e){var i=e.indexOf(".xfdf")>-1||t.indexOf("Xfdf")>-1;if(t)if(e.indexOf("</xfdf>")>-1)this.viewerBase.importAnnotations(e,t,!1);else if("Json"==t)if(e.includes("pdfAnnotation"))this.importAnnotationsAsJson(e);else if(e.toLowerCase().endsWith(".json"))this.viewerBase.importAnnotations(e,t,i,!0);else{var n=e.split(",")[1]?e.split(",")[1]:e.split(",")[0];e=decodeURIComponent(escape(atob(n))),this.importAnnotationsAsJson(e)}else this.viewerBase.importAnnotations(e,t,i);else if("json"===e.split(".")[1])if(e.includes("pdfAnnotation"))this.importAnnotationsAsJson(e);else{n=e.split(",")[1]?e.split(",")[1]:e.split(",")[0];e=decodeURIComponent(escape(atob(n))),this.importAnnotationsAsJson(e)}else this.viewerBase.importAnnotations(e,U.Xfdf,i)}else this.viewerBase.importAnnotations(e)},e.prototype.importAnnotationsAsJson=function(e){var t=JSON.parse(e),i=t.pdfAnnotation[Object.keys(t.pdfAnnotation)[0]];if(Object.keys(t.pdfAnnotation).length>=1&&(i.textMarkupAnnotation||i.measureShapeAnnotation||i.freeTextAnnotation||i.stampAnnotations||i.signatureInkAnnotation||i.shapeAnnotation&&i.shapeAnnotation[0].Bounds))this.viewerBase.isPDFViewerJson=!0,this.viewerBase.importAnnotations(t,U.Json);else{this.viewerBase.isPDFViewerJson=!1;var n=(new TextEncoder).encode(e);this.viewerBase.importAnnotations(btoa(String.fromCharCode.apply(null,n)),U.Json)}},e.prototype.exportAnnotation=function(e){this.annotationModule&&(e&&"Xfdf"===e?this.viewerBase.exportAnnotations(U.Xfdf):this.viewerBase.exportAnnotations(U.Json))},e.prototype.exportAnnotationsAsObject=function(){var e=this;return this.annotationModule?new Promise((function(t,i){e.viewerBase.exportAnnotationsAsObject().then((function(e){t(e)}))})):null},e.prototype.exportAnnotationsAsBase64String=function(e){var t=this;return this.annotationModule?new Promise((function(i,n){t.viewerBase.createRequestForExportAnnotations(!1,e,!0).then((function(e){i(e)}))})):null},e.prototype.addAnnotation=function(e){this.viewerBase&&this.viewerBase.addAnnotation(e)},e.prototype.importFormFields=function(e){this.formFieldsModule&&this.viewerBase.importFormFields(e)},e.prototype.importFormFieldsAsStream=function(e,t){this.formFieldsModule&&this.viewerBase.createRequestForImportingFormfields(e,t)},e.prototype.exportFormFields=function(e){this.formFieldsModule&&this.viewerBase.exportFormFields(e)},e.prototype.exportFormFieldsAsObject=function(){var e=this;return this.formFieldsModule?new Promise((function(t,i){e.viewerBase.exportFormFieldsAsObject().then((function(e){t(e)}))})):null},e.prototype.exportFormFieldsAsStream=function(e){var t=this;return this.formFieldsModule?new Promise((function(i,n){t.viewerBase.createRequestForExportFormfields(!1,null,e).then((function(e){i(e)}))})):null},e.prototype.resetFormFields=function(){this.formFieldsModule.resetFormFields()},e.prototype.clearFormFields=function(e){this.formFieldsModule.clearFormFields(e)},e.prototype.deleteAnnotations=function(){this.annotationModule&&this.viewerBase.deleteAnnotations()},e.prototype.retrieveFormFields=function(){return this.formFieldCollections},e.prototype.updateFormFields=function(e){this.updateFormFieldsValue(e),this.formFieldsModule.updateFormFieldValues(e)},e.prototype.fireAjaxRequestInitiate=function(e){},e.prototype.fireButtonFieldClickEvent=function(e,t,i){},e.prototype.fireFormFieldClickEvent=function(e,t,i,n){return a(this,void 0,void 0,(function(){var o,a=this;return s(this,(function(s){return(o={name:e,field:t,cancel:i}).field.type=t.type,"signature"===o.field.name&&(o.field.signatureType=[O.Draw]),this._dotnetInstance.invokeMethodAsync("Trigger","FormFieldClick",o).then((function(e){if("SignatureField"===t.type||"InitialField"===t.type){"InitialField"===t.type?a.viewerBase.isInitialField=!0:a.viewerBase.isInitialField=!1;var i=document.getElementById(t.id);i=i||(document.getElementById(t.id+"_content_html_element")?document.getElementById(t.id+"_content_html_element").children[0].children[0]:null),!e.cancel&&i&&!i.disabled&&i.classList.contains("e-pdfviewer-signatureformfields")&&(n||sf.base.isNullOrUndefined(n))&&a.viewerBase.signatureModule.showSignatureDialog(!0)}})),[2]}))}))},e.prototype.fireFormFieldDoubleClickEvent=function(e){return e},e.prototype.fireFormFieldPropertiesChangeEvent=function(e,t,i,n,o,a,s,r,l,d,h,p,c,u,f,g,m,w,y,S){},e.prototype.fireFormFieldMouseLeaveEvent=function(e,t,i){},e.prototype.fireFormFieldMouseoverEvent=function(e,t,i,n,o,a,s){},e.prototype.fireFormFieldMoveEvent=function(e,t,i,n,o){},e.prototype.fireFormFieldResizeEvent=function(e,t,i,n,o){},e.prototype.fireFormFieldSelectEvent=function(e,t,i,n){},e.prototype.fireFormFieldUnselectEvent=function(e,t,i){},e.prototype.fireDocumentLoad=function(e){var t={name:"documentLoad",documentName:this.fileName,pageData:e};this._dotnetInstance.invokeMethodAsync("LoadDocument",null),this.viewerBase.blazorUIAdaptor.loadDocument(),this._dotnetInstance.invokeMethodAsync("Trigger","DocumentLoaded",t)},e.prototype.fireDocumentUnload=function(e){var t={name:"documentUnload",documentName:e};this._dotnetInstance.invokeMethodAsync("Trigger","DocumentUnloaded",t)},e.prototype.fireDocumentLoadFailed=function(e,t){var i={name:"documentLoadFailed",documentName:this.fileName,isPasswordRequired:e,password:t};this._dotnetInstance.invokeMethodAsync("Trigger","DocumentLoadFailed",i)},e.prototype.fireAjaxRequestFailed=function(e,t,i,n){var o={name:"ajaxRequestFailed",documentName:this.fileName,errorStatusCode:e,errorMessage:t,action:i};n&&(o.retryCount=!0),this._dotnetInstance.invokeMethodAsync("Trigger","AjaxRequestFailed",o)},e.prototype.fireAjaxRequestSuccess=function(e,t){this.fileName;return!!!1},e.prototype.fireValidatedFailed=function(e){var t={};t.documentName=this.fileName,t.formFields=this.formFieldCollections,t.nonFillableFields=this.viewerBase.nonFillableFields,this._dotnetInstance.invokeMethodAsync("Trigger","ValidateFormFields",t)},e.prototype.firePageClick=function(e,t,i){if(!Number.isNaN(i)){var n={name:"pageClick",documentName:this.fileName,x:e,y:t,pageNumber:i};this._dotnetInstance.invokeMethodAsync("Trigger","PageClick",n)}},e.prototype.firePageChange=function(e){var t={name:"pageChange",documentName:this.fileName,currentPageNumber:this.currentPageNumber,previousPageNumber:e};this._dotnetInstance.invokeMethodAsync("Trigger","PageChange",t),this.viewerBase.blazorUIAdaptor.pageChanged(this.currentPageNumber)},e.prototype.fireZoomChange=function(){var e={name:"zoomChange",zoomValue:Math.round(100*this.magnificationModule.zoomFactor),previousZoomValue:Math.round(100*this.magnificationModule.previousZoomFactor)};this._dotnetInstance.invokeMethodAsync("Trigger","ZoomChange",e)},e.prototype.fireHyperlinkClick=function(e,t){return a(this,void 0,void 0,(function(){var i;return s(this,(function(n){switch(n.label){case 0:return i={name:"hyperlinkClick",hyperlink:e,hyperlinkElement:t,cancel:!1},[4,this._dotnetInstance.invokeMethodAsync("Trigger","HyperlinkClick",i)];case 1:return(i=n.sent()).hyperlinkElement.href!=i.hyperlink&&(t.href=i.hyperlink),i.cancel?[2,!1]:[2,!0]}}))}))},e.prototype.fireHyperlinkHover=function(e){var t={name:"hyperlinkMouseOver",hyperlinkElement:e};this._dotnetInstance.invokeMethodAsync("Trigger","HyperlinkMouseOver",t)},e.prototype.fireFocusOutFormField=function(e,t){},e.prototype.fireAnnotationAdd=function(e,t,i,n,o,a,s,r,l,d,h){n.x=n.left,n.y=n.top;var p={name:"annotationAdd",pageIndex:e,annotationId:t,annotationType:i,annotationBound:n,annotationSettings:o};a&&(p.annotationSettings.textMarkupContent=a,p.annotationSettings.textMarkupStartIndex=s,p.annotationSettings.textMarkupEndIndex=r),l&&(p.labelSettings=l),d&&(p.multiplePageCollection=d),"Image"===i&&(p.customStampName=h),this.viewerBase.isAnnotationSelect=!1,this.viewerBase.blazorUIAdaptor.annotationAdd(),this._dotnetInstance.invokeMethodAsync("Trigger","AnnotationAdd",p)},e.prototype.fireAnnotationRemove=function(e,t,i,n,o,a,s,r){var l={name:"annotationRemove",pageIndex:e,annotationId:t,annotationType:i,annotationBounds:n};o&&(l.textMarkupContent=o,l.textMarkupStartIndex=a,l.textMarkupEndIndex=s),r&&(l.multiplePageCollection=r),this._dotnetInstance.invokeMethodAsync("Trigger","AnnotationRemove",l)},e.prototype.fireBeforeAddFreeTextAnnotation=function(e){},e.prototype.fireCommentAdd=function(e,t,i){},e.prototype.fireCommentEdit=function(e,t,i){},e.prototype.fireCommentDelete=function(e,t,i){},e.prototype.fireCommentSelect=function(e,t,i){},e.prototype.fireCommentStatusChanged=function(e,t,i,n){},e.prototype.fireAnnotationPropertiesChange=function(e,t,i,n,o,a,s,r,l,d,h){var p={name:"annotationPropertiesChange",pageIndex:e,annotationId:t,annotationType:i,isColorChanged:n,isOpacityChanged:o,isTextChanged:a,isCommentsChanged:s};r&&(p.textMarkupContent=r,p.textMarkupStartIndex=l,p.textMarkupEndIndex=d),h&&(p.multiplePageCollection=h),this._dotnetInstance.invokeMethodAsync("Trigger","AnnotationPropertiesChange",p)},e.prototype.fireSignatureAdd=function(e,t,i,n,o,a,s,r){var l={pageIndex:e,id:t,type:i,bounds:n,opacity:o};s&&(l.thickness=s),a&&(l.strokeColor=a),r&&(l.data=r),this._dotnetInstance.invokeMethodAsync("Trigger","AddSignature",l)},e.prototype.fireSignatureRemove=function(e,t,i,n){var o={pageIndex:e,id:t,type:i,bounds:n};this._dotnetInstance.invokeMethodAsync("Trigger","RemoveSignature",o)},e.prototype.fireSignatureMove=function(e,t,i,n,o,a,s,r){var l={pageIndex:e,id:t,type:i,opacity:n,strokeColor:o,thickness:a,previousPosition:s,currentPosition:r};this._dotnetInstance.invokeMethodAsync("Trigger","MoveSignature",l)},e.prototype.fireSignaturePropertiesChange=function(e,t,i,n,o,a,s,r){var l={pageIndex:e,id:t,type:i,isStrokeColorChanged:n,isOpacityChanged:o,isThicknessChanged:a,oldValue:s,newValue:r};this._dotnetInstance.invokeMethodAsync("Trigger","SignaturePropertiesChange",l)},e.prototype.fireSignatureResize=function(e,t,i,n,o,a,s,r){var l={pageIndex:e,id:t,type:i,opacity:n,strokeColor:o,thickness:a,currentPosition:s,previousPosition:r};this._dotnetInstance.invokeMethodAsync("Trigger","ResizeSignature",l)},e.prototype.fireSignatureSelect=function(e,t,i){var n={id:e,pageIndex:t,signature:i};this._dotnetInstance.invokeMethodAsync("Trigger","SignatureSelect",n)},e.prototype.fireSignatureUnselect=function(e,t,i){var n={id:e,pageIndex:t,signature:i};this._dotnetInstance.invokeMethodAsync("Trigger","SignatureUnselected",n)},e.prototype.fireAnnotationSelect=function(e,t,i,n,o,a,s){var r={name:"annotationSelect",annotationId:e,pageIndex:t,annotation:i};if(n&&(r={name:"annotationSelect",annotationId:e,pageIndex:t,annotation:i,annotationCollection:n}),o&&(r.multiplePageCollection=o),a&&(r.isProgrammaticSelection=a),s&&(r.annotationAddMode=s),i){if("FreeText"===i.type){var l={isBold:!1,isItalic:!1,isStrikeout:!1,isUnderline:!1};1===i.fontStyle?l.isBold=!0:2===i.fontStyle?l.isItalic=!0:3===i.fontStyle?l.isStrikeout=!0:4===i.fontStyle&&(l.isUnderline=!0),i.fontStyle=l}this._dotnetInstance.invokeMethodAsync("Trigger","AnnotationSelect",r);var d=this.annotationCollection.filter((function(e){return e.annotationId===r.annotationId}));d.length>0&&!d[0].annotationSettings.isLock&&this.viewerBase.blazorUIAdaptor.annotationSelect(i.type)}},e.prototype.fireAnnotationUnSelect=function(e,t,i){for(var n={name:"annotationUnSelect",annotationId:e,pageIndex:t,annotation:i},o=0;o<this.annotationCollection.length;o++)this.annotationCollection[o].annotationId==i.annotName&&(n.annotation=this.annotationCollection[o]);this._dotnetInstance.invokeMethodAsync("Trigger","AnnotationUnSelect",n),this.viewerBase.blazorUIAdaptor.annotationUnSelect()},e.prototype.fireAnnotationDoubleClick=function(e,t,i){var n={name:"annotationDblClick",annotationId:e,pageIndex:t,annotation:i};this._dotnetInstance.invokeMethodAsync("Trigger","AnnotationDoubleClick",n)},e.prototype.fireTextSelectionStart=function(e){this.isTextSelectionStarted=!0;var t={name:"textSelectionStart",pageIndex:e};this._dotnetInstance.invokeMethodAsync("Trigger","TextSelectionStart",t)},e.prototype.fireTextSelectionEnd=function(e,t,i){if(this.isTextSelectionStarted){var n={name:"textSelectionEnd",pageIndex:e,textContent:t,textBounds:i};this._dotnetInstance.invokeMethodAsync("Trigger","TextSelectionEnd",n),this.isTextSelectionStarted=!1}},e.prototype.renderDrawing=function(e,t){sf.base.isNullOrUndefined(t)&&this.viewerBase.activeElements.activePageID&&!this.viewerBase.isPrint&&(t=this.viewerBase.activeElements.activePageID),this.annotation&&this.annotation.renderAnnotations(t,null,null,null,e)},e.prototype.fireAnnotationResize=function(e,t,i,n,o,a,s,r,l,d){var h={name:"annotationResize",pageIndex:e,annotationId:t,annotationType:i,annotationBound:n,annotationSettings:o};a&&(h.textMarkupContent=a,h.textMarkupStartIndex=s,h.textMarkupEndIndex=r),l&&(h.labelSettings=l),d&&(h.multiplePageCollection=d),this._dotnetInstance.invokeMethodAsync("Trigger","AnnotationResize",h)},e.prototype.fireAnnotationMoving=function(e,t,i,n,o,a){},e.prototype.fireAnnotationMove=function(e,t,i,n,o,a){var s={name:"annotationMove",pageIndex:e,annotationId:t,annotationType:i,annotationSettings:n,previousPosition:o,currentPosition:a};this._dotnetInstance.invokeMethodAsync("Trigger","AnnotationMove",s)},e.prototype.fireAnnotationMouseover=function(e,t,i,n,o,a,s){var r={name:"annotationMouseover",annotationId:e,pageIndex:t,annotationType:i,annotationBounds:n,annotation:o,pageX:a.left,pageY:a.top,X:s.left,Y:s.top};"Perimeter calculation"===o.subject?r.annotationType="Perimeter":"Area calculation"===o.subject?r.annotationType="Area":"Volume calculation"===o.subject?r.annotationType="Volume":"Arrow"===o.subject?r.annotationType="Arrow":"Circle"===o.subject&&(r.annotationType="Circle"),this._dotnetInstance.invokeMethodAsync("Trigger","AnnotationMouseOver",r)},e.prototype.fireAnnotationMouseLeave=function(e){},e.prototype.firePageMouseover=function(e,t){var i={pageX:e,pageY:t};this._dotnetInstance.invokeMethodAsync("Trigger","PageMouseOver",i)},e.prototype.fireDownloadStart=function(e){var t={fileName:e};this._dotnetInstance.invokeMethodAsync("Trigger","DownloadStart",t)},e.prototype.fireDownloadEnd=function(e,t){var i={fileName:e,downloadDocument:t};this._dotnetInstance.invokeMethodAsync("Trigger","DownloadEnd",i)},e.prototype.firePrintStart=function(){return a(this,void 0,void 0,(function(){var e,t=this;return s(this,(function(i){return e={fileName:this.downloadFileName,cancel:!1},this._dotnetInstance.invokeMethodAsync("Trigger","PrintStart",e).then((function(e){e.cancel||t.printModule.print()})),[2]}))}))},e.prototype.triggerEvent=function(e,t){return a(this,void 0,void 0,(function(){return s(this,(function(e){return[2,null]}))}))},e.prototype.firePrintEnd=function(e){var t={fileName:e};this._dotnetInstance.invokeMethodAsync("Trigger","PrintEnd",t)},e.prototype.fireThumbnailClick=function(e){var t={name:"thumbnailClick",pageNumber:e};this._dotnetInstance.invokeMethodAsync("Trigger","ThumbnailClick",t)},e.prototype.fireBookmarkClick=function(e,t,i,n){},e.prototype.fireImportStart=function(e){var t={name:"importAnnotationsStart",importData:e,formFieldData:null};this._dotnetInstance.invokeMethodAsync("Trigger","ImportAnnotationsStart",t)},e.prototype.fireExportStart=function(e){var t={name:"exportAnnotationsStart",exportData:e,formFieldData:null};this._dotnetInstance.invokeMethodAsync("Trigger","ExportAnnotationsStart",t)},e.prototype.fireImportSuccess=function(e){var t={name:"importAnnotationsSuccess",importData:e,formFieldData:null};this._dotnetInstance.invokeMethodAsync("Trigger","ImportAnnotationsSuccess",t)},e.prototype.fireExportSuccess=function(e,t){var i={name:"exportAnnotationsSuccess",exportData:e,fileName:t,formFieldData:null};this._dotnetInstance.invokeMethodAsync("Trigger","ExportAnnotationsSuccess",i)},e.prototype.fireImportFailed=function(e,t){var i={name:"importAnnotationsFailed",importData:e,errorDetails:t,formFieldData:null};this._dotnetInstance.invokeMethodAsync("Trigger","ImportAnnotationsFailed",i)},e.prototype.fireExportFailed=function(e,t){var i={name:"exportAnnotationsFailed",exportData:e,errorDetails:t,formFieldData:null};this._dotnetInstance.invokeMethodAsync("Trigger","ExportAnnotationsFailed",i)},e.prototype.fireFormImportStarted=function(e){},e.prototype.fireFormExportStarted=function(e){},e.prototype.fireFormImportSuccess=function(e){},e.prototype.fireFormExportSuccess=function(e,t){},e.prototype.fireFormImportFailed=function(e,t){},e.prototype.fireFormExportFailed=function(e,t){},e.prototype.fireTextExtractionCompleted=function(e){var t={documentTextCollection:e};this._dotnetInstance.invokeMethodAsync("Trigger","ExtractTextCompleted",t)},e.prototype.fireTextSearchStart=function(e,t){var i={name:"textSearchStart",searchText:e,matchCase:t};this._dotnetInstance.invokeMethodAsync("Trigger","TextSearchStart",i)},e.prototype.fireTextSearchComplete=function(e,t){var i={name:"textSearchComplete",searchText:e,matchCase:t};this._dotnetInstance.invokeMethodAsync("Trigger","TextSearchComplete",i)},e.prototype.fireTextSearchHighlight=function(e,t,i,n){var o={name:"textSearchHighlight",searchText:e,matchCase:t,bounds:i,pageNumber:n};this._dotnetInstance.invokeMethodAsync("Trigger","TextSearchHighlight",o)},e.prototype.renderAdornerLayer=function(e,t,i,n){$(e,t,i,n,this)},e.prototype.renderSelector=function(e,t){this.drawing.renderSelector(e,t)},e.prototype.select=function(e,t,i,n){if(this.enableServerDataBinding(!1),this.annotationModule){var o=this.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage,a=this.selectedItems.annotations[0];if(o){var s=this.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation;this.annotationModule.textMarkupAnnotationModule.clearCurrentAnnotationSelection(o,!0),this.fireAnnotationUnSelect(s.annotName,s.pageNumber,s)}i||this.viewerBase.activeElements&&this.viewerBase.activeElements.activePageID>=0&&(a&&this.fireAnnotationUnSelect(a.annotName,a.pageIndex,a),this.clearSelection(this.viewerBase.activeElements.activePageID))}this.drawing.select(e,t,i,n)},e.prototype.getPageTable=function(e){return this.drawing.getPageTable(e)},e.prototype.dragSelectedObjects=function(e,t,i,n,o){return this.drawing.dragSelectedObjects(e,t,i,n,o)},e.prototype.scaleSelectedItems=function(e,t,i){return this.drawing.scaleSelectedItems(e,t,i)},e.prototype.dragConnectorEnds=function(e,t,i,n,o,a,s){return this.drawing.dragConnectorEnds(e,t,i,n,o,null,s)},e.prototype.clearSelection=function(e){this.enableServerDataBinding(!1);var t=this.selectedItems;t.annotations.length>0?this.selectedItems.annotations[0]:this.selectedItems.formFields[0];t.annotations.length>0?(t.offsetX=0,t.offsetY=0,t.width=0,t.height=0,t.rotateAngle=0,t.annotations=[],t.wrapper=null):t.formFields.length>0&&(t.offsetX=0,t.offsetY=0,t.width=0,t.height=0,t.rotateAngle=0,t.formFields=[],t.wrapper=null),this.drawing.clearSelectorLayer(e),this.viewerBase.isAnnotationSelect=!1,this.viewerBase.isFormFieldSelect=!1},e.prototype.add=function(e){return this.drawing.add(e)},e.prototype.remove=function(e){return this.drawing.remove(e)},e.prototype.copy=function(){return this.annotation&&(this.annotation.isShapeCopied=!0),this.drawing.copy()},e.prototype.rotate=function(e,t){return this.drawing.rotate(this.selectedItems,e,null,t)},e.prototype.paste=function(e){var t;return this.viewerBase.activeElements.activePageID&&(t=this.viewerBase.activeElements.activePageID),this.drawing.paste(e,t||0)},e.prototype.refresh=function(){for(var e=0;e<this.annotations.length;e++){if(void 0!==this.zIndexTable.length){for(var t=0;t<this.zIndexTable.length;t++){for(var i=this.zIndexTable[t].objects,n=0;n<i.length;n++)i.splice(n,1);delete this.zIndexTable[t]}this.annotations[e]&&delete this.annotations[e],this.selectedItems.annotations&&this.selectedItems.annotations[e]&&delete this.selectedItems.annotations[e],this.zIndexTable=[],this.renderDrawing()}this.annotations&&0!==this.annotations.length&&(this.annotations.length=0,this.selectedItems.annotations.length=0)}},e.prototype.cut=function(){var e;return this.viewerBase.activeElements.activePageID&&(e=this.viewerBase.activeElements.activePageID),this.annotation&&(this.annotation.isShapeCopied=!0),this.drawing.cut(e||0)},e.prototype.nodePropertyChange=function(e,t){this.drawing.nodePropertyChange(e,t)},e.prototype.enableServerDataBinding=function(e,t){void 0===t&&(t=!1)},e.prototype.checkBoundaryConstraints=function(e,t,i,n,o,a){return this.drawing.checkBoundaryConstraints(e,t,i,n,o,a)},o([sf.base.Event()],e.prototype,"created",void 0),o([sf.base.Event()],e.prototype,"documentLoad",void 0),o([sf.base.Event()],e.prototype,"documentUnload",void 0),o([sf.base.Event()],e.prototype,"documentLoadFailed",void 0),o([sf.base.Event()],e.prototype,"ajaxRequestFailed",void 0),o([sf.base.Event()],e.prototype,"ajaxRequestSuccess",void 0),o([sf.base.Event()],e.prototype,"validateFormFields",void 0),o([sf.base.Event()],e.prototype,"pageClick",void 0),o([sf.base.Event()],e.prototype,"pageChange",void 0),o([sf.base.Event()],e.prototype,"hyperlinkClick",void 0),o([sf.base.Event()],e.prototype,"hyperlinkMouseOver",void 0),o([sf.base.Event()],e.prototype,"zoomChange",void 0),o([sf.base.Event()],e.prototype,"annotationAdd",void 0),o([sf.base.Event()],e.prototype,"annotationRemove",void 0),o([sf.base.Event()],e.prototype,"annotationPropertiesChange",void 0),o([sf.base.Event()],e.prototype,"annotationResize",void 0),o([sf.base.Event()],e.prototype,"addSignature",void 0),o([sf.base.Event()],e.prototype,"removeSignature",void 0),o([sf.base.Event()],e.prototype,"moveSignature",void 0),o([sf.base.Event()],e.prototype,"signaturePropertiesChange",void 0),o([sf.base.Event()],e.prototype,"resizeSignature",void 0),o([sf.base.Event()],e.prototype,"signatureSelect",void 0),o([sf.base.Event()],e.prototype,"annotationSelect",void 0),o([sf.base.Event()],e.prototype,"annotationUnSelect",void 0),o([sf.base.Event()],e.prototype,"annotationDoubleClick",void 0),o([sf.base.Event()],e.prototype,"annotationMove",void 0),o([sf.base.Event()],e.prototype,"annotationMoving",void 0),o([sf.base.Event()],e.prototype,"annotationMouseover",void 0),o([sf.base.Event()],e.prototype,"annotationMouseLeave",void 0),o([sf.base.Event()],e.prototype,"pageMouseover",void 0),o([sf.base.Event()],e.prototype,"importStart",void 0),o([sf.base.Event()],e.prototype,"exportStart",void 0),o([sf.base.Event()],e.prototype,"importSuccess",void 0),o([sf.base.Event()],e.prototype,"exportSuccess",void 0),o([sf.base.Event()],e.prototype,"importFailed",void 0),o([sf.base.Event()],e.prototype,"exportFailed",void 0),o([sf.base.Event()],e.prototype,"extractTextCompleted",void 0),o([sf.base.Event()],e.prototype,"thumbnailClick",void 0),o([sf.base.Event()],e.prototype,"bookmarkClick",void 0),o([sf.base.Event()],e.prototype,"textSelectionStart",void 0),o([sf.base.Event()],e.prototype,"textSelectionEnd",void 0),o([sf.base.Event()],e.prototype,"downloadStart",void 0),o([sf.base.Event()],e.prototype,"buttonFieldClick",void 0),o([sf.base.Event()],e.prototype,"formFieldClick",void 0),o([sf.base.Event()],e.prototype,"downloadEnd",void 0),o([sf.base.Event()],e.prototype,"printStart",void 0),o([sf.base.Event()],e.prototype,"printEnd",void 0),o([sf.base.Event()],e.prototype,"textSearchStart",void 0),o([sf.base.Event()],e.prototype,"textSearchComplete",void 0),o([sf.base.Event()],e.prototype,"textSearchHighlight",void 0),o([sf.base.Event()],e.prototype,"ajaxRequestInitiate",void 0),o([sf.base.Event()],e.prototype,"commentAdd",void 0),o([sf.base.Event()],e.prototype,"commentEdit",void 0),o([sf.base.Event()],e.prototype,"commentDelete",void 0),o([sf.base.Event()],e.prototype,"commentSelect",void 0),o([sf.base.Event()],e.prototype,"commentStatusChanged",void 0),o([sf.base.Event()],e.prototype,"beforeAddFreeText",void 0),o([sf.base.Event()],e.prototype,"formFieldFocusOut",void 0),o([sf.base.Event()],e.prototype,"formFieldAdd",void 0),o([sf.base.Event()],e.prototype,"formFieldRemove",void 0),o([sf.base.Event()],e.prototype,"formFieldPropertiesChange",void 0),o([sf.base.Event()],e.prototype,"formFieldMouseLeave",void 0),o([sf.base.Event()],e.prototype,"formFieldMouseover",void 0),o([sf.base.Event()],e.prototype,"formFieldMove",void 0),o([sf.base.Event()],e.prototype,"formFieldResize",void 0),o([sf.base.Event()],e.prototype,"formFieldSelect",void 0),o([sf.base.Event()],e.prototype,"formFieldUnselect",void 0),o([sf.base.Event()],e.prototype,"formFieldDoubleClick",void 0),e}()),l=(t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,i)},function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}),d=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.x=0,t.y=0,t.width=0,t.height=0,t.left=0,t.top=0,t.right=0,t.bottom=0,t.location={x:0,y:0},t.size=new sf.drawings.Size(0,0),t}l(t,e)}(sf.base.ChildProperty),function(){this.isBold=!1,this.isItalic=!1,this.isUnderline=!1,this.isStrikeout=!1}),h=function(){this.selectionBorderColor="",this.resizerBorderColor="black",this.resizerFillColor="#FF4081",this.resizerSize=8,this.selectionBorderThickness=1,this.resizerShape="Square",this.selectorLineDashArray=[],this.resizerCursorType=null},p=function(){this.id="",this.shapeAnnotationType="Rectangle",this.type="Rectangle",this.formFieldAnnotationType=null,this.measureType="",this.author="",this.modifiedDate="",this.subject="",this.notes="",this.isCommentLock=!1,this.strokeColor="black",this.fillColor="#ffffff00",this.stampFillColor="#ffffff00",this.stampStrokeColor="black",this.data="",this.opacity=1,this.thickness=1,this.borderStyle="",this.borderDashArray="",this.rotateAngle=0,this.isCloudShape=!1,this.cloudIntensity=0,this.leaderHeight=40,this.lineHeadStart=null,this.lineHeadEnd=null,this.vertexPoints=[],this.sourcePoint=null,this.sourceDecoraterShapes="None",this.taregetDecoraterShapes="None",this.targetPoint=null,this.segments=[],this.bounds={x:0,y:0},this.pageIndex=0,this.zIndex=-1,this.wrapper=null,this.isDynamicStamp=!1,this.dynamicText="",this.annotName="",this.comments=[],this.fontColor="#000",this.fontSize=16,this.fontFamily="Helvetica",this.fontStyle="None",this.enableShapeLabel=!1,this.labelContent="label",this.labelFillColor="#ffffff00",this.labelMaxLength=15,this.labelOpacity=1,this.annotationSelectorSettings=new h,this.labelBorderColor="#ffffff00",this.textAlign="left",this.signatureName="",this.minHeight=0,this.minWidth=0,this.maxHeight=0,this.maxWidth=0,this.isLock=!1,this.annotationAddMode="UI Drawn Annotation",this.previousFontSize=16,this.font=new d,this.labelBounds={x:0,y:0},this.customData=null,this.isPrint=!0,this.isReadonly=!1},c=function(e,t,i,n){this.id="",this.signatureType="",this.name="",this.value="",this.formFieldAnnotationType=null,this.backgroundColor="#daeaf7ff",this.color="black",this.borderColor="#303030",this.tooltip="",this.opacity=1,this.thickness=1,this.rotateAngle=0,this.bounds={x:0,y:0},this.pageIndex=0,this.pageNumber=1,this.zIndex=-1,this.wrapper=null,this.fontSize=16,this.fontFamily="Helvetica",this.fontStyle="None",this.alignment="left",this.minHeight=0,this.minWidth=0,this.maxHeight=0,this.maxWidth=0,this.maxLength=0,this.visibility="visible",this.isPrint=!0,this.isReadonly=!1,this.isChecked=!1,this.isSelected=!1,this.isRequired=!1,this.isMultiline=!1,this.font=new d},u=function(){function e(){this.pageIdTemp=0,this.zIndexTemp=-1,this.childNodesTemp=[],this.objects=[],this.zIndexTemp=-1,this.pageIdTemp=0}return Object.defineProperty(e.prototype,"pageId",{get:function(){return this.pageIdTemp},set:function(e){this.pageIdTemp=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"zIndex",{get:function(){return this.zIndexTemp},set:function(e){this.zIndexTemp=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"objects",{get:function(){return this.childNodesTemp},set:function(e){this.childNodesTemp=e},enumerable:!0,configurable:!0}),e}(),f=function(){function e(){this.wrapper=null,this.annotations=[],this.formFields=[],this.rotateAngle=0,this.offsetX=0,this.offsetY=0,this.pivot={x:.5,y:.5}}return e.prototype.init=function(e){var t=new sf.drawings.Container;if(t.measureChildren=!1,t.children=[],this.formFields&&this.formFields.length>0)for(var i=0;i<this.formFields.length;i++){var n=e.pdfViewer.nameTable[this.formFields[i].id].wrapper;t.children.push(n)}else if(this.annotations)for(i=0;i<this.annotations.length;i++)if(!sf.base.isNullOrUndefined(this.annotations[i])){n=e.pdfViewer.nameTable[this.annotations[i].id].wrapper;t.children.push(n)}return this.wrapper=t,t},e}();function g(e){return"Line"===e.shapeAnnotationType||"LineWidthArrowHead"===e.shapeAnnotationType||"Distance"===e.shapeAnnotationType||"Polygon"===e.shapeAnnotationType}function m(e,t){if(e&&t)if(e.formFieldAnnotationType)-1!==e.id.indexOf("diagram_helper")?(t.style.fill="transparent",t.style.strokeWidth=1,t.style.strokeDashArray=e.borderDashArray):(t.style.fill="transparent",t.style.strokeWidth=0);else{var i="#ffffff00"===e.fillColor?"transparent":e.fillColor;t.style.fill=i||"white",t.style.strokeColor=e.strokeColor?e.strokeColor:e.borderColor,t.style.color=e.strokeColor?e.strokeColor:e.borderColor,t.style.strokeWidth=e.thickness,"Image"!==e.shapeAnnotationType&&"SignatureText"!==e.shapeAnnotationType&&"SignatureImage"!==e.shapeAnnotationType||(t.style.strokeWidth=0),t.style.strokeDashArray=e.borderDashArray,t.style.opacity=e.opacity}}function w(e){for(var t=0,i=0;i<e.length-1;i++)t+=sf.drawings.Point.findLength(e[i],e[i+1]);return t}function y(e,t){var i={width:e.actualSize.width,height:e.actualSize.height,x:e.offsetX-e.actualSize.width*e.pivot.x+.5,y:e.offsetY-e.actualSize.height*e.pivot.y+.5,angle:e.rotateAngle+e.parentTransform,fill:e.style.fill,stroke:e.style.strokeColor,pivotX:e.pivot.x,pivotY:e.pivot.y,strokeWidth:1,opacity:e.style.opacity,dashArray:e.style.strokeDashArray||"",visible:e.visible,id:e.id};return t&&(i.x+=t.tx,i.y+=t.ty),i}function S(e,t,i){var n,o={},a="properties";if(e){i=e.propName;var s=e[a]||e,r=[],l=[];if((r=r.concat(Object.keys(s))).push("version"),i){var d=(void 0!==(n=t)&&"string"==typeof n&&(n=sf.base.getValue(n,window)),n);l=d?d(i):[],r=r.concat(l)}for(var h=function(e){switch(e){case"nodes":case"children":return["inEdges","outEdges","parentId","processId","nodeId","umlIndex","isPhase","isLane"];case"connectors":return["parentId"];case"annotation":case"annotations":return["nodeId"];case"shape":return["hasHeader"]}return[]}(i),p=0,c=r=r.concat(h);p<c.length;p++){var u=c[p];if("historyManager"!==u)if("wrapper"!==u)!(!e[u]||!e.hasOwnProperty("observers"))||(e[u]instanceof Array?o[u]=v(-1===h.indexOf(u)&&e[a]?e[a][u]:e[u],t,u):e[u]instanceof Array==!1&&e[u]instanceof HTMLElement?o[u]=e[u].cloneNode(!0).innerHtml:e[u]instanceof Array==!1&&e[u]instanceof Object?o[u]=S(-1===h.indexOf(u)&&e[a]?e[a][u]:e[u]):o[u]=e[u]);else e[u]&&(o[u]={actualSize:{width:e[u].actualSize.width,height:e[u].actualSize.height},offsetX:e[u].offsetX,offsetY:e[u].offsetY})}}return o}function v(e,t,i){var n;if(e){n=[];for(var o=0;o<e.length;o++)e[o]instanceof Array?n.push(e[o]):e[o]instanceof Object?n.push(S(e[o],t,i)):n.push(e[o])}return n}function b(e,t){var i=e.vertexPoints.slice(0);return i&&i.length>0&&(e.sourcePoint=i[0],e.targetPoint=i[i.length-1]),i}function V(e,t,i){var n=new sf.drawings.Rect,o=function(e,t){for(var i,n="",o=[],a=0;a<t.length;)o.push({x:t[a].x,y:t[a].y}),a++;o=C(e,o);for(var s=0;s<o.length;s++)i=o[s],0===s&&(n="M"+i.x+" "+i.y),s>0&&(n+=" L"+i.x+" "+i.y);return n}(e,t);return n=sf.drawings.Rect.toBounds(t),i.width=n.width,i.height=n.height,i.offsetX=n.x+i.width/2,i.offsetY=n.y+i.height/2,i.data=o,e.wrapper&&(e.wrapper.offsetX=i.offsetX,e.wrapper.offsetY=i.offsetY,e.wrapper.width=n.width,e.wrapper.height=n.height),i}function A(e,t,i,n,o){t.offsetX=i.x,t.offsetY=i.y;var a,s=sf.drawings.Point.findAngle(i,n),r=e.thickness<=5?5:e.thickness,l=(a=o?e.sourceDecoraterShapes:e.taregetDecoraterShapes,X[a]),d=new sf.drawings.Size(2*r,2*r);t.transform=sf.drawings.RotateTransform.Self,m(e,t),t.style.fill="tranparent"!==e.fillColor?e.fillColor:"white",t.rotateAngle=s,t.data=l,t.canMeasurePath=!0,t.width=d.width,t.height=d.height,"Butt"===e.sourceDecoraterShapes&&(t.width=d.width-10,t.height=d.height+10)}function x(e,t,i,n){var o=new sf.drawings.PathElement;return A(e,o,t,i,n),o}function C(e,t){return t[0]=I(e,t,!0),t[t.length-1]=I(e,t,!1),t}function I(e,t,i){var n,o,a={x:0,y:0},s=t.length;n=i?t[0]:t[s-1],o=i?t[1]:t[s-2];var r=sf.drawings.Point.distancePoints(n,o);r=0===r?1:r;var l=e.thickness;a.x=Math.round(n.x+l*(o.x-n.x)/r),a.y=Math.round(n.y+l*(o.y-n.y)/r);return a=sf.drawings.Point.adjustPoint(a,o,!0,.5)}function k(e,t,i){for(var n,o=0;o<e.wrapper.children.length;o++){var a=e.wrapper.children[o];a&&!sf.base.isNullOrUndefined(a.content)&&(n=i.calculatePerimeter(e),a.content=n,a.childNodes[0].text=a.content,a.refreshTextElement())}return n}function T(e){if(e.wrapper&&e.wrapper.children)for(var t=0;t<e.wrapper.children.length;t++){var i=e.wrapper.children[t];i&&!sf.base.isNullOrUndefined(i.content)&&(i.content=e.notes,i.childNodes[0].text=i.content,i.refreshTextElement())}}function M(e){var t,i,n="";for(n="M"+e[0].x+" "+e[0].y,i=1;i<e.length;i++)n+="L"+(t=e[i]).x+" "+t.y;return n+="Z"}function P(e,t){var i=new sf.drawings.TextElement;return m(e,i),i.style.fill="transparent",i.id=sf.drawings.randomId(),i.horizontalAlignment="Center",i.rotateValue={y:10,angle:t},i.verticalAlignment="Top",i.relativeMode="Object",i.setOffsetWithRespectToBounds(.5,.5,"Absolute"),i.style.textWrapping="NoWrap",i}function B(e,t,i,n){var o=new sf.drawings.PathElement;o.offsetX=t.x,o.offsetY=t.y;var a=sf.drawings.Point.findAngle(t,i),s={x:(t.x+i.x)/2,y:(t.y+i.y)/2},r=sf.drawings.identityMatrix();sf.drawings.rotateMatrix(r,0-a,s.x,s.y);var l=sf.drawings.transformPointByMatrix(r,t),d={x:l.x,y:l.y-e.leaderHeight};r=sf.drawings.identityMatrix(),sf.drawings.rotateMatrix(r,a,o.offsetX,o.offsetY),l=sf.drawings.transformPointByMatrix(r,d);var h={x:t.x,y:t.y};o.offsetX=h.x,o.offsetY=h.y,o.transform=sf.drawings.RotateTransform.Self;var p="M"+t.x+","+t.y+" L"+l.x+","+l.y+"Z",c=new sf.drawings.Size(0,e.leaderHeight);return o.pivot.x=.5,n?(o.id="leader2_"+sf.drawings.randomId(),o.pivot.y=0):(o.id="leader1_"+sf.drawings.randomId(),o.pivot.y=1),m(e,o),o.rotateAngle=a,o.data=p,o.canMeasurePath=!0,o.width=c.width,o.height=c.height,o}function E(e,t){for(var i=e.vertexPoints,n=0;n<i.length-1;n++){var o=i[n],a=i[n+1],s=sf.drawings.Rect.toBounds([o,a]);if(s.Inflate(10),s.containsPoint(t)){var r=N(t,o,a),l={x1:o.x,x2:a.x,y1:o.y,y2:a.y},d={x1:t.x,x2:r.x,y1:t.y,y2:r.y},h=sf.drawings.intersect3(l,d);if(h.enabled){var p=sf.drawings.Point.findLength(t,h.intersectPt);if(Math.abs(p)<10)return!0}else{var c=sf.drawings.Rect.toBounds([t,t]);if(c.Inflate(3),c.containsPoint(o)||c.containsPoint(a))return!0}if(sf.drawings.Point.equals(t,r))return!0}}return!1}function N(e,t,i){var n;n=sf.drawings.Point.findLength(t,e)>sf.drawings.Point.findLength(i,e)?i:t;var o=sf.drawings.Point.findAngle(t,i),a=sf.drawings.Point.findAngle(n,e),s=sf.drawings.Point.findLength(n,e),r=a+2*(o-a);return{x:n.x+s*Math.cos(r*Math.PI/180),y:n.y+s*Math.sin(r*Math.PI/180)}}var D,F,L,_,O,R,z,H,j,W,Z,q,U,Y,X={OpenArrow:"M15.9,23 L5,16 L15.9,9 L17,10.7 L8.7,16 L17,21.3Z",Square:"M0,0 L10,0 L10,10 L0,10 z",Fletch:"M14.8,10c0,0-3.5,6,0.2,12c0,0-2.5-6-10.9-6C4.1,16,11.3,16,14.8,10z",OpenFetch:"M6,17c-0.6,0-1-0.4-1-1s0.4-1,1-1c10.9,0,11-5,11-5c0-0.6,0.4-1,1-1s1,0.4,1,1C19,10.3,18.9,17,6,17C6,17,6,17,6,17z M18,23c-0.5,0-1-0.4-1-1c0-0.2-0.3-5-11-5c-0.6,0-1-0.5-1-1s0.4-1,1-1c0,0,0,0,0,0c12.9,0,13,6.7,13,7    C19,22.6,18.6,23,18,23z",IndentedArrow:"M17,10c0,0-4.5,5.5,0,12L5,16L17,10z",OutdentedArrow:"M14.6,10c0,0,5.4,6,0,12L5,16L14.6,10z",DoubleArrow:"M19,10 L19,22 L13,16Z M12,10 L12,22 L6,16Z",Arrow:"M15,10 L15,22 L5,16Z",Diamond:"M12,23l-7-7l7-7l6.9,7L12,23z",Circle:"M0,50 A50,50,0 1 1 100,50 A50,50,0 1 1 0,50 Z",Butt:"M0,0 L0,90"},J=(D=function(e,t){return(D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}D(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),G=function(e){function t(t){var i=e.call(this)||this;return i.templateFn=i.templateCompiler(t),i}return J(t,e),t.prototype.templateCompiler=function(e){if(e)try{if(document.querySelectorAll(e).length)return sf.base.compile(document.querySelector(e).innerHTML.trim())}catch(t){return sf.base.compile(e)}},t.prototype.getNodeTemplate=function(){return this.templateFn},t}(sf.drawings.DrawingElement),K=function(){function e(e){this.isDynamicStamps=!1,this.pdfViewer=e,this.renderer=new sf.drawings.DrawingRenderer("this.pdfViewer.dataId",!1),this.svgRenderer=new sf.drawings.SvgRenderer}return e.prototype.renderLabels=function(e){var t=e.annotations;if(t)for(var i=0;i<t.length;i++){var n=t[i];this.initObject(n)}},e.prototype.createNewZindexTable=function(e){var t=new u;return this.pdfViewer.zIndex++,t.pageId=this.pdfViewer.zIndex,this.pdfViewer.zIndexTable.push(t),t},e.prototype.getPageTable=function(e){var t;if(void 0!==this.pdfViewer.zIndexTable.length){for(var i=!0,n=0;n<this.pdfViewer.zIndexTable.length;n++)if(this.pdfViewer.zIndexTable[n].pageId===e){i=!1,t=this.pdfViewer.zIndexTable[n];break}i&&((t=this.createNewZindexTable(e)).pageId=e)}else t=this.createNewZindexTable(e);return t},e.prototype.setZIndex=function(e,t){if(void 0!==t.pageIndex){var i=this.getPageTable(t.pageIndex);if(-1===t.zIndex)i.zIndex++,t.zIndex=i.zIndex,i.objects.push(t);else{t.zIndex;var n=i.objects.length;t.zIndex=n++,i.objects.push(t)}}},e.prototype.initObject=function(e){return this.setZIndex(this.pdfViewer.zIndex,e),sf.drawings.createMeasureElements(),g(e)?(this.initLine(e),e.wrapper.measure(new sf.drawings.Size(void 0,void 0)),e.wrapper.arrange(e.wrapper.desiredSize)):this.initNode(e),e.wrapper,this.pdfViewer.nameTable[e.id]=e,e.formFieldAnnotationType&&this.nodePropertyChange(e,{bounds:{width:e.bounds.width,height:e.bounds.height}}),e},e.prototype.initNode=function(e){var t,i=this.initContainer(e);i.children||(i.children=[]),t||(t=this.init(e,i)),i.rotateAngle=e.rotateAngle,i.measure(new sf.drawings.Size(e.wrapper.width,e.wrapper.height)),i.arrange(i.desiredSize),this.isDynamicStamps&&(this.pdfViewer.annotation.stampAnnotationModule.updateSessionStorage(e,null,"dynamicStamp"),this.isDynamicStamps=!1)},e.prototype.init=function(e,t){var i;i=new sf.drawings.DrawingElement;var n=this.pdfViewer.annotationModule?this.pdfViewer.annotationModule.findAnnotationSettings(e):{},o=0,a=0,s=0,r=0;(n.minWidth||n.maxWidth||n.minHeight||n.maxHeight)&&(o=n.maxHeight?n.maxHeight:2e3,a=n.maxWidth?n.maxWidth:2e3,s=n.minHeight?n.minHeight:0,r=n.minWidth?n.minWidth:0);var l=!1;return(s||r||o||a)&&(l=!0),(i=e.formFieldAnnotationType?this.initFormFields(e,i,t):this.initAnnotationObject(e,void 0,i,t,!1,void 0,l,o,a,r,s)).id=e.id+"_content",i.relativeMode="Object","Stamp"!==e.shapeAnnotationType&&(void 0!==e.bounds.width&&(i.width=e.bounds.width,l&&(i.width<r||i.width>a)&&(i.width<r&&(i.width=r),i.width>a&&(i.width=a))),i.horizontalAlignment="Stretch",void 0!==e.bounds.height&&(i.height=e.bounds.height,l&&(i.height<s||i.width>o)&&(i.height<s&&(i.height=s),i.height>o&&(i.height=o))),m(e,i),this.pdfViewer.viewerBase.drawSignatureWithTool&&"SignatureText"===e.shapeAnnotationType&&(i.style.strokeWidth=0)),i.isRectElement=!0,i.verticalAlignment="Stretch",i},e.prototype.initFormFields=function(e,t,i){switch(e.formFieldAnnotationType){case"Textbox":case"PasswordField":case"Checkbox":case"RadioButton":case"DropdownList":case"ListBox":case"SignatureField":case"InitialField":(t=new G).rotateAngle=this.pdfViewer.formFieldsModule.getAngle(e.pageIndex),t.id=e.id+"_content",i.children.push(t)}return t},e.prototype.initAnnotationObject=function(e,t,i,n,o,a,s,r,l,d,h){switch(e.shapeAnnotationType){case"Ellipse":if((t=new sf.drawings.PathElement).data="M80.5,12.5 C80.5,19.127417 62.59139,24.5 40.5,24.5 C18.40861,24.5 0.5,19.127417 0.5,12.5C0.5,5.872583 18.40861,0.5 40.5,0.5 C62.59139,0.5 80.5,5.872583 80.5,12.5 z",i=t,n.children.push(i),e.enableShapeLabel)(g=this.textElement(e)).content=e.labelContent,g.style.color=e.fontColor,g.style.strokeColor=e.labelBorderColor,g.style.fill=e.labelFillColor,g.style.fontSize=e.fontSize,g.style.fontFamily=e.fontFamily,g.style.opacity=e.labelOpacity,g.style.textWrapping="NoWrap",n.children.push(g);break;case"Path":(t=new sf.drawings.PathElement).data=e.data,i=t,n.children.push(i);break;case"HandWrittenSignature":case"Ink":(t=new sf.drawings.PathElement).data=e.data,t.style.strokeColor=e.strokeColor,t.style.strokeWidth=e.thickness,t.style.opacity=e.opacity,i=t,n.children.push(i);break;case"Polygon":(t=new sf.drawings.PathElement).data=M(e.vertexPoints),i=t,n.children.push(i);break;case"Stamp":if(o=!0,this.isDynamicStamps=!0,e&&e.annotationAddMode&&("Existing Annotation"===e.annotationAddMode||"Imported Annotation"===e.annotationAddMode||"diagram_helper"===e.id)&&(e.bounds.width=e.bounds.width-20,e.bounds.height=e.bounds.height-20),e.isDynamicStamp){n.horizontalAlignment="Left",(i=a=new sf.drawings.DrawingElement).cornerRadius=10,i.style.fill=e.stampFillColor,i.style.strokeColor=e.stampStrokeColor,n.children.push(i);var p=this.textElement(e);(p=new sf.drawings.TextElement).style.fontFamily="Helvetica",p.style.fontSize=14,p.style.italic=!0,p.style.bold=!0,p.style.color=e.fillColor,p.rotateValue=void 0,p.content=e.dynamicText,p.relativeMode="Point",p.margin.left=10,p.margin.bottom=-7,p.setOffsetWithRespectToBounds(0,.57,null),p.relativeMode="Point","Existing Annotation"!==e.annotationAddMode&&"Imported Annotation"!==e.annotationAddMode||(p.style.fontSize=this.fontSizeCalculation(e,p,e.bounds.width-20)),"diagram_helper"!=e.id&&n.children.push(p),(u=new sf.drawings.PathElement).id=sf.drawings.randomId()+"_stamp",u.data=e.data,u.width=e.bounds.width,s&&e.bounds.width>l&&(u.width=l,e.bounds.width=l),u.height=e.bounds.height/2,s&&e.bounds.height>r&&(u.height=r/2,e.bounds.height=r/2),u.rotateValue=void 0,u.margin.left=10,u.margin.bottom=-5,u.relativeMode="Point",u.setOffsetWithRespectToBounds(0,.1,null);var c=u;u.style.fill=e.fillColor,u.style.strokeColor=e.strokeColor,u.style.opacity=e.opacity,i.width=e.bounds.width+20,i.height=e.bounds.height+20,i.style.opacity=e.opacity,n.children.push(c)}else{var u;n.horizontalAlignment="Left",(i=a=new sf.drawings.DrawingElement).cornerRadius=10,i.style.fill=e.stampFillColor,i.style.strokeColor=e.stampStrokeColor,n.children.push(i),(u=new sf.drawings.PathElement).id=sf.drawings.randomId()+"_stamp",u.data=e.data,u.width=e.bounds.width,s&&e.bounds.width>l&&(u.width=l,e.bounds.width=l),u.height=e.bounds.height,s&&e.bounds.height>r&&(u.height=r,e.bounds.height=r);c=u;u.style.fill=e.fillColor,u.style.strokeColor=e.strokeColor,u.style.opacity=e.opacity,i.width=e.bounds.width+20,i.height=e.bounds.height+20,i.style.opacity=e.opacity,n.children.push(c)}break;case"Image":case"SignatureImage":var f=new sf.drawings.ImageElement;f.source=e.data,(i=f).style.strokeWidth=0,n.children.push(i);break;case"Rectangle":var g;if(i=a=new sf.drawings.DrawingElement,n.children.push(i),e.enableShapeLabel)(g=this.textElement(e)).content=e.labelContent,g.style.color=e.fontColor,g.style.strokeColor=e.labelBorderColor,g.style.fill=e.labelFillColor,g.style.fontSize=e.fontSize,g.style.fontFamily=e.fontFamily,g.style.opacity=e.labelOpacity,g.style.textWrapping="NoWrap",n.children.push(g);break;case"Perimeter":(t=new sf.drawings.PathElement).data="M80.5,12.5 C80.5,19.127417 62.59139,24.5 40.5,24.5 C18.40861,24.5 0.5,19.127417 0.5,12.5C0.5,5.872583 18.40861,0.5 40.5,0.5 C62.59139,0.5 80.5,5.872583 80.5,12.5 z",i=t,m(e,t),n.children.push(i),(a=new sf.drawings.DrawingElement).id="perimeter_"+sf.drawings.randomId(),a.height=.2,a.width=.2,a.transform=sf.drawings.RotateTransform.Self,a.horizontalAlignment="Stretch",this.setNodePosition(a,e),a.rotateAngle=e.rotateAngle,m(e,a),n.children.push(a);var y=this.textElement(e);(y=new sf.drawings.TextElement).style.textWrapping="NoWrap",y.content=y.content=w([{x:e.bounds.x,y:e.bounds.y},{x:e.bounds.x+e.bounds.width,y:e.bounds.y+e.bounds.height}]).toString(),y.rotateValue={y:-10,angle:e.rotateAngle},n.children.push(y);break;case"Radius":(t=new sf.drawings.PathElement).data="M80.5,12.5 C80.5,19.127417 62.59139,24.5 40.5,24.5 C18.40861,24.5 0.5,19.127417 0.5,12.5C0.5,5.872583 18.40861,0.5 40.5,0.5 C62.59139,0.5 80.5,5.872583 80.5,12.5 z",i=t,m(e,t),n.children.push(i),(a=new sf.drawings.DrawingElement).id="radius_"+sf.drawings.randomId(),a.height=.2,a.width=e.bounds.width/2,a.transform=sf.drawings.RotateTransform.Self,this.setNodePosition(a,e),a.rotateAngle=e.rotateAngle,m(e,a),n.children.push(a);var S=this.textElement(e);e.enableShapeLabel&&(S.style.color=e.fontColor,S.style.strokeColor=e.labelBorderColor,S.style.fill=e.labelFillColor,S.style.fontSize=e.fontSize,S.style.fontFamily=e.fontFamily,S.style.opacity=e.labelOpacity,S.style.textWrapping="NoWrap");w([{x:e.bounds.x,y:e.bounds.y},{x:e.bounds.x+e.bounds.width,y:e.bounds.y+e.bounds.height}]);!this.pdfViewer.enableImportAnnotationMeasurement&&e.notes&&""!==e.notes?S.content=e.notes:e.bounds.width?S.content=this.pdfViewer.annotation.measureAnnotationModule.setConversion(e.bounds.width/2*this.pdfViewer.annotation.measureAnnotationModule.pixelToPointFactor,e):S.content=this.pdfViewer.annotation.measureAnnotationModule.setConversion(0*this.pdfViewer.annotation.measureAnnotationModule.pixelToPointFactor,e),S.rotateValue={y:-10,x:e.bounds.width/4,angle:e.rotateAngle},n.children.push(S);break;case"StickyNotes":var v=new sf.drawings.ImageElement;v.source=e.data,v.width=e.bounds.width,v.height=e.bounds.height,v.style.strokeColor=e.strokeColor,v.style.strokeWidth=0,i=v,n.children.push(i);break;case"SignatureText":var b=new sf.drawings.DrawingElement;b.style.strokeWidth=0,(i=b).style.strokeWidth=0,n.style.strokeWidth=0,n.children.push(i);var V=this.textElement(e);V.style.fontFamily=e.fontFamily,V.style.fontSize=e.fontSize,V.style.textAlign="Left",V.rotateValue=void 0,V.content=e.data,V.style.strokeWidth=0,n.children.push(V);break;case"FreeText":i=new sf.drawings.DrawingElement,n.children.push(i);var A=this.textElement(e);(A=new sf.drawings.TextElement).style.fontFamily=e.fontFamily,A.style.fontSize=e.fontSize,A.style.textAlign="Left","center"===e.textAlign.toLowerCase()?A.style.textAlign="Center":"right"===e.textAlign.toLowerCase()?A.style.textAlign="Right":"justify"===e.textAlign.toLowerCase()&&(A.style.textAlign="Justify"),A.style.color=e.fontColor,A.style.bold=e.font.isBold,A.style.italic=e.font.isItalic,!0===e.font.isUnderline?A.style.textDecoration="Underline":!0===e.font.isStrikeout&&(A.style.textDecoration="LineThrough"),A.rotateValue=void 0,A.content=e.dynamicText,A.style.opacity=e.opacity,A.margin.left=4,A.margin.top=e.fontSize/16*5,this.pdfViewer.freeTextSettings.enableAutoFit?A.style.textWrapping="Wrap":A.style.textWrapping="WrapWithOverflow",A.relativeMode="Point",A.setOffsetWithRespectToBounds(0,0,null),A.relativeMode="Point",n.children.push(A)}return i.id=e.id+"_content",i.relativeMode="Object",i.printID=e.annotName,o||(void 0!==e.bounds.width&&(i.width=e.bounds.width,s&&(i.width<d||i.width>l)&&(i.width<d&&(i.width=d),i.width>l&&(i.width=l))),i.horizontalAlignment="Stretch",void 0!==e.bounds.height&&(i.height=e.bounds.height,s&&(i.height<h||i.width>r)&&(i.height<h&&(i.height=h),i.height>r&&(i.height=r))),m(e,i)),i.isRectElement=!0,i.verticalAlignment="Stretch",i},e.prototype.textElement=function(e){var t=new sf.drawings.TextElement;return m(e,t),t.horizontalAlignment="Center","SignatureText"===e.shapeAnnotationType?t.verticalAlignment="Center":t.verticalAlignment="Top",t.relativeMode="Object",t.setOffsetWithRespectToBounds(.5,.5,"Absolute"),t},e.prototype.setNodePosition=function(e,t){if("Perimeter"===t.shapeAnnotationType)e.offsetX=t.bounds.x+t.bounds.width/2,e.offsetY=t.bounds.y+t.bounds.height/2;else if("Radius"===t.shapeAnnotationType){var i={x:t.bounds.x+t.bounds.width/2+t.bounds.width/4,y:t.bounds.y+t.bounds.height/2},n={x:t.bounds.x+t.bounds.width/2,y:t.bounds.y+t.bounds.height/2},o=sf.drawings.identityMatrix();sf.drawings.rotateMatrix(o,t.rotateAngle,n.x,n.y);var a=sf.drawings.transformPointByMatrix(o,i),s={x:a.x,y:a.y};e.offsetX=s.x,e.offsetY=s.y,e.width=t.bounds.width/2}},e.prototype.initContainer=function(e){e.id||(e.id=sf.drawings.randomId());var t=new sf.drawings.Canvas;return t.id=e.id,t.offsetX=e.bounds.x+.5*e.bounds.width,t.offsetY=e.bounds.y+.5*e.bounds.height,t.style.fill="transparent",t.style.strokeColor="transparent",t.rotateAngle=e.rotateAngle,e.wrapper=t,t},e.prototype.initLine=function(e){e.id||(e.id=sf.drawings.randomId());var t=new sf.drawings.Canvas,i=new sf.drawings.PathElement;i.id=e.id+"_path";var n=new sf.drawings.PathElement,o=new sf.drawings.PathElement;if(e.vertexPoints.length){e.sourcePoint=e.vertexPoints[0],e.targetPoint=e.vertexPoints[e.vertexPoints.length-1];for(var a=0;a<e.vertexPoints.length;a++)0!==a&&a!==e.vertexPoints.length-1&&e.segments.push(e.vertexPoints[a])}i=function(e,t){var i;return i=b(e),t.staticSize=!0,m(e,t=V(e,i,t)),t}(e,i);var s=[];s=b(e);var r=[],l=[];if("Distance"===e.shapeAnnotationType&&(r=function(e,t){var i=[],n=B(e,t[0],t[1]);return i.push(n),n=B(e,t[1],t[0],!0),i.push(n),i}(e,s),l=function(e,t,i,n){var o=[],a=sf.drawings.Point.findAngle(t[0],t[1]),s=P(e,a);return!n.enableImportAnnotationMeasurement&&e.notes&&""!==e.notes?s.content=e.notes:s.content=i.setConversion(w([t[0],t[1]])*i.pixelToPointFactor,e),s.rotateValue={y:-10,angle:a},!0===e.enableShapeLabel&&(s.style.strokeColor=e.labelBorderColor,s.style.fill=e.labelFillColor,s.style.fontSize=e.fontSize,s.style.color=e.fontColor,s.style.fontFamily=e.fontFamily),o.push(s),o}(e,s,this.pdfViewer.annotation.measureAnnotationModule,this.pdfViewer)),"Line"!==e.shapeAnnotationType&&"LineWidthArrowHead"!==e.shapeAnnotationType||"Perimeter"!==e.measureType||(l=function(e,t,i,n){var o=[],a=sf.drawings.Point.findAngle(t[0],t[1]),s=P(e,a);return!n.enableImportAnnotationMeasurement&&e.notes&&""!==e.notes?s.content=e.notes:s.content=i.calculatePerimeter(e),!0===e.enableShapeLabel&&(s.style.strokeColor=e.labelBorderColor,s.style.fill=e.labelFillColor,s.style.fontSize=e.fontSize,s.style.color=e.fontColor,s.style.fontFamily=e.fontFamily),s.rotateValue={y:-10,angle:a},o.push(s),o}(e,s,this.pdfViewer.annotation.measureAnnotationModule,this.pdfViewer)),!0===e.enableShapeLabel&&"Distance"!==e.shapeAnnotationType&&"Perimeter"!==e.measureType){var d=sf.drawings.Point.findAngle(s[0],s[1]),h=this.textElement(e);h.id=sf.drawings.randomId(),!this.pdfViewer.enableImportAnnotationMeasurement&&e.notes&&""!==e.notes?h.content=e.notes:h.content=e.labelContent,h.style.strokeColor=e.labelBorderColor,h.style.fill=e.labelFillColor,h.style.fontSize=e.fontSize,h.style.color=e.fontColor,h.style.fontFamily=e.fontFamily,h.style.opacity=e.labelOpacity,h.rotateValue={y:-10,angle:d},h.style.textWrapping="NoWrap",l.push(h)}s=C(e,s);var p=sf.drawings.Rect.toBounds(s);t.width=p.width,t.height=p.height,t.offsetX=p.x+t.pivot.x*p.width,t.offsetY=p.y+t.pivot.y*p.height;var c=e.vertexPoints;if("Line"!==e.shapeAnnotationType&&"LineWidthArrowHead"!==e.shapeAnnotationType&&"Distance"!==e.shapeAnnotationType||(n=x(e,s[0],c[1],!0),o=x(e,s[s.length-1],c[c.length-2],!1)),n.id=e.id+"_srcDec",o.id=e.id+"_tarDec",i.style.fill="transparent",t.style.strokeColor="transparent",t.style.fill="transparent",t.style.strokeWidth=0,t.children=[],m(e,i),t.children.push(i),r.length>0)for(a=0;a<r.length;a++)t.children.push(r[a]);if(l.length>0)for(a=0;a<l.length;a++)t.children.push(l[a]);return t.children.push(n),t.children.push(o),t.id=e.id,t.offsetX=i.offsetX,t.offsetY=i.offsetY,t.width=i.width,t.height=i.height,s=b(e),e.wrapper=t,t},e.prototype.add=function(e){var t=this.pdfViewer.allowServerDataBinding;return this.pdfViewer.enableServerDataBinding(!1),e=this.updateAnnotationObject(e),e=this.initObject(e),this.pdfViewer.annotations.push(e),this.pdfViewer.enableServerDataBinding(t,!0),e},e.prototype.updateAnnotationObject=function(e){var t=new p;return e&&(e.id&&(t.id=e.id),e.shapeAnnotationType&&(t.shapeAnnotationType=e.shapeAnnotationType),e.type&&(t.type=e.type),e.formFieldAnnotationType&&(t.formFieldAnnotationType=e.formFieldAnnotationType),e.measureType&&(t.measureType=e.measureType),e.author&&(t.author=e.author),e.modifiedDate&&(t.modifiedDate=e.modifiedDate),e.subject&&(t.subject=e.subject),e.notes&&(t.notes=e.notes),e.isCommentLock&&(t.isCommentLock=e.isCommentLock),e.strokeColor&&(t.strokeColor=e.strokeColor),e.fillColor&&(t.fillColor=e.fillColor),e.stampStrokeColor&&(t.stampStrokeColor=e.stampStrokeColor),e.stampFillColor&&(t.stampFillColor=e.stampFillColor),e.data&&(t.data=e.data),null!==e.opacity&&void 0!==e.opacity&&(t.opacity=e.opacity),e.thickness&&(t.thickness=e.thickness),e.borderStyle&&(t.borderStyle=e.borderStyle),e.borderDashArray&&(t.borderDashArray=e.borderDashArray),e.rotateAngle&&(t.rotateAngle=e.rotateAngle),e.isCloudShape&&(t.isCloudShape=e.isCloudShape),e.cloudIntensity&&(t.cloudIntensity=e.cloudIntensity),e.leaderHeight&&(t.leaderHeight=e.leaderHeight),e.lineHeadStart&&(t.lineHeadStart=e.lineHeadStart),e.lineHeadEnd&&(t.lineHeadEnd=e.lineHeadEnd),e.vertexPoints&&(t.vertexPoints=e.vertexPoints),e.sourcePoint&&(t.sourcePoint=e.sourcePoint),e.sourceDecoraterShapes&&(t.sourceDecoraterShapes=e.sourceDecoraterShapes),e.taregetDecoraterShapes&&(t.taregetDecoraterShapes=e.taregetDecoraterShapes),e.targetPoint&&(t.targetPoint=e.targetPoint),e.segments&&(t.segments=e.segments),e.bounds&&(t.bounds=e.bounds),e.pageIndex&&(t.pageIndex=e.pageIndex),e.zIndex&&(t.zIndex=e.zIndex),e.wrapper&&(t.wrapper=e.wrapper),e.isDynamicStamp&&(t.isDynamicStamp=e.isDynamicStamp),e.dynamicText&&(t.dynamicText=e.dynamicText),e.annotName&&(t.annotName=e.annotName),e.review&&(t.review=e.review),e.comments&&(t.comments=e.comments),e.fontColor&&(t.fontColor=e.fontColor),e.fontSize&&(t.fontSize=e.fontSize),e.fontFamily&&(t.fontFamily=e.fontFamily),e.fontStyle&&(t.fontStyle=e.fontStyle),e.enableShapeLabel&&(t.enableShapeLabel=e.enableShapeLabel),e.labelContent&&(t.labelContent=e.labelContent),e.labelFillColor&&(t.labelFillColor=e.labelFillColor),e.labelMaxLength&&(t.labelMaxLength=e.labelMaxLength),e.labelOpacity&&(t.labelOpacity=e.labelOpacity),e.annotationSelectorSettings&&(t.annotationSelectorSettings=e.annotationSelectorSettings),e.labelBorderColor&&(t.labelBorderColor=e.labelBorderColor),e.textAlign&&(t.textAlign=e.textAlign),e.signatureName&&(t.signatureName=e.signatureName),e.minHeight&&(t.minHeight=e.minHeight),e.minWidth&&(t.minWidth=e.minWidth),e.maxHeight&&(t.maxHeight=e.maxHeight),e.maxWidth&&(t.maxWidth=e.maxWidth),e.isLock&&(t.isLock=e.isLock),e.annotationAddMode&&(t.annotationAddMode=e.annotationAddMode),e.annotationSettings&&(t.annotationSettings=e.annotationSettings),e.previousFontSize&&(t.previousFontSize=e.previousFontSize),e.font&&(t.font=e.font),e.labelBounds&&(t.labelBounds=e.labelBounds),e.customData&&(t.customData=e.customData),e.allowedInteractions&&(t.allowedInteractions=e.allowedInteractions),e.isPrint&&(t.isPrint=e.isPrint),e.isReadonly&&(t.isReadonly=e.isReadonly)),t},e.prototype.remove=function(e){var t=this.pdfViewer.allowServerDataBinding;this.pdfViewer.enableServerDataBinding(!1);for(var i=e.pageIndex,n=0;n<this.pdfViewer.annotations.length;n++){var o=this.pdfViewer.annotations[n];if(o.id&&(o.id===e.id||o.id.split("_")[0]===e.id)||o.wrapper&&o.wrapper.id===e.id){this.pdfViewer.annotations.splice(n,1);for(var a=this.getPageObjects(e.pageIndex),s=0;s<a.length;s++)a[s].id===e.id&&(a.splice(s,1),"Path"===e.shapeAnnotationType||"SignatureImage"===e.shapeAnnotationType||"SignatureText"===e.shapeAnnotationType?this.refreshCanvasDiagramLayer(void 0,i,e.id):this.pdfViewer.renderDrawing(void 0,i))}}this.pdfViewer.enableServerDataBinding(t,!0)},e.prototype.getPageObjects=function(e){return this.getPageTable(e).objects},e.prototype.refreshCanvasDiagramLayer=function(e,t,i){if(e||(e=document.getElementById(this.pdfViewer.dataId+"_annotationCanvas_"+t)),e){var n=this.pdfViewer.viewerBase.getZoomFactor(),o=e.width/n,a=e.height/n,s=e.getContext("2d");s.lineCap="round",s.lineJoin="round",n<1&&(s.lineWidth=s.lineWidth/n);var r=n*this.pdfViewer.viewerBase.getWindowDevicePixelRatio();!sf.base.Browser.isDevice||sf.base.Browser.isDevice&&n<=.7?s.setTransform(r,0,0,r,0,0):s.setTransform(n,0,0,n,0,0),s.clearRect(0,0,o,a);for(var l=this.getPageObjects(t),d=0;d<l.length;d++){var h=void 0;e.id===this.pdfViewer.dataId+"_print_annotation_layer_"+t?l[d].isPrint&&(h=this.pdfViewer.nameTable[l[d].id].wrapper,sf.base.isNullOrUndefined(h)||sf.drawings.refreshDiagramElements(e,[h],this.renderer)):(h=this.pdfViewer.nameTable[l[d].id].wrapper,sf.drawings.refreshDiagramElements(e,[h],this.renderer))}}},e.prototype.clearHighlighter=function(e){var t=this.getAdornerLayerSvg(this.pdfViewer.dataId+e+"_diagramAdornerLayer",e);if(t){var i=t.getElementById(t.id+"_highlighter");i&&i.parentNode.removeChild(i)}},e.prototype.getSelectorElement=function(e,t){var i=null,n=this.getAdornerLayerSvg(e,t);return n&&(i=n.getElementById(e+"_SelectorElement")),i},e.prototype.getAdornerLayerSvg=function(e,t){var i=null,n=sf.drawings.getDiagramElement(e+t+"_diagramAdornerLayer");return n&&(i=n.getElementsByClassName("e-adorner-layer"+t)[0]),i},e.prototype.clearSelectorLayer=function(e){var t=this.getAdornerLayerSvg(this.pdfViewer.dataId,e);if(t){var i=t.getElementById(this.pdfViewer.adornerSvgLayer.id+"_selected_region");i&&i.parentNode.removeChild(i),this.clearHighlighter(e);for(var n=this.getSelectorElement(this.pdfViewer.dataId,e).childNodes,o=void 0,a=n.length;a>0;a--)(o=n[a-1]).parentNode.removeChild(o)}},e.prototype.renderSelector=function(e,t,i,n){if(!i||n){var o=new sf.drawings.Size,a=this.pdfViewer.selectedItems;if(this.clearSelectorLayer(e),a.wrapper){a.wrapper.measure(o);var s=this.pdfViewer.viewerBase.getZoomFactor();a.wrapper.arrange(a.wrapper.desiredSize),a.width=a.wrapper.actualSize.width,a.height=a.wrapper.actualSize.height,a.offsetX=a.wrapper.offsetX,a.offsetY=a.wrapper.offsetY,1===a.annotations.length&&(a.rotateAngle=a.annotations[0].rotateAngle,a.wrapper.rotateAngle=a.annotations[0].rotateAngle);a.wrapper.bounds;var r=void 0;if(a.annotations.length)for(var l=0;l<a.annotations.length;l++){var d=a.annotations[l];if((r=this.getSelectorElement(this.pdfViewer.dataId,e))&&d.pageIndex===e){if("Distance"===d.shapeAnnotationType||"Line"===d.shapeAnnotationType||"LineWidthArrowHead"===d.shapeAnnotationType||"Polygon"===d.shapeAnnotationType)this.renderEndPointHandle(d,r,a.thumbsConstraints,{scale:s,tx:0,ty:0},void 0,void 0,!0,t);else if("StickyNotes"===d.shapeAnnotationType)this.renderResizeHandle(d.wrapper.children[0],r,a.thumbsConstraints,s,void 0,void 0,void 0,!1,!0,null,null,t);else if("Stamp"!==this.pdfViewer.tool){var h="Path"===d.shapeAnnotationType||"SignatureField"===d.formFieldAnnotationType||"InitialField"===d.formFieldAnnotationType;this.renderResizeHandle(d.wrapper.children[0],r,a.thumbsConstraints,s,void 0,void 0,void 0,"Stamp"===d.shapeAnnotationType,!1,h,"FreeText"===d.shapeAnnotationType||"HandWrittenSignature"===d.shapeAnnotationType||"SignatureImage"===d.shapeAnnotationType||"Image"===d.shapeAnnotationType||"SignatureText"===d.shapeAnnotationType,t)}this.pdfViewer.viewerBase.isNewSignatureAdded||("HandWrittenSignature"===d.shapeAnnotationType&&this.pdfViewer.annotationModule.selectSignature(d.signatureName,d.pageIndex,d),"SignatureText"!==d.shapeAnnotationType&&"SignatureImage"!==d.shapeAnnotationType&&"Path"!==d.shapeAnnotationType||this.pdfViewer.annotationModule.selectSignature(d.id,d.pageIndex,d)),""!==d.annotName&&i&&d===i&&!d.formFieldAnnotationType&&(this.pdfViewer.viewerBase.isAddComment||this.pdfViewer.viewerBase.isAnnotationSelect||this.pdfViewer.viewerBase.isAnnotationMouseDown||this.pdfViewer.viewerBase.isAnnotationMouseMove||this.pdfViewer.viewerBase.isInkAdded||this.pdfViewer.viewerBase.isNewStamp||(this.pdfViewer.viewerBase.isAnnotationSelect=!0,this.pdfViewer.annotationModule.annotationSelect(d.annotName,d.pageIndex,d)))}}}}},e.prototype.rotate=function(e,t,i,n){if(e)if(i=i||{x:e.wrapper.offsetX,y:e.wrapper.offsetY},e instanceof f||!e.shapeAnnotationType){e.rotateAngle+=t,e.wrapper.rotateAngle+=t;var o=[];o=o.concat(e.annotations),this.rotateObjects(e,o,t,i,null,n)}else this.rotateObjects(e,[e],t,i)},e.prototype.rotateObjects=function(e,t,i,n,o,a){n=n||{};var s=sf.drawings.identityMatrix();sf.drawings.rotateMatrix(s,i,n.x,n.y);for(var r=0,l=t;r<l.length;r++){var d=l[r];if(d instanceof p){if(!1!==o||e!==d){d.rotateAngle+=i,d.rotateAngle=(d.rotateAngle+360)%360;var h=sf.drawings.transformPointByMatrix(s,{x:d.wrapper.offsetX,y:d.wrapper.offsetY});d.wrapper.offsetX=h.x,d.wrapper.offsetY=h.y,this.nodePropertyChange(d,{rotateAngle:d.rotateAngle})}this.renderSelector(d.pageIndex,a)}}},e.prototype.getParentSvg=function(e,t,i){return e&&e.id&&t&&"selector"===t?this.pdfViewer.adornerSvgLayer:i},e.prototype.renderBorder=function(e,t,n,o,a,s,r,l){var d=y(e,o);if(o=o||{scale:1,tx:0,ty:0},l){d.x*=o.scale,d.y*=o.scale,d.width*=o.scale,d.height*=o.scale;h=this.pdfViewer.selectedItems.annotations.length>0?this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType:this.pdfViewer.selectedItems.formFields[0].formFieldAnnotationType;if(n&&"object"!==i(n)&&""!==n){u=""===(p=JSON.parse(n)).selectionBorderColor?"black":p.selectionBorderColor;d.stroke=u,d.strokeWidth=1===n.selectionBorderThickness?1:p.selectionBorderThickness,(c=0===p.selectorLineDashArray.length?[6,3]:p.selectorLineDashArray).length>2&&(c=[c[0],c[1]]),d.dashArray=c.toString()}else this.getBorderSelector(h,d)}else{d.x*=o.scale,d.y*=o.scale,d.width*=o.scale,d.height*=o.scale,d.fill="transparent";var h=this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType;if(n&&"object"!==i(n)&&""!==n){var p,c,u=""===(p=JSON.parse(n)).selectionBorderColor?"black":p.selectionBorderColor;d.stroke=u,d.strokeWidth=1===n.selectionBorderThickness?1:p.selectionBorderThickness,(c=0===p.selectorLineDashArray.length?[6,3]:p.selectorLineDashArray).length>2&&(c=[c[0],c[1]]),d.dashArray=c.toString()}else if("HandWrittenSignature"===h||"SignatureText"===h||"SignatureImage"===h||"Ink"===h){this.pdfViewer.nameTable[e.id.split("_")[0]];var f=this.pdfViewer.viewerBase.checkSignatureFormField(e.id);this.getSignBorder(h,d,f)}else this.getBorderSelector(h,d);d.class="e-pv-diagram-border",r&&(d.class+=" e-diagram-lane"),d.id="borderRect",d.id="borderRect",a||(d.class+=" e-disabled"),s&&(d.class+=" e-thick-border"),d.cornerRadius=0}var g=this.getParentSvg(e,"selector");this.svgRenderer.drawRectangle(t,d,this.pdfViewer.dataId,void 0,!0,g)},e.prototype.getSignBorder=function(e,t,i){if(i||"HandWrittenSignature"!==e&&"SignatureText"!==e&&"SignatureImage"!==e||!this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings)if("Ink"===e&&this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings){o=sf.base.isNullOrUndefined(this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.selectionBorderColor)||""===this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.selectionBorderColor?"#0000ff":this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.selectionBorderColor;t.stroke=o;s=sf.base.isNullOrUndefined(this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.selectionBorderThickness)?1:this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.selectionBorderThickness;t.strokeWidth=s,(a=sf.base.isNullOrUndefined(this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.selectorLineDashArray)||0===this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.selectorLineDashArray.length?[4]:this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.selectorLineDashArray).length>2&&(a=[a[0],a[1]]),t.dashArray=a.toString()}else{var n=this.pdfViewer.annotationSelectorSettings;o=""===n.selectionBorderColor?"black":n.selectionBorderColor;t.stroke=o,t.strokeWidth=1===n.selectionBorderThickness?1:n.selectionBorderThickness,(a=0===n.selectorLineDashArray.length?[6,3]:n.selectorLineDashArray).length>2&&(a=[a[0],a[1]]),t.dashArray=a.toString()}else{var o=sf.base.isNullOrUndefined(this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.selectionBorderColor)||""===this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.selectionBorderColor?"#0000ff":this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.selectionBorderColor;t.stroke=o;var a,s=sf.base.isNullOrUndefined(this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.selectionBorderThickness)?1:this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.selectionBorderThickness;t.strokeWidth=s,(a=sf.base.isNullOrUndefined(this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.selectorLineDashArray)||0===this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.selectorLineDashArray.length?[4]:this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.selectorLineDashArray).length>2&&(a=[a[0],a[1]]),t.dashArray=a.toString()}},e.prototype.getBorderSelector=function(e,t){var i=this.pdfViewer.annotationSelectorSettings,n=sf.base.isNullOrUndefined(i.selectionBorderColor)||""===i.selectionBorderColor?"black":i.selectionBorderColor;t.stroke=n,t.strokeWidth=sf.base.isNullOrUndefined(i.selectionBorderThickness)||1===i.selectionBorderThickness?1:i.selectionBorderThickness;var o=sf.base.isNullOrUndefined(i.selectorLineDashArray)||0===i.selectorLineDashArray.length?[6,3]:i.selectorLineDashArray;if(o.length>2&&(o=[o[0],o[1]]),t.dashArray=o.toString(),"Rectangle"===e&&this.pdfViewer.rectangleSettings.annotationSelectorSettings){var a=sf.base.isNullOrUndefined(this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectionBorderColor)||""===this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectionBorderColor?"black":this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectionBorderColor;t.stroke=a;var s=sf.base.isNullOrUndefined(this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectionBorderThickness)?1:this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectionBorderThickness;t.strokeWidth=s;var r=sf.base.isNullOrUndefined(this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectorLineDashArray)||0===this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectorLineDashArray.length?[4]:this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectorLineDashArray;r.length>2&&(r=[r[0],r[1]]),t.dashArray=r.toString()}else if("Textbox"!==e&&"Checkbox"!==e&&"RadioButton"!==e&&"SignatureField"!==e&&"InitialField"!==e&&"DropdownList"!==e&&"ListBox"!==e&&"PasswordField"!==e||!this.pdfViewer.rectangleSettings.annotationSelectorSettings){if("Ellipse"===e&&this.pdfViewer.circleSettings.annotationSelectorSettings){var l=sf.base.isNullOrUndefined(this.pdfViewer.circleSettings.annotationSelectorSettings.selectionBorderColor)||""===this.pdfViewer.circleSettings.annotationSelectorSettings.selectionBorderColor?"black":this.pdfViewer.circleSettings.annotationSelectorSettings.selectionBorderColor;t.stroke=l;s=sf.base.isNullOrUndefined(this.pdfViewer.circleSettings.annotationSelectorSettings.selectionBorderThickness)?1:this.pdfViewer.circleSettings.annotationSelectorSettings.selectionBorderThickness;t.strokeWidth=s;var d=sf.base.isNullOrUndefined(this.pdfViewer.circleSettings.annotationSelectorSettings.selectorLineDashArray)||0===this.pdfViewer.circleSettings.annotationSelectorSettings.selectorLineDashArray.length?[4]:this.pdfViewer.circleSettings.annotationSelectorSettings.selectorLineDashArray;d.length>2&&(d=[d[0],d[1]]),t.dashArray=d.toString()}else if("Radius"===e&&this.pdfViewer.radiusSettings.annotationSelectorSettings){var h=sf.base.isNullOrUndefined(this.pdfViewer.radiusSettings.annotationSelectorSettings.selectionBorderColor)||""===this.pdfViewer.radiusSettings.annotationSelectorSettings.selectionBorderColor?"black":this.pdfViewer.radiusSettings.annotationSelectorSettings.selectionBorderColor;t.stroke=h;s=sf.base.isNullOrUndefined(this.pdfViewer.radiusSettings.annotationSelectorSettings.selectionBorderThickness)?1:this.pdfViewer.radiusSettings.annotationSelectorSettings.selectionBorderThickness;t.strokeWidth=s;var p=sf.base.isNullOrUndefined(this.pdfViewer.radiusSettings.annotationSelectorSettings.selectorLineDashArray)||0===this.pdfViewer.radiusSettings.annotationSelectorSettings.selectorLineDashArray.length?[4]:this.pdfViewer.radiusSettings.annotationSelectorSettings.selectorLineDashArray;p.length>2&&(p=[p[0],p[1]]),t.dashArray=p.toString()}else if("FreeText"===e&&this.pdfViewer.freeTextSettings.annotationSelectorSettings){var c=sf.base.isNullOrUndefined(this.pdfViewer.freeTextSettings.annotationSelectorSettings.selectionBorderColor)||""===this.pdfViewer.freeTextSettings.annotationSelectorSettings.selectionBorderColor?"black":this.pdfViewer.freeTextSettings.annotationSelectorSettings.selectionBorderColor;t.stroke=c;s=sf.base.isNullOrUndefined(this.pdfViewer.freeTextSettings.annotationSelectorSettings.selectionBorderThickness)?1:this.pdfViewer.freeTextSettings.annotationSelectorSettings.selectionBorderThickness;t.strokeWidth=s;var u=sf.base.isNullOrUndefined(this.pdfViewer.freeTextSettings.annotationSelectorSettings.selectorLineDashArray)||0===this.pdfViewer.freeTextSettings.annotationSelectorSettings.selectorLineDashArray.length?[4]:this.pdfViewer.freeTextSettings.annotationSelectorSettings.selectorLineDashArray;u.length>2&&(u=[u[0],u[1]]),t.dashArray=u.toString()}else if("StickyNotes"===e&&this.pdfViewer.stickyNotesSettings.annotationSelectorSettings){var f=sf.base.isNullOrUndefined(this.pdfViewer.stickyNotesSettings.annotationSelectorSettings.selectionBorderColor)||""===this.pdfViewer.stickyNotesSettings.annotationSelectorSettings.selectionBorderColor?"black":this.pdfViewer.stickyNotesSettings.annotationSelectorSettings.selectionBorderColor;t.stroke=f;s=sf.base.isNullOrUndefined(this.pdfViewer.stickyNotesSettings.annotationSelectorSettings.selectionBorderThickness)?1:this.pdfViewer.stickyNotesSettings.annotationSelectorSettings.selectionBorderThickness;t.strokeWidth=s;var g=sf.base.isNullOrUndefined(this.pdfViewer.stickyNotesSettings.annotationSelectorSettings.selectorLineDashArray)||0===this.pdfViewer.stickyNotesSettings.annotationSelectorSettings.selectorLineDashArray.length?[6,3]:this.pdfViewer.stickyNotesSettings.annotationSelectorSettings.selectorLineDashArray;g.length>2&&(g=[g[0],g[1]]),t.dashArray=g.toString()}else if("Stamp"===e&&this.pdfViewer.stampSettings.annotationSelectorSettings){var m=sf.base.isNullOrUndefined(this.pdfViewer.stampSettings.annotationSelectorSettings.selectionBorderColor)||""===this.pdfViewer.stampSettings.annotationSelectorSettings.selectionBorderColor?"#0000ff":this.pdfViewer.stampSettings.annotationSelectorSettings.selectionBorderColor;t.stroke=m;s=sf.base.isNullOrUndefined(this.pdfViewer.stampSettings.annotationSelectorSettings.selectionBorderThickness)?1:this.pdfViewer.stampSettings.annotationSelectorSettings.selectionBorderThickness;t.strokeWidth=s;var w=sf.base.isNullOrUndefined(this.pdfViewer.stampSettings.annotationSelectorSettings.selectorLineDashArray)||0===this.pdfViewer.stampSettings.annotationSelectorSettings.selectorLineDashArray.length?[4]:this.pdfViewer.stampSettings.annotationSelectorSettings.selectorLineDashArray;w.length>2&&(w=[w[0],w[1]]),t.dashArray=w.toString()}else if("Image"===e&&this.pdfViewer.customStampSettings.annotationSelectorSettings){var y=sf.base.isNullOrUndefined(this.pdfViewer.customStampSettings.annotationSelectorSettings.selectionBorderColor)||""===this.pdfViewer.customStampSettings.annotationSelectorSettings.selectionBorderColor?"#0000ff":this.pdfViewer.customStampSettings.annotationSelectorSettings.selectionBorderColor;t.stroke=y;s=sf.base.isNullOrUndefined(this.pdfViewer.customStampSettings.annotationSelectorSettings.selectionBorderThickness)?1:this.pdfViewer.customStampSettings.annotationSelectorSettings.selectionBorderThickness;t.strokeWidth=s;var S=sf.base.isNullOrUndefined(this.pdfViewer.customStampSettings.annotationSelectorSettings.selectorLineDashArray)||0===this.pdfViewer.customStampSettings.annotationSelectorSettings.selectorLineDashArray.length?[4]:this.pdfViewer.customStampSettings.annotationSelectorSettings.selectorLineDashArray;S.length>2&&(S=[S[0],S[1]]),t.dashArray=S.toString()}}else{var v=sf.base.isNullOrUndefined(this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectionBorderColor)||""===this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectionBorderColor?"black":this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectionBorderColor;t.stroke=v;var s=sf.base.isNullOrUndefined(this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectionBorderThickness)?1:this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectionBorderThickness;t.strokeWidth=s;var b=sf.base.isNullOrUndefined(this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectorLineDashArray)||0===this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectorLineDashArray.length?[4]:this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectorLineDashArray;b.length>2&&(b=[b[0],b[1]]),t.dashArray=b.toString()}},e.prototype.renderCircularHandle=function(e,t,i,n,o,a,s,r,l,d,h,p,c,u){var f=t,g={x:i,y:n};if(r=r||{scale:1,tx:0,ty:0},0!==f.rotateAngle||0!==f.parentTransform){var m=sf.drawings.identityMatrix();sf.drawings.rotateMatrix(m,f.rotateAngle+f.parentTransform,f.offsetX,f.offsetY),g=sf.drawings.transformPointByMatrix(m,g)}var w,S=y(f);w=this.pdfViewer.selectedItems.annotations.length>0&&this.pdfViewer.selectedItems.annotations[0].measureType?this.pdfViewer.selectedItems.annotations[0].measureType:this.pdfViewer.selectedItems.formFields.length>0?this.pdfViewer.selectedItems.formFields[0].formFieldAnnotationType:this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType,this.getResizerColors(w,S,u,r),this.getShapeSize(w,S,u,r),S.strokeWidth=1,void 0!==p&&(S.id="segmentEnd_"+p),S.centerX=(g.x+r.tx)*r.scale,S.centerY=(g.y+r.ty)*r.scale,S.angle=0,S.id=e,S.visible=a,S.class=c,S.opacity=1,l&&(S.class+=" e-connected"),d&&(S.visible=!1),S.x=g.x*r.scale-S.width/2,S.y=g.y*r.scale-S.height/2;var v=this.getParentSvg(t,"selector");"Square"===this.getShape(w,u)?this.svgRenderer.drawRectangle(o,S,e,void 0,!0,v):"Circle"===this.getShape(w,u)&&this.svgRenderer.drawCircle(o,S,1)},e.prototype.getShapeSize=function(e,t,n,o){if(n&&"object"!==i(n)&&""!==n){var a=JSON.parse(n);t.radius=(sf.base.isNullOrUndefined(a.resizerSize)||8===a.resizerSize?8:a.resizerSize)/2,t.width=(sf.base.isNullOrUndefined(a.resizerSize)||8===a.resizerSize?8:a.resizerSize)*o.scale,t.height=(sf.base.isNullOrUndefined(a.resizerSize)||8===a.resizerSize?8:a.resizerSize)*o.scale}else{a=this.pdfViewer.annotationSelectorSettings;t.radius=(sf.base.isNullOrUndefined(a.resizerSize)||8===a.resizerSize?8:a.resizerSize)/2,t.width=(sf.base.isNullOrUndefined(a.resizerSize)||8===a.resizerSize?8:a.resizerSize)*o.scale,t.height=(sf.base.isNullOrUndefined(a.resizerSize)||8===a.resizerSize?8:a.resizerSize)*o.scale,"Line"===e&&this.pdfViewer.lineSettings.annotationSelectorSettings?(t.radius=(sf.base.isNullOrUndefined(this.pdfViewer.lineSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.lineSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.lineSettings.annotationSelectorSettings.resizerSize)/2,t.width=(sf.base.isNullOrUndefined(this.pdfViewer.lineSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.lineSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.lineSettings.annotationSelectorSettings.resizerSize)*o.scale,t.height=(sf.base.isNullOrUndefined(this.pdfViewer.lineSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.lineSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.lineSettings.annotationSelectorSettings.resizerSize)*o.scale):"LineWidthArrowHead"===e&&this.pdfViewer.arrowSettings.annotationSelectorSettings?(t.radius=(sf.base.isNullOrUndefined(this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerSize)/2,t.width=(sf.base.isNullOrUndefined(this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerSize)*o.scale,t.height=(sf.base.isNullOrUndefined(this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerSize)*o.scale):"Rectangle"===e&&this.pdfViewer.rectangleSettings.annotationSelectorSettings?(t.radius=(sf.base.isNullOrUndefined(this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerSize)/2,t.width=(sf.base.isNullOrUndefined(this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerSize)*o.scale,t.height=(sf.base.isNullOrUndefined(this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerSize)*o.scale):"Ellipse"===e&&this.pdfViewer.circleSettings.annotationSelectorSettings?(t.radius=(sf.base.isNullOrUndefined(this.pdfViewer.circleSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.circleSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.circleSettings.annotationSelectorSettings.resizerSize)/2,t.width=(sf.base.isNullOrUndefined(this.pdfViewer.circleSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.circleSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.circleSettings.annotationSelectorSettings.resizerSize)*o.scale,t.height=(sf.base.isNullOrUndefined(this.pdfViewer.circleSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.circleSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.circleSettings.annotationSelectorSettings.resizerSize)*o.scale):"Distance"===e&&this.pdfViewer.distanceSettings.annotationSelectorSettings?(t.radius=(sf.base.isNullOrUndefined(this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerSize)/2,t.width=(sf.base.isNullOrUndefined(this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerSize)*o.scale,t.height=(sf.base.isNullOrUndefined(this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerSize)*o.scale):"Polygon"===e&&this.pdfViewer.polygonSettings.annotationSelectorSettings?(t.radius=(sf.base.isNullOrUndefined(this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerSize)/2,t.width=(sf.base.isNullOrUndefined(this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerSize)*o.scale,t.height=(sf.base.isNullOrUndefined(this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerSize)*o.scale):"Radius"===e&&this.pdfViewer.radiusSettings.annotationSelectorSettings?(t.radius=(sf.base.isNullOrUndefined(this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerSize)/2,t.width=(sf.base.isNullOrUndefined(this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerSize)*o.scale,t.height=(sf.base.isNullOrUndefined(this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerSize)*o.scale):"Stamp"===e&&this.pdfViewer.stampSettings.annotationSelectorSettings?(t.radius=(sf.base.isNullOrUndefined(this.pdfViewer.stampSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.stampSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.stampSettings.annotationSelectorSettings.resizerSize)/2,t.width=(sf.base.isNullOrUndefined(this.pdfViewer.stampSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.stampSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.stampSettings.annotationSelectorSettings.resizerSize)*o.scale,t.height=(sf.base.isNullOrUndefined(this.pdfViewer.stampSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.stampSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.stampSettings.annotationSelectorSettings.resizerSize)*o.scale):"Image"===e&&this.pdfViewer.customStampSettings.annotationSelectorSettings?(t.radius=(sf.base.isNullOrUndefined(this.pdfViewer.customStampSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.customStampSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.customStampSettings.annotationSelectorSettings.resizerSize)/2,t.width=(sf.base.isNullOrUndefined(this.pdfViewer.customStampSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.customStampSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.customStampSettings.annotationSelectorSettings.resizerSize)*o.scale,t.height=(sf.base.isNullOrUndefined(this.pdfViewer.customStampSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.customStampSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.customStampSettings.annotationSelectorSettings.resizerSize)*o.scale):"FreeText"===e&&this.pdfViewer.freeTextSettings.annotationSelectorSettings?(t.radius=(sf.base.isNullOrUndefined(this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerSize)/2,t.width=(sf.base.isNullOrUndefined(this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerSize)*o.scale,t.height=(sf.base.isNullOrUndefined(this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerSize)*o.scale):"HandWrittenSignature"!==e&&"SignatureText"!==e&&"SignatureImage"!==e||!this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings?"Perimeter"===e&&this.pdfViewer.perimeterSettings.annotationSelectorSettings?(t.radius=(sf.base.isNullOrUndefined(this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerSize)/2,t.width=(sf.base.isNullOrUndefined(this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerSize)*o.scale,t.height=(sf.base.isNullOrUndefined(this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerSize)*o.scale):"Area"===e&&this.pdfViewer.areaSettings.annotationSelectorSettings?(t.radius=(sf.base.isNullOrUndefined(this.pdfViewer.areaSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.areaSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.areaSettings.annotationSelectorSettings.resizerSize)/2,t.width=(sf.base.isNullOrUndefined(this.pdfViewer.areaSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.areaSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.areaSettings.annotationSelectorSettings.resizerSize)*o.scale,t.height=(sf.base.isNullOrUndefined(this.pdfViewer.areaSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.areaSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.areaSettings.annotationSelectorSettings.resizerSize)*o.scale):"Volume"===e&&this.pdfViewer.volumeSettings.annotationSelectorSettings?(t.radius=(sf.base.isNullOrUndefined(this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerSize)/2,t.width=(sf.base.isNullOrUndefined(this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerSize)*o.scale,t.height=(sf.base.isNullOrUndefined(this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerSize)*o.scale):"Ink"===e&&this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings&&(t.radius=(sf.base.isNullOrUndefined(this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerSize)/2,t.width=(sf.base.isNullOrUndefined(this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerSize)*o.scale,t.height=(sf.base.isNullOrUndefined(this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerSize)*o.scale):(t.radius=(sf.base.isNullOrUndefined(this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerSize)/2,t.width=(sf.base.isNullOrUndefined(this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerSize)*o.scale,t.height=(sf.base.isNullOrUndefined(this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerSize)*o.scale)}},e.prototype.getShape=function(e,t){var n;if(t&&"object"!==i(t)&&""!==t){var o=JSON.parse(t);n=sf.base.isNullOrUndefined(o.resizerShape)||"Square"===o.resizerShape?"Square":o.resizerShape}else{o=this.pdfViewer.annotationSelectorSettings;n=sf.base.isNullOrUndefined(o.resizerShape)||"Square"===o.resizerShape?"Square":o.resizerShape,"Line"===e&&this.pdfViewer.lineSettings.annotationSelectorSettings?n=sf.base.isNullOrUndefined(this.pdfViewer.lineSettings.annotationSelectorSettings.resizerShape)||"Square"===this.pdfViewer.lineSettings.annotationSelectorSettings.resizerShape?"Square":this.pdfViewer.lineSettings.annotationSelectorSettings.resizerShape:"LineWidthArrowHead"===e&&this.pdfViewer.arrowSettings.annotationSelectorSettings?n=sf.base.isNullOrUndefined(this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerShape)||"Square"===this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerShape?"Square":this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerShape:"Rectangle"===e&&this.pdfViewer.rectangleSettings.annotationSelectorSettings?n=sf.base.isNullOrUndefined(this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerShape)||"Square"===this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerShape?"Square":this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerShape:"Ellipse"===e&&this.pdfViewer.circleSettings.annotationSelectorSettings?n=sf.base.isNullOrUndefined(this.pdfViewer.circleSettings.annotationSelectorSettings.resizerShape)||"Square"===this.pdfViewer.circleSettings.annotationSelectorSettings.resizerShape?"Square":this.pdfViewer.circleSettings.annotationSelectorSettings.resizerShape:"Polygon"===e&&this.pdfViewer.polygonSettings.annotationSelectorSettings?n=sf.base.isNullOrUndefined(this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerShape)||"Square"===this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerShape?"Square":this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerShape:"Distance"===e&&this.pdfViewer.distanceSettings.annotationSelectorSettings?n=sf.base.isNullOrUndefined(this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerShape)||"Square"===this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerShape?"Square":this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerShape:"Radius"===e&&this.pdfViewer.radiusSettings.annotationSelectorSettings?n=sf.base.isNullOrUndefined(this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerShape)||"Square"===this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerShape?"Square":this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerShape:"Stamp"===e&&this.pdfViewer.stampSettings.annotationSelectorSettings?n=sf.base.isNullOrUndefined(this.pdfViewer.stampSettings.annotationSelectorSettings.resizerShape)||"Square"===this.pdfViewer.stampSettings.annotationSelectorSettings.resizerShape?"Square":this.pdfViewer.stampSettings.annotationSelectorSettings.resizerShape:"Image"===e&&this.pdfViewer.customStampSettings.annotationSelectorSettings?n=sf.base.isNullOrUndefined(this.pdfViewer.customStampSettings.annotationSelectorSettings.resizerShape)||"Square"===this.pdfViewer.customStampSettings.annotationSelectorSettings.resizerShape?"Square":this.pdfViewer.customStampSettings.annotationSelectorSettings.resizerShape:"FreeText"===e&&this.pdfViewer.freeTextSettings.annotationSelectorSettings?n=sf.base.isNullOrUndefined(this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerShape)||"Square"===this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerShape?"Square":this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerShape:("HandWrittenSignature"===e||"SignatureText"===e||"SignatureImage"===e)&&this.pdfViewer.handWrittenSignatureSettings&&this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings?n=sf.base.isNullOrUndefined(this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerShape)||"Square"===this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerShape?"Square":this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerShape:"Perimeter"===e&&this.pdfViewer.perimeterSettings.annotationSelectorSettings?n=sf.base.isNullOrUndefined(this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerShape)||"Square"===this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerShape?"Square":this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerShape:"Area"===e&&this.pdfViewer.areaSettings.annotationSelectorSettings?n=sf.base.isNullOrUndefined(this.pdfViewer.areaSettings.annotationSelectorSettings.resizerShape)||"Square"===this.pdfViewer.areaSettings.annotationSelectorSettings.resizerShape?"Square":this.pdfViewer.areaSettings.annotationSelectorSettings.resizerShape:"Volume"===e&&this.pdfViewer.volumeSettings.annotationSelectorSettings?n=sf.base.isNullOrUndefined(this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerShape)||"Square"===this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerShape?"Square":this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerShape:"Ink"===e&&this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings&&(n=sf.base.isNullOrUndefined(this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerShape)||"Square"===this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerShape?"Square":this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerShape)}return n},e.prototype.getResizerColors=function(e,t,n,o){if(n&&"object"!==i(n)&&""!==n){var a=JSON.parse(n);t.stroke=sf.base.isNullOrUndefined(a.resizerBorderColor)||"black"===a.resizerBorderColor?"black":a.resizerBorderColor,t.fill=sf.base.isNullOrUndefined(a.resizerFillColor)||"#FF4081"===a.resizerFillColor?"#FF4081":a.resizerFillColor}else{a=this.pdfViewer.annotationSelectorSettings;t.stroke=sf.base.isNullOrUndefined(a.resizerBorderColor)||"black"===a.resizerBorderColor?"black":a.resizerBorderColor,t.fill=sf.base.isNullOrUndefined(a.resizerFillColor)||"#FF4081"===a.resizerFillColor?"#FF4081":a.resizerFillColor,"Line"===e&&this.pdfViewer.lineSettings.annotationSelectorSettings?(t.stroke=sf.base.isNullOrUndefined(this.pdfViewer.lineSettings.annotationSelectorSettings.resizerBorderColor)||"black"===this.pdfViewer.lineSettings.annotationSelectorSettings.resizerBorderColor?"black":this.pdfViewer.lineSettings.annotationSelectorSettings.resizerBorderColor,t.fill=sf.base.isNullOrUndefined(this.pdfViewer.lineSettings.annotationSelectorSettings.resizerFillColor)||"#FF4081"===this.pdfViewer.lineSettings.annotationSelectorSettings.resizerFillColor?"#FF4081":this.pdfViewer.lineSettings.annotationSelectorSettings.resizerFillColor):"LineWidthArrowHead"===e&&this.pdfViewer.arrowSettings.annotationSelectorSettings?(t.stroke=sf.base.isNullOrUndefined(this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerBorderColor)||"black"===this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerBorderColor?"black":this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerBorderColor,t.fill=sf.base.isNullOrUndefined(this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerFillColor)||"#FF4081"===this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerFillColor?"#FF4081":this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerFillColor):"Rectangle"===e&&this.pdfViewer.rectangleSettings.annotationSelectorSettings?(t.stroke=sf.base.isNullOrUndefined(this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerBorderColor)||"black"===this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerBorderColor?"black":this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerBorderColor,t.fill=sf.base.isNullOrUndefined(this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerFillColor)||"#FF4081"===this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerFillColor?"#FF4081":this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerFillColor):"Ellipse"===e&&this.pdfViewer.circleSettings.annotationSelectorSettings?(t.stroke=sf.base.isNullOrUndefined(this.pdfViewer.circleSettings.annotationSelectorSettings.resizerBorderColor)||"black"===this.pdfViewer.circleSettings.annotationSelectorSettings.resizerBorderColor?"black":this.pdfViewer.circleSettings.annotationSelectorSettings.resizerBorderColor,t.fill=sf.base.isNullOrUndefined(this.pdfViewer.circleSettings.annotationSelectorSettings.resizerFillColor)||"#FF4081"===this.pdfViewer.circleSettings.annotationSelectorSettings.resizerFillColor?"#FF4081":this.pdfViewer.circleSettings.annotationSelectorSettings.resizerFillColor):"Distance"===e&&this.pdfViewer.distanceSettings.annotationSelectorSettings?(t.stroke=sf.base.isNullOrUndefined(this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerBorderColor)||"black"===this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerBorderColor?"black":this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerBorderColor,t.fill=sf.base.isNullOrUndefined(this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerFillColor)||"#FF4081"===this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerFillColor?"#FF4081":this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerFillColor):"Polygon"===e&&this.pdfViewer.polygonSettings.annotationSelectorSettings?(t.stroke=sf.base.isNullOrUndefined(this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerBorderColor)||"black"===this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerBorderColor?"black":this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerBorderColor,t.fill=sf.base.isNullOrUndefined(this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerFillColor)||"#FF4081"===this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerFillColor?"#FF4081":this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerFillColor):"Radius"===e&&this.pdfViewer.radiusSettings.annotationSelectorSettings?(t.stroke=sf.base.isNullOrUndefined(this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerBorderColor)||"black"===this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerBorderColor?"black":this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerBorderColor,t.fill=sf.base.isNullOrUndefined(this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerFillColor)||"#FF4081"===this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerFillColor?"#FF4081":this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerFillColor):"Stamp"===e&&this.pdfViewer.stampSettings.annotationSelectorSettings?(t.stroke=sf.base.isNullOrUndefined(this.pdfViewer.stampSettings.annotationSelectorSettings.resizerBorderColor)||"black"===this.pdfViewer.stampSettings.annotationSelectorSettings.resizerBorderColor?"black":this.pdfViewer.stampSettings.annotationSelectorSettings.resizerBorderColor,t.fill=sf.base.isNullOrUndefined(this.pdfViewer.stampSettings.annotationSelectorSettings.resizerFillColor)||"#FF4081"===this.pdfViewer.stampSettings.annotationSelectorSettings.resizerFillColor?"#FF4081":this.pdfViewer.stampSettings.annotationSelectorSettings.resizerFillColor):"Image"===e&&this.pdfViewer.customStampSettings.annotationSelectorSettings?(t.stroke=sf.base.isNullOrUndefined(this.pdfViewer.customStampSettings.annotationSelectorSettings.resizerBorderColor)||"black"===this.pdfViewer.customStampSettings.annotationSelectorSettings.resizerBorderColor?"black":this.pdfViewer.customStampSettings.annotationSelectorSettings.resizerBorderColor,t.fill=sf.base.isNullOrUndefined(this.pdfViewer.customStampSettings.annotationSelectorSettings.resizerFillColor)||"#FF4081"===this.pdfViewer.customStampSettings.annotationSelectorSettings.resizerFillColor?"#FF4081":this.pdfViewer.customStampSettings.annotationSelectorSettings.resizerFillColor):"FreeText"===e&&this.pdfViewer.freeTextSettings.annotationSelectorSettings?(t.stroke=sf.base.isNullOrUndefined(this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerBorderColor)||"black"===this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerBorderColor?"black":this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerBorderColor,t.fill=sf.base.isNullOrUndefined(this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerFillColor)||"#FF4081"===this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerFillColor?"#FF4081":this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerFillColor):"HandWrittenSignature"!==e&&"SignatureText"!==e&&"SignatureImage"!==e||!this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings?"Perimeter"===e&&this.pdfViewer.perimeterSettings.annotationSelectorSettings?(t.stroke=sf.base.isNullOrUndefined(this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerBorderColor)||"black"===this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerBorderColor?"black":this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerBorderColor,t.fill=sf.base.isNullOrUndefined(this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerFillColor)||"#FF4081"===this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerFillColor?"#FF4081":this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerFillColor):"Area"===e&&this.pdfViewer.areaSettings.annotationSelectorSettings?(t.stroke=sf.base.isNullOrUndefined(this.pdfViewer.areaSettings.annotationSelectorSettings.resizerBorderColor)||"black"===this.pdfViewer.areaSettings.annotationSelectorSettings.resizerBorderColor?"black":this.pdfViewer.areaSettings.annotationSelectorSettings.resizerBorderColor,t.fill=sf.base.isNullOrUndefined(this.pdfViewer.areaSettings.annotationSelectorSettings.resizerFillColor)||"#FF4081"===this.pdfViewer.areaSettings.annotationSelectorSettings.resizerFillColor?"#FF4081":this.pdfViewer.areaSettings.annotationSelectorSettings.resizerFillColor):"Volume"===e&&this.pdfViewer.volumeSettings.annotationSelectorSettings?(t.stroke=sf.base.isNullOrUndefined(this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerBorderColor)||"black"===this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerBorderColor?"black":this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerBorderColor,t.fill=sf.base.isNullOrUndefined(this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerFillColor)||"#FF4081"===this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerFillColor?"#FF4081":this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerFillColor):"Ink"===e&&this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings&&(t.stroke=sf.base.isNullOrUndefined(this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerBorderColor)||"black"===this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerBorderColor?"black":this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerBorderColor,t.fill=sf.base.isNullOrUndefined(this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerFillColor)||"#FF4081"===this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerFillColor?"#FF4081":this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerFillColor):(t.stroke=sf.base.isNullOrUndefined(this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerBorderColor)||"black"===this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerBorderColor?"black":this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerBorderColor,t.fill=sf.base.isNullOrUndefined(this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerFillColor)||"#FF4081"===this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerFillColor?"#FF4081":this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerFillColor)}},e.prototype.renderRotateThumb=function(e,t,i,n,o){new sf.drawings.PathElement;var a,s=e.offsetY-e.actualSize.height*e.pivot.y,r=e.offsetX-e.actualSize.width*e.pivot.x+e.pivot.x*e.actualSize.width,l=s;if(a={x:r=(r+i.tx)*i.scale,y:(l=(l+i.ty)*i.scale)-25},0!==e.rotateAngle||0!==e.parentTransform){var d=sf.drawings.identityMatrix();sf.drawings.rotateMatrix(d,e.rotateAngle+e.parentTransform,(i.tx+e.offsetX)*i.scale,(i.ty+e.offsetY)*i.scale),a=sf.drawings.transformPointByMatrix(d,a)}var h=y(e);h.stroke="black",h.strokeWidth=1,h.opacity=1,h.fill="#FF4081",h.centerX=a.x,h.centerY=a.y,h.radius=4,h.angle=0,h.visible=!0,h.class="e-diagram-rotate-handle",h.id="rotateThumb",this.svgRenderer.drawCircle(t,h,sf.drawings.ThumbsConstraints.Rotate,{"aria-label":"Thumb to rotate the selected object"})},e.prototype.renderResizeHandle=function(e,t,i,n,o,a,s,r,l,d,h,p){var c=e.offsetX-e.actualSize.width*e.pivot.x,u=e.offsetY-e.actualSize.height*e.pivot.y,f=e.actualSize.height,g=e.actualSize.width,m={scale:n,tx:0,ty:0};r&&(this.renderPivotLine(e,t,m),this.renderRotateThumb(e,t,m)),h&&(r=!0),this.renderBorder(e,t,p,m,a,s,!0,l);var w=e.actualSize.width*n,y=e.actualSize.height*n,S=this.pdfViewer.selectedItems.annotations.length>0?this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType:this.pdfViewer.selectedItems.formFields[0].formFieldAnnotationType,v=!1,b=this.pdfViewer.selectedItems.annotations[0],V=this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(b);(this.pdfViewer.annotationModule.checkIsLockSettings(b)||b.annotationSettings.isLock)&&this.getAllowedInteractions(V)&&(v=!0);var A=this.getResizerLocation(S,p);(A<1||A>3)&&(A=3);var x=!1;!this.pdfViewer.selectedItems.annotations[0]||"Ellipse"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&"Radius"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&"Rectangle"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&"Ink"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType||(x=!0),this.pdfViewer.viewerBase.checkSignatureFormField(e.id)||s||l||d||v||((r||x&&w>=40&&y>=40&&(1===A||3===A))&&(this.renderCircularHandle("resizeNorthWest",e,c,u,t,!0,i&sf.drawings.ThumbsConstraints.ResizeNorthWest,m,void 0,o,{"aria-label":"Thumb to resize the selected object on top left side direction"},void 0,"e-pv-diagram-resize-handle e-northwest",p),this.renderCircularHandle("resizeNorthEast",e,c+g,u,t,!0,i&sf.drawings.ThumbsConstraints.ResizeNorthEast,m,void 0,o,{"aria-label":"Thumb to resize the selected object on top right side direction"},void 0,"e-pv-diagram-resize-handle e-northeast",p),this.renderCircularHandle("resizeSouthWest",e,c,u+f,t,!0,i&sf.drawings.ThumbsConstraints.ResizeSouthWest,m,void 0,o,{"aria-label":"Thumb to resize the selected object on bottom left side direction"},void 0,"e-pv-diagram-resize-handle e-southwest",p),this.renderCircularHandle("resizeSouthEast",e,c+g,u+f,t,!0,i&sf.drawings.ThumbsConstraints.ResizeSouthEast,m,void 0,o,{"aria-label":"Thumb to resize the selected object on bottom right side direction"},void 0,"e-pv-diagram-resize-handle e-southeast",p)),(r||x)&&(!x||2!==A&&3!==A&&(w>=40&&y>=40||1!==A))||(this.renderCircularHandle("resizeNorth",e,c+g/2,u,t,!0,i&sf.drawings.ThumbsConstraints.ResizeNorth,m,void 0,o,{"aria-label":"Thumb to resize the selected object on top side direction"},void 0,"e-pv-diagram-resize-handle e-north",p),this.renderCircularHandle("resizeSouth",e,c+g/2,u+f,t,!0,i&sf.drawings.ThumbsConstraints.ResizeSouth,m,void 0,o,{"aria-label":"Thumb to resize the selected object on bottom side direction"},void 0,"e-pv-diagram-resize-handle e-south",p),this.renderCircularHandle("resizeWest",e,c,u+f/2,t,!0,i&sf.drawings.ThumbsConstraints.ResizeWest,m,void 0,o,{"aria-label":"Thumb to resize the selected object on left side direction"},void 0,"e-pv-diagram-resize-handle e-west",p),this.renderCircularHandle("resizeEast",e,c+g,u+f/2,t,!0,i&sf.drawings.ThumbsConstraints.ResizeEast,m,void 0,o,{"aria-label":"Thumb to resize the selected object on right side direction"},void 0,"e-pv-diagram-resize-handle e-east",p))),"Textbox"!==S&&"Checkbox"!==S&&"RadioButton"!==S&&"SignatureField"!==S&&"InitialField"!==S&&"DropdownList"!==S&&"ListBox"!==S&&"PasswordField"!==S||(this.renderCircularHandle("resizeNorth",e,c+g/2,u,t,!0,i&sf.drawings.ThumbsConstraints.ResizeNorth,m,void 0,o,{"aria-label":"Thumb to resize the selected object on top side direction"},void 0,"e-pv-diagram-resize-handle e-north",p),this.renderCircularHandle("resizeSouth",e,c+g/2,u+f,t,!0,i&sf.drawings.ThumbsConstraints.ResizeSouth,m,void 0,o,{"aria-label":"Thumb to resize the selected object on bottom side direction"},void 0,"e-pv-diagram-resize-handle e-south",p),this.renderCircularHandle("resizeWest",e,c,u+f/2,t,!0,i&sf.drawings.ThumbsConstraints.ResizeWest,m,void 0,o,{"aria-label":"Thumb to resize the selected object on left side direction"},void 0,"e-pv-diagram-resize-handle e-west",p),this.renderCircularHandle("resizeEast",e,c+g,u+f/2,t,!0,i&sf.drawings.ThumbsConstraints.ResizeEast,m,void 0,o,{"aria-label":"Thumb to resize the selected object on right side direction"},void 0,"e-pv-diagram-resize-handle e-east",p))},e.prototype.getAllowedInteractions=function(e){if(e&&e.length>0)for(var t=0;t<e.length;t++)if("None"!==e[0]&&"Resize"===e[t])return!1;return!0},e.prototype.getResizerLocation=function(e,t){var n;if(t&&"object"!==i(t)&&""!==t){var o=JSON.parse(t);n=sf.base.isNullOrUndefined(o.resizerLocation)||3===o.resizerLocation?3:o.resizerLocation}else{o=this.pdfViewer.annotationSelectorSettings;n=sf.base.isNullOrUndefined(o.resizerLocation)||3===o.resizerLocation?3:o.resizerLocation,"Line"===e&&this.pdfViewer.lineSettings.annotationSelectorSettings?n=sf.base.isNullOrUndefined(this.pdfViewer.lineSettings.annotationSelectorSettings.resizerLocation)||3===this.pdfViewer.lineSettings.annotationSelectorSettings.resizerLocation?3:this.pdfViewer.lineSettings.annotationSelectorSettings.resizerLocation:"LineWidthArrowHead"===e&&this.pdfViewer.arrowSettings.annotationSelectorSettings?n=sf.base.isNullOrUndefined(this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerLocation)||3===this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerLocation?3:this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerLocation:"Rectangle"===e&&this.pdfViewer.rectangleSettings.annotationSelectorSettings?n=sf.base.isNullOrUndefined(this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerLocation)||3===this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerLocation?3:this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerLocation:"Ellipse"===e&&this.pdfViewer.circleSettings.annotationSelectorSettings?n=sf.base.isNullOrUndefined(this.pdfViewer.circleSettings.annotationSelectorSettings.resizerLocation)||3===this.pdfViewer.circleSettings.annotationSelectorSettings.resizerLocation?3:this.pdfViewer.circleSettings.annotationSelectorSettings.resizerLocation:"Polygon"===e&&this.pdfViewer.polygonSettings.annotationSelectorSettings?n=sf.base.isNullOrUndefined(this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerLocation)||3===this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerLocation?3:this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerLocation:"Distance"===e?n=sf.base.isNullOrUndefined(this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerLocation)||3===this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerLocation?3:this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerLocation:"Radius"===e&&this.pdfViewer.radiusSettings.annotationSelectorSettings?n=sf.base.isNullOrUndefined(this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerLocation)||3===this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerLocation?3:this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerLocation:"Stamp"===e&&this.pdfViewer.stampSettings.annotationSelectorSettings?n=sf.base.isNullOrUndefined(this.pdfViewer.stampSettings.annotationSelectorSettings.resizerLocation)||3===this.pdfViewer.stampSettings.annotationSelectorSettings.resizerLocation?3:this.pdfViewer.stampSettings.annotationSelectorSettings.resizerLocation:"FreeText"===e&&this.pdfViewer.freeTextSettings.annotationSelectorSettings?n=sf.base.isNullOrUndefined(this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerLocation)||3===this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerLocation?3:this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerLocation:"HandWrittenSignature"!==e&&"SignatureText"!==e&&"SignatureImage"!==e||!this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings?"Ink"===e&&this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings&&(n=sf.base.isNullOrUndefined(this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerLocation)||3===this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerLocation?3:this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerLocation):n=sf.base.isNullOrUndefined(this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerLocation)||3===this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerLocation?3:this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerLocation}return n},e.prototype.renderPivotLine=function(e,t,i,n,o){var a=e,s=!0;o&&(s=!1);var r=y(a,i);r.fill="None",r.stroke="black",r.strokeWidth=1,r.dashArray="2,3",r.visible=s;var l=i.scale;r.x*=l,r.y*=l,r.width*=l,r.height*=l,r.id="pivotLine",r.class="e-diagram-pivot-line";var d={x:a.actualSize.width*a.pivot.x*l,y:-20},h={x:a.actualSize.width*a.pivot.x*l,y:0};r.startPoint=d,r.endPoint=h,this.svgRenderer.drawLine(t,r)},e.prototype.renderEndPointHandle=function(e,t,i,n,o,a,s,r){n=n||{tx:0,ty:0,scale:1};var l,d=e.sourcePoint,h=e.targetPoint,p=e.wrapper;for(l=0;l<e.vertexPoints.length;l++){var c=e.vertexPoints[l];this.renderCircularHandle("segementThumb_"+(l+1),p,c.x,c.y,t,!0,i&sf.drawings.ThumbsConstraints.ConnectorSource,n,o,null,null,l,null,r)}var u=0;if("Distance"===e.shapeAnnotationType)for(l=0;l<e.wrapper.children.length;l++){c=e.wrapper.children[l];var f=void 0,g=sf.drawings.Point.findAngle(e.sourcePoint,e.targetPoint);if(c.id.indexOf("leader")>-1){var m=e.wrapper.children[0].bounds.center;0===u?(f={x:e.sourcePoint.x,y:e.sourcePoint.y-e.leaderHeight},m=d):(f={x:e.targetPoint.x,y:e.targetPoint.y-e.leaderHeight},m=h);var w=sf.drawings.identityMatrix();sf.drawings.rotateMatrix(w,g,m.x,m.y);var y=sf.drawings.transformPointByMatrix(w,{x:f.x,y:f.y});this.renderCircularHandle("leaderThumb_"+(l+1),p,y.x,y.y,t,!0,i&sf.drawings.ThumbsConstraints.ConnectorSource,n,o,null,null,l,null,r),u++}}},e.prototype.initSelectorWrapper=function(){this.pdfViewer.selectedItems;this.initWrapper(this)},e.prototype.initWrapper=function(e){var t=new sf.drawings.Container;if(t.measureChildren=!1,t.children=[],this.pdfViewer.selectedItems.formFields&&this.pdfViewer.selectedItems.formFields.length>0)for(var i=0;i<this.pdfViewer.selectedItems.formFields.length;i++){var n=e.pdfViewer.nameTable[this.pdfViewer.selectedItems.formFields[i].id].wrapper;t.children.push(n)}else if(this.pdfViewer.selectedItems.annotations)for(i=0;i<this.pdfViewer.selectedItems.annotations.length;i++)if(!sf.base.isNullOrUndefined(this.pdfViewer.selectedItems.annotations[i])){n=e.pdfViewer.nameTable[this.pdfViewer.selectedItems.annotations[i].id].wrapper;t.children.push(n),this.pdfViewer.selectedItems.wrapper=t}return this.pdfViewer.selectedItems.wrapper=t,t},e.prototype.select=function(e,t,i,n){for(var o=this.pdfViewer.selectedItems,a=0;a<e.length;a++){var s=this.pdfViewer.nameTable[e[a]];if(s&&!s.formFieldAnnotationType&&!(s instanceof f)&&s.wrapper.visible){var r=void 0;s.annotationSettings?(r=s.annotationSettings).isLock=JSON.parse(r.isLock):s.formFieldAnnotationType||(r=this.pdfViewer.annotationModule.findAnnotationSettings(s,!0),s.annotationSettings=r);var l=!s.formFieldAnnotationType&&r.isLock;r&&r.isLock&&this.pdfViewer.annotationModule.checkAllowedInteractions("Select",s)&&(l=!1),l||(o.annotations.push(s),this.initSelectorWrapper(),o.wrapper.rotateAngle=o.rotateAngle=0,o.wrapper.children.push(s.wrapper),n||this.renderSelector(s.pageIndex,t,s,!0))}}},e.prototype.dragSelectedObjects=function(e,t,i,n,o){var a=this.pdfViewer.selectedItems;return this.drag(a,e,t,n,o),!0},e.prototype.drag=function(e,t,i,n,o){if(e instanceof f){if(e.annotations.length)for(var a=0,s=e.annotations;a<s.length;a++){var r=s[a];this.drag(r,t,i,n,o),this.renderSelector(r.pageIndex,n,o)}}else this.dragAnnotation(e.annotations[0],t,i)},e.prototype.dragAnnotation=function(e,t,i){e.wrapper.offsetX,e.wrapper.offsetY;if(e.wrapper.offsetX+=t,e.wrapper.offsetY+=i,g(e)||"Polygon"===e.shapeAnnotationType){if(e.wrapper.children.length)for(var n=e.wrapper.children,o=0;o<n.length;o++)n[o].offsetX+=t,n[o].offsetY+=i;this.dragControlPoint(e,t,i,!0)}this.nodePropertyChange(e,{bounds:{x:e.wrapper.offsetX,y:e.wrapper.offsetY}}),e.wrapper.measureChildren=!1;var a=e.pageIndex?e.pageIndex:this.pdfViewer.selectedItems.annotations[0].pageIndex,s=document.getElementById(this.pdfViewer.dataId+"_annotationCanvas_"+a);this.pdfViewer.renderDrawing(s,a)},e.prototype.dragControlPoint=function(e,t,i,n,o){for(var a=this.pdfViewer.nameTable[e.id],s=0;s<a.vertexPoints.length;s++)a.vertexPoints[s].x+=t,a.vertexPoints[s].y+=i;return n||this.updateEndPoint(a),!0},e.prototype.updateEndPoint=function(e){this.nodePropertyChange(e,{vertexPoints:e.vertexPoints}),this.renderSelector(e.pageIndex)},e.prototype.nodePropertyChange=function(e,t){var i;e.wrapper.outerBounds,e.wrapper.bounds;if(t.bounds&&(void 0!==t.bounds.width&&(e.bounds.width=e.wrapper.width=t.bounds.width),void 0!==t.bounds.height&&(e.bounds.height=e.wrapper.height=t.bounds.height),void 0!==t.bounds.x&&(e.bounds.x=t.bounds.x-.5*e.bounds.width,e.wrapper.offsetX=t.bounds.x),void 0!==t.bounds.y&&(e.bounds.y=t.bounds.y-.5*e.bounds.height,e.wrapper.offsetY=t.bounds.y),void 0!==t.leaderHeight&&(e.leaderHeight=t.leaderHeight,this.updateConnector(e,e.vertexPoints)),e.wrapper.children.length))for(var n=e.wrapper.children,o=0;o<n.length;o++)if(n[o].id){var a=n[o].id.split("_");if(a.length&&(a.indexOf("perimeter")>-1||a.indexOf("radius")>-1))this.setNodePosition(n[o],e);else if(a.length&&a.indexOf("srcDec")>-1)n[o].offsetX=e.vertexPoints[0].x,n[o].offsetY=e.vertexPoints[0].y;else if(a.length&&a.indexOf("tarDec")>-1)n[o].offsetX=e.vertexPoints[e.vertexPoints.length-1].x,n[o].offsetY=e.vertexPoints[e.vertexPoints.length-1].y;else if(a.length&&a.indexOf("stamp")>-1){var s=0;if(void 0!==e.wrapper.width&&void 0!==e.wrapper.height&&(s=20),e.isDynamicStamp){n[o].width=e.bounds.width-s,n[o].height=e.bounds.height/2-s;var r=n[1],l=this.pdfViewer.stampSettings?this.pdfViewer.stampSettings:this.pdfViewer.annotationSettings;l&&(l.maxHeight||l.maxWidth)&&e.bounds.height>60?r.style.fontSize=0!=s?e.bounds.width/s:e.wrapper.bounds.width/20:r.style.fontSize=0!=s?this.fontSizeCalculation(e,r,e.bounds.width-20):this.fontSizeCalculation(e,r,e.wrapper.bounds.width-20),0!==s&&(r.margin.bottom=-n[o].height/2)}else n[o].width=e.bounds.width-s,n[o].height=e.bounds.height-s;n[o].offsetX=e.wrapper.offsetX,n[o].offsetY=e.wrapper.offsetX,n[o].isDirt=!0}}if(void 0!==t.sourceDecoraterShapes&&(e.sourceDecoraterShapes=t.sourceDecoraterShapes,this.updateConnector(e,e.vertexPoints)),void 0!==t.isReadonly&&"FreeText"===e.shapeAnnotationType&&(e.isReadonly=t.isReadonly),void 0!==t.taregetDecoraterShapes&&(e.taregetDecoraterShapes=t.taregetDecoraterShapes,this.updateConnector(e,e.vertexPoints)),void 0!==t.fillColor&&(e.fillColor=t.fillColor,e.wrapper.children[0].style.fill=t.fillColor,(e.enableShapeLabel||e.measureType)&&e.wrapper&&e.wrapper.children))for(var n=e.wrapper.children,d=0;d<n.length;d++)n[d].textNodes&&(e.enableShapeLabel&&(e.labelFillColor=t.fillColor,n[d].style.fill=t.fillColor),e.measureType&&(n[d].style.fill=t.fillColor));if(e.enableShapeLabel&&void 0!==t.labelFillColor&&e.enableShapeLabel&&e.wrapper&&e.wrapper.children)for(var n=e.wrapper.children,h=0;h<n.length;h++)n[h].textNodes&&(e.labelFillColor=t.labelFillColor,n[h].style.fill=t.labelFillColor);if(void 0!==t.opacity&&("Stamp"===e.shapeAnnotationType||"FreeText"===e.shapeAnnotationType?(e.wrapper.children[1].style.opacity=t.opacity,e.wrapper.children[2]&&(e.wrapper.children[2].style.opacity=t.opacity),e.opacity=t.opacity):("StickyNotes"===e.shapeAnnotationType&&(this.pdfViewer.nameTable[e.annotName].wrapper.children[0].style.opacity=t.opacity),e.opacity=t.opacity),e.wrapper.children[0].style.opacity=t.opacity,e.enableShapeLabel&&e.wrapper&&e.wrapper.children))for(var n=e.wrapper.children,p=0;p<n.length;p++)n[p].textNodes&&(n[p].style.opacity=t.labelOpacity);if(e.enableShapeLabel&&void 0!==t.labelOpacity&&e.enableShapeLabel&&e.wrapper&&e.wrapper.children){n=e.wrapper.children;for(var c=0;c<n.length;c++)n[c].textNodes&&(n[c].style.opacity=t.labelOpacity)}if(void 0!==t.rotateAngle&&(e.rotateAngle=t.rotateAngle,e.wrapper.rotateAngle=t.rotateAngle),void 0!==t.strokeColor&&(e.strokeColor=t.strokeColor,e.wrapper.children[0].style.strokeColor=t.strokeColor),void 0!==t.fontColor){if(e.fontColor=t.fontColor,"FreeText"===e.shapeAnnotationType&&e.wrapper&&e.wrapper.children&&e.wrapper.children.length)(n=e.wrapper.children)[1].style.color=t.fontColor,"Justify"===e.textAlign?n[1].horizontalAlignment="Center":n[1].horizontalAlignment="Auto";if(e.enableShapeLabel&&e.wrapper&&e.wrapper.children){n=e.wrapper.children;for(var u=0;u<n.length;u++)n[u].textNodes&&(n[u].style.color=t.fontColor)}}if(void 0!==t.fontFamily){if(e.fontFamily=t.fontFamily,"FreeText"===e.shapeAnnotationType&&e.wrapper&&e.wrapper.children&&e.wrapper.children.length)(n=e.wrapper.children)[1].style.fontFamily=t.fontFamily;if(e.enableShapeLabel&&e.wrapper&&e.wrapper.children){n=e.wrapper.children;for(var f=0;f<n.length;f++)n[f].textNodes&&(n[f].style.fontFamily=t.fontFamily)}}if(void 0!==t.fontSize){if(e.fontSize=t.fontSize,("FreeText"===e.shapeAnnotationType||"SignatureText"===e.shapeAnnotationType)&&e.wrapper&&e.wrapper.children&&e.wrapper.children.length)(n=e.wrapper.children)[1].style.fontSize=t.fontSize,"SignatureText"===e.shapeAnnotationType&&(e.wrapper.children[1].bounds.width=e.bounds.width,e.wrapper.children[1].desiredSize.width=e.bounds.width,e.wrapper.children[1].actualSize.width=e.bounds.width,n[1].horizontalAlignment="Center",n[1].verticalAlignment="Center",n[1].setOffsetWithRespectToBounds(0,0,"Absolute"));if(e.enableShapeLabel&&e.wrapper&&e.wrapper.children){n=e.wrapper.children;for(var w=0;w<n.length;w++)n[w].textNodes&&(n[w].style.fontSize=t.fontSize)}}if(void 0!==t.font&&"FreeText"===e.shapeAnnotationType&&e.wrapper&&e.wrapper.children&&e.wrapper.children.length){n=e.wrapper.children;void 0!==t.font.isBold&&(n[1].style.bold=t.font.isBold,e.font.isBold=t.font.isBold),void 0!==t.font.isItalic&&(n[1].style.italic=t.font.isItalic,e.font.isItalic=t.font.isItalic),void 0!==t.font.isUnderline&&(t.font.isUnderline&&(e.font.isStrikeout=!1),!0===t.font.isUnderline?n[1].style.textDecoration="Underline":t.font.isStrikeout||(n[1].style.textDecoration="None"),e.font.isUnderline=t.font.isUnderline),void 0!==t.font.isStrikeout&&(t.font.isStrikeout&&(e.font.isUnderline=!1),!0===t.font.isStrikeout?n[1].style.textDecoration="LineThrough":t.font.isUnderline||(n[1].style.textDecoration="None"),e.font.isStrikeout=t.font.isStrikeout)}void 0!==t.textAlign&&(e.textAlign=t.textAlign,"FreeText"===e.shapeAnnotationType&&e.wrapper&&e.wrapper.children&&e.wrapper.children.length&&((n=e.wrapper.children)[1].style.textAlign=t.textAlign,1===n[1].childNodes.length?"Justify"===e.textAlign?(n[1].horizontalAlignment="Left",n[1].setOffsetWithRespectToBounds(0,0,null)):"Right"===e.textAlign?(n[1].horizontalAlignment="Right",n[1].setOffsetWithRespectToBounds(.97,0,null)):"Left"===e.textAlign?(n[1].horizontalAlignment="Left",n[1].setOffsetWithRespectToBounds(0,0,null)):"Center"===e.textAlign&&(n[1].horizontalAlignment="Center",n[1].setOffsetWithRespectToBounds(.46,0,null)):n[1].childNodes.length>1&&"Justify"===e.textAlign?n[1].horizontalAlignment="Center":n[1].horizontalAlignment="Auto"));if(void 0!==t.thickness&&(e.thickness=t.thickness,e.wrapper.children[0].style.strokeWidth=t.thickness),void 0!==t.borderDashArray&&(e.borderDashArray=t.borderDashArray,e.wrapper.children[0].style.strokeDashArray=t.borderDashArray),void 0!==t.borderStyle&&(e.borderStyle=t.borderStyle),void 0!==t.author&&(e.author=t.author),void 0!==t.modifiedDate&&(e.modifiedDate=t.modifiedDate),void 0!==t.subject&&(e.subject=t.subject),void 0!==t.vertexPoints&&(e.vertexPoints=t.vertexPoints,this.pdfViewer.nameTable[e.id].vertexPoints=t.vertexPoints,this.updateConnector(e,t.vertexPoints)),void 0!==t.leaderHeight&&"Polygon"!==e.shapeAnnotationType&&(e.leaderHeight=t.leaderHeight,this.updateConnector(e,e.vertexPoints)),void 0!==t.notes&&(e.notes=t.notes),void 0!==t.annotName&&(e.annotName=t.annotName),"Distance"===e.shapeAnnotationType){for(i=0;i<e.wrapper.children.length;i++){var y=e.wrapper.children[i],S=b(e);y.id.indexOf("leader1")>-1&&this.setLineDistance(e,S,y,!1),y.id.indexOf("leader2")>-1&&this.setLineDistance(e,S,y,!0)}this.updateConnector(e,e.vertexPoints)}if("Polygon"===e.shapeAnnotationType&&t.vertexPoints){e.data=M(e.vertexPoints);var v=e.wrapper.children[0];v.data=e.data,v.canMeasurePath=!0}if(g(e))for(var V=0;V<e.wrapper.children.length;V++){e.wrapper.children[V].textNodes||m(e,e.wrapper.children[V]),!0===e.enableShapeLabel?(e.wrapper.children[V]instanceof sf.drawings.TextElement&&(e.wrapper.children[V].style.fill=e.labelFillColor),e.wrapper.children[V]instanceof sf.drawings.PathElement&&"Perimeter"===e.measureType&&(e.wrapper.children[V].style.fill="transparent")):(e.wrapper.children[V]instanceof sf.drawings.PathElement&&"Perimeter"===e.measureType||e.wrapper.children[V]instanceof sf.drawings.TextElement)&&(e.wrapper.children[V].style.fill="transparent")}if(e&&("FreeText"===e.shapeAnnotationType||!0===e.enableShapeLabel)&&e.wrapper&&e.wrapper.children&&e.wrapper.children.length){n=e.wrapper.children;for(var A=0;A<n.length;A++)n[A].textNodes&&("FreeText"===e.shapeAnnotationType?(t.dynamicText?(n[A].content=t.dynamicText,e.dynamicText=t.dynamicText):n[A].content=e.dynamicText,n[A].width=e.bounds.width):(!0===e.enableShapeLabel&&e.measureType||!0===e.enableShapeLabel)&&(t.labelContent?(n[A].content=t.labelContent,e.labelContent=t.labelContent):n[A].content=e.labelContent,e.notes=n[A].content),n[A].isDirt=!0)}(e.wrapper.measure(new sf.drawings.Size(e.wrapper.bounds.width,e.wrapper.bounds.height)),e.wrapper.arrange(e.wrapper.desiredSize),e&&e.formFieldAnnotationType)&&(e.wrapper&&e.wrapper.children&&e.wrapper.children.length&&((n=e.wrapper.children[0]).actualSize.width=e.wrapper.desiredSize.width,n.actualSize.height=e.wrapper.desiredSize.height));if(e&&"FreeText"===e.shapeAnnotationType&&"Text Box"===e.subject){if(e.wrapper&&e.wrapper.children&&e.wrapper.children.length){(n=e.wrapper.children)[1].childNodes.length>1&&"Justify"===e.textAlign?n[1].horizontalAlignment="Center":1===n[1].childNodes.length&&("Justify"===e.textAlign?(n[1].horizontalAlignment="Left",n[1].setOffsetWithRespectToBounds(0,0,null)):"Right"===e.textAlign?(n[1].horizontalAlignment="Right",n[1].setOffsetWithRespectToBounds(.97,0,null)):"Left"===e.textAlign?(n[1].horizontalAlignment="Left",n[1].setOffsetWithRespectToBounds(0,0,null)):"Center"===e.textAlign&&(n[1].horizontalAlignment="Center",n[1].setOffsetWithRespectToBounds(.46,0,null)));for(var x=0;x<n.length;x++){if(n[x].textNodes&&n[x].textNodes.length>0){n[x].isDirt=!0;var C=n[x].textNodes.length*n[x].textNodes[0].dy,I=e.bounds.height-C;if(I>0&&I<n[x].textNodes[0].dy&&(C+=n[x].textNodes[0].dy),C>e.bounds.height){for(var k="",T=0;T<n[x].textNodes.length;T++){var P=n[x].textNodes[0].dy*(T+1);P=P,k+=n[x].textNodes[T].text}I<0&&(n[x].content=k)}}n[x].width=e.bounds.width}}e.wrapper.measure(new sf.drawings.Size(e.wrapper.bounds.width,e.wrapper.bounds.height)),e.wrapper.arrange(e.wrapper.desiredSize)}(this.pdfViewer.renderDrawing(void 0,e.pageIndex),e&&"FreeText"===e.shapeAnnotationType)&&(e.wrapper&&e.wrapper.children&&e.wrapper.children.length&&(1===(n=e.wrapper.children)[1].childNodes.length&&"Justify"===e.textAlign?(n[1].horizontalAlignment="Left",n[1].setOffsetWithRespectToBounds(.5,0,null)):n[1].childNodes.length>1&&"Justify"===e.textAlign&&(n[1].horizontalAlignment="Center",n[1].setOffsetWithRespectToBounds(0,0,null))))},e.prototype.fontSizeCalculation=function(e,t,i){var n=document.getElementById(this.pdfViewer.dataId+"_annotationCanvas_"+e.pageIndex).getContext("2d"),o=0,a=0,s="";for(t.style.italic&&t.style.bold?s="bold italic ":t.style.bold?s="bold ":t.style.italic&&(s="italic ");i>o;)n.font=s+a+"px "+t.style.fontFamily,o=n.measureText(e.dynamicText).width,a+=.1;return a-=.1},e.prototype.setLineDistance=function(e,t,i,n){var o;o=n?B(e,t[1],t[0],n):B(e,t[0],t[1],n),i.data=o.data,i.offsetX=o.offsetX,i.offsetY=o.offsetY,i.rotateAngle=o.rotateAngle,i.width=o.width,i.height=o.height,i.pivot=o.pivot,i.canMeasurePath=!0,i.isDirt=!0},e.prototype.scaleSelectedItems=function(e,t,i){var n=this.pdfViewer.selectedItems;return this.scale(n,e,t,i)},e.prototype.scale=function(e,t,i,n){var o=!0;if(e instanceof f){if(e.annotations&&e.annotations.length)for(var a=0,s=e.annotations;a<s.length;a++){var r=s[a];o=this.scaleAnnotation(r,t,i,n,e)}else if(e.formFields&&e.formFields.length)for(var l=0,d=e.formFields;l<d.length;l++){r=d[l];o=this.scaleAnnotation(r,t,i,n,e)}}else o=this.scaleAnnotation(e.annotations[0],t,i,n,void 0);return o},e.prototype.scaleObject=function(e,t,i,n,o,a){if(t=t<0?1:t,1!==(e=e<0?1:e)||1!==t){var s=void 0,r=void 0;if(!g(n)){s=(h=n).wrapper.actualSize.width*e,r=h.wrapper.actualSize.height*t,e=s/h.wrapper.actualSize.width,t=r/h.wrapper.actualSize.height}var l=sf.drawings.identityMatrix();a||(a=n);var d=a.wrapper;if(sf.drawings.rotateMatrix(l,-d.rotateAngle,i.x,i.y),sf.drawings.scaleMatrix(l,e,t,i.x,i.y),sf.drawings.rotateMatrix(l,d.rotateAngle,i.x,i.y),!g(n)){var h=n,p=sf.drawings.transformPointByMatrix(l,{x:h.wrapper.offsetX,y:h.wrapper.offsetY});s>0&&(h.wrapper.width=s,h.wrapper.offsetX=p.x),r>0&&(h.wrapper.height=r,h.wrapper.offsetY=p.y),this.nodePropertyChange(n,{bounds:{width:h.wrapper.width,height:h.wrapper.height,x:h.wrapper.offsetX,y:h.wrapper.offsetY}}),n.wrapper.measureChildren=!1;var c=n.pageIndex?n.pageIndex:this.pdfViewer.selectedItems.annotations[0].pageIndex,u=document.getElementById(this.pdfViewer.dataId+"_annotationCanvas_"+c);this.pdfViewer.renderDrawing(u,c)}}},e.prototype.scaleAnnotation=function(e,t,i,n,o){var a=this.pdfViewer.nameTable[e.id],s=a.wrapper;o||(o=e);var r=o.wrapper,l=r.offsetX-r.actualSize.width*r.pivot.x,d=r.offsetY-r.actualSize.height*r.pivot.y,h=this.getShapePoint(l,d,r.actualSize.width,r.actualSize.height,r.rotateAngle,r.offsetX,r.offsetY,n);void 0!==s.actualSize.width&&void 0!==s.actualSize.height&&this.scaleObject(t,i,h,a,s,o);var p=this.checkBoundaryConstraints(void 0,void 0,e.pageIndex,e.wrapper.bounds);return p||this.scaleObject(1/t,1/i,h,a,s,o),p},e.prototype.checkBoundaryConstraints=function(e,t,i,n,o,a){var s=n?void 0:this.pdfViewer.selectedItems.wrapper.bounds,r=n,l=document.getElementById(this.pdfViewer.dataId+"_annotationCanvas_"+i),d=10;if(l){var h=l.clientWidth/this.pdfViewer.viewerBase.getZoomFactor(),p=l.clientHeight/this.pdfViewer.viewerBase.getZoomFactor(),c=(n?r.right:s.right)+(e||0),u=(n?r.left:s.left)+(e||0),f=(n?r.top:s.top)+(t||0),g=(n?r.bottom:s.bottom)+(t||0);if(o&&(d=50,this.pdfViewer.viewerBase.eventArgs&&this.pdfViewer.viewerBase.eventArgs.source&&this.RestrictStamp(this.pdfViewer.viewerBase.eventArgs.source)))return!1;if(c<=h-10&&u>=10&&g<=p-10&&f>=d)return!0;if(a&&(d=10,c<=h-10&&u>=10&&g<=p-10&&f>=d))return!0}return!1},e.prototype.RestrictStamp=function(e){return!(!e||void 0===e.pageIndex||!this.pdfViewer.viewerBase.activeElements||e.pageIndex===this.pdfViewer.viewerBase.activeElements.activePageID)},e.prototype.getShapeBounds=function(e){var t=new sf.drawings.Rect,i=sf.drawings.cornersPointsBeforeRotation(e),n=i.middleLeft,o=i.topCenter,a=i.bottomCenter,s=i.middleRight,r=i.topLeft,l=i.topRight,d=i.bottomLeft,h=i.bottomRight;if(e.corners={topLeft:r,topCenter:o,topRight:l,middleLeft:n,middleRight:s,bottomLeft:d,bottomCenter:a,bottomRight:h},0!==e.rotateAngle||0!==e.parentTransform){var p=sf.drawings.identityMatrix();sf.drawings.rotateMatrix(p,e.rotateAngle+e.parentTransform,e.offsetX,e.offsetY),e.corners.topLeft=r=sf.drawings.transformPointByMatrix(p,r),e.corners.topCenter=o=sf.drawings.transformPointByMatrix(p,o),e.corners.topRight=l=sf.drawings.transformPointByMatrix(p,l),e.corners.middleLeft=n=sf.drawings.transformPointByMatrix(p,n),e.corners.middleRight=s=sf.drawings.transformPointByMatrix(p,s),e.corners.bottomLeft=d=sf.drawings.transformPointByMatrix(p,d),e.corners.bottomCenter=a=sf.drawings.transformPointByMatrix(p,a),e.corners.bottomRight=h=sf.drawings.transformPointByMatrix(p,h)}return t=sf.drawings.Rect.toBounds([r,l,d,h]),e.corners.left=t.left,e.corners.right=t.right,e.corners.top=t.top,e.corners.bottom=t.bottom,e.corners.center=t.center,e.corners.width=t.width,e.corners.height=t.height,t},e.prototype.getShapePoint=function(e,t,i,n,o,a,s,r){var l={x:0,y:0},d=sf.drawings.identityMatrix();switch(sf.drawings.rotateMatrix(d,o,a,s),r.x){case 1:switch(r.y){case 1:l=sf.drawings.transformPointByMatrix(d,{x:e+i,y:t+n});break;case 0:l=sf.drawings.transformPointByMatrix(d,{x:e+i,y:t});break;case.5:l=sf.drawings.transformPointByMatrix(d,{x:e+i,y:t+n/2})}break;case 0:switch(r.y){case.5:l=sf.drawings.transformPointByMatrix(d,{x:e,y:t+n/2});break;case 1:l=sf.drawings.transformPointByMatrix(d,{x:e,y:t+n});break;case 0:l=sf.drawings.transformPointByMatrix(d,{x:e,y:t})}break;case.5:switch(r.y){case 0:l=sf.drawings.transformPointByMatrix(d,{x:e+i/2,y:t});break;case.5:l=sf.drawings.transformPointByMatrix(d,{x:e+i/2,y:t+n/2});break;case 1:l=sf.drawings.transformPointByMatrix(d,{x:e+i/2,y:t+n})}}return{x:l.x,y:l.y}},e.prototype.dragConnectorEnds=function(e,t,i,n,o,a,s){var r,l,d;if(r=t instanceof f?t.annotations[0]:t,i={x:i.x/this.pdfViewer.viewerBase.getZoomFactor(),y:i.y/this.pdfViewer.viewerBase.getZoomFactor()},this.checkBoundaryConstraints(void 0,void 0,r.pageIndex,r.wrapper.bounds)){if("Distance"===r.shapeAnnotationType){var h=function(e,t){var i;if("Distance"===e.shapeAnnotationType)for(var n=0,o=void 0,a=0;a<e.wrapper.children.length;a++){var s=sf.drawings.Point.findAngle(e.sourcePoint,e.targetPoint);if(e.wrapper.children[a].id.indexOf("leader")>-1){var r=e.wrapper.children[0].bounds.center;0===n?(o={x:e.sourcePoint.x,y:e.sourcePoint.y-e.leaderHeight},r=e.sourcePoint):(o={x:e.targetPoint.x,y:e.targetPoint.y-e.leaderHeight},r=e.targetPoint);var l=sf.drawings.identityMatrix();if(sf.drawings.rotateMatrix(l,s,r.x,r.y),i=sf.drawings.transformPointByMatrix(l,{x:o.x,y:o.y}),t==="Leader"+n)return{leader:"leader"+n,point:i};n++}}return{leader:"",point:i}}(r,e);if("Leader0"===e)this.pdfViewer.viewerBase.tool instanceof Le?(r.vertexPoints[0].x=i.x,r.vertexPoints[0].y=i.y):(l=i.x-h.point.x,d=i.y-h.point.y,r.vertexPoints[0].x+=l,r.vertexPoints[0].y+=d);else if("Leader1"===e){var p=r.vertexPoints.length-1;this.pdfViewer.viewerBase.tool instanceof Le?(r.vertexPoints[p].x=i.x,r.vertexPoints[p].y=i.y):(l=i.x-h.point.x,d=i.y-h.point.y,r.vertexPoints[p].x+=l,r.vertexPoints[p].y+=d)}else{var c=sf.drawings.Point.findAngle(r.sourcePoint,r.targetPoint),u=t.wrapper.children[0].bounds.center,g=sf.drawings.identityMatrix();sf.drawings.rotateMatrix(g,-c,u.x,u.y);var m=sf.drawings.transformPointByMatrix(g,{x:i.x,y:i.y});if("ConnectorSegmentPoint"===e.split("_")[0]){g=sf.drawings.identityMatrix();sf.drawings.rotateMatrix(g,-c,u.x,u.y);var w=sf.drawings.transformPointByMatrix(g,r.vertexPoints[0]),y=sf.drawings.transformPointByMatrix(g,r.vertexPoints[r.vertexPoints.length-1]);if(d=m.y-w.y,0===r.leaderHeight&&null!=r.leaderHeight)r.leaderHeight=this.pdfViewer.distanceSettings.leaderLength;else{r.leaderHeight+=d,w.y+=d,y.y+=d;g=sf.drawings.identityMatrix();sf.drawings.rotateMatrix(g,c,u.x,u.y),r.vertexPoints[0]=sf.drawings.transformPointByMatrix(g,w),r.vertexPoints[r.vertexPoints.length-1]=sf.drawings.transformPointByMatrix(g,y)}}}}else if("ConnectorSegmentPoint"===e.split("_")[0]){var S=Number(e.split("_")[1]);l=i.x-r.vertexPoints[S].x,d=i.y-r.vertexPoints[S].y,r.vertexPoints[S].x+=l,r.vertexPoints[S].y+=d,r.vertexPoints.length>2&&"Perimeter"!==t.measureType&&(0===parseFloat(e.split("_")[1])?(r.vertexPoints[r.vertexPoints.length-1].x+=l,r.vertexPoints[r.vertexPoints.length-1].y+=d):parseFloat(e.split("_")[1])===r.vertexPoints.length-1&&(r.vertexPoints[0].x+=l,r.vertexPoints[0].y+=d))}this.nodePropertyChange(r,{vertexPoints:r.vertexPoints}),this.renderSelector(r.pageIndex,s)}return this.pdfViewer.renderDrawing(),!0},e.prototype.dragSourceEnd=function(e,t,i,n){var o=this.pdfViewer.nameTable[e.id];return o.vertexPoints[n].x+=t,o.vertexPoints[n].y+=i,this.pdfViewer.renderDrawing(),!0},e.prototype.updateConnector=function(e,t){e.vertexPoints=t,V(e,t,e.wrapper.children[0]);e.sourcePoint;var i=e.vertexPoints,n=e.wrapper.children[0];n.canMeasurePath=!0;for(var o=0;o<e.wrapper.children.length;o++)n=e.wrapper.children[o],"Polygon"!==e.shapeAnnotationType&&(n.id.indexOf("srcDec")>-1&&A(e,n,t[0],i[1],!0),e.targetPoint,n.id.indexOf("tarDec")>-1&&A(e,n,t[t.length-1],i[i.length-2],!1))},e.prototype.copy=function(){return this.pdfViewer.clipboardData.pasteIndex=1,this.pdfViewer.clipboardData.clipObject=this.copyObjects(),this.pdfViewer.clipboardData.clipObject},e.prototype.copyObjects=function(){var e=[],t=[];if(this.pdfViewer.clipboardData.childTable={},this.pdfViewer.selectedItems.annotations.length>0){e=this.pdfViewer.selectedItems.annotations;for(var i=0;i<e.length;i++){var n=S(e[i]);t.push(n)}}if(this.pdfViewer.selectedItems.formFields.length>0){e=this.pdfViewer.selectedItems.formFields;for(i=0;i<e.length;i++){n=S(e[i]);t.push(n)}}if(0===this.pdfViewer.clipboardData.pasteIndex)for(var o=0,a=e;o<a.length;o++){var s=a[o];this.pdfViewer.nameTable[s.id]&&(s.formFieldAnnotationType?this.pdfViewer.clearSelection(s.pageIndex):s.annotName?this.pdfViewer.annotationModule.deleteAnnotationById(s.annotName):this.pdfViewer.annotationModule.deleteAnnotation())}return this.sortByZIndex(t,"zIndex"),t},e.prototype.getNewObject=function(e){var t,i=[];this.pdfViewer.clipboardData.pasteIndex=1;for(var n=0;n<e.length;n++)t=S(e[n]),i.push(t);return i},e.prototype.paste=function(e,t){var i=this.pdfViewer.viewerBase.getZoomFactor(),n=this.pdfViewer.allowServerDataBinding;if(this.pdfViewer.enableServerDataBinding(!1),e||this.pdfViewer.clipboardData.clipObject){var o=e?this.getNewObject(e):this.pdfViewer.clipboardData.clipObject;if(o){var a={};0!==this.pdfViewer.clipboardData.pasteIndex&&this.pdfViewer.clearSelection(t);for(var s=0,r=o;s<r.length;s++){a[(d=r[s]).id]=d}for(var l=0;l<o.length;l++){var d=o[l],h=this.pdfViewer.viewerBase.getElement("_pageDiv_"+t),p=event;if(!p||p.clientX||p.clientY||(p={clientX:this.pdfViewer.viewerBase.mouseLeft,clientY:this.pdfViewer.viewerBase.mouseTop}),p=this.pdfViewer.viewerBase.mouseDownEvent,g(d))this.calculateCopyPosition(d,h,p);else if(h){var c=h.getBoundingClientRect();d.bounds.x=(p.clientX-c.left)/i,d.bounds.y=(p.clientY-c.top)/i}var u=S(d);u.pageIndex!=t&&(u.pageIndex=t),"Cut"!==this.pdfViewer.viewerBase.contextMenuModule.previousAction?(u.id+=sf.drawings.randomId(),this.pdfViewer.annotationModule&&"HandWrittenSignature"!==u.shapeAnnotationType&&(u.annotName=u.id,this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateAnnotationCollection(u,o[0],!1)),"SignatureText"!==u.shapeAnnotationType&&"HandWrittenSignature"!==u.shapeAnnotationType&&"SignatureImage"!==u.shapeAnnotationType||this.pdfViewer.viewerBase.signatureModule.storeSignatureData(u.pageIndex,u),u.formFieldAnnotationType||this.pdfViewer.annotation.addAction(u.pageIndex,null,u,"Addition","",u,u)):(this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateAnnotationCollection(u,o[0],!0),"SignatureText"!==u.shapeAnnotationType&&"HandWrittenSignature"!==u.shapeAnnotationType&&"SignatureImage"!==u.shapeAnnotationType||this.pdfViewer.viewerBase.signatureModule.storeSignatureData(u.pageIndex,u),u.formFieldAnnotationType||this.pdfViewer.annotation.addAction(u.pageIndex,null,u,"Addition","",u,u));var f=this.add(u);if(("FreeText"===u.shapeAnnotationType||u.enableShapeLabel)&&f&&this.nodePropertyChange(f,{}),f.formFieldAnnotationType&&f.pageIndex===t){this.pdfViewer.formFieldCollection.push(f);var m={id:f.id,name:f.name,value:f.value,type:f.formFieldAnnotationType,isReadOnly:f.isReadonly,fontFamily:f.fontFamily,fontSize:f.fontSize,fontStyle:f.fontStyle,color:f.color,backgroundColor:f.backgroundColor,alignment:f.alignment,visibility:f.visibility,maxLength:f.maxLength,isRequired:f.isRequired,isPrint:f.isPrint,isSelected:f.isSelected,isChecked:f.isChecked,tooltip:f.tooltip,bounds:f.bounds,thickness:f.thickness,borderColor:f.borderColor,signatureIndicatorSettings:f.signatureIndicatorSettings};this.pdfViewer.formFieldCollections.push(m)}this.pdfViewer.select([u.id],this.pdfViewer.annotationSelectorSettings),f.formFieldAnnotationType||this.pdfViewer.annotationModule.triggerAnnotationAddEvent(u)}}this.pdfViewer.renderDrawing(void 0,t),this.pdfViewer.clipboardData.pasteIndex++}this.pdfViewer.enableServerDataBinding(n,!0)},e.prototype.calculateCopyPosition=function(e,t,i){for(var n,o,a,s,r=this.pdfViewer.viewerBase.getZoomFactor(),l=0;l<e.vertexPoints.length;l++)if(t)if(0===l){var d=t.getBoundingClientRect();n=e.vertexPoints[l].x,o=e.vertexPoints[l].y,e.vertexPoints[l].x=(i.clientX-d.left)/r,e.vertexPoints[l].y=(i.clientY-d.top)/r,a=e.vertexPoints[l].x,s=e.vertexPoints[l].y}else e.vertexPoints[l].x+=a-n,e.vertexPoints[l].y+=s-o},e.prototype.cut=function(e){var t=this.pdfViewer.allowServerDataBinding;this.pdfViewer.enableServerDataBinding(!1),this.pdfViewer.annotationModule&&(this.pdfViewer.annotationModule.removedAnnotationCollection=[]),this.pdfViewer.clipboardData.pasteIndex=0,this.pdfViewer.clipboardData.clipObject=this.copyObjects(),this.pdfViewer.renderDrawing(void 0,e),this.pdfViewer.enableServerDataBinding(t,!0)},e.prototype.sortByZIndex=function(e,t){var i=t||"zIndex";return e=e.sort((function(e,t){return e[i]-t[i]}))},e}(),Q=function(){function e(e,t){var i=this;this.thumbnailWidthMin=200,this.contentContainerScrollWidth=33,this.closeButtonLeft=170,this.isTooltipCreated=!1,this.isThumbnail=!1,this.annotationContextMenu=[],this.isCommentPanelShow=!1,this.commentPanelWidthMin=300,this.isTostCreated=!1,this.isNavigationToolbarVisible=!1,this.isBookmarkListOpen=!1,this.isNavigationPaneResized=!1,this.isBookmarkOpen=!1,this.isThumbnailOpen=!1,this.restrictUpdateZoomValue=!0,this.loadImportAnnotation=function(e){var t=e.target.files;if(null!==e.target.files[0]){var n=t[0];if(n){i.pdfViewer.fireImportStart(n);var o=n.type;if(n.name.split(".json").length>1&&o.includes("json"))(a=new FileReader).readAsDataURL(n),a.onload=function(e){if(e.currentTarget.result){var t=e.currentTarget.result.split(",")[1],n=atob(t);if(n){n=i.pdfViewerBase.getSanitizedString(n);var o=JSON.parse(n),a=o.pdfAnnotation[Object.keys(o.pdfAnnotation)[0]];Object.keys(o.pdfAnnotation).length>=1&&(a.textMarkupAnnotation||a.measureShapeAnnotation||a.freeTextAnnotation||a.stampAnnotations||a.signatureInkAnnotation||a.shapeAnnotation&&a.shapeAnnotation[0].Bounds)?(i.pdfViewerBase.isPDFViewerJson=!0,i.pdfViewerBase.importAnnotations(o,U.Json)):(i.pdfViewerBase.isPDFViewerJson=!1,i.pdfViewerBase.importAnnotations(t,U.Json))}}};else if(n.name.split(".xfdf").length>1&&(o.includes("xfdf")||e.target.accept.includes("xfdf"))){var a;(a=new FileReader).readAsDataURL(n),a.onload=function(e){if(e.currentTarget.result){var t=e.currentTarget.result.split(",")[1];atob(t)&&i.pdfViewerBase.importAnnotations(t,U.Xfdf,!0)}}}else{i.pdfViewer.fireImportFailed(n,i.pdfViewer.localeObj.getConstant("Import Failed")),i.pdfViewer._dotnetInstance.invokeMethodAsync("GetLocaleText","PdfViewer_ImportFailed").then((function(e){i.pdfViewerBase.openImportExportNotificationPopup(e)}))}}}},this.resizeIconMouseOver=function(e){e.srcElement.style.cursor="e-resize"},this.resizePanelMouseDown=function(e){var t=null;(t=i).offset=[t.sideBarResizer.offsetLeft-e.clientX,t.sideBarResizer.offsetTop-e.clientY,t.sideBarResizer.offsetParent.clientWidth],i.previousX=e.clientX,t.isDown=!0,t.isNavigationPaneResized=!0,t.pdfViewerBase.viewerContainer.style.cursor="e-resize",t.sideBarContentContainer&&(t.sideBarContentContainer.style.cursor="e-resize")},this.resizeViewerMouseLeave=function(e){var t=null;(t=i).isDown=!1,t.isNavigationPaneResized&&t.sideBarContentContainer&&(t.pdfViewerBase.viewerContainer.style.cursor="default",t.sideBarContentContainer.style.cursor="default",t.isNavigationPaneResized=!1),t.commentPanelContainer&&t.isCommentPanelShow&&(i.commentPanelMouseLeave(e),t.isCommentPanelShow=!1)},this.resizePanelMouseMove=function(e){var t=null;if(t=i,!i.pdfViewerBase.getPopupNoteVisibleStatus()){var n=e.target;if(i.pdfViewerBase.skipPreventDefault(n)&&e.preventDefault(),t.isDown&&i.sideBarContentContainer){var o,a;if(i.pdfViewer.enableRtl)(o=i.previousX-e.clientX+t.offset[2])>(a=Math.floor(i.outerContainerWidth/2))&&(o=a),o<i.thumbnailWidthMin&&(o=i.thumbnailWidthMin),t.sideBarResizer.style.right=o+"px",t.sideBarContentContainer.style.width=o+"px",t.sideBarContent.style.width=o+"px",t.sideBarContentSplitter.style.width=o+"px",t.sideBarTitleContainer.style.width=o+"px",t.pdfViewerBase.viewerContainer.style.right=t.getViewerContainerLeft()+"px",t.pdfViewerBase.viewerContainer.style.left=t.getViewerContainerRight()+"px";else(o=e.clientX+t.offset[0])>(a=Math.floor(i.outerContainerWidth/2))&&(o=a),o<i.thumbnailWidthMin&&(o=i.thumbnailWidthMin),t.sideBarResizer.style.left=o+"px",t.closeDiv.style.left=o-t.contentContainerScrollWidth+"px",t.sideBarContentContainer.style.width=o+"px",t.sideBarContent.style.width=o+"px",t.sideBarContentSplitter.style.width=o+"px",t.sideBarTitleContainer.style.width=o+"px",t.pdfViewerBase.viewerContainer.style.left=t.getViewerContainerLeft()+"px",t.pdfViewerBase.viewerContainer.style.right=t.getViewerContainerRight()+"px";var s=t.pdfViewer.element.clientWidth-t.getViewerContainerLeft()-t.getViewerContainerRight();t.pdfViewerBase.viewerContainer.style.width=s+"px",t.pdfViewerBase.pageContainer.style.width=t.pdfViewerBase.viewerContainer.clientWidth+"px",t.pdfViewer.thumbnailViewModule.gotoThumbnailImage(t.pdfViewerBase.currentPageNumber-1),t.pdfViewerBase.updateZoomValue(),t.bookmarkButton.children[0].classList.contains("e-pv-bookmark-disable-icon")||t.pdfViewer.bookmarkViewModule.setBookmarkContentHeight()}else t.isCommentPanelShow&&i.commentPanelContainer&&i.updateCommentPanelContainer(e)}},this.sideToolbarOnClose=function(e){var t=null;(t=i).removeThumbnailSelectionIconTheme(),t.removeBookmarkSelectionIconTheme(),t.updateViewerContainerOnClose()},this.sideToolbarOnClick=function(e){i.pdfViewer&&i.pdfViewer.cultureValue&&i.pdfViewer.cultureValue.ThumbnailContent?i.sideBarTitle.textContent=i.pdfViewer.cultureValue.ThumbnailContent:i.sideBarTitle.textContent=i.pdfViewer.localeObj.getConstant("Page Thumbnails"),i.sideBarContent.setAttribute("aria-label","Thumbnail View Panel");var t=null;t=i;var n=i.pdfViewer.element.querySelector(".e-pv-bookmark-view");if(n&&(t.removeBookmarkSelectionIconTheme(),n.style.display="none"),document.getElementById(i.pdfViewer.dataId+"_thumbnail_view").style.display="flex",t.sideBarContentContainer&&("none"!==t.sideBarContentContainer.style.display?t.isBookmarkOpen?(t.isThumbnailOpen=!0,t.setThumbnailSelectionIconTheme(),i.updateViewerContainerOnExpand()):(t.isThumbnailOpen=!1,t.removeThumbnailSelectionIconTheme(),i.updateViewerContainerOnClose()):(i.sideBarContent.focus(),t.isThumbnailOpen=!0,t.setThumbnailSelectionIconTheme(),i.updateViewerContainerOnExpand())),t.isBookmarkOpen=!1,i.pdfViewer.annotationModule&&i.pdfViewer.annotationModule.inkAnnotationModule){var o=parseInt(i.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber);i.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(o)}},this.openThumbnailPane=function(){var e=null;e=i;var t=document.getElementById(i.pdfViewer.dataId+"_sideBarContent"),n=document.getElementById(i.pdfViewer.dataId+"_sideBarContentContainer"),o=document.getElementById(i.pdfViewer.dataId+"_viewerContainer"),a=document.getElementById(i.pdfViewer.dataId+"_pageViewContainer");if(document.getElementById(i.pdfViewer.dataId+"_thumbnail_view").style.display="block",document.getElementById(i.pdfViewer.dataId+"_sideBarResizer").style.display="none",document.getElementById(i.pdfViewer.dataId+"_sideBarTitleContainer").style.display="none",document.getElementById(i.pdfViewer.dataId+"_sideBarContentSplitter").style.display="none",t.classList.add("e-thumbnail"),n.classList.add("e-thumbnail"),n&&(e.isThumbnail?(n.style.display="none",o.style.width=e.pdfViewer.element.clientWidth+"px",a.style.width=o.clientWidth+"px",o.style.left=n.clientWidth+"px",e.pdfViewerBase.updateZoomValue(),e.isThumbnail=!1):(t.focus(),n.style.display="block",o.style.width=e.pdfViewer.element.clientWidth-n.clientWidth+"px",a.style.width=o.clientWidth+"px",o.style.left=n.clientWidth+"px",e.pdfViewerBase.updateZoomValue(),e.pdfViewer.thumbnailViewModule.gotoThumbnailImage(e.pdfViewerBase.currentPageNumber-1),e.isThumbnail=!0)),i.pdfViewer.annotationModule&&i.pdfViewer.annotationModule.inkAnnotationModule){var s=parseInt(i.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber);i.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(s)}},this.bookmarkButtonOnClick=function(e){i.openBookmarkcontentInitially()},this.commentPanelMouseDown=function(e){var t=null;(t=i).offset=[t.commentPanelResizer.offsetLeft-e.clientX,t.commentPanelResizer.offsetTop-e.clientY,t.getViewerContainerRight()],i.isCommentPanelShow=!0,i.previousX=e.clientX,t.pdfViewerBase.viewerContainer.style.cursor="e-resize",t.commentPanelResizer.style.cursor="e-resize"},this.updateCommentPanelContainer=function(e){var t,n,o=null;(o=i,i.pdfViewer.enableRtl)?((t=e.clientX+o.offset[0])>(n=Math.floor(i.outerContainerWidth/2))&&(t=n),t<i.commentPanelWidthMin&&(t=i.commentPanelWidthMin),o.commentPanelResizer.style.left=t+"px",o.commentPanelContainer.style.width=t+"px",o.pdfViewerBase.viewerContainer.style.left=o.getViewerContainerRight()+"px",o.pdfViewerBase.viewerContainer.style.right=o.getViewerContainerLeft()+"px"):((t=i.previousX-e.clientX+o.offset[2])>(n=Math.floor(i.outerContainerWidth/2))&&(t=n),t<i.commentPanelWidthMin&&(t=i.commentPanelWidthMin),o.commentPanelResizer.style.right=t+"px",o.commentPanelContainer.style.width=t+"px",o.pdfViewerBase.viewerContainer.style.right=o.getViewerContainerRight()+"px",o.pdfViewerBase.viewerContainer.style.left=o.getViewerContainerLeft()+"px");i.pdfViewer.annotation.stickyNotesAnnotationModule.updateCommentPanelTextTop();var a=o.pdfViewer.element.clientWidth-o.getViewerContainerLeft()-o.getViewerContainerRight();o.pdfViewerBase.viewerContainer.style.width=a+"px",o.pdfViewerBase.pageContainer.style.width=o.pdfViewerBase.viewerContainer.clientWidth+"px",o.pdfViewerBase.updateZoomValue()},this.commentPanelMouseLeave=function(e){var t=null;(t=i).commentPanelContainer&&(t.pdfViewerBase.viewerContainer.style.cursor="default",t.commentPanelContainer.style.cursor="default")},this.pdfViewer=e,this.pdfViewerBase=t}return e.prototype.initializeNavigationPane=function(){!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode?this.createNavigationPane():(this.commentPanelContainer=sf.base.createElement("div",{id:this.pdfViewer.dataId+"_commantPanel",className:"e-pv-mobile-comments-container"}),this.pdfViewerBase.mainContainer.appendChild(this.commentPanelContainer),this.pdfViewer.enableRtl?this.commentPanelContainer.style.left="0px":this.commentPanelContainer.style.right="0px",this.commentPanelContainer.style.bottom="0px",this.commentPanelContainer.style.display="none",this.commentsContentContainer=sf.base.createElement("div",{id:this.pdfViewer.dataId+"_commentscontentcontainer",className:"e-pv-comments-content-container"}),this.commentPanelContainer.appendChild(this.commentsContentContainer),this.createFileElement(this.commentPanelContainer),this.createXFdfFileElement(this.commentPanelContainer))},e.prototype.createNavigationPane=function(){this.sideBarToolbar=this.pdfViewer.element.querySelector(".e-pv-sidebar-toolbar"),this.sideBarToolbarSplitter=this.pdfViewer.element.querySelector(".e-pv-sidebar-toolbar-splitter"),this.sideBarContentContainer=this.pdfViewer.element.querySelector(".e-pv-sidebar-content-container"),this.sideBarContentSplitter=this.pdfViewer.element.querySelector(".e-pv-sidebar-content-splitter"),this.sideBarContent=this.pdfViewer.element.querySelector(".e-pv-sidebar-content"),this.sideBarTitleContainer=this.pdfViewer.element.querySelector(".e-pv-sidebar-title-container"),this.sideBarTitle=this.pdfViewer.element.querySelector(".e-pv-sidebar-title"),this.sideBarResizer=this.pdfViewer.element.querySelector(".e-pv-sidebar-resizer"),this.pdfViewerBase.mainContainer.appendChild(this.sideBarToolbar),this.pdfViewer.enableRtl&&(this.sideBarToolbar.style.cssFloat="right",this.sideBarToolbar.style.right="1px",this.sideBarToolbar.style.position="relative"),this.pdfViewerBase.mainContainer.appendChild(this.sideBarToolbarSplitter),this.pdfViewer.enableRtl?this.sideBarToolbarSplitter.classList.add("e-right"):this.sideBarToolbarSplitter.classList.add("e-left"),this.pdfViewer.enableRtl?this.sideBarContentContainer.classList.add("e-right"):this.sideBarContentContainer.classList.add("e-left"),this.pdfViewerBase.mainContainer.appendChild(this.sideBarContentContainer),this.pdfViewer.enableRtl&&(this.sideBarContentSplitter.style.right="0px"),this.sideBarContentContainer.appendChild(this.sideBarContentSplitter),this.pdfViewer.enableRtl&&(this.sideBarContent.style.right="0px",this.sideBarContent.style.direction="rtl"),this.sideBarContentContainer.appendChild(this.sideBarContent),this.pdfViewer.enableRtl&&(this.sideBarTitleContainer.style.right="0px"),this.pdfViewer.enableRtl?this.sideBarTitle.classList.add("e-right"):this.sideBarTitle.classList.add("e-left"),this.sideBarTitleContainer.appendChild(this.sideBarTitle),this.sideBarContentContainer.appendChild(this.sideBarTitleContainer),this.sideBarResizer.addEventListener("mousedown",this.resizePanelMouseDown),this.pdfViewerBase.mainContainer.addEventListener("mousemove",this.resizePanelMouseMove),this.pdfViewerBase.mainContainer.addEventListener("mouseup",this.resizeViewerMouseLeave),this.pdfViewer.enableRtl?this.sideBarResizer.classList.add("e-right"):this.sideBarResizer.classList.add("e-left"),this.sideBarContentContainer.appendChild(this.sideBarResizer),this.createCommentPanel();var e=this.getViewerContainerLeft(),t=this.getViewerContainerRight();!this.pdfViewer.enableRtl&&this.pdfViewer.enableNavigationToolbar&&(this.pdfViewerBase.viewerContainer.style.left=e+"px",this.pdfViewerBase.viewerContainer.style.right=t+"px"),this.pdfViewerBase.viewerContainer.style.width=this.pdfViewer.element.clientWidth-e-this.commentPanelContainer.clientWidth+"px",this.sideBarContentContainer.style.display="none",this.createSidebarToolBar(),this.createSidebarTitleCloseButton(),this.createResizeIcon(),this.sideBarToolbar.addEventListener("mouseup",this.sideToolbarOnMouseup.bind(this)),this.sideBarContentContainer.addEventListener("mouseup",this.sideBarTitleOnMouseup.bind(this))},e.prototype.adjustPane=function(){var e=this.pdfViewer.element.querySelector(".e-pv-sidebar-toolbar-splitter"),t=this.pdfViewer.element.querySelector(".e-pv-sidebar-toolbar"),i=this.pdfViewer.element.querySelector(".e-pv-sidebar-content-container"),n=this.pdfViewer.element.querySelector(".e-pv-toolbar"),o=n.getBoundingClientRect().height;0===o&&(o=parseFloat(window.getComputedStyle(n).height)+1),this.pdfViewer.enableToolbar||(o=0),t.style.top=o+"px",i.style.top=o+"px",e.style.top=o+"px",t.style.height=this.getSideToolbarHeight(o),i.style.height=this.getSideToolbarHeight(o),e.style.height=this.getSideToolbarHeight(o),this.pdfViewerBase.viewerContainer.style.height=this.getSideToolbarHeight(o)},e.prototype.getSideToolbarHeight=function(e){var t=this.pdfViewer.element.getBoundingClientRect().height;return 0!==t?t-e+"px":""},e.prototype.createCommentPanel=function(){this.commentPanelContainer=document.getElementById(this.pdfViewer.dataId+"_commantPanel"),this.commentsContentContainer=document.getElementById(this.pdfViewer.dataId+"_commentscontentcontainer"),this.createFileElement(this.commentPanelContainer),this.createXFdfFileElement(this.commentPanelContainer)},e.prototype.createCommentPanelTitleContainer=function(){var e=sf.base.createElement("div",{id:this.pdfViewer.dataId+"_commentPanelTitleContainer",className:"e-pv-comment-panel-title-container"}),t=sf.base.createElement("div",{id:this.pdfViewer.dataId+"_commentPanelTitle",className:"e-pv-comment-panel-title",attrs:{tabindex:"-1"}});this.pdfViewer._dotnetInstance.invokeMethodAsync("GetLocaleText","PdfViewer_Comments").then((function(e){t.innerText=e}));var i=sf.base.createElement("button",{id:this.pdfViewer.dataId+"_annotations_btn"});i.setAttribute("aria-label","annotation button"),i.setAttribute("type","button"),i.className="e-btn e-pv-tbar-btn e-pv-comment-panel-title-close-div e-btn";var n=sf.base.createElement("span",{id:this.pdfViewer.dataId+"_annotation_more_icon",className:"e-pv-more-icon e-pv-icon"});i.appendChild(n),e.appendChild(t),e.appendChild(i),this.commentPanelContainer.appendChild(e),this.createAnnotationContextMenu(),i.addEventListener("click",this.openAnnotationContextMenu.bind(this))},e.prototype.createCommentPanelResizeIcon=function(){this.commentPanelResizeIcon=sf.base.createElement("div",{id:this.pdfViewer.dataId+"_resize",className:"e-pv-resize-icon e-pv-icon"}),this.setCommentPanelResizeIconTop(),this.commentPanelResizeIcon.style.position="absolute",this.commentPanelResizer.appendChild(this.commentPanelResizeIcon)},e.prototype.openAnnotationContextMenu=function(e){this.annotationMenuObj.open(e.clientY,e.clientX,e.currentTarget)},e.prototype.createAnnotationContextMenu=function(){this.annotationContextMenu=[{text:this.pdfViewer.localeObj.getConstant("Export Annotations")},{text:this.pdfViewer.localeObj.getConstant("Import Annotations")},{text:this.pdfViewer.localeObj.getConstant("Export XFDF")},{text:this.pdfViewer.localeObj.getConstant("Import XFDF")}];var e=sf.base.createElement("ul",{id:this.pdfViewer.dataId+"_annotation_context_menu"});this.pdfViewer.element.appendChild(e),this.annotationMenuObj=new sf.navigations.ContextMenu({target:"#"+this.pdfViewer.dataId+"_annotations_btn",items:this.annotationContextMenu,select:this.annotationMenuItemSelect.bind(this)}),this.pdfViewer.enableRtl&&(this.annotationMenuObj.enableRtl=!0),this.annotationMenuObj.appendTo(e),sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode?this.annotationMenuObj.animationSettings.effect="ZoomIn":this.annotationMenuObj.animationSettings.effect="SlideDown"},e.prototype.annotationMenuItemSelect=function(e){if(this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.inkAnnotationModule){var t=parseInt(this.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber);this.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(t)}if(e.item)switch(e.item.text){case this.pdfViewer.localeObj.getConstant("Export Annotations"):this.pdfViewerBase.exportAnnotations(U.Json);break;case this.pdfViewer.localeObj.getConstant("Import Annotations"):this.importAnnotationIconClick(e);break;case this.pdfViewer.localeObj.getConstant("Export XFDF"):this.pdfViewerBase.exportAnnotations(U.Xfdf);break;case this.pdfViewer.localeObj.getConstant("Import XFDF"):this.importXFdfAnnotationIconClick(e)}},e.prototype.createFileElement=function(e){this.annotationInputElement=sf.base.createElement("input",{id:this.pdfViewer.dataId+"_annotationUploadElement",styles:"position:fixed; left:-100em",attrs:{type:"file","aria-label":"upload elements"}}),this.annotationInputElement.setAttribute("accept",".json"),e.appendChild(this.annotationInputElement),this.annotationInputElement.addEventListener("change",this.loadImportAnnotation)},e.prototype.createXFdfFileElement=function(e){this.annotationXFdfInputElement=sf.base.createElement("input",{id:this.pdfViewer.dataId+"_annotationXFdfUploadElement",styles:"position:fixed; left:-100em",attrs:{type:"file","aria-label":"upload elements"}}),this.annotationXFdfInputElement.setAttribute("accept",".xfdf"),e.appendChild(this.annotationXFdfInputElement),this.annotationXFdfInputElement.addEventListener("change",this.loadImportAnnotation)},e.prototype.importAnnotationIconClick=function(e){this.annotationInputElement.click()},e.prototype.importXFdfAnnotationIconClick=function(e){this.annotationXFdfInputElement.click()},e.prototype.handleImportClick=function(){if(/^((?!chrome|android).)*safari/i.test(navigator.userAgent)){var e=document.getElementById(this.pdfViewer.dataId+"_annotationUploadElement"),t=document.getElementById(this.pdfViewer.dataId+"_annotationXFdfUploadElement"),i=document.getElementById("IMPORT_ANNOTATION_JSON"),n=document.getElementById("IMPORT_ANNOTATION_XFDF");i.addEventListener("click",(function(){e.click()})),n.addEventListener("click",(function(){t.click()}))}},e.prototype.closeCommentPanelContainer=function(){var e=document.getElementById(this.pdfViewer.dataId+"_viewerContainer"),t=document.getElementById(this.pdfViewer.dataId+"_pageViewContainer"),i=document.getElementById(this.pdfViewer.dataId+"_commantPanel");i&&(i.style.display="none",this.commentPanelResizer&&(this.commentPanelResizer.style.display="none"),e&&(this.pdfViewer.enableRtl?e.style.left=this.getViewerContainerRight()+"px":e.style.right=this.getViewerContainerRight()+"px",e.style.width=this.pdfViewer.element.clientWidth-this.getViewerContainerLeft()-this.getViewerContainerRight()+"px",t.style.width=this.pdfViewerBase.viewerContainer.offsetWidth-this.getViewerContainerScrollbarWidth()+"px"),this.pdfViewerBase&&this.pdfViewerBase.updateZoomValue(),this.pdfViewer.annotation&&this.pdfViewer.annotation.textMarkupAnnotationModule&&this.pdfViewer.annotation.textMarkupAnnotationModule.showHideDropletDiv(!0))},e.prototype.createNavigationPaneMobile=function(e){var t,i=this;if(this.isNavigationToolbarVisible=!0,this.toolbarElement=sf.base.createElement("div",{id:this.pdfViewer.dataId+"_navigationToolbar",className:"e-pv-nav-toolbar"}),this.pdfViewerBase.viewerMainContainer.insertBefore(this.toolbarElement,this.pdfViewerBase.viewerContainer),"search"===e){var n='<div class="e-input-group e-pv-search-input-mobile" id="'+this.pdfViewer.dataId+'_search_input_container"><input class="e-input" type="text" placeholder="'+this.pdfViewer.localeObj.getConstant("Find in document")+'" id="'+this.pdfViewer.dataId+'_search_input"></input></div>';t=[{prefixIcon:"e-pv-backward-icon e-pv-icon",tooltipText:this.pdfViewer.localeObj.getConstant("Go Back"),id:this.pdfViewer.dataId+"_backward",click:this.goBackToToolbar.bind(this)},{template:n},{prefixIcon:"e-pv-search-icon e-pv-icon",id:this.pdfViewer.dataId+"_search_box-icon",click:function(){var e=i.pdfViewerBase.getElement("_search_box-icon").firstElementChild;i.pdfViewer.textSearchModule.searchButtonClick(e,i.searchInput)}},{prefixIcon:"e-pv-prev-search-icon e-pv-icon",id:this.pdfViewer.dataId+"_prev_occurrence",click:function(e){i.pdfViewer.textSearchModule.searchPrevious()}},{prefixIcon:"e-pv-next-search-icon e-pv-icon",id:this.pdfViewer.dataId+"_next_occurrence",click:function(e){i.pdfViewer.textSearchModule.searchNext()}}]}else t=[{prefixIcon:"e-pv-backward-icon e-pv-icon",id:this.pdfViewer.dataId+"_backward",click:this.goBackToToolbar.bind(this)},{text:this.pdfViewer.localeObj.getConstant("Bookmarks")}];this.toolbar=new sf.navigations.Toolbar({items:t,width:"",height:"",overflowMode:"Popup"}),this.pdfViewer.enableRtl&&(this.toolbar.enableRtl=!0),this.toolbar.isStringTemplate=!0,this.toolbar.appendTo(this.toolbarElement),"search"===e?this.initiateSearchBox():this.initiateBookmarks()},e.prototype.initiateSearchBox=function(){var e=this;this.searchInput=this.pdfViewerBase.getElement("_search_input"),this.pdfViewer.textSearchModule.searchBtn=this.pdfViewerBase.getElement("_search_box-icon").firstElementChild,this.searchInput.addEventListener("keyup",(function(t){e.searchInput.value;13===t.which?e.initiateTextSearch():e.pdfViewer.textSearchModule.resetVariables()})),this.pdfViewer.textSearchModule.searchInput=this.searchInput,this.setSearchInputWidth(),this.searchInput.focus()},e.prototype.initiateBookmarks=function(){if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){this.pdfViewerBase.mobileScrollerContainer.style.display="none";for(var e=document.querySelectorAll(".e-pv-mobile-annotation-toolbar"),t=0;t<e.length;t++)e[t].style.display="none"}var i=this.pdfViewerBase.getElement("_bookmarks_container");i&&(i.style.width="100%",i.style.height="100%",this.pdfViewer.element&&this.pdfViewer.element.clientHeight>0&&(i.style.height=this.pdfViewer.element.clientHeight+"px"))},e.prototype.initiateTextSearch=function(){var e=this.searchInput.value;this.pdfViewer.textSearchModule.initiateSearch(e)},e.prototype.goBackToToolbar=function(){if(this.isNavigationToolbarVisible=!1,sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode||this.pdfViewer.textSearchModule.cancelTextSearch(),this.searchInput=null,0!==this.pdfViewer.bookmarkViewModule.childNavigateCount)this.pdfViewer.bookmarkViewModule.bookmarkList.back(),this.pdfViewer.bookmarkViewModule.childNavigateCount--;else{null!=this.toolbar&&(this.toolbar.destroy(),this.toolbar=null);var e=this.pdfViewerBase.getElement("_bookmarks_container");e&&(e.parentElement.removeChild(e),sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&(this.pdfViewerBase.mobileScrollerContainer.style.display="")),this.toolbarElement&&null!=this.toolbarElement.parentElement&&this.toolbarElement.parentElement.removeChild(this.toolbarElement),this.pdfViewerBase.viewerContainer.style.display="block",this.isBookmarkListOpen=!1,this.pdfViewerBase.onWindowResize()}},e.prototype.setSearchInputWidth=function(){var e=this.searchInput.parentElement,t=window.getComputedStyle(e.parentElement,null).getPropertyValue("padding-left");sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&(this.toolbarElement=this.pdfViewerBase.getElement("_navigationToolbar"));var i=this.toolbarElement.clientWidth-this.getParentElementSearchBox("_backward").clientWidth-this.getParentElementSearchBox("_search_box-icon").clientWidth-this.getParentElementSearchBox("_prev_occurrence").clientWidth-this.getParentElementSearchBox("_next_occurrence").clientWidth-6;""!==t&&(i-=2*parseFloat(t)),e.style.width=i+"px"},e.prototype.getParentElementSearchBox=function(e){return this.pdfViewerBase.getElement(e).parentElement},e.prototype.createTooltipMobile=function(e,t){var i=this;this.isTostCreated=!0;var n=document.getElementById(this.pdfViewer.dataId+"_container_tooltip"),o=n.firstElementChild;if(o)o.style.width="auto",o.firstElementChild.firstElementChild.textContent=e;else{var a=0;n&&(a=n.clientWidth);var s=(this.pdfViewer.element.clientWidth-a)/2,r=this.pdfViewer.element.clientHeight/2;this.pdfViewer._dotnetInstance.invokeMethodAsync("UpdateToastXYPosition",e,s,r),setTimeout((function(){n=document.getElementById(i.pdfViewer.dataId+"_container_tooltip"),(o=n.firstElementChild)&&!t?(o.style.width="auto",o.firstElementChild.firstElementChild.textContent=e):i.pdfViewer._dotnetInstance.invokeMethodAsync("ShowToastTooltip",t||!1)}),300)}},e.prototype.closeToastComponent=function(){this.isTostCreated=!1},e.prototype.createMobileTooltip=function(e){var t=sf.base.createElement("div",{className:"e-pv-container-tooltip",id:this.pdfViewer.dataId+"_container_tooltip"});this.pdfViewer.element.appendChild(t),this.toastObject=new sf.notifications.Toast({title:e,target:this.pdfViewer.element,close:this.onTooltipClose.bind(this),position:{X:0,Y:0},animation:{hide:{duration:200,effect:"FadeOut"}}}),this.toastObject.appendTo(t);var i=.65*this.pdfViewer.element.clientHeight,n=(this.pdfViewer.element.clientWidth-t.clientWidth)/2;this.isTooltipCreated=!0,this.toastObject.show({position:{X:n,Y:i}});var o=t.firstElementChild;o&&(o.style.width="auto")},e.prototype.onTooltipClose=function(e){if(this.pdfViewer.textSearchModule){this.isTooltipCreated=!1;var t=this.pdfViewerBase.getElement("_container_tooltip");this.pdfViewer.textSearchModule.isMessagePopupOpened=!1,this.toastObject&&this.toastObject.destroy(),t.parentElement.removeChild(t),this.toastObject=null}},e.prototype.toolbarResize=function(){this.searchInput&&(this.searchInput.style.width="auto",this.setSearchInputWidth())},e.prototype.createSidebarToolBar=function(){this.thumbnailButton=this.pdfViewer.element.querySelector(".e-pv-thumbnail-view-button"),this.bookmarkButton=this.pdfViewer.element.querySelector(".e-pv-bookmark-button"),this.thumbnailButton.addEventListener("click",this.sideToolbarOnClick),this.bookmarkButton.addEventListener("click",this.bookmarkButtonOnClick)},e.prototype.onTooltipBeforeOpen=function(e){this.pdfViewer.toolbarSettings.showTooltip||(e.cancel=!0)},e.prototype.enableThumbnailButton=function(){this.thumbnailButton&&(this.thumbnailButton.removeAttribute("disabled"),this.thumbnailButton.children[0].classList.remove("e-pv-thumbnail-view-disable-icon"),this.thumbnailButton.children[0].classList.add("e-pv-thumbnail-view-icon"))},e.prototype.enableBookmarkIcon=function(){var e=this.pdfViewer.element.querySelector(".e-pv-bookmark-view");this.pdfViewerBase.navigationPane&&e.childNodes.length>0&&this.bookmarkButton&&(this.bookmarkButton.removeAttribute("disabled"),this.bookmarkButton.children[0].classList.remove("e-pv-bookmark-disable-icon"),this.bookmarkButton.children[0].classList.add("e-pv-bookmark-icon"))},e.prototype.createSidebarTitleCloseButton=function(){this.closeDiv=sf.base.createElement("button",{id:this.pdfViewer.dataId+"_close_btn"}),this.closeDiv.setAttribute("aria-label","close button"),this.closeDiv.setAttribute("type","button"),this.closeDiv.className="e-btn e-pv-tbar-btn e-pv-title-close-div e-btn",this.pdfViewer.enableRtl?this.closeDiv.style.left="8px":this.closeDiv.style.left=this.closeButtonLeft+"px";var e=sf.base.createElement("span",{id:this.pdfViewer.dataId+"_close_icon",className:"e-pv-title-close-icon e-pv-icon"});this.closeDiv.appendChild(e),this.sideBarTitleContainer.appendChild(this.closeDiv),this.closeDiv.addEventListener("click",this.sideToolbarOnClose)},e.prototype.createResizeIcon=function(){this.resizeIcon=sf.base.createElement("div",{id:this.pdfViewer.dataId+"_resize",className:"e-pv-resize-icon e-pv-icon"}),this.setResizeIconTop(),this.resizeIcon.style.position="absolute",this.resizeIcon.addEventListener("click",this.sideToolbarOnClose),this.resizeIcon.addEventListener("mouseover",this.resizeIconMouseOver),this.sideBarResizer.appendChild(this.resizeIcon)},e.prototype.setResizeIconTop=function(){this.sideBarToolbar&&this.sideBarToolbar.clientHeight&&""===this.resizeIcon.style.top&&(this.resizeIcon.style.top=this.sideBarToolbar.clientHeight/2+"px")},e.prototype.setCommentPanelResizeIconTop=function(){this.commentPanelContainer&&this.commentPanelContainer.clientHeight&&this.commentPanelResizeIcon&&""===this.commentPanelResizeIcon.style.top&&(this.commentPanelResizeIcon.style.top=this.commentPanelContainer.clientHeight/2+"px")},Object.defineProperty(e.prototype,"outerContainerWidth",{get:function(){return this.mainContainerWidth||(this.mainContainerWidth=this.pdfViewerBase.mainContainer.clientWidth),this.mainContainerWidth},enumerable:!0,configurable:!0}),e.prototype.getViewerContainerScrollbarWidth=function(){return this.pdfViewerBase.viewerContainer.offsetWidth+this.pdfViewerBase.viewerContainer.offsetLeft-(this.pdfViewerBase.viewerContainer.clientWidth+this.pdfViewerBase.viewerContainer.offsetLeft)},Object.defineProperty(e.prototype,"sideToolbarWidth",{get:function(){return this.sideBarToolbar?this.sideBarToolbar.clientWidth:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sideBarContentContainerWidth",{get:function(){return this.sideBarContentContainer?this.sideBarContentContainer.clientWidth:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"commentPanelContainerWidth",{get:function(){return this.commentPanelContainer?this.commentPanelContainer.offsetWidth:0},enumerable:!0,configurable:!0}),e.prototype.updateViewerContainerOnClose=function(){this.sideBarContentContainer&&(this.sideBarContentContainer.style.display="none",this.pdfViewer.enableRtl?this.pdfViewerBase.viewerContainer.style.right=this.sideToolbarWidth+"px":this.pdfViewerBase.viewerContainer.style.left=this.sideToolbarWidth+"px",this.pdfViewerBase.viewerContainer.style.width=this.pdfViewer.element.clientWidth-this.sideToolbarWidth-this.getViewerContainerRight()+"px",this.pdfViewerBase.pageContainer.style.width=this.pdfViewerBase.viewerContainer.offsetWidth-this.getViewerContainerScrollbarWidth()+"px",this.restrictUpdateZoomValue&&this.pdfViewerBase.updateZoomValue())},e.prototype.updateViewerContainerOnExpand=function(){this.sideBarContentContainer&&(this.sideBarContentContainer.style.display="block",this.pdfViewer.enableRtl?this.pdfViewerBase.viewerContainer.style.right=this.getViewerContainerLeft()+"px":this.pdfViewerBase.viewerContainer.style.left=this.getViewerContainerLeft()+"px",this.pdfViewerBase.viewerContainer.style.width=this.pdfViewer.element.clientWidth-this.getViewerContainerLeft()-this.getViewerContainerRight()+"px",this.pdfViewerBase.pageContainer.style.width=this.pdfViewerBase.viewerContainer.clientWidth+"px",this.pdfViewerBase.updateZoomValue(),this.pdfViewer.enableThumbnail&&this.pdfViewer.thumbnailViewModule.gotoThumbnailImage(this.pdfViewerBase.currentPageNumber-1))},e.prototype.getViewerContainerLeft=function(){return this.sideToolbarWidth?this.sideToolbarWidth+this.sideBarContentContainerWidth:0},e.prototype.getViewerContainerRight=function(){return this.commentPanelResizer=document.getElementById(this.pdfViewer.dataId+"_commentPanelResizer"),this.commentPanelResizer?this.commentPanelContainerWidth+this.commentPanelResizer.clientWidth:0},e.prototype.getViewerMainContainerWidth=function(){return this.pdfViewer.element.clientWidth-this.sideToolbarWidth},e.prototype.setThumbnailSelectionIconTheme=function(){this.thumbnailButton&&(this.thumbnailButton.children[0].classList.remove("e-pv-thumbnail-view-icon"),this.thumbnailButton.children[0].classList.add("e-pv-thumbnail-view-selection-icon"),this.thumbnailButton.classList.add("e-pv-thumbnail-view-button-selection"))},e.prototype.removeThumbnailSelectionIconTheme=function(){this.thumbnailButton&&this.thumbnailButton.children[0]&&(this.thumbnailButton.children[0].classList.add("e-pv-thumbnail-view-icon"),this.thumbnailButton.children[0].classList.remove("e-pv-thumbnail-view-selection-icon"),this.thumbnailButton.classList.remove("e-pv-thumbnail-view-button-selection"))},e.prototype.resetThumbnailIcon=function(){this.thumbnailButton&&this.thumbnailButton.children[0]&&(this.thumbnailButton.children[0].classList.remove("e-pv-thumbnail-view-icon"),this.thumbnailButton.children[0].classList.add("e-pv-thumbnail-view-disable-icon"))},e.prototype.resetThumbnailView=function(){this.sideBarContentContainer&&(this.sideBarContentContainer.style.display="none",this.pdfViewer.enableRtl?this.pdfViewerBase.viewerContainer.style.left="1px":this.pdfViewerBase.viewerContainer.style.left=this.sideToolbarWidth+"px",this.pdfViewerBase.viewerContainer.style.width=this.pdfViewer.element.clientWidth-this.sideToolbarWidth-this.getViewerContainerRight()+"px",this.pdfViewerBase.pageContainer&&(this.pdfViewerBase.pageContainer.style.width=this.pdfViewerBase.viewerContainer.clientWidth+"px"),this.thumbnailButton.setAttribute("disabled","disabled"),this.removeThumbnailSelectionIconTheme(),this.resetThumbnailIcon())},e.prototype.setBookmarkSelectionIconTheme=function(){this.bookmarkButton&&(this.bookmarkButton.children[0].classList.remove("e-pv-bookmark-icon"),this.bookmarkButton.children[0].classList.add("e-pv-bookmark-selection-icon"),this.bookmarkButton.classList.add("e-pv-bookmark-button-selection"))},e.prototype.removeBookmarkSelectionIconTheme=function(){this.bookmarkButton&&this.bookmarkButton.children[0]&&(this.bookmarkButton.children[0].classList.add("e-pv-bookmark-icon"),this.bookmarkButton.children[0].classList.remove("e-pv-bookmark-selection-icon"),this.bookmarkButton.classList.remove("e-pv-bookmark-button-selection"))},e.prototype.sideToolbarOnMouseup=function(e){e.target===this.sideBarToolbar&&this.pdfViewerBase.focusViewerContainer()},e.prototype.sideBarTitleOnMouseup=function(e){this.pdfViewerBase.focusViewerContainer()},e.prototype.openBookmarkcontentInitially=function(){if(this,document.getElementById(this.pdfViewer.dataId+"_thumbnail_view")&&(document.getElementById(this.pdfViewer.dataId+"_thumbnail_view").style.display="none"),this.removeThumbnailSelectionIconTheme(),this.pdfViewer&&this.pdfViewer.cultureValue&&this.pdfViewer.cultureValue.BookmarkContent?this.sideBarTitle.textContent=this.pdfViewer.cultureValue.BookmarkContent:this.sideBarTitle.textContent=this.pdfViewer.localeObj.getConstant("Bookmarks"),this.sideBarContent.setAttribute("aria-label","Bookmark View Panel"),this.sideBarContent.setAttribute("role","navigation"),this.pdfViewer.bookmarkViewModule.renderBookmarkcontent(),this.sideBarContentContainer&&("none"!==this.sideBarContentContainer.style.display?this.isThumbnailOpen?(this.setBookmarkSelectionIconTheme(),this.isBookmarkOpen=!0,this.updateViewerContainerOnExpand()):(this.removeBookmarkSelectionIconTheme(),this.isBookmarkOpen=!1,this.updateViewerContainerOnClose()):(this.sideBarContent.focus(),this.setBookmarkSelectionIconTheme(),this.isBookmarkOpen=!0,this.updateViewerContainerOnExpand())),this.isThumbnailOpen=!1,this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.inkAnnotationModule){var e=parseInt(this.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber);this.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(e)}},e.prototype.disableBookmarkButton=function(){this.sideBarContentContainer&&this.bookmarkButton&&this.bookmarkButton.children[0]&&(this.pdfViewer.isThumbnailViewOpen||(this.sideBarContentContainer.style.display="none"),this.bookmarkButton.setAttribute("disabled","disabled"),this.bookmarkButton.children[0].classList.add("e-pv-bookmark-disable-icon"))},e.prototype.clear=function(){sf.base.Browser.isDevice||(this.removeBookmarkSelectionIconTheme(),this.removeThumbnailSelectionIconTheme(),this.closeCommentPanelContainer())},e.prototype.getModuleName=function(){return"NavigationPane"},e}();function $(e,t,i,n,o){var a,s,r,l,d=sf.drawings.createHtmlElement("div",{id:o.element.id+n+"_diagramAdornerLayer",style:"width:"+e.width+"px;height:"+e.height+"px;"+t});if(!sf.drawings.getDiagramElement(d.id)){var h=o.viewerBase.getElement("_pageDiv_"+n),p=h.getBoundingClientRect(),c=(a=o.element.id+n+"_diagramAdorner_svg",s=p.width,r=p.height,l=document.createElementNS("http://www.w3.org/2000/svg","svg"),sf.drawings.setAttributeSvg(l,{id:a,width:s,height:r}),l);c.setAttribute("class","e-adorner-layer"+n),c.setAttribute("style","pointer-events:none;"),o.adornerSvgLayer=sf.drawings.createSvgElement("g",{id:o.element.id+"_diagramAdorner"}),o.adornerSvgLayer.setAttribute("style"," pointer-events: all; "),c.appendChild(o.adornerSvgLayer),d.appendChild(c),d.style.width=p.width+"px",d.style.height=p.height+"px",h?h.insertBefore(d,h.childNodes[0]):i.parentElement.appendChild(d);var u=sf.drawings.createSvgElement("g",{id:o.element.id+"_SelectorElement"});o.adornerSvgLayer.appendChild(u),sf.drawings.setAttributeSvg(c,{style:"pointer-events:none;"})}o.viewerBase.applyElementStyles(d,n)}!function(e){e[e.None=1]="None",e[e.Accepted=2]="Accepted",e[e.Canceled=3]="Canceled",e[e.Completed=4]="Completed",e[e.Rejected=5]="Rejected"}(F||(F={})),function(e){e[e.None=0]="None",e[e.Bold=1]="Bold",e[e.Italic=2]="Italic",e[e.Underline=4]="Underline",e[e.Strikethrough=8]="Strikethrough"}(L||(L={})),function(e){e[e.Copy=0]="Copy",e[e.Highlight=1]="Highlight",e[e.Cut=2]="Cut",e[e.Underline=4]="Underline",e[e.Paste=8]="Paste",e[e.Delete=16]="Delete",e[e.ScaleRatio=32]="ScaleRatio",e[e.Strikethrough=64]="Strikethrough",e[e.Properties=128]="Properties",e[e.Comment=256]="Comment"}(_||(_={})),function(e){e.Draw="Draw",e.Type="Type",e.Image="Image"}(O||(O={})),function(e){e[e.Corners=1]="Corners",e[e.Edges=2]="Edges"}(R||(R={})),function(e){e[e.Draw=1]="Draw",e[e.Text=2]="Text",e[e.Upload=4]="Upload"}(z||(z={})),function(e){e.auto="auto",e.crossHair="crosshair",e.e_resize="e-resize",e.ew_resize="ew-resize",e.grab="grab",e.grabbing="grabbing",e.move="move",e.n_resize="n-resize",e.ne_resize="ne-resize",e.ns_resize="ns-resize",e.nw_resize="nw-resize",e.pointer="pointer",e.s_resize="s-resize",e.se_resize="se-resize",e.sw_resize="sw-resize",e.text="text",e.w_resize="w-resize"}(H||(H={})),function(e){e.Revised="Revised",e.Reviewed="Reviewed",e.Received="Received",e.Approved="Approved",e.Confidential="Confidential",e.NotApproved="NotApproved"}(j||(j={})),function(e){e.Witness="Witness",e.InitialHere="InitialHere",e.SignHere="SignHere",e.Accepted="Accepted",e.Rejected="Rejected"}(W||(W={})),function(e){e.Approved="Approved",e.NotApproved="NotApproved",e.Draft="Draft",e.Final="Final",e.Completed="Completed",e.Confidential="Confidential",e.ForPublicRelease="ForPublicRelease",e.NotForPublicRelease="NotForPublicRelease",e.ForComment="ForComment",e.Void="Void",e.PreliminaryResults="PreliminaryResults",e.InformationOnly="InformationOnly"}(Z||(Z={})),function(e){e.Select="Select",e.Move="Move",e.Resize="Resize",e.Delete="Delete",e.None="None",e.PropertyChange="PropertyChange"}(q||(q={})),function(e){e.Json="Json",e.Xfdf="Xfdf"}(U||(U={})),function(e){e[e.Default=0]="Default",e[e.AnnotationAdding=2]="AnnotationAdding"}(Y||(Y={}));var ee=function(){function e(e,t){this.pdfViewer=e,this.pdfViewerBase=t}return e.prototype.getContextMenuStatus=function(){var e=!1;return this.pdfViewer.selectedItems&&0!==this.pdfViewer.selectedItems.annotations.length&&(e=this.pdfViewer.selectedItems.annotations[0].annotationSettings.isLock),e},e.prototype.createContextMenu=function(){var e=document.getElementsByClassName(this.pdfViewer.dataId+"_context_menu");if(e&&(this.contextMenuElement=e[0],this.contextMenuElement.children&&this.contextMenuElement.children.length>0)){var t=this.contextMenuElement.children[0];t.className=t.className+" e-pv-context-menu"}},e.prototype.open=function(e,t,i){this.pdfViewer._dotnetInstance.invokeMethodAsync("OpenContextMenu",e,t)},e.prototype.close=function(){this.pdfViewer._dotnetInstance.invokeMethodAsync("CloseContextMenu")},e.prototype.destroy=function(){this.previousAction="",this.contextMenuElement=null},e.prototype.OnItemSelected=function(e){"string"==typeof e?this.pdfViewerBase.OnItemSelected(e):this.pdfViewerBase.OnItemSelected(e[0])},e}(),te={};function ie(e,t){if(e.target){var i,n=sf.base.isNullOrUndefined(t)?sf.base.createElement:t,o=function(e,t){var i=t("div",{});i.classList.add("e-spinner-pane");var n=t("div",{});return n.classList.add("e-spinner-inner"),e.appendChild(i),i.appendChild(n),{wrap:i,innerWrap:n}}(e.target,n);if(sf.base.isNullOrUndefined(e.cssClass)||o.wrap.classList.add(e.cssClass),sf.base.isNullOrUndefined(e.template)&&sf.base.isNullOrUndefined(null)){var a=sf.base.isNullOrUndefined(e.type)?function(e){return window.getComputedStyle(e,":after").getPropertyValue("content").replace(/['"]+/g,"")}(o.wrap):e.type;i=function(e,t){var i;switch(t){case"Material":case"Material3":case"Fabric":i=30;break;case"Bootstrap4":i=36;break;default:i=30}return e=e?parseFloat(e+""):i,"Bootstrap"===t?e:e/2}(sf.base.isNullOrUndefined(e.width)?void 0:e.width,a),function(e,t,i,n){var o=t.querySelector(".e-spinner-inner"),a=o.querySelector("svg");sf.base.isNullOrUndefined(a)||o.removeChild(a);switch(e){case"Material":!function(e,t,i){var n=ne();te[n]={timeOut:0,type:"Material",radius:t},ae(e,n,i,"e-spin-material"),re(t,e,"Material","e-spin-material")}(o,i,n);break;case"Material3":!function(e,t,i){var n=ne();te[n]={timeOut:0,type:"Material3",radius:t},ae(e,n,i,"e-spin-material3"),re(t,e,"Material3","e-spin-material3")}(o,i,n);break;case"Fabric":!function(e,t,i){var n=ne();te[n]={timeOut:0,type:"Fabric",radius:t},oe(e,n,"e-spin-fabric",i),pe(t,e,"e-spin-fabric")}(o,i,n);break;case"Bootstrap":!function(e,t,i){var n=ne();te[n]={timeOut:0,type:"Bootstrap",radius:t},function(e,t,i){var n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.setAttribute("id",t),n.setAttribute("class","e-spin-bootstrap"),n.setAttribute("viewBox","0 0 64 64"),e.insertBefore(n,e.firstChild);for(var o=0;o<=7;o++){var a=document.createElementNS("http://www.w3.org/2000/svg","circle");a.setAttribute("class","e-path-circle_"+o),a.setAttribute("r","2"),a.setAttribute("transform","translate(32,32)"),n.appendChild(a)}}(e,n),function(e,t){var i=e.querySelector("svg.e-spin-bootstrap");i.style.width=i.style.height=t+"px";for(var n=90,o=0;o<=7;o++){var a=ce(0,0,24,n),s=i.querySelector(".e-path-circle_"+o);s.setAttribute("cx",a.x+""),s.setAttribute("cy",a.y+""),n=n>=360?0:n,n+=45}}(e,t)}(o,i);break;case"HighContrast":!function(e,t,i){var n=ne();te[n]={timeOut:0,type:"HighContrast",radius:t},oe(e,n,"e-spin-high-contrast",i),pe(t,e,"e-spin-high-contrast")}(o,i,n);break;case"Bootstrap4":!function(e,t,i){var n=ne();te[n]={timeOut:0,type:"Bootstrap4",radius:t},ae(e,n,i,"e-spin-bootstrap4"),re(t,e,"Bootstrap4","e-spin-bootstrap4")}(o,i,n);break;case"Bootstrap5":!function(e,t,i){var n=ne();te[n]={timeOut:0,type:"Bootstrap5",radius:t},ae(e,n,i,"e-spin-bootstrap5"),re(t,e,"Bootstrap5","e-spin-bootstrap5")}(o,i,n);break;case"Tailwind":!function(e,t,i){var n=ne();te[n]={timeOut:0,type:"Tailwind",radius:t},oe(e,n,"e-spin-tailwind",i),pe(t,e,"e-spin-tailwind")}(o,i,n);break;case"Fluent":!function(e,t,i){var n=ne();te[n]={timeOut:0,type:"Fluent",radius:t},oe(e,n,"e-spin-fluent",i),pe(t,e,"e-spin-fluent")}(o,i,n)}}(a,o.wrap,i,n),sf.base.isNullOrUndefined(e.label)||function(e,t,i){var n=i("div",{});n.classList.add("e-spin-label"),n.textContent=t,e.appendChild(n)}(o.innerWrap,e.label,n)}else{var s=sf.base.isNullOrUndefined(e.template)?null:e.template;o.wrap.classList.add("e-spin-template"),function(e,t,i){sf.base.isNullOrUndefined(i)||e.classList.add(i);e.querySelector(".e-spinner-inner").innerHTML=t}(o.wrap,s,null)}o.wrap.classList.add("e-spin-hide"),o=null}}function ne(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=0;i<5;i++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}function oe(e,t,i,n){var o=document.createElementNS("http://www.w3.org/2000/svg","svg");o.setAttribute("id",t),o.setAttribute("class",i);var a=document.createElementNS("http://www.w3.org/2000/svg","path");a.setAttribute("class","e-path-circle");var s=document.createElementNS("http://www.w3.org/2000/svg","path");s.setAttribute("class","e-path-arc"),e.insertBefore(o,e.firstChild),o.appendChild(a),o.appendChild(s)}function ae(e,t,i,n){var o=document.createElementNS("http://www.w3.org/2000/svg","svg");o.setAttribute("class",n),o.setAttribute("id",t);var a=document.createElementNS("http://www.w3.org/2000/svg","path");a.setAttribute("class","e-path-circle"),e.insertBefore(o,e.firstChild),o.appendChild(a)}function se(e){!function(e,t,i,n,o,a,s){var r=++s.globalInfo[s.uniqueID].previousId,l=(new Date).getTime(),d=t-e,h=(u=2*s.globalInfo[s.uniqueID].radius+"",parseFloat(u)),p=le(h),c=-90*(s.globalInfo[s.uniqueID].count||0);var u;!function t(o){var s=Math.max(0,Math.min((new Date).getTime()-l,n));!function(e,t){if(!sf.base.isNullOrUndefined(t.querySelector("svg.e-spin-material"))||!sf.base.isNullOrUndefined(t.querySelector("svg.e-spin-material3"))){var i=void 0;if(sf.base.isNullOrUndefined(t.querySelector("svg.e-spin-material"))||sf.base.isNullOrUndefined(t.querySelector("svg.e-spin-material").querySelector("path.e-path-circle"))?sf.base.isNullOrUndefined(t.querySelector("svg.e-spin-material3"))||sf.base.isNullOrUndefined(t.querySelector("svg.e-spin-material3").querySelector("path.e-path-circle"))||(i=t.querySelector("svg.e-spin-material3")):i=t.querySelector("svg.e-spin-material"),!sf.base.isNullOrUndefined(i)){var n=i.querySelector("path.e-path-circle");n.setAttribute("stroke-dashoffset",de(h,p,e,a)+""),n.setAttribute("transform","rotate("+c+" "+h/2+" "+h/2+")")}}}(i(s,e,d,n),o.container),r===o.globalInfo[o.uniqueID].previousId&&s<n?te[o.uniqueID].timeOut=setTimeout(t.bind(null,o),1):se(o)}(s)}(1,149,he,1333,e.globalInfo[e.uniqueID].count,75,e),e.globalInfo[e.uniqueID].count=++e.globalInfo[e.uniqueID].count%4}function re(e,t,i,n){var o=2*e,a=t.querySelector("svg."+n),s=a.querySelector("path.e-path-circle"),r=le(o),l=o/2+"px";a.setAttribute("viewBox","0 0 "+o+" "+o),a.style.width=a.style.height=o+"px",a.style.transformOrigin=l+" "+l+" "+l,s.setAttribute("d",function(e,t){var i=e/2,n=t/2;return"M"+i+","+n+"A"+(i-n)+","+(i-n)+" 0 1 1 "+n+","+i}(o,r)),"Material"!==i&&"Material3"!==i||(s.setAttribute("stroke-width",r+""),s.setAttribute("stroke-dasharray",(o-r)*Math.PI*.75+""),s.setAttribute("stroke-dashoffset",de(o,r,1,75)+""))}function le(e){return.1*e}function de(e,t,i,n){return(e-t)*Math.PI*(3*n/100-i/100)}function he(e,t,i,n){var o=(e/=n)*e,a=o*e;return t+i*(6*a*o+-15*o*o+10*a)}function pe(e,t,i){var n=e,o=e,a=2*e,s=t.querySelector("."+i),r=s.querySelector(".e-path-circle"),l=s.querySelector(".e-path-arc"),d=a/2+"px";r.setAttribute("d",function(e,t,i){return["M",e,t,"m",-i,0,"a",i,i,0,1,0,2*i,0,"a",i,i,0,1,0,2*-i,0].join(" ")}(n,o,e)),l.setAttribute("d",function(e,t,i,n,o){var a=ce(e,t,i,o),s=ce(e,t,i,n);return["M",a.x,a.y,"A",i,i,0,0,0,s.x,s.y].join(" ")}(n,o,e,315,45)),s.setAttribute("viewBox","0 0 "+a+" "+a),s.style.transformOrigin=d+" "+d+" "+d,s.style.width=s.style.height=a+"px"}function ce(e,t,i,n){var o=(n-90)*Math.PI/180;return{x:e+i*Math.cos(o),y:t+i*Math.sin(o)}}function ue(e){fe(e,!1),e=null}function fe(e,t){var i;if(e&&(i=e.classList.contains("e-spinner-pane")?e:e.querySelector(".e-spinner-pane")),e&&i){var n=i.querySelector(".e-spinner-inner");if(t?!i.classList.contains("e-spin-template")&&!i.classList.contains("e-spin-hide"):!i.classList.contains("e-spin-template")&&!i.classList.contains("e-spin-show")){var o=i.querySelector("svg");if(sf.base.isNullOrUndefined(o))return;var a=o.getAttribute("id");switch(te[a].isAnimate=!t,te[a].type){case"Material":case"Material3":t?clearTimeout(te[a].timeOut):function(e,t,i){var n={};te[t].timeOut=0,n[t]=function(e,t,i,n){return{radius:t,count:i,previousId:n}}(0,i,0,0),se({uniqueID:t,container:e,globalInfo:n,timeOutVar:0})}(n,a,te[a].radius);break;case"Bootstrap":t?clearTimeout(te[a].timeOut):function(e){for(var t,i,n,o,a,s=e.querySelector("svg.e-spin-bootstrap").getAttribute("id"),r=1;r<=8;r++){l(e.getElementsByClassName("e-path-circle_"+(8===r?0:r))[0],r,r,(t=void 0,i=void 0,n=void 0,o=void 0,a=void 0,t=[],n=r,o=!1,a=1,function e(s){t.push(s),(s!==n||1===a)&&(s<=i&&s>1&&!o?s=parseFloat((s-.2).toFixed(2)):1===s?(s=7,s=parseFloat((s+.2).toFixed(2)),o=!0):s<8&&o?8===(s=parseFloat((s+.2).toFixed(2)))&&(o=!1):s<=8&&!o&&(s=parseFloat((s-.2).toFixed(2))),++a,e(s))}(i=r),t),s)}function l(e,t,i,n,o){var a=0;!function t(i){te[o].isAnimate&&(++a,e.setAttribute("r",i+""),a>=n.length&&(a=0),te[o].timeOut=setTimeout(t.bind(null,n[a]),18))}(t)}}(n)}}t?sf.base.classList(i,["e-spin-hide"],["e-spin-show"]):sf.base.classList(i,["e-spin-show"],["e-spin-hide"]),e=null}}function ge(e){fe(e,!0),e=null}var me,we=function(e,t,i,n){return new(i||(i=Promise))((function(o,a){function s(e){try{l(n.next(e))}catch(e){a(e)}}function r(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){e.done?o(e.value):new i((function(t){t(e.value)})).then(s,r)}l((n=n.apply(e,t||[])).next())}))},ye=function(e,t){var i,n,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function r(a){return function(r){return function(a){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],n=0}finally{i=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,r])}}},Se=function(){function e(e,t){this.pdfViewer=null,this.pdfViewerBase=null,this.totalPageElement=null,this.currentPageBoxElementContainer=null,this.currentPageBoxElement=null,this.firstPageElement=null,this.previousPageElement=null,this.nextPageElement=null,this.lastPageElement=null,this.zommOutElement=null,this.zoomInElement=null,this.zoomDropDownElement=null,this.selectToolElement=null,this.handToolElement=null,this.undoElement=null,this.redoElement=null,this.commentElement=null,this.submitFormButton=null,this.searchElement=null,this.annotationElement=null,this.printElement=null,this.downloadElement=null,this.highlightElement=null,this.underlineElement=null,this.strikeThroughElement=null,this.shapeElement=null,this.calibrateElement=null,this.stampElement=null,this.freeTextElement=null,this.signatureElement=null,this.inkElement=null,this.annotationFontSizeInputElement=null,this.annotationFontFamilyInputElement=null,this.annotationColorElement=null,this.annotationStrokeColorElement=null,this.annotationThicknessElement=null,this.annotationOpacityElement=null,this.annotationFontColorElement=null,this.annotationFontFamilyElement=null,this.annotationFontSizeElement=null,this.annotationTextAlignElement=null,this.annotationTextColorElement=null,this.annotationTextPropertiesElement=null,this.annotationDeleteElement=null,this.annotationCloseElement=null,this.annotationCommentPanelElement=null,this.mobileToolbarContainerElement=null,this.mobileSearchPreviousOccurenceElement=null,this.mobileSearchNextOccurenceElement=null,this.cssClass="e-overlay",this.disableClass=" e-overlay",this.editAnnotationButtonElement=null,this.pdfViewer=e,this.pdfViewerBase=t,this.findToolbarElements()}return e.prototype.findToolbarElements=function(){(this.pdfViewerBase.getElement("_totalPage")&&(this.totalPageElement=this.pdfViewerBase.getElement("_totalPage").children[0]),this.currentPageBoxElementContainer=this.pdfViewerBase.getElement("_currentPageInput"),this.pdfViewerBase.getElement("_currentPageInput")&&(this.currentPageBoxElement=this.pdfViewerBase.getElement("_currentPageInput").children[0].children[0]),this.firstPageElement=this.pdfViewerBase.getElement("_firstPage"),this.updateClassListForToolbarItem(this.firstPageElement),this.previousPageElement=this.pdfViewerBase.getElement("_previousPage"),this.updateClassListForToolbarItem(this.previousPageElement),this.nextPageElement=this.pdfViewerBase.getElement("_nextPage"),this.updateClassListForToolbarItem(this.nextPageElement),this.lastPageElement=this.pdfViewerBase.getElement("_lastPage"),this.updateClassListForToolbarItem(this.lastPageElement),this.zommOutElement=this.pdfViewerBase.getElement("_zoomOut"),this.updateClassListForToolbarItem(this.zommOutElement),this.zoomInElement=this.pdfViewerBase.getElement("_zoomIn"),this.updateClassListForToolbarItem(this.zoomInElement),this.zoomDropDownElement=this.pdfViewerBase.getElement("_zoomDropDown"),this.selectToolElement=this.pdfViewerBase.getElement("_selectTool"),this.handToolElement=this.pdfViewerBase.getElement("_handTool"),this.undoElement=this.pdfViewerBase.getElement("_undo"),this.updateClassListForToolbarItem(this.undoElement),this.redoElement=this.pdfViewerBase.getElement("_redo"),this.updateClassListForToolbarItem(this.redoElement),this.commentElement=this.pdfViewerBase.getElement("_comment"),this.submitFormButton=this.pdfViewerBase.getElement("_submitFormButton"),this.searchElement=this.pdfViewerBase.getElement("_search"),this.updateClassListForToolbarItem(this.searchElement),this.annotationElement=this.pdfViewerBase.getElement("_annotation"),this.annotationElement&&(this.editAnnotationButtonElement=this.annotationElement.children[0]),this.editAnnotationButtonElement)&&(this.editAnnotationButtonElement.classList.add("e-pv-tbar-btn"),this.editAnnotationButtonElement.childNodes[0].classList.remove("e-icons","e-btn-icon"));this.printElement=this.pdfViewerBase.getElement("_print"),this.updateClassListForToolbarItem(this.printElement),this.downloadElement=this.pdfViewerBase.getElement("_download"),this.updateClassListForToolbarItem(this.downloadElement),this.highlightElement=this.pdfViewerBase.getElement("_highLight"),this.underlineElement=this.pdfViewerBase.getElement("_underline"),this.strikeThroughElement=this.pdfViewerBase.getElement("_strikethrough"),this.shapeElement=this.pdfViewerBase.getElement("_annotation_shapes"),this.calibrateElement=this.pdfViewerBase.getElement("_annotation_calibrate"),this.stampElement=this.pdfViewerBase.getElement("_annotation_stamp"),this.freeTextElement=this.pdfViewerBase.getElement("_annotation_freeTextEdit"),this.updateClassListForToolbarItem(this.freeTextElement),this.signatureElement=this.pdfViewerBase.getElement("_annotation_signature"),this.updateClassListForToolbarItem(this.signatureElement),this.inkElement=this.pdfViewerBase.getElement("_annotation_ink"),this.pdfViewerBase.getElement("_annotation_fontsize")&&(this.annotationFontSizeInputElement=this.pdfViewerBase.getElement("_annotation_fontsize").children[0].children[0]),this.pdfViewerBase.getElement("_annotation_fontsize")&&(this.annotationFontFamilyInputElement=this.pdfViewerBase.getElement("_annotation_fontname").children[0].children[0]),this.annotationColorElement=this.pdfViewerBase.getElement("_annotation_color"),this.annotationStrokeColorElement=this.pdfViewerBase.getElement("_annotation_stroke"),this.annotationThicknessElement=this.pdfViewerBase.getElement("_annotation_thickness"),this.annotationOpacityElement=this.pdfViewerBase.getElement("_annotation_opacity"),this.annotationFontColorElement=this.pdfViewerBase.getElement("_annotation_textcolor"),this.annotationFontFamilyElement=this.pdfViewerBase.getElement("_annotation_fontname"),this.annotationFontSizeElement=this.pdfViewerBase.getElement("_annotation_fontsize"),this.annotationTextAlignElement=this.pdfViewerBase.getElement("_annotation_textalign"),this.annotationTextColorElement=this.pdfViewerBase.getElement("_annotation_textcolor"),this.annotationTextPropertiesElement=this.pdfViewerBase.getElement("_annotation_textproperties"),this.annotationDeleteElement=this.pdfViewerBase.getElement("_annotation_delete"),this.annotationCommentPanelElement=this.pdfViewerBase.getElement("_annotation_commentPanel"),this.annotationCloseElement=this.pdfViewerBase.getElement("_annotation_close"),this.mobileToolbarContainerElement=this.pdfViewerBase.getElement("_mobileToolbarContainer"),this.mobileSearchPreviousOccurenceElement=this.pdfViewerBase.getElement("_prev_occurrence"),this.mobileSearchNextOccurenceElement=this.pdfViewerBase.getElement("_next_occurrence")},e.prototype.updateClassListForToolbarItem=function(e){sf.base.isNullOrUndefined(e)||sf.base.isNullOrUndefined(e.childNodes[0])||(e.children[0].classList.add("e-pv-tbar-btn"),sf.base.isNullOrUndefined(e.childNodes[0].childNodes[0])||e.childNodes[0].childNodes[0].classList.remove("e-icons","e-btn-icon"))},e.prototype.updateTotalPage=function(){this.totalPageElement&&(this.totalPageElement.textContent=this.pdfViewer.localeObj.getConstant("of")+this.pdfViewerBase.pageCount.toString())},e.prototype.updateCurrentPage=function(e){this.currentPageBoxElement&&(this.currentPageBoxElement.value=e.toString())},e.prototype.loadDocument=function(){return we(this,void 0,void 0,(function(){var e,t;return ye(this,(function(i){switch(i.label){case 0:return e={},this.pdfViewer.enableNavigation?(this.currentPageBoxElementContainer&&(this.currentPageBoxElementContainer.classList.remove(this.cssClass),e.pageBoxValue=!0),this.currentPageBoxElement&&(this.currentPageBoxElement.value="1"),this.totalPageElement?[4,this.pdfViewer._dotnetInstance.invokeMethodAsync("GetLocaleText","PdfViewer_Of")]:[3,2]):[3,3];case 1:t=i.sent(),this.totalPageElement.textContent=t+" "+this.pdfViewerBase.pageCount.toString(),i.label=2;case 2:this.firstPageElement&&!this.isEnabled(this.firstPageElement)&&(this.firstPageElement.className+=this.disableClass),this.previousPageElement&&!this.isEnabled(this.previousPageElement)&&(this.previousPageElement.className+=this.disableClass),this.nextPageElement&&(this.nextPageElement.classList.remove(this.cssClass),e.nextPageValue=!0),this.lastPageElement&&(this.lastPageElement.classList.remove(this.cssClass),e.lastPageValue=!0),1===this.pdfViewerBase.pageCount&&(this.nextPageElement&&!this.nextPageElement.classList.contains(this.cssClass)&&(this.nextPageElement.className+=this.disableClass,e.nextPageValue=!1),this.lastPageElement&&!this.lastPageElement.classList.contains(this.cssClass)&&(this.lastPageElement.className+=this.disableClass,e.lastPageValue=!1)),i.label=3;case 3:return this.pdfViewer.enableMagnification&&(this.zoomInElement&&(this.zoomInElement.classList.remove(this.cssClass),e.zoomInValue=!0),this.zommOutElement&&(this.zommOutElement.classList.remove(this.cssClass),e.zoomOutValue=!0),this.zoomDropDownElement&&(this.zoomDropDownElement.classList.remove(this.cssClass),e.zoomDropDownValue=!0)),this.pdfViewer.enableTextSelection&&this.selectToolElement&&this.pdfViewer.toolbar&&(this.selectToolElement.classList.remove(this.cssClass),e.selectToolValue=!0,this.selectItem(this.pdfViewer.toolbar.SelectToolElement)),this.handToolElement&&(this.handToolElement.classList.remove(this.cssClass),e.handToolValue=!0),this.pdfViewer.enableStickyNotesAnnotation&&this.commentElement&&(this.commentElement.classList.remove(this.cssClass),e.commentValue=!0),this.pdfViewer.enableTextSearch&&this.searchElement&&(this.searchElement.classList.remove(this.cssClass),e.searchValue=!0),this.pdfViewer.isFormFieldDocument&&this.submitFormButton&&(this.submitFormButton.classList.remove(this.cssClass),e.submitFormValue=!0),this.pdfViewer.enableAnnotation&&this.pdfViewer.enableAnnotationToolbar&&this.annotationElement&&(this.annotationElement.classList.remove(this.cssClass),e.annotationValue=!0),this.pdfViewer.enablePrint&&this.printElement&&(this.printElement.classList.remove(this.cssClass),e.printValue=!0),this.pdfViewer.enableDownload&&this.downloadElement&&(this.downloadElement.classList.remove(this.cssClass),e.downloadValue=!0),this.pdfViewer.enableAnnotation&&this.pdfViewer.enableTextMarkupAnnotation&&(this.highlightElement&&(this.highlightElement.classList.remove(this.cssClass),e.highlightValue=!0),this.underlineElement&&(this.underlineElement.classList.remove(this.cssClass),e.underlineValue=!0),this.strikeThroughElement&&(this.strikeThroughElement.classList.remove(this.cssClass),e.strikeThroughValue=!0)),this.pdfViewer.enableAnnotation&&this.pdfViewer.enableShapeAnnotation&&this.shapeElement&&(this.shapeElement.classList.remove(this.cssClass),e.shapeValue=!0),this.pdfViewer.enableAnnotation&&this.pdfViewer.enableMeasureAnnotation&&this.calibrateElement&&(this.calibrateElement.classList.remove(this.cssClass),e.calibrateValue=!0),this.pdfViewer.enableAnnotation&&this.pdfViewer.enableStampAnnotations&&this.stampElement&&(this.stampElement.classList.remove(this.cssClass),e.stampValue=!0),this.pdfViewer.enableFreeText&&this.freeTextElement&&(this.freeTextElement.classList.remove(this.cssClass),e.freeTextValue=!0),this.pdfViewer.enableHandwrittenSignature&&this.signatureElement&&(this.signatureElement.classList.remove(this.cssClass),e.signatureValue=!0),this.pdfViewer.enableInkAnnotation&&this.inkElement&&(this.inkElement.classList.remove(this.cssClass),e.inkValue=!0),this.annotationCommentPanelElement&&this.pdfViewer.enableCommentPanel&&(this.annotationCommentPanelElement.classList.remove(this.cssClass),e.annotationCommentPanelValue=!0),this.pdfViewer._dotnetInstance.invokeMethodAsync("UpdateToolbarIcon",e),[2]}}))}))},e.prototype.selectItem=function(e){e&&e.classList.add("e-pv-select")},e.prototype.deselectItem=function(e){e&&e.classList.remove("e-pv-select")},e.prototype.showAnnotationToolbar=function(e){this.pdfViewer.toolbar&&(this.pdfViewer.toolbar.annotationToolbarModule.adjustViewer(e),e?this.pdfViewer.toolbar.selectItem(this.editAnnotationButtonElement):(this.pdfViewer.toolbar.deSelectItem(this.editAnnotationButtonElement),this.pdfViewerBase.focusViewerContainer()))},e.prototype.closeAnnotationToolbar=function(){this.pdfViewer.toolbar&&(this.pdfViewer.toolbar.deSelectItem(this.editAnnotationButtonElement),this.pdfViewer.toolbar.annotationToolbarModule&&this.pdfViewer.toolbar.annotationToolbarModule.adjustViewer(!1)),this.pdfViewerBase.navigationPane.closeCommentPanelContainer()},e.prototype.resetToolbar=function(){this.pdfViewer.enableToolbar&&(this.currentPageBoxElement&&(this.currentPageBoxElement.value="0"),this.totalPageElement&&(this.totalPageElement.textContent=this.pdfViewer.localeObj.getConstant("of")+"0"),this.currentPageBoxElementContainer&&!this.isEnabled(this.currentPageBoxElementContainer)&&(this.currentPageBoxElementContainer.className+=this.disableClass),this.firstPageElement&&!this.isEnabled(this.firstPageElement)&&(this.firstPageElement.className+=this.disableClass),this.previousPageElement&&!this.isEnabled(this.previousPageElement)&&(this.previousPageElement.className+=this.disableClass),this.nextPageElement&&!this.isEnabled(this.nextPageElement)&&(this.nextPageElement.className+=this.disableClass),this.lastPageElement&&!this.isEnabled(this.lastPageElement)&&(this.lastPageElement.className+=this.disableClass),this.zoomInElement&&!this.isEnabled(this.zoomInElement)&&(this.zoomInElement.className+=this.disableClass),this.zommOutElement&&!this.isEnabled(this.zommOutElement)&&(this.zommOutElement.className+=this.disableClass),this.zoomDropDownElement&&!this.isEnabled(this.zoomDropDownElement)&&(this.zoomDropDownElement.className+=this.disableClass),this.selectToolElement&&!this.isEnabled(this.selectToolElement)&&(this.selectToolElement.className+=this.disableClass),this.handToolElement&&!this.isEnabled(this.handToolElement)&&(this.handToolElement.className+=this.disableClass),this.undoElement&&!this.isEnabled(this.undoElement)&&(this.undoElement.className+=this.disableClass),this.redoElement&&!this.isEnabled(this.redoElement)&&(this.redoElement.className+=this.disableClass),this.commentElement&&!this.isEnabled(this.commentElement)&&(this.commentElement.className+=this.disableClass),this.searchElement&&!this.isEnabled(this.searchElement)&&(this.searchElement.className+=this.disableClass),this.submitFormButton&&!this.isEnabled(this.submitFormButton)&&(this.submitFormButton.className+=this.disableClass),this.annotationElement&&!this.isEnabled(this.annotationElement)&&(this.annotationElement.className+=this.disableClass),this.printElement&&!this.isEnabled(this.printElement)&&(this.printElement.className+=this.disableClass),this.downloadElement&&!this.isEnabled(this.downloadElement)&&(this.downloadElement.className+=this.disableClass)),this.pdfViewer.enableAnnotationToolbar&&(this.highlightElement&&!this.isEnabled(this.highlightElement)&&(this.highlightElement.className+=this.disableClass),this.underlineElement&&!this.isEnabled(this.underlineElement)&&(this.underlineElement.className+=this.disableClass),this.strikeThroughElement&&!this.isEnabled(this.strikeThroughElement)&&(this.strikeThroughElement.className+=this.disableClass),this.shapeElement&&!this.isEnabled(this.shapeElement)&&(this.shapeElement.className+=this.disableClass),this.calibrateElement&&!this.isEnabled(this.calibrateElement)&&(this.calibrateElement.className+=this.disableClass),this.stampElement&&!this.isEnabled(this.stampElement)&&(this.stampElement.className+=this.disableClass),this.freeTextElement&&!this.isEnabled(this.freeTextElement)&&(this.freeTextElement.className+=this.disableClass),this.signatureElement&&!this.isEnabled(this.signatureElement)&&(this.signatureElement.className+=this.disableClass),this.inkElement&&!this.isEnabled(this.inkElement)&&(this.inkElement.className+=this.disableClass),this.annotationFontFamilyElement&&!this.isEnabled(this.annotationFontFamilyElement)&&(this.annotationFontFamilyElement.className+=this.disableClass),this.annotationFontSizeElement&&!this.isEnabled(this.annotationFontSizeElement)&&(this.annotationFontSizeElement.className+=this.disableClass),this.annotationTextColorElement&&!this.isEnabled(this.annotationTextColorElement)&&(this.annotationTextColorElement.className+=this.disableClass),this.annotationTextAlignElement&&!this.isEnabled(this.annotationTextAlignElement)&&(this.annotationTextAlignElement.className+=this.disableClass),this.annotationTextPropertiesElement&&!this.isEnabled(this.annotationTextPropertiesElement)&&(this.annotationTextPropertiesElement.className+=this.disableClass),this.annotationColorElement&&!this.isEnabled(this.annotationColorElement)&&(this.annotationColorElement.className+=this.disableClass),this.annotationStrokeColorElement&&!this.isEnabled(this.annotationStrokeColorElement)&&(this.annotationStrokeColorElement.className+=this.disableClass),this.annotationThicknessElement&&!this.isEnabled(this.annotationThicknessElement)&&(this.annotationThicknessElement.className+=this.disableClass),this.annotationOpacityElement&&!this.isEnabled(this.annotationOpacityElement)&&(this.annotationOpacityElement.className+=this.disableClass),this.annotationDeleteElement&&!this.isEnabled(this.annotationDeleteElement)&&(this.annotationDeleteElement.className+=this.disableClass),this.annotationCommentPanelElement&&!this.isEnabled(this.annotationCommentPanelElement)&&(this.annotationCommentPanelElement.className+=this.disableClass))},e.prototype.EnableDeleteOption=function(e){var t={};null!==this.annotationDeleteElement&&(e?(this.annotationDeleteElement.classList.remove(this.cssClass),t.deleteValue=!0,this.pdfViewer._dotnetInstance.invokeMethodAsync("UpdateToolbarIcon",t)):this.isEnabled(this.annotationDeleteElement)||(this.annotationDeleteElement.className+=this.disableClass))},e.prototype.pageChanged=function(e){var t={};this.pdfViewer.enableNavigation&&this.currentPageBoxElement&&this.currentPageBoxElement.value&&(this.currentPageBoxElement.value=e.toString()),e===this.pdfViewer.pageCount&&(this.nextPageElement&&!this.isEnabled(this.nextPageElement)&&(this.nextPageElement.className+=this.disableClass),this.previousPageElement&&(this.previousPageElement.classList.remove(this.cssClass),t.previousPageValue=!0),this.lastPageElement&&!this.isEnabled(this.lastPageElement)&&(this.lastPageElement.className+=this.disableClass),this.firstPageElement&&(this.firstPageElement.classList.remove(this.cssClass),t.firstPageValue=!0)),e<this.pdfViewer.pageCount&&1!==e&&(this.firstPageElement&&(this.firstPageElement.classList.remove(this.cssClass),t.firstPageValue=!0),this.previousPageElement&&(this.previousPageElement.classList.remove(this.cssClass),t.previousPageValue=!0),this.nextPageElement&&(this.nextPageElement.classList.remove(this.cssClass),t.nextPageValue=!0),this.lastPageElement&&(this.lastPageElement.classList.remove(this.cssClass),t.lastPageValue=!0)),1===e&&(this.nextPageElement&&(this.nextPageElement.classList.remove(this.cssClass),t.nextPageValue=!0),this.lastPageElement&&(this.lastPageElement.classList.remove(this.cssClass),t.lastPageValue=!0),this.firstPageElement&&!this.isEnabled(this.firstPageElement)&&(this.firstPageElement.className+=this.disableClass),this.previousPageElement&&!this.isEnabled(this.previousPageElement)&&(this.previousPageElement.className+=this.disableClass)),this.pdfViewer._dotnetInstance.invokeMethodAsync("UpdateToolbarIcon",t)},e.prototype.canUndoRedo=function(){var e=!!(this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.actionCollection&&this.pdfViewer.annotationModule.actionCollection.length>0),t=!!(this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.redoCollection&&this.pdfViewer.annotationModule.redoCollection.length>0);this.pdfViewer._dotnetInstance.invokeMethodAsync("updateUndoRedoState",e,t)},e.prototype.updateUndoRedoButton=function(e,t){var i={};"undo"===e&&(t&&this.undoElement?(this.undoElement.classList.remove(this.cssClass),i.undoValue=!0,this.pdfViewer._dotnetInstance.invokeMethodAsync("UpdateToolbarIcon",i)):this.undoElement&&!this.isEnabled(this.undoElement)&&(this.undoElement.className+=this.disableClass)),"redo"===e&&(t&&this.redoElement?(this.redoElement.classList.remove(this.cssClass),i.redoValue=!0,this.pdfViewer._dotnetInstance.invokeMethodAsync("UpdateToolbarIcon",i)):this.redoElement&&!this.isEnabled(this.redoElement)&&(this.redoElement.className+=this.disableClass),this.canUndoRedo())},e.prototype.disableUndoRedoButton=function(){this.undoElement&&!this.isEnabled(this.undoElement)&&(this.undoElement.className+=this.disableClass),this.redoElement&&!this.isEnabled(this.redoElement)&&(this.redoElement.className+=this.disableClass)},e.prototype.enableTextMarkupAnnotationPropertiesTools=function(e){e?(this.annotationColorElement&&this.annotationColorElement.classList.remove(this.cssClass),this.annotationOpacityElement&&this.annotationOpacityElement.classList.remove(this.cssClass)):(this.annotationOpacityElement&&!this.isEnabled(this.annotationOpacityElement)&&(this.annotationOpacityElement.className+=this.disableClass),this.annotationColorElement&&!this.isEnabled(this.annotationColorElement)&&(this.annotationColorElement.className+=this.disableClass)),this.annotationFontColorElement&&!this.isEnabled(this.annotationFontColorElement)&&(this.annotationFontColorElement.className+=this.disableClass),this.annotationFontFamilyElement&&!this.isEnabled(this.annotationFontFamilyElement)&&(this.annotationFontFamilyElement.className+=this.disableClass),this.annotationFontSizeElement&&!this.isEnabled(this.annotationFontSizeElement)&&(this.annotationFontSizeElement.className+=this.disableClass),this.annotationTextAlignElement&&!this.isEnabled(this.annotationTextAlignElement)&&(this.annotationTextAlignElement.className+=this.disableClass),this.annotationTextPropertiesElement&&!this.isEnabled(this.annotationTextPropertiesElement)&&(this.annotationTextPropertiesElement.className+=this.disableClass),this.annotationStrokeColorElement&&!this.isEnabled(this.annotationStrokeColorElement)&&(this.annotationStrokeColorElement.className+=this.disableClass),this.annotationThicknessElement&&!this.isEnabled(this.annotationThicknessElement)&&(this.annotationThicknessElement.className+=this.disableClass)},e.prototype.enableAnnotationPropertiesTool=function(e,t){t&&(e?(this.annotationColorElement&&"Perimeter"!==this.pdfViewer.selectedItems.annotations[0].measureType&&this.annotationColorElement.classList.remove(this.cssClass),this.annotationStrokeColorElement&&this.annotationStrokeColorElement.classList.remove(this.cssClass),this.annotationThicknessElement&&this.annotationThicknessElement.classList.remove(this.cssClass),this.annotationOpacityElement&&this.annotationOpacityElement.classList.remove(this.cssClass),this.pdfViewer.enableShapeLabel&&(this.annotationFontColorElement&&this.annotationFontColorElement.classList.remove(this.cssClass),this.annotationFontFamilyElement&&this.annotationFontFamilyElement.classList.remove(this.cssClass),this.annotationFontSizeElement&&this.annotationFontSizeElement.classList.remove(this.cssClass)),this.annotationTextAlignElement&&!this.isEnabled(this.annotationTextAlignElement)&&(this.annotationTextAlignElement.className+=this.disableClass),this.annotationTextPropertiesElement&&!this.isEnabled(this.annotationTextPropertiesElement)&&(this.annotationTextPropertiesElement.className+=this.disableClass)):(this.annotationColorElement&&!this.isEnabled(this.annotationColorElement)&&(this.annotationColorElement.className+=this.disableClass),this.annotationStrokeColorElement&&!this.isEnabled(this.annotationStrokeColorElement)&&(this.annotationStrokeColorElement.className+=this.disableClass),this.annotationThicknessElement&&!this.isEnabled(this.annotationThicknessElement)&&(this.annotationThicknessElement.className+=this.disableClass),this.annotationOpacityElement&&!this.isEnabled(this.annotationOpacityElement)&&(this.annotationOpacityElement.className+=this.disableClass),this.annotationDeleteElement&&!this.isEnabled(this.annotationDeleteElement)&&(this.annotationDeleteElement.className+=this.disableClass)))},e.prototype.enableFreeTextAnnotationPropertiesTools=function(e,t){t&&e&&(this.annotationColorElement&&this.annotationColorElement.classList.remove(this.cssClass),this.annotationStrokeColorElement&&this.annotationStrokeColorElement.classList.remove(this.cssClass),this.annotationThicknessElement&&this.annotationThicknessElement.classList.remove(this.cssClass),this.annotationOpacityElement&&this.annotationOpacityElement.classList.remove(this.cssClass),this.annotationFontColorElement&&this.annotationFontColorElement.classList.remove(this.cssClass),this.annotationFontFamilyElement&&this.annotationFontFamilyElement.classList.remove(this.cssClass),this.annotationFontSizeElement&&this.annotationFontSizeElement.classList.remove(this.cssClass),this.annotationTextAlignElement&&this.annotationTextAlignElement.classList.remove(this.cssClass),this.annotationTextPropertiesElement&&this.annotationTextPropertiesElement.classList.remove(this.cssClass),this.annotationDeleteElement&&this.annotationDeleteElement.classList.remove(this.cssClass),this.annotationCommentPanelElement&&this.annotationCommentPanelElement.classList.remove(this.cssClass))},e.prototype.enableStampAnnotationPropertiesTools=function(e,t){e?(this.annotationOpacityElement&&this.annotationOpacityElement.classList.remove(this.cssClass),this.annotationDeleteElement&&this.annotationDeleteElement.classList.remove(this.cssClass),this.annotationCommentPanelElement&&this.annotationCommentPanelElement.classList.remove(this.cssClass)):(this.annotationOpacityElement&&!this.isEnabled(this.annotationOpacityElement)&&(this.annotationOpacityElement.className+=this.disableClass),this.annotationDeleteElement&&!this.isEnabled(this.annotationDeleteElement)&&(this.annotationDeleteElement.className+=this.disableClass),this.annotationCommentPanelElement&&!this.isEnabled(this.annotationCommentPanelElement)&&(this.annotationCommentPanelElement.className+=this.disableClass)),this.annotationColorElement&&!this.isEnabled(this.annotationColorElement)&&(this.annotationColorElement.className+=this.disableClass),this.annotationStrokeColorElement&&!this.isEnabled(this.annotationStrokeColorElement)&&(this.annotationStrokeColorElement.className+=this.disableClass),this.annotationThicknessElement&&!this.isEnabled(this.annotationThicknessElement)&&(this.annotationThicknessElement.className+=this.disableClass),this.annotationOpacityElement&&!this.isEnabled(this.annotationOpacityElement)&&(this.annotationOpacityElement.className+=this.disableClass),this.annotationFontColorElement&&!this.isEnabled(this.annotationFontColorElement)&&(this.annotationFontColorElement.className+=this.disableClass),this.annotationFontFamilyElement&&!this.isEnabled(this.annotationFontFamilyElement)&&(this.annotationFontFamilyElement.className+=this.disableClass),this.annotationFontSizeElement&&!this.isEnabled(this.annotationFontSizeElement)&&(this.annotationFontSizeElement.className+=this.disableClass),this.annotationTextAlignElement&&!this.isEnabled(this.annotationTextAlignElement)&&(this.annotationTextAlignElement.className+=this.disableClass),this.annotationTextPropertiesElement&&!this.isEnabled(this.annotationTextPropertiesElement)&&(this.annotationTextPropertiesElement.className+=this.disableClass)},e.prototype.enableSignaturePropertiesTools=function(e,t){e?(this.annotationStrokeColorElement&&this.annotationStrokeColorElement.classList.remove(this.cssClass),this.annotationThicknessElement&&this.annotationThicknessElement.classList.remove(this.cssClass),this.annotationOpacityElement&&this.annotationOpacityElement.classList.remove(this.cssClass),this.annotationDeleteElement&&this.annotationDeleteElement.classList.remove(this.cssClass),this.annotationCommentPanelElement&&this.annotationCommentPanelElement.classList.remove(this.cssClass)):(this.annotationStrokeColorElement&&!this.isEnabled(this.annotationStrokeColorElement)&&(this.annotationStrokeColorElement.className+=this.disableClass),this.annotationThicknessElement&&!this.isEnabled(this.annotationThicknessElement)&&(this.annotationThicknessElement.className+=this.disableClass),this.annotationOpacityElement&&!this.isEnabled(this.annotationOpacityElement)&&(this.annotationOpacityElement.className+=this.disableClass),this.annotationDeleteElement&&!this.isEnabled(this.annotationDeleteElement)&&(this.annotationDeleteElement.className+=this.disableClass),this.annotationCommentPanelElement&&!this.isEnabled(this.annotationCommentPanelElement)&&(this.annotationCommentPanelElement.className+=this.disableClass)),this.annotationColorElement&&!this.isEnabled(this.annotationColorElement)&&(this.annotationColorElement.className+=this.disableClass),this.annotationFontColorElement&&!this.isEnabled(this.annotationFontColorElement)&&(this.annotationFontColorElement.className+=this.disableClass),this.annotationFontFamilyElement&&!this.isEnabled(this.annotationFontFamilyElement)&&(this.annotationFontFamilyElement.className+=this.disableClass),this.annotationFontSizeElement&&!this.isEnabled(this.annotationFontSizeElement)&&(this.annotationFontSizeElement.className+=this.disableClass),this.annotationTextAlignElement&&!this.isEnabled(this.annotationTextAlignElement)&&(this.annotationTextAlignElement.className+=this.disableClass),this.annotationTextPropertiesElement&&!this.isEnabled(this.annotationTextPropertiesElement)&&(this.annotationTextPropertiesElement.className+=this.disableClass)},e.prototype.annotationAdd=function(){this.annotationColorElement&&!this.isEnabled(this.annotationColorElement)&&(this.annotationColorElement.className+=this.disableClass),this.annotationStrokeColorElement&&!this.isEnabled(this.annotationStrokeColorElement)&&(this.annotationStrokeColorElement.className+=this.disableClass),this.annotationThicknessElement&&!this.isEnabled(this.annotationThicknessElement)&&(this.annotationThicknessElement.className+=this.disableClass),this.annotationOpacityElement&&!this.isEnabled(this.annotationOpacityElement)&&(this.annotationOpacityElement.className+=this.disableClass),this.annotationFontColorElement&&!this.isEnabled(this.annotationFontColorElement)&&(this.annotationFontColorElement.className+=this.disableClass),this.annotationFontFamilyElement&&!this.isEnabled(this.annotationFontFamilyElement)&&(this.annotationFontFamilyElement.className+=this.disableClass),this.annotationFontSizeElement&&!this.isEnabled(this.annotationFontSizeElement)&&(this.annotationFontSizeElement.className+=this.disableClass),this.annotationTextAlignElement&&!this.isEnabled(this.annotationTextAlignElement)&&(this.annotationTextAlignElement.className+=this.disableClass),this.annotationTextPropertiesElement&&!this.isEnabled(this.annotationTextPropertiesElement)&&(this.annotationTextPropertiesElement.className+=this.disableClass)},e.prototype.annotationUnSelect=function(){this.annotationColorElement&&!this.isEnabled(this.annotationColorElement)&&(this.annotationColorElement.className+=this.disableClass),this.annotationStrokeColorElement&&!this.isEnabled(this.annotationStrokeColorElement)&&(this.annotationStrokeColorElement.className+=this.disableClass),this.annotationThicknessElement&&!this.isEnabled(this.annotationThicknessElement)&&(this.annotationThicknessElement.className+=this.disableClass),this.annotationOpacityElement&&!this.isEnabled(this.annotationOpacityElement)&&(this.annotationOpacityElement.className+=this.disableClass),this.annotationFontColorElement&&!this.isEnabled(this.annotationFontColorElement)&&(this.annotationFontColorElement.className+=this.disableClass),this.annotationFontFamilyElement&&!this.isEnabled(this.annotationFontFamilyElement)&&(this.annotationFontFamilyElement.className+=this.disableClass),this.annotationFontSizeElement&&!this.isEnabled(this.annotationFontSizeElement)&&(this.annotationFontSizeElement.className+=this.disableClass),this.annotationTextAlignElement&&!this.isEnabled(this.annotationTextAlignElement)&&(this.annotationTextAlignElement.className+=this.disableClass),this.annotationTextPropertiesElement&&!this.isEnabled(this.annotationTextPropertiesElement)&&(this.annotationTextPropertiesElement.className+=this.disableClass),this.annotationDeleteElement&&!this.isEnabled(this.annotationDeleteElement)&&(this.annotationDeleteElement.className+=this.disableClass)},e.prototype.annotationSelect=function(e){"FreeText"===e&&(this.annotationColorElement&&this.annotationColorElement.classList.remove(this.cssClass),this.annotationStrokeColorElement&&this.annotationStrokeColorElement.classList.remove(this.cssClass),this.annotationThicknessElement&&this.annotationThicknessElement.classList.remove(this.cssClass),this.annotationOpacityElement&&this.annotationOpacityElement.classList.remove(this.cssClass),this.annotationFontColorElement&&this.annotationFontColorElement.classList.remove(this.cssClass),this.annotationFontFamilyElement&&this.annotationFontFamilyElement.classList.remove(this.cssClass),this.annotationFontSizeElement&&this.annotationFontSizeElement.classList.remove(this.cssClass),this.annotationTextAlignElement&&this.annotationTextAlignElement.classList.remove(this.cssClass),this.annotationTextPropertiesElement&&this.annotationTextPropertiesElement.classList.remove(this.cssClass)),"Shape"!==e&&"Measure"!==e||(this.annotationColorElement&&"Perimeter"!==this.pdfViewer.selectedItems.annotations[0].measureType&&this.annotationColorElement.classList.remove(this.cssClass),this.annotationStrokeColorElement&&this.annotationStrokeColorElement.classList.remove(this.cssClass),this.annotationThicknessElement&&this.annotationThicknessElement.classList.remove(this.cssClass),this.annotationOpacityElement&&this.annotationOpacityElement.classList.remove(this.cssClass),this.annotationFontColorElement&&!this.isEnabled(this.annotationFontColorElement)&&(this.annotationFontColorElement.className+=this.disableClass),this.annotationFontFamilyElement&&!this.isEnabled(this.annotationFontFamilyElement)&&(this.annotationFontFamilyElement.className+=this.disableClass),this.annotationFontSizeElement&&!this.isEnabled(this.annotationFontSizeElement)&&(this.annotationFontSizeElement.className+=this.disableClass),this.annotationTextAlignElement&&!this.isEnabled(this.annotationTextAlignElement)&&(this.annotationTextAlignElement.className+=this.disableClass),this.annotationTextPropertiesElement&&!this.isEnabled(this.annotationTextPropertiesElement)&&(this.annotationTextPropertiesElement.className+=this.disableClass)),"TextMarkup"===e&&(this.annotationColorElement&&this.annotationColorElement.classList.remove(this.cssClass),this.annotationStrokeColorElement&&!this.isEnabled(this.annotationStrokeColorElement)&&(this.annotationStrokeColorElement.className+=this.disableClass),this.annotationThicknessElement&&!this.isEnabled(this.annotationThicknessElement)&&(this.annotationThicknessElement.className+=this.disableClass),this.annotationOpacityElement&&this.annotationOpacityElement.classList.remove(this.cssClass),this.annotationFontColorElement&&!this.isEnabled(this.annotationFontColorElement)&&(this.annotationFontColorElement.className+=this.disableClass),this.annotationFontFamilyElement&&!this.isEnabled(this.annotationFontFamilyElement)&&(this.annotationFontFamilyElement.className+=this.disableClass),this.annotationFontSizeElement&&!this.isEnabled(this.annotationFontSizeElement)&&(this.annotationFontSizeElement.className+=this.disableClass),this.annotationTextAlignElement&&!this.isEnabled(this.annotationTextAlignElement)&&(this.annotationTextAlignElement.className+=this.disableClass),this.annotationTextPropertiesElement&&!this.isEnabled(this.annotationTextPropertiesElement)&&(this.annotationTextPropertiesElement.className+=this.disableClass)),this.annotationDeleteElement&&this.annotationDeleteElement.classList.remove(this.cssClass),this.annotationCommentPanelElement&&this.annotationCommentPanelElement.classList.remove(this.cssClass)},e.prototype.updateFontFamilyInIcon=function(e){this.annotationFontFamilyInputElement&&(this.annotationFontFamilyInputElement.value=e)},e.prototype.updateFontSizeInIcon=function(e){var t=e.toString()+"px";this.annotationFontSizeInputElement&&(this.annotationFontSizeInputElement.value=t)},e.prototype.enableSearchItems=function(e){e&&this.mobileSearchPreviousOccurenceElement&&this.mobileSearchNextOccurenceElement?(this.mobileSearchPreviousOccurenceElement.classList.remove(this.cssClass),this.mobileSearchNextOccurenceElement.classList.remove(this.cssClass)):(this.mobileSearchPreviousOccurenceElement&&!this.isEnabled(this.mobileSearchPreviousOccurenceElement)&&(this.mobileSearchPreviousOccurenceElement.className+=this.disableClass),this.mobileSearchNextOccurenceElement&&!this.isEnabled(this.mobileSearchNextOccurenceElement)&&(this.mobileSearchNextOccurenceElement.className+=this.disableClass))},e.prototype.tapOnMobileDevice=function(e){null!=this.mobileToolbarContainerElement&&(this.mobileToolbarContainerElement.style.display=e?"none":"block")},e.prototype.isEnabled=function(e){return!e||e.classList.contains(this.cssClass)},e}(),ve=function(e,t,i,n){return new(i||(i=Promise))((function(o,a){function s(e){try{l(n.next(e))}catch(e){a(e)}}function r(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){e.done?o(e.value):new i((function(t){t(e.value)})).then(s,r)}l((n=n.apply(e,t||[])).next())}))},be=function(e,t){var i,n,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function r(a){return function(r){return function(a){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],n=0}finally{i=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,r])}}},Ve=function(){function e(e){var t=this;this.pageSize=[],this.pageCount=0,this.isReRenderRequired=!0,this.currentPageNumber=0,this.activeElements=new We,this.mouseDownEvent=null,this.isDocumentLoaded=!1,this.renderedPagesList=[],this.pageGap=8,this.signatureAdded=!1,this.isFreeTextSelected=!1,this.pageLeft=5,this.sessionLimit=1e3,this.pageStopValue=300,this.toolbarHeight=56,this.pageLimit=0,this.previousPage=0,this.isViewerMouseDown=!1,this.isViewerMouseWheel=!1,this.scrollPosition=0,this.sessionStorage=[],this.isLoadedFormFieldAdded=!1,this.pointerCount=0,this.pointersForTouch=[],this.isPasswordAvailable=!1,this.passwordData="",this.reRenderedCount=0,this.mouseX=0,this.mouseY=0,this.mouseLeft=0,this.mouseTop=0,this.touchClientX=0,this.touchClientY=0,this.previousTime=0,this.currentTime=0,this.isTouchScrolled=!1,this.isLongTouchPropagated=!1,this.longTouchTimer=null,this.isViewerContainerDoubleClick=!1,this.dblClickTimer=null,this.pinchZoomStorage=[],this.isTextSelectionDisabled=!1,this.isPanMode=!1,this.dragX=0,this.dragY=0,this.isScrollbarMouseDown=!1,this.scrollX=0,this.scrollY=0,this.ispageMoved=!1,this.isThumb=!1,this.isTapHidden=!1,this.singleTapTimer=null,this.tapCount=0,this.inputTapCount=0,this.isInitialLoaded=!1,this.annotationPageList=[],this.importPageList=[],this.isImportAction=!1,this.isImportedAnnotation=!1,this.isAnnotationCollectionRemoved=!1,this.tool=null,this.action="Select",this.eventArgs=null,this.inAction=!1,this.isMouseDown=!1,this.isStampMouseDown=!1,this.stampAdded=!1,this.customStampCount=0,this.isDynamicStamp=!1,this.isMixedSizeDocument=!1,this.highestWidth=0,this.highestHeight=0,this.customStampCollection=[],this.isAlreadyAdded=!1,this.isWebkitMobile=!1,this.isFreeTextContextMenu=!1,this.isSelection=!1,this.isAddAnnotation=!1,this.annotationComments=null,this.isToolbarSignClicked=!1,this.signatureCount=0,this.isSignatureAdded=!1,this.isNewSignatureAdded=!1,this.isInitialPageMode=!1,this.documentAnnotationCollections=null,this.annotationRenderredList=[],this.annotationStorage={},this.formFieldStorage={},this.isStorageExceed=!1,this.isNewStamp=!1,this.downloadCollections={},this.isAnnotationAdded=!1,this.annotationEvent=null,this.isAnnotationDrawn=!1,this.isAnnotationSelect=!1,this.isAnnotationMouseDown=!1,this.isAnnotationMouseMove=!1,this.validateForm=!1,this.isMinimumZoom=!1,this.documentLoaded=!1,this.tileRenderCount=0,this.tileRequestCount=0,this.isTileImageRendered=!1,this.isDataExits=!1,this.requestLists=[],this.tilerequestLists=[],this.isInkAdded=!1,this.inkCount=0,this.isAddedSignClicked=!1,this.imageCount=0,this.isMousedOver=!1,this.isFormFieldSelect=!1,this.isFormFieldMouseDown=!1,this.isFormFieldMouseMove=!1,this.isFormFieldMousedOver=!1,this.isPassword=!1,this.digitalSignaturePages=[],this.isDrawnCompletely=!1,this.isAddComment=!1,this.drawSignatureWithTool=!1,this.formFieldCollection=[],this.nonFillableFields={},this.isInitialField=!1,this.isTouchDesignerMode=!1,this.isPrint=!1,this.isPDFViewerJson=!1,this.isJsonImported=!1,this.isJsonExported=!1,this.isPageRotated=!1,this.downloadFileName="",this.isFocusField=!1,this.isAnnotationPresent=!1,this.isTouchPad=!1,this.isMacGestureActive=!1,this.macGestureStartScale=0,this.zoomInterval=5,this.focusField=[],this.isDeviceiOS=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document,this.isMacSafari=navigator.userAgent.indexOf("Safari")>-1&&-1===navigator.userAgent.indexOf("Chrome")&&!this.isDeviceiOS,this.lastInputMethod=null,this.clearSessionStorage=function(){var e="";e=sf.base.Browser.isIE||"edge"===sf.base.Browser.info.name?decodeURI(window.sessionStorage.getItem("hashId")):window.sessionStorage.getItem("hashId");var i=window.sessionStorage.getItem("documentLiveCount");if(null!==e){var n={hashId:e,documentLiveCount:i,action:"Unload",elementId:t.pdfViewer.dataId},o=window.sessionStorage.getItem("unload");t.clearCache(o,n,t)}window.sessionStorage.removeItem(t.documentId+"_annotations_textMarkup"),window.sessionStorage.removeItem(t.documentId+"_annotations_shape"),window.sessionStorage.removeItem(t.documentId+"_annotations_shape_measure"),window.sessionStorage.removeItem(t.documentId+"_annotations_stamp"),window.sessionStorage.removeItem(t.documentId+"_annotations_sticky"),window.sessionStorage.removeItem(t.documentId+"_annotations_freetext"),window.sessionStorage.removeItem(t.documentId+"_formfields"),window.sessionStorage.removeItem(t.documentId+"_annotations_sign"),window.sessionStorage.removeItem(t.documentId+"_pagedata"),window.sessionStorage.removeItem("hashId"),window.sessionStorage.removeItem("documentLiveCount"),window.sessionStorage.removeItem("currentDocument"),window.sessionStorage.removeItem("serviceURL"),window.sessionStorage.removeItem("unload")},this.onWindowResize=function(e){var i=null;i=t,t.pdfViewer.enableRtl?(i.viewerContainer.style.right=(i.navigationPane.sideBarToolbar?i.navigationPane.getViewerContainerLeft():0)+"px",i.viewerContainer.style.left=(i.navigationPane.commentPanelContainer?i.navigationPane.commentPanelContainer.offsetWidth:0)+"px"):(i.viewerContainer.style.left=(i.navigationPane.sideBarToolbar?i.navigationPane.getViewerContainerLeft():0)+"px",i.viewerContainer.style.right=(i.navigationPane.commentPanelContainer?i.navigationPane.commentPanelContainer.offsetWidth:0)+"px");var n=(i.pdfViewer.element.clientWidth>0?i.pdfViewer.element.clientWidth:i.pdfViewer.element.style.width)-(i.navigationPane.sideBarToolbar?i.navigationPane.getViewerContainerLeft():0)-(i.navigationPane.commentPanelContainer?i.navigationPane.getViewerContainerRight():0);if(i.viewerContainer.style.width=n+"px",i.pdfViewer.toolbarModule){var o=i.pdfViewer.element.querySelector(".e-pv-toolbar"),a=0;o&&(a=o.getBoundingClientRect().height);var s=i.pdfViewer.element.querySelector(".e-pv-annotation-toolbar");if(s){var r;r=s.getBoundingClientRect().height,i.viewerContainer.style.height=i.updatePageHeight(i.pdfViewer.element.getBoundingClientRect().height,a+r)}else i.viewerContainer.style.height=i.updatePageHeight(i.pdfViewer.element.getBoundingClientRect().height,a)}else i.viewerContainer.style.height=i.updatePageHeight(i.pdfViewer.element.getBoundingClientRect().height,0);if(i.pdfViewer.bookmarkViewModule&&sf.base.Browser.isDevice&&!t.pdfViewer.enableDesktopMode){var l=i.getElement("_bookmarks_container");l&&(l.style.height=i.updatePageHeight(i.pdfViewer.element.getBoundingClientRect().height,0))}"0px"===i.viewerContainer.style.height&&("auto"===i.pdfViewer.height.toString()?(i.pdfViewer.height=500,i.viewerContainer.style.height=i.pdfViewer.height+"px"):i.viewerContainer.style.height=i.pdfViewer.element.style.height),"0px"===i.viewerContainer.style.width&&("auto"===i.pdfViewer.width.toString()?(i.pdfViewer.width=500,i.viewerContainer.style.width=i.pdfViewer.width+"px"):i.viewerContainer.style.width=i.pdfViewer.element.style.width),i.pageContainer.style.width=i.viewerContainer.clientWidth+"px",0===i.viewerContainer.clientWidth&&(i.pageContainer.style.width=i.pdfViewer.element.style.width),t.pdfViewer.enableToolbar&&t.pdfViewer.thumbnailViewModule&&i.pdfViewer.thumbnailViewModule.gotoThumbnailImage(i.currentPageNumber-1),!i.pdfViewer.textSearchModule||sf.base.Browser.isDevice&&!t.pdfViewer.enableDesktopMode||i.pdfViewer.textSearchModule.textSearchBoxOnResize(),0!==n&&(i.navigationPane.isBookmarkListOpen||i.updateZoomValue()),sf.base.Browser.isDevice&&!t.pdfViewer.enableDesktopMode?(i.mobileScrollerContainer.style.left=n-parseFloat(i.mobileScrollerContainer.style.width)+"px",i.mobilePageNoContainer.style.left=n/2-parseFloat(i.mobilePageNoContainer.style.width)/2+"px",i.mobilePageNoContainer.style.top=i.pdfViewer.element.clientHeight/2+"px",i.updateMobileScrollerPosition()):(i.navigationPane.setResizeIconTop(),i.navigationPane.setCommentPanelResizeIconTop(),e&&"resize"===e.type&&i.signatureModule.updateCanvasSize()),i.navigationPane.sideBarToolbar&&(i.navigationPane.sideBarToolbar.style.height=i.viewerContainer.style.height)},this.viewerContainerOnMousedown=function(e){t.isFreeTextContextMenu=!1;var i=!1;if(t.isSelection=!0,t.pdfViewer.blazorAction&=~Y.AnnotationAdding,0===e.button&&!t.getPopupNoteVisibleStatus()&&!t.isClickedOnScrollBar(e,!1)){t.isViewerMouseDown=!0;var n=e.target;1===e.detail&&"e-pdfviewer-formFields"!==n.className&&"free-text-input"!==n.className&&(i=!0,t.focusViewerContainer(!0)),t.scrollPosition=t.viewerContainer.scrollTop/t.getZoomFactor(),t.mouseX=e.clientX,t.mouseY=e.clientY,t.mouseLeft=e.clientX,t.mouseTop=e.clientY;var o=!!document.documentMode;!t.pdfViewer.textSelectionModule||t.isClickedOnScrollBar(e,!0)||t.isTextSelectionDisabled||(o||"e-pdfviewer-formFields"===n.className||"e-pdfviewer-ListBox"===n.className||"e-pv-formfield-dropdown"===n.className||"e-pv-formfield-listbox"===n.className||e.preventDefault(),"e-pv-droplet"!==n.className&&t.pdfViewer.textSelectionModule.clearTextSelection())}t.isClickedOnScrollBar(e,!1)&&(t.isViewerMouseDown=!0),t.isPanMode&&(t.dragX=e.pageX,t.dragY=e.pageY,t.viewerContainer.contains(e.target)&&e.target!==t.viewerContainer&&e.target!==t.pageContainer&&t.isPanMode&&(t.viewerContainer.style.cursor="grabbing")),t.isShapeBasedAnnotationsEnabled()&&t.diagramMouseDown(e),t.pdfViewer.annotation&&t.pdfViewer.annotation.stickyNotesAnnotationModule.accordionContainer&&(i||(t.pdfViewer.annotationModule.stickyNotesAnnotationModule.isEditableElement=!1,t.updateCommentPanel(),i=!0)),t.mouseDownHandler(e)},this.viewerContainerOnMouseup=function(e){if(t.pdfViewer.lastAnnotation&&isNaN(t.pdfViewer.lastAnnotation.wrapper.offsetX)&&isNaN(t.pdfViewer.lastAnnotation.wrapper.offsetY)&&isNaN(t.pdfViewer.lastAnnotation.wrapper.bounds.height)&&isNaN(t.pdfViewer.lastAnnotation.wrapper.bounds.width)&&t.pdfViewer.remove(t.pdfViewer.lastAnnotation),t.pdfViewer.lastAnnotation=null,!t.getPopupNoteVisibleStatus()){t.isViewerMouseDown&&(t.scrollHoldTimer&&(clearTimeout(t.scrollHoldTimer),t.scrollHoldTimer=null),t.scrollPosition*t.getZoomFactor()!==t.viewerContainer.scrollTop&&t.pageViewScrollChanged(t.currentPageNumber));var i=!1;e.target&&("e-pv-show-designer-name"==e.target.className&&""!=e.target.id.split("_",1)&&(i=document.getElementById(e.target.id.split("_",1)).disabled),"foreign-object"==e.target.className&&e.target.children[0]&&(i=e.target.children[0].disabled)),i&&t.pdfViewer.annotation&&t.pdfViewer.annotation.clearSelection(),t.isShapeBasedAnnotationsEnabled()&&!i&&(t.diagramMouseUp(e),t.pdfViewer.annotation&&t.pdfViewer.annotation.onAnnotationMouseUp()),t.isSelection=!1;var n=document.getElementById(t.pdfViewer.dataId+"_commantPanel");if(n&&"block"===n.style.display&&t.pdfViewer.selectedItems&&0!==t.pdfViewer.selectedItems.annotations.length){var o=document.getElementById(t.pdfViewer.selectedItems.annotations[0].annotName);o&&(o.classList.contains("e-pv-comments-border")||o.firstElementChild&&o.firstElementChild.click())}if(0===e.button&&!t.isClickedOnScrollBar(e,!1)){var a=e.target,s=e.clientX,r=e.clientY,l=t.getZoomFactor(),d=t.currentPageNumber;if(a){var h=a.id.split("_text_")[1]||a.id.split("_textLayer_")[1]||a.id.split("_annotationCanvas_")[1]||a.id.split("_pageDiv_")[1];d=parseInt(h)}var p=t.getElement("_pageDiv_"+d);if(p){var c=p.getBoundingClientRect();s=(e.clientX-c.left)/l,r=(e.clientY-c.top)/l}a&&a.classList&&!a.classList.contains("e-pv-hyperlink")&&!a.classList.contains("e-pv-page-container")&&(t.pdfViewer.firePageClick(s,r,d+1),t.pdfViewer.formFieldsModule&&t.pdfViewer.formFieldsModule.removeFocus()),t.isTextMarkupAnnotationModule()&&!t.isToolbarInkClicked&&t.pdfViewer.annotationModule.textMarkupAnnotationModule.onTextMarkupAnnotationMouseUp(e),t.viewerContainer.contains(e.target)&&e.target!==t.viewerContainer&&e.target!==t.pageContainer&&t.isPanMode&&(t.viewerContainer.style.cursor="move",t.viewerContainer.style.cursor="-webkit-grab",t.viewerContainer.style.cursor="-moz-grab",t.viewerContainer.style.cursor="grab")}t.isViewerMouseDown=!1}},this.detectTouchPad=function(e){t.isTouchPad=e.wheelDeltaY?e.wheelDeltaY===-3*e.deltaY||Math.abs(e.deltaY)<60:0===e.deltaMode},this.handleMacGestureStart=function(e){e.preventDefault(),e.stopPropagation(),t.macGestureStartScale=t.pdfViewer.magnification.zoomFactor},this.handleMacGestureChange=function(e){e.preventDefault(),e.stopPropagation();var i=e.clientX,n=e.clientY,o=Number((t.macGestureStartScale*e.scale).toFixed(2));t.isMacGestureActive||(t.isMacGestureActive=!0,t.pdfViewer.magnification.initiateMouseZoom(i,n,100*o),setTimeout((function(){t.isMacGestureActive=!1}),70))},this.handleMacGestureEnd=function(e){e.preventDefault(),e.stopPropagation()},this.viewerContainerOnMouseWheel=function(e){if(t.isViewerMouseWheel=!0,t.getRerenderCanvasCreated()&&e.preventDefault(),e.ctrlKey){var i=25;t.pdfViewer.magnification.zoomFactor<1&&(i=10),t.pdfViewer.magnification.zoomFactor>=2&&(i=50),t.isTouchPad&&!t.isMacSafari&&(i/=t.zoomInterval),e.wheelDelta>0?t.pdfViewer.magnification.initiateMouseZoom(e.x,e.y,100*t.pdfViewer.magnification.zoomFactor+i):t.pdfViewer.magnification.initiateMouseZoom(e.x,e.y,100*t.pdfViewer.magnification.zoomFactor-i),t.isTouchPad=!1}t.pdfViewer.magnificationModule&&(t.pdfViewer.magnificationModule.pageRerenderOnMouseWheel(),e.ctrlKey&&e.preventDefault(),t.pdfViewer.magnificationModule.fitPageScrollMouseWheel(e)),t.pdfViewer.textSelectionModule&&!t.isTextSelectionDisabled&&t.isViewerMouseDown&&(e.target.classList.contains("e-pv-text")||t.pdfViewer.textSelectionModule.textSelectionOnMouseWheel(t.currentPageNumber-1))},this.onWindowKeyDown=function(e){var i=e.target.classList;sf.base.isNullOrUndefined(i)||["e-pv-viewer-container","e-enable-text-selection","e-pdfviewer-formFields","e-pdfviewer-signatureformfields-signature"].some((function(e){return i.contains(e)}))||!t.pdfViewer.enableToolbar||(t.previousShiftTabElement=document.activeElement);var n=!!!!navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i)&&e.metaKey;if(!(t.isFreeTextAnnotationModule()&&t.pdfViewer.annotationModule&&(!0===t.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus||!0===t.pdfViewer.annotationModule.inputElementModule.isInFocus)||e.ctrlKey&&n))switch(e.keyCode){case 27:t.pdfViewer.toolbar&&(t.pdfViewer.toolbar.addInkAnnotation(),t.pdfViewer.toolbar.deSelectCommentAnnotation(),t.pdfViewer.toolbar.updateStampItems(),t.pdfViewer.toolbar.annotationToolbarModule&&t.pdfViewer.toolbar.annotationToolbarModule.deselectAllItemsInBlazor(),t.pdfViewer.tool="",t.focusViewerContainer());break;case 9:if(e.target&&e.target.id&&t.pdfViewer.formFieldCollections){var o=void 0,a=void 0,s=e.target;if((s=e.target).id.split("_input")[0],"e-pdfviewer-formFields"!==s.className&&"e-pv-viewer-container e-enable-text-selection"===s.className){if((o=e.shiftKey&&"Tab"===e.key?(a=t.pdfViewer.formFieldCollections.findIndex((function(e){return e.id===s.id})))>0?t.pdfViewer.formFieldCollections[a-1]:t.previousShiftTabElement:(a=t.pdfViewer.formFieldCollections.findIndex((function(e){return e.id===s.id})))+1<t.pdfViewer.formFieldCollections.length?t.pdfViewer.formFieldCollections[a+1]:t.pdfViewer.formFieldCollections[0])&&o===t.previousShiftTabElement){var r=document.getElementById(o.id);r&&r.focus()}else o||(o=t.pdfViewer.formFieldCollections[t.pdfViewer.formFieldCollections.length-1]),t.pdfViewer.focusFormField(o);e.preventDefault()}}if(e.target&&e.target.id&&t.pdfViewer.formFields)for(var l=0;l<t.pdfViewer.formFields.length;l++){var d=t.pdfViewer.formFields[parseInt(l.toString(),10)];if(e.target.id===d.id){var h={value:d.value,fontFamily:d.fontFamily,fontSize:d.fontSize,fontStyle:d.fontStyle,color:d.color,backgroundColor:d.backgroundColor,alignment:d.alignment,isReadonly:d.isReadonly,visibility:d.visibility,maxLength:d.maxLength,isRequired:d.isRequired,isPrint:d.isPrint,rotation:d.rotateAngle,tooltip:d.tooltip,options:d.options,isChecked:d.isChecked,isSelected:d.isSelected};t.pdfViewer.fireFocusOutFormField(h,d.pageIndex)}}}},this.viewerContainerOnKeyDown=function(e){var i=!!navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i),n=!!i&&e.metaKey;if(!t.isFreeTextAnnotationModule()||!t.pdfViewer.annotationModule||!0!==t.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus&&!0!==t.pdfViewer.annotationModule.inputElementModule.isInFocus){var o=document.activeElement,a=!0;if("INPUT"!==o.tagName&&"TEXTAREA"!==o.tagName||(a=!1),e.ctrlKey||n){if(e.shiftKey&&!i||i&&!e.shiftKey)switch(e.keyCode){case 38:case 33:e.preventDefault(),1!==t.currentPageNumber&&t.updateScrollTop(0);break;case 40:case 34:e.preventDefault(),t.currentPageNumber!==t.pageCount&&t.updateScrollTop(t.pageCount-1)}switch(e.keyCode){case 79:t.pdfViewer.toolbarModule&&t.pdfViewer.enableToolbar&&t.pdfViewer.toolbarModule.openFileDialogBox(e);break;case 67:t.pdfViewer.textSelectionModule&&t.pdfViewer.enableTextSelection&&!t.isTextSelectionDisabled&&a&&(e.preventDefault(),t.pdfViewer.textSelectionModule.copyText()),(t.pdfViewer.selectedItems.annotations.length||t.pdfViewer.selectedItems.formFields.length)&&(t.pdfViewer.copy(),t.contextMenuModule.previousAction="Copy");break;case 70:t.pdfViewer.textSearchModule&&t.pdfViewer.enableTextSearch&&(e.preventDefault(),t.pdfViewer.toolbarModule.textSearchButtonHandler());break;case 80:t.pdfViewer.printModule&&t.pdfViewer.enablePrint&&(e.preventDefault(),t.pdfViewer.print.print());break;case 90:t.pdfViewer.annotationModule&&t.pdfViewer.annotationModule.undo();break;case 88:(t.pdfViewer.selectedItems.annotations.length||t.pdfViewer.selectedItems.formFields.length)&&(t.pdfViewer.cut(),t.contextMenuModule.previousAction="Cut");break;case 89:t.pdfViewer.annotationModule&&t.pdfViewer.annotationModule.redo();break;case 86:t.pdfViewer.annotation&&t.pdfViewer.annotation.isShapeCopied&&a&&(t.pdfViewer.paste(),t.contextMenuModule.previousAction="Paste")}}else switch(e.keyCode){case 46:var s=document.activeElement;"e-pdfviewer-formFields"==e.target.className||"INPUT"===s.tagName||"TEXTAREA"===s.tagName||s.isContentEditable||t.DeleteKeyPressed(e)}t.pdfViewer.magnificationModule&&t.pdfViewer.magnificationModule.magnifyBehaviorKeyDown(e)}},this.viewerContainerOnMousemove=function(e){t.mouseX=e.clientX,t.mouseY=e.clientY;var i=!!document.documentMode,n=e.target;if("Drag"===t.action&&e.preventDefault(),t.isViewerMouseDown&&"Perimeter"!==t.action&&"Polygon"!==t.action&&"Line"!==t.action&&"DrawTool"!==t.action&&"Distance"!==t.action)if(t.pdfViewer.textSelectionModule&&t.pdfViewer.enableTextSelection&&!t.isTextSelectionDisabled&&!t.getPopupNoteVisibleStatus())if(i){var o=window.getSelection();o.type||o.isCollapsed||null===o.anchorNode||(t.pdfViewer.textSelectionModule.isTextSelection=!0)}else{"e-pdfviewer-formFields"!=e.target.className&&e.preventDefault(),t.mouseX=e.clientX,t.mouseY=e.clientY;var a=t.pdfViewer.annotationModule;a&&a.textMarkupAnnotationModule&&a.textMarkupAnnotationModule.isDropletClicked&&a.textMarkupAnnotationModule.isEnableTextMarkupResizer(a.textMarkupAnnotationModule.currentTextMarkupAddMode)?a.textMarkupAnnotationModule.textSelect(e.target,t.mouseX,t.mouseY):t.pdfViewer.textSelectionModule.textSelectionOnMouseMove(e.target,t.mouseX,t.mouseY)}else t.skipPreventDefault(n)&&e.preventDefault();if(t.isTextMarkupAnnotationModule()&&!t.getPopupNoteVisibleStatus()&&t.pdfViewer.annotationModule.textMarkupAnnotationModule.onTextMarkupAnnotationMouseMove(e),t.isPanMode&&t.panOnMouseMove(e),t.isShapeBasedAnnotationsEnabled()){var s=void 0;if(e.target&&(e.target.id.indexOf("_text")>-1||e.target.parentElement.classList.contains("foreign-object")||e.target.id.indexOf("_annotationCanvas")>-1||e.target.classList.contains("e-pv-hyperlink")||e.target.classList.contains("e-pdfviewer-formFields")||e.target.classList.contains("e-pdfviewer-signatureformfields"))&&t.pdfViewer.annotation){var r=t.pdfViewer.annotation.getEventPageNumber(e),l=document.getElementById(t.pdfViewer.dataId+"_annotationCanvas_"+r);if(l){var d=l.getBoundingClientRect(),h=d.x?d.x:d.left,p=d.y?d.y:d.top;s=t.pdfViewer.annotationModule.stampAnnotationModule.currentStampAnnotation&&"Image"===t.pdfViewer.annotationModule.stampAnnotationModule.currentStampAnnotation.shapeAnnotationType?new sf.drawings.Rect(h,p,d.width-10,d.height-10):new sf.drawings.Rect(h+10,p+10,d.width-10,d.height-10)}}var c=t.pdfViewer.annotationModule?t.pdfViewer.annotationModule.stampAnnotationModule:null;!s||!s.containsPoint({x:t.mouseX,y:t.mouseY})||c&&c.isStampAnnotSelected?(t.diagramMouseLeave(e),t.isAnnotationDrawn&&"Ink"!==t.action&&"DrawTool"!==t.action&&(t.diagramMouseUp(e),t.isAnnotationAdded=!0)):(t.diagramMouseMove(e),t.annotationEvent=e),t.pdfViewer.enableStampAnnotations&&c&&c.isStampAnnotSelected&&(t.pdfViewer.tool="Stamp",t.tool=new Pe(t.pdfViewer,t),t.isMouseDown=!0,c.isStampAnnotSelected=!1,c.isNewStampAnnot=!0),t.isSignatureAdded&&t.pdfViewer.enableHandwrittenSignature&&(t.pdfViewer.tool="Stamp",t.tool=new Pe(t.pdfViewer,t),t.isMouseDown=!0,t.isSignatureAdded=!1,t.isNewSignatureAdded=!0)}},this.panOnMouseMove=function(e){var i=!1;if("Ink"!==t.action&&"Line"!==t.action&&"Perimeter"!==t.action&&"Polygon"!==t.action&&"DrawTool"!==t.action&&"Drag"!==t.action&&-1===t.action.indexOf("Rotate")&&-1===t.action.indexOf("Resize")||(i=!0),t.viewerContainer.contains(e.target)&&e.target!==t.viewerContainer&&e.target!==t.pageContainer&&!i)if(t.isViewerMouseDown){var n=t.dragX-e.pageX,o=t.dragY-e.pageY;t.viewerContainer.scrollTop=t.viewerContainer.scrollTop+o,t.viewerContainer.scrollLeft=t.viewerContainer.scrollLeft+n,t.viewerContainer.style.cursor="move",t.viewerContainer.style.cursor="-webkit-grabbing",t.viewerContainer.style.cursor="-moz-grabbing",t.viewerContainer.style.cursor="grabbing",t.dragX=e.pageX,t.dragY=e.pageY}else t.navigationPane.isNavigationPaneResized||(t.viewerContainer.style.cursor="move",t.viewerContainer.style.cursor="-webkit-grab",t.viewerContainer.style.cursor="-moz-grab",t.viewerContainer.style.cursor="grab");else t.navigationPane.isNavigationPaneResized||(t.viewerContainer.style.cursor="auto")},this.viewerContainerOnMouseLeave=function(e){t.isViewerMouseDown&&t.pdfViewer.textSelectionModule&&!t.isTextSelectionDisabled&&t.pdfViewer.textSelectionModule.textSelectionOnMouseLeave(e),t.pdfViewer.textSelectionModule&&t.pdfViewer.textSelectionModule.isTextSelection&&e.preventDefault()},this.viewerContainerOnMouseEnter=function(e){t.pdfViewer.textSelectionModule&&!t.isTextSelectionDisabled&&t.pdfViewer.textSelectionModule.clear()},this.viewerContainerOnMouseOver=function(e){var i=!!document.documentMode;t.isViewerMouseDown&&(i||e.preventDefault())},this.viewerContainerOnClick=function(e){if("dblclick"===e.type){if(!t.pdfViewer.textSelectionModule||t.isTextSelectionDisabled||t.getCurrentTextMarkupAnnotation())t.getCurrentTextMarkupAnnotation();else if(e.target.classList.contains("e-pv-text")){if(t.isViewerContainerDoubleClick=!0,!t.getTextMarkupAnnotationMode()){var i=parseFloat(e.target.id.split("_")[2]);t.pdfViewer.fireTextSelectionStart(i+1)}t.pdfViewer.textSelectionModule.selectAWord(e.target,e.clientX,e.clientY,!1),"MouseUp"===t.pdfViewer.contextMenuSettings.contextMenuAction&&t.pdfViewer.textSelectionModule.calculateContextMenuPosition(e.clientY,e.clientX),t.getTextMarkupAnnotationMode()?t.isTextMarkupAnnotationModule()&&t.getTextMarkupAnnotationMode()&&t.pdfViewer.annotationModule.textMarkupAnnotationModule.drawTextMarkupAnnotations(t.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode):(t.pdfViewer.textSelectionModule.maintainSelectionOnZoom(!0,!1),t.dblClickTimer=setTimeout((function(){t.applySelection()}),100),t.pdfViewer.textSelectionModule.fireTextSelectEnd())}if(t.action&&("Perimeter"===t.action||"Polygon"===t.action)&&t.tool){t.eventArgs.position=t.currentPosition,t.getMouseEventArgs(t.currentPosition,t.eventArgs,e,t.eventArgs.source);t.isMetaKey(e);var n={ctrlKey:e.ctrlKey,shiftKey:e.shiftKey};t.eventArgs.info=n,t.eventArgs.clickCount=e.detail,t.tool.mouseUp(t.eventArgs,!0)}if(t.pdfViewer.selectedItems||t.pdfViewer.annotation&&t.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation)if(0!==t.pdfViewer.selectedItems.annotations.length){var o=t.pdfViewer.selectedItems.annotations[0];if(t.pdfViewer.annotationModule&&!o.formFieldAnnotationType)if(t.pdfViewer.annotationModule.annotationSelect(o.annotName,o.pageIndex,o,null,!0),!1===t.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus)if(!0===t.isFreeTextAnnotation(t.pdfViewer.selectedItems.annotations))(a={}).x=t.pdfViewer.selectedItems.annotations[0].bounds.x,a.y=t.pdfViewer.selectedItems.annotations[0].bounds.y,t.pdfViewer.annotation.freeTextAnnotationModule.addInuptElemet(a,t.pdfViewer.selectedItems.annotations[0],null,!0);else if(!0===t.pdfViewer.selectedItems.annotations[0].enableShapeLabel){var a;(a={}).x=t.pdfViewer.selectedItems.annotations[0].bounds.x,a.y=t.pdfViewer.selectedItems.annotations[0].bounds.y,t.pdfViewer.annotation.inputElementModule.editLabel(a,t.pdfViewer.selectedItems.annotations[0])}else{var s=document.getElementById(t.pdfViewer.selectedItems.annotations[0].annotName);s&&(s.classList.contains("e-pv-comments-border")||t.pdfViewer.annotationModule.showCommentsPanelInBlazor())}}else if(t.pdfViewer.annotation&&t.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation){var r=t.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation,l=document.getElementById(r.annotName);l&&l.firstElementChild&&l.firstElementChild.click(),t.pdfViewer.annotationModule.annotationSelect(r.annotName,t.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage,r,null,!0)}}else 3===e.detail&&(t.isViewerContainerDoubleClick&&(clearTimeout(t.dblClickTimer),t.isViewerContainerDoubleClick=!1),!t.pdfViewer.textSelectionModule||t.isTextSelectionDisabled||t.getTextMarkupAnnotationMode()||(t.pdfViewer.textSelectionModule.selectEntireLine(e),t.pdfViewer.textSelectionModule.maintainSelectionOnZoom(!0,!1),t.pdfViewer.textSelectionModule.fireTextSelectEnd(),t.applySelection()))},this.viewerContainerOnDragStart=function(e){!!document.documentMode||e.preventDefault()},this.viewerContainerOnContextMenuClick=function(e){t.isViewerMouseDown=!1},this.onWindowMouseUp=function(e){t.isFreeTextContextMenu=!1,t.isNewStamp=!1,t.signatureAdded=!1;var i=t.pdfViewer.annotationModule;if(i&&i.textMarkupAnnotationModule&&i.textMarkupAnnotationModule.isEnableTextMarkupResizer(i.textMarkupAnnotationModule.currentTextMarkupAddMode)){var n=i.textMarkupAnnotationModule;n.isLeftDropletClicked=!1,n.isDropletClicked=!1,n.isRightDropletClicked=!1,n.currentTextMarkupAnnotation||null!==window.getSelection().anchorNode?n.currentTextMarkupAnnotation||""!==n.currentTextMarkupAddMode||(n.isTextMarkupAnnotationMode=!1):n.showHideDropletDiv(!0)}if(!t.getPopupNoteVisibleStatus()){if(0===e.button){if(t.isNewFreeTextAnnotation())if(!t.pdfViewer.textSelectionModule||t.isTextSelectionDisabled||t.getTextMarkupAnnotationMode()){if(t.getTextMarkupAnnotationMode()){var o=t.pdfViewer.element,a=e.target;o&&a&&i&&o.id.split("_")[0]===a.id.split("_")[0]&&t.pdfViewer.annotationModule.textMarkupAnnotationModule.drawTextMarkupAnnotations(t.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode)}}else{1!==e.detail||t.viewerContainer.contains(e.target)||t.contextMenuModule.contextMenuElement.contains(e.target)||null!==window.getSelection().anchorNode&&t.pdfViewer.textSelectionModule.textSelectionOnMouseup(e);var s=e.target;t.viewerContainer.contains(e.target)&&"e-pdfviewer-formFields"!==s.className&&(t.isClickedOnScrollBar(e,!0)||t.isScrollbarMouseDown?null!==window.getSelection().anchorNode&&t.pdfViewer.textSelectionModule.applySpanForSelection():t.pdfViewer.textSelectionModule.textSelectionOnMouseup(e))}}else 2===e.button&&t.viewerContainer.contains(e.target)&&t.skipPreventDefault(e.target)&&t.checkIsNormalText()&&window.getSelection().removeAllRanges();if(i){var r=i.actionCollection.length-1;i.actionCollection[r-1]&&i.actionCollection[r-1].annotation&&"FreeText"===i.actionCollection[r-1].annotation.shapeAnnotationType&&t.pdfViewer.annotationModule.textMarkupAnnotationModule.isTextMarkupAnnotationMode&&(t.pdfViewer.drawingObject=new p)}return!t.isViewerMouseDown||(t.isViewerMouseDown=!1,t.pdfViewer.textSelectionModule&&!t.isTextSelectionDisabled&&(t.pdfViewer.textSelectionModule.clear(),t.pdfViewer.textSelectionModule.selectionStartPage=null),e.preventDefault(),e.stopPropagation(),!1)}},this.onWindowTouchEnd=function(e){t.signatureAdded=!1,t.pdfViewer.element.contains(e.target)||t.contextMenuModule.contextMenuElement.contains(e.target)||t.pdfViewer.textSelectionModule&&!t.isTextSelectionDisabled&&t.pdfViewer.textSelectionModule.clearTextSelection()},this.viewerContainerOnTouchStart=function(e){var i=e.touches;t.pdfViewer.magnificationModule&&t.pdfViewer.magnificationModule.setTouchPoints(i[0].clientX,i[0].clientY);var n=e.target;(1===i.length&&!n.classList.contains("e-pv-hyperlink")&&t.skipPreventDefault(n)&&t.preventTouchEvent(e),1===e.touches.length&&t.isTextMarkupAnnotationModule()&&!t.getPopupNoteVisibleStatus()&&(t.isToolbarInkClicked||t.pdfViewer.annotationModule.textMarkupAnnotationModule.onTextMarkupAnnotationTouchEnd(e)),t.touchClientX=i[0].clientX,t.touchClientY=i[0].clientY,t.scrollY=i[0].clientY,t.previousTime=(new Date).getTime(),1!==i.length||e.target.classList.contains("e-pv-touch-select-drop")||e.target.classList.contains("e-pv-touch-ellipse"))||(sf.base.Browser.isDevice&&!t.pdfViewer.enableDesktopMode&&t.pageCount>0&&!t.isThumb&&!e.target.classList.contains("e-pv-hyperlink")&&t.handleTaps(i,e),sf.base.Browser.isDevice&&!t.pdfViewer.enableDesktopMode||t.handleTextBoxTaps(i),t.isDesignerMode(n)?(t.contextMenuModule.close(),t.isLongTouchPropagated||(t.longTouchTimer=setTimeout((function(){t.isTouchDesignerMode=!0,t.contextMenuModule.open(t.touchClientY,t.touchClientX,t.viewerContainer)}),1e3)),t.isLongTouchPropagated=!0):t.pdfViewer.textSelectionModule&&!t.isTextSelectionDisabled&&(t.pdfViewer.textSelectionModule.clearTextSelection(),t.contextMenuModule.close(),t.isLongTouchPropagated||(t.longTouchTimer=setTimeout((function(){t.viewerContainerOnLongTouch(e)}),1e3)),t.isLongTouchPropagated=!0));var o=t.pdfViewer.toolbarModule?t.pdfViewer.toolbarModule.annotationToolbarModule:"null";!n.classList.contains("e-pv-text")||o&&o.textMarkupToolbarElement&&0!==o.textMarkupToolbarElement.children.length||n.classList.add("e-pv-text-selection-none"),t.diagramMouseDown(e),"Perimeter"!==t.action&&"Polygon"!==t.action&&"DrawTool"!==t.action&&"Drag"!==t.action&&-1===t.action.indexOf("Rotate")&&-1===t.action.indexOf("Resize")||e.preventDefault()},this.viewerContainerOnLongTouch=function(e){if(t.touchClientX=e.touches[0].clientX,t.touchClientY=e.touches[0].clientY,e.cancelable&&e.preventDefault(),t.pdfViewer.textSelectionModule){var i=e.target;i.classList.contains("e-pv-text-selection-none")&&i.classList.remove("e-pv-text-selection-none"),t.pdfViewer.textSelectionModule.initiateTouchSelection(e,t.touchClientX,t.touchClientY),sf.base.Browser.isDevice&&!t.pdfViewer.enableDesktopMode&&(clearTimeout(t.singleTapTimer),t.tapCount=0)}},this.viewerContainerOnPointerDown=function(e){"touch"===e.pointerType&&(t.pointerCount++,t.pointerCount<=2&&(e.preventDefault(),t.pointersForTouch.push(e),2===t.pointerCount&&(t.pointerCount=0),t.pdfViewer.magnificationModule&&t.pdfViewer.magnificationModule.setTouchPoints(e.clientX,e.clientY)))},this.viewerContainerOnTouchMove=function(e){sf.base.Browser.isDevice&&!t.pdfViewer.enableDesktopMode&&(clearTimeout(t.singleTapTimer),t.singleTapTimer=null,t.tapCount=0),t.preventTouchEvent(e),t.isToolbarInkClicked&&e.preventDefault();var i,n=e.touches;if(t.pdfViewer.magnificationModule&&(t.isTouchScrolled=!0,n.length>1&&t.pageCount>0?(sf.base.Browser.isDevice&&!t.pdfViewer.enableDesktopMode&&(t.isTouchScrolled=!1),t.pdfViewer.enablePinchZoom&&t.pdfViewer.magnificationModule.initiatePinchMove(n[0].clientX,n[0].clientY,n[1].clientX,n[1].clientY)):1===n.length&&t.getPagesPinchZoomed()&&(sf.base.Browser.isDevice&&!t.pdfViewer.enableDesktopMode&&(t.isTouchScrolled=!1),t.pdfViewer.magnificationModule.pinchMoveScroll())),t.mouseX=n[0].clientX,t.mouseY=n[0].clientY,e.target&&(e.target.id.indexOf("_text")>-1||e.target.id.indexOf("_annotationCanvas")>-1||e.target.classList.contains("e-pv-hyperlink"))&&t.pdfViewer.annotation){var o=t.pdfViewer.annotation.getEventPageNumber(e),a=document.getElementById(t.pdfViewer.dataId+"_annotationCanvas_"+o);if(a){var s=a.getBoundingClientRect(),r=s.x?s.x:s.left,l=s.y?s.y:s.top;i=new sf.drawings.Rect(r+10,l+10,s.width-10,s.height-10)}}i&&i.containsPoint({x:t.mouseX,y:t.mouseY})?(t.diagramMouseMove(e),t.annotationEvent=e):(t.diagramMouseLeave(e),t.isAnnotationDrawn&&(t.diagramMouseUp(e),t.isAnnotationAdded=!0)),n=null},this.viewerContainerOnPointerMove=function(e){if("touch"===e.pointerType&&t.pageCount>0&&(e.preventDefault(),2===t.pointersForTouch.length)){for(var i=0;i<t.pointersForTouch.length;i++)if(e.pointerId===t.pointersForTouch[i].pointerId){t.pointersForTouch[i]=e;break}t.pdfViewer.magnificationModule&&t.pdfViewer.enablePinchZoom&&t.pdfViewer.magnificationModule.initiatePinchMove(t.pointersForTouch[0].clientX,t.pointersForTouch[0].clientY,t.pointersForTouch[1].clientX,t.pointersForTouch[1].clientY)}},this.viewerContainerOnTouchEnd=function(e){if(t.pdfViewer.magnificationModule&&t.pdfViewer.magnificationModule.pinchMoveEnd(),e.cancelable&&!e.target.classList.contains("e-pv-touch-ellipse")&&t.pdfViewer.textSelectionModule&&t.pdfViewer.textSelectionModule.isTextSelection&&e.preventDefault(),t.isLongTouchPropagated=!1,clearInterval(t.longTouchTimer),t.longTouchTimer=null,sf.base.Browser.isDevice&&!t.pdfViewer.enableDesktopMode&&t.isTouchScrolled){t.currentTime=(new Date).getTime();var i=t.currentTime-t.previousTime,n=t.scrollY-e.changedTouches[0].pageY,o=n/i;if(Math.abs(o)>1.5){var a=n+i*o;t.viewerContainer.scrollTop+=a,t.updateMobileScrollerPosition()}}t.diagramMouseUp(e),t.renderStampAnnotation(e)},this.viewerContainerOnPointerEnd=function(e){"touch"===e.pointerType&&(e.preventDefault(),t.pdfViewer.magnificationModule&&t.pdfViewer.magnificationModule.pinchMoveEnd(),t.pointersForTouch=[],t.pointerCount=0)},this.viewerContainerOnScroll=function(e){var i=null,n=(i=t).pdfViewer.allowServerDataBinding;i.pdfViewer.enableServerDataBinding(!1);var o=0,a=0;if(e.touches&&sf.base.Browser.isDevice&&!t.pdfViewer.enableDesktopMode){var s=(t.viewerContainer.scrollHeight-t.viewerContainer.clientHeight)/(t.viewerContainer.clientHeight-t.toolbarHeight);if(t.isThumb){t.ispageMoved=!0,e.preventDefault(),t.mobilePageNoContainer.style.display="block",o=e.touches[0].pageX-t.scrollX,a=e.touches[0].pageY-t.viewerContainer.offsetTop,t.viewerContainer.scrollTop=a*s;var r=e.touches[0].pageY,l=t.pdfViewer.toolbarModule?0:50;0!==t.viewerContainer.scrollTop&&r<=t.viewerContainer.clientHeight-l&&(t.mobileScrollerContainer.style.top=r+"px")}else"e-pv-touch-ellipse"!==e.touches[0].target.className&&(t.isWebkitMobile&&sf.base.Browser.isDevice&&!t.pdfViewer.enableDesktopMode||(t.mobilePageNoContainer.style.display="none",a=t.touchClientY-e.touches[0].pageY,o=t.touchClientX-e.touches[0].pageX,t.viewerContainer.scrollTop=t.viewerContainer.scrollTop+a,t.viewerContainer.scrollLeft=t.viewerContainer.scrollLeft+o),t.updateMobileScrollerPosition(),t.touchClientY=e.touches[0].pageY,t.touchClientX=e.touches[0].pageX)}t.scrollHoldTimer&&clearTimeout(t.scrollHoldTimer);var d=t.currentPageNumber;t.scrollHoldTimer=null,t.contextMenuModule.close();for(var h=t.viewerContainer.scrollTop,p=0;p<t.pageCount;p++)if(null!=t.pageSize[p]){var c=t.getPageHeight(p);if(t.pageStopValue=c<150?75:c>=150&&c<300?125:c>=300&&c<500?200:300,h+t.pageStopValue<=t.getPageTop(p)+c){t.currentPageNumber=p+1,t.pdfViewer.currentPageNumber=p+1,t.pdfViewer.updatePdfViewerOptions("CurrentPageNumber",t.pdfViewer.currentPageNumber);break}}t.pdfViewer.magnificationModule&&"fitToPage"===t.pdfViewer.magnificationModule.fitType&&t.currentPageNumber>0&&t.pageSize[t.currentPageNumber-1]&&(t.viewerContainer.scrollTop=t.pageSize[t.currentPageNumber-1].top*t.getZoomFactor()),t.renderElementsVirtualScroll(t.currentPageNumber),(t.isViewerMouseDown||t.getPinchZoomed()||t.getPinchScrolled()||t.getPagesPinchZoomed())&&!t.isViewerMouseWheel?t.showPageLoadingIndicator(t.currentPageNumber-1,!1):(t.pageViewScrollChanged(t.currentPageNumber),t.isViewerMouseWheel=!1),t.pdfViewer.toolbarModule&&t.viewerContainer.setAttribute("aria-labelledby",t.pdfViewer.dataId+"_pageDiv_"+(t.currentPageNumber-1)),sf.base.Browser.isDevice&&!t.pdfViewer.enableDesktopMode&&(t.mobileSpanContainer.innerHTML=t.currentPageNumber.toString(),t.mobilecurrentPageContainer.innerHTML=t.currentPageNumber.toString()),d!==t.currentPageNumber&&(!i.pdfViewer.thumbnailViewModule||sf.base.Browser.isDevice&&!t.pdfViewer.enableDesktopMode||(i.pdfViewer.thumbnailViewModule.gotoThumbnailImage(i.currentPageNumber-1),i.pdfViewer.thumbnailViewModule.isThumbnailClicked=!1),t.pdfViewer.firePageChange(d)),t.pdfViewer.magnificationModule&&t.pdfViewer.magnificationModule.updatePagesForFitPage(t.currentPageNumber-1);var u=t.getElement("_pageDiv_"+(t.currentPageNumber-1));if(u&&(u.style.visibility="visible"),t.isViewerMouseDown)if(t.getRerenderCanvasCreated()&&!t.isPanMode&&t.pdfViewer.magnificationModule.clearIntervalTimer(),t.getStoredData(t.currentPageNumber))t.isDataExits=!0,t.initiatePageViewScrollChanged(),t.isDataExits=!1;else{var f=t.pdfViewer.scrollSettings.delayPageRequestTimeOnScroll?t.pdfViewer.scrollSettings.delayPageRequestTimeOnScroll:100;t.scrollHoldTimer=setTimeout((function(){t.initiatePageViewScrollChanged()}),f)}t.pdfViewer.annotation&&t.navigationPane.commentPanelContainer&&t.pdfViewer.annotation.stickyNotesAnnotationModule.updateCommentPanelScrollTop(t.currentPageNumber),sf.base.Browser.isDevice&&!t.pdfViewer.enableDesktopMode&&e.touches&&"e-pv-touch-ellipse"!==e.touches[0].target.className&&setTimeout((function(){t.updateMobileScrollerPosition()}),500),i.pdfViewer.enableServerDataBinding(n,!0)},this.pdfViewer=e,this.navigationPane=new Q(this.pdfViewer,this),this.textLayer=new Ae(this.pdfViewer,this),this.signatureModule=new Ce(this.pdfViewer,this),this.isWebkitMobile=/Chrome/.test(navigator.userAgent)||/Google Inc/.test(navigator.vendor)||-1!==navigator.userAgent.indexOf("Safari")}return e.prototype.initializeComponent=function(){var e=this,t=document.getElementById(this.pdfViewer.dataId);if(t){this.blazorUIAdaptor=new Se(this.pdfViewer,this),sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&this.pdfViewer.element.classList.add("e-pv-mobile-view");var i=void 0;if(this.viewerMainContainer=t.querySelector(".e-pv-viewer-main-container"),this.viewerContainer=t.querySelector(".e-pv-viewer-container"),this.viewerContainer.addEventListener("focus",this.tabElementOnFocus.bind(this)),document.addEventListener("keydown",(function(t){"Tab"==t.key&&(e.lastInputMethod="Tab")})),document.addEventListener("mousedown",(function(t){e.lastInputMethod=null})),sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&this.createMobilePageNumberContainer(),this.viewerContainer.tabIndex=0,this.pdfViewer.enableRtl&&(this.viewerContainer.style.direction="rtl"),t.style.touchAction="pan-x pan-y",this.setMaximumHeight(t),this.mainContainer=t.querySelector(".e-pv-main-container"),this.mainContainer.appendChild(this.viewerMainContainer),t.appendChild(this.mainContainer),this.applyViewerHeight(this.mainContainer),this.pdfViewer.toolbarModule?(this.navigationPane.initializeNavigationPane(),i=this.pdfViewer.toolbarModule.intializeToolbar("100%")):(this.navigationPane.initializeNavigationPane(),i=this.pdfViewer.element.querySelector(".e-pv-toolbar"),this.pdfViewer.enableToolbar||(this.toolbarHeight=0,i.style.display="none"),!this.pdfViewer.enableNavigationToolbar&&(sf.base.Browser.isDevice&&this.pdfViewer.enableDesktopMode||!sf.base.Browser.isDevice)&&(this.navigationPane.sideBarToolbar.style.display="none",this.navigationPane.sideBarToolbarSplitter.style.display="none",(this.navigationPane.isBookmarkOpen||this.navigationPane.isThumbnailOpen)&&this.navigationPane.updateViewerContainerOnClose())),i){var n=i.clientHeight;this.viewerContainer.style.height=this.updatePageHeight(this.pdfViewer.element.getBoundingClientRect().height,n)}else this.viewerContainer.style.height=this.updatePageHeight(this.pdfViewer.element.getBoundingClientRect().height,0);var o=this.pdfViewer.element.clientWidth;sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode||(o=o-(this.navigationPane.sideBarToolbar?this.navigationPane.getViewerContainerLeft():0)-(this.navigationPane.commentPanelContainer?this.navigationPane.getViewerContainerRight():0)),this.viewerContainer.style.width=o+"px",this.viewerMainContainer.appendChild(this.viewerContainer),sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&(this.mobileScrollerContainer.style.left=o-parseFloat(this.mobileScrollerContainer.style.width)+"px",this.mobilePageNoContainer.style.left=o/2-parseFloat(this.mobilePageNoContainer.style.width)/2+"px",this.mobilePageNoContainer.style.top=this.pdfViewer.element.clientHeight/2+"px",this.mobilePageNoContainer.style.display="none",this.mobilePageNoContainer.appendChild(this.mobilecurrentPageContainer),this.mobilePageNoContainer.appendChild(this.mobilenumberContainer),this.mobilePageNoContainer.appendChild(this.mobiletotalPageContainer),this.viewerContainer.appendChild(this.mobilePageNoContainer),this.viewerMainContainer.appendChild(this.mobileScrollerContainer),this.mobileScrollerContainer.appendChild(this.mobileSpanContainer)),this.pageContainer=sf.base.createElement("div",{id:this.pdfViewer.dataId+"_pageViewContainer",className:"e-pv-page-container",attrs:{tabindex:"0","aria-label":"pdfviewer Page View",role:"document"}}),this.pdfViewer.enableRtl&&(this.pageContainer.style.direction="ltr"),this.viewerContainer.appendChild(this.pageContainer),this.pageContainer.style.width=this.viewerContainer.clientWidth+"px",i&&this.pdfViewer.thumbnailViewModule&&(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode)&&this.pdfViewer.thumbnailViewModule.createThumbnailContainer(),this.createPrintPopup();var a=sf.base.createElement("div",{id:this.pdfViewer.dataId+"_loadingIndicator"});this.viewerContainer.appendChild(a),ie({target:a,cssClass:"e-spin-center"}),this.setLoaderProperties(a),this.contextMenuModule=new ee(this.pdfViewer,this);var s=document.getElementsByClassName(this.pdfViewer.dataId+"_spinner");s&&s[0]&&!s[0].classList.contains("e-spin-hide")&&(s[0].classList.remove("e-spin-show"),s[0].classList.add("e-spin-hide")),this.contextMenuModule.createContextMenu(),this.createFileInputElement(),this.wireEvents(),!this.pdfViewer.textSearchModule||sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode||this.pdfViewer.textSearchModule.createTextSearchBox(),this.pdfViewer.documentPath&&(this.pdfViewer.viewerBase.showLoadingIndicator(!0),this.pdfViewer._dotnetInstance.invokeMethodAsync("LoadDocumentFromClient",this.pdfViewer.documentPath)),this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.initializeCollection()}},e.prototype.tabElementOnFocus=function(e){if("Tab"===this.lastInputMethod){if(this.pdfViewer.formFieldCollections&&this.pdfViewer.formFieldCollections.length>0){var t=this.pdfViewer.formFieldCollections[0],i=document.getElementById(t.id);i&&i.focus()}this.lastInputMethod=null}},e.prototype.createMobilePageNumberContainer=function(){this.mobilePageNoContainer=sf.base.createElement("div",{id:this.pdfViewer.dataId+"_mobilepagenoContainer",className:"e-pv-mobilepagenoscroll-container"}),this.mobilecurrentPageContainer=sf.base.createElement("span",{id:this.pdfViewer.dataId+"_mobilecurrentpageContainer",className:"e-pv-mobilecurrentpage-container"}),this.mobilenumberContainer=sf.base.createElement("span",{id:this.pdfViewer.dataId+"_mobiledashedlineContainer",className:"e-pv-mobiledashedline-container"}),this.mobiletotalPageContainer=sf.base.createElement("span",{id:this.pdfViewer.dataId+"_mobiletotalpageContainer",className:"e-pv-mobiletotalpage-container"}),this.mobileScrollerContainer=sf.base.createElement("div",{id:this.pdfViewer.dataId+"_mobilescrollContainer",className:"e-pv-mobilescroll-container"}),this.mobileSpanContainer=sf.base.createElement("span",{id:this.pdfViewer.dataId+"_mobilespanContainer",className:"e-pv-mobilespanscroll-container"}),this.mobileSpanContainer.innerHTML="1",this.mobilecurrentPageContainer.innerHTML="1",this.mobilenumberContainer.innerHTML="&#x2015;&#x2015;&#x2015;&#x2015;&#x2015;",this.mobileScrollerContainer.style.cssFloat="right",this.mobileScrollerContainer.style.width="40px",this.mobileScrollerContainer.style.height="32px",this.mobileScrollerContainer.style.zIndex="100",this.mobilePageNoContainer.style.width="120px",this.mobilePageNoContainer.style.height="100px",this.mobilePageNoContainer.style.zIndex="100",this.mobilePageNoContainer.style.position="fixed",this.mobileScrollerContainer.addEventListener("touchstart",this.mobileScrollContainerDown.bind(this),{passive:!0}),this.mobileScrollerContainer.addEventListener("touchend",this.mobileScrollContainerEnd.bind(this)),this.mobileScrollerContainer.style.display="none"},e.prototype.initiatePageRender=function(e,t){this.loadedData=e,this.documentId=this.createGUID(),this.viewerContainer&&(this.viewerContainer.scrollTop=0),this.showLoadingIndicator(!0),this.hashId=" ",this.isFileName=!1,this.saveDocumentInfo(),"Pan"===this.pdfViewer.interactionMode&&this.initiatePanning(),e=this.checkDocumentData(e),this.setFileName(),this.pdfViewer.downloadFileName?this.downloadFileName=this.pdfViewer.downloadFileName:this.downloadFileName=this.pdfViewer.fileName;var i=this.constructJsonObject(e,t);this.createAjaxRequest(i,e,t)},e.prototype.initiateLoadDocument=function(e,t,i){e&&(this.documentId=e),this.viewerContainer&&(this.viewerContainer.scrollTop=0),this.showLoadingIndicator(!0),this.hashId=" ",this.isFileName=t,this.saveDocumentInfo(),"Pan"===this.pdfViewer.interactionMode&&this.initiatePanning(),this.setFileName(),null===this.pdfViewer.fileName&&(t&&i?(this.pdfViewer.fileName=i,this.jsonDocumentId=this.pdfViewer.fileName):(this.pdfViewer.fileName="undefined.pdf",this.jsonDocumentId=null)),this.pdfViewer.downloadFileName?this.downloadFileName=this.pdfViewer.downloadFileName:this.downloadFileName=this.pdfViewer.fileName},e.prototype.loadSuccess=function(e,t){var n=e;if(n){if("object"!==i(n))try{n=JSON.parse(n)}catch(e){this.onControlError(500,n,this.pdfViewer.serverActionSettings.load),n=null}if(n){for(;"object"!==i(n);)if(n=JSON.parse(n),"number"==typeof parseInt(n)&&!isNaN(parseInt(n))){n=parseInt(n);break}n.StatusText&&"File Does not Exist"===n.StatusText&&this.showLoadingIndicator(!1),(n.uniqueId===this.documentId||"number"==typeof parseInt(n)&&!isNaN(parseInt(n)))&&(this.updateFormFieldName(n),this.pdfViewer.fireAjaxRequestSuccess(this.pdfViewer.serverActionSettings.load,n),this.requestSuccess(n,null,t))}}},e.prototype.updateFormFieldName=function(e){if(e&&e.PdfRenderedFormFields&&e.PdfRenderedFormFields.length>0)for(var t=void 0,i=0;i<e.PdfRenderedFormFields.length;i++)(t=e.PdfRenderedFormFields[i])&&t.ActualFieldName&&(t.FieldName=t.ActualFieldName)},e.prototype.mobileScrollContainerDown=function(e){if(this.ispageMoved=!1,this.isThumb=!0,this.isTextMarkupAnnotationModule()&&null!=this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage&&sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){var t=this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage;this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage=null,this.pdfViewer.annotationModule.textMarkupAnnotationModule.clearAnnotationSelection(t),this.pdfViewer.toolbar.showToolbar(!0)}this.mobileScrollerContainer.addEventListener("touchmove",this.viewerContainerOnScroll.bind(this),!0)},e.prototype.relativePosition=function(e){var t=this.viewerContainer.getBoundingClientRect();return{x:e.clientX-t.left,y:e.clientY-t.top}},e.prototype.setMaximumHeight=function(e){var t=e.getBoundingClientRect();(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode||t&&0===t.height)&&(e.style.minHeight="500px"),this.updateWidth(),this.updateHeight()},e.prototype.applyViewerHeight=function(e){var t=e.getBoundingClientRect();sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&t&&0===t.height&&(e.style.minHeight="500px")},e.prototype.updateWidth=function(){"auto"!==this.pdfViewer.width.toString()&&(this.pdfViewer.element.style.width=this.pdfViewer.width)},e.prototype.updateHeight=function(){"auto"!==this.pdfViewer.height.toString()&&(this.pdfViewer.element.style.height=this.pdfViewer.height)},e.prototype.updateViewerContainer=function(){var e=this.getElement("_sideBarContentContainer");e&&"none"===e.style.display?this.navigationPane.updateViewerContainerOnClose():e&&"block"===e.style.display?this.navigationPane.updateViewerContainerOnExpand():this.updateViewerContainerSize(),this.pdfViewer.toolbarModule&&(this.pdfViewer.enableToolbar||this.pdfViewer.enableAnnotationToolbar)&&this.pdfViewer._dotnetInstance.invokeMethodAsync("RefreshToolbarItems")},e.prototype.updateViewerContainerSize=function(){this.viewerContainer.style.width=this.pdfViewer.element.clientWidth+"px",this.pageContainer.style.width=this.viewerContainer.offsetWidth+"px",this.updateZoomValue()},e.prototype.mobileScrollContainerEnd=function(e){this.ispageMoved||this.pdfViewer._dotnetInstance.invokeMethodAsync("ShowPageDialog",null),this.isThumb=!1,this.ispageMoved=!1,this.mobileScrollerContainer.removeEventListener("touchmove",this.viewerContainerOnScroll.bind(this),!0),this.mobilePageNoContainer.style.display="none"},e.prototype.createAjaxRequest=function(e,t,n){var o;o=this,this.pdfViewer.serverActionSettings&&(this.loadRequestHandler=new xe(this.pdfViewer),this.loadRequestHandler.url=this.pdfViewer.serviceUrl+"/"+this.pdfViewer.serverActionSettings.load,this.loadRequestHandler.responseType="json",this.loadRequestHandler.mode=!0,e.action="Load",e.elementId=this.pdfViewer.dataId,this.loadRequestHandler.send(e),this.loadRequestHandler.onSuccess=function(e){var a=e.data;if(a){if("object"!==i(a))try{a=JSON.parse(a)}catch(e){o.onControlError(500,a,this.pdfViewer.serverActionSettings.load),a=null}if(a){for(;"object"!==i(a);)if(a=JSON.parse(a),"number"==typeof parseInt(a)&&!isNaN(parseInt(a))){a=parseInt(a);break}(a.uniqueId===o.documentId||"number"==typeof parseInt(a)&&!isNaN(parseInt(a)))&&(o.pdfViewer.fireAjaxRequestSuccess(this.pdfViewer.serverActionSettings.load,a),o.requestSuccess(a,t,n))}else o.showLoadingIndicator(!1)}},this.loadRequestHandler.onFailure=function(e){"4"===e.status.toString().split("")[0]?o.openNotificationPopup("Client error"):o.openNotificationPopup(),o.showLoadingIndicator(!1),o.pdfViewer.fireAjaxRequestFailed(e.status,e.statusText,o.pdfViewer.serverActionSettings.load)},this.loadRequestHandler.onError=function(e){o.openNotificationPopup(),o.showLoadingIndicator(!1),o.pdfViewer.fireAjaxRequestFailed(e.status,e.statusText,o.pdfViewer.serverActionSettings.load)})},e.prototype.openNotificationPopup=function(e){var t=this;if(this.pdfViewer.showNotificationDialog){if("Client error"===e)this.pdfViewer._dotnetInstance.invokeMethodAsync("GetLocaleText","PdfViewer_Clienterror").then((function(e){t.textLayer.createNotificationPopup(e)}));else this.pdfViewer._dotnetInstance.invokeMethodAsync("GetLocaleText","PdfViewer_Servererror").then((function(e){t.textLayer.createNotificationPopup(e)}));this.getElement("_notify")&&this.getElement("_notify").classList.add("e-pv-notification-large-content")}},e.prototype.showNotificationPopup=function(e){this.pdfViewer.showNotificationDialog||""===e||(this.textLayer.createNotificationPopup(e),this.getElement("_notify")&&this.getElement("_notify").classList.add("e-pv-notification-large-content"))},e.prototype.requestSuccess=function(e,t,i){if(e&&void 0!==e.pageCount){this.isPassword&&(this.isPassword=!1,this.isPasswordAvailable=!1,this.pdfViewer._dotnetInstance.invokeMethodAsync("ClosePasswordDialog")),i&&""!=i&&(this.passwordData=i),this.pdfViewer.allowServerDataBinding=!1,this.pageCount=e.pageCount,this.pdfViewer.pageCount=e.pageCount,this.pdfViewer.updatePdfViewerOptions("PageCount",e.pageCount),this.hashId=e.hashId,this.documentLiveCount=e.documentLiveCount,this.isAnnotationCollectionRemoved=!1,this.saveDocumentHashData(),this.saveFormfieldsData(e),this.pdfViewer.allowServerDataBinding=!0,this.digitalSignaturePages=e.digitalSignaturePages,this.pageRender(e);var n={pageCount:e.pageCount,pageSizes:e.pageSizes};if(window.sessionStorage.setItem(this.documentId+"_pagedata",JSON.stringify(n)),sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){this.mobileScrollerContainer.style.display="";var o=this.pdfViewer.toolbarModule?this.toolbarHeight:0;this.mobileScrollerContainer.style.top=o+"px"}this.restrictionList=e.RestrictionSummary,this.RestrictionEnabled(this.restrictionList,!1)}else this.pageCount=0,this.currentPageNumber=0,sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&(this.mobileScrollerContainer.style.display="none"),this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.updateToolbarItems();var a=this.pdfViewer.annotationModule;a&&a.textMarkupAnnotationModule&&a.textMarkupAnnotationModule.isEnableTextMarkupResizer(a.textMarkupAnnotationModule.currentTextMarkupAddMode)&&a.textMarkupAnnotationModule.createAnnotationSelectElement()},e.prototype.RestrictionEnabled=function(e,t){if(e)for(var i=0;i<e.length;i++)this.EnableRestriction(e[i],t),this.pdfViewer.toolbarModule&&this.pdfViewer._dotnetInstance.invokeMethodAsync("RestrictToolbarItems",e,t)},e.prototype.EnableRestriction=function(e,t){switch(e){case"Print":this.pdfViewer.enablePrint=t;break;case"CopyContent":this.pdfViewer.enableTextSelection=t;break;case"FillFields":this.pdfViewer.enableFormFields=t,this.enableFormFieldButton(t);break;case"EditAnnotations":this.pdfViewer.enableAnnotation=t}},e.prototype.pageRender=function(e){this.document=null,this.passwordPopup&&this.passwordPopup.hide();this.initPageDiv(e),this.currentPageNumber=1,this.pdfViewer.currentPageNumber=1,this.pdfViewer.updatePdfViewerOptions("CurrentPageNumber",this.pdfViewer.currentPageNumber),this.previousZoomValue=this.pdfViewer.zoomValue;var t=!1;this.pdfViewer.magnificationModule&&(this.pdfViewer.magnificationModule.isAutoZoom=!0,this.pdfViewer.zoomValue&&this.pdfViewer.zoomValue>0&&(100!==this.pdfViewer.zoomValue&&(t=!0),this.isInitialPageMode=!0,this.pdfViewer.magnification.zoomTo(this.pdfViewer.zoomValue)),"FitToWidth"===this.pdfViewer.zoomMode?(this.isInitialPageMode=!0,this.pdfViewer.magnificationModule.fitToWidth()):"FitToPage"===this.pdfViewer.zoomMode&&(this.isInitialPageMode=!0,this.pdfViewer.magnificationModule.fitToPage()),this.documentLoaded=!0,this.pdfViewer.magnificationModule.isInitialLoading=!0,this.onWindowResize(),this.documentLoaded=!1,this.pdfViewer.magnificationModule.isInitialLoading=!1),this.pdfViewer.magnificationModule&&this.pdfViewer.magnificationModule.isAutoZoom?this.pdfViewer.updatePdfViewerOptions("ZoomValue",100):this.pdfViewer.updatePdfViewerOptions("ZoomValue",this.pdfViewer.zoomValue),this.isDocumentLoaded=!0;this.pageSize[0].width;if(-1===this.renderedPagesList.indexOf(0)&&!t){this.createRequestForRender(0);var i=1;if(i<this.pageCount&&(this.createRequestForRender(i),i+=1),this.pageSize[i])for(var n=this.getPageTop(i),o=this.viewerContainer.clientHeight;o>n&&this.pageSize[i];)this.renderPageElement(i),this.createRequestForRender(i),n=this.getPageTop(i),i+=1}this.showLoadingIndicator(!1),sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&(this.mobileSpanContainer.innerHTML=this.currentPageNumber.toString(),this.mobilecurrentPageContainer.innerHTML=this.currentPageNumber.toString())},e.prototype.renderPasswordPopup=function(e,t){var i=document.getElementById(this.pdfViewer.dataId+"_prompt");this.pdfViewer._dotnetInstance.invokeMethodAsync("GetLocaleText","PdfViewer_EnterPassword").then((function(e){i.textContent=e}));var n=document.querySelector("#"+this.pdfViewer.dataId+"_password_input");(n.addEventListener("focus",(function(){n.parentElement.classList.add("e-input-focus")})),n.addEventListener("blur",(function(){n.parentElement.classList.remove("e-input-focus")})),this.isPasswordAvailable)?(this.pdfViewer.fireDocumentLoadFailed(!0,t),i.classList.add("e-pv-password-error"),this.pdfViewer._dotnetInstance.invokeMethodAsync("GetLocaleText","PdfViewer_InvalidPassword").then((function(e){i.textContent=e})),i.focus(),this.isFileName?this.document=e:this.document="data:application/pdf;base64,"+e):(this.isFileName?this.document=e:this.document="data:application/pdf;base64,"+e,this.isPasswordAvailable=!0,this.pdfViewer.fireDocumentLoadFailed(!0,null));this.pdfViewer._dotnetInstance.invokeMethodAsync("OpenPasswordDialog")},e.prototype.renderCorruptPopup=function(){this.pdfViewer.fireDocumentLoadFailed(!1,null),this.documentId=null,this.pdfViewer.showNotificationDialog&&this.pdfViewer._dotnetInstance.invokeMethodAsync("OpenCorruptedDialog")},e.prototype.constructJsonObject=function(e,t){var i;return t?(this.isPasswordAvailable=!0,this.passwordData=t,i={document:e,password:t,zoomFactor:1,isFileName:this.isFileName,uniqueId:this.documentId,showDigitalSignatureAppearance:this.pdfViewer.showDigitalSignatureAppearance}):(this.isPasswordAvailable=!1,this.passwordData="",i={document:e,zoomFactor:1,isFileName:this.isFileName,uniqueId:this.documentId,showDigitalSignatureAppearance:this.pdfViewer.showDigitalSignatureAppearance}),i},e.prototype.checkDocumentData=function(e){var t=e.split("base64,")[1];if(void 0===t){if(this.isFileName=!0,this.jsonDocumentId=e,null===this.pdfViewer.fileName){var i=-1!==e.indexOf("\\")?e.split("\\"):e.split("/");this.pdfViewer.fileName=i[i.length-1],this.jsonDocumentId=this.pdfViewer.fileName,t=e}}else this.jsonDocumentId=null;return t},e.prototype.setFileName=function(){null===this.pdfViewer.fileName&&(this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.uploadedDocumentName?(this.pdfViewer.fileName=this.pdfViewer.toolbarModule.uploadedDocumentName,this.jsonDocumentId=this.pdfViewer.fileName):(this.pdfViewer.fileName="undefined.pdf",this.jsonDocumentId=null))},e.prototype.saveDocumentInfo=function(){window.sessionStorage.setItem("currentDocument",this.documentId),window.sessionStorage.setItem("serviceURL",this.pdfViewer.serviceUrl),this.pdfViewer.serverActionSettings&&window.sessionStorage.setItem("unload",this.pdfViewer.serverActionSettings.unload)},e.prototype.saveDocumentHashData=function(){var e="";e=sf.base.Browser.isIE||"edge"===sf.base.Browser.info.name?encodeURI(this.hashId):this.hashId,window.sessionStorage.setItem("hashId",e),this.documentLiveCount&&window.sessionStorage.setItem("documentLiveCount",this.documentLiveCount.toString())},e.prototype.saveFormfieldsData=function(e){this.pdfViewer.isFormFieldDocument=!1,this.pdfViewer.updatePdfViewerOptions("IsFormFieldDocument",this.pdfViewer.isFormFieldDocument),this.enableFormFieldButton(!1),e&&e.PdfRenderedFormFields&&this.pdfViewer.formFieldsModule&&e.PdfRenderedFormFields.length>0&&(this.formfieldvalue?(this.pdfViewer.formFieldsModule&&this.setItemInSessionStorage(this.formfieldvalue,"_formfields"),this.formfieldvalue=null):this.pdfViewer.formFieldsModule&&this.setItemInSessionStorage(e.PdfRenderedFormFields,"_formfields"),this.pdfViewer.enableFormFields&&(this.pdfViewer.formFieldCollections=[],this.pdfViewer.formFieldsModule.formFieldCollections()),this.pdfViewer.formFieldCollections.length>0&&(this.pdfViewer.isFormFieldDocument=!0,this.pdfViewer.updatePdfViewerOptions("IsFormFieldDocument",this.pdfViewer.isFormFieldDocument),this.enableFormFieldButton(!0)))},e.prototype.enableFormFieldButton=function(e){e&&(this.pdfViewer.isFormFieldDocument=!0,this.pdfViewer.updatePdfViewerOptions("IsFormFieldDocument",this.pdfViewer.isFormFieldDocument)),this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.submitItem&&this.pdfViewer.toolbarModule.toolbar.enableItems(this.pdfViewer.toolbarModule.submitItem.parentElement,e)},e.prototype.updateWaitingPopup=function(e){if(null!=this.pageSize[e].top){var t=this.getElement("_pageDiv_"+e).getBoundingClientRect(),i=this.getElement("_pageDiv_"+e).firstChild.firstChild;t.top<0?this.toolbarHeight+this.viewerContainer.clientHeight/2-t.top<t.height?i.style.top=this.viewerContainer.clientHeight/2-t.top-this.toolbarHeight+"px":this.toolbarHeight+t.bottom/2-t.top<t.height&&(i.style.top=t.bottom/2-t.top-this.toolbarHeight+"px"):i.style.top=this.viewerContainer.clientHeight/2+"px",sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&t.width>this.viewerContainer.clientWidth?i.style.left=this.viewerContainer.clientWidth/2+this.viewerContainer.scrollLeft+"px":this.getZoomFactor()>1.25&&t.width>this.viewerContainer.clientWidth?i.style.left=this.viewerContainer.clientWidth/2+"px":i.style.left=t.width/2+"px"}},e.prototype.getActivePage=function(e){return this.activeElements&&!sf.base.isNullOrUndefined(this.activeElements.activePageID)?e?this.activeElements.activePageID+1:this.activeElements.activePageID:e?this.currentPageNumber:this.currentPageNumber-1},e.prototype.createWaitingPopup=function(e){var t=document.getElementById(this.pdfViewer.dataId+"_pageDiv_"+e);t&&(ie({target:t}),this.setLoaderProperties(t))},e.prototype.showLoadingIndicator=function(e){var t=this.getElement("_loadingIndicator");t&&(e?(t.style.display="block",ue(t)):(t.style.display="none",ge(t)))},e.prototype.showPageLoadingIndicator=function(e,t){var i=this.getElement("_pageDiv_"+e);null!=i&&(t?ue(i):ge(i),this.updateWaitingPopup(e))},e.prototype.showPrintLoadingIndicator=function(e){var t=this.getElement("_printLoadingIndicator");null!=t&&(e?(this.printMainContainer.style.display="block",ue(t)):(this.printMainContainer.style.display="none",ge(t)))},e.prototype.setLoaderProperties=function(e){var t=e.firstChild.firstChild.firstChild;t&&(t.style.height="48px",t.style.width="48px",t.style.transformOrigin="24px 24px 24px")},e.prototype.updateScrollTop=function(e){var t=this;null!=this.pageSize[e]&&(this.renderElementsVirtualScroll(e),this.viewerContainer.scrollTop=this.getPageTop(e),-1===this.renderedPagesList.indexOf(e)&&this.createRequestForRender(e),setTimeout((function(){var i=e+1;i!==t.currentPageNumber&&(t.pdfViewer.currentPageNumber=i,t.currentPageNumber=i,t.pdfViewer.updatePdfViewerOptions("CurrentPageNumber",t.pdfViewer.currentPageNumber),t.pdfViewer.toolbarModule&&t.pdfViewer.toolbarModule.updateCurrentPage(i))}),100))},e.prototype.getZoomFactor=function(){return this.pdfViewer.magnificationModule?this.pdfViewer.magnificationModule.zoomFactor:1},e.prototype.getPinchZoomed=function(){return!!this.pdfViewer.magnificationModule&&this.pdfViewer.magnificationModule.isPinchZoomed},e.prototype.getMagnified=function(){return!!this.pdfViewer.magnificationModule&&this.pdfViewer.magnificationModule.isMagnified},e.prototype.getPinchScrolled=function(){return!!this.pdfViewer.magnificationModule&&this.pdfViewer.magnificationModule.isPinchScrolled},e.prototype.getPagesPinchZoomed=function(){return!!this.pdfViewer.magnificationModule&&this.pdfViewer.magnificationModule.isPagePinchZoomed},e.prototype.getPagesZoomed=function(){return!!this.pdfViewer.magnificationModule&&this.pdfViewer.magnificationModule.isPagesZoomed},e.prototype.getRerenderCanvasCreated=function(){return!!this.pdfViewer.magnificationModule&&this.pdfViewer.magnificationModule.isRerenderCanvasCreated},e.prototype.getDocumentId=function(){return this.documentId},e.prototype.download=function(){this.pageCount>0&&this.createRequestForDownload()},e.prototype.saveAsBlob=function(){var e=this;return this.pageCount>0?new Promise((function(t,i){e.saveAsBlobRequest().then((function(e){t(e)}))})):null},e.prototype.saveAsBlobRequest=function(){var e,t=this;return e=this,new Promise((function(n,o){var a=e.constructJsonDownload();t.dowonloadRequestHandler=new xe(t.pdfViewer),t.dowonloadRequestHandler.url=e.pdfViewer.serviceUrl+"/"+e.pdfViewer.serverActionSettings.download,t.dowonloadRequestHandler.responseType="text",t.dowonloadRequestHandler.send(a),t.dowonloadRequestHandler.onSuccess=function(t){var o=t.data;if(o&&("object"===i(o)&&(o=JSON.parse(o)),"object"!==i(o)&&-1===o.indexOf("data:application/pdf")&&(e.onControlError(500,o,e.pdfViewer.serverActionSettings.download),o=null),o)){e.pdfViewer.fireAjaxRequestSuccess(e.pdfViewer.serverActionSettings.download,o);var a=e.createBlobUrl(o.split("base64,")[1],"application/pdf");n(a)}},t.dowonloadRequestHandler.onFailure=function(t){e.pdfViewer.fireAjaxRequestFailed(t.status,t.statusText,e.pdfViewer.serverActionSettings.download)},t.dowonloadRequestHandler.onError=function(t){e.openNotificationPopup(),e.pdfViewer.fireAjaxRequestFailed(t.status,t.statusText,e.pdfViewer.serverActionSettings.download)}}))},e.prototype.clear=function(e){var t=this.pdfViewer,i=t.printModule,n=t.textSearchModule,o=t.bookmarkViewModule,a=t.thumbnailView,s=t.annotation,r=t.magnificationModule,l=t.textSelectionModule,d=t.formFieldsModule,h=this.signatureModule;if(this.isPasswordAvailable=!1,this.isDocumentLoaded=!1,this.isInitialLoaded=!1,this.isImportAction=!1,this.annotationPageList=[],this.annotationComments&&this.pdfViewer._dotnetInstance.invokeMethodAsync("ResetCommentCollection"),this.annotationComments=null,t.annotationCollection=[],t.signatureCollection=[],t.formFieldCollection=[],this.isAnnotationCollectionRemoved=!1,this.documentAnnotationCollections=null,this.isAnnotationPresent=!1,this.isDrawnCompletely=!1,this.annotationRenderredList=[],this.isImportAction=!1,this.isImportedAnnotation=!1,this.importedAnnotation=[],this.isStorageExceed=!1,this.annotationStorage={},this.formFieldStorage={},this.downloadCollections={},this.annotationEvent=null,this.highestWidth=0,this.highestHeight=0,this.requestLists=[],this.tilerequestLists=[],this.isToolbarInkClicked=!1,t.formFieldCollections=[],this.passwordData="",this.updateDocumentEditedProperty(!1),this.initiateTextSelectMode(),this.RestrictionEnabled(this.restrictionList,!0),this.restrictionList=null,sf.base.Browser.isDevice&&!t.enableDesktopMode||this.navigationPane.sideBarToolbar&&this.navigationPane.clear(),a&&a.clear(),o&&o.clear(),r&&(r.isMagnified=!1,r.clearIntervalTimer()),l&&l.clearTextSelection(),n&&n.resetTextSearch(),s&&(s.clear(),s.initializeCollection()),d&&(d.readOnlyCollection=[],d.signatureFieldCollection=[],d.currentTarget=null),h&&(h.signaturecollection=[],h.outputcollection=[]),this.pageSize&&(this.pageSize=[]),this.renderedPagesList&&(this.renderedPagesList=[]),this.pageContainer)for(;this.pageContainer.hasChildNodes();)this.pageContainer.removeChild(this.pageContainer.lastChild);this.pageCount>0&&(this.unloadDocument(this),this.textLayer.characterBound=new Array,this.loadRequestHandler&&this.loadRequestHandler.clear(),this.virtualLoadRequestHandler&&this.virtualLoadRequestHandler.clear(),this.pageRequestHandler&&this.pageRequestHandler.clear(),this.dowonloadRequestHandler&&this.dowonloadRequestHandler.clear(),this.importAnnotationRequestHandler&&this.importAnnotationRequestHandler.clear(),this.exportAnnotationRequestHandler&&this.exportAnnotationRequestHandler.clear(),this.importFormFieldsRequestHandler&&this.importFormFieldsRequestHandler.clear(),this.exportFormFieldsRequestHandler&&this.exportFormFieldsRequestHandler.clear(),i&&i.printRequestHandler&&i.printRequestHandler.clear()),this.windowSessionStorageClear(),this.pinchZoomStorage&&(this.pinchZoomStorage=[]),!this.previousZoomValue&&0!==this.previousZoomValue||this.previousZoomValue===t.zoomValue||("Default"!==this.pdfViewer.zoomMode?(t.zoomValue=100,this.pdfViewer.updatePdfViewerOptions("ZoomValue",100)):(t.zoomValue=this.previousZoomValue,this.pdfViewer.updatePdfViewerOptions("ZoomValue",this.pdfViewer.zoomValue))),e&&this.pageCount>0&&t.fireDocumentUnload(this.pdfViewer.fileName),this.pdfViewer.fileName=null,null!==this.pdfViewer.documentPath&&void 0!==this.pdfViewer.documentPath&&(this.pdfViewer.documentPath=null)},e.prototype.destroy=function(){sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&this.pdfViewer.element.classList.remove("e-pv-mobile-view"),this.unWireEvents(),this.clear(!1),this.pageContainer.parentNode&&this.pageContainer.parentNode.removeChild(this.pageContainer),this.viewerContainer.parentNode&&this.viewerContainer.parentNode.removeChild(this.viewerContainer);var e=document.getElementById("measureElement");e&&(e=void 0)},e.prototype.unloadDocument=function(e){var t="";t=sf.base.Browser.isIE||"edge"===sf.base.Browser.info.name?decodeURI(window.sessionStorage.getItem("hashId")):window.sessionStorage.getItem("hashId");var i=window.sessionStorage.getItem("documentLiveCount");if(null!==t){var n={hashId:t,documentLiveCount:i,action:"Unload",elementId:e.pdfViewer.element.id},o=window.sessionStorage.getItem("unload");this.clearCache(o,n,e)}this.pdfViewer.magnificationModule&&(this.pdfViewer.magnificationModule.zoomFactor=1),this.formFieldCollection=[],window.sessionStorage.removeItem("hashId"),window.sessionStorage.removeItem("documentLiveCount"),this.documentId&&(window.sessionStorage.removeItem(this.documentId+"_formfields"),window.sessionStorage.removeItem(this.documentId+"_annotations_shape"),window.sessionStorage.removeItem(this.documentId+"_annotations_shape_measure"),window.sessionStorage.removeItem(this.documentId+"_annotations_stamp"),window.sessionStorage.removeItem(this.documentId+"_annotations_sticky"),window.sessionStorage.removeItem(this.documentId+"_annotations_textMarkup"),window.sessionStorage.removeItem(this.documentId+"_annotations_freetext"),window.sessionStorage.removeItem(this.documentId+"_formfields"),window.sessionStorage.removeItem(this.documentId+"_annotations_sign"),window.sessionStorage.removeItem(this.documentId+"_annotations_ink"))},e.prototype.clearCache=function(e,t,n){this.unloadRequestHandler=new xe(this.pdfViewer),this.unloadRequestHandler.url=window.sessionStorage.getItem("serviceURL")+"/"+e,this.unloadRequestHandler.mode=!1,this.unloadRequestHandler.responseType=null,this.unloadRequestHandler.send(t),this.unloadRequestHandler.onSuccess=function(t){var o=t.data;o&&("object"!==i(o)&&-1===o.indexOf("Document")&&(n.onControlError(500,o,e),o=null),o&&n.pdfViewer.fireAjaxRequestSuccess(n.pdfViewer.serverActionSettings.unload,o))},this.unloadRequestHandler.onFailure=function(t){n.pdfViewer.fireAjaxRequestFailed(t.status,t.statusText,e)},this.unloadRequestHandler.onError=function(t){n.pdfViewer.fireAjaxRequestFailed(t.status,t.statusText,e)}},e.prototype.windowSessionStorageClear=function(){window.sessionStorage.removeItem("currentDocument"),window.sessionStorage.removeItem("serviceURL"),window.sessionStorage.removeItem("unload");for(var e=0;e<this.sessionStorage.length;e++)window.sessionStorage.removeItem(this.sessionStorage[e])},e.prototype.updateCommentPanelAfterloading=function(){var e=this;setTimeout((function(){e.updateCommentPanel()}),1e3)},e.prototype.updateCommentPanel=function(){for(var e=document.querySelectorAll("#"+this.pdfViewer.dataId+"_more-options"),t=0;t<e.length;t++)e[t].style.visibility="hidden";for(var i=document.querySelectorAll(".e-pv-comments-border"),n=0;n<i.length;n++)i[n].classList.remove("e-pv-comments-border");var o=document.querySelectorAll(".e-editable-inline");for(n=0;n<o.length;n++)o[n].style.display="none";for(var a=document.querySelectorAll(".e-pv-comments-select"),s=0;s<a.length;s++)a[s].classList.remove("e-pv-comments-select");var r=document.querySelectorAll(".e-pv-comments-div");for(n=0;n<r.length;n++)r[n].style.minHeight="60px"},e.prototype.focusViewerContainer=function(e){var t=this,i=window.scrollX,n=window.scrollY,o=this.getScrollParent(this.viewerContainer),a=0,s=0;null!==o&&(a=o.scrollLeft,s=o.scrollTop),this.isThicknessChange||this.isOpacityChange?setTimeout((function(){t.viewerContainer.focus(),t.isThicknessChange=!1,t.isOpacityChange=!1}),50):this.viewerContainer.focus(),this.viewerContainer.focus(),this.currentPageNumber>0&&this.viewerContainer.setAttribute("aria-labelledby",this.pdfViewer.dataId+"_pageDiv_"+(this.currentPageNumber-1)),this.pdfViewer.annotation&&this.pdfViewer.annotation.stickyNotesAnnotationModule&&(this.pdfViewer.annotation.stickyNotesAnnotationModule.accordionContainer=document.getElementById(this.pdfViewer.dataId+"_accordionContainer"+this.currentPageNumber),(this.pdfViewer.annotation.stickyNotesAnnotationModule.accordionContainer||this.pdfViewer.annotation)&&this.updateCommentPanel()),(-1!==navigator.userAgent.indexOf("MSIE")||navigator.appVersion.indexOf("Trident/")>-1||-1!==navigator.userAgent.indexOf("Edge"))&&null!==o?(o.scrollLeft=a,o.scrollTop=s):null!==o&&o.scrollTo(a,s),window.scrollTo(i,n)},e.prototype.getScrollParent=function(e){if(null===e||"HTML"===e.nodeName)return null;var t=getComputedStyle(e);return this.viewerContainer.id===e.id||"scroll"!==t.overflowY&&"auto"!==t.overflowY?this.getScrollParent(e.parentNode):e},e.prototype.hideLoadingIndicator=function(){var e=this.getElement("_loadingIndicator");null!==e&&ge(e)},e.prototype.createPrintPopup=function(){var e=document.getElementById(this.pdfViewer.dataId);this.printMainContainer=sf.base.createElement("div",{id:this.pdfViewer.dataId+"_printcontainer",className:"e-pv-print-popup-container"}),e.appendChild(this.printMainContainer),this.printMainContainer.style.display="none";var t=sf.base.createElement("div",{id:this.pdfViewer.dataId+"_printLoadingIndicator",className:"e-pv-print-loading-container"});this.printMainContainer.appendChild(t),ie({target:t,cssClass:"e-spin-center"}),this.setLoaderProperties(t)},e.prototype.closeGoToPagePopUp=function(){this.goToPageInput.value="",this.DisableApplyButton()},e.prototype.EnableApplyButton=function(){document.getElementsByClassName("e-pv-gotopage-apply-btn")[0].removeAttribute("disabled")},e.prototype.DisableApplyButton=function(){document.getElementsByClassName("e-pv-gotopage-apply-btn")[0].setAttribute("disabled",!0)},e.prototype.GoToPageCancelClick=function(){this.goToPagePopup.hide()},e.prototype.GoToPageApplyClick=function(){this.goToPagePopup.hide();var e=this.goToPageInput.value;this.pdfViewer.navigation.goToPage(e),this.updateMobileScrollerPosition()},e.prototype.updateMobileScrollerPosition=function(){if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&this.mobileScrollerContainer){var e=(this.viewerContainer.scrollHeight-this.viewerContainer.clientHeight)/(this.viewerContainer.clientHeight-56),t=this.viewerContainer.scrollTop/e,i=this.pdfViewer.toolbarModule?this.toolbarHeight:0;this.mobileScrollerContainer.style.top=i+t+"px"}},e.prototype.createPasswordPopup=function(){var e=this,t=sf.base.createElement("div",{id:this.pdfViewer.dataId+"_password_popup",className:"e-pv-password-popup",attrs:{tabindex:"-1"}});this.promptElement=sf.base.createElement("span",{id:this.pdfViewer.dataId+"_prompt",attrs:{tabindex:"-1"}}),this.promptElement.textContent=this.pdfViewer.localeObj.getConstant("Enter Password"),t.appendChild(this.promptElement);var i=sf.base.createElement("span",{className:"e-input-group e-pv-password-input"});this.passwordInput=sf.base.createElement("input",{id:this.pdfViewer.dataId+"_password_input",className:"e-input"}),this.passwordInput.type="password",this.passwordInput.name="Required",i.appendChild(this.passwordInput),t.appendChild(i),this.pageContainer.appendChild(t),this.passwordPopup=new sf.popups.Dialog({showCloseIcon:!0,closeOnEscape:!1,isModal:!0,header:this.pdfViewer.localeObj.getConstant("Password Protected"),visible:!1,close:this.passwordCancel.bind(this),target:this.pdfViewer.element,beforeClose:function(){e.passwordPopup.destroy(),e.getElement("_password_popup").remove(),e.passwordPopup=null;var t=e.getElement("_loadingIndicator");null!=t&&ge(t)}}),!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode?this.passwordPopup.buttons=[{buttonModel:{content:this.pdfViewer.localeObj.getConstant("OK"),isPrimary:!0},click:this.applyPassword.bind(this)},{buttonModel:{content:this.pdfViewer.localeObj.getConstant("Cancel")},click:this.passwordCancelClick.bind(this)}]:this.passwordPopup.buttons=[{buttonModel:{content:this.pdfViewer.localeObj.getConstant("Cancel")},click:this.passwordCancelClick.bind(this)},{buttonModel:{content:this.pdfViewer.localeObj.getConstant("OK"),isPrimary:!0},click:this.applyPassword.bind(this)}],this.pdfViewer.enableRtl&&(this.passwordPopup.enableRtl=!0),this.passwordPopup.appendTo(t),this.passwordInput.addEventListener("focus",(function(){e.passwordInput.parentElement.classList.add("e-input-focus")})),this.passwordInput.addEventListener("blur",(function(){e.passwordInput.parentElement.classList.remove("e-input-focus")}))},e.prototype.passwordCancel=function(e){e.isInteraction&&(this.clear(!1),this.passwordInput.value="");var t=this.getElement("_loadingIndicator");null!==t&&ge(t)},e.prototype.passwordCancelClick=function(){this.clear(!1),this.passwordPopup.hide();var e=this.getElement("_loadingIndicator");null!==e&&ge(e)},e.prototype.applyPassword=function(){this.focusViewerContainer()},e.prototype.createFileInputElement=function(){sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode||(this.pdfViewer.enableAnnotationToolbar&&this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.annotationToolbarModule&&this.pdfViewer.toolbarModule.annotationToolbarModule.createCustomStampElement(),this.signatureModule&&this.signatureModule.createSignatureFileElement())},e.prototype.wireEvents=function(){var e=this;this.viewerContainer.addEventListener("scroll",this.viewerContainerOnScroll,!0),sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&this.viewerContainer.addEventListener("touchmove",this.viewerContainerOnScroll,{passive:!0}),this.viewerContainer.addEventListener("mousedown",this.viewerContainerOnMousedown),this.viewerContainer.addEventListener("mouseup",this.viewerContainerOnMouseup),this.viewerContainer.addEventListener("wheel",this.detectTouchPad,{passive:!0}),this.viewerContainer.addEventListener("wheel",this.viewerContainerOnMouseWheel),this.isMacSafari&&(window.addEventListener("gesturestart",(function(e){return e.preventDefault()})),window.addEventListener("gesturechange",(function(e){return e.preventDefault()})),window.addEventListener("gestureend",(function(e){return e.preventDefault()})),this.viewerContainer.addEventListener("gesturestart",this.handleMacGestureStart,!1),this.viewerContainer.addEventListener("gesturechange",this.handleMacGestureChange,!1),this.viewerContainer.addEventListener("gestureend",this.handleMacGestureEnd,!1)),this.viewerContainer.addEventListener("mousemove",this.viewerContainerOnMousemove),this.viewerContainer.addEventListener("mouseleave",this.viewerContainerOnMouseLeave),this.viewerContainer.addEventListener("mouseenter",this.viewerContainerOnMouseEnter),this.viewerContainer.addEventListener("mouseover",this.viewerContainerOnMouseOver),this.viewerContainer.addEventListener("click",this.viewerContainerOnClick),this.viewerContainer.addEventListener("dblclick",this.viewerContainerOnClick),this.viewerContainer.addEventListener("dragstart",this.viewerContainerOnDragStart),this.pdfViewer.element.addEventListener("keydown",this.viewerContainerOnKeyDown),window.addEventListener("keydown",this.onWindowKeyDown),window.addEventListener("mouseup",this.onWindowMouseUp),window.addEventListener("touchend",this.onWindowTouchEnd),this.unload=function(){return e.unloadDocument(e)},window.addEventListener("unload",this.unload),window.addEventListener("beforeunload",this.clearSessionStorage),window.addEventListener("resize",this.onWindowResize),-1!==navigator.userAgent.indexOf("MSIE")||-1!==navigator.userAgent.indexOf("Edge")||-1!==navigator.userAgent.indexOf("Trident")?(this.viewerContainer.addEventListener("pointerdown",this.viewerContainerOnPointerDown),this.viewerContainer.addEventListener("pointermove",this.viewerContainerOnPointerMove),this.viewerContainer.addEventListener("pointerup",this.viewerContainerOnPointerEnd),this.viewerContainer.addEventListener("pointerleave",this.viewerContainerOnPointerEnd)):(this.viewerContainer.addEventListener("touchstart",this.viewerContainerOnTouchStart),this.isWebkitMobile&&this.isDeviceiOS&&this.viewerContainer.addEventListener("touchmove",(function(e){1!==e.scale&&e.preventDefault()}),{passive:!1}),this.viewerContainer.addEventListener("touchmove",this.viewerContainerOnTouchMove),this.viewerContainer.addEventListener("touchend",this.viewerContainerOnTouchEnd),this.viewerContainer.addEventListener("touchleave",this.viewerContainerOnTouchEnd),this.viewerContainer.addEventListener("touchcancel",this.viewerContainerOnTouchEnd))},e.prototype.unWireEvents=function(){this.viewerContainer.removeEventListener("scroll",this.viewerContainerOnScroll,!0),sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&this.viewerContainer.removeEventListener("touchmove",this.viewerContainerOnScroll,!0),this.viewerContainer.removeEventListener("mousedown",this.viewerContainerOnMousedown),this.viewerContainer.removeEventListener("mouseup",this.viewerContainerOnMouseup),this.viewerContainer.removeEventListener("wheel",this.detectTouchPad,!1),this.viewerContainer.removeEventListener("wheel",this.viewerContainerOnMouseWheel),this.isMacSafari&&(window.removeEventListener("gesturestart",(function(e){return e.preventDefault()})),window.removeEventListener("gesturechange",(function(e){return e.preventDefault()})),window.removeEventListener("gestureend",(function(e){return e.preventDefault()})),this.viewerContainer.removeEventListener("gesturestart",this.handleMacGestureStart,!1),this.viewerContainer.removeEventListener("gesturechange",this.handleMacGestureChange,!1),this.viewerContainer.removeEventListener("gestureend",this.handleMacGestureEnd,!1)),this.viewerContainer.removeEventListener("mousemove",this.viewerContainerOnMousemove),this.viewerContainer.removeEventListener("mouseleave",this.viewerContainerOnMouseLeave),this.viewerContainer.removeEventListener("mouseenter",this.viewerContainerOnMouseEnter),this.viewerContainer.removeEventListener("mouseover",this.viewerContainerOnMouseOver),this.viewerContainer.removeEventListener("click",this.viewerContainerOnClick),this.viewerContainer.removeEventListener("dragstart",this.viewerContainerOnDragStart),this.viewerContainer.removeEventListener("contextmenu",this.viewerContainerOnContextMenuClick),this.pdfViewer.element.removeEventListener("keydown",this.viewerContainerOnKeyDown),window.addEventListener("keydown",this.onWindowKeyDown),window.removeEventListener("mouseup",this.onWindowMouseUp),window.removeEventListener("unload",this.unload),window.removeEventListener("resize",this.onWindowResize),-1!==navigator.userAgent.indexOf("MSIE")||-1!==navigator.userAgent.indexOf("Edge")||-1!==navigator.userAgent.indexOf("Trident")?(this.viewerContainer.removeEventListener("pointerdown",this.viewerContainerOnPointerDown),this.viewerContainer.removeEventListener("pointermove",this.viewerContainerOnPointerMove),this.viewerContainer.removeEventListener("pointerup",this.viewerContainerOnPointerEnd),this.viewerContainer.removeEventListener("pointerleave",this.viewerContainerOnPointerEnd)):(this.viewerContainer.removeEventListener("touchstart",this.viewerContainerOnTouchStart),this.isWebkitMobile&&this.isDeviceiOS&&this.viewerContainer.removeEventListener("touchmove",(function(e){1!==e.scale&&e.preventDefault()}),!1),this.viewerContainer.removeEventListener("touchmove",this.viewerContainerOnTouchMove),this.viewerContainer.removeEventListener("touchend",this.viewerContainerOnTouchEnd),this.viewerContainer.removeEventListener("touchleave",this.viewerContainerOnTouchEnd),this.viewerContainer.removeEventListener("touchcancel",this.viewerContainerOnTouchEnd))},e.prototype.updateZoomValue=function(){this.pdfViewer.magnificationModule&&(this.pdfViewer.magnificationModule.isAutoZoom?this.pdfViewer.magnificationModule.fitToAuto():"FitToWidth"!==this.pdfViewer.zoomMode&&"fitToWidth"===this.pdfViewer.magnificationModule.fitType?this.pdfViewer.magnificationModule.fitToWidth():"fitToPage"===this.pdfViewer.magnificationModule.fitType&&this.pdfViewer.magnificationModule.fitToPage());for(var e=0;e<this.pageCount;e++)this.applyLeftPosition(e)},e.prototype.updateFreeTextProperties=function(e){this.pdfViewer.enableShapeLabel&&(this.pdfViewer.shapeLabelSettings.fillColor&&(e.labelFillColor=this.pdfViewer.shapeLabelSettings.fillColor),this.pdfViewer.shapeLabelSettings.fontColor&&(e.fontColor=this.pdfViewer.shapeLabelSettings.fontColor),this.pdfViewer.shapeLabelSettings.fontSize&&(e.fontSize=this.pdfViewer.shapeLabelSettings.fontSize),this.pdfViewer.shapeLabelSettings.fontFamily&&(e.fontFamily=this.pdfViewer.shapeLabelSettings.fontFamily),this.pdfViewer.shapeLabelSettings.opacity&&(e.labelOpacity=this.pdfViewer.shapeLabelSettings.opacity),this.pdfViewer.shapeLabelSettings.labelContent&&(e.labelContent=this.pdfViewer.shapeLabelSettings.labelContent))},e.prototype.mouseDownHandler=function(e){var t,i=!1,n=[],o=[];if(e&&e.target&&(this.mouseDownEvent=e,this.contextMenuModule.currentTarget=e.target),this.pdfViewer.annotationModule&&(i=this.pdfViewer.annotationModule.isEnableDelete()),i||o.push("Delete"),"None"===this.pdfViewer.contextMenuOption)t=!0;else if(this.pdfViewer.textSelectionModule||this.isShapeBasedAnnotationsEnabled()){if(e){var a=this.isClickWithinSelectionBounds(e);this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.freeTextAnnotationModule&&this.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus?(this.isFreeTextContextMenu=!0,this.pdfViewer.annotation.freeTextAnnotationModule&&!this.pdfViewer.annotation.freeTextAnnotationModule.isTextSelected&&(o.push("Cut"),o.push("Copy")),this.pdfViewer.annotation.freeTextAnnotationModule&&""===this.pdfViewer.annotation.freeTextAnnotationModule.selectedText&&o.push("Paste"),n.push("Highlight"),n.push("Underline"),n.push("Strikethrough"),n.push("ScaleRatio"),n.push("Properties"),n.push("Comment"),n.push("Delete")):a&&this.pdfViewer.textSelectionModule?(!e.target.classList.contains("e-pv-maintaincontent")&&e.target.classList.contains("e-pv-text")||e.target.classList.contains("e-pv-text-layer")?this.checkIsNormalText()&&(t=!0):(sf.base.Browser.isIE||"edge"===sf.base.Browser.info.name)&&e.target.classList.contains("e-pv-page-container")&&(t=!0),n.push("Cut"),n.push("Paste"),n.push("Delete"),n.push("ScaleRatio"),n.push("Comment"),n.push("Properties")):0===this.pdfViewer.selectedItems.annotations.length||"HandWrittenSignature"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&"SignatureText"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&"SignatureImage"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType?0!==this.pdfViewer.selectedItems.annotations.length&&"Path"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType?this.shapeMenuItems(n,o,!0):this.pdfViewer.annotation&&this.pdfViewer.annotation.isShapeCopied&&(e.target.classList.contains("e-pv-text-layer")||e.target.classList.contains("e-pv-text")||e.target.classList.contains("e-pv-hyperlink"))&&!this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation?(n.push("Properties"),this.shapeMenuItems(n,o,!1)):this.isCalibrateAnnotationModule()&&this.pdfViewer.annotationModule.measureAnnotationModule.currentAnnotationMode?(n.push("Highlight"),n.push("Underline"),n.push("Strikethrough"),n.push("Properties"),o.push("Cut"),o.push("Copy"),o.push("Paste"),o.push("Delete"),o.push("Comment")):this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation?(n.push("Highlight"),n.push("Underline"),n.push("Strikethrough"),n.push("Properties"),n.push("Cut"),n.push("Copy"),n.push("Paste"),n.push("ScaleRatio")):t=!0:this.shapeMenuItems(n,o,!1,!0)}else this.pdfViewer.textSelectionModule&&"MouseUp"===this.pdfViewer.contextMenuOption?(n.push("Cut"),n.push("Paste"),n.push("Delete"),n.push("ScaleRatio"),n.push("Comment"),n.push("Properties")):0===this.pdfViewer.selectedItems.annotations.length&&(n.push("Cut"),n.push("Paste"),n.push("Delete"),n.push("ScaleRatio"),n.push("Properties"));this.pdfViewer.enableCommentPanel||o.push("Comment")}else t=!0;var s={hidenItems:n,disabledItems:o,isCancel:t};this.pdfViewer._dotnetInstance.invokeMethodAsync("MouseDownHandler",s)},e.prototype.OnItemSelected=function(e){var t=this.contextMenuModule.currentTarget;switch(e){case this.pdfViewer.localeObj.getConstant("Copy"):this.CopyItemSelected();break;case this.pdfViewer.localeObj.getConstant("Highlight context"):this.TextMarkUpSelected("Highlight");break;case this.pdfViewer.localeObj.getConstant("Underline context"):this.TextMarkUpSelected("Underline");break;case this.pdfViewer.localeObj.getConstant("Strikethrough context"):this.TextMarkUpSelected("Strikethrough");break;case this.pdfViewer.localeObj.getConstant("Properties"):this.PropertiesItemSelected();break;case this.pdfViewer.localeObj.getConstant("Cut"):this.CutItemSelected(t);break;case this.pdfViewer.localeObj.getConstant("Paste"):this.pasteItemSelected(t);break;case this.pdfViewer.localeObj.getConstant("Delete Context"):this.DeleteItemSelected();break;case this.pdfViewer.localeObj.getConstant("Scale Ratio"):this.ScaleRatioSelected();break;case this.pdfViewer.localeObj.getConstant("Comment"):this.CommentItemSelected()}},e.prototype.CommentItemSelected=function(){if(this.pdfViewer.annotation&&(this.pdfViewer.annotation.showCommentsPanelInBlazor(),0!==this.pdfViewer.selectedItems.annotations.length||this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation)){var e=void 0;e=this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation?this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation:this.pdfViewer.selectedItems.annotations[0];var t=document.getElementById(e.annotName);t&&(t.classList.contains("e-pv-comments-border")||t.firstElementChild.click())}},e.prototype.ScaleRatioSelected=function(){this.isCalibrateAnnotationModule()&&this.pdfViewer.annotation.measureAnnotationModule.createScaleRatioWindow()},e.prototype.DeleteItemSelected=function(){this.pdfViewer.annotation&&this.pdfViewer.annotation.deleteAnnotation()},e.prototype.pasteItemSelected=function(e){this.isFreeTextContextMenu||this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus&&e&&"free-text-input"===e.className&&"TEXTAREA"===e.tagName?(this.pdfViewer.annotation.freeTextAnnotationModule.pasteSelectedText(e),this.contextMenuModule.close()):(this.pdfViewer.paste(),"Cut"==this.contextMenuModule.previousAction&&(this.pdfViewer.clipboardData.clipObject=[]),this.contextMenuModule.previousAction="Paste")},e.prototype.CutItemSelected=function(e){if(this.isFreeTextContextMenu||this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus&&e&&"free-text-input"===e.className&&"TEXTAREA"===e.tagName)this.pdfViewer.annotation.freeTextAnnotationModule.cutSelectedText(e),this.contextMenuModule.close();else if(1===this.pdfViewer.selectedItems.annotations.length){this.pdfViewer.selectedItems.annotations[0].pageIndex;this.pdfViewer.cut(),this.contextMenuModule.previousAction="Cut"}else 1===this.pdfViewer.selectedItems.formFields.length&&(this.pdfViewer.cut(),this.contextMenuModule.previousAction="Cut")},e.prototype.CopyItemSelected=function(){var e=!1;this.isFreeTextContextMenu||this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus?(this.pdfViewer.annotation.freeTextAnnotationModule.copySelectedText(),this.contextMenuModule.close(),e=!0):this.pdfViewer.textSelectionModule&&(this.pdfViewer.textSelectionModule.copyText(),this.contextMenuModule.close()),(this.pdfViewer.selectedItems.annotations.length&&!e||this.pdfViewer.selectedItems.formFields.length>0)&&(this.pdfViewer.copy(),this.contextMenuModule.previousAction="Copy")},e.prototype.PropertiesItemSelected=function(){0===this.pdfViewer.selectedItems.annotations.length||"Line"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&"LineWidthArrowHead"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&"Distance"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType||this.pdfViewer.annotation.createPropertiesWindow()},e.prototype.TextMarkUpSelected=function(e){this.pdfViewer.annotation&&this.pdfViewer.annotation.textMarkupAnnotationModule&&(this.pdfViewer.annotation.textMarkupAnnotationModule.isSelectionMaintained=!1,this.pdfViewer.annotation.textMarkupAnnotationModule.drawTextMarkupAnnotations(e),this.pdfViewer.annotation.textMarkupAnnotationModule.isTextMarkupAnnotationMode=!1,this.pdfViewer.annotation.textMarkupAnnotationModule.currentTextMarkupAddMode="",this.pdfViewer.annotation.textMarkupAnnotationModule.isSelectionMaintained=!0)},e.prototype.shapeMenuItems=function(e,t,i,n){this.pdfViewer.annotation&&!this.pdfViewer.annotation.isShapeCopied&&t.push("Paste"),e.push("Highlight"),e.push("Underline"),e.push("Strikethrough"),e.push("ScaleRatio"),i?"Line"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&"LineWidthArrowHead"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&"Distance"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&e.push("Properties"):n?(e.push("Properties"),e.push("Comment")):(e.push("Cut"),e.push("Copy"),e.push("Delete"),e.push("Comment"))},e.prototype.checkIsRtlText=function(e){return new RegExp("^[^A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02B8\\u0300-\\u0590\\u0800-\\u1FFF\\u2C00-\\uFB1C\\uFDFE-\\uFE6F\\uFEFD-\\uFFFF]*[\\u0591-\\u07FF\\uFB1D-\\uFDFD\\uFE70-\\uFEFC]").test(e)},e.prototype.isClickWithinSelectionBounds=function(e){var t=!1;if(this.pdfViewer.textSelectionModule){var i=this.pdfViewer.textSelectionModule.getCurrentSelectionBounds(this.currentPageNumber-1);if(i){var n=i;this.getHorizontalValue(n.left)<e.clientX&&this.getHorizontalValue(n.right)>e.clientX&&this.getVerticalValue(n.top)<e.clientY&&this.getVerticalValue(n.bottom)>e.clientY&&(t=!0)}(sf.base.Browser.isIE||"edge"===sf.base.Browser.info.name)&&i&&(t=!0)}return t},e.prototype.getHorizontalClientValue=function(e){return e-this.getElement("_pageDiv_"+(this.currentPageNumber-1)).getBoundingClientRect().left},e.prototype.getVerticalClientValue=function(e){return e-this.getElement("_pageDiv_"+(this.currentPageNumber-1)).getBoundingClientRect().top},e.prototype.getHorizontalValue=function(e){var t=this.getElement("_pageDiv_"+(this.currentPageNumber-1)).getBoundingClientRect();return e*this.getZoomFactor()+t.left},e.prototype.getVerticalValue=function(e){var t=this.getElement("_pageDiv_"+(this.currentPageNumber-1)).getBoundingClientRect();return e*this.getZoomFactor()+t.top},e.prototype.checkIsNormalText=function(){var e=!0,t="",i=this.pdfViewer.textSelectionModule;return i&&i.selectionRangeArray&&1===i.selectionRangeArray.length?t=i.selectionRangeArray[0].textContent:window.getSelection()&&window.getSelection().anchorNode&&(t=window.getSelection().toString()),""!==t&&this.checkIsRtlText(t)&&(e=!1),e},e.prototype.DeleteKeyPressed=function(e){if(this.pdfViewer.annotation&&(this.isTextMarkupAnnotationModule()&&!this.getPopupNoteVisibleStatus()&&this.pdfViewer.annotationModule.deleteAnnotation(),this.pdfViewer.selectedItems.annotations.length>0)){var t=this.pdfViewer.selectedItems.annotations[0],i=!0,n=t.shapeAnnotationType;if("Path"===n||"SignatureField"===t.formFieldAnnotationType||"InitialField"===t.formFieldAnnotationType||"HandWrittenSignature"===n||"SignatureText"===n||"SignatureImage"===n){var o=document.getElementById(t.id);o&&o.disabled&&(i=!0)}i||(t.annotationSettings&&t.annotationSettings.isLock?this.pdfViewer.annotationModule.checkAllowedInteractions("Delete",t)&&(this.pdfViewer.remove(t),this.pdfViewer.renderSelector(this.pdfViewer.annotation.getEventPageNumber(e))):(this.pdfViewer.remove(t),this.pdfViewer.renderSelector(this.pdfViewer.annotation.getEventPageNumber(e))))}},e.prototype.initiatePanning=function(){this.isPanMode=!0,this.textLayer.modifyTextCursor(!1),this.disableTextSelectionMode(),this.pdfViewer.toolbar&&this.pdfViewer.toolbar.updateInteractionTools(!1)},e.prototype.initiateTextSelectMode=function(){this.isPanMode=!1,this.viewerContainer&&(this.viewerContainer.style.cursor="auto",this.pdfViewer.textSelectionModule&&(this.textLayer.modifyTextCursor(!0),this.pdfViewer.textSelectionModule.enableTextSelectionMode()))},e.prototype.initiateTextSelection=function(){this.pdfViewer.toolbar&&!this.pdfViewer.toolbar.isSelectionToolDisabled&&(this.initiateTextSelectMode(),this.pdfViewer.toolbar.updateInteractionTools(!0))},e.prototype.applySelection=function(){null!==window.getSelection().anchorNode&&this.pdfViewer.textSelectionModule.applySpanForSelection(),this.isViewerContainerDoubleClick=!1},e.prototype.isDesignerMode=function(e){var t=!1;return 0===this.pdfViewer.selectedItems.annotations.length||"HandWrittenSignature"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&"SignatureText"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&"SignatureImage"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType?(0!==this.pdfViewer.selectedItems.annotations.length&&"Path"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType||this.pdfViewer.annotation&&this.pdfViewer.annotation.isShapeCopied&&(e.classList.contains("e-pv-text-layer")||e.classList.contains("e-pv-text"))&&!this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation)&&(t=!0):t=!0,this.designerModetarget=e,t},e.prototype.handleTaps=function(e,t){var i=this;if(this.isDeviceiOS){var n=Oe(t,this,this.pdfViewer),o=!this.pdfViewer.annotation.freeTextAnnotationModule.isNewFreeTextAnnot&&(!n||!this.pdfViewer.selectedItems.annotations[0]||n.id!==this.pdfViewer.selectedItems.annotations[0].id)&&document.activeElement.classList.contains("free-text-input")&&this.isFreeTextAnnotation(this.pdfViewer.selectedItems.annotations);this.singleTapTimer?this.pdfViewer.enablePinchZoom&&(this.tapCount++,clearTimeout(this.singleTapTimer),this.singleTapTimer=null,this.onDoubleTap(e)):(this.singleTapTimer=setTimeout((function(){o&&(i.pdfViewer.clearSelection(i.pdfViewer.selectedItems.annotations[0].pageIndex),i.focusViewerContainer(!0)),i.onSingleTap(e)}),300),this.tapCount++)}else this.singleTapTimer?this.pdfViewer.enablePinchZoom&&(this.tapCount++,clearTimeout(this.singleTapTimer),this.singleTapTimer=null,this.onDoubleTap(e)):(this.singleTapTimer=setTimeout((function(){i.onSingleTap(e)}),300),this.tapCount++)},e.prototype.handleTextBoxTaps=function(e){var t=this;if(setTimeout((function(){t.inputTapCount=0}),300),this.inputTapCount++,this.isDeviceiOS)this.onTextBoxDoubleTap(e);else setTimeout((function(){t.onTextBoxDoubleTap(e)}),200);this.inputTapCount>2&&(this.inputTapCount=0)},e.prototype.onTextBoxDoubleTap=function(e){e[0].target;if(2===this.inputTapCount&&0!==this.pdfViewer.selectedItems.annotations.length){if(this.pdfViewer.annotationModule){var t=this.pdfViewer.selectedItems.annotations[0];this.isDeviceiOS&&document.activeElement.classList.contains("free-text-input")&&this.isFreeTextAnnotation(this.pdfViewer.selectedItems.annotations)&&this.focusViewerContainer(!0),this.pdfViewer.annotationModule.annotationSelect(t.annotName,t.pageIndex,t,null,!0)}if(!0===this.isFreeTextAnnotation(this.pdfViewer.selectedItems.annotations))(i={}).x=this.pdfViewer.selectedItems.annotations[0].bounds.x,i.y=this.pdfViewer.selectedItems.annotations[0].bounds.y,this.pdfViewer.annotation.freeTextAnnotationModule.addInuptElemet(i,this.pdfViewer.selectedItems.annotations[0],null,!0);else if(!0===this.pdfViewer.selectedItems.annotations[0].enableShapeLabel){var i;(i={}).x=this.pdfViewer.selectedItems.annotations[0].bounds.x,i.y=this.pdfViewer.selectedItems.annotations[0].bounds.y,this.pdfViewer.annotation.inputElementModule.editLabel(i,this.pdfViewer.selectedItems.annotations[0])}}},e.prototype.onSingleTap=function(e){var t=e[0].target,i=!1;if(this.singleTapTimer=null,t&&(t.classList.contains("e-pdfviewer-formFields")||t.classList.contains("e-pdfviewer-ListBox")||t.classList.contains("e-pdfviewer-signatureformfields"))&&(i=!0),!this.isLongTouchPropagated&&!this.navigationPane.isNavigationToolbarVisible&&!i&&this.pdfViewer.toolbarModule){if(this.touchClientX>=e[0].clientX-10&&this.touchClientX<=e[0].clientX+10&&this.touchClientY>=e[0].clientY-10&&this.touchClientY<=e[0].clientY+10){if(!this.isTapHidden&&this.pdfViewer.toolbar.moreDropDown){var n=this.getElement("_more_option-popup");n.firstElementChild&&(n.classList.remove("e-popup-open"),n.classList.add("e-popup-close"),n.removeChild(n.firstElementChild))}this.isTapHidden&&sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode?(this.mobileScrollerContainer.style.display="",this.updateMobileScrollerPosition()):sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&null==this.getSelectTextMarkupCurrentPage()&&(this.mobileScrollerContainer.style.display="none"),null==this.getSelectTextMarkupCurrentPage()&&(this.isTapHidden=!this.isTapHidden)}this.tapCount=0}},e.prototype.onDoubleTap=function(e){var t=e[0].target,i=!1;t&&(t.classList.contains("e-pdfviewer-formFields")||t.classList.contains("e-pdfviewer-ListBox")||t.classList.contains("e-pdfviewer-signatureformfields"))&&(i=!0),2!==this.tapCount||i||(this.tapCount=0,this.touchClientX>=parseInt((e[0].clientX-10).toString())&&this.touchClientX<=e[0].clientX+10&&this.touchClientY>=e[0].clientY-10&&this.touchClientY<=e[0].clientY+30&&(this.pdfViewer.magnification&&1!==this.pdfViewer.selectedItems.annotations.length&&this.pdfViewer.magnification.onDoubleTapMagnification(),this.viewerContainer.style.height=this.updatePageHeight(this.pdfViewer.element.getBoundingClientRect().height,this.toolbarHeight),this.isTapHidden=!1,clearTimeout(this.singleTapTimer),this.singleTapTimer=null))},e.prototype.preventTouchEvent=function(e){this.pdfViewer.textSelectionModule&&(this.isPanMode||!this.pdfViewer.enableTextSelection||this.isTextSelectionDisabled||null!=this.getSelectTextMarkupCurrentPage()||this.isWebkitMobile&&sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode||(e.preventDefault(),e.stopPropagation()))},e.prototype.renderStampAnnotation=function(e){if(this.pdfViewer.annotation){var t=this.getZoomFactor(),i=this.pdfViewer.annotation.getEventPageNumber(e),n=this.getElement("_pageDiv_"+i);if(this.pdfViewer.enableStampAnnotations){var o=this.pdfViewer.annotationModule.stampAnnotationModule;if(o&&o.isStampAnnotSelected&&n){var a=n.getBoundingClientRect();if(sf.base.Browser.isDevice&&"touchend"===e.type&&"Image"===this.pdfViewer.annotationModule.stampAnnotationModule.currentStampAnnotation.shapeAnnotationType){var s=this.pdfViewer.annotationModule.stampAnnotationModule.currentStampAnnotation;s.pageIndex=i,s.bounds.x=(e.changedTouches[0].clientX-a.left)/t,s.bounds.y=(e.changedTouches[0].clientY-a.top)/t,o.updateDeleteItems(i,s,s.opacity),this.pdfViewer.add(s)}else o.renderStamp((e.changedTouches[0].clientX-a.left)/t,(e.changedTouches[0].clientY-a.top)/t,null,null,i,null,null,null,null);o.isStampAnnotSelected=!1}this.pdfViewer.annotation.onAnnotationMouseDown()}if(this.pdfViewer.enableHandwrittenSignature&&this.isSignatureAdded&&n){a=n.getBoundingClientRect();this.currentSignatureAnnot.pageIndex=i,this.signatureModule.renderSignature((e.changedTouches[0].clientX-a.left)/t,(e.changedTouches[0].clientY-a.top)/t),this.isSignatureAdded=!1}1===e.touches.length&&this.isTextMarkupAnnotationModule()&&!this.getPopupNoteVisibleStatus()&&this.pdfViewer.annotationModule.textMarkupAnnotationModule.onTextMarkupAnnotationTouchEnd(e)}},e.prototype.initPageDiv=function(e){if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&this.mobiletotalPageContainer&&(this.mobiletotalPageContainer.innerHTML=this.pageCount.toString(),this.pageNoContainer&&(this.pageNoContainer.innerHTML="(1-"+this.pageCount.toString()+")")),this.pageCount>0){var t=0,n=0;this.isMixedSizeDocument=!1,this.pageCount>100?(n=100,this.pageLimit=n):n=this.pageCount;for(var o=!1,a=!1,s=!1,r=0;r<n;r++){if("object"!==i(e.pageSizes[r])){var l=e.pageSizes[r].split(",");if(null!==e.pageSizes[r-1]&&0!==r){var d=e.pageSizes[r-1].split(",");t=this.pageGap+parseFloat(d[1])+t}else t=this.pageGap;var h={width:parseFloat(l[0]),height:parseFloat(l[1]),top:t};this.pageSize.push(h)}else{if(null!==e.pageSizes[r-1]&&0!==r){d=e.pageSizes[r-1];t=this.pageGap+parseFloat(d.Height)+t}else t=this.pageGap;h={width:e.pageSizes[r].Width,height:e.pageSizes[r].Height,top:t};this.pageSize.push(h)}this.pageSize[r].height>this.pageSize[r].width&&(o=!0),this.pageSize[r].width>this.pageSize[r].height&&(a=!0),r>0&&this.pageSize[r].width!==this.pageSize[r-1].width&&(s=!0);var p=this.pageSize[r].width;p>this.highestWidth&&(this.highestWidth=p);var c=this.pageSize[r].height;c>this.highestHeight&&(this.highestHeight=c)}(o&&a||s)&&(this.isMixedSizeDocument=!0);var u=this.pageCount<10?this.pageCount:10;for(r=0;r<u;r++)this.renderPageContainer(r,this.getPageWidth(r),this.getPageHeight(r),this.getPageTop(r));if(this.pageContainer.style.height=this.getPageTop(this.pageSize.length-1)+this.getPageHeight(this.pageSize.length-1)+"px",this.pageContainer.style.position="relative",100===this.pageLimit)null===this.getElement("_pageDiv_"+this.pageLimit)&&this.pageLimit<this.pageCount&&Promise.all([this.renderPagesVirtually()])}},e.prototype.renderElementsVirtualScroll=function(e){var t=e+(this.pageStopValue<=200?4:2);t>this.pageCount&&(t=this.pageCount);for(var i=e-1;i<=t;i++)-1!==i&&this.renderPageElement(i);var n=e-3;n<0&&(n=0);for(i=e-1;i>=n;i--)-1!==i&&this.renderPageElement(i);for(var o=0;o<this.pageCount;o++)if(!(n<=o&&o<=t)){var a,s=this.getElement("_pageDiv_"+o),r=this.getElement("_pageCanvas_"+o),l=this.getElement("_textLayer_"+o);if(r)r.parentNode.removeChild(r),l&&(this.pdfViewer.textSelectionModule&&0!==l.childNodes.length&&!this.isTextSelectionDisabled&&this.pdfViewer.textSelectionModule.maintainSelectionOnScroll(o,!0),l.parentNode.removeChild(l)),-1!==(a=this.renderedPagesList.indexOf(o))&&this.renderedPagesList.splice(a,1);if(s)s.parentNode.removeChild(s),-1!==(a=this.renderedPagesList.indexOf(o))&&this.renderedPagesList.splice(a,1)}this.pdfViewer._dotnetInstance.invokeMethodAsync("UpdateCurrentPageNumber",this.currentPageNumber)},e.prototype.renderPageElement=function(e){var t=this.getElement("_pageDiv_"+e);null==this.getElement("_pageCanvas_"+e)&&null==t&&e<this.pageSize.length&&this.renderPageContainer(e,this.getPageWidth(e),this.getPageHeight(e),this.getPageTop(e))},e.prototype.renderPagesVirtually=function(){return ve(this,void 0,void 0,(function(){var e,t=this;return be(this,(function(i){return e=this,setTimeout((function(){t.initiateRenderPagesVirtually(e)}),500),[2]}))}))},e.prototype.initiateRenderPagesVirtually=function(e){var t={hashId:e.hashId,isCompletePageSizeNotReceived:!0,action:"VirtualLoad",elementId:e.pdfViewer.element.id,uniqueId:e.documentId,password:e.passwordData};e.jsonDocumentId&&(t.documentId=e.jsonDocumentId),this.virtualLoadRequestHandler=new xe(this.pdfViewer),this.virtualLoadRequestHandler.url=e.pdfViewer.serviceUrl+"/"+e.pdfViewer.serverActionSettings.load,this.virtualLoadRequestHandler.responseType="json",this.virtualLoadRequestHandler.mode=!0,this.virtualLoadRequestHandler.send(t),this.virtualLoadRequestHandler.onSuccess=function(t){var n=t.data;if(n&&"object"!==i(n))try{n=JSON.parse(n)}catch(t){e.onControlError(500,n,"VirtualLoad")}if(n){for(;"object"!==i(n);)n=JSON.parse(n);if(e.documentId===n.uniqueId){e.pdfViewer.fireAjaxRequestSuccess("VirtualLoad",n);var o=n;if(e.pageSize[e.pageLimit-1]){for(var a=e.pageSize[e.pageLimit-1].top,s=e.pageLimit;s<e.pageCount;s++)if("object"!==i(o.pageSizes[s])){var r=o.pageSizes[s].split(",");if(null!==e.pageSize[s-1]&&0!==s){var l=e.pageSize[s-1].height;a=e.pageGap+parseFloat(l)+a}var d={width:parseFloat(r[0]),height:parseFloat(r[1]),top:a};e.pageSize.push(d)}else{if(null!==e.pageSize[s-1]&&0!==s){l=e.pageSize[s-1].height;a=e.pageGap+parseFloat(l)+a}d={width:parseFloat(o.pageSizes[s].Width),height:parseFloat(o.pageSizes[s].Height),top:a};e.pageSize.push(d)}e.pageContainer.style.height=e.getPageTop(e.pageSize.length-1)+e.getPageHeight(e.pageSize.length-1)+"px";var h=window.sessionStorage.getItem(e.documentId+"_pagedata");if(e.pageCount>100){e.pdfViewer.fireDocumentLoad(h);var p=e.pdfViewer.linkAnnotationModule;p&&p.linkAnnotation&&p.linkAnnotation.length>0&&p.linkPage.length>0&&p.renderDocumentLink(p.linkAnnotation,p.linkPage,p.annotationY,e.currentPageNumber-1,n.hyperLinkBorderWidth,n.hyperLinkBorderColor)}}}}},this.virtualLoadRequestHandler.onFailure=function(t){e.pdfViewer.fireAjaxRequestFailed(t.status,t.statusText)},this.virtualLoadRequestHandler.onError=function(t){e.openNotificationPopup(),e.pdfViewer.fireAjaxRequestFailed(t.status,t.statusText)}},e.prototype.tileRenderPage=function(e,t){var i,n=this;if(i=this,e&&this.pageSize[t]){var o=this.getPageWidth(t),a=this.getPageHeight(t),s=this.getElement("_pageCanvas_"+t),r=this.getElement("_pageDiv_"+t),l=e.tileX?e.tileX:0,d=e.tileY?e.tileY:0;r&&(r.style.width=o+"px",r.style.height=a+"px",r.style.background="#fff",r.style.top=this.getPageTop(t)+"px",this.pdfViewer.enableRtl?r.style.right=this.updateLeftPosition(t)+"px":r.style.left=this.updateLeftPosition(t)+"px"),s&&(s.style.background="#fff");var h=e.image,p=this.retrieveCurrentZoomFactor();if(this.isReRenderRequired){e.zoomFactor&&(p=e.zoomFactor);var c=this.documentId+"_"+t+"_"+p+"_"+e.tileX+"_"+e.tileY;this.tilerequestLists.push(c);var u=e.transformationMatrix,f=e.width;if(h){var g=e.tileX?e.tileX:0,m=e.tileY?e.tileY:0,w=sf.base.isNullOrUndefined(e.scaleFactor)?1.5:e.scaleFactor,y=document.getElementById(this.pdfViewer.dataId+"_tileimg_"+t+"_"+this.getZoomFactor()+"_"+g+"_"+m);y||((y=new Image).id=this.pdfViewer.dataId+"_tileimg_"+t+"_"+this.getZoomFactor()+"_"+g+"_"+m,r.append(y)),y.src=h,y.onload=function(){if(i.showPageLoadingIndicator(t,!1),i.tileRenderCount=i.tileRenderCount+1,0===g&&0===m&&0===t&&n.isDocumentLoaded){i.renderPDFInformations(),i.isInitialLoaded=!0;var e=window.sessionStorage.getItem(i.documentId+"_pagedata");i.pageCount<=100&&i.pdfViewer.fireDocumentLoad(e),i.isDocumentLoaded=!1,i.pdfViewer.textSearch&&i.pdfViewer.isExtractText&&i.pdfViewer.textSearchModule.getPDFDocumentTexts()}if(i.tileRenderCount===i.tileRequestCount){i.isTextMarkupAnnotationModule()&&i.pdfViewer.annotationModule.textMarkupAnnotationModule.rerenderAnnotations(t),s.style.display="none",s.src="#";for(var o=document.querySelectorAll('img[id*="'+i.pdfViewer.element.id+'_oldCanvas"]'),a=0;a<o.length;a++)r.removeChild(o[a]);i.isTileImageRendered=!1,i.tileRenderCount=0,i.pdfViewer.magnificationModule&&i.pdfViewer.magnificationModule.rerenderCountIncrement(),i.isDrawnCompletely=!0}};var S=f*this.getZoomFactor()/p/w,v=u.Elements?u.Elements:u.Values,b=v[5]*this.getZoomFactor()/p/w,V=v[4]*this.getZoomFactor()/p/w;y.width=S,y.style.width=S+"px",y.style.top=b+"px",y.style.left=V+"px",y.style.position="absolute"}0===l&&0===d&&this.onPageRender(e,t,r)}else{for(var A=document.querySelectorAll('img[id*="'+i.pdfViewer.element.id+"_tileimg_"+t+'_"]'),x=0;x<A.length;x++){var C=A[x].id.split("_"),I=i.retrieveCurrentZoomFactor(),k=JSON.parse(i.getWindowSessionStorageTile(t,parseFloat(C[C.length-2]),parseFloat(C[C.length-1]),I));if(k&&k.zoomFactor&&(I=k.zoomFactor),parseFloat(C[C.length-4])===t){var T=A[x];T.nodeType==Node.ELEMENT_NODE&&(T.onload=function(){if(i.showPageLoadingIndicator(t,!1),i.tileRenderCount=i.tileRenderCount+1,0===M&&0===P&&0===t&&n.isDocumentLoaded){n.renderPDFInformations(),n.isInitialLoaded=!0;var e=window.sessionStorage.getItem(i.documentId+"_pagedata");i.pageCount<=100&&i.pdfViewer.fireDocumentLoad(e),i.isDocumentLoaded=!1,i.pdfViewer.textSearch&&i.pdfViewer.isExtractText&&i.pdfViewer.textSearchModule.getPDFDocumentTexts()}if(i.tileRenderCount===i.tileRequestCount){s.style.display="none",s.src="#",i.isTextMarkupAnnotationModule()&&i.pdfViewer.annotationModule.textMarkupAnnotationModule.rerenderAnnotations(t);for(var o=document.querySelectorAll('img[id*="'+i.pdfViewer.element.id+'_oldCanvas"]'),a=0;a<o.length;a++)r.removeChild(o[a]);i.isTileImageRendered=!1,i.tileRenderCount=0,i.pdfViewer.magnificationModule&&i.pdfViewer.magnificationModule.rerenderCountIncrement(),i.isDrawnCompletely=!0}},k&&(T.src=k.image))}}var M=e.tileX?e.tileX:0,P=e.tileY?e.tileY:0;0===M&&0===P&&this.onPageRender(e,t,r)}}},e.prototype.renderTileCanvas=function(e,t,i,n,o,a){var s=this.getElement("_pageTileCanvas_"+i);return s||((s=sf.base.createElement("canvas",{id:this.pdfViewer.dataId+"_pageTileCanvas_"+i,className:"e-pv-pageTile-canvas"})).style.width=e+"px",s.style.height=t+"px",s.style.display="none",s.style.backgroundColor="#fff",this.isMixedSizeDocument&&this.highestWidth>0&&(s.style.marginLeft="auto",s.style.marginRight="auto"),n.appendChild(s)),s},e.prototype.calculateImageWidth=function(e,t,i,n){var o=e/this.getZoomFactor()*t*i;return parseInt(n.toString())===parseInt(o.toString())&&(n=o),n=n*this.getZoomFactor()/t},e.prototype.renderPage=function(e,t){var i=this,n=this;if(e&&this.pageSize[t]){var o=this.getPageWidth(t),a=this.getPageHeight(t),s=this.getElement("_pageCanvas_"+t),r=this.getElement("_pageDiv_"+t);if(r&&(r.style.width=o+"px",r.style.height=a+"px",r.style.top=this.getPageTop(t)+"px",this.pdfViewer.enableRtl?r.style.right=this.updateLeftPosition(t)+"px":r.style.left=this.updateLeftPosition(t)+"px"),s){s.style.background="#fff",s.style.display="block",s.style.width=o+"px",s.style.height=a+"px",o<parseFloat(r.style.width)&&(r.style.boxShadow="none");var l=e.image;l&&(s.onload=function(){Promise.resolve().then((function(){for(var e=document.querySelectorAll('img[id*="'+n.pdfViewer.element.id+"_tileimg_"+t+'_"]'),o=n.getElement("_pageDiv_"+t),a=0;a<e.length;a++){var l=e[a].id.split("_");parseFloat(l[l.length-3])!=n.getZoomFactor()&&o.removeChild(e[a])}var d=document.querySelectorAll('img[id*="'+n.pdfViewer.element.id+'_oldCanvas"]');for(a=0;a<d.length;a++)r.removeChild(d[a]);if(i.pdfViewer.magnificationModule&&i.pdfViewer.magnificationModule.rerenderCountIncrement(),i.showPageLoadingIndicator(t,!1),0===t&&i.isDocumentLoaded){i.renderPDFInformations(),i.isInitialLoaded=!0;var h=window.sessionStorage.getItem(i.documentId+"_pagedata");i.pageCount<=100&&i.pdfViewer.fireDocumentLoad(h),i.isDocumentLoaded=!1,i.pdfViewer.textSearch&&i.pdfViewer.isExtractText&&i.pdfViewer.textSearchModule.getPDFDocumentTexts()}i.pdfViewer.magnificationModule&&i.pdfViewer.magnificationModule.pushImageObjects(s)}))},s.src=l),this.onPageRender(e,t,r)}}},e.prototype.onPageRender=function(e,t,i){var n=i.getElementsByTagName("a"),o=!1;if(0!==n.length)for(var a=n.length-1;a>=0;a--)n[a].parentNode.removeChild(n[a]);if((this.pdfViewer.textSearchModule||this.pdfViewer.textSelectionModule||this.pdfViewer.annotationModule)&&this.renderTextContent(e,t),this.pdfViewer.formFieldsModule&&!this.pdfViewer.magnificationModule.isFormFieldPageZoomed&&this.pdfViewer.formFieldsModule.renderFormFields(t),this.pdfViewer.formFieldsModule&&!this.isDocumentLoaded&&this.pdfViewer.formFieldsModule.renderFormFields(t),this.pdfViewer.enableHyperlink&&this.pdfViewer.linkAnnotationModule&&this.pdfViewer.linkAnnotationModule.renderHyperlinkContent(e,t),this.pdfViewer.textSelectionModule&&!this.isTextSelectionDisabled&&this.pdfViewer.textSelectionModule.applySelectionRangeOnScroll(t),this.documentAnnotationCollections){for(var s=!1,r=0;r<this.annotationRenderredList.length;r++)this.annotationRenderredList[r]===t&&(s=!0);var l;(l=this.documentAnnotationCollections[t])&&!s&&(e.shapeAnnotation=l.shapeAnnotation,e.measureShapeAnnotation=l.measureShapeAnnotation,e.textMarkupAnnotation=l.textMarkupAnnotation,e.freeTextAnnotation=l.freeTextAnnotation,e.stampAnnotations=l.stampAnnotations,e.stickyNotesAnnotation=l.stickyNotesAnnotation,e.signatureInkAnnotation=l.signatureInkAnnotation,this.annotationRenderredList.push(t))}this.isImportAction&&((l=this.checkDocumentCollectionData(t))&&(e.shapeAnnotation=l.shapeAnnotation,e.measureShapeAnnotation=l.measureShapeAnnotation,e.textMarkupAnnotation=l.textMarkupAnnotation,e.freeTextAnnotation=l.freeTextAnnotation,e.stampAnnotations=l.stampAnnotations,e.stickyNotesAnnotation=l.stickyNotesAnnotation,e.signatureInkAnnotation=l.signatureInkAnnotation,o=!0));if(this.pdfViewer.annotationModule&&(this.isTextMarkupAnnotationModule()||this.isShapeBasedAnnotationsEnabled())){if(this.isStampAnnotationModule()){var d=e.stampAnnotations;o?this.pdfViewer.annotationModule.stampAnnotationModule.renderStampAnnotations(d,t,null,!0):this.pdfViewer.annotationModule.stampAnnotationModule.renderStampAnnotations(d,t)}o?this.pdfViewer.annotationModule.renderAnnotations(t,e.shapeAnnotation,e.measureShapeAnnotation,e.textMarkupAnnotation,null,!0):this.pdfViewer.annotationModule.renderAnnotations(t,e.shapeAnnotation,e.measureShapeAnnotation,e.textMarkupAnnotation),this.pdfViewer.annotationModule.stickyNotesAnnotationModule.renderStickyNotesAnnotations(e.stickyNotesAnnotation,t)}if(this.pdfViewer.textSearchModule&&this.pdfViewer.textSearchModule.isTextSearch&&this.pdfViewer.textSearchModule.highlightOtherOccurrences(t),this.isShapeBasedAnnotationsEnabled()){var h=this.getElement("_annotationCanvas_"+t);if(h)$(h.getBoundingClientRect(),"position:absolute;top:0px;left:0px;overflow:hidden;pointer-events:none;z-index:1000",h,t,this.pdfViewer),this.pdfViewer.renderSelector(t,this.pdfViewer.annotationSelectorSettings)}this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.stickyNotesAnnotationModule.selectCommentsAnnotation(t),this.isFreeTextAnnotationModule()&&e.freeTextAnnotation&&(o?this.pdfViewer.annotationModule.freeTextAnnotationModule.renderFreeTextAnnotations(e.freeTextAnnotation,t,!0):this.pdfViewer.annotationModule.freeTextAnnotationModule.renderFreeTextAnnotations(e.freeTextAnnotation,t)),this.isInkAnnotationModule()&&e&&e.signatureInkAnnotation&&this.pdfViewer.annotationModule.inkAnnotationModule.renderExistingInkSignature(e.signatureInkAnnotation,t,o),this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.isAnnotationSelected&&this.pdfViewer.annotationModule.annotationPageIndex===t&&this.pdfViewer.annotationModule.selectAnnotationFromCodeBehind(),this.isLoadedFormFieldAdded=!1},e.prototype.renderAnnotations=function(e){var t={};if(this.documentAnnotationCollections){for(var i=!1,n=0;n<this.annotationRenderredList.length;n++)this.annotationRenderredList[n]===e&&(i=!0);var o=this.documentAnnotationCollections[e];o&&!i&&(t.shapeAnnotation=o.shapeAnnotation,t.measureShapeAnnotation=o.measureShapeAnnotation,t.textMarkupAnnotation=o.textMarkupAnnotation,t.freeTextAnnotation=o.freeTextAnnotation,t.stampAnnotations=o.stampAnnotations,t.stickyNotesAnnotation=o.stickyNotesAnnotation,t.signatureAnnotation=o.signatureAnnotation,t.signatureInkAnnotation=o.signatureInkAnnotation,this.annotationRenderredList.push(e))}if(this.isAnnotationCollectionRemoved&&(t.shapeAnnotation=[],t.measureShapeAnnotation=[],t.textMarkupAnnotation=[],t.freeTextAnnotation=[],t.stampAnnotations=[],t.stickyNotesAnnotation=[],t.signatureInkAnnotation=[]),this.isTextMarkupAnnotationModule()||this.isShapeBasedAnnotationsEnabled()){if(this.isStampAnnotationModule()){var a=t.stampAnnotations;this.pdfViewer.annotationModule.stampAnnotationModule.renderStampAnnotations(a,e)}this.pdfViewer.annotationModule.renderAnnotations(e,t.shapeAnnotation,t.measureShapeAnnotation,t.textMarkupAnnotation),this.pdfViewer.annotationModule.stickyNotesAnnotationModule.renderStickyNotesAnnotations(t.stickyNotesAnnotation,e)}if(this.pdfViewer.textSearchModule&&this.pdfViewer.textSearchModule.isTextSearch&&this.pdfViewer.textSearchModule.highlightOtherOccurrences(e),this.isImportAction){for(i=!1,n=0;n<this.annotationPageList.length;n++)this.annotationPageList[n]===e&&(i=!0);i||this.importedAnnotation&&(this.drawPageAnnotations(this.importedAnnotation,e,!0),this.annotationPageList[this.annotationPageList.length]=e)}if(this.isShapeBasedAnnotationsEnabled()){var s=this.getElement("_annotationCanvas_"+e);if(s)$(s.getBoundingClientRect(),"position:absolute;top:0px;left:0px;overflow:hidden;pointer-events:none;z-index:1000",s,e,this.pdfViewer),this.pdfViewer.renderSelector(e)}this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.stickyNotesAnnotationModule.selectCommentsAnnotation(e),this.isFreeTextAnnotationModule()&&t.freeTextAnnotation&&this.pdfViewer.annotationModule.freeTextAnnotationModule.renderFreeTextAnnotations(t.freeTextAnnotation,e),t&&t.signatureAnnotation&&this.signatureModule.renderExistingSignature(t.signatureAnnotation,e,!1),this.isInkAnnotationModule()&&t&&t.signatureInkAnnotation&&this.pdfViewer.annotationModule.inkAnnotationModule.renderExistingInkSignature(t.signatureInkAnnotation,e,!1),this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.isAnnotationSelected&&this.pdfViewer.annotationModule.selectAnnotationFromCodeBehind()},e.prototype.renderTextContent=function(e,t){var i=e.textContent,n=e.textBounds,o=e.rotation,a=this.getElement("_textLayer_"+t);a||(a=this.textLayer.addTextLayer(t,this.getPageWidth(t),this.getPageHeight(t),this.getElement("_pageDiv_"+t))),a&&i&&n&&(a.style.display="block",0===a.childNodes.length?this.textLayer.renderTextContents(t,i,n,o):this.textLayer.resizeTextContents(t,i,n,o,!0))},e.prototype.renderPageContainer=function(e,t,i,n){var o=sf.base.createElement("div",{id:this.pdfViewer.dataId+"_pageDiv_"+e,className:"e-pv-page-div",attrs:{tabindex:"0"}});o.style.width=t+"px",o.style.height=i+"px",this.pdfViewer.enableRtl?o.style.right=this.updateLeftPosition(e)+"px":o.style.left=this.updateLeftPosition(e)+"px",o.style.top=n+"px",this.pageContainer.appendChild(o),this.pageContainer.style.width=this.viewerContainer.clientWidth+"px",this.createWaitingPopup(e),this.orderPageDivElements(o,e),this.renderPageCanvas(o,t,i,e,"block"),!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode||this.isThumb||this.updateMobileScrollerPosition()},e.prototype.renderPDFInformations=function(){!this.pdfViewer.thumbnailViewModule||sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode||this.pdfViewer.thumbnailViewModule.createRequestForThumbnails(),this.pdfViewer.bookmarkViewModule&&this.pdfViewer.bookmarkViewModule.createRequestForBookmarks(),this.pdfViewer.annotationModule&&(!this.pdfViewer.isCommandPanelOpen&&!this.pdfViewer.commentPanelVisible||sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode||(this.pdfViewer.annotation.showCommentsPanelInBlazor(),this.pdfViewer.updatePdfViewerOptions("CommentPanelVisible",!0)),this.pdfViewer.annotationModule.stickyNotesAnnotationModule.createRequestForComments())},e.prototype.orderPageDivElements=function(e,t){var i=this.getElement("_pageDiv_"+(t+1));i?this.pageContainer.insertBefore(e,i):this.pageContainer.appendChild(e)},e.prototype.renderPageCanvas=function(e,t,i,n,o){if(e){var a=this.getElement("_pageCanvas_"+n);return a?(a.width=t,a.height=i,a.style.display="block",this.isMixedSizeDocument&&this.highestWidth>0&&(a.style.marginLeft="auto",a.style.marginRight="auto")):((a=sf.base.createElement("img",{id:this.pdfViewer.dataId+"_pageCanvas_"+n,className:"e-pv-page-canvas"})).width=t,a.height=i,a.style.display=o,this.isMixedSizeDocument&&this.highestWidth>0&&(a.style.marginLeft="auto",a.style.marginRight="auto"),e.appendChild(a)),a.setAttribute("alt",""),this.pdfViewer.annotationModule&&this.pdfViewer.annotation&&this.pdfViewer.annotationModule.createAnnotationLayer(e,t,i,n,o),(this.pdfViewer.textSearchModule||this.pdfViewer.textSelectionModule||this.pdfViewer.annotationModule)&&this.textLayer.addTextLayer(n,t,i,e),a}},e.prototype.applyElementStyles=function(e,t){if(this.isMixedSizeDocument&&e){var i=document.getElementById(this.pdfViewer.dataId+"_pageCanvas_"+t),n=document.getElementById(this.pdfViewer.dataId+"_oldCanvas_"+t);e&&i&&i.offsetLeft>0?(e.style.marginLeft=i.offsetLeft+"px",e.style.marginRight=i.offsetLeft+"px"):n&&n.offsetLeft>0?(e.style.marginLeft=n.offsetLeft+"px",e.style.marginRight=n.offsetLeft+"px"):(e.style.marginLeft="auto",e.style.marginRight="auto")}},e.prototype.updateLeftPosition=function(e){var t,i=this.viewerContainer.getBoundingClientRect().width;if(0===i&&(i=parseFloat(this.pdfViewer.width.toString())),this.isMixedSizeDocument&&this.highestWidth>0){t=this.viewerContainer.clientWidth>0?(this.viewerContainer.clientWidth-this.highestWidth*this.getZoomFactor())/2:(i-this.highestWidth*this.getZoomFactor())/2;var n=(this.highestWidth*this.getZoomFactor()-this.getPageWidth(e))/2;t>0?t+=n:t=n}else t=this.viewerContainer.clientWidth>0?(this.viewerContainer.clientWidth-this.getPageWidth(e))/2:(i-this.getPageWidth(e))/2;if(this.pageSize[e].width,this.pageSize[e].height,t<0||this.pdfViewer.magnificationModule&&(this.pdfViewer.magnificationModule.isAutoZoom&&this.getZoomFactor()<1||"fitToWidth"===this.pdfViewer.magnificationModule.fitType)){var o=t;(t=t>0&&sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode?o:this.pageLeft)>0&&this.isMixedSizeDocument&&o>0&&(t=o)}return t},e.prototype.applyLeftPosition=function(e){var t;if(this.pageSize[e]){if(this.isMixedSizeDocument&&this.highestWidth>0){t=this.viewerContainer.clientWidth>0?(this.viewerContainer.clientWidth-this.highestWidth*this.getZoomFactor())/2:(this.viewerContainer.getBoundingClientRect().width-this.highestWidth*this.getZoomFactor())/2;var i=(this.highestWidth*this.getZoomFactor()-this.getPageWidth(e))/2;t>0?t+=i:t=i}else t=this.viewerContainer.clientWidth>0?(this.viewerContainer.clientWidth-this.pageSize[e].width*this.getZoomFactor())/2:(this.viewerContainer.getBoundingClientRect().width-this.pageSize[e].width*this.getZoomFactor())/2;if(this.pageSize[e].width,this.pageSize[e].height,t<0||this.pdfViewer.magnificationModule&&(this.pdfViewer.magnificationModule.isAutoZoom&&this.getZoomFactor()<1||"fitToWidth"===this.pdfViewer.magnificationModule.fitType)){var n=t;t=this.pageLeft,n>0&&this.isMixedSizeDocument&&(t=n)}var o=document.getElementById(this.pdfViewer.dataId+"_pageDiv_"+e);o&&(this.pdfViewer.enableRtl?o.style.right=t+"px":o.style.left=t+"px")}},e.prototype.updatePageHeight=function(e,t){return(e-t)/e*100+"%"},e.prototype.initiatePageViewScrollChanged=function(){this.scrollHoldTimer&&clearTimeout(this.scrollHoldTimer),this.scrollHoldTimer=null,this.scrollPosition*this.getZoomFactor()!==this.viewerContainer.scrollTop&&(this.scrollPosition=this.viewerContainer.scrollTop,this.pageViewScrollChanged(this.currentPageNumber))},e.prototype.renderCountIncrement=function(){this.pdfViewer.magnificationModule&&this.pdfViewer.magnificationModule.renderCountIncrement()},e.prototype.pageViewScrollChanged=function(e){this.isPanMode?-1===this.renderedPagesList.indexOf(e-1)&&(this.reRenderedCount=0):this.reRenderedCount=0;var t=e-1;if(e!==this.previousPage&&e<=this.pageCount){var i=!1;this.isDataExits&&!this.getStoredData(t)&&(i=!0),-1!==this.renderedPagesList.indexOf(t)||this.getMagnified()||i||(this.renderCountIncrement(),this.createRequestForRender(t))}if(!this.getMagnified()&&!this.getPagesPinchZoomed()){var n=t-1,o=(i=!1,this.getElement("_pageCanvas_"+n));this.isDataExits&&!this.getStoredData(n)&&(i=!0),null===o||i||-1!==this.renderedPagesList.indexOf(n)||this.getMagnified()||(this.renderCountIncrement(),this.createRequestForRender(n)),this.isMinimumZoom&&this.renderPreviousPagesInScroll(n);var a=t+1,s=0;if(a<this.pageCount&&(s=this.getPageHeight(a),-1===this.renderedPagesList.indexOf(a)&&!this.getMagnified()&&s))for(this.createRequestForRender(a),this.renderCountIncrement();this.viewerContainer.clientHeight>s&&(a+=1)<this.pageCount;)this.renderPageElement(a),this.createRequestForRender(a),s+=this.getPageHeight(a),this.renderCountIncrement()}},e.prototype.renderPreviousPagesInScroll=function(e){var t=e-1,i=t-1;t>0&&(-1!==this.renderedPagesList.indexOf(t)||this.getMagnified()||(this.createRequestForRender(t),this.renderCountIncrement()),i>0&&(-1!==this.renderedPagesList.indexOf(i)||this.getMagnified()||(this.createRequestForRender(i),this.renderCountIncrement())))},e.prototype.downloadDocument=function(e){e=(URL||webkitURL).createObjectURL(e);var t=sf.base.createElement("a");if(t.click)t.href=e,t.target="_parent","download"in t&&(t.download=this.downloadFileName),(document.body||document.documentElement).appendChild(t),t.click(),t.parentNode.removeChild(t);else{if(window.top===window&&e.split("#")[0]===window.location.href.split("#")[0]){var i=-1===e.indexOf("?")?"?":"&";e=e.replace(/#|$/,i+"$&")}window.open(e,"_parent")}},e.prototype.downloadExportAnnotationJson=function(e,t){e=(URL||webkitURL).createObjectURL(e);var i=sf.base.createElement("a");if(i.click)i.href=e,i.target="_parent","download"in i&&(null!==this.pdfViewer.exportAnnotationFileName?i.download=this.pdfViewer.exportAnnotationFileName.split(".")[0]+".json":i.download=this.pdfViewer.fileName.split(".")[0]+".json"),(document.body||document.documentElement).appendChild(i),i.click(),i.parentNode.removeChild(i),t?this.pdfViewer.fireFormExportSuccess(e,i.download):this.pdfViewer.fireExportSuccess(e,i.download);else{if(window.top===window&&e.split("#")[0]===window.location.href.split("#")[0]){var n=-1===e.indexOf("?")?"?":"&";e=e.replace(/#|$/,n+"$&")}window.open(e,"_parent"),t?this.pdfViewer.fireFormExportSuccess(e,this.pdfViewer.fileName.split(".")[0]+".json"):this.pdfViewer.fireExportSuccess(e,this.pdfViewer.fileName.split(".")[0]+".json")}},e.prototype.downloadExportedXFdfAnnotation=function(e){e=(URL||webkitURL).createObjectURL(e);var t=sf.base.createElement("a");t.click&&(t.href=e,t.target="_parent","download"in t&&(null!==this.pdfViewer.exportAnnotationFileName?t.download=this.pdfViewer.exportAnnotationFileName.split(".")[0]+".xfdf":t.download=this.pdfViewer.fileName.split(".")[0]+".xfdf"),(document.body||document.documentElement).appendChild(t),t.click(),t.parentNode.removeChild(t),this.pdfViewer.fireExportSuccess(e,t.download))},e.prototype.exportFormFields=function(e){this.createRequestForExportFormfields(!1,e)},e.prototype.importFormFields=function(e){this.createRequestForImportingFormfields(e)},e.prototype.createRequestForExportFormfields=function(e,t,i){var n,o=this;n=this;var a=new Promise((function(a,s){var r=n.createFormfieldsJsonData();n.pdfViewer.fireFormExportStarted(r.pdfAnnotation),r.action="ExportFormFields",r.hashId=n.hashId,r.fileName=n.pdfViewer.fileName,t&&""!==t&&!e&&(r.filePath=t),r.elementId=o.pdfViewer.dataId,n.jsonDocumentId&&(r.document=n.jsonDocumentId),i&&(r.formFieldDataFormat=i);var l=n.pdfViewer.serviceUrl+"/"+n.pdfViewer.serverActionSettings.exportFormFields;n.exportFormFieldsRequestHandler=new xe(o.pdfViewer),n.exportFormFieldsRequestHandler.url=l,n.exportFormFieldsRequestHandler.mode=!0,n.exportFormFieldsRequestHandler.responseType="text",n.exportFormFieldsRequestHandler.send(r),n.exportFormFieldsRequestHandler.onSuccess=function(t){var o=t.data;if(o&&o)if(n.pdfViewer.fireAjaxRequestSuccess(n.pdfViewer.serverActionSettings.exportFormFields,o),e||i){var s=o;e&&(s=decodeURIComponent(escape(atob(o.split(",")[1])))),a(s),n.pdfViewer.fireFormExportSuccess(s,n.pdfViewer.fileName)}else if(o.split("base64,")[1]){var r=n.createBlobUrl(o.split("base64,")[1],"application/json");sf.base.Browser.isIE||"edge"===sf.base.Browser.info.name?window.navigator.msSaveOrOpenBlob(r,n.pdfViewer.fileName.split(".")[0]+".json"):n.downloadExportAnnotationJson(r,!0)}},n.exportFormFieldsRequestHandler.onFailure=function(e){n.pdfViewer.fireFormExportFailed(r.pdfAnnotation,e.statusText)},n.exportFormFieldsRequestHandler.onError=function(e){n.pdfViewer.fireFormExportFailed(r.pdfAnnotation,e.statusText)}}));return!e&&!i||a},e.prototype.createRequestForImportingFormfields=function(e,t){var n;n=this;var o={};"object"===i(e)?o.data=JSON.stringify(e):(o.data=e,"json"===e.split(".")[1]&&(o.fileName=n.pdfViewer.fileName)),n.pdfViewer.fireFormImportStarted(e),o.action="ImportFormFields",o.hashId=n.hashId,o.elementId=this.pdfViewer.dataId,n.jsonDocumentId&&(o.document=n.jsonDocumentId),t&&(o.formFieldDataFormat=t);var a=n.pdfViewer.serviceUrl+"/"+n.pdfViewer.serverActionSettings.importFormFields;n.importFormFieldsRequestHandler=new xe(this.pdfViewer),n.importFormFieldsRequestHandler.url=a,n.importFormFieldsRequestHandler.mode=!0,n.importFormFieldsRequestHandler.responseType="text",n.importFormFieldsRequestHandler.send(o),n.importFormFieldsRequestHandler.onSuccess=function(t){var o=t.data;if(o&&"null"!==o){if("object"!==i(o))try{"object"!==i(o=JSON.parse(o))&&(n.onControlError(500,o,n.pdfViewer.serverActionSettings.importFormFields),n.pdfViewer.fireFormImportFailed(e,t.statusText),o=null)}catch(t){n.pdfViewer.fireFormImportFailed(e,n.pdfViewer.localeObj.getConstant("File not found")),this.pdfViewer._dotnetInstance.invokeMethodAsync("GetLocaleText","PdfViewer_FileNotFound").then((function(e){n.openImportExportNotificationPopup(e)})),n.onControlError(500,o,n.pdfViewer.serverActionSettings.importFormFields),o=null}n.pdfViewer.fireAjaxRequestSuccess(n.pdfViewer.serverActionSettings.importFormFields,o),n.pdfViewer.fireFormImportSuccess(e),window.sessionStorage.removeItem(this.documentId+"_formfields"),n.saveFormfieldsData(o);for(var a=0;a<n.renderedPagesList.length;a++)this.pdfViewer.formFieldsModule.renderFormFields(n.renderedPagesList[a])}else{n.pdfViewer.fireFormImportFailed(e,t.statusText),this.pdfViewer._dotnetInstance.invokeMethodAsync("GetLocaleText","PdfViewer_FileNotFound").then((function(e){n.openImportExportNotificationPopup(e)}))}},n.importFormFieldsRequestHandler.onFailure=function(t){n.pdfViewer.fireFormImportFailed(e,t.statusText)},n.importFormFieldsRequestHandler.onError=function(t){n.pdfViewer.fireFormImportFailed(e,t.statusText)}},e.prototype.createFormfieldsJsonData=function(){var e={};if(this.pdfViewer.formFieldsModule){var t=this.pdfViewer.formFieldsModule.downloadFormFieldsData();e.fieldsData=t}return e},e.prototype.constructJsonDownload=function(){var e={hashId:this.hashId};if(this.jsonDocumentId&&(e.documentId=this.jsonDocumentId),e.uniqueId=this.documentId,this.importPageList=[],this.pdfViewer.annotationModule&&this.saveImportedAnnotations(),this.isTextMarkupAnnotationModule()){this.isJsonExported=!1;var t=this.pdfViewer.annotationModule.textMarkupAnnotationModule.saveTextMarkupAnnotations();e.textMarkupAnnotations=t}if(this.isShapeAnnotationModule()){this.isJsonExported=!1;var i=this.pdfViewer.annotationModule.shapeAnnotationModule.saveShapeAnnotations();e.shapeAnnotations=i}if(this.isCalibrateAnnotationModule()){this.isJsonExported=!1;var n=this.pdfViewer.annotationModule.measureAnnotationModule.saveMeasureShapeAnnotations();e.measureShapeAnnotations=n}if(this.isStampAnnotationModule()){var o=this.pdfViewer.annotationModule.stampAnnotationModule.saveStampAnnotations();e.stampAnnotations=o}if(this.isCommentAnnotationModule()){var a=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.saveStickyAnnotations();e.stickyNotesAnnotation=a}if(this.isImportAction){var s=JSON.stringify(this.importPageList);e.importPageList=s}if(this.pdfViewer.formFieldsModule){var r=this.pdfViewer.formFieldsModule.downloadFormFieldsData();e.fieldsData=r}var l=this.signatureModule.saveSignature();if(e.signatureData=l,this.pdfViewer.isSignatureEditable&&(e.isSignatureEdited=this.pdfViewer.isSignatureEditable),this.isFreeTextAnnotationModule()){var d=this.pdfViewer.annotationModule.freeTextAnnotationModule.saveFreeTextAnnotations();e.freeTextAnnotation=d}if(this.isInkAnnotationModule()){var h=this.pdfViewer.annotationModule.inkAnnotationModule.saveInkSignature();e.inkSignatureData=h}if(e.action="Download",e.elementId=this.pdfViewer.dataId,this.pdfViewer.annotationModule){var p=this.getAnnotationsPageList();e.isAnnotationsExist=this.isAnnotationsExist(e.textMarkupAnnotations)||this.isAnnotationsExist(e.shapeAnnotations)||this.isAnnotationsExist(e.measureShapeAnnotations)||this.isAnnotationsExist(e.stampAnnotations)||this.isAnnotationsExist(e.stickyNotesAnnotation)||this.isAnnotationsExist(e.signatureData)||this.isAnnotationsExist(e.freeTextAnnotation)||this.isAnnotationsExist(e.inkSignatureData)||p.length>0,e.annotationsPageList=JSON.stringify(p)}if(this.pdfViewer.formFieldsModule){var c=this.getFormFieldsPageList();e.isFormFieldAnnotationsExist=this.isFieldsDataExist(e.fieldsData)||c.length>0,e.formFieldsPageList=JSON.stringify(c)}return this.pdfViewer.annotationCollection&&(e.annotationCollection=JSON.stringify(this.pdfViewer.annotationCollection)),e},e.prototype.isAnnotationsExist=function(e){return!sf.base.isNullOrUndefined(e)&&JSON.parse(e).flat(1).length>0},e.prototype.isFieldsDataExist=function(e){return!sf.base.isNullOrUndefined(e)&&0!==Object.entries(JSON.parse(e)).length},e.prototype.getAnnotationsPageList=function(){var e=this.pdfViewer.annotationCollection.map((function(e){return e.pageNumber})),t=this.pdfViewer.annotationModule.actionCollection.filter((function(e,t,i){return"formFields"!==e.annotation.propName&&null==e.annotation.formFieldAnnotationType})).map((function(e){return e.pageIndex}));return e.concat(t).filter((function(e,t,i){return i.indexOf(e)===t&&void 0!==e}))},e.prototype.getFormFieldsPageList=function(){var e=this.pdfViewer.formFieldCollection.map((function(e){return sf.base.isNullOrUndefined(e.properties)?e.pageNumber+1:e.properties.pageNumber})),t=sf.base.isNullOrUndefined(this.pdfViewer.annotationModule)?[]:this.pdfViewer.annotationModule.actionCollection.filter((function(e,t,i){return"formFields"==e.annotation.propName||null!=e.annotation.formFieldAnnotationType})).map((function(e){return e.pageIndex}));return e.concat(t).filter((function(e,t,i){return i.indexOf(e)===t&&void 0!==e}))},e.prototype.checkFormFieldCollection=function(e){var t,i=!1;if(t=this.getItemFromSessionStorage("_formDesigner"))for(var n=JSON.parse(t),o=0;o<n.length;o++)if("RadioButton"===n[o].FormField.formFieldAnnotationType){for(var a=0;a<n[o].FormField.radiobuttonItem.length;a++)if(e===n[o].FormField.radiobuttonItem[a].id.split("_")[0]){i=!0;break}}else if(n[o].Key.split("_")[0]===e){i=!0;break}return i},e.prototype.isFreeTextAnnotationModule=function(){return!!this.pdfViewer.annotation&&!(!this.pdfViewer.annotation||!this.pdfViewer.annotation.freeTextAnnotationModule)},e.prototype.createRequestForDownload=function(){var e;(e=this).pdfViewer.fireDownloadStart(e.downloadFileName);var t=this.constructJsonDownload();e.digitalSignaturePages&&0!==e.digitalSignaturePages.length&&(e.pdfViewer.isDocumentEdited?t.digitalSignatureDocumentEdited=!0:t.digitalSignatureDocumentEdited=!1),this.dowonloadRequestHandler=new xe(this.pdfViewer),this.dowonloadRequestHandler.url=e.pdfViewer.serviceUrl+"/"+e.pdfViewer.serverActionSettings.download,this.dowonloadRequestHandler.responseType="text",this.validateForm&&this.pdfViewer.enableFormFieldsValidation?(this.pdfViewer.fireValidatedFailed(e.pdfViewer.serverActionSettings.download),this.validateForm=!1):this.dowonloadRequestHandler.send(t),this.dowonloadRequestHandler.onSuccess=function(t){var n=t.data;if(n){if("object"!==i(n)&&-1===n.indexOf("data:application/pdf")&&(e.onControlError(500,n,e.pdfViewer.serverActionSettings.download),n=null),"object"===i(n)&&(n=JSON.parse(n)),n){e.pdfViewer.downloadFileName&&e.pdfViewer.downloadFileName!==e.downloadFileName&&(e.downloadFileName=e.pdfViewer.downloadFileName),e.pdfViewer.fireAjaxRequestSuccess(e.pdfViewer.serverActionSettings.download,n);var o=e.createBlobUrl(n.split("base64,")[1],"application/pdf");sf.base.Browser.isIE||"edge"===sf.base.Browser.info.name?window.navigator.msSaveOrOpenBlob(o,e.downloadFileName):e.downloadDocument(o),e.pdfViewer.fireDownloadEnd(e.downloadFileName,n)}e.updateDocumentAnnotationCollections()}else e.pdfViewer.fireDownloadEnd(e.downloadFileName,"PDF Document saved in server side successfully")},this.dowonloadRequestHandler.onFailure=function(t){e.pdfViewer.fireAjaxRequestFailed(t.status,t.statusText,e.pdfViewer.serverActionSettings.download)},this.dowonloadRequestHandler.onError=function(t){e.openNotificationPopup(),e.pdfViewer.fireAjaxRequestFailed(t.status,t.statusText,e.pdfViewer.serverActionSettings.download)}},e.prototype.getTileCount=function(e){if(e&&"number"==typeof e){var t=1;t=this.getZoomFactor()>2&&e<=1200?2:e/816;var i=parseInt(t.toFixed());return i<=0?1:this.pdfViewer.tileRenderingSettings.enableTileRendering?i:1}return 1},e.prototype.createRequestForRender=function(e){var t,n=(t=this).getElement("_pageCanvas_"+e),o=t.getElement("_oldCanvas_"+e);if(this.pageSize&&this.pageSize[e]){var a=this.pageSize[e].width,s=(this.pageSize[e].height,this.getElement("_pageCanvas_"+e),1200),r=t.pdfViewer.element.clientHeight>0?t.pdfViewer.element.clientHeight:t.pdfViewer.element.style.height;s=parseInt(s),r=parseInt(r)?parseInt(r):500;var l=void 0,d=void 0,h=this.getTileCount(a);if(n){isNaN(parseFloat(n.style.width))&&!o||t.isInitialLoaded&&t.showPageLoadingIndicator(e,!1);var p=t.getStoredData(e);l=d=h;var c=t.pdfViewer.tileRenderingSettings;c.enableTileRendering&&c.x>0&&c.y>0&&(s<a||this.getZoomFactor()>2)&&(l=c.x,d=c.y),t.tileRequestCount=l*d;var u=this.retrieveCurrentZoomFactor(),f=void 0;if(1===h)p=t.getStoredData(e),f=t.pageRequestSent(e,0,0);else{var g=JSON.parse(t.getWindowSessionStorageTile(e,0,0,u));g&&(p=g)}if(p&&p.uniqueId===t.documentId){if(n.style.backgroundColor="#fff",t.pdfViewer.magnification&&t.pdfViewer.magnification.isPinchZoomed||!this.pageSize[e])return;var m=this.retrieveCurrentZoomFactor();if(s=m>2&&a<=1200?700:1200,t.pdfViewer.tileRenderingSettings.enableTileRendering||(s=1200),s>=a||!t.pdfViewer.tileRenderingSettings.enableTileRendering)t.renderPage(p,e);else{t.isTileImageRendered=!0,t.tileRenderCount=0,t.tileRenderPage(p,e);for(var w=0;w<l;w++)for(var y=0;y<d;y++)0===w&&0===y||(p=JSON.parse(this.getWindowSessionStorageTile(e,w,y,m)))&&t.tileRenderPage(p,e)}p=null}else if(null===p||!f){if(this.getPagesPinchZoomed()?t.showPageLoadingIndicator(e,!1):t.showPageLoadingIndicator(e,!0),t.getPagesZoomed()&&t.isInitialLoaded&&t.showPageLoadingIndicator(e,!1),t.pdfViewer.magnification&&t.pdfViewer.magnification.isPinchZoomed)return;t.pdfViewer.tileRenderingSettings.enableTileRendering||(l=1,d=1),t.tileRenderCount=0,t.isTileImageRendered=!0;for(var S=0;S<l;S++)for(var v=0;v<d;v++){var b=null,V=this.retrieveCurrentZoomFactor();s=V>2&&a<=1200?700:1200,t.pdfViewer.tileRenderingSettings.enableTileRendering||(s=1200),b={xCoordinate:S,yCoordinate:v,viewPortWidth:s,viewPortHeight:r,pageNumber:e,hashId:t.hashId,tilecount:h,tileXCount:l,tileYCount:d,zoomFactor:V,action:"RenderPdfPages",uniqueId:this.documentId,elementId:t.pdfViewer.element.id,digitalSignaturePresent:t.digitalSignaturePresent(e)},this.jsonDocumentId&&(b.documentId=this.jsonDocumentId),t.pageRequestHandler=new xe(this.pdfViewer),t.pageRequestHandler.url=t.pdfViewer.serviceUrl+"/"+t.pdfViewer.serverActionSettings.renderPages,t.pageRequestHandler.responseType="json",t.pageRequestHandler.send(b),t.requestLists.push(t.documentId+"_"+e+"_"+S+"_"+v+"_"+V),t.pageRequestHandler.onSuccess=function(n){if(!(t.pdfViewer.magnification&&t.pdfViewer.magnification.isPinchZoomed||!t.pageSize[e])){var o=n.data;if(o&&"object"!==i(o))try{o=JSON.parse(o)}catch(e){t.onControlError(500,o,t.pdfViewer.serverActionSettings.renderPages),o=null}if(o){try{for(;"object"!==i(o);)o=JSON.parse(o)}catch(e){o=null}if(o&&o.image&&o.uniqueId===t.documentId){var r=o.pageWidth&&o.pageWidth>0?o.pageWidth:a;t.pdfViewer.fireAjaxRequestSuccess(t.pdfViewer.serverActionSettings.renderPages,o);var l=void 0!==o.pageNumber?o.pageNumber:e;s>=r||!t.pdfViewer.tileRenderingSettings.enableTileRendering?t.storeWinData(o,l):t.storeWinData(o,l,o.tileX,o.tileY),s>=r||!t.pdfViewer.tileRenderingSettings.enableTileRendering?t.renderPage(o,l):t.tileRenderPage(o,l)}}}},this.pageRequestHandler.onFailure=function(e){t.pdfViewer.fireAjaxRequestFailed(e.status,e.statusText,t.pdfViewer.serverActionSettings.renderPages)},this.pageRequestHandler.onError=function(e){t.openNotificationPopup(),t.pdfViewer.fireAjaxRequestFailed(e.status,e.statusText,t.pdfViewer.serverActionSettings.renderPages)}}}t.renderedPagesList.push(e)}}},e.prototype.digitalSignaturePresent=function(e){var t=!1;return this.digitalSignaturePages&&0!==this.digitalSignaturePages.length&&-1!=this.digitalSignaturePages.indexOf(e)&&(t=!0),t},e.prototype.pageRequestSent=function(e,t,i){var n=this.retrieveCurrentZoomFactor(),o=this.documentId+"_"+e+"_"+t+"_"+i+"_"+n;return!!(this.requestLists&&this.requestLists.indexOf(o)>-1)},e.prototype.onControlError=function(e,t,i){this.openNotificationPopup(),this.pdfViewer.fireAjaxRequestFailed(e,t,i)},e.prototype.getStoredData=function(e,t){var i=this.retrieveCurrentZoomFactor();this.pdfViewer.restrictZoomRequest&&!this.pdfViewer.tileRenderingSettings.enableTileRendering&&(i=1);var n=this.getWindowSessionStorage(e,i)?this.getWindowSessionStorage(e,i):this.getPinchZoomPage(e);if(!n&&t){var o=this.getWindowSessionStorageTile(e,0,0,i);o&&(n=o)}var a=null;return n&&(a=n,this.isPinchZoomStorage||(a=JSON.parse(n)),this.isPinchZoomStorage=!1),a},e.prototype.storeWinData=function(e,t,i,n){var o,a=this.createBlobUrl(e.image.split("base64,")[1],"image/png"),s=(URL||webkitURL).createObjectURL(a);isNaN(i)&&isNaN(n)||0===i&&0===n?(o={image:s,transformationMatrix:e.transformationMatrix,hyperlinks:e.hyperlinks,hyperlinkBounds:e.hyperlinkBounds,linkAnnotation:e.linkAnnotation,linkPage:e.linkPage,annotationLocation:e.annotationLocation,textContent:e.textContent,width:e.width,textBounds:e.textBounds,pageText:e.pageText,rotation:e.rotation,scaleFactor:e.scaleFactor,uniqueId:e.uniqueId,zoomFactor:e.zoomFactor,tileX:i,tileY:n,hyperLinkBorderWidth:e.hyperLinkBorderWidth,hyperLinkBorderColor:e.hyperLinkBorderColor,textWebLinkBorderWidth:e.textWebLinkBorderWidth,textWebLinkBorderColor:e.textWebLinkBorderColor},this.pageSize[t]&&(this.pageSize[t].rotation=parseFloat(e.rotation)),this.textLayer.characterBound[t]=e.characterBounds):o={image:s,transformationMatrix:e.transformationMatrix,tileX:i,tileY:n,width:e.width,zoomFactor:e.zoomFactor};this.pageSize[t]&&this.pageSize[t].width,this.manageSessionStorage(t,o,i,n)},e.prototype.setCustomAjaxHeaders=function(e){for(var t=0;t<this.pdfViewer.ajaxRequestSettings.ajaxHeaders.length;t++)e.setRequestHeader(this.pdfViewer.ajaxRequestSettings.ajaxHeaders[t].headerName,this.pdfViewer.ajaxRequestSettings.ajaxHeaders[t].headerValue)},e.prototype.getPinchZoomPage=function(e){for(var t in this.pinchZoomStorage)if(this.pinchZoomStorage.hasOwnProperty(t)&&this.pinchZoomStorage[t].index===e)return this.isPinchZoomStorage=!0,this.pinchZoomStorage[t].pinchZoomStorage;return null},e.prototype.getWindowSessionStorage=function(e,t){return window.sessionStorage.getItem(this.documentId+"_"+e+"_"+t)},e.prototype.getWindowSessionStorageTile=function(e,t,i,n){return window.sessionStorage.getItem(this.documentId+"_"+e+"_"+t+"_"+i+"_"+n)},e.prototype.retrieveCurrentZoomFactor=function(){var e=this.getZoomFactor();return this.pdfViewer.enableZoomOptimization?(e<=1?e=1:e>1&&e<=2?e=2:e>2&&e<=3?e=3:e>3&&e<=4&&(e=4),e):(e<=0&&(e=1),e)},e.prototype.manageSessionStorage=function(e,t,i,n){var o=Math.round(JSON.stringify(window.sessionStorage).length/1024);if(o>=5e3){if(!this.isStorageExceed){for(var a=[],s=0;s<window.sessionStorage.length;s++)window.sessionStorage.key(s)&&window.sessionStorage.key(s).split("_")[3]&&"annotations"===window.sessionStorage.key(s).split("_")[3]&&(this.annotationStorage[window.sessionStorage.key(s)]=window.sessionStorage.getItem(window.sessionStorage.key(s)),a.push(window.sessionStorage.key(s)));if(a)for(s=0;s<a.length;s++)window.sessionStorage.removeItem(a[s])}if(this.isStorageExceed=!0,(o=Math.round(JSON.stringify(window.sessionStorage).length/1024))>=5e3){var r=window.sessionStorage.length;r>200&&(r=200);for(s=0;s<r;s++)window.sessionStorage.key(s)&&window.sessionStorage.key(s).split("_")[3]&&"annotations"!==window.sessionStorage.key(s).split("_")[3]&&window.sessionStorage.removeItem(window.sessionStorage.key(s))}}var l=this.retrieveCurrentZoomFactor();isNaN(i)&&isNaN(n)?(window.sessionStorage.setItem(this.documentId+"_"+e+"_"+l,JSON.stringify(t)),this.sessionStorage.push(this.documentId+"_"+e+"_"+l)):(this.sessionStorage.push(this.documentId+"_"+e+"_"+i+"_"+n+"_"+l),window.sessionStorage.setItem(this.documentId+"_"+e+"_"+i+"_"+n+"_"+l,JSON.stringify(t)))},e.prototype.createBlobUrl=function(e,t){for(var i=atob(e),n=[],o=0;o<i.length;o+=512){for(var a=i.slice(o,o+512),s=new Array(a.length),r=0;r<a.length;r++)s[r]=a.charCodeAt(r);var l=new Uint8Array(s);n.push(l)}return new Blob(n,{type:t})},e.prototype.getRandomNumber=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){return(16*Math.random()|0).toString(16)}))},e.prototype.createGUID=function(){return"Sync_PdfViewer_"+this.getRandomNumber()},e.prototype.isClickedOnScrollBar=function(e,t){var i=!1;return t&&this.setScrollDownValue(e.type,!1),this.viewerContainer.clientWidth+this.viewerContainer.offsetLeft<e.clientX&&e.clientX<this.viewerContainer.offsetWidth+this.viewerContainer.offsetLeft&&(i=!0,t&&this.setScrollDownValue(e.type,!0)),this.viewerContainer.clientHeight+this.viewerContainer.offsetTop<e.clientY&&e.clientY<this.viewerContainer.offsetHeight+this.viewerContainer.offsetTop&&(i=!0,t&&this.setScrollDownValue(e.type,!0)),i},e.prototype.setScrollDownValue=function(e,t){"mousedown"===e&&(this.isScrollbarMouseDown=t)},e.prototype.disableTextSelectionMode=function(){this.isTextSelectionDisabled=!0,this.viewerContainer.classList.remove("e-enable-text-selection"),this.pdfViewer.textSelectionModule&&this.pdfViewer.textSelectionModule.clearTextSelection(),this.viewerContainer.classList.add("e-disable-text-selection"),this.viewerContainer.addEventListener("selectstart",(function(){return!1}))},e.prototype.getElement=function(e){return document.getElementById(this.pdfViewer.dataId+e)},e.prototype.getPageWidth=function(e){return this.pageSize[e]?this.pageSize[e].width*this.getZoomFactor():0},e.prototype.getPageHeight=function(e){return this.pageSize[e]?this.pageSize[e].height*this.getZoomFactor():0},e.prototype.getPageTop=function(e){return this.pageSize[e]?this.pageSize[e].top*this.getZoomFactor():0},e.prototype.isAnnotationToolbarHidden=function(){return!this.pdfViewer.toolbarModule.annotationToolbarModule||this.pdfViewer.toolbarModule.annotationToolbarModule.isToolbarHidden},e.prototype.getTextMarkupAnnotationMode=function(){return!!this.isTextMarkupAnnotationModule()&&this.pdfViewer.annotationModule.textMarkupAnnotationModule.isTextMarkupAnnotationMode},e.prototype.isNewFreeTextAnnotation=function(){return!this.pdfViewer.annotationModule||!this.pdfViewer.annotationModule.freeTextAnnotationModule||!this.pdfViewer.annotationModule.freeTextAnnotationModule.isNewFreeTextAnnot},e.prototype.getCurrentTextMarkupAnnotation=function(){return!!this.isTextMarkupAnnotationModule()&&!!this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation},e.prototype.getSelectTextMarkupCurrentPage=function(){return this.isTextMarkupAnnotationModule()?this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage:null},e.prototype.getAnnotationToolStatus=function(){return!!this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.annotationToolbarModule.isAnnotationButtonsEnabled()},e.prototype.getPopupNoteVisibleStatus=function(){return!!this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.isPopupNoteVisible},e.prototype.isTextMarkupAnnotationModule=function(){return this.pdfViewer.annotationModule?this.pdfViewer.annotationModule.textMarkupAnnotationModule:null},e.prototype.isShapeAnnotationModule=function(){return!!this.pdfViewer.annotation&&!(!this.pdfViewer.annotation||!this.pdfViewer.annotation.shapeAnnotationModule)},e.prototype.isCalibrateAnnotationModule=function(){return!!this.pdfViewer.annotation&&!(!this.pdfViewer.annotation||!this.pdfViewer.annotation.measureAnnotationModule)},e.prototype.isStampAnnotationModule=function(){return!!this.pdfViewer.annotation&&!(!this.pdfViewer.annotation||!this.pdfViewer.annotation.stampAnnotationModule)},e.prototype.isInkAnnotationModule=function(){return!!this.pdfViewer.annotation&&!(!this.pdfViewer.annotation||!this.pdfViewer.annotation.inkAnnotationModule)},e.prototype.isCommentAnnotationModule=function(){return!!this.pdfViewer.annotation&&!(!this.pdfViewer.annotation||!this.pdfViewer.annotation.stickyNotesAnnotationModule)},e.prototype.isShapeBasedAnnotationsEnabled=function(){return!!(this.isShapeAnnotationModule()||this.isCalibrateAnnotationModule()||this.isStampAnnotationModule()||this.isCommentAnnotationModule())},e.prototype.getMousePosition=function(e){var t,i,n;if(-1!==e.type.indexOf("touch")){if(t=e,this.pdfViewer.annotation){var o=this.getElement("_pageDiv_"+this.pdfViewer.annotation.getEventPageNumber(e));if(o){var a=o.getBoundingClientRect();i=t.changedTouches[0].clientX-a.left,n=t.changedTouches[0].clientY-a.top}}}else if(e.target.classList.contains("e-pv-hyperlink"))i=e.offsetX+e.target.offsetLeft,n=e.offsetY+e.target.offsetTop;else if((e.target.classList.contains("e-pv-text")||e.target.classList.contains("e-pdfviewer-formFields")&&"text"!=e.target.attributes[0].nodeValue||e.target.classList.contains("e-pdfviewer-signatureformfields"))&&e.target.parentElement){var s=e.target.parentElement.getBoundingClientRect();i=e.clientX-s.left,n=e.clientY-s.top}else if(e.target.classList.contains("e-pdfviewer-formFields")&&"text"==e.target.attributes[0].nodeValue){s=e.target.parentElement.parentElement.getBoundingClientRect();i=e.clientX-s.left,n=e.clientY-s.top}else if(e.target&&e&&e.path&&e.target.parentElement&&e.target.parentElement.classList.contains("foreign-object")){s=e.path[4].getBoundingClientRect();i=e.clientX-s.left,n=e.clientY-s.top}else if(e.target&&e&&e.path&&e.target.parentElement&&e.target.parentElement.parentElement.classList.contains("foreign-object")){s=e.path[4].getBoundingClientRect();i=e.clientX-s.left,n=e.clientY-s.top}else if(e.target&&e.target.parentElement&&e.target.parentElement.classList.contains("foreign-object")){s=e.target.offsetParent.offsetParent.offsetParent.getBoundingClientRect();i=e.clientX-s.left,n=e.clientY-s.top}else i=e.offsetX,n=e.offsetY;return{x:i,y:n}},e.prototype.getMouseEventArgs=function(e,t,i,n){var o,a;return t.position=e,n?o=Oe(i,this,this.pdfViewer):"Drag"===this.action||"ConnectorSourceEnd"===this.action||"SegmentEnd"===this.action||"OrthoThumb"===this.action||"BezierSourceThumb"===this.action||"BezierTargetThumb"===this.action||"ConnectorTargetEnd"===this.action||-1!==this.action.indexOf("Rotate")||-1!==this.action.indexOf("Resize")?(o=this.pdfViewer.selectedItems,("Drag"===this.action&&o&&this.pdfViewer.selectedItems.annotations.length>0||"Drag"===this.action&&o&&this.pdfViewer.selectedItems.formFields.length>0)&&(o=Oe(i,this,this.pdfViewer))):o=Oe(i,this,this.pdfViewer),o&&(a=o.wrapper),n?(t.target=o,t.targetWrapper=a):(t.source=o,t.sourceWrapper=a),t.actualObject=this.eventArgs.actualObject,t},e.prototype.findToolToActivate=function(e,t){t={x:t.x/this.getZoomFactor(),y:t.y/this.getZoomFactor()};var i=this.pdfViewer.selectedItems.wrapper;if(i&&e){var n=i.bounds,o=new sf.drawings.Rect(n.x,n.y,n.width,n.height);if("Line"===e.shapeAnnotationType||"LineWidthArrowHead"===e.shapeAnnotationType||"Distance"===e.shapeAnnotationType||"Polygon"===e.shapeAnnotationType){var a=this.pdfViewer.selectedItems.annotations[0];if(a)for(var s=0;s<a.vertexPoints.length;s++)if(sf.drawings.contains(t,a.vertexPoints[s],10)&&0!==a.leaderHeight)return"ConnectorSegmentPoint_"+s}if("Distance"===e.shapeAnnotationType){var r=0,l=void 0;if(e&&e.wrapper)for(s=0;s<e.wrapper.children.length;s++){var d=sf.drawings.Point.findAngle(e.sourcePoint,e.targetPoint);if(e.wrapper.children[s].id.indexOf("leader")>-1){var h=e.wrapper.children[0].bounds.center;0===r?(l={x:e.sourcePoint.x,y:e.sourcePoint.y-e.leaderHeight},h=e.sourcePoint):(l={x:e.targetPoint.x,y:e.targetPoint.y-e.leaderHeight},h=e.targetPoint);var p=sf.drawings.identityMatrix();sf.drawings.rotateMatrix(p,d,h.x,h.y);var c=sf.drawings.transformPointByMatrix(p,{x:l.x,y:l.y});if(sf.drawings.contains(t,c,10))return"Leader"+r;r++}}}var u=10/this.getZoomFactor(),f=sf.drawings.identityMatrix();sf.drawings.rotateMatrix(f,e.rotateAngle+i.parentTransform,i.offsetX,i.offsetY);var g=i.offsetX-i.pivot.x*i.actualSize.width,m=i.offsetY-i.pivot.y*i.actualSize.height,w={x:g+(.5===i.pivot.x?2*i.pivot.x:i.pivot.x)*i.actualSize.width/2,y:m-30/this.getZoomFactor()};if(w=sf.drawings.transformPointByMatrix(f,w),"Stamp"===e.shapeAnnotationType&&sf.drawings.contains(t,w,u))return"Rotate";if((o=this.inflate(u,o)).containsPoint(t,0)){var y=this.checkResizeHandles(this.pdfViewer,i,t,f,g,m);if(y)return y}return this.pdfViewer.selectedItems.annotations.indexOf(e)>-1?"Drag":"Select"}return this.pdfViewer.tool||"Select"},e.prototype.inflate=function(e,t){return t.x-=e,t.y-=e,t.width+=2*e,t.height+=2*e,t},e.prototype.checkResizeHandles=function(e,t,i,n,o,a){var s;return s||(s=this.checkForResizeHandles(e,t,i,n,o,a)),s||null},e.prototype.checkForResizeHandles=function(e,t,i,n,o,a){var s=10;(t.actualSize.width<40||t.actualSize.height<40)&&(s=5*this.getZoomFactor()/1);e.selectedItems;var r=!1,l=!1,d=!1,h=!1,p=this.pdfViewer.annotationSelectorSettings.resizerLocation;if((p<1||p>3)&&(p=3),!this.pdfViewer.selectedItems.annotations[0]||"Stamp"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&"FreeText"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&"Image"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&"HandWrittenSignature"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&"SignatureText"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&"SignatureImage"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType||(r=!0),this.pdfViewer.selectedItems.annotations[0]&&"StickyNotes"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&(l=!0),this.pdfViewer.selectedItems.annotations[0]&&"Ink"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&(h=!0),!this.pdfViewer.selectedItems.annotations[0]||"Ellipse"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&"Radius"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&"Rectangle"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType||(d=!0),!l){if(h||r||this.pdfViewer.selectedItems.annotations[0]&&("HandWrittenSignature"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType||"SignatureText"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType||"SignatureImage"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType)||t.actualSize.width>=40&&t.actualSize.height>=40&&d&&(1===p||3===p)){if(sf.drawings.contains(i,sf.drawings.transformPointByMatrix(n,{x:o+t.actualSize.width,y:a+t.actualSize.height}),s))return"ResizeSouthEast";if(sf.drawings.contains(i,sf.drawings.transformPointByMatrix(n,{x:o,y:a+t.actualSize.height}),s))return"ResizeSouthWest";if(sf.drawings.contains(i,sf.drawings.transformPointByMatrix(n,{x:o+t.actualSize.width,y:a}),s))return"ResizeNorthEast";if(sf.drawings.contains(i,sf.drawings.transformPointByMatrix(n,{x:o,y:a}),s))return"ResizeNorthWest"}if(h||!d||d&&(2===p||3===p||!(t.actualSize.width>=40&&t.actualSize.height>=40)&&1===p)){if(sf.drawings.contains(i,sf.drawings.transformPointByMatrix(n,{x:o+t.actualSize.width,y:a+t.actualSize.height/2}),s)&&!r)return"ResizeEast";if(sf.drawings.contains(i,sf.drawings.transformPointByMatrix(n,{x:o,y:a+t.actualSize.height/2}),s)&&!r)return"ResizeWest";if(sf.drawings.contains(i,sf.drawings.transformPointByMatrix(n,{x:o+t.actualSize.width/2,y:a+t.actualSize.height}),s)&&!r)return"ResizeSouth";if(sf.drawings.contains(i,sf.drawings.transformPointByMatrix(n,{x:o+t.actualSize.width/2,y:a}),s)&&!r)return"ResizeNorth"}}return null},e.prototype.checkSignatureFormField=function(e){var t=!1,i=this.pdfViewer.nameTable[e];return i&&("SignatureField"!==i.formFieldAnnotationType&&"InitialField"!==i.formFieldAnnotationType&&"SignatureField"!==i.annotName||(t=!0)),t},e.prototype.diagramMouseMove=function(e){var t=this.pdfViewer.allowServerDataBinding;this.pdfViewer.enableServerDataBinding(!1),this.currentPosition=this.getMousePosition(e),this.pdfViewer.firePageMouseover(this.currentPosition.x,this.currentPosition.y),this.pdfViewer.annotation&&(this.activeElements.activePageID=this.pdfViewer.annotation.getEventPageNumber(e));var i,n=Oe(e,this,this.pdfViewer);(this.tool instanceof De||this.tool instanceof Le)&&(n=this.pdfViewer.drawingObject);var o=this.pdfViewer.selectedItems.annotations.length>0&&this.checkSignatureFormField(this.pdfViewer.selectedItems.annotations[0].id);if(!1===sf.drawings.Point.equals(this.currentPosition,this.prevPosition)||this.inAction){if(!1===this.isMouseDown){this.eventArgs={};n&&(this.tool=this.getTool(this.action),n.wrapper&&n.wrapper.children[0]&&(i=n));var a=e.target;this.action=this.findToolToActivate(n,this.currentPosition),n&&n.annotationSettings&&n.annotationSettings.isLock&&("Select"===this.action&&(this.pdfViewer.annotationModule.checkAllowedInteractions("Select",n)||(this.action="")),"Drag"===this.action&&(this.pdfViewer.annotationModule.checkAllowedInteractions("Move",n)||(this.action="Select")),("ResizeSouthEast"===this.action||"ResizeNorthEast"===this.action||"ResizeNorthWest"===this.action||"ResizeSouthWest"===this.action||"ResizeNorth"===this.action||"ResizeWest"===this.action||"ResizeEast"===this.action||"ResizeSouth"===this.action||this.action.includes("ConnectorSegmentPoint")||this.action.includes("Leader"))&&(this.pdfViewer.annotationModule.checkAllowedInteractions("Resize",n)||(this.action="Select"))),(!sf.base.isNullOrUndefined(i)&&!sf.base.isNullOrUndefined(i.formFieldAnnotationType)||o)&&("ResizeSouthEast"===this.action||"ResizeNorthEast"===this.action||"ResizeNorthWest"===this.action||"ResizeSouthWest"===this.action||"ResizeNorth"===this.action||"Drag"===this.action||"ResizeWest"===this.action||"ResizeEast"===this.action||"ResizeSouth"===this.action||this.action.includes("ConnectorSegmentPoint")||this.action.includes("Leader"))&&(this.action=""),this.tool=this.getTool(this.action),this.setCursor(a,e),this.pdfViewer.linkAnnotationModule&&this.pdfViewer.linkAnnotationModule.disableHyperlinkNavigationUnderObjects(a,e,this)}else{if(!this.tool&&this.action&&"Rotate"===this.action&&(this.tool=this.getTool(this.action),e.target&&this.setCursor(e.target,e)),(!sf.base.isNullOrUndefined(i)&&!sf.base.isNullOrUndefined(i.formFieldAnnotationType)||o)&&("ResizeSouthEast"===this.action||"ResizeNorthEast"===this.action||"ResizeNorthWest"===this.action||"ResizeSouthWest"===this.action||"ResizeNorth"===this.action||"Drag"===this.action||"ResizeWest"===this.action||"ResizeEast"===this.action||"ResizeSouth"===this.action||this.action.includes("ConnectorSegmentPoint")||this.action.includes("Leader"))&&(this.action="",this.tool=null),this.eventArgs&&this.eventArgs.source){a=e.target;this.updateDefaultCursor(this.eventArgs.source,a,e)}else this.setCursor(e.target,e);if(this.diagramMouseActionHelper(e),this.tool){if(n&&"FreeText"===n.shapeAnnotationType)if(this.pdfViewer.freeTextSettings.allowEditTextOnly&&"Ink"!==this.action&&this.eventArgs.source&&"FreeText"===this.eventArgs.source.shapeAnnotationType)(a=event.target).style.cursor="default",this.tool=null;null!=this.tool&&this.tool.mouseMove(this.eventArgs)}}this.pdfViewer.drawingObject&&this.pdfViewer.drawingObject.formFieldAnnotationType&&"Drag"!==this.action&&(this.tool instanceof Ne||(this.tool=this.getTool(this.action))),this.prevPosition=this.currentPosition}this.pdfViewer.enableServerDataBinding(t,!0)},e.prototype.updateDefaultCursor=function(e,t,i){e&&void 0!==e.pageIndex&&e.pageIndex!==this.activeElements.activePageID&&t?this.isPanMode?t.style.cursor="grab":t.style.cursor="default":this.setCursor(t,i)},e.prototype.diagramMouseLeave=function(e){this.currentPosition=this.getMousePosition(e),this.pdfViewer.annotation&&(this.activeElements.activePageID=this.pdfViewer.annotation.getEventPageNumber(e));var t=Oe(e,this,this.pdfViewer),i=!1;if(!1===sf.drawings.Point.equals(this.currentPosition,this.prevPosition)||this.inAction){if(!1===this.isMouseDown||i){this.eventArgs={};t&&(t.wrapper.children[0],i=!1)}else this.diagramMouseActionHelper(e),this.tool&&"Drag"!==this.action&&"Stamp"!==this.pdfViewer.tool&&this.tool.currentElement&&"Stamp"!==this.tool.currentElement.shapeAnnotationType&&(this.tool.mouseLeave(this.eventArgs),this.tool=null,this.pdfViewer.annotation&&this.pdfViewer.annotationModule.renderAnnotations(this.previousPage,null,null,null));this.prevPosition=this.currentPosition}},e.prototype.diagramMouseActionHelper=function(e){this.eventArgs.position=this.currentPosition,"Drag"===this.action&&this.eventArgs.source instanceof f&&this.getMouseEventArgs(this.currentPosition,this.eventArgs,e),this.getMouseEventArgs(this.currentPosition,this.eventArgs,e,this.eventArgs.source),this.inAction=!0,this.initialEventArgs=null},e.prototype.setCursor=function(e,t){var i,n=this.pdfViewer.annotationModule?this.pdfViewer.annotationModule.freeTextAnnotationModule:null;if(this.tool instanceof Ne)"ResizeNorthWest"===this.tool.corner?(i=this.setResizerCursorType(),e.style.cursor=sf.base.isNullOrUndefined(i)?"nw-resize":i):"ResizeNorthEast"===this.tool.corner?(i=this.setResizerCursorType(),e.style.cursor=sf.base.isNullOrUndefined(i)?"ne-resize":i):"ResizeSouthWest"===this.tool.corner?(i=this.setResizerCursorType(),e.style.cursor=sf.base.isNullOrUndefined(i)?"sw-resize":i):"ResizeSouthEast"===this.tool.corner?(i=this.setResizerCursorType(),e.style.cursor=sf.base.isNullOrUndefined(i)?"se-resize":i):"ResizeNorth"===this.tool.corner?(i=this.setResizerCursorType(),e.style.cursor=sf.base.isNullOrUndefined(i)?"n-resize":i):"ResizeWest"===this.tool.corner?(i=this.setResizerCursorType(),e.style.cursor=sf.base.isNullOrUndefined(i)?"w-resize":i):"ResizeEast"===this.tool.corner?(i=this.setResizerCursorType(),e.style.cursor=sf.base.isNullOrUndefined(i)?"e-resize":i):"ResizeSouth"===this.tool.corner&&(i=this.setResizerCursorType(),e.style.cursor=sf.base.isNullOrUndefined(i)?"s-resize":i);else if(this.isCommentIconAdded&&this.isAddComment)e.style.cursor="crosshair";else if(this.pdfViewer.enableHandwrittenSignature&&this.isNewSignatureAdded&&this.tool instanceof Pe)e.style.cursor="crosshair";else if(this.tool instanceof Me)e.style.cursor="move";else if(this.tool instanceof De||this.tool instanceof Le||this.tool instanceof Fe||n&&n.isNewAddedAnnot||this.tool instanceof Be)e.style.cursor="crosshair";else if(this.tool instanceof Ee)this.tool.endPoint&&this.tool.endPoint.indexOf("Leader0")?(i=this.setResizerCursorType(),e.style.cursor=sf.base.isNullOrUndefined(i)?"nw-resize":i):this.tool.endPoint&&this.tool.endPoint.indexOf("Leader1")?(i=this.setResizerCursorType(),e.style.cursor=sf.base.isNullOrUndefined(i)?"ne-resize":i):this.tool.endPoint&&this.tool.endPoint.indexOf("ConnectorSegmentPoint")&&(e.style.cursor="sw-resize");else if(e.classList.contains("e-pv-text"))e.style.cursor="text";else if(e.classList.contains("e-pv-hyperlink"))e.style.cursor="pointer";else if(this.isPanMode){if(this.isViewerMouseDown&&"mousemove"===t.type)e.style.cursor="grabbing";else if((c=Oe(t,this,this.pdfViewer))&&"mousemove"===t.type){e.style.cursor="pointer";var o=c,a=this.getMousePosition(t),s={left:(g=this.relativePosition(t)).x,top:g.y},r={left:a.x,top:a.y},l={opacity:o.opacity,fillColor:o.fillColor,strokeColor:o.strokeColor,thicknes:o.thickness,author:o.author,subject:o.subject,modifiedDate:o.modifiedDate};this.isMousedOver=!0;var d=this.checkSignatureFormField(o.id);if(o.formFieldAnnotationType){this.isFormFieldMousedOver=!0;var h={value:o.value,fontFamily:o.fontFamily,fontSize:o.fontSize,fontStyle:o.fontStyle,color:o.color,backgroundColor:o.backgroundColor,borderColor:o.borderColor,thickness:o.thickness,alignment:o.alignment,isReadonly:o.isReadonly,visibility:o.visibility,maxLength:o.maxLength,isRequired:o.isRequired,isPrint:o.isPrint,rotation:o.rotateAngle,tooltip:o.tooltip,options:o.options,isChecked:o.isChecked,isSelected:o.isSelected};this.pdfViewer.fireFormFieldMouseoverEvent("formFieldMouseover",h,o.pageIndex,g.x,g.y,a.x,a.y)}else d||this.pdfViewer.fireAnnotationMouseover(o.annotName,o.pageIndex,o.shapeAnnotationType,o.bounds,l,r,s)}else if(e.style.cursor="grab",this.isMousedOver){var p=this.pdfViewer.annotation.getEventPageNumber(t);this.isFormFieldMousedOver?this.pdfViewer.fireFormFieldMouseLeaveEvent("formFieldMouseLeave",null,p):this.pdfViewer.fireAnnotationMouseLeave(p),this.isMousedOver=!1,this.isFormFieldMousedOver=!1}}else{var c;if((c=Oe(t,this,this.pdfViewer))&&"mousemove"===t.type){o=c;var u=this.pdfViewer.nameTable[o.id];"HandWrittenSignature"!==u.shapeAnnotationType&&"Ink"!==u.shapeAnnotationType&&u.annotationSettings&&void 0!==u.annotationSettings.isLock&&(u.annotationSettings.isLock=JSON.parse(u.annotationSettings.isLock)),u.annotationSettings&&u.annotationSettings.isLock?e.style.cursor="default":e.style.cursor="pointer";a=this.getMousePosition(t),s={left:(g=this.relativePosition(t)).x,top:g.y},r={left:a.x,top:a.y},l={opacity:o.opacity,fillColor:o.fillColor,strokeColor:o.strokeColor,thicknes:o.thickness,author:o.author,subject:o.subject,modifiedDate:o.modifiedDate};this.isMousedOver=!0;d=this.checkSignatureFormField(o.id);if(o.formFieldAnnotationType){this.isFormFieldMousedOver=!0;var f={value:o.value,fontFamily:o.fontFamily,fontSize:o.fontSize,fontStyle:o.fontStyle,color:o.color,backgroundColor:o.backgroundColor,borderColor:o.borderColor,thickness:o.thickness,alignment:o.alignment,isReadonly:o.isReadonly,visibility:o.visibility,maxLength:o.maxLength,isRequired:o.isRequired,isPrint:o.isPrint,rotation:o.rotateAngle,tooltip:o.tooltip,options:o.options,isChecked:o.isChecked,isSelected:o.isSelected};this.pdfViewer.fireFormFieldMouseoverEvent("formFieldMouseover",f,o.pageIndex,g.x,g.y,a.x,a.y)}else d||this.pdfViewer.fireAnnotationMouseover(o.annotName,o.pageIndex,o.shapeAnnotationType,o.bounds,l,r,s)}else if(t.target.classList.contains("e-pdfviewer-formFields")||t.target.classList.contains("e-pdfviewer-signatureformfields")){p=this.pdfViewer.annotation.getEventPageNumber(t),a=this.getMousePosition(t),s={left:(g=this.relativePosition(t)).x,top:g.y},r={left:a.x,top:a.y};for(var g,m=this.getItemFromSessionStorage("_formfields"),w=JSON.parse(m),y=0;y<w.length;y++)if(w[y].FieldName===t.target.name)var S={name:w[y].FieldName};this.isMousedOver=!0,this.isFormFieldMousedOver=!0,this.pdfViewer.fireFormFieldMouseoverEvent("formFieldMouseover",S,p,g.x,g.y,a.x,a.y)}else{if(this.isMousedOver){p=this.pdfViewer.annotation.getEventPageNumber(t);this.isFormFieldMousedOver?this.pdfViewer.fireFormFieldMouseLeaveEvent("formFieldMouseLeave",null,p):this.pdfViewer.fireAnnotationMouseLeave(p),this.isMousedOver=!1,this.isFormFieldMousedOver=!1,e.style.cursor="default"}c&&1===this.pdfViewer.selectedItems.annotations.length&&"mousemove"===t.type?e.style.cursor="pointer":e.style.cursor="default"}}},e.prototype.setResizerCursorType=function(){var e;return this.pdfViewer.selectedItems.annotations[0]&&sf.base.isNullOrUndefined(this.pdfViewer.selectedItems.annotations[0].annotationSelectorSettings.resizerCursorType)?"FreeText"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType?e=sf.base.isNullOrUndefined(this.pdfViewer.freeTextSettings.annotationSelectorSettings)?null:this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerCursorType:"Stamp"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType?e=sf.base.isNullOrUndefined(this.pdfViewer.stampSettings.annotationSelectorSettings)?null:this.pdfViewer.stampSettings.annotationSelectorSettings.resizerCursorType:"HandWrittenSignature"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType||"SignatureText"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType||"SignatureImage"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType?e=sf.base.isNullOrUndefined(this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings)?null:this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerCursorType:"Ink"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType?e=sf.base.isNullOrUndefined(this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings)?null:this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerCursorType:this.pdfViewer.selectedItems.annotations[0].measureType?this.pdfViewer.selectedItems.annotations[0].measureType&&("Distance calculation"===this.pdfViewer.selectedItems.annotations[0].subject?e=sf.base.isNullOrUndefined(this.pdfViewer.distanceSettings.annotationSelectorSettings)?null:this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerCursorType:"Perimeter calculation"===this.pdfViewer.selectedItems.annotations[0].subject?e=sf.base.isNullOrUndefined(this.pdfViewer.perimeterSettings.annotationSelectorSettings)?null:this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerCursorType:"Area calculation"===this.pdfViewer.selectedItems.annotations[0].subject?e=sf.base.isNullOrUndefined(this.pdfViewer.areaSettings.annotationSelectorSettings)?null:this.pdfViewer.areaSettings.annotationSelectorSettings.resizerCursorType:"Radius calculation"===this.pdfViewer.selectedItems.annotations[0].subject?e=sf.base.isNullOrUndefined(this.pdfViewer.radiusSettings.annotationSelectorSettings)?null:this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerCursorType:"Volume calculation"===this.pdfViewer.selectedItems.annotations[0].subject&&(e=sf.base.isNullOrUndefined(this.pdfViewer.volumeSettings.annotationSelectorSettings)?null:this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerCursorType)):"Line"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType?e=sf.base.isNullOrUndefined(this.pdfViewer.lineSettings.annotationSelectorSettings)?null:this.pdfViewer.lineSettings.annotationSelectorSettings.resizerCursorType:"LineWidthArrowHead"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType?e=sf.base.isNullOrUndefined(this.pdfViewer.arrowSettings.annotationSelectorSettings)?null:this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerCursorType:"Rectangle"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType?e=sf.base.isNullOrUndefined(this.pdfViewer.rectangleSettings.annotationSelectorSettings)?null:this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerCursorType:"Ellipse"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType?e=sf.base.isNullOrUndefined(this.pdfViewer.circleSettings.annotationSelectorSettings)?null:this.pdfViewer.circleSettings.annotationSelectorSettings.resizerCursorType:"Polygon"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&(e=sf.base.isNullOrUndefined(this.pdfViewer.polygonSettings.annotationSelectorSettings)?null:this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerCursorType):this.pdfViewer.selectedItems.annotations[0]&&(e=this.pdfViewer.selectedItems.annotations[0].annotationSelectorSettings.resizerCursorType),e||(e=this.pdfViewer.annotationSelectorSettings.resizerCursorType),e},e.prototype.getTool=function(e){switch(e){case"Select":return new Te(this.pdfViewer,this);case"Drag":return new Me(this.pdfViewer,this);case"ResizeSouthEast":case"ResizeSouthWest":case"ResizeNorthEast":case"ResizeNorthWest":case"ResizeSouth":case"ResizeNorth":case"ResizeWest":case"ResizeEast":return new Ne(this.pdfViewer,this,e);case"ConnectorSourceEnd":case"ConnectorTargetEnd":case"Leader":case"ConnectorSegmentPoint":return new Ee(this.pdfViewer,this,e);case"DrawTool":return new De(this.pdfViewer,this,this.pdfViewer.drawingObject);case"Polygon":return new Fe(this.pdfViewer,this,"Polygon");case"Distance":return new Le(this.pdfViewer,this,"Leader1",void 0);case"Line":return new Le(this.pdfViewer,this,"ConnectorSegmentPoint_1",this.pdfViewer.drawingObject);case"Perimeter":return new Fe(this.pdfViewer,this,"Perimeter");case"Rotate":return new _e(this.pdfViewer,this);case"Stamp":return new Pe(this.pdfViewer,this);case"Ink":return new Be(this.pdfViewer,this,this.pdfViewer.drawingObject)}return e.indexOf("ConnectorSegmentPoint")>-1||e.indexOf("Leader")>-1?new Ee(this.pdfViewer,this,e):null},e.prototype.diagramMouseUp=function(e){var t=this.pdfViewer.allowServerDataBinding;this.pdfViewer.enableServerDataBinding(!1);var i=this.action.toLowerCase().includes("resize")||this.action.toLowerCase().includes("connectorsegmentpoint")||this.action.toLowerCase().includes("leader"),n="Drag"===this.action||i||(this.tool instanceof De||this.tool instanceof Le||this.tool instanceof Fe)&&this.tool.dragging&&this.tool.drawingObject;if(this.tool){if(!this.inAction&&3!==e.which&&"Drag"===this.action){this.action="Select";var o=Oe(e,this,this.pdfViewer)}if(this.tool instanceof Fe||this.tool instanceof Le||this.tool instanceof De||(this.inAction=!1,this.isMouseDown=!1),this.currentPosition=this.getMousePosition(e),this.tool){this.eventArgs.position=this.currentPosition,this.getMouseEventArgs(this.currentPosition,this.eventArgs,e,this.eventArgs.source);this.isMetaKey(e);var a={ctrlKey:e.ctrlKey,shiftKey:e.shiftKey};if(this.eventArgs.info=a,this.eventArgs.clickCount=e.detail,this.tool.mouseUp(this.eventArgs),this.isAnnotationMouseDown=!1,this.isFormFieldMouseDown=!1,(this.tool instanceof De||this.tool instanceof Le||this.tool instanceof Fe)&&!this.tool.dragging&&(this.inAction=!1,this.isMouseDown=!1),n){o=Oe(e,this,this.pdfViewer);this.isShapeAnnotationModule()&&this.isCalibrateAnnotationModule()&&this.pdfViewer.annotation.onShapesMouseup(o,e)}this.isAnnotationDrawn=!1}}var s=e.target;e.cancelable&&this.skipPreventDefault(s)&&(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode)&&e.preventDefault(),this.eventArgs={},this.pdfViewer.enableServerDataBinding(t,!0)},e.prototype.skipPreventDefault=function(e){var t=!1,i=!1;return this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.freeTextAnnotationModule&&this.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus&&(i=!0),!e.parentElement||"foreign-object"===e.parentElement.className||e.classList.contains("e-pv-radio-btn")||e.classList.contains("e-pv-radiobtn-span")||e.classList.contains("e-pv-checkbox-div")||e.classList.contains("e-pdfviewer-formFields")||e.classList.contains("e-pdfviewer-ListBox")||e.classList.contains("e-pdfviewer-signatureformfields")||"free-text-input"===e.className&&"TEXTAREA"===e.tagName||i||"e-pv-hyperlink"===e.className||(t=!0),t},e.prototype.isMetaKey=function(e){return navigator.platform.match("Mac")?e.metaKey:e.ctrlKey},e.prototype.diagramMouseDown=function(e){var t=this.pdfViewer.allowServerDataBinding;this.pdfViewer.enableServerDataBinding(!1);var i;i=e.touches,this.isMouseDown=!0,this.isAnnotationAdded=!1,this.currentPosition=this.prevPosition=this.getMousePosition(e),this.eventArgs={};var n=!1;"Stamp"===this.pdfViewer.tool&&(this.pdfViewer.tool="",n=!0),sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&this.pdfViewer.annotation&&(this.activeElements.activePageID=this.pdfViewer.annotation.getEventPageNumber(e));var o=Oe(e,this,this.pdfViewer);if(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode||!o||o instanceof c||e.preventDefault(),this.pdfViewer.annotation&&this.pdfViewer.enableStampAnnotations){var a=this.pdfViewer.annotationModule.stampAnnotationModule;if(a&&a.isNewStampAnnot){var s=o;if(!s&&this.pdfViewer.selectedItems.annotations[0]&&(s=this.pdfViewer.selectedItems.annotations[0]),s){this.isViewerMouseDown=!1,s.opacity=this.pdfViewer.stampSettings.opacity,this.isNewStamp=!0;var r=void 0;if(r="Image"===s.shapeAnnotationType?this.pdfViewer.customStampSettings.opacity:this.pdfViewer.stampSettings.opacity,this.pdfViewer.nodePropertyChange(s,{opacity:r}),this.pdfViewer.annotation.stampAnnotationModule.isStampAddMode=!1,"Image"===s.shapeAnnotationType&&!this.isAlreadyAdded){this.stampAdded=!0;var l=s.id;a.currentStampAnnotation&&a.currentStampAnnotation.signatureName&&(l=a.currentStampAnnotation.signatureName);for(var d=!1,h=0;h<this.customStampCollection.length;h++)if(this.customStampCollection[h].customStampName===l){d=!0;break}d&&(l=s.id),l=a.customStampName?a.customStampName:a.currentStampAnnotation.signatureName,this.customStampCollection.push({customStampName:l,customStampImageSource:s.data})}this.pdfViewer.customStampSettings.enableCustomStamp&&this.pdfViewer.customStampSettings.isAddToMenu&&(this.stampAdded=!0),this.isAlreadyAdded=!1,a.updateDeleteItems(s.pageIndex,s,s.opacity),a.resetAnnotation(),a.isNewStampAnnot=!1}}}if(this.isNewSignatureAdded){this.signatureCount++,this.currentSignatureAnnot=null;var p=o;if(sf.base.isNullOrUndefined(p)&&this.pdfViewer.selectedItems.annotations[0]&&(p=this.pdfViewer.selectedItems.annotations[0]),p){this.signatureAdded=!0,this.signatureModule.storeSignatureData(p.pageIndex,p);var u={left:p.bounds.x,top:p.bounds.y,width:p.bounds.width,height:p.bounds.height};this.pdfViewer.fireSignatureAdd(p.pageIndex,p.signatureName,p.shapeAnnotationType,u,p.opacity,p.strokeColor,p.thickness,this.signatureModule.saveImageString)}this.isNewSignatureAdded=!1}if(this.pdfViewer.annotationModule){var f=this.pdfViewer.annotationModule.freeTextAnnotationModule;if(!0===f.isNewFreeTextAnnot){var g=void 0;if(e.target&&(e.target.id.indexOf("_text")>-1||e.target.id.indexOf("_annotationCanvas")>-1||e.target.classList.contains("e-pv-hyperlink"))&&this.pdfViewer.annotation){var m=this.pdfViewer.annotation.getEventPageNumber(e),w=document.getElementById(this.pdfViewer.dataId+"_annotationCanvas_"+m);if(w){var y=w.getBoundingClientRect(),S=y.x?y.x:y.left,v=y.y?y.y:y.top;g=new sf.drawings.Rect(S+5,v+5,y.width-10,y.height-10)}}if(i&&(this.mouseX=i[0].clientX,this.mouseY=i[0].clientY),g&&g.containsPoint({x:this.mouseX,y:this.mouseY})&&f.isNewAddedAnnot){m=this.pdfViewer.annotation.getEventPageNumber(e);if(!this.pdfViewer.freeTextSettings.enableAutoFit){var b=this.getZoomFactor(),V=this.currentPosition.x+f.defautWidth*b,A=this.getPageWidth(m);V>=A&&(this.currentPosition.x=A-f.defautWidth*b,this.currentPosition.x<=0?this.currentPosition.x=5:this.currentPosition.x,f.defautWidth=f.defautWidth*b>=A?A-10:f.defautWidth)}f.addInuptElemet(this.currentPosition,null,m),e.preventDefault(),f.isNewAddedAnnot=!1}}}o&&o.wrapper.children[0],(!this.tool||this.tool&&!this.tool.drawingObject)&&(n?(this.action="Select",this.tool=this.getTool(this.action)):(this.action=this.findToolToActivate(o,this.currentPosition),o&&o.annotationSettings&&o.annotationSettings.isLock&&("Select"===this.action&&(this.pdfViewer.annotationModule.checkAllowedInteractions("Select",o)||(this.action="")),"Drag"===this.action&&(this.pdfViewer.annotationModule.checkAllowedInteractions("Move",o)||(this.action="Select")),"Rotate"===this.action&&(this.action="Select"),("ResizeSouthEast"===this.action||"ResizeNorthEast"===this.action||"ResizeNorthWest"===this.action||"ResizeSouthWest"===this.action||"ResizeSouth"===this.action||"ResizeNorth"===this.action||"ResizeWest"===this.action||"ResizeEast"===this.action||this.action.includes("ConnectorSegmentPoint")||this.action.includes("Leader"))&&(this.pdfViewer.annotationModule.checkAllowedInteractions("Resize",o)||(this.action="Select"))),this.tool=this.getTool(this.action),this.tool||(this.action=this.pdfViewer.tool||"Select",this.tool=this.getTool(this.action)))),this.getMouseEventArgs(this.currentPosition,this.eventArgs,e),this.eventArgs.position=this.currentPosition,this.tool&&(this.isAnnotationMouseDown=!1,this.isFormFieldMouseDown=!1,this.isAnnotationMouseMove=!1,this.isFormFieldMouseMove=!1,this.tool.mouseDown(this.eventArgs),this.isAnnotationDrawn=!0,this.signatureAdded=!0),this.pdfViewer.annotation&&this.pdfViewer.annotation.onAnnotationMouseDown();var x=1===this.pdfViewer.selectedItems.annotations.length?this.pdfViewer.nameTable[this.pdfViewer.selectedItems.annotations[0].id.split("_")[0]+"_content"]:null;if(x||(x=1===this.pdfViewer.selectedItems.annotations.length?this.pdfViewer.nameTable[this.pdfViewer.selectedItems.annotations[0].id]:null),this.eventArgs&&this.eventArgs.source&&(this.eventArgs.source.formFieldAnnotationType||x)){var C=void 0;if((C=x?this.pdfViewer.nameTable[this.pdfViewer.selectedItems.annotations[0].id.split("_")[0]]:this.eventArgs.source)||(C=this.pdfViewer.formFieldCollections[this.pdfViewer.formFieldCollections.findIndex((function(e){return e.id===x.id}))]),C){var I={id:C.id,fontFamily:C.fontFamily,fontSize:C.fontSize,fontStyle:C.fontStyle,color:C.color,value:C.value,type:C.formFieldAnnotationType?C.formFieldAnnotationType:C.type,backgroundColor:C.backgroundColor,alignment:C.alignment},k=document.getElementById(C.id);(k=k||(document.getElementById(C.id+"_content_html_element")?document.getElementById(C.id+"_content_html_element").children[0].children[0]:null))&&"StickyNotes"!=C.type&&(this.currentTarget=k,this.pdfViewer.fireFormFieldClickEvent("formFieldClicked",I,!1,0===e.button))}}this.initialEventArgs={source:this.eventArgs.source,sourceWrapper:this.eventArgs.sourceWrapper},this.initialEventArgs.position=this.currentPosition,this.initialEventArgs.info=this.eventArgs.info,this.pdfViewer.enableServerDataBinding(t,!0)},e.prototype.exportAnnotationsAsObject=function(){var e=this;if(this.pdfViewer.annotationModule&&this.updateExportItem())return new Promise((function(t,i){e.createRequestForExportAnnotations(!0,U.Json).then((function(e){t(e)}))}))},e.prototype.getItemFromSessionStorage=function(e){return this.isStorageExceed?this.formFieldStorage[this.documentId+e]:window.sessionStorage.getItem(this.documentId+e)},e.prototype.setStyleToTextDiv=function(e,t,i,n,o,a,s,r,l){var d=this.getZoomFactor();s&&(d=1,e.style.position="absolute"),e.style.left=t*d+"px",e.style.top=i*d+"px",e.style.height=a*d+"px",e.style.width=o*d+"px",e.style.margin="0px";e.style.float="left",!(n>0)||r&&l||(e.style.fontSize=n*d+"px")},e.prototype.ConvertPointToPixel=function(e){return e*(96/72)},e.prototype.setItemInSessionStorage=function(e,t){Math.round(JSON.stringify(e).length/1024)>4500&&(this.isStorageExceed=!0,this.pdfViewer.formFieldsModule&&this.pdfViewer.formFieldsModule.clearFormFieldStorage()),this.isStorageExceed?this.formFieldStorage[this.documentId+t]=JSON.stringify(e):window.sessionStorage.setItem(this.documentId+t,JSON.stringify(e))},e.prototype.exportFormFieldsAsObject=function(){var e=this;if(this.pdfViewer.formFieldsModule)return new Promise((function(t,i){e.createRequestForExportFormfields(!0).then((function(e){t(e)}))}))},e.prototype.importAnnotations=function(e,t,i,n){this.pdfViewer.annotationModule&&(this.createRequestForImportAnnotations(e,t,i,n),document.getElementById(this.pdfViewer.dataId+"_annotationXFdfUploadElement").value="",document.getElementById(this.pdfViewer.dataId+"_annotationUploadElement").value="")},e.prototype.exportAnnotations=function(e){this.pdfViewer.annotationModule&&(this.updateExportItem()&&this.createRequestForExportAnnotations(!1,e))},e.prototype.createRequestForExportAnnotations=function(e,t,n){var o,a=this;o=this;var s=new Promise((function(s,r){var l;(l=a.constructJsonDownload()).annotationDataFormat=t,l.action="ExportAnnotations",o.pdfViewer.fireExportStart(l),o.jsonDocumentId&&(l.document=o.jsonDocumentId);var d=o.pdfViewer.serviceUrl+"/"+o.pdfViewer.serverActionSettings.exportAnnotations;o.exportAnnotationRequestHandler=new xe(a.pdfViewer),o.exportAnnotationRequestHandler.url=d,o.exportAnnotationRequestHandler.mode=!0,o.exportAnnotationRequestHandler.responseType="text",o.exportAnnotationRequestHandler.send(l),o.exportAnnotationRequestHandler.onSuccess=function(a){var r=a.data;if(r){if("object"===i(r)&&(r=JSON.parse(r)),r){var d=o.pdfViewer.fireAjaxRequestSuccess(o.pdfViewer.serverActionSettings.exportAnnotations,r);if(e)if(r.split("base64,")[1]){var h=r,p=decodeURIComponent(escape(atob(r.split(",")[1])));e&&("Json"===l.annotationDataFormat?(p=o.getSanitizedString(p),h=JSON.parse(p)):h=p),null!==o.pdfViewer.exportAnnotationFileName?o.pdfViewer.fireExportSuccess(h,o.pdfViewer.exportAnnotationFileName):o.pdfViewer.fireExportSuccess(h,o.pdfViewer.fileName),o.updateDocumentAnnotationCollections(),s(n?r:p)}else o.pdfViewer.fireExportFailed(l.pdfAnnotation,o.pdfViewer.localeObj.getConstant("Export Failed"));else if("Json"===t)if(r.split("base64,")[1]){if(d)return r;var c=o.createBlobUrl(r.split("base64,")[1],"application/json");sf.base.Browser.isIE||"edge"===sf.base.Browser.info.name?null!==o.pdfViewer.exportAnnotationFileName?window.navigator.msSaveOrOpenBlob(c,o.pdfViewer.exportAnnotationFileName.split(".")[0]+".json"):window.navigator.msSaveOrOpenBlob(c,o.pdfViewer.fileName.split(".")[0]+".json"):o.downloadExportAnnotationJson(c),o.updateDocumentAnnotationCollections()}else{this.pdfViewer._dotnetInstance.invokeMethodAsync("GetLocaleText","PdfViewer_ExportFailed").then((function(e){o.openImportExportNotificationPopup(e)})),o.pdfViewer.fireExportFailed(l.pdfAnnotation,o.pdfViewer.localeObj.getConstant("Export Failed"))}else if(r.split("base64,")[1]){if(d)return r;c=o.createBlobUrl(r.split("base64,")[1],"application/vnd.adobe.xfdf");sf.base.Browser.isIE||"edge"===sf.base.Browser.info.name?window.navigator.msSaveOrOpenBlob(c,o.pdfViewer.fileName.split(".")[0]+".xfdf"):o.downloadExportedXFdfAnnotation(c)}else{this.pdfViewer._dotnetInstance.invokeMethodAsync("GetLocaleText","PdfViewer_ExportFailed").then((function(e){o.openImportExportNotificationPopup(e)})),o.pdfViewer.fireExportFailed(l,o.pdfViewer.localeObj.getConstant("Export Failed"))}}if("string"!=typeof r)try{"string"==typeof r&&(o.onControlError(500,r,o.pdfViewer.serverActionSettings.exportAnnotations),r=null)}catch(e){o.pdfViewer.fireExportFailed(l.pdfAnnotation,o.pdfViewer.localeObj.getConstant("Export Failed")),o.onControlError(500,r,o.pdfViewer.serverActionSettings.exportAnnotations),r=null}}else{var u=void 0;u=null!==o.pdfViewer.exportAnnotationFileName?o.pdfViewer.exportAnnotationFileName:o.pdfViewer.fileName,o.pdfViewer.fireExportSuccess("Exported data saved in server side successfully",u),s(null)}},o.exportAnnotationRequestHandler.onFailure=function(e){o.pdfViewer.fireExportFailed(l.pdfAnnotation,e.statusText)},o.exportAnnotationRequestHandler.onError=function(e){o.pdfViewer.fireExportFailed(l.pdfAnnotation,e.statusText)}}));return!e&&!n||s},e.prototype.updateModifiedDateToLocalDate=function(e,t){if(e[t]&&e[t].length>0){var i=e[t];if(i)for(var n=0;n<i.length;n++)if(i[n].ModifiedDate=this.convertUTCDateToLocalDate(i[n].ModifiedDate),i[n].Comments)for(var o=0;o<i[n].Comments.length;o++)i[n].Comments[o].ModifiedDate=this.convertUTCDateToLocalDate(i[n].Comments[o].ModifiedDate)}},e.prototype.convertUTCDateToLocalDate=function(e){var t=new Date(Date.parse(e+" UTC"));this.globalize=new sf.base.Internationalization(this.pdfViewer.locale);var i=t.toLocaleTimeString("en-us");return t.toLocaleDateString("en-us")+", "+i},e.prototype.createRequestForImportAnnotations=function(e,t,n,o){var a,s;if(s=this,!n&&s.isPDFViewerJson?this.isJsonImported=!0:this.isJsonImported=!1,"object"===i(e)){if(e&&e.pdfAnnotation)for(var r=Object.keys(e.pdfAnnotation),l=0;l<r.length;l++){var d=e.pdfAnnotation[r[l]];this.updateModifiedDateToLocalDate(d,"freeTextAnnotation"),this.updateModifiedDateToLocalDate(d,"measureShapeAnnotation"),this.updateModifiedDateToLocalDate(d,"shapeAnnotation"),this.updateModifiedDateToLocalDate(d,"signatureAnnotation"),this.updateModifiedDateToLocalDate(d,"signatureInkAnnotation"),this.updateModifiedDateToLocalDate(d,"stampAnnotations"),this.updateModifiedDateToLocalDate(d,"stickyNotesAnnotation"),this.updateModifiedDateToLocalDate(d,"textMarkupAnnotation")}s.reRenderAnnotations(e.pdfAnnotation),s.isImportedAnnotation=!0,s.updateDocumentEditedProperty(!0),this.isAddAnnotation||s.pdfViewer.fireImportSuccess(e.pdfAnnotation)}else{s.pdfViewer.fireImportStart(e),"Json"===t?a=s.isPDFViewerJson?{fileName:e,action:"ImportAnnotations",elementId:s.pdfViewer.element.id,hashId:s.hashId,uniqueId:s.documentId,annotationDataFormat:t}:{importedData:e,action:"ImportAnnotations",elementId:s.pdfViewer.element.id,hashId:s.hashId,uniqueId:s.documentId,annotationDataFormat:t,isJsonFilePath:o}:(n||(e=btoa(e)),a={importedData:e=e.split(",")[1]?e.split(",")[1]:e.split(",")[0],action:"ImportAnnotations",elementId:s.pdfViewer.element.id,hashId:s.hashId,uniqueId:s.documentId,annotationDataFormat:t}),(a=Object.assign(a,this.constructJsonDownload())).action="ImportAnnotations",s.jsonDocumentId&&(a.documentId&&delete a.documentId,a.document=s.jsonDocumentId);var h=s.pdfViewer.serviceUrl+"/"+s.pdfViewer.serverActionSettings.importAnnotations;s.importAnnotationRequestHandler=new xe(s.pdfViewer),s.importAnnotationRequestHandler.url=h,s.importAnnotationRequestHandler.mode=!0,s.importAnnotationRequestHandler.responseType="text",s.importAnnotationRequestHandler.send(a),s.importAnnotationRequestHandler.onSuccess=function(t){var n=t.data;if(n){if("object"!==i(n))try{"object"!==i(n=JSON.parse(n))&&n.includes("pdfAnnotation")&&(n=JSON.parse(n)),"object"!==i(n)&&(s.onControlError(500,n,s.pdfViewer.serverActionSettings.importAnnotations),n=null)}catch(t){s.pdfViewer.fireImportFailed(e,s.pdfViewer.localeObj.getConstant("File not found")),this.pdfViewer._dotnetInstance.invokeMethodAsync("GetLocaleText","PdfViewer_FileNotFound").then((function(e){s.openImportExportNotificationPopup(e)})),s.onControlError(500,n,s.pdfViewer.serverActionSettings.importAnnotations),n=null}if(n&&(s.pdfViewer.fireAjaxRequestSuccess(s.pdfViewer.serverActionSettings.importAnnotations,n),n.pdfAnnotation)){for(var o,a=Object.keys(n.pdfAnnotation),r=0;r<a.length;r++)o=n.pdfAnnotation[a[r]],s.updateModifiedDateToLocalDate(o,"freeTextAnnotation"),s.updateModifiedDateToLocalDate(o,"measureShapeAnnotation"),s.updateModifiedDateToLocalDate(o,"shapeAnnotation"),s.updateModifiedDateToLocalDate(o,"signatureAnnotation"),s.updateModifiedDateToLocalDate(o,"signatureInkAnnotation"),s.updateModifiedDateToLocalDate(o,"stampAnnotations"),s.updateModifiedDateToLocalDate(o,"stickyNotesAnnotation"),s.updateModifiedDateToLocalDate(o,"textMarkupAnnotation");s.reRenderAnnotations(n.pdfAnnotation),s.isImportedAnnotation=!0,s.updateDocumentEditedProperty(!0),s.pdfViewer.fireImportSuccess(n.pdfAnnotation)}}},s.importAnnotationRequestHandler.onFailure=function(t){s.pdfViewer.fireImportFailed(e,t.statusText)},s.importAnnotationRequestHandler.onError=function(t){s.pdfViewer.fireImportFailed(e,t.statusText)}}},e.prototype.openImportExportNotificationPopup=function(e){this.pdfViewer.showNotificationDialog&&this.textLayer.createNotificationPopup(e)},e.prototype.reRenderAnnotations=function(e){if(e){this.isImportAction=!0;var t=void 0;this.isImportedAnnotation?this.importedAnnotation=this.combineImportedData(this.importedAnnotation,e):this.pageCount>0&&(this.importedAnnotation=e),this.isImportedAnnotation||(t=0);for(var i=Object.keys(e).pop(),n=!1,o=0;o<this.pageCount;o++)if(e[o]){i===o.toString()&&(n=!0);var a=[],s=[],r=window.sessionStorage.getItem(this.documentId+"_annotations_textMarkup"),l=window.sessionStorage.getItem(this.documentId+"_annotations_shape"),d=window.sessionStorage.getItem(this.documentId+"_annotations_shape_measure"),h=window.sessionStorage.getItem(this.documentId+"_annotations_stamp"),p=window.sessionStorage.getItem(this.documentId+"_annotations_sticky"),c=window.sessionStorage.getItem(this.documentId+"_annotations_freetext"),u=window.sessionStorage.getItem(this.documentId+"_annotations_sign"),f=window.sessionStorage.getItem(this.documentId+"_annotations_ink"),g=this.pageSize[o].rotation;if(this.isStorageExceed&&(r=this.annotationStorage[this.documentId+"_annotations_textMarkup"],l=this.annotationStorage[this.documentId+"_annotations_shape"],d=this.annotationStorage[this.documentId+"_annotations_shape_measure"],h=this.annotationStorage[this.documentId+"_annotations_stamp"],p=this.annotationStorage[this.documentId+"_annotations_sticky"],c=this.annotationStorage[this.documentId+"_annotations_freetext"],f=this.annotationStorage[this.documentId+"_annotations_ink"]),this.getElement("_annotationCanvas_"+o)&&void 0!==g)if(this.drawPageAnnotations(e[o],o),this.isImportedAnnotation){for(var m=!1,w=0;w<this.annotationPageList.length;w++)this.annotationPageList[w]===o&&(m=!0);m&&(this.annotationPageList[t]=o,t+=1)}else this.annotationPageList[t]=o,t+=1;if(e[o].textMarkupAnnotation&&0!==e[o].textMarkupAnnotation.length){if(r){var y=JSON.parse(r);e[o].textMarkupAnnotation=this.checkAnnotationCollections(y,e[o].textMarkupAnnotation,o)}if(e[o].textMarkupAnnotation=this.checkAnnotationCommentsCollections(e[o].textMarkupAnnotation,o),a.textMarkupAnnotation=e[o].textMarkupAnnotation,0!==e[o].textMarkupAnnotation.length)for(w=0;w<e[o].textMarkupAnnotation.length;w++)s.push(e[o].textMarkupAnnotation[w]),this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateCollections(this.pdfViewer.annotationModule.textMarkupAnnotationModule.updateTextMarkupAnnotationCollections(e[o].textMarkupAnnotation[w],o))}if(e[o].shapeAnnotation&&0!==e[o].shapeAnnotation.length){if(l){y=JSON.parse(l);e[o].shapeAnnotation=this.checkAnnotationCollections(y,e[o].shapeAnnotation,o)}if(e[o].shapeAnnotation=this.checkAnnotationCommentsCollections(e[o].shapeAnnotation,o),a.shapeAnnotation=e[o].shapeAnnotation,0!==e[o].shapeAnnotation.length)for(w=0;w<e[o].shapeAnnotation.length;w++)s.push(e[o].shapeAnnotation[w]),this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateCollections(this.pdfViewer.annotationModule.shapeAnnotationModule.updateShapeAnnotationCollections(e[o].shapeAnnotation[w],o))}if(e[o].measureShapeAnnotation&&0!==e[o].measureShapeAnnotation.length){if(d){y=JSON.parse(d);e[o].measureShapeAnnotation=this.checkAnnotationCollections(y,e[o].measureShapeAnnotation,o)}if(e[o].measureShapeAnnotation=this.checkAnnotationCommentsCollections(e[o].measureShapeAnnotation,o),a.measureShapeAnnotation=e[o].measureShapeAnnotation,0!==e[o].measureShapeAnnotation.length)for(w=0;w<e[o].measureShapeAnnotation.length;w++)s.push(e[o].measureShapeAnnotation[w]),this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateCollections(this.pdfViewer.annotationModule.measureAnnotationModule.updateMeasureAnnotationCollections(e[o].measureShapeAnnotation[w],o))}if(e[o].stampAnnotations&&0!==e[o].stampAnnotations.length){if(h){y=JSON.parse(h);e[o].stampAnnotations=this.checkAnnotationCollections(y,e[o].stampAnnotations,o)}if(e[o].stampAnnotations=this.checkAnnotationCommentsCollections(e[o].stampAnnotations,o),a.stampAnnotations=e[o].stampAnnotations,0!==e[o].stampAnnotations.length)for(w=0;w<e[o].stampAnnotations.length;w++)s.push(e[o].stampAnnotations[w]),this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateCollections(this.pdfViewer.annotationModule.stampAnnotationModule.updateStampAnnotationCollections(e[o].stampAnnotations[w],o))}if(e[o].stickyNotesAnnotation&&0!==e[o].stickyNotesAnnotation.length){if(p){y=JSON.parse(p);e[o].stickyNotesAnnotation=this.checkAnnotationCollections(y,e[o].stickyNotesAnnotation,o)}if(e[o].stickyNotesAnnotation=this.checkAnnotationCommentsCollections(e[o].stickyNotesAnnotation,o),a.stickyNotesAnnotation=e[o].stickyNotesAnnotation,0!==e[o].stickyNotesAnnotation.length)for(w=0;w<e[o].stickyNotesAnnotation.length;w++)s.push(e[o].stickyNotesAnnotation[w]),this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateCollections(this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateStickyNotesAnnotationCollections(e[o].stickyNotesAnnotation[w],o))}if(e[o].freeTextAnnotation&&0!==e[o].freeTextAnnotation.length){if(c){y=JSON.parse(c);e[o].freeTextAnnotation=this.checkAnnotationCollections(y,e[o].freeTextAnnotation,o)}if(e[o].freeTextAnnotation=this.checkAnnotationCommentsCollections(e[o].freeTextAnnotation,o),a.freeTextAnnotation=e[o].freeTextAnnotation,0!==e[o].freeTextAnnotation.length)for(w=0;w<e[o].freeTextAnnotation.length;w++)s.push(e[o].freeTextAnnotation[w]),this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateCollections(this.pdfViewer.annotationModule.freeTextAnnotationModule.updateFreeTextAnnotationCollections(e[o].freeTextAnnotation[w],o))}if(e[o].signatureAnnotation&&0!==e[o].signatureAnnotation.length){if(u){y=JSON.parse(u);e[o].signatureAnnotation=this.checkSignatureCollections(y,e[o].signatureAnnotation,o)}if(a.signatureAnnotation=e[o].signatureAnnotation,0!==e[o].signatureAnnotation.length)for(w=0;w<e[o].signatureAnnotation.length;w++)this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateCollections(this.signatureModule.updateSignatureCollections(e[o].signatureAnnotation[w],o),!0)}if(e[o].signatureInkAnnotation&&0!==e[o].signatureInkAnnotation.length){if(f){y=JSON.parse(f);e[o].signatureInkAnnotation=this.checkAnnotationCollections(y,e[o].signatureInkAnnotation,o)}if(e[o].signatureInkAnnotation=this.checkAnnotationCommentsCollections(e[o].signatureInkAnnotation,o),a.signatureInkAnnotation=e[o].signatureInkAnnotation,0!==e[o].signatureInkAnnotation.length)for(w=0;w<e[o].signatureInkAnnotation.length;w++)s.push(e[o].signatureInkAnnotation[w])}0!==s.length&&this.pdfViewer.enableCommentPanel&&this.pdfViewer._dotnetInstance.invokeMethodAsync("RenderAnnotationComments",s,o,n),this.updateImportedAnnotationsInDocumentCollections(a,o)}if(this.pageCount>0&&this.pdfViewer.annotationModule.stickyNotesAnnotationModule&&!this.pdfViewer.annotationModule.stickyNotesAnnotationModule.isAnnotationRendered){var S=this.createAnnotationsCollection();S&&(this.documentAnnotationCollections=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateAnnotationsInDocumentCollections(this.importedAnnotation,S))}}},e.prototype.updateImportedAnnotationsInDocumentCollections=function(e,t){if(this.documentAnnotationCollections){var i=this.documentAnnotationCollections[t];if(i){if(e.textMarkupAnnotation&&0!==e.textMarkupAnnotation.length)for(var n=0;n<e.textMarkupAnnotation.length;n++)i.textMarkupAnnotation.push(e.textMarkupAnnotation[n]);if(e.shapeAnnotation&&0!==e.shapeAnnotation.length)for(n=0;n<e.shapeAnnotation.length;n++)i.shapeAnnotation.push(e.shapeAnnotation[n]);if(e.measureShapeAnnotation&&0!==e.measureShapeAnnotation.length)for(n=0;n<e.measureShapeAnnotation.length;n++)i.measureShapeAnnotation.push(e.measureShapeAnnotation[n]);if(e.stampAnnotations&&0!==e.stampAnnotations.length)for(n=0;n<e.stampAnnotations.length;n++)i.stampAnnotations.push(e.stampAnnotations[n]);if(e.stickyNotesAnnotation&&0!==e.stickyNotesAnnotation.length)for(n=0;n<e.stickyNotesAnnotation.length;n++)i.stickyNotesAnnotation.push(e.stickyNotesAnnotation[n]);if(e.freeTextAnnotation&&0!==e.freeTextAnnotation.length)for(n=0;n<e.freeTextAnnotation.length;n++)i.freeTextAnnotation.push(e.freeTextAnnotation[n]);if(e.signatureAnnotation&&0!==e.signatureAnnotation.length)for(n=0;n<e.signatureAnnotation.length;n++)i.signatureAnnotation.push(e.signatureAnnotation[n]);if(e.signatureInkAnnotation&&0!==e.signatureInkAnnotation.length)for(n=0;n<e.signatureInkAnnotation.length;n++)i.signatureInkAnnotation.push(e.signatureInkAnnotation[n]);this.documentAnnotationCollections[t]=i}}},e.prototype.checkDocumentCollectionData=function(e,t){var i;if(t)i=t;else if(this.documentAnnotationCollections){var n=this.documentAnnotationCollections[e];n&&(i=S(n))}if(i){var o,a=window.sessionStorage.getItem(this.documentId+"_annotations_textMarkup"),s=window.sessionStorage.getItem(this.documentId+"_annotations_shape"),r=window.sessionStorage.getItem(this.documentId+"_annotations_shape_measure"),l=window.sessionStorage.getItem(this.documentId+"_annotations_stamp"),d=window.sessionStorage.getItem(this.documentId+"_annotations_sticky"),h=window.sessionStorage.getItem(this.documentId+"_annotations_freetext"),p=window.sessionStorage.getItem(this.documentId+"_annotations_ink"),c=window.sessionStorage.getItem(this.documentId+"_annotations_sign");if(this.isStorageExceed&&(a=this.annotationStorage[this.documentId+"_annotations_textMarkup"],s=this.annotationStorage[this.documentId+"_annotations_shape"],r=this.annotationStorage[this.documentId+"_annotations_shape_measure"],l=this.annotationStorage[this.documentId+"_annotations_stamp"],d=this.annotationStorage[this.documentId+"_annotations_sticky"],h=this.annotationStorage[this.documentId+"_annotations_freetext"],p=this.annotationStorage[this.documentId+"_annotations_ink"],c=this.annotationStorage[this.documentId+"_annotations_sign"]),i.textMarkupAnnotation&&0!==i.textMarkupAnnotation.length)if(a)(o=JSON.parse(a))&&(i.textMarkupAnnotation=this.findImportedAnnotations(o,i.textMarkupAnnotation,e));if(i.shapeAnnotation&&0!==i.shapeAnnotation.length)if(s)(o=JSON.parse(s))&&(i.shapeAnnotation=this.findImportedAnnotations(o,i.shapeAnnotation,e));if(i.measureShapeAnnotation&&0!==i.measureShapeAnnotation.length)if(r)(o=JSON.parse(r))&&(i.measureShapeAnnotation=this.findImportedAnnotations(o,i.measureShapeAnnotation,e));if(i.stampAnnotations&&0!==i.stampAnnotations.length)if(l)(o=JSON.parse(l))&&(i.stampAnnotations=this.findImportedAnnotations(o,i.stampAnnotations,e));if(i.stickyNotesAnnotation&&0!==i.stickyNotesAnnotation.length)if(d)(o=JSON.parse(d))&&(i.stickyNotesAnnotation=this.findImportedAnnotations(o,i.stickyNotesAnnotation,e));if(i.freeTextAnnotation&&0!==i.freeTextAnnotation.length)if(h)(o=JSON.parse(h))&&(i.freeTextAnnotation=this.findImportedAnnotations(o,i.freeTextAnnotation,e));if(i.signatureInkAnnotation&&0!==i.signatureInkAnnotation.length)if(p)(o=JSON.parse(p))&&(i.signatureInkAnnotation=this.findImportedAnnotations(o,i.signatureInkAnnotation,e));if(i.signatureAnnotation&&0!==i.signatureAnnotation.length)if(c)(o=JSON.parse(p))&&(i.signatureAnnotation=this.findImportedAnnotations(o,i.signatureAnnotation,e));return i}},e.prototype.findImportedAnnotations=function(e,t,i){for(var n=null,o=0;o<e.length;o++)e[o].pageIndex===i&&(n=e[o].annotations);if(n)for(var a=0;a<n.length;a++)for(var s=0;s<t.length;s++)n[a].annotName===t[s].AnnotName&&(t.splice(s,1),s-=1);return n=null,t},e.prototype.drawPageAnnotations=function(e,t,i){if(i&&(e=e[t]),e){if(e.textMarkupAnnotation&&0!==e.textMarkupAnnotation.length){var n=window.sessionStorage.getItem(this.documentId+"_annotations_textMarkup");if(this.isStorageExceed&&(n=this.annotationStorage[this.documentId+"_annotations_textMarkup"]),n)(o=JSON.parse(n))&&(e.textMarkupAnnotation=this.checkAnnotationCollections(o,e.textMarkupAnnotation,t));e.textMarkupAnnotation=this.checkAnnotationCommentsCollections(e.textMarkupAnnotation,t),0!==e.textMarkupAnnotation.length&&this.pdfViewer.annotationModule.renderAnnotations(t,null,null,e.textMarkupAnnotation,null,!0)}if(e.shapeAnnotation&&0!==e.shapeAnnotation.length){n=window.sessionStorage.getItem(this.documentId+"_annotations_shape");if(this.isStorageExceed&&(n=this.annotationStorage[this.documentId+"_annotations_shape"]),n){var o=JSON.parse(n);e.shapeAnnotation=this.checkAnnotationCollections(o,e.shapeAnnotation,t)}e.shapeAnnotation=this.checkAnnotationCommentsCollections(e.shapeAnnotation,t),0!==e.shapeAnnotation.length&&this.pdfViewer.annotationModule.renderAnnotations(t,e.shapeAnnotation,null,null,null,!0)}if(e.measureShapeAnnotation&&0!==e.measureShapeAnnotation.length){n=window.sessionStorage.getItem(this.documentId+"_annotations_shape_measure");if(this.isStorageExceed&&(n=this.annotationStorage[this.documentId+"_annotations_shape_measure"]),n){o=JSON.parse(n);e.measureShapeAnnotation=this.checkAnnotationCollections(o,e.measureShapeAnnotation,t)}e.measureShapeAnnotation=this.checkAnnotationCommentsCollections(e.measureShapeAnnotation,t),0!==e.measureShapeAnnotation.length&&this.pdfViewer.annotationModule.renderAnnotations(t,null,e.measureShapeAnnotation,null,null,!0)}if(e.stampAnnotations&&0!==e.stampAnnotations.length){n=window.sessionStorage.getItem(this.documentId+"_annotations_stamp");if(this.isStorageExceed&&(n=this.annotationStorage[this.documentId+"_annotations_stamp"]),n){o=JSON.parse(n);e.stampAnnotations=this.checkAnnotationCollections(o,e.stampAnnotations,t)}e.stampAnnotations=this.checkAnnotationCommentsCollections(e.stampAnnotations,t),0!==e.stampAnnotations.length&&this.pdfViewer.annotationModule.stampAnnotationModule.renderStampAnnotations(e.stampAnnotations,t,null,!0)}if(e.stickyNotesAnnotation&&0!==e.stickyNotesAnnotation.length){n=window.sessionStorage.getItem(this.documentId+"_annotations_sticky");if(this.isStorageExceed&&(n=this.annotationStorage[this.documentId+"_annotations_sticky"]),n){o=JSON.parse(n);e.stickyNotesAnnotation=this.checkAnnotationCollections(o,e.stickyNotesAnnotation,t)}e.stickyNotesAnnotation=this.checkAnnotationCommentsCollections(e.stickyNotesAnnotation,t),0!==e.stickyNotesAnnotation.length&&this.pdfViewer.annotationModule.stickyNotesAnnotationModule.renderStickyNotesAnnotations(e.stickyNotesAnnotation,t)}if(e.freeTextAnnotation&&0!==e.freeTextAnnotation.length){n=window.sessionStorage.getItem(this.documentId+"_annotations_freetext");if(this.isStorageExceed&&(n=this.annotationStorage[this.documentId+"_annotations_freetext"]),n){o=JSON.parse(n);e.freeTextAnnotation=this.checkAnnotationCollections(o,e.freeTextAnnotation,t)}e.freeTextAnnotation=this.checkAnnotationCommentsCollections(e.freeTextAnnotation,t),0!==e.freeTextAnnotation.length&&this.pdfViewer.annotationModule.freeTextAnnotationModule.renderFreeTextAnnotations(e.freeTextAnnotation,t,!0)}if(e.signatureAnnotation&&0!==e.signatureAnnotation.length){n=window.sessionStorage.getItem(this.documentId+"_annotations_sign");(o=JSON.parse(n))&&(e.signatureAnnotation=this.checkSignatureCollections(o,e.signatureAnnotation,t)),this.signatureModule.renderExistingSignature(e.signatureAnnotation,t,!0)}if(e.signatureInkAnnotation&&0!==e.signatureInkAnnotation.length){n=window.sessionStorage.getItem(this.documentId+"_annotations_ink");if(this.isStorageExceed&&(n=this.annotationStorage[this.documentId+"_annotations_ink"]),n){o=JSON.parse(n);e.signatureInkAnnotation=this.checkAnnotationCollections(o,e.signatureInkAnnotation,t)}e.signatureInkAnnotation=this.checkAnnotationCommentsCollections(e.signatureInkAnnotation,t),0!==e.signatureInkAnnotation.length&&this.pdfViewer.annotationModule.inkAnnotationModule.renderExistingInkSignature(e.signatureInkAnnotation,t,!0)}}},e.prototype.checkSignatureCollections=function(e,t,i){for(var n=null,o=0;o<e.length;o++)e[o].pageIndex===i&&(n=e[o].annotations);if(n)for(var a=0;a<n.length;a++)for(var s=0;s<t.length;s++)n[a].signatureName===t[s].SignatureName&&(t.splice(s,1),s-=1);return n=null,t},e.prototype.checkAnnotationCollections=function(e,t,i){for(var n=null,o=0;o<e.length;o++)e[o].pageIndex===i&&(n=e[o].annotations);if(n)for(var a=0;a<n.length;a++)for(var s=0;s<t.length;s++)n[a].annotName===t[s].AnnotName&&(t.splice(s,1),s-=1);return n=null,t},e.prototype.checkAnnotationCommentsCollections=function(e,t){if(this.annotationComments){var i=this.annotationComments[t];if(i=this.selectAnnotationCollections(i))for(var n=0;n<i.length;n++)for(var o=0;o<e.length;o++)i[n].AnnotName===e[o].AnnotName&&(i[n].isAlreadyAdded=!0,e.splice(o,1),o-=1);i=null}return e},e.prototype.selectAnnotationCollections=function(e){var t=[];if(e){if(e.textMarkupAnnotation&&0!==e.textMarkupAnnotation.length)for(var i=0;i<e.textMarkupAnnotation.length;i++)t.push(e.textMarkupAnnotation[i]);if(e.shapeAnnotation&&0!==e.shapeAnnotation.length)for(i=0;i<e.shapeAnnotation.length;i++)t.push(e.shapeAnnotation[i]);if(e.measureShapeAnnotation&&0!==e.measureShapeAnnotation.length)for(i=0;i<e.measureShapeAnnotation.length;i++)t.push(e.measureShapeAnnotation[i]);if(e.stampAnnotations&&0!==e.stampAnnotations.length)for(i=0;i<e.stampAnnotations.length;i++)t.push(e.stampAnnotations[i]);if(e.stickyNotesAnnotation&&0!==e.stickyNotesAnnotation.length)for(i=0;i<e.stickyNotesAnnotation.length;i++)t.push(e.stickyNotesAnnotation[i]);if(e.freeTextAnnotation&&0!==e.freeTextAnnotation.length)for(i=0;i<e.freeTextAnnotation.length;i++)t.push(e.freeTextAnnotation[i]);if(e.signatureInkAnnotation&&0!==e.signatureInkAnnotation.length)for(i=0;i<e.signatureInkAnnotation.length;i++)t.push(e.signatureInkAnnotation[i])}return t},e.prototype.saveImportedAnnotations=function(){var e=window.sessionStorage.getItem(this.documentId+"_annotations_textMarkup"),t=window.sessionStorage.getItem(this.documentId+"_annotations_shape"),i=window.sessionStorage.getItem(this.documentId+"_annotations_shape_measure"),n=window.sessionStorage.getItem(this.documentId+"_annotations_stamp"),o=window.sessionStorage.getItem(this.documentId+"_annotations_sticky"),a=window.sessionStorage.getItem(this.documentId+"_annotations_freetext"),s=window.sessionStorage.getItem(this.documentId+"_annotations_ink"),r=window.sessionStorage.getItem(this.documentId+"_annotations_sign");if(this.isStorageExceed&&(e=this.annotationStorage[this.documentId+"_annotations_textMarkup"],t=this.annotationStorage[this.documentId+"_annotations_shape"],i=this.annotationStorage[this.documentId+"_annotations_shape_measure"],n=this.annotationStorage[this.documentId+"_annotations_stamp"],o=this.annotationStorage[this.documentId+"_annotations_sticky"],a=this.annotationStorage[this.documentId+"_annotations_freetext"],s=this.annotationStorage[this.documentId+"_annotations_ink"],r=this.annotationStorage[this.documentId+"_annotations_sign"]),this.downloadCollections={textMarkupObject:e,shapeObject:t,measureShapeObject:i,stampObject:n,stickyObject:o,freeTextObject:a,inkObject:s,signatureObject:r},this.documentAnnotationCollections)for(var l=0;l<this.pageCount;l++)if(this.documentAnnotationCollections[l]){var d=S(this.documentAnnotationCollections[l]);d=this.checkDocumentCollectionData(l,d),this.savePageAnnotations(d,l)}},e.prototype.savePageAnnotations=function(e,t){if(0!==e.textMarkupAnnotation.length)for(var i=0;i<e.textMarkupAnnotation.length;i++)this.pdfViewer.annotationModule.textMarkupAnnotationModule.saveImportedTextMarkupAnnotations(e.textMarkupAnnotation[i],t);if(0!==e.shapeAnnotation.length)for(i=0;i<e.shapeAnnotation.length;i++)this.pdfViewer.annotationModule.shapeAnnotationModule.saveImportedShapeAnnotations(e.shapeAnnotation[i],t);if(0!==e.measureShapeAnnotation.length)for(i=0;i<e.measureShapeAnnotation.length;i++)this.pdfViewer.annotationModule.measureAnnotationModule.saveImportedMeasureAnnotations(e.measureShapeAnnotation[i],t);if(0!==e.stampAnnotations.length)for(i=0;i<e.stampAnnotations.length;i++)this.pdfViewer.annotationModule.stampAnnotationModule.saveImportedStampAnnotations(e.stampAnnotations[i],t);if(0!==e.stickyNotesAnnotation.length)for(i=0;i<e.stickyNotesAnnotation.length;i++)this.pdfViewer.annotationModule.stickyNotesAnnotationModule.saveImportedStickyNotesAnnotations(e.stickyNotesAnnotation[i],t);if(0!==e.freeTextAnnotation.length)for(i=0;i<e.freeTextAnnotation.length;i++)this.pdfViewer.annotationModule.freeTextAnnotationModule.saveImportedFreeTextAnnotations(e.freeTextAnnotation[i],t);if(0!==e.signatureInkAnnotation.length)for(i=0;i<e.signatureInkAnnotation.length;i++)this.pdfViewer.annotationModule.inkAnnotationModule.saveImportedInkAnnotation(e.signatureInkAnnotation[i],t)},e.prototype.updateDocumentAnnotationCollections=function(){window.sessionStorage.removeItem(this.documentId+"_annotations_textMarkup"),window.sessionStorage.removeItem(this.documentId+"_annotations_shape"),window.sessionStorage.removeItem(this.documentId+"_annotations_shape_measure"),window.sessionStorage.removeItem(this.documentId+"_annotations_stamp"),window.sessionStorage.removeItem(this.documentId+"_annotations_sticky"),window.sessionStorage.removeItem(this.documentId+"_annotations_freetext"),window.sessionStorage.removeItem(this.documentId+"_annotations_ink"),this.downloadCollections&&(this.isStorageExceed?(this.annotationStorage[this.documentId+"_annotations_textMarkup"]=this.downloadCollections.textMarkupObject,this.annotationStorage[this.documentId+"_annotations_shape"]=this.downloadCollections.shapeObject,this.annotationStorage[this.documentId+"_annotations_shape_measure"]=this.downloadCollections.measureShapeObject,this.annotationStorage[this.documentId+"_annotations_stamp"]=this.downloadCollections.stampObject,this.annotationStorage[this.documentId+"_annotations_sticky"]=this.downloadCollections.stickyObject,this.annotationStorage[this.documentId+"_annotations_freetext"]=this.downloadCollections.freeTextObject,this.annotationStorage[this.documentId+"_annotations_ink"]=this.downloadCollections.inkObject):(this.downloadCollections.textMarkupObject&&window.sessionStorage.setItem(this.documentId+"_annotations_textMarkup",this.downloadCollections.textMarkupObject),this.downloadCollections.shapeObject&&window.sessionStorage.setItem(this.documentId+"_annotations_shape",this.downloadCollections.shapeObject),this.downloadCollections.measureShapeObject&&window.sessionStorage.setItem(this.documentId+"_annotations_shape_measure",this.downloadCollections.measureShapeObject),this.downloadCollections.stampObject&&window.sessionStorage.setItem(this.documentId+"_annotations_stamp",this.downloadCollections.stampObject),this.downloadCollections.stickyObject&&window.sessionStorage.setItem(this.documentId+"_annotations_sticky",this.downloadCollections.stickyObject),this.downloadCollections.freeTextObject&&window.sessionStorage.setItem(this.documentId+"_annotations_freetext",this.downloadCollections.freeTextObject),this.downloadCollections.inkObject&&window.sessionStorage.setItem(this.documentId+"_annotations_ink",this.downloadCollections.inkObject)))},e.prototype.createAnnotationJsonData=function(){var e,t,i,n,o,a,s,r,l={};if(this.saveImportedAnnotations(),this.isTextMarkupAnnotationModule()&&(this.isJsonExported=!0,e=this.pdfViewer.annotationModule.textMarkupAnnotationModule.saveTextMarkupAnnotations()),this.isShapeAnnotationModule()&&(this.isJsonExported=!0,t=this.pdfViewer.annotationModule.shapeAnnotationModule.saveShapeAnnotations()),this.isCalibrateAnnotationModule()&&(this.isJsonExported=!0,i=this.pdfViewer.annotationModule.measureAnnotationModule.saveMeasureShapeAnnotations()),this.isStampAnnotationModule()&&(n=this.pdfViewer.annotationModule.stampAnnotationModule.saveStampAnnotations()),this.isCommentAnnotationModule()&&(o=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.saveStickyAnnotations()),this.isFreeTextAnnotationModule()&&(a=this.pdfViewer.annotationModule.freeTextAnnotationModule.saveFreeTextAnnotations()),this.isInkAnnotationModule()&&(r=this.pdfViewer.annotationModule.inkAnnotationModule.saveInkSignature()),this.pdfViewer.isSignatureEditable)s=this.signatureModule.saveSignature();else{for(var d=new Array,h=0;h<this.pageCount;h++)d[h]=[];s=JSON.stringify(d)}for(var p=0;p<this.pageCount;p++){var c={textMarkupAnnotation:JSON.parse(e)[p],shapeAnnotation:JSON.parse(t)[p],measureShapeAnnotation:JSON.parse(i)[p],stampAnnotations:JSON.parse(n)[p],stickyNotesAnnotation:JSON.parse(o)[p],freeTextAnnotation:JSON.parse(a)[p],signatureAnnotation:JSON.parse(s)[p],signatureInkAnnotation:JSON.parse(r)[p]};l[p]=c}return JSON.stringify(l)},e.prototype.combineImportedData=function(e,t){for(var i=0;i<this.pageCount;i++)if(t[i])if(e[i])t[i].textMarkupAnnotation&&0!==t[i].textMarkupAnnotation.length&&(e[i].textMarkupAnnotation?(t[i].textMarkupAnnotation=this.checkImportedData(e[i].textMarkupAnnotation,t[i].textMarkupAnnotation,i),0!==t[i].textMarkupAnnotation.length&&(e[i].textMarkupAnnotation=e[i].textMarkupAnnotation.concat(t[i].textMarkupAnnotation))):e[i].textMarkupAnnotation=t[i].textMarkupAnnotation),t[i].shapeAnnotation&&0!==t[i].shapeAnnotation.length&&(e[i].shapeAnnotation?(t[i].shapeAnnotation=this.checkImportedData(e[i].shapeAnnotation,t[i].shapeAnnotation,i),0!==t[i].shapeAnnotation.length&&(e[i].shapeAnnotation=e[i].shapeAnnotation.concat(t[i].shapeAnnotation))):e[i].shapeAnnotation=t[i].shapeAnnotation),t[i].measureShapeAnnotation&&0!==t[i].measureShapeAnnotation.length&&(e[i].measureShapeAnnotation?(t[i].measureShapeAnnotation=this.checkImportedData(e[i].measureShapeAnnotation,t[i].measureShapeAnnotation,i),0!==t[i].measureShapeAnnotation.length&&(e[i].measureShapeAnnotation=e[i].measureShapeAnnotation.concat(t[i].measureShapeAnnotation))):e[i].measureShapeAnnotation=t[i].measureShapeAnnotation),t[i].stampAnnotations&&0!==t[i].stampAnnotations.length&&(e[i].stampAnnotations?(t[i].stampAnnotations=this.checkImportedData(e[i].stampAnnotations,t[i].stampAnnotations,i),0!==t[i].stampAnnotations.length&&(e[i].stampAnnotations=e[i].stampAnnotations.concat(t[i].stampAnnotations))):e[i].stampAnnotations=t[i].stampAnnotations),t[i].stickyNotesAnnotation&&0!==t[i].stickyNotesAnnotation.length&&(e[i].stickyNotesAnnotation?(t[i].stickyNotesAnnotation=this.checkImportedData(e[i].stickyNotesAnnotation,t[i].stickyNotesAnnotation,i),0!==t[i].stickyNotesAnnotation.length&&(e[i].stickyNotesAnnotation=e[i].stickyNotesAnnotation.concat(t[i].stickyNotesAnnotation))):e[i].stickyNotesAnnotation=t[i].stickyNotesAnnotation),t[i].freeTextAnnotation&&0!==t[i].freeTextAnnotation.length&&(e[i].freeTextAnnotation?(t[i].freeTextAnnotation=this.checkImportedData(e[i].freeTextAnnotation,t[i].freeTextAnnotation,i),0!==t[i].freeTextAnnotation.length&&(e[i].freeTextAnnotation=e[i].freeTextAnnotation.concat(t[i].freeTextAnnotation))):e[i].freeTextAnnotation=t[i].freeTextAnnotation),t[i].signatureInkAnnotation&&0!==t[i].signatureInkAnnotation.length&&(e[i].signatureInkAnnotation?(t[i].signatureInkAnnotation=this.checkImportedData(e[i].signatureInkAnnotation,t[i].signatureInkAnnotation,i),0!==t[i].signatureInkAnnotation.length&&(e[i].signatureInkAnnotation=e[i].signatureInkAnnotation.concat(t[i].signatureInkAnnotation))):e[i].signatureInkAnnotation=t[i].signatureInkAnnotation);else{var n={textMarkupAnnotation:t[i].textMarkupAnnotation,shapeAnnotation:t[i].shapeAnnotation,measureShapeAnnotation:t[i].measureShapeAnnotation,stampAnnotations:t[i].stampAnnotations,stickyNotesAnnotation:t[i].stickyNotesAnnotation,freeTextAnnotation:t[i].freeTextAnnotation,signatureInkAnnotation:t[i].signatureInkAnnotation};e[i]=n}return e},e.prototype.updateExportItem=function(){var e=window.sessionStorage.getItem(this.documentId+"_annotations_shape"),t=window.sessionStorage.getItem(this.documentId+"_annotations_shape_measure"),i=window.sessionStorage.getItem(this.documentId+"_annotations_stamp"),n=window.sessionStorage.getItem(this.documentId+"_annotations_sticky"),o=window.sessionStorage.getItem(this.documentId+"_annotations_textMarkup"),a=window.sessionStorage.getItem(this.documentId+"_annotations_freetext"),s=!1,r=window.sessionStorage.getItem(this.documentId+"_annotations_ink");this.pdfViewer.isSignatureEditable&&(window.sessionStorage.getItem(this.documentId+"_annotations_sign")&&(s=!0));return!!(e||t||i||n||o||a||this.isImportAction||this.isStorageExceed||s||r||this.isAnnotationPresent)},e.prototype.isFreeTextAnnotation=function(e){var t=!1;return e&&e.length>0&&(t=e.some((function(e){return"FreeText"===e.shapeAnnotationType&&"Text Box"===e.subject}))),t},e.prototype.checkImportedData=function(e,t,i){for(var n=0;n<e.length;n++)for(var o=0;o<t.length;o++)e[n].AnnotName===t[o].AnnotName&&(t.splice(o,1),o-=1);if(this.annotationComments){var a=this.annotationComments[i];if(a=this.selectAnnotationCollections(a))for(n=0;n<a.length;n++)for(o=0;o<t.length;o++)a[n].AnnotName===t[o].AnnotName&&(t.splice(o,1),o-=1)}return t},e.prototype.checkAnnotationWidth=function(e){for(var t,i,n,o,a=0;a<e.length;a++)t?(t>e[a].x?t=e[a].x:i<e[a].x&&(i=e[a].x),n>e[a].y?n=e[a].y:o<e[a].y&&(o=e[a].y)):(t=e[a].x,i=e[a].x,n=e[a].y,o=e[a].y);return{width:i-t,height:o-n}},e.prototype.deleteAnnotations=function(){if(this.pdfViewer.annotationModule){this.pdfViewer.annotations=[],this.pdfViewer.zIndexTable=[],this.pdfViewer.annotationCollection=[],this.pdfViewer.signatureCollection=[];var e=this.createAnnotationsCollection();this.annotationComments=e,this.documentAnnotationCollections=e,this.annotationRenderredList=[],window.sessionStorage.removeItem(this.documentId+"_annotations_shape"),window.sessionStorage.removeItem(this.documentId+"_annotations_shape_measure"),window.sessionStorage.removeItem(this.documentId+"_annotations_stamp"),window.sessionStorage.removeItem(this.documentId+"_annotations_sticky"),window.sessionStorage.removeItem(this.documentId+"_annotations_textMarkup"),window.sessionStorage.removeItem(this.documentId+"_annotations_freetext"),window.sessionStorage.removeItem(this.documentId+"_annotations_sign"),window.sessionStorage.removeItem(this.documentId+"_annotations_ink");for(var t=0;t<this.pageCount;t++){this.pdfViewer.annotationModule.renderAnnotations(t,null,null,null),this.pdfViewer.renderDrawing(void 0,t),this.pdfViewer.clearSelection(t);document.getElementById(this.pdfViewer.dataId+"_accordionContainer"+(t+1));var i=document.getElementById(this.pdfViewer.dataId+"_accordionContentContainer");i&&0===i.childElementCount&&(i.style.display="none",document.getElementById(this.pdfViewer.dataId+"_commentsPanelText")&&(this.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant("Export Annotations")],!1),document.getElementById(this.pdfViewer.dataId+"_commentsPanelText").style.display="block"))}this.isImportedAnnotation=!1,this.isImportAction=!1,this.importedAnnotation=[],this.annotationPageList=[],this.pdfViewer.annotationModule.freeTextAnnotationModule.freeTextPageNumbers=[],this.pdfViewer.annotationModule.stampAnnotationModule.stampPageNumber=[],this.pdfViewer.annotation.inkAnnotationModule.inkAnnotationindex=[],this.isAnnotationCollectionRemoved=!0}},e.prototype.createAnnotationsCollection=function(e,t){var i=[];if(t)(i={})[e]=o={textMarkupAnnotation:[],shapeAnnotation:[],measureShapeAnnotation:[],stampAnnotations:[],stickyNotesAnnotation:[],freeTextAnnotation:[],signatureAnnotation:[],signatureInkAnnotation:[]};else for(var n=0;n<this.pageCount;n++){var o={textMarkupAnnotation:[],shapeAnnotation:[],measureShapeAnnotation:[],stampAnnotations:[],stickyNotesAnnotation:[],freeTextAnnotation:[],signatureAnnotation:[],signatureInkAnnotation:[]};i.push(o)}return i},e.prototype.addAnnotation=function(e){var t,i={};if(e){var n=!1,o=1;e.shapeAnnotationType||e.author?(n=!0,t=this.createAnnotationsCollection(e.pageNumber,!0)):e.length?(o=e.length,t=this.createAnnotationsCollection()):(n=!0,t=this.createAnnotationsCollection(e.pageNumber,!0));for(var a=0;a<o;a++){var s=void 0;s=n?e:e[a];var r={};if(r.ShapeAnnotationType=s.shapeAnnotationType,r.AnnotationAddMode=s.annotationAddMode,r.Author=s.author,r.AnnotationSelectorSettings=s.annotationSelectorSettings,r.AnnotationSettings=s.annotationSettings,r.PageNumber=s.pageNumber,r.ModifiedDate=s.modifiedDate,r.Subject=s.subject,r.Note=s.note,r.AnnotName=s.annotationId,r.IsCommentLock=s.isCommentLock,r.Comments=s.comments,s.comments&&s.comments.length>0){for(var l=[],d=0;d<s.comments.length;d++)l.push(this.updateComments(s,s.comments[d]));r.Comments=l}if(s.review&&(r.State=s.review.state,r.StateModel=s.review.stateModel),r.CustomData=s.customData,r.Opacity=s.opacity,"textMarkup"===s.shapeAnnotationType){if(r.AnnotType="textMarkup",r.Color=s.color,r.IsMultiSelect=s.isMultiSelect,r.TextMarkupAnnotationType=s.textMarkupAnnotationType,r.TextMarkupContent=s.textMarkupContent,r.TextMarkupStartIndex=s.textMarkupStartIndex,r.TextMarkupEndIndex=s.textMarkupEndIndex,s.rect&&(r.Rect=this.convertBounds(s.rect,!0)),s.bounds&&s.bounds.length>=1){var h=new Array;for(d=0;d<s.bounds.length;d++)h.push(this.convertBounds(s.bounds[d]));r.Bounds=h}t[s.pageNumber].textMarkupAnnotation.push(r)}else if("sticky"===s.shapeAnnotationType)r.AnnotType="sticky",r.Icon="Comment",r.Bounds=this.convertBounds(s.bounds),r.StrokeColor=s.strokeColor,r.Color=s.color,t[s.pageNumber].stickyNotesAnnotation.push(r);else if("FreeText"===s.shapeAnnotationType)r.AnnotType="freeText",r.Name=s.annotationId,r.MarkupText=s.dynamicText,r.Text=s.dynamicText,r.Note=s.dynamicText,r.TextAlign=s.textAlign,r.Thickness=s.thicknes,r.StrokeColor=s.strokeColor,r.FillColor=s.fillColor,r.FontColor=s.fontColor,r.FontSize=s.fontSize,r.FontFamily=s.fontFamily,r.Rotate=s.rotateAngle,r.Bounds=this.convertBounds(s.bounds),r.Font={Name:s.fontFamily,Size:s.fontSize,Bold:s.font.isBold,Italic:s.font.isItalic,Strikeout:s.font.isStrikeout,Underline:s.font.isUnderline},t[s.pageNumber].freeTextAnnotation.push(r);else if("stamp"===s.shapeAnnotationType){if(r.AnnotType="stamp",r.Icon=s.icon,r.isDynamic=!1,r.Rect=this.convertBounds(s.bounds,!1,!0),r.RotateAngle=s.rotateAngle,r.FillColor=s.fillColor,r.StrokeColor=s.strokeColor,r.StampAnnotationType=s.stampAnnotationType,r.CreationDate=s.creationDate,"image"===s.stampAnnotationType){var p=[],c={imagedata:s.stampAnnotationPath};p.push(c),r.Apperarance=p}if(s.isDynamicStamp){r.IsDynamic=!0,r.StrokeColor=s.stampFillcolor;p=[],c={type:"string",text:s.dynamicText,currentFontname:"95b303ab-d397-438a-83af-e2ff8a9900f1",baseFontName:"Helvetica-BoldOblique",fontSize:10,isImport:!0};p.push(c),r.Apperarance=p}t[s.pageNumber].stampAnnotations.push(r)}else if("Ink"===s.shapeAnnotationType||"Signature"===s.shapeAnnotationType)r.StrokeColor=s.strokeColor,r.FillColor=s.fillColor,r.Thickness=s.thickness,r.Bounds=this.convertBounds(s.bounds),r.PathData=s.data,r.pageIndex=s.pageNumber,"Ink"===s.shapeAnnotationType&&(r.AnnotType="Ink",r.IsPathData=!0,t[s.pageNumber].signatureInkAnnotation.push(r)),"Signature"===s.shapeAnnotationType&&(r.AnnotType="Signature",r.SignatureName=s.annotationId,r.IsSignature=!0,t[s.pageNumber].signatureAnnotation.push(r));else if("Line"===s.shapeAnnotationType||"LineWidthArrowHead"===s.shapeAnnotationType||"Polyline"===s.shapeAnnotationType||"Polygon"===s.shapeAnnotationType||"Polyline"===s.shapeAnnotationType||"Circle"===s.shapeAnnotationType||"Oval"===s.shapeAnnotationType||"Rectangle"===s.shapeAnnotationType||"Square"===s.shapeAnnotationType||"Ellipse"===s.shapeAnnotationType){if(r.AnnotType="shape",r.StrokeColor=s.strokeColor,r.FillColor=s.fillColor,r.Thickness=s.thickness,r.BorderStyle=s.borderStyle,r.BorderDashArray=s.borderDashArray,r.RotateAngle=s.rotateAngle,r.IsCloudShape=s.isCloudShape,r.CloudIntensity=s.cloudIntensity,r.RectangleDifference=s.rectangleDifference,r.LineHeadStart=s.lineHeadStart,r.LineHeadEnd=s.lineHeadEnd,r.IsLocked=s.isLocked,r.EnableShapeLabel=s.enableShapeLabel,r.LabelContent=s.labelContent,r.LabelFillColor=s.labelFillColor,r.LabelBorderColor=s.labelBorderColor,r.FontColor=s.fontColor,r.FontSize=s.fontSize,r.LabelBounds=this.convertBounds(s.labelBounds),r.LabelSettings=s.labelSettings,r.Bounds=this.convertBounds(s.bounds),r.LeaderLength=s.leaderLength,r.LeaderLineExtenstion=s.leaderLineExtension,s.vertexPoints&&s.vertexPoints.length>=1){var u=new Array;for(d=0;d<s.vertexPoints.length;d++)u.push(this.convertVertexPoints(s.vertexPoints[d]));r.VertexPoints=u}if(r.EnableShapeLabel=s.enableShapeLabel,"Distance calculation"===s.subject||"Perimeter calculation"===s.subject||"Area calculation"===s.subject||"Radius calculation"===s.subject||"Volume calculation"===s.subject){r.AnnotType="shape_measure";var f=s.calibrate;f&&(r.Calibrate={Ratio:f.ratio,X:[{Unit:f.x[0].unit,ConversionFactor:f.x[0].conversionFactor,FractionalType:f.x[0].fractionalType,Denominator:f.x[0].denominator,FormatDenominator:f.x[0].formatDenominator}],Distance:[{Unit:f.distance[0].unit,ConversionFactor:f.distance[0].conversionFactor,FractionalType:f.distance[0].fractionalType,Denominator:f.distance[0].denominator,FormatDenominator:f.distance[0].formatDenominator}],Area:[{Unit:f.area[0].unit,ConversionFactor:f.area[0].conversionFactor,FractionalType:f.area[0].fractionalType,Denominator:f.area[0].denominator,FormatDenominator:f.area[0].formatDenominator}],Angle:null,Volume:null,TargetUnitConversion:f.targetUnitConversion,Depth:f.depth}),r.Indent=s.indent,r.Caption=s.caption,r.CaptionPosition=s.captionPosition,r.LeaderLineExtension=s.leaderLineExtension,r.LeaderLength=s.leaderLength,r.LeaderLineOffset=s.leaderLineOffset,t[s.pageNumber].measureShapeAnnotation.push(r)}else t[s.pageNumber].shapeAnnotation.push(r)}}i.pdfAnnotation=t,this.pdfViewer.importAnnotation(i)}},e.prototype.convertBounds=function(e,t,i){if(e){if(t)return{left:e.left?e.left:e.Left?e.Left:0,right:e.right?e.right:e.Right?e.Right:0,bottom:e.bottom?e.bottom:e.Bottom?e.Bottom:0,top:e.top?e.top:e.Top?e.Top:0};var n=e.x?e.x:e.left?e.left:e.Left?e.Left:0,o=e.y?e.y:e.top?e.top:e.Top?e.Top:0,a=e.width?e.width:e.Width?e.Width:0,s=e.height?e.height:e.Height?e.Height:0;return i?{X:this.ConvertPixelToPoint(n),Y:this.ConvertPixelToPoint(o),Left:this.ConvertPixelToPoint(n),Top:this.ConvertPixelToPoint(o),Height:this.ConvertPixelToPoint(s),Width:this.ConvertPixelToPoint(a)}:{X:n,Y:o,Left:n,Top:o,Height:s,Width:a}}},e.prototype.ConvertPixelToPoint=function(e){return.75*e},e.prototype.convertVertexPoints=function(e){if(e){var t=e.x?e.x:e.X?e.X:0,i=e.y?e.y:e.Y?e.Y:0;return{X:t,Y:i,Left:t,Top:i}}},e.prototype.updateComments=function(e,t){if(e&&t){var i={};return i.ShapeAnnotationType=e.shapeAnnotationType,i.Author=t.author,i.AnnotationSelectorSettings=e.annotationSelectorSettings,i.AnnotationSettings=e.annotationSettings,i.PageNumber=e.pageNumber,i.ModifiedDate=t.modifiedDate,i.Subject=e.subject,i.Note=t.note,i.AnnotName=t.annotName,i.Comments=t.comments,i.State=t.review.state,i.StateModel=t.review.stateModel,i.CustomData=e.customData,i.IsLock=t.isLock,i}},e.prototype.removeFocus=function(){var e=this.pdfViewer.element.querySelector("#"+this.pdfViewer.dataId+"_totalPage");e&&e.firstElementChild&&e.firstElementChild.firstElementChild&&e.firstElementChild.firstElementChild.blur()},e.prototype.updateDocumentEditedProperty=function(e){this.pdfViewer.allowServerDataBinding=!0,this.pdfViewer.isDocumentEdited=e,this.pdfViewer.updatePdfViewerOptions("IsDocumentEdited",e),this.pdfViewer.allowServerDataBinding=!1},e.prototype.getWindowDevicePixelRatio=function(){var e=window.devicePixelRatio;return sf.base.Browser.isDevice?2:e},e.prototype.getZoomRatio=function(e){var t=this.getZoomFactor(),i=e||1,n=this.getWindowDevicePixelRatio();return!sf.base.Browser.isDevice||sf.base.Browser.isDevice&&t<=.7?i*n:i},e.prototype.importJsonForRotatedDocuments=function(e,t,i,n){var o=Math.abs(e),a=this.pageSize[t];return n!==a.rotation?(o=this.getRotationAngle(n,t),this.isPageRotated=!0):(o=0,this.isPageRotated=!1),1===o?{X:a.width-i.Y-i.Height,Y:i.X,Height:i.Width,Width:i.Height}:2===o?{X:a.width-i.X-i.Width,Y:a.height-i.Y-i.Height,Height:i.Height,Width:i.Width}:3===o?{X:i.Y,Y:a.height-i.X-i.Width,Height:i.Width,Width:i.Height}:i},e.prototype.getRotationAngle=function(e,t){var i=this.pageSize[t];if(0===(e=Math.abs(e)))return i.rotation;if(1===e||90===e){if(0==i.rotation)return 3;if(2===i.rotation)return 1;if(3===i.rotation)return 2}else if(2===e||180===e){if(0==i.rotation)return 2;if(1===i.rotation)return 3;if(3===i.rotation)return 1}else if(3===e||270===e){if(0==i.rotation)return 1;if(2===i.rotation)return 3;if(1===i.rotation)return 2}},e.prototype.calculateVertexPoints=function(e,t,i,n){var o,a=Math.abs(e),s=[],r=this.pageSize[t];a=n!==r.rotation?this.getRotationAngle(n,t):0;for(var l=0;l<i.length;l++)if(1===a)o={x:i[l].Y?r.width-i[l].Y:r.width-i[l].y,y:i[l].X?i[l].X:i[l].x},s.push(o);else if(2===a){var d={x:i[l].X?r.width-i[l].X:r.width-i[l].x,y:i[l].Y?r.height-i[l].Y:r.height-i[l].y};s.push(d)}else if(3==a)o={x:i[l].Y?i[l].Y:i[l].y,y:i[l].X?r.height-i[l].X:r.height-i[l].x},s.push(o);else{var h={x:i[l].X?i[l].X:i[l].x,y:i[l].Y?i[l].Y:i[l].y};s.push(h)}return s},e.prototype.getSanitizedString=function(e){return e.replace(/[\x00-\x1F\x7F]/g,(function(e){return"\\u"+e.charCodeAt(0).toString(16).padStart(4,"0")}))},e.prototype.isSignaturePathData=function(e){return/^([Mm]\s*-?\d+(\.\d+)?\s*,\s*-?\d+(\.\d+)?(\s+[Ll]\s*-?\d+(\.\d+)?\s*,\s*-?\d+(\.\d+)?)*\s*)+$/.test(e)},e.prototype.isSignatureImageData=function(e){return/^data:image\/([a-z]+);base64,/.test(e)},e}(),Ae=function(){function e(e,t){var i=this;this.textBoundsArray=[],this.characterBound=[],this.closeNotification=function(){i.notifyDialog.hide()},this.pdfViewer=e,this.pdfViewerBase=t}return e.prototype.addTextLayer=function(e,t,i,n){var o;return document.getElementById(this.pdfViewer.dataId+"_textLayer_"+e)||((o=sf.base.createElement("div",{id:this.pdfViewer.dataId+"_textLayer_"+e,className:"e-pv-text-layer"})).style.width=t+"px",o.style.height=i+"px",n.appendChild(o)),this.pdfViewerBase.applyElementStyles(o,e),o},e.prototype.renderTextContents=function(e,t,i,n){var o=document.getElementById(this.pdfViewer.dataId+"_textLayer_"+e),a=sf.base.createElement("canvas");if(a&&0===o.childNodes.length)for(var s=0;s<t.length;s++){var r=i[s],l=sf.base.createElement("div",{id:this.pdfViewer.dataId+"_text_"+e+"_"+s,className:"e-pv-text",attrs:{tabindex:"0"}}),d=t[s];l.textContent=d.replace(/&nbsp;/g," ")," "!==t[s].replace(/  +/g," ")&&(l.style.whiteSpace="pre"),r&&this.setStyleToTextDiv(l,r.X,r.Y,r.Bottom,r.Width,r.Height,r.Rotation),this.setTextElementProperties(l);var h=a.getContext("2d");h.font=l.style.fontSize+" "+l.style.fontFamily;var p=h.measureText(t[s].replace(/(\r\n|\n|\r)/gm,"")).width;if(r){var c=void 0;c=90===r.Rotation?r.Height*this.pdfViewerBase.getZoomFactor()/p:r.Width*this.pdfViewerBase.getZoomFactor()/p,this.applyTextRotation(c,l,n,r.Rotation,r)}o.appendChild(l),this.resizeExcessDiv(o,l),this.pdfViewer.textSelectionModule&&this.pdfViewer.enableTextSelection&&!this.pdfViewerBase.isTextSelectionDisabled&&"e-pdfviewer-formFields"!==l.className&&"e-pdfviewer-signatureformfields"!==l.className&&"e-pdfviewer-signatureformfields-signature"!==l.className&&l.classList.add("e-pv-cursor")}},e.prototype.resizeTextContents=function(e,t,i,n,o){var a=this.pdfViewerBase.getElement("_textLayer_"+e),s=sf.base.createElement("canvas");if(s)for(var r=0;r<a.childNodes.length;r++){var l=void 0,d=this.pdfViewerBase.getElement("_text_"+e+"_"+r);if(sf.base.isNullOrUndefined(d))break;i&&(l=i[r])&&this.setStyleToTextDiv(d,l.X,l.Y,l.Bottom,l.Width,l.Height,l.Rotation),this.setTextElementProperties(d);var h=s.getContext("2d");h.font=d.style.fontSize+" "+d.style.fontFamily;var p=void 0;if(t){var c=t[r];c&&(p=h.measureText(c.replace(/(\r\n|\n|\r)/gm,"")).width)}else p=h.measureText(d.textContent.replace(/(\r\n|\n|\r)/gm,"")).width;if(l){var u=void 0;u=90===l.Rotation?l.Height*this.pdfViewerBase.getZoomFactor()/p:l.Width*this.pdfViewerBase.getZoomFactor()/p,this.applyTextRotation(u,d,n,l.Rotation,l)}this.resizeExcessDiv(a,d)}else a.parentElement.removeChild(a);this.pdfViewer.textSearch&&(o||this.pdfViewer.textSearch.resizeSearchElements(e))},e.prototype.applyTextRotation=function(e,t,i,n,o){var a="scaleX("+e+")";0===i?n>=0&&n<90?t.style.transform=a:90==n||270==n?(270==n?(t.style.left=o.X+"px",t.style.top=o.Y+o.Width+"px",t.style.height=o.Height+"px",t.style.fontSize=o.Height+"px"):(t.style.left=o.X+o.Width+"px",t.style.top=o.Y+"px",t.style.height=o.Width+"px",t.style.fontSize=o.Width+"px",t.style.transformOrigin="0% 0%"),t.style.transform="rotate("+n+"deg) "+a):t.style.transform="rotate("+n+"deg) "+a:1===i?0===n?t.style.transform="rotate(90deg) "+a:-90===n?t.style.transform=a:(n+=90,t.style.transform="rotate("+n+"deg) "+a):2===i?t.style.transform=0===n?"rotate(180deg) "+a:180===n?a:"rotate("+n+"deg) "+a:3===i&&(t.style.transform=0===n?"rotate(-90deg) "+a:90===n?a:"rotate("+n+"deg) "+a)},e.prototype.setTextElementProperties=function(e){e.style.fontFamily="serif",e.style.transformOrigin="0%"},e.prototype.resizeTextContentsOnZoom=function(e){var t,i=window.sessionStorage.getItem(this.pdfViewerBase.getDocumentId()+"_"+e+"_"+this.getPreviousZoomFactor()),n=[],o=[];if(i){var a=JSON.parse(i);n=a.textBounds,o=a.textContent,t=a.rotation}if(0!==n.length)this.textBoundsArray.push({pageNumber:e,textBounds:n}),this.resizeTextContents(e,o,n,t);else{var s=this.textBoundsArray.filter((function(t){return t.pageNumber===e}));s&&0!==s.length&&(n=s[0].textBounds,this.resizeTextContents(e,null,n,t))}},e.prototype.resizeExcessDiv=function(e,t){var i=e.getBoundingClientRect(),n=t.getBoundingClientRect();(n.width+n.left>=i.width+i.left||n.width>i.width)&&(t.style.width="auto",t.style.width=t.clientWidth+"px")},e.prototype.clearTextLayers=function(e){var t=this.pdfViewerBase.currentPageNumber-3;t=t>0?t:0;var i=this.pdfViewerBase.currentPageNumber+1;i=i<this.pdfViewerBase.pageCount?i:this.pdfViewerBase.pageCount-1;for(var n=document.querySelectorAll('div[id*="'+this.pdfViewer.dataId+'_textLayer_"]'),o=0;o<n.length;o++)if(n[o].style.display="block",this.pdfViewerBase.getMagnified()&&(this.getTextSelectionStatus()||this.getTextSearchStatus())){var a=parseInt(n[o].id.split("_textLayer_")[1]);t+1<=a&&a<=i-1||this.removeElement(n[o],e)}else this.pdfViewerBase.getPinchZoomed(),this.removeElement(n[o],e)},e.prototype.removeElement=function(e,t){t?this.removeForeignObjects(e):sf.base.Browser.isIE?e.parentElement?e.parentElement.removeChild(e):e.parentNode&&e.parentNode.removeChild(e):e.remove()},e.prototype.removeForeignObjects=function(e){var t=e.getElementsByClassName("foreign-object");if(t)for(var i=0;i<t.length;i++)"e-pv-text-layer"===t[i].parentElement.className&&e.removeChild(t[0])},e.prototype.convertToSpan=function(e,t,i,n,o,a){var s=this.pdfViewerBase.getElement("_text_"+e+"_"+t),r=o.substring(i,n),l=document.createTextNode(r);if(a){var d=sf.base.createElement("span");d.className=a+" e-pv-text",d.appendChild(l),s.appendChild(d)}else s.appendChild(l)},e.prototype.applySpanForSelection=function(e,t,i,n,o,a){if(this.pdfViewer.textSelectionModule)for(var s=e;s<=t;s++){var r=void 0,l=void 0,d=this.pdfViewerBase.getElement("_textLayer_"+s).childNodes;s===e?(r=i,l=d.length-1):s===t?(r=0,l=n):(r=0,l=d.length-1),e===t&&(r=i,l=n);for(var h=r;h<=l;h++){var p=this.pdfViewerBase.getElement("_text_"+s+"_"+h),c=void 0,u=void 0,f=void 0;if(p&&p.textContent){f=p.textContent.length;var g=p.textContent;p.textContent="",h===r?(c=s===e?o:0,u=f,this.convertToSpan(s,h,0,c,g,null)):h===l&&s===t?(c=0,u=a):(c=0,u=f),r===l&&e===t&&(c=o,u=a),this.convertToSpan(s,h,c,u,g,"e-pv-maintaincontent"),h===l&&s===t&&this.convertToSpan(s,h,u,g.length,g,null)}}}},e.prototype.clearDivSelection=function(){for(var e=document.querySelectorAll('div[id*="'+this.pdfViewer.dataId+'_textLayer_"]'),t=0;t<e.length;t++)for(var i=e[t].childNodes,n=0;n<i.length;n++){var o=i[n];if("e-pdfviewer-formFields"!==o.className&&"e-pdfviewer-signatureformfields"!==o.className&&"e-pdfviewer-signatureformfields-signature"!==o.className){var a=o.textContent;(o.childNodes.length>1||1===o.childNodes.length&&"SPAN"===o.childNodes[0].tagName)&&(o.textContent="",o.textContent=a)}}},e.prototype.setStyleToTextDiv=function(e,t,i,n,o,a,s){var r;e.style.left=t*this.pdfViewerBase.getZoomFactor()+"px",e.style.top=i*this.pdfViewerBase.getZoomFactor()+"px",r=90===s?o*this.pdfViewerBase.getZoomFactor():a*this.pdfViewerBase.getZoomFactor(),e.style.height=r+"px",e.style.fontSize=r+"px"},e.prototype.getTextSelectionStatus=function(){return!!this.pdfViewer.textSelectionModule&&this.pdfViewer.textSelectionModule.isTextSelection},e.prototype.modifyTextCursor=function(e){for(var t=document.querySelectorAll('div[id*="'+this.pdfViewer.dataId+'_textLayer_"]'),i=0;i<t.length;i++)for(var n=t[i].childNodes,o=0;o<n.length;o++){var a=n[o];e&&"e-pdfviewer-formFields"!==a.className&&"e-pdfviewer-signatureformfields"!==a.className&&"e-pdfviewer-signatureformfields-signature"!==a.className?a.classList.add("e-pv-cursor"):a.classList.remove("e-pv-cursor")}},e.prototype.isBackWardSelection=function(e){var t=e.anchorNode.compareDocumentPosition(e.focusNode),i=!1;return(!t&&e.anchorOffset>e.focusOffset||t===Node.DOCUMENT_POSITION_PRECEDING)&&(i=!0),i},e.prototype.getPageIndex=function(e){var t=e.parentElement;return t||(t=e.parentNode),"e-pv-text-layer"===t.className?parseInt(e.id.split("_text_")[1]):parseInt(t.id.split("_text_")[1])},e.prototype.getTextIndex=function(e,t){var i=e.parentElement;return i||(i=e.parentNode),"e-pv-text-layer"===i.className?parseInt(e.id.split("_text_"+t+"_")[1]):parseInt(i.id.split("_text_"+t+"_")[1])},e.prototype.getPreviousZoomFactor=function(){return this.pdfViewer.magnificationModule?this.pdfViewer.magnificationModule.previousZoomFactor:1},e.prototype.getTextSearchStatus=function(){return!!this.pdfViewer.textSearchModule&&this.pdfViewer.textSearchModule.isTextSearch},e.prototype.createNotificationPopup=function(e){if(!this.isMessageBoxOpen){var t=document.getElementById(this.pdfViewer.dataId+"_notification_popup_content");t&&(t.textContent=e,t.innerHTML=e),this.pdfViewer.textSearchModule&&(this.pdfViewer.textSearch.isMessagePopupOpened=!1),this.pdfViewer._dotnetInstance.invokeMethodAsync("OpenNotificationPopup",e)}},e}(),xe=function(){function e(e){this.type="POST",this.mode=!0,this.contentType="application/json;charset=UTF-8",this.pdfViewer=e,this.retryCount=e.retryCount}return e.prototype.send=function(e){var t=this;this.httpRequest=new XMLHttpRequest,this.mode?this.sendRequest(e):setTimeout((function(){t.sendRequest(e)})),this.httpRequest.onreadystatechange=function(){var i=!1,n=t.pdfViewer.viewerBase;n&&n.isPasswordAvailable&&""===n.passwordData&&(i=!0,t.retryCount=0),t.retryCount>0&&(i=t.resendRequest(t,e)),i||t.stateChange(t)},this.httpRequest.onerror=function(){t.error(t)}},e.prototype.clear=function(){this.httpRequest&&this.httpRequest.abort(),this.onSuccess=null,this.onFailure=null,this.onError=null},e.prototype.resendRequest=function(e,t){var n=!1,o=e.httpRequest.status,a=o.toString().split("")[0];if(4===e.httpRequest.readyState&&200===o){var s=void 0;if((s=null!==this.responseType?e.httpRequest.response:e.httpRequest.responseText)&&"object"!==i(s))try{s=JSON.parse(s)}catch(e){"Document stream does not exist in the cache"!==s&&"Document Reference pointer does not exist in the cache"!==s||(n=!0)}}return("5"===a||n)&&(n=!0,this.retryCount--,e.pdfViewer.fireAjaxRequestFailed(o,e.httpRequest.statusText,t.action,!0),e.send(t)),n},e.prototype.sendRequest=function(e){this.httpRequest.open(this.type,this.url,this.mode),this.httpRequest.withCredentials=this.pdfViewer.ajaxRequestSettings.withCredentials,this.httpRequest.setRequestHeader("Content-Type",this.contentType),e=this.addExtraData(e),this.setCustomAjaxHeaders(),null!==this.responseType&&(this.httpRequest.responseType=this.responseType),this.httpRequest.send(JSON.stringify(e))},e.prototype.addExtraData=function(e){return this.pdfViewer.viewerBase.ajaxData="",this.pdfViewer.fireAjaxRequestInitiate(e),this.pdfViewer.viewerBase.ajaxData&&""!==this.pdfViewer.viewerBase.ajaxData&&(e=this.pdfViewer.viewerBase.ajaxData),e},e.prototype.stateChange=function(e){var t=e.httpRequest.status,i=t.toString().split("")[0];if(4===e.httpRequest.readyState&&200===t){var n={name:"onSuccess",data:null!==this.responseType?e.httpRequest.response:e.httpRequest.responseText,readyState:e.httpRequest.readyState,status:e.httpRequest.status};e.successHandler(n)}else if(4===e.httpRequest.readyState&&("4"===i||"5"===i)){n={name:"onFailure",status:e.httpRequest.status,statusText:e.httpRequest.statusText};e.failureHandler(n)}},e.prototype.error=function(e){var t={name:"onError",status:this.httpRequest.status,statusText:this.httpRequest.statusText};e.errorHandler(t)},e.prototype.successHandler=function(e){return this.onSuccess&&this.onSuccess(e),e},e.prototype.failureHandler=function(e){return this.onFailure&&this.onFailure(e),e},e.prototype.errorHandler=function(e){return this.onError&&this.onError(e),e},e.prototype.setCustomAjaxHeaders=function(){for(var e=0;e<this.pdfViewer.ajaxRequestSettings.ajaxHeaders.length;e++)this.httpRequest.setRequestHeader(this.pdfViewer.ajaxRequestSettings.ajaxHeaders[e].headerName,this.pdfViewer.ajaxRequestSettings.ajaxHeaders[e].headerValue)},e}(),Ce=function(){function e(e,t){var i=this;this.newObject=[],this.outputString="",this.signaturecollection=[],this.outputcollection=[],this.fontsign=[],this.signfontStyle=[],this.isSaveSignature=!1,this.isInitialFiledSaveSignature=!1,this.isSignatureFieldsSaveSignature=!1,this.saveSignatureString="",this.saveImageString="",this.signatureImageString="",this.maxSaveLimit=5,this.addStampImage=function(e){var t=e.target.files;if(null!==e.target.files[0]){var n=t[0];if("image"===n.type.split("/")[0]){var o=new FileReader;o.onload=function(e){var t=document.getElementById(i.pdfViewer.dataId+"_signatureuploadCanvas_"),n=t.getContext("2d"),o=new Image,a=i;o.onload=function(){document.getElementById(i.pdfViewer.dataId+"_e-pv-upload-button").style.visibility="hidden",n.drawImage(o,0,0,t.width,t.height),a.enableCreateButton(!1),a.outputString=o.src},o.src=e.currentTarget.result,a.outputString=e.currentTarget.result},o.readAsDataURL(n)}}e.target.value="",e.currentTarget.value=""},this.pdfViewer=e,this.pdfViewerBase=t}return e.prototype.createSignaturePanel=function(){var e=document.getElementById(this.pdfViewer.dataId+"_signatureCanvas_");if(e){if(!this.pdfViewerBase.pageContainer.querySelector(".e-pv-signature-window")){var t=this.pdfViewer.dataId,i=sf.base.createElement("div",{id:t+"_signature_window",className:"e-pv-signature-window"});i.style.display="block",this.pdfViewerBase.pageContainer.appendChild(i)}e.addEventListener("mousedown",this.signaturePanelMouseDown.bind(this)),e.addEventListener("mousemove",this.signaturePanelMouseMove.bind(this)),e.addEventListener("mouseup",this.signaturePanelMouseUp.bind(this)),e.addEventListener("mouseleave",this.signaturePanelMouseUp.bind(this)),e.addEventListener("touchstart",this.signaturePanelMouseDown.bind(this)),e.addEventListener("touchmove",this.signaturePanelMouseMove.bind(this)),e.addEventListener("touchend",this.signaturePanelMouseUp.bind(this)),this.clearSignatureCanvas()}this.pdfViewer._dotnetInstance.invokeMethodAsync("OpenSignaturePanel",this.pdfViewerBase.isToolbarSignClicked),this.drawSavedSignature()},e.prototype.drawSavedSignature=function(){if(!this.pdfViewerBase.isToolbarSignClicked&&this.isSaveSignature){this.outputString=this.saveSignatureString;var e,t=document.getElementById(this.pdfViewer.dataId+"_signatureCanvas_");t&&(e=t.getContext("2d"));var i=new Image;i.onload=function(){e&&e.drawImage(i,0,0)},i.src=this.signatureImageString;var n=document.getElementById(this.pdfViewer.dataId+"_signatureCheckBox");n&&(n.checked=!0),this.enableCreateButton(!1),this.enableClearbutton(!1)}},e.prototype.hideSignatureCheckbox=function(e){this.pdfViewerBase.isToolbarSignClicked?this.pdfViewerBase.isInitialField?this.pdfViewer.handWrittenSignatureSettings.initialDialogSettings.hideSaveSignature&&this.hideCheckboxParent(e):this.pdfViewer.handWrittenSignatureSettings.signatureDialogSettings.hideSaveSignature&&this.hideCheckboxParent(e):this.pdfViewerBase.isInitialField?this.pdfViewer.initialFieldSettings.initialDialogSettings.hideSaveSignature&&this.hideCheckboxParent(e):this.pdfViewer.signatureFieldSettings.signatureDialogSettings.hideSaveSignature&&this.hideCheckboxParent(e)},e.prototype.saveSignatureCheckbox=function(){return!this.pdfViewerBase.isToolbarSignClicked&&(this.pdfViewerBase.isInitialField?!this.pdfViewer.initialFieldSettings.initialDialogSettings.hideSaveSignature&&this.isInitialFiledSaveSignature:!this.pdfViewer.signatureFieldSettings.signatureDialogSettings.hideSaveSignature&&this.isSignatureFieldsSaveSignature)},e.prototype.hideCheckboxParent=function(e){e&&(e.parentElement.style.display="none")},e.prototype.saveSignatureImage=function(){var e=document.getElementById(this.pdfViewer.dataId+"_signatureCheckBox");if(e&&e.checked){if(""!==this.outputString){this.isSaveSignature=!0,this.saveSignatureString=this.outputString;var t=document.getElementById(this.pdfViewer.dataId+"_signatureCanvas_");this.saveImageString=t.toDataURL(),this.signatureImageString=this.saveImageString}}else this.isSaveSignature&&(this.isSaveSignature=!1,this.saveSignatureString="",this.saveImageString="",this.signatureImageString=""),this.clearSignatureCanvas()},e.prototype.addSignature=function(e){var t;if(this.pdfViewerBase.isToolbarSignClicked){var i=this.pdfViewer.annotation.createGUID();this.pdfViewerBase.currentSignatureAnnot=null,this.pdfViewerBase.isSignatureAdded=!0;var n=this.pdfViewerBase.currentPageNumber-1,o=this.pdfViewer.handWrittenSignatureSettings.thickness?this.pdfViewer.handWrittenSignatureSettings.thickness:1,a=this.pdfViewer.handWrittenSignatureSettings.opacity?this.pdfViewer.handWrittenSignatureSettings.opacity:1,s=this.pdfViewer.handWrittenSignatureSettings.strokeColor?this.pdfViewer.handWrittenSignatureSettings.strokeColor:"#000000",r=this.pdfViewer.formFieldsModule.updateSignatureAspectRatio(this.outputString,!0),l=document.getElementById(this.pdfViewer.dataId+"_signatureCanvas_");this.saveImageString=l.toDataURL(),this.signatureImageString=this.saveImageString,t={id:"sign"+this.pdfViewerBase.signatureCount,bounds:r,pageIndex:n,data:this.outputString,shapeAnnotationType:"HandWrittenSignature",opacity:a,strokeColor:s,thickness:o,signatureName:i},this.pdfViewerBase.currentSignatureAnnot=t,(d=document.getElementById(this.pdfViewer.dataId+"_signatureCheckBox"))&&d.checked&&this.addSignatureCollection(),this.hideSignaturePanel(),this.pdfViewerBase.isToolbarSignClicked=!1}else{var d=document.getElementById(this.pdfViewer.dataId+"_signatureCheckBox"),h=!1;if(e&&("Image"===e?(this.imageAddSignature(),h=!0,this.outputString=""):"Type"===e&&(this.typeAddSignature(),h=!0,this.outputString="")),!h){l=document.getElementById(this.pdfViewer.dataId+"_signatureCanvas_");this.saveImageString=l.toDataURL(),d&&d.checked?(this.isSaveSignature=!0,this.saveSignatureString=this.outputString,this.checkSaveFiledSign(this.pdfViewerBase.isInitialField,!0)):(this.isSaveSignature=!1,this.saveSignatureString="",this.checkSaveFiledSign(this.pdfViewerBase.isInitialField,!1)),this.signatureImageString=this.saveImageString,this.pdfViewer.formFieldsModule.drawSignature(null,null,this.pdfViewerBase.currentTarget,null),h=!0}}},e.prototype.checkSaveFiledSign=function(e,t){e?this.isInitialFiledSaveSignature=t:this.isSignatureFieldsSaveSignature=t},e.prototype.addSignatureInPage=function(){"Draw"===this.signaturetype?this.addSignature():"Type"===this.signaturetype?this.typeAddSignature():this.imageAddSignature()},e.prototype.typeAddSignature=function(){if(this.pdfViewerBase.isToolbarSignClicked){var e,t=this.pdfViewerBase.getZoomFactor(),i=this.pdfViewer.annotation.createGUID();this.pdfViewerBase.currentSignatureAnnot=null,this.pdfViewerBase.isSignatureAdded=!0;var n,o,a=this.pdfViewerBase.currentPageNumber-1,s=document.getElementById(this.pdfViewer.dataId+"_pageDiv_"+a);n=(parseFloat(s.style.width)/2-100)/t,o=(parseFloat(s.style.height)/2-32.5)/t;var r=this.pdfViewerBase.getZoomFactor();this.signtypevalue||this.updateSignatureTypeValue(!0);var l=this.signtypevalue;e={id:"Typesign"+this.pdfViewerBase.signatureCount,bounds:{left:n/r,top:o/r,x:n/r,y:o/r,width:200,height:65},pageIndex:a,dynamicText:l,data:this.pdfViewerBase.signatureModule.outputString,shapeAnnotationType:"SignatureText",fontFamily:this.fontName,signatureName:i},this.pdfViewerBase.currentSignatureAnnot=e;var d=document.getElementById(this.pdfViewer.dataId+"_signatureCheckBox");d&&d.checked&&this.addSignatureCollection(),this.signtypevalue="",this.hideSignaturePanel(),this.pdfViewerBase.isToolbarSignClicked=!1}else""===this.outputString&&this.updateSignatureTypeValue(),this.pdfViewer.formFieldsModule.drawSignature("Type","",this.pdfViewerBase.currentTarget),this.hideSignaturePanel()},e.prototype.imageAddSignature=function(){if(this.pdfViewerBase.isToolbarSignClicked){var e,t=this.pdfViewerBase.getZoomFactor(),i=this.pdfViewer.annotation.createGUID();this.pdfViewerBase.currentSignatureAnnot=null,this.pdfViewerBase.isSignatureAdded=!0;var n,o,a=this.pdfViewerBase.currentPageNumber-1,s=document.getElementById(this.pdfViewer.dataId+"_pageDiv_"+a);n=(parseFloat(s.style.width)/2-100)/t,o=(parseFloat(s.style.height)/2-32.5)/t;var r=this.pdfViewerBase.getZoomFactor(),l=this.signtypevalue;e={id:"Typesign"+this.pdfViewerBase.signatureCount,bounds:{left:n/r,top:o/r,x:n/r,y:o/r,width:200,height:65},pageIndex:a,dynamicText:l,data:this.pdfViewerBase.signatureModule.outputString,shapeAnnotationType:"SignatureImage",fontFamily:this.fontName,signatureName:i},this.pdfViewerBase.currentSignatureAnnot=e;var d=document.getElementById(this.pdfViewer.dataId+"_signatureCheckBox");d&&d.checked&&this.addSignatureCollection(),this.hideSignaturePanel(),this.pdfViewerBase.isToolbarSignClicked=!1}else this.pdfViewer.formFieldsModule.drawSignature("Image","",this.pdfViewerBase.currentTarget),this.hideSignaturePanel()},e.prototype.updateSignatureTypeValue=function(e){var t=document.querySelectorAll(".e-pv-font-sign");if(t)for(var i=0;i<t.length;i++)if(t[i]&&"red"===t[i].style.borderColor){e?(this.signtypevalue=t[i].textContent,this.outputString=t[i].textContent):this.outputString=t[i].textContent;try{this.fontName=JSON.parse(t[i].style.fontFamily)}catch(e){this.fontName=t[i].style.fontFamily}}},e.prototype.hideSignaturePanel=function(){this.signatureDialog&&this.signatureDialog.hide()},e.prototype.bindTypeSignatureClickEvent=function(){for(var e=0;e<4;e++){var t=document.querySelector("#"+this.pdfViewer.dataId+"_font_signature"+e);t&&t.addEventListener("click",this.typeSignatureclicked.bind(this))}},e.prototype.bindDrawSignatureClickEvent=function(){var e=document.getElementById(this.pdfViewer.dataId+"_signatureCanvas_");e&&(e.addEventListener("mousedown",this.signaturePanelMouseDown.bind(this)),e.addEventListener("mousemove",this.signaturePanelMouseMove.bind(this)),e.addEventListener("mouseup",this.signaturePanelMouseUp.bind(this)),e.addEventListener("mouseleave",this.signaturePanelMouseUp.bind(this)),e.addEventListener("touchstart",this.signaturePanelMouseDown.bind(this)),e.addEventListener("touchmove",this.signaturePanelMouseMove.bind(this)),e.addEventListener("touchend",this.signaturePanelMouseUp.bind(this)))},e.prototype.typeSignatureclicked=function(e){var t=e.target;if(t){for(var i=0;i<4;i++){var n=document.querySelector("#"+this.pdfViewer.dataId+"_font_signature"+i);n&&(n.style.borderColor="")}t.style.borderColor="red",this.outputString=t.textContent;try{this.fontName=JSON.parse(t.style.fontFamily)}catch(e){this.fontName=t.style.fontFamily}this.enableCreateButton(!1)}},e.prototype.createSignatureCanvas=function(){var e=document.getElementById(this.pdfViewer.dataId+"_signatureCanvas_"),t=document.getElementById(this.pdfViewer.dataId+"Signature_appearance");e&&e.remove(),t&&t.remove();var i,n,o,a=sf.base.createElement("div",{id:this.pdfViewer.dataId+"Signature_appearance",className:"e-pv-signature-apperance",styles:"margin-top:30px"}),s=sf.base.createElement("canvas",{id:this.pdfViewer.dataId+"_signatureCanvas_",className:"e-pv-signature-canvas"});this.pdfViewer.element.offsetWidth>750?s.width=714:s.width=this.pdfViewer.element.offsetWidth-35,s.classList.add("e-pv-canvas-signature"),s.height=305,s.style.height="305px",s.style.border="1px dotted #bdbdbd",s.style.backgroundColor="white",s.style.boxSizing="border-box",s.style.borderRadius="2px",s.addEventListener("mousedown",this.signaturePanelMouseDown.bind(this)),s.addEventListener("mousemove",this.signaturePanelMouseMove.bind(this)),s.addEventListener("mouseup",this.signaturePanelMouseUp.bind(this)),s.addEventListener("mouseleave",this.signaturePanelMouseUp.bind(this)),s.addEventListener("touchstart",this.signaturePanelMouseDown.bind(this)),s.addEventListener("touchmove",this.signaturePanelMouseMove.bind(this)),s.addEventListener("touchend",this.signaturePanelMouseUp.bind(this)),a.appendChild(s),o=this.pdfViewerBase.isToolbarSignClicked&&!this.pdfViewerBase.isInitialField?this.pdfViewer.localeObj.getConstant("Save Signature"):this.pdfViewerBase.isInitialField?this.pdfViewer.localeObj.getConstant("Save Initial"):this.pdfViewer.localeObj.getConstant("Save Signature"),this.pdfViewer.hideSaveSignature||((n=document.createElement("input")).type="checkbox",n.id="checkbox",a.appendChild(n),(i=new sf.buttons.CheckBox({label:o,disabled:!1,checked:!1})).appendTo(n)),this.isSaveSignature=this.saveSignatureCheckbox(),this.isSaveSignature&&(i.checked=!0);var r=sf.base.createElement("div",{id:this.pdfViewer.dataId+"type_appearance",className:"e-pv-signature-apperance",styles:"margin-top:6px"}),l=document.createElement("input");l.type="text",l.id=this.pdfViewer.dataId+"_e-pv-Signtext-box",r.appendChild(l);var d=new sf.inputs.TextBox({placeholder:this.pdfViewer.localeObj.getConstant("Enter Signature as Name"),floatLabelType:"Auto"});d.appendTo(l);var h=sf.base.createElement("div",{id:this.pdfViewer.dataId+"_font_appearance",className:"e-pv-font-appearance-style"});h.classList.add("e-pv-canvas-signature"),h.style.height="270px",h.style.border="1px dotted #bdbdbd",h.style.boxSizing="border-box",h.style.borderRadius="2px",h.style.backgroundColor="white",h.style.color="black",h.style.marginTop="8px",r.appendChild(h),(n=document.createElement("input")).type="checkbox",n.id="checkbox1",r.appendChild(n),(i=new sf.buttons.CheckBox({label:o,disabled:!1,checked:!1})).appendTo(n),d.addEventListener("input",this.renderSignatureText.bind(this)),this.enableCreateButton(!0);var p=sf.base.createElement("div",{id:this.pdfViewer.dataId+"Signature_tab"}),c=sf.base.createElement("div",{id:this.pdfViewer.dataId+"upload_appearance",className:"e-pv-signature-apperance",styles:"padding-top:30px"}),u=document.createElement("div");u.id=this.pdfViewer.dataId+"_e-pv-upload-button",c.appendChild(u);var f=new sf.buttons.Button({cssClass:"e-pv-sign-upload",content:this.pdfViewer.localeObj.getConstant("Browse Signature Image")});f.appendTo(u),f.element.style.position="absolute";var g=sf.base.createElement("canvas",{id:this.pdfViewer.dataId+"_signatureuploadCanvas_",className:"e-pv-signature-uploadcanvas"});this.pdfViewer.element.offsetWidth>750?g.width=714:g.width=this.pdfViewer.element.offsetWidth-35,g.classList.add("e-pv-canvas-signature"),g.height=305,g.style.height="305px",f.element.style.left=g.width/2-50+"px",f.element.style.top=parseFloat(g.style.height)/2+20+"px",g.style.border="1px dotted #bdbdbd",g.style.backgroundColor="white",g.style.boxSizing="border-box",g.style.borderRadius="2px",g.style.zIndex="0",c.appendChild(g),(n=document.createElement("input")).type="checkbox",n.id="checkbox2",c.appendChild(n),(i=new sf.buttons.CheckBox({label:o,disabled:!1,checked:!1})).appendTo(n),u.addEventListener("click",this.uploadSignatureImage.bind(this)),this.signfontStyle=[{FontName:"Helvetica"},{FontName:"Times New Roman"},{FontName:"Courier"},{FontName:"Symbol"}];var m=[];if(this.pdfViewerBase.isToolbarSignClicked&&!sf.base.isNullOrUndefined(this.pdfViewer.handWrittenSignatureSettings.typeSignatureFonts))for(var w=0;w<4;w++)sf.base.isNullOrUndefined(this.pdfViewer.handWrittenSignatureSettings.typeSignatureFonts[w])||(this.signfontStyle[w].FontName=this.pdfViewer.handWrittenSignatureSettings.typeSignatureFonts[w]);for(var y=0;y<this.signfontStyle.length;y++)m[y]=document.createElement("div"),m[y].id="_font_signature"+y,m[y].classList.add("e-pv-font-sign");this.fontsign=m;var S=this,v=[];return v=this.pdfViewerBase.isToolbarSignClicked?this.pdfViewerBase.isInitialField?this.showHideSignatureTab(this.pdfViewer.handWrittenSignatureSettings.initialDialogSettings.displayMode,a,r,c):this.showHideSignatureTab(this.pdfViewer.handWrittenSignatureSettings.signatureDialogSettings.displayMode,a,r,c):this.pdfViewerBase.isInitialField?this.showHideSignatureTab(this.pdfViewer.initialFieldSettings.initialDialogSettings.displayMode,a,r,c):this.showHideSignatureTab(this.pdfViewer.signatureFieldSettings.signatureDialogSettings.displayMode,a,r,c),this.tabObj=new sf.navigations.Tab({selected:function(e){S.handleSelectEvent(e)},items:v}),this.tabObj.appendTo(p),p&&p.lastElementChild&&(p.lastElementChild.style.overflow="hidden"),"DRAW"===v[0].header.label?this.signaturetype="Draw":"TYPE"===v[0].header.label?this.signaturetype="Type":this.signaturetype="Image",p},e.prototype.handleSelectEvent=function(e){var t=document.getElementById("checkbox");if(t&&t.checked){if(0===e.previousIndex&&""!==this.outputString){this.isSaveSignature=!0,this.saveSignatureString=this.outputString;var i=document.getElementById(this.pdfViewer.dataId+"_signatureCanvas_");this.saveImageString=i.toDataURL(),this.signatureImageString=this.saveImageString}}else this.isSaveSignature&&(this.isSaveSignature=!1,this.saveSignatureString="",this.saveImageString="",this.signatureImageString=""),this.clearSignatureCanvas();if("draw"==="".toLocaleLowerCase()){this.signaturetype="Draw",this.isSaveSignature&&this.enableCreateButton(!1);var n=document.getElementById("checkbox");this.hideSignatureCheckbox(n)}else if("type"==="".toLocaleLowerCase()){this.outputString="",this.signaturetype="Type",this.enableCreateButton(!0);var o=document.getElementById("checkbox1");this.hideSignatureCheckbox(o)}else if("upload"==="".toLocaleLowerCase()){this.signaturetype="Image",this.enableCreateButton(!0);var a=document.getElementById("checkbox2");this.hideSignatureCheckbox(a)}this.pdfViewer.element.offsetWidth<750&&this.updateCanvasSize()},e.prototype.showHideSignatureTab=function(e,t,i,n){var o=[];return e&z.Draw&&o.push({header:{text:this.pdfViewer.localeObj.getConstant("Draw-hand Signature"),label:"DRAW"},content:t}),e&z.Text&&o.push({header:{text:this.pdfViewer.localeObj.getConstant("Type Signature"),label:"TYPE"},content:i}),e&z.Upload&&o.push({header:{text:this.pdfViewer.localeObj.getConstant("Upload Signature"),label:"UPLOAD"},content:n}),o},e.prototype.createSignatureFileElement=function(){var e=sf.base.createElement("input",{id:this.pdfViewer.dataId+"_signElement",attrs:{type:"file"}});e.setAttribute("accept",".jpg,.jpeg,.png"),e.style.position="absolute",e.style.left="0px",e.style.top="0px",e.style.visibility="hidden",document.body.appendChild(e),e.addEventListener("change",this.addStampImage)},e.prototype.uploadSignatureClick=function(){if(/^((?!chrome|android).)*safari/i.test(navigator.userAgent)){var e=document.getElementById(this.pdfViewer.dataId+"_signElement"),t=document.getElementById(this.pdfViewer.dataId+"_e-pv-sign-upload");if(null!==e&&null!==t){t.addEventListener("click",(function(){e.click()}))}}},e.prototype.uploadSignatureImage=function(){var e=document.getElementById(this.pdfViewer.dataId+"_signElement");e&&e.click()},e.prototype.renderSignatureText=function(){for(var e=document.getElementById(this.pdfViewer.dataId+"_font_appearance"),t=document.getElementById(this.pdfViewer.dataId+"_e-pv-Signtext-box"),i=0;i<this.signfontStyle.length;i++)this.fontsign[i].innerHTML=t.value,this.fontsign[i].style.fontFamily=this.signfontStyle[i].FontName,"Helvetica"===this.signfontStyle[i].FontName&&(this.fontsign[i].style.borderColor="red"),e.appendChild(this.fontsign[i]);for(i=0;i<this.signfontStyle.length;i++){document.getElementById("_font_signature"+i).addEventListener("click",this.typeSignatureclick.bind(this))}this.enableCreateButton(!1),this.enableClearbutton(!1),this.pdfViewer.element.offsetWidth<750&&this.updateCanvasSize()},e.prototype.typeSignatureclick=function(){var e=event.target;document.getElementsByClassName("e-pv-createbtn")[0].disabled=!1;for(var t=0;t<4;t++){var i=document.getElementById("_font_signature"+t);i&&(i.style.borderColor="")}e.style.borderColor="red",this.outputString=e.textContent;try{this.fontName=JSON.parse(e.style.fontFamily)}catch(t){this.fontName=e.style.fontFamily}},e.prototype.addSignatureCollection=function(e,t){var i,n=-1,o=-1,a=-1,s=-1,r=sf.drawings.processPathData(this.outputString),l=document.createElement("canvas"),d=l.getContext("2d"),h=this.pdfViewerBase.currentSignatureAnnot.shapeAnnotationType;if("HandWrittenSignature"===h){if(0!==r.length){for(var p=0;p<r.length;p++){var c=r[p];if(-1===n)n=c.x,a=c.x,o=c.y,s=c.y;else n>=(v=c.x)&&(n=v),o>=(b=c.y)&&(o=b),a<=v&&(a=v),s<=b&&(s=b)}var u=a-n,f=s-o,g=u/100,m=f/100,w=0,y=0;e?(l.width=t.currentWidth,l.height=t.currentHeight,g=u/e.width,m=f/e.height,w=e.x-t.currentLeft,y=e.y-t.currentTop):(l.width=100,l.height=100),d.beginPath();for(var S=0;S<r.length;S++){var v=((c=r[S]).x-n)/g+w,b=(c.y-o)/m+y;"M"===c.command?d.moveTo(v,b):"L"===c.command&&d.lineTo(v,b)}d.stroke(),d.closePath(),i=l.toDataURL()}}else i=this.outputString;if(e)this.saveImageString=i;else{var V={};V["sign_"+this.pdfViewerBase.imageCount]=this.outputString,this.outputcollection.push(V);var A=[];A.push({id:"sign_"+this.pdfViewerBase.imageCount,imageData:i,signatureType:h,fontFamily:this.pdfViewerBase.currentSignatureAnnot.fontFamily}),this.signaturecollection.push({image:A,isInitial:this.pdfViewerBase.isInitialField}),this.pdfViewerBase.imageCount++}},e.prototype.getSaveLimit=function(e){return e>this.maxSaveLimit?e=this.maxSaveLimit:e<1&&(e=1),e},e.prototype.RenderSavedSignature=function(){this.pdfViewerBase.signatureCount++;var e,t=this.pdfViewerBase.getZoomFactor();if(this.pdfViewerBase.isAddedSignClicked){var i=this.pdfViewer.annotation.createGUID();this.pdfViewerBase.currentSignatureAnnot=null,this.pdfViewerBase.isSignatureAdded=!0;var n,o,a=this.pdfViewerBase.currentPageNumber-1,s=document.getElementById(this.pdfViewer.dataId+"_pageDiv_"+a),r=this.pdfViewer.handWrittenSignatureSettings.width?this.pdfViewer.handWrittenSignatureSettings.width:100,l=this.pdfViewer.handWrittenSignatureSettings.height?this.pdfViewer.handWrittenSignatureSettings.height:100,d=this.pdfViewer.handWrittenSignatureSettings.thickness?this.pdfViewer.handWrittenSignatureSettings.thickness:1,h=this.pdfViewer.handWrittenSignatureSettings.opacity?this.pdfViewer.handWrittenSignatureSettings.opacity:1,p=this.pdfViewer.handWrittenSignatureSettings.strokeColor?this.pdfViewer.handWrittenSignatureSettings.strokeColor:"#000000";n=(parseFloat(s.style.width)/2-r/2)/t,o=(parseFloat(s.style.height)/2-l/2)/t;for(var c="",u=void 0,f=void 0,g=0;g<this.outputcollection.length;g++){var m=this.outputcollection[g];if((y=event.target)&&y.id==="sign_"+g||y&&y.id==="sign_border"+g){c=m["sign_"+g];break}}for(var w=0;w<this.signaturecollection.length;w++){var y=event.target,S=this.signaturecollection[w].image[0].id.split("_")[1];if(y&&y.id==="sign_"+S||y&&y.id==="sign_border"+S){u=this.signaturecollection[w].image[0].signatureType,f=this.signaturecollection[w].image[0].fontFamily;break}}if("HandWrittenSignature"===u){var v=this.pdfViewer.formFieldsModule.updateSignatureAspectRatio(c,!0);r=v.width?v.width:r,l=v.height?v.height:l}else r=150===r?200:this.pdfViewer.handWrittenSignatureSettings.width,l=100===l?65:this.pdfViewer.handWrittenSignatureSettings.height;e={id:"sign"+this.pdfViewerBase.signatureCount,bounds:{x:n,y:o,width:r,height:l},pageIndex:a,data:c,shapeAnnotationType:u,opacity:h,fontFamily:f,strokeColor:p,thickness:d,signatureName:i},this.pdfViewerBase.currentSignatureAnnot=e,this.pdfViewerBase.isAddedSignClicked=!1}else this.pdfViewer.formFieldsModule.drawSignature()},e.prototype.updateCanvasSize=function(){var e=document.getElementById(this.pdfViewer.dataId+"_signatureCanvas_");this.setTabItemWidth(e);var t=document.getElementById(this.pdfViewer.dataId+"_signatureuploadCanvas_");this.setTabItemWidth(t);var i=document.getElementById(this.pdfViewer.dataId+"_font_appearance");this.setTabItemWidth(i)},e.prototype.setTabItemWidth=function(e){var t=2,i=document.querySelector(".e-dlg-content");if(i){var n=getComputedStyle(i);t=t+parseInt(n.paddingLeft,10)+parseInt(n.paddingRight,10)}e&&this.signatureDialog&&this.signatureDialog.visible&&(this.pdfViewer.element.offsetWidth>750?(e.width=714,e.style.width="714px"):(e.width=this.pdfViewer.element.offsetWidth-t,e.style.width=e.width+"px"));var o=document.getElementsByClassName("e-pv-font-sign");if(e&&o&&o.length>0)for(var a=0;a<o.length;a++){o[a].style.width=e.width/2-50+"px"}},e.prototype.signaturePanelMouseDown=function(e){"contextmenu"!==e.type&&(e.preventDefault(),this.findMousePosition(e),this.mouseDetection=!0,this.oldX=this.mouseX,this.oldY=this.mouseY,this.newObject=[],this.drawMousePosition(e))},e.prototype.enableCreateButton=function(e){var t=document.getElementsByClassName("e-pv-createbtn")[0];t&&(t.disabled=e),this.enableClearbutton(e)},e.prototype.enableClearbutton=function(e){var t=document.getElementsByClassName("e-pv-clearbtn")[0];t&&(t.disabled=e)},e.prototype.signaturePanelMouseMove=function(e){this.mouseDetection&&(this.findMousePosition(e),this.enableCreateButton(!1),this.drawMousePosition(e))},e.prototype.findMousePosition=function(e){if(-1!==e.type.indexOf("touch")){var t=(e=e).target.getBoundingClientRect();this.mouseX=e.touches[0].pageX-t.left,this.mouseY=e.touches[0].pageY-t.top}else e=e,this.mouseX=e.offsetX,this.mouseY=e.offsetY},e.prototype.drawMousePosition=function(e){this.mouseDetection&&(this.drawSignatureInCanvas(),this.oldX=this.mouseX,this.oldY=this.mouseY)},e.prototype.drawSignatureInCanvas=function(){var e=document.getElementById(this.pdfViewer.dataId+"_signatureCanvas_").getContext("2d");e.beginPath(),e.moveTo(this.oldX,this.oldY),e.lineTo(this.mouseX,this.mouseY),e.stroke(),e.lineWidth=2,e.arc(this.oldX,this.oldY,1,0,2*Math.PI,!0),e.closePath(),this.newObject.push(this.mouseX,this.mouseY)},e.prototype.signaturePanelMouseUp=function(){this.mouseDetection&&this.convertToPath(this.newObject),this.mouseDetection=!1},e.prototype.convertToPath=function(e){this.movePath(e[0],e[1]),this.linePath(e[0],e[1]);for(var t=2;t<e.length;t+=2)this.linePath(e[t],e[t+1])},e.prototype.linePath=function(e,t){this.outputString+="L"+e+","+t+" "},e.prototype.movePath=function(e,t){this.outputString+="M"+e+","+t+" "},e.prototype.clearSignatureCanvas=function(){this.outputString="",this.newObject=[];var e=document.getElementById(this.pdfViewer.dataId+"_signatureCanvas_");e&&e.getContext("2d").clearRect(0,0,e.width,e.height);var t=document.getElementById(this.pdfViewer.dataId+"_signatureuploadCanvas_");if(t){t.getContext("2d").clearRect(0,0,t.width,t.height);var i=document.getElementById(this.pdfViewer.dataId+"_e-pv-upload-button");i&&(i.style.visibility="")}var n=document.getElementById(this.pdfViewer.dataId+"_font_appearance"),o=document.getElementById(this.pdfViewer.dataId+"_e-pv-Signtext-box");n&&o&&(o.value=""),this.enableCreateButton(!0)},e.prototype.closeSignaturePanel=function(){this.pdfViewerBase.currentTarget&&(this.pdfViewerBase.drawSignatureWithTool=!0),this.clearSignatureCanvas(),this.pdfViewerBase.isToolbarSignClicked=!1,this.pdfViewerBase.drawSignatureWithTool=!1},e.prototype.saveSignature=function(){var e=null;e=this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_sign"]:window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_sign");for(var t=new Array,i=0;i<this.pdfViewerBase.pageCount;i++)t[i]=[];if(e)for(var n=JSON.parse(e),o=0;o<n.length;o++){var a=[],s=n[o];if(s){for(var r=0;s.annotations.length>r;r++){if(this.pdfViewer.isSignatureEditable){var l=this.pdfViewer.handWrittenSignatureSettings,d=this.pdfViewer.annotationSettings,h="Guest"!==l.author?l.author:d.author?d.author:"Guest";s.annotations[r].author=h}var p=s.annotations[r].strokeColor;if(s.annotations[r].strokeColor=JSON.stringify(this.getRgbCode(p)),s.annotations[r].bounds=JSON.stringify(this.pdfViewer.annotation.getBounds(s.annotations[r].bounds,s.pageIndex)),"HandWrittenSignature"===s.annotations[r].shapeAnnotationType){var c=sf.drawings.processPathData(s.annotations[r].data),u=sf.drawings.splitArrayCollection(c);s.annotations[r].data=JSON.stringify(u)}else if("SignatureText"!==s.annotations[r].shapeAnnotationType||this.checkDefaultFont(s.annotations[r].fontFamily))s.annotations[r].data=JSON.stringify(s.annotations[r].data);else{var f=sf.base.createElement("canvas");f.width=150,f.height=2*s.annotations[r].fontSize;var g=f.getContext("2d"),m=f.width/2,w=f.height/2-10;g.textAlign="center",g.font=s.annotations[r].fontSize+"px "+s.annotations[r].fontFamily,g.fillText(s.annotations[r].data,m,w),s.annotations[r].data=JSON.stringify(f.toDataURL("image/png")),s.annotations[r].shapeAnnotationType="SignatureImage"}}a=s.annotations}t[s.pageIndex]=a}return JSON.stringify(t)},e.prototype.checkDefaultFont=function(e){return"Helvetica"===e||"Times New Roman"===e||"Courier"===e||"Symbol"===e},e.prototype.getRgbCode=function(e){e.match(/#([a-z0-9]+)/gi)||e.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/)||(e=this.pdfViewer.annotationModule.nameToHash(e));var t=e.split(",");return sf.base.isNullOrUndefined(t[1])&&(t=(e=this.pdfViewer.annotationModule.getValue(e,"rgba")).split(",")),{r:parseInt(t[0].split("(")[1]),g:parseInt(t[1]),b:parseInt(t[2]),a:parseInt(t[3])}},e.prototype.renderSignature=function(e,t){var i,n=this.pdfViewerBase.currentSignatureAnnot,o=this.pdfViewer.annotation.createGUID();if(n){"HandWrittenSignature"===this.pdfViewerBase.currentSignatureAnnot.shapeAnnotationType&&(i={id:n.id,bounds:{x:e,y:t,width:n.bounds.width,height:n.bounds.height},pageIndex:n.pageIndex,data:n.data,shapeAnnotationType:"HandWrittenSignature",opacity:n.opacity,strokeColor:n.strokeColor,thickness:n.thickness,signatureName:o}),"SignatureText"===this.pdfViewerBase.currentSignatureAnnot.shapeAnnotationType&&(i={id:n.id,bounds:{x:e,y:t,width:n.bounds.width,height:n.bounds.height},pageIndex:n.pageIndex,data:n.data,shapeAnnotationType:"SignatureText",opacity:n.opacity,strokeColor:n.strokeColor,thickness:n.thickness,signatureName:o}),this.pdfViewer.add(i);var a=document.getElementById(this.pdfViewer.dataId+"_annotationCanvas_"+n.pageIndex);this.pdfViewer.renderDrawing(a,n.pageIndex),this.pdfViewerBase.signatureAdded=!0,this.pdfViewer.fireSignatureAdd(n.pageIndex,n.signatureName,n.shapeAnnotationType,n.bounds,n.opacity,n.strokeColor,n.thickness),this.storeSignatureData(n.pageIndex,i),this.pdfViewerBase.currentSignatureAnnot=null,this.pdfViewerBase.signatureCount++}},e.prototype.renderExistingSignature=function(e,t,i){for(var n,o=0;o<e.length;o++){var a=e[o];if(a){var s=a.Bounds,r=s.X,l=s.Y,d=s.Width,h=s.Height,p=a.PathData;i&&(p=a.IsSignature?a.PathData:"SignatureImage"===a.AnnotationType||"SignatureText"===a.AnnotationType?JSON.parse(JSON.stringify(a.PathData)):p.includes("command")?sf.drawings.getPathString(JSON.parse(a.PathData)):a.PathData),n="SignatureText"===a.AnnotationType?{id:"sign"+this.pdfViewerBase.signatureCount,bounds:{x:r,y:l,width:d,height:h},pageIndex:t,data:p,fontFamily:a.FontFamily,fontSize:a.FontSize,shapeAnnotationType:"SignatureText",opacity:a.Opacity,strokeColor:a.StrokeColor,thickness:a.Thickness,signatureName:a.SignatureName}:"SignatureImage"===a.AnnotationType?{id:"sign"+this.pdfViewerBase.signatureCount,bounds:{x:r,y:l,width:d,height:h},pageIndex:t,data:p,shapeAnnotationType:"SignatureImage",opacity:a.Opacity,strokeColor:a.StrokeColor,thickness:a.Thickness,signatureName:a.SignatureName}:{id:"sign"+this.pdfViewerBase.signatureCount,bounds:{x:r,y:l,width:d,height:h},pageIndex:t,data:p,shapeAnnotationType:"HandWrittenSignature",opacity:a.Opacity,strokeColor:a.StrokeColor,thickness:a.Thickness,signatureName:a.SignatureName},this.pdfViewer.add(n);var c=document.getElementById(this.pdfViewer.dataId+"_annotationCanvas_"+a.pageIndex);this.pdfViewer.renderDrawing(c,n.pageIndex),this.storeSignatureData(n.pageIndex,n),this.pdfViewerBase.currentSignatureAnnot=null,this.pdfViewerBase.signatureCount++,this.pdfViewerBase.navigationPane&&this.pdfViewerBase.navigationPane.annotationMenuObj&&this.pdfViewer.isSignatureEditable&&(this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant("Export Annotations")],!0),this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant("Export XFDF")],!0))}}},e.prototype.storeSignatureData=function(e,t){this.pdfViewer.annotation.addAction(t.pageIndex,null,t,"Addition","",t,t);var i,n=t.bounds.left?t.bounds.left:t.bounds.x,o=t.bounds.top?t.bounds.top:t.bounds.y;t.wrapper&&t.wrapper.bounds&&(n=t.wrapper.bounds.left,o=t.wrapper.bounds.top),i={id:t.id,bounds:{left:n,top:o,width:t.bounds.width,height:t.bounds.height},shapeAnnotationType:t.shapeAnnotationType,opacity:t.opacity,thickness:t.thickness,strokeColor:t.strokeColor,pageIndex:t.pageIndex,data:t.data,fontSize:t.fontSize,fontFamily:t.fontFamily,signatureName:t.signatureName},Math.round(JSON.stringify(window.sessionStorage).length/1024)+Math.round(JSON.stringify(i).length/1024)>4500&&(this.pdfViewerBase.isStorageExceed=!0,this.pdfViewer.annotationModule.clearAnnotationStorage());var a=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_sign");if(a){this.storeSignatureCollections(i,e);var s=JSON.parse(a);window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_sign");var r=this.pdfViewer.annotationModule.getPageCollection(s,e);if(s[r])s[r].annotations.push(i),s[r].annotations.indexOf(i);else{var l={pageIndex:e,annotations:[]};l.annotations.push(i),l.annotations.indexOf(i),s.push(l)}p=JSON.stringify(s);this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_sign"]=p:window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_annotations_sign",p)}else{this.storeSignatureCollections(i,e);var d={pageIndex:e,annotations:[]};d.annotations.push(i),d.annotations.indexOf(i);var h=[];h.push(d);var p=JSON.stringify(h);this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_sign"]=p:window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_annotations_sign",p)}},e.prototype.modifySignatureCollection=function(e,t,i,n){this.pdfViewerBase.updateDocumentEditedProperty(!0);var o=null,a=this.getAnnotations(t,null);if(null!=a&&i){for(var s=0;s<a.length;s++)if(i.id===a[s].id){if("bounds"===e)a[s].bounds={left:i.wrapper.bounds.left,top:i.wrapper.bounds.top,width:i.bounds.width,height:i.bounds.height},a[s].fontSize=i.fontSize;else if("stroke"===e)a[s].strokeColor=i.wrapper.children[0].style.strokeColor;else if("opacity"===e)a[s].opacity=i.wrapper.children[0].style.opacity;else if("thickness"===e)a[s].thickness=i.wrapper.children[0].style.strokeWidth;else if("delete"===e){this.updateSignatureCollection(a[s]),o=a.splice(s,1)[0];break}if(e&&"delete"!==e&&this.storeSignatureCollections(a[s],t),n){a[s].opacity=i.wrapper.children[0].style.opacity,a[s].strokeColor=i.wrapper.children[0].style.strokeColor,a[s].thickness=i.wrapper.children[0].style.strokeWidth,this.storeSignatureCollections(a[s],t);break}}this.manageAnnotations(a,t)}return o},e.prototype.storeSignatureCollections=function(e,t){var i=this.checkSignatureCollection(e),n=S(e);n.annotationId=e.signatureName,n.pageNumber=t,delete n.annotName,e.id&&(n.uniqueKey=e.id,delete n.id),i.isExisting?this.pdfViewer.signatureCollection.splice(i.position,0,n):this.pdfViewer.signatureCollection.push(n)},e.prototype.checkSignatureCollection=function(e){var t=this.pdfViewer.signatureCollection;if(t&&e)for(var i=0;i<t.length;i++)if(t[i].annotationId===e.signatureName)return this.pdfViewer.signatureCollection.splice(i,1),{isExisting:!0,position:i};return{isExisting:!1,position:null}},e.prototype.updateSignatureCollection=function(e){var t=this.pdfViewer.signatureCollection;if(t&&e)for(var i=0;i<t.length;i++)if(t[i].annotationId===e.signatureName){this.pdfViewer.signatureCollection.splice(i,1);break}},e.prototype.addInCollection=function(e,t){if(t){this.storeSignatureCollections(t,e);var i=this.getAnnotations(e,null);i&&i.push(t),this.manageAnnotations(i,e)}},e.prototype.getAnnotations=function(e,t){var i,n=null;if(n=this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_sign"]:window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_sign")){var o=JSON.parse(n),a=this.pdfViewer.annotationModule.getPageCollection(o,e);i=o[a]?o[a].annotations:t}else i=t;return i},e.prototype.manageAnnotations=function(e,t){var i=null;if(i=this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_sign"]:window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_sign")){var n=JSON.parse(i);window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_sign");var o=this.pdfViewer.annotationModule.getPageCollection(n,t);n[o]&&(n[o].annotations=e);var a=JSON.stringify(n);this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_sign"]=a:window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_annotations_sign",a)}},e.prototype.showSignatureDialog=function(e){e&&this.createSignaturePanel()},e.prototype.setAnnotationMode=function(){this.pdfViewerBase.isToolbarSignClicked=!0,this.showSignatureDialog(!0)},e.prototype.setInitialMode=function(){this.pdfViewerBase.isToolbarSignClicked=!0,this.pdfViewerBase.isInitialField=!0,this.showSignatureDialog(!0)},e.prototype.ConvertPointToPixel=function(e){return e*(96/72)},e.prototype.updateSignatureCollections=function(e,t,i){if(e){var n=e.Bounds,o=n.X,a=n.Y,s=n.Width,r=n.Height,l=e.PathData;return i&&(l=sf.drawings.getPathString(JSON.parse(e.PathData))),{id:"sign"+e.SignatureName,bounds:{x:o,y:a,width:s,height:r},pageIndex:t,data:l,shapeAnnotationType:"HandWrittenSignature",opacity:e.Opacity,strokeColor:e.StrokeColor,thickness:e.Thickness,signatureName:e.SignatureName}}},e.prototype.destroy=function(){window.sessionStorage.removeItem("_annotations_sign");var e=document.getElementById(this.pdfViewer.dataId+"_signElement");e&&(e.removeEventListener("change",this.addStampImage),e.parentElement&&e.parentElement.removeChild(e)),this.signatureDialog&&this.signatureDialog.destroy()},e}(),Ie=(me=function(e,t){return(me=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}me(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),ke=function(){function e(e,t,i){void 0===i&&(i=!1),this.commandHandler=null,this.inAction=!1,this.pdfViewerBase=null,this.currentElement=null,this.blocked=!1,this.isTooltipVisible=!1,this.childTable={},this.helper=void 0,this.undoElement={annotations:[]},this.undoParentElement={annotations:[]},this.commandHandler=e,this.pdfViewerBase=t}return e.prototype.startAction=function(e){this.currentElement=e,this.inAction=!0},e.prototype.mouseDown=function(e){this.currentElement=e.source,this.startPosition=this.currentPosition=this.prevPosition=e.position,this.isTooltipVisible=!0,this.startAction(e.source)},e.prototype.mouseMove=function(e){return this.currentPosition=e.position,this.prevPageId=this.pdfViewerBase.activeElements.activePageID,!this.blocked},e.prototype.mouseUp=function(e){this.currentPosition=e.position,this.isTooltipVisible=!1,this.endAction(),this.helper=null},e.prototype.endAction=function(){this.commandHandler&&(this.commandHandler.tool="",this.helper&&this.commandHandler.remove(this.helper)),this.commandHandler=null,this.currentElement=null,this.currentPosition=null,this.inAction=!1,this.blocked=!1},e.prototype.mouseWheel=function(e){this.currentPosition=e.position},e.prototype.mouseLeave=function(e){this.mouseUp(e)},e.prototype.updateSize=function(e,t,i,n,o,a,s){var r=this.commandHandler.viewerBase.getZoomFactor(),l=this.currentPosition.x/r-this.startPosition.x/r,d=this.currentPosition.y/r-this.startPosition.y/r,h=e instanceof sf.drawings.TextElement?a:e.rotateAngle,p=sf.drawings.identityMatrix();sf.drawings.rotateMatrix(p,-h,0,0);var c,u,f,g=0,m=0;"Image"===e.shapeAnnotationType||"Stamp"===e.shapeAnnotationType?(u=e instanceof sf.drawings.TextElement?e.actualSize.width:e.wrapper.bounds.width,f=e instanceof sf.drawings.TextElement?e.actualSize.height:e.wrapper.bounds.height):(u=e instanceof sf.drawings.TextElement?e.actualSize.width:e.bounds.width,f=e instanceof sf.drawings.TextElement?e.actualSize.height:e.bounds.height);var w=e;e.formFieldAnnotationType||e.annotName||e.shapeAnnotationType||e&&(w=e.annotations[0]);var y=this.commandHandler.annotationModule?this.commandHandler.annotationModule.findAnnotationSettings(w):{},S=0,v=0,b=0,V=0;(y.minWidth||y.maxWidth||y.minHeight||y.maxHeight)&&(S=y.maxHeight?y.maxHeight:2e3,v=y.maxWidth?y.maxWidth:2e3,b=y.minHeight?y.minHeight:0,V=y.minWidth?y.minWidth:0);var A=!1;if((b||V||S||v)&&(A=!0),A&&s){var x=this.getPositions(n,l,d),C=u+x.x,I=f+x.y;I>b&&I<S&&C>V&&C<v?(l=l,d=d):((I<b||I>S)&&(d=I<b?b-f:S-f),(C<V||C>v)&&(l=C<V?V-u:v-u))}switch(n){case"ResizeWest":l=(c=sf.drawings.transformPointByMatrix(p,{x:l,y:d})).x,d=c.y,m=1,l=l,d=0,A&&o.width-l>v&&(l=v-o.width),g=(o.width-l)/u;break;case"ResizeEast":l=(c=sf.drawings.transformPointByMatrix(p,{x:l,y:d})).x,d=c.y,d=0,A&&o.width+l>v&&(l=v-o.width),g=(o.width+l)/u,m=1;break;case"ResizeNorth":g=1,l=(c=sf.drawings.transformPointByMatrix(p,{x:l,y:d})).x,d=c.y,A&&o.height-d>S&&(d=S-o.height),m=(o.height-d)/f;break;case"ResizeSouth":g=1,l=(c=sf.drawings.transformPointByMatrix(p,{x:l,y:d})).x,d=c.y,A&&o.height+d>S&&(d=S-o.height),m=(o.height+d)/f;break;case"ResizeNorthEast":l=(c=sf.drawings.transformPointByMatrix(p,{x:l,y:d})).x,d=c.y,A&&(o.width+l>v&&(l=v-o.width),o.height-d>S&&(d=S-o.height)),g=(o.width+l)/u,m=(o.height-d)/f;break;case"ResizeNorthWest":l=(c=sf.drawings.transformPointByMatrix(p,{x:l,y:d})).x,d=c.y,A&&(o.width-l>v&&(l=v-o.width),o.height-d>S&&(d=S-o.height)),g=(o.width-l)/u,m=(o.height-d)/f;break;case"ResizeSouthEast":l=(c=sf.drawings.transformPointByMatrix(p,{x:l,y:d})).x,d=c.y,A&&(o.width+l>v&&(l=v-o.width),o.height+d>S&&(d=S-o.height)),m=(o.height+d)/f,g=(o.width+l)/u;break;case"ResizeSouthWest":l=(c=sf.drawings.transformPointByMatrix(p,{x:l,y:d})).x,d=c.y,A&&(o.width-l>v&&(l=v-o.width),o.height+d>S&&(d=S-o.height)),g=(o.width-l)/u,m=(o.height+d)/f}return{width:g,height:m}},e.prototype.getPivot=function(e){switch(e){case"ResizeWest":return{x:1,y:.5};case"ResizeEast":return{x:0,y:.5};case"ResizeNorth":return{x:.5,y:1};case"ResizeSouth":return{x:.5,y:0};case"ResizeNorthEast":return{x:0,y:1};case"ResizeNorthWest":return{x:1,y:1};case"ResizeSouthEast":return{x:0,y:0};case"ResizeSouthWest":return{x:1,y:0}}return{x:.5,y:.5}},e.prototype.getPositions=function(e,t,i){switch(e){case"ResizeEast":return{x:t,y:0};case"ResizeSouthEast":return{x:t,y:i};case"ResizeSouth":return{x:0,y:i};case"ResizeNorth":return{x:0,y:-i};case"ResizeNorthEast":return{x:t,y:-i};case"ResizeNorthWest":return{x:-t,y:-i};case"ResizeWest":return{x:-t,y:0};case"ResizeSouthWest":return{x:-t,y:i}}return{x:t,y:i}},e}(),Te=function(e){function t(t,i){return e.call(this,t,i,!0)||this}return Ie(t,e),t.prototype.mouseDown=function(t){this.inAction=!0,this.mouseEventHelper(t),e.prototype.mouseDown.call(this,t)},t.prototype.mouseEventHelper=function(e){var t;this.commandHandler&&this.commandHandler.annotationModule&&(this.commandHandler.annotationModule.overlappedCollections=Oe(e,this.pdfViewerBase,this.commandHandler,!0));var i=!1;if((t=this.commandHandler&&this.commandHandler.textSelectionModule&&this.commandHandler.textSelectionModule.isTextSelection?null:Oe(e,this.pdfViewerBase,this.commandHandler))&&"StickyNotes"===t.shapeAnnotationType&&t.annotationSettings&&t.annotationSettings.isLock&&(i=!this.commandHandler.annotationModule.checkAllowedInteractions("Select",t)),!i){var n=void 0;if(n=e.source&&null!==e.annotationSelectorSettings?e.source.annotationSelectorSettings:"",this.commandHandler){var o=this.commandHandler.selectedItems;if(o){var a=o.annotations[0],s=(o.formFields[0],this.commandHandler.selectedItems.annotations[0]),r=e.source;if((o.annotations.length&&e.info&&!e.info.ctrlKey&&this.commandHandler.annotationModule&&!1===this.commandHandler.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus||e.info&&e.info.ctrlKey&&(r&&"FreeText"===r.shapeAnnotationType||s&&"FreeText"===s.shapeAnnotationType))&&this.commandHandler.clearSelection(this.pdfViewerBase.activeElements.activePageID),t&&(sf.base.isNullOrUndefined(this.pdfViewerBase.isFreeTextSelected)||this.pdfViewerBase.isFreeTextSelected||(this.commandHandler.select([t.id],n),this.commandHandler.viewerBase.isAnnotationMouseDown=!0),this.pdfViewerBase.isFreeTextSelected=!1,this.commandHandler.viewerBase.isFormFieldMouseDown=!0),0===o.annotations.length&&a&&"HandWrittenSignature"!==a.shapeAnnotationType&&"SignatureText"!==a.shapeAnnotationType&&"SignatureImage"!==a.shapeAnnotationType&&"Path"!==a.shapeAnnotationType&&!a.formFieldAnnotationType&&(this.commandHandler.enableToolbar&&sf.base.Browser.isDevice&&!this.commandHandler.enableDesktopMode&&this.commandHandler.toolbarModule.showToolbar(!0),this.commandHandler.fireAnnotationUnSelect(a.annotName,a.pageIndex,a)),0===o.annotations.length&&a){var l={bounds:a.bounds,opacity:a.opacity,thickness:a.thickness,strokeColor:a.strokeColor};"HandWrittenSignature"===a.shapeAnnotationType&&this.commandHandler.fireSignatureUnselect(a.signatureName,a.pageIndex,l),"SignatureText"!==a.shapeAnnotationType&&"SignatureImage"!==a.shapeAnnotationType&&"Path"!==a.shapeAnnotationType||this.commandHandler.fireSignatureUnselect(a.id,a.pageIndex,l)}}}}},t.prototype.mouseMove=function(t){return e.prototype.mouseMove.call(this,t),!this.blocked},t.prototype.mouseUp=function(t){this.mouseEventHelper(t),this.inAction=!1,e.prototype.mouseUp.call(this,t)},t.prototype.mouseLeave=function(e){this.inAction&&this.mouseUp(e)},t}(ke),Me=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.currentTarget=null,n.prevNode=null,n}return Ie(t,e),t.prototype.mouseDown=function(t){e.prototype.mouseDown.call(this,t),this.offset={x:t.source.wrapper.offsetX,y:t.source.wrapper.offsetY},this.startPosition=t.position;var i=S(t.source);this.redoElement={bounds:{x:i.wrapper.offsetX,y:i.wrapper.offsetY,width:i.wrapper.actualSize.width,height:i.wrapper.actualSize.height}},g(i)&&(this.redoElement.vertexPoints=i.vertexPoints,this.redoElement.leaderHeight=i.leaderHeight),this.inAction=!0},t.prototype.mouseUp=function(t){if(this.commandHandler&&t.source){this.commandHandler.selectedItems&&this.commandHandler.selectedItems.annotations&&this.commandHandler.selectedItems.annotations.length>0?this.commandHandler.selectedItems.annotations[0].annotName===t.source.annotName&&(this.commandHandler.viewerBase.isAnnotationMouseMove=!0):this.commandHandler.viewerBase.isAnnotationMouseMove=!1,this.commandHandler.selectedItems&&this.commandHandler.selectedItems.formFields&&this.commandHandler.selectedItems.formFields.length>0?this.commandHandler.selectedItems.formFields[0].name===t.source.name&&(this.commandHandler.viewerBase.isFormFieldMouseMove=!0):this.commandHandler.viewerBase.isFormFieldMouseMove=!1;var i=t.source.annotationSelectorSettings;this.commandHandler.clearSelection(this.pdfViewerBase.activeElements.activePageID),this.commandHandler.select([t.source.id],i),this.commandHandler.dragSelectedObjects(this.calculateMouseActionXDiff(t),this.calculateMouseActionYDiff(t),this.pdfViewerBase.activeElements.activePageID,i,null),this.commandHandler.renderSelector(this.pdfViewerBase.activeElements.activePageID,i),this.commandHandler.viewerBase.isAnnotationMouseMove=!1,this.commandHandler.viewerBase.isFormFieldMouseMove=!1;var n={bounds:{x:t.source.wrapper.offsetX,y:t.source.wrapper.offsetY,width:t.source.wrapper.actualSize.width,height:t.source.wrapper.actualSize.height},modifiedDate:t.source.modifiedDate};if(g(t.source)&&(n.vertexPoints=t.source.vertexPoints,n.leaderHeight=t.source.leaderHeight),t.target&&t.target.formFieldAnnotationType){var o=t.target,a={value:o.value,fontFamily:o.fontFamily,fontSize:o.fontSize,fontStyle:o.fontStyle,color:o.color,backgroundColor:o.backgroundColor,borderColor:o.borderColor,thickness:o.thickness,alignment:o.alignment,isReadonly:o.isReadonly,visibility:o.visibility,maxLength:o.maxLength,isRequired:o.isRequired,isPrint:o.isPrint,rotation:o.rotateAngle,tooltip:o.tooltip,options:o.options,isChecked:o.isChecked,isSelected:o.isSelected},s={X:t.source.wrapper.offsetX,Y:t.source.wrapper.offsetY,Width:t.source.wrapper.actualSize.width,Height:t.source.wrapper.actualSize.height},r={X:this.offset.x,Y:this.offset.y,Width:t.source.wrapper.actualSize.width,Height:t.source.wrapper.actualSize.height};this.commandHandler.fireFormFieldMoveEvent("formFieldMove",a,o.pageIndex,r,s)}this.commandHandler.annotation&&(this.commandHandler.annotation.addAction(this.pageIndex,null,t.source,"Drag","",this.redoElement,n),this.commandHandler.annotation.stampAnnotationModule.updateSessionStorage(t.source,null,"Drag"),this.commandHandler.annotation.stickyNotesAnnotationModule.updateStickyNotes(t.source,null))}e.prototype.mouseUp.call(this,t)},t.prototype.calculateMouseXDiff=function(){return this.currentPosition&&this.startPosition?this.currentPosition.x-this.startPosition.x:0},t.prototype.calculateMouseYDiff=function(){return this.currentPosition&&this.startPosition?this.currentPosition.y-this.startPosition.y:0},t.prototype.calculateMouseActionXDiff=function(e){var t=this.calculateMouseXDiff()/this.commandHandler.viewerBase.getZoomFactor();return this.offset?this.offset.x+t-e.source.wrapper.offsetX:0},t.prototype.calculateMouseActionYDiff=function(e){var t=this.calculateMouseYDiff()/this.commandHandler.viewerBase.getZoomFactor();return this.offset?this.offset.y+t-e.source.wrapper.offsetY:0},t.prototype.mouseMove=function(t,i,n){if(e.prototype.mouseMove.call(this,t),this.inAction){this.currentPosition=t.position,this.currentTarget=t.target;var o=t.source.annotationSelectorSettings,a=this.calculateMouseXDiff()/this.commandHandler.viewerBase.getZoomFactor(),s=this.calculateMouseYDiff()/this.commandHandler.viewerBase.getZoomFactor(),r=this.offset.x+a,l=this.offset.y+s,d=this.calculateMouseActionXDiff(t),h=this.calculateMouseActionYDiff(t),p=this.commandHandler.selectedItems.annotations[0];if(this.helper)d=r-this.helper.wrapper.offsetX,h=l-this.helper.wrapper.offsetY;else{var c=this.commandHandler.selectedItems.annotations.length>0?S(this.commandHandler.selectedItems.annotations[0]):S(this.commandHandler.selectedItems.formFields[0]);c.wrapper&&(d=r-c.wrapper.offsetX,h=l-c.wrapper.offsetY,c.bounds=this.commandHandler.selectedItems.annotations.length>0?this.commandHandler.selectedItems.annotations[0].wrapper.bounds:this.commandHandler.selectedItems.formFields[0].wrapper.bounds),c.wrapper=void 0,c.id="diagram_helper","Stamp"===c.shapeAnnotationType?(c.strokeColor="",c.borderDashArray="",c.fillColor="transparent",c.stampFillColor="transparent",c.data=""):"FreeText"===c.shapeAnnotationType?(c.strokeColor="blue",c.fillColor="transparent",c.thickness=1,c.opacity=1,c.dynamicText=""):"SignatureText"===c.shapeAnnotationType?(c.strokeColor="red",c.borderDashArray="5,5",c.fillColor="transparent",c.thickness=2,c.opacity=1,c.data=""):(c.strokeColor="red",c.borderDashArray="5,5",c.fillColor="transparent",c.thickness=2,c.opacity=1),!0===c.enableShapeLabel&&(c.labelContent=""),i?c=this.helper=t.source:this.helper=c=this.commandHandler.add(c),this.commandHandler.selectedItems.annotations.length>0?this.commandHandler.selectedItems.annotations=[c]:this.commandHandler.selectedItems.formFields=[c]}this.helper&&"Stamp"===this.helper.shapeAnnotationType&&(i=!0),this.commandHandler.checkBoundaryConstraints(d,h,this.pdfViewerBase.activeElements.activePageID,this.helper.wrapper.bounds,i,n)?(this.commandHandler.dragSelectedObjects(d,h,this.pdfViewerBase.activeElements.activePageID,o,this.helper),this.prevNode=this.helper,this.prevPosition=this.currentPosition):this.currentPosition=this.prevPosition,p&&p.annotName&&this.commandHandler.annotation.triggerAnnotationMove(p,!0)}return!0},t.prototype.mouseLeave=function(t){var i=t.source.annotationSelectorSettings,n=this.offset.x+this.calculateMouseXDiff(),o=this.offset.y+this.calculateMouseYDiff(),a=n-t.source.wrapper.offsetX,s=o-t.source.wrapper.offsetY;this.commandHandler.dragSelectedObjects(a,s,this.prevPageId,i,null),this.commandHandler.renderSelector(this.prevPageId,i),e.prototype.mouseLeave.call(this,t)},t.prototype.endAction=function(){e.prototype.endAction.call(this),this.currentTarget=null,this.prevPosition=null},t}(ke),Pe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ie(t,e),t.prototype.mouseDown=function(t){e.prototype.mouseUp.call(this,t)},t.prototype.mouseMove=function(t){var i;if(!this.inAction){var n=this.pdfViewerBase.activeElements.activePageID;this.commandHandler.clearSelection(this.pdfViewerBase.activeElements.activePageID);var o=this.commandHandler.annotation.stampAnnotationModule.moveStampElement(t.position.x,t.position.y,n);if("SignatureText"===o.shapeAnnotationType){var a=this.getTextWidth(o.data,o.fontSize),s=1;a>o.bounds.width&&(s=o.bounds.width/a),o.fontSize=o.fontSize*s,o.thickness=0}i=this.commandHandler.add(o),t.source=this.commandHandler.annotations[this.commandHandler.annotations.length-1],t.sourceWrapper=t.source.wrapper,this.inAction=!0;var r=t.source;!r||"HandWrittenSignature"!==r.shapeAnnotationType&&"SignatureText"!==r.shapeAnnotationType&&"SignatureImage"!==r.shapeAnnotationType?this.offset={x:t.source.wrapper.offsetX,y:t.source.wrapper.offsetY}:this.offset={x:t.source.wrapper.offsetX-t.source.wrapper.bounds.width/2,y:t.source.wrapper.offsetY-t.source.wrapper.bounds.height/2},this.startPosition=t.position,this.commandHandler.select([i.id])}var l=t.source.annotationSelectorSettings;return e.prototype.mouseMove.call(this,t,!0,!0),this.commandHandler.renderSelector(t.source.pageIndex,l),this.inAction},t.prototype.getTextWidth=function(e,t){var i=document.createElement("canvas").getContext("2d");return i.font=t||getComputedStyle(document.body).font,i.measureText(e).width},t}(Me),Be=function(e){function t(t,i,n){var o=e.call(this,t,i)||this;return o.sourceObject=n,o}return Ie(t,e),t.prototype.mouseDown=function(t){this.pdfViewerBase.disableTextSelectionMode(),e.prototype.mouseDown.call(this,t),this.inAction=!0;var i={currentPosition:this.currentPosition,prevPosition:this.prevPosition};this.commandHandler.annotation.inkAnnotationModule.drawInkInCanvas(i,this.pdfViewerBase.activeElements.activePageID)},t.prototype.mouseMove=function(t){if(e.prototype.mouseMove.call(this,t),this.inAction){var i={currentPosition:this.currentPosition,prevPosition:this.pdfViewerBase.prevPosition};this.commandHandler.annotation.inkAnnotationModule.drawInkInCanvas(i,this.pdfViewerBase.activeElements.activePageID)}return this.inAction},t.prototype.mouseUp=function(e){return this.commandHandler.annotation.inkAnnotationModule.storePathData(),!0},t.prototype.mouseLeave=function(e){},t.prototype.endAction=function(){e.prototype.endAction.call(this)},t}(ke),Ee=function(e){function t(t,i,n){var o=e.call(this,t,i,!0)||this;return o.endPoint=n,o}return Ie(t,e),t.prototype.mouseDown=function(t){this.inAction=!0,this.undoElement=void 0,e.prototype.mouseDown.call(this,t),t.source&&t.source.annotations&&({x:this.prevPosition.x,y:this.prevPosition.y},t.source.annotations[0]),this.initialPosition=t.position,this.prevSource=this.commandHandler.selectedItems.annotations[0];var i=S(t.source);this.redoElement={bounds:{x:i.wrapper.offsetX,y:i.wrapper.offsetY,width:i.wrapper.actualSize.width,height:i.wrapper.actualSize.height}},g(i)&&(this.redoElement.vertexPoints=i.vertexPoints,this.redoElement.leaderHeight=i.leaderHeight,"Distance"!==i.measureType&&"Perimeter"!==i.measureType&&"Area"!==i.measureType&&"Volume"!==i.measureType||(this.redoElement.notes=i.notes)),this.currentPosition=t.position},t.prototype.mouseUp=function(t){if(this.commandHandler){var i=this.commandHandler.selectedItems.annotations[0];if(i){var n=this.commandHandler.annotationModule.findAnnotationSettings(i),o=0,a=0,s=0,r=0;if((n.minWidth||n.maxWidth||n.minHeight||n.maxHeight)&&(o=n.maxHeight?n.maxHeight:2e3,a=n.maxWidth?n.maxWidth:2e3,s=n.minHeight?n.minHeight:0,r=n.minWidth?n.minWidth:0),i.vertexPoints.length>3){var l=this.commandHandler.viewerBase.checkAnnotationWidth(i.vertexPoints),d=l.width,h=l.height;s||r||o||a?(h>s&&h<o||d>r&&d<a)&&this.commandHandler.nodePropertyChange(this.prevSource,{vertexPoints:i.vertexPoints,leaderHeight:i.leaderHeight}):this.commandHandler.nodePropertyChange(this.prevSource,{vertexPoints:i.vertexPoints,leaderHeight:i.leaderHeight})}else if(s||r||o||a)if("Line"===i.shapeAnnotationType||"Distance"===i.shapeAnnotationType||"LineWidthArrowHead"===i.shapeAnnotationType){var p=0,c=0,u=(p=i.vertexPoints[0].x>i.vertexPoints[1].x?i.vertexPoints[0].x-i.vertexPoints[1].x:i.vertexPoints[1].x-i.vertexPoints[0].x)>(c=i.vertexPoints[0].y>i.vertexPoints[1].y?i.vertexPoints[0].y-i.vertexPoints[1].y:i.vertexPoints[1].y-i.vertexPoints[0].y)?p:c;u<(o||a)&&u>(s||r)&&this.commandHandler.nodePropertyChange(this.prevSource,{vertexPoints:i.vertexPoints,leaderHeight:i.leaderHeight})}else this.commandHandler.nodePropertyChange(this.prevSource,{vertexPoints:i.vertexPoints,leaderHeight:i.leaderHeight});else this.commandHandler.nodePropertyChange(this.prevSource,{vertexPoints:i.vertexPoints,leaderHeight:i.leaderHeight});var f=t.source.annotationSelectorSettings;this.commandHandler.clearSelection(this.pdfViewerBase.activeElements.activePageID),this.commandHandler.select([this.prevSource.id],f),this.commandHandler.renderSelector(this.pdfViewerBase.activeElements.activePageID,f);var m={bounds:{x:t.source.wrapper.offsetX,y:t.source.wrapper.offsetY,width:t.source.wrapper.actualSize.width,height:t.source.wrapper.actualSize.height}};"Distance"!==i.measureType&&"Perimeter"!==i.measureType&&"Area"!==i.measureType&&"Volume"!==i.measureType||(this.commandHandler.annotation.updateCalibrateValues(this.commandHandler.selectedItems.annotations[0]),m.notes=t.source.notes),g(t.source)&&(m.vertexPoints=t.source.vertexPoints,m.leaderHeight=t.source.leaderHeight),this.commandHandler.annotation.addAction(this.pageIndex,null,this.prevSource,"Resize","",this.redoElement,m)}}e.prototype.mouseUp.call(this,t)},t.prototype.mouseMove=function(t){if(e.prototype.mouseMove.call(this,t),this.currentPosition=t.position,this.currentPosition&&this.prevPosition){var i=this.currentPosition.x-this.prevPosition.x,n=this.currentPosition.y-this.prevPosition.y;if(t.source&&t.source.annotations&&({x:this.currentPosition.x,y:this.currentPosition.y},{x:this.prevPosition.x,y:this.prevPosition.y},t.source.annotations[0]),this.inAction&&void 0!==this.endPoint&&0!==i||0!==n){if(!this.helper){var o=S(this.commandHandler.selectedItems.annotations[0]);o.id="diagram_helper",o.strokeColor="red",o.borderDashArray="5,5",o.fillColor="transparent",o.thickness=2,o.opacity=1,!0===o.enableShapeLabel&&(o.labelContent=""),this.helper=o=this.commandHandler.add(o),this.commandHandler.selectedItems.annotations=[o]}var a=t.source.annotationSelectorSettings;this.blocked=!this.commandHandler.dragConnectorEnds(this.endPoint,this.helper,this.currentPosition,this.selectedSegment,t.target,null,a),this.commandHandler.renderSelector(this.pdfViewerBase.activeElements.activePageID,a)}}return this.prevPosition=this.currentPosition,!this.blocked},t.prototype.mouseLeave=function(e){this.mouseUp(e)},t.prototype.endAction=function(){e.prototype.endAction.call(this),this.prevPosition=null,this.endPoint=null},t}(ke),Ne=function(e){function t(t,i,n){var o=e.call(this,t,i,!0)||this;return o.initialBounds=new sf.drawings.Rect,o.corner=n,o}return Ie(t,e),t.prototype.mouseDown=function(t){e.prototype.mouseDown.call(this,t),this.initialBounds.x=t.source.wrapper.offsetX,this.initialBounds.y=t.source.wrapper.offsetY,this.initialBounds.height=t.source.wrapper.actualSize.height,this.initialBounds.width=t.source.wrapper.actualSize.width,this.initialPosition=t.position;var i=S(t.source);this.redoElement={bounds:{x:i.wrapper.offsetX,y:i.wrapper.offsetY,width:i.wrapper.actualSize.width,height:i.wrapper.actualSize.height}},g(i)&&(this.redoElement.vertexPoints=i.vertexPoints,this.redoElement.leaderHeight=i.leaderHeight),"Radius"===i.measureType&&(this.redoElement.notes=i.notes),this.prevSource=this.commandHandler.selectedItems.annotations.length>0?this.commandHandler.selectedItems.annotations[0]:this.commandHandler.selectedItems.formFields[0]},t.prototype.mouseUp=function(t,i){t.source;var n=S(t.source);if(this.commandHandler&&this.prevSource){this.commandHandler.clearSelection(this.pdfViewerBase.activeElements.activePageID),this.commandHandler.viewerBase.isAnnotationSelect=!0,this.commandHandler.viewerBase.isFormFieldSelect=!0,this.commandHandler.select([this.prevSource.id],this.prevSource.annotationSelectorSettings);var o=this.updateSize(this.prevSource,this.currentPosition,this.initialPosition,this.corner,this.initialBounds,null,!0);if(this.blocked=this.scaleObjects(o.width,o.height,this.corner,this.currentPosition,this.initialPosition,this.prevSource),this.commandHandler.selectedItems&&this.commandHandler.selectedItems.annotations&&this.commandHandler.selectedItems.annotations[0]&&"Stamp"===this.commandHandler.selectedItems.annotations[0].shapeAnnotationType&&(this.commandHandler.stampSettings.minHeight||this.commandHandler.stampSettings.minWidth)&&this.commandHandler.select([this.prevSource.id],this.prevSource.annotationSelectorSettings),this.commandHandler.renderSelector(this.prevPageId,this.prevSource.annotationSelectorSettings),this.commandHandler.annotation&&t.source.wrapper){var a={bounds:{x:t.source.wrapper.offsetX,y:t.source.wrapper.offsetY,width:t.source.wrapper.actualSize.width,height:t.source.wrapper.actualSize.height}};if(g(t.source)&&(a.vertexPoints=t.source.vertexPoints,a.leaderHeight=t.source.leaderHeight),"Radius"===this.prevSource.measureType&&(a.notes=t.source.notes,this.commandHandler.annotation.updateCalibrateValues(this.prevSource)),"SignatureText"===this.prevSource.shapeAnnotationType){var s=a.bounds.width/n.width;a.fontSize=this.prevSource.wrapper.children[1].style.fontSize*s,null!=t.target&&(t.target.fontSize=a.fontSize,t.target.wrapper.children[1].style.fontSize=a.fontSize,t.target.wrapper.children[1].horizontalAlignment="Center",t.target.wrapper.children[1].verticalAlignment="Center",t.target.wrapper.children[1].setOffsetWithRespectToBounds(0,0,"Absolute"),this.commandHandler.selectedItems.annotations[0].wrapper.children[1].style.fontSize=a.fontSize,this.commandHandler.selectedItems.annotations[0].wrapper.children[1].horizontalAlignment="Center",this.commandHandler.selectedItems.annotations[0].wrapper.children[1].verticalAlignment="Center",this.commandHandler.selectedItems.annotations[0].wrapper.children[1].setOffsetWithRespectToBounds(0,0,"Absolute"),this.commandHandler.selectedItems.annotations[0].fontSize=a.fontSize)}"SignatureText"===this.prevSource.shapeAnnotationType&&this.commandHandler.selectedItems.annotations&&this.commandHandler.selectedItems.annotations.length>0&&this.commandHandler.nodePropertyChange(this.commandHandler.selectedItems.annotations[0],{fontSize:a.fontSize}),this.commandHandler.annotation.addAction(this.pageIndex,null,this.prevSource,"Resize","",this.redoElement,a)}if(t.target&&t.target.formFieldAnnotationType){var r=t.target,l={value:r.value,fontFamily:r.fontFamily,fontSize:r.fontSize,fontStyle:r.fontStyle,color:r.color,backgroundColor:r.backgroundColor,alignment:r.alignment,isReadonly:r.isReadonly,visibility:r.visibility,maxLength:r.maxLength,isRequired:r.isRequired,isPrint:r.isPrint,rotation:r.rotateAngle,tooltip:r.tooltip,options:r.options,isChecked:r.isChecked,isSelected:r.isSelected},d={X:t.source.wrapper.offsetX,Y:t.source.wrapper.offsetY,Width:t.source.wrapper.actualSize.width,Height:t.source.wrapper.actualSize.height},h={X:this.initialBounds.x,Y:this.initialBounds.y,Width:this.initialBounds.width,Height:this.initialBounds.height};this.commandHandler.fireFormFieldResizeEvent("formFieldResize",l,r.pageIndex,h,d)}this.commandHandler.annotation&&this.commandHandler.annotation.stampAnnotationModule&&this.commandHandler.annotation.stampAnnotationModule.updateSessionStorage(t.source,this.prevSource.id,"Resize")}return e.prototype.mouseUp.call(this,t),!this.blocked},t.prototype.mouseMove=function(t){e.prototype.mouseMove.call(this,t);var i=t.source;this.currentPosition=t.position;var n=this.currentPosition.x-this.startPosition.x,o=this.currentPosition.y-this.startPosition.y;n/=this.commandHandler.viewerBase.getZoomFactor(),o/=this.commandHandler.viewerBase.getZoomFactor();var a=t.source,s=this.getPoints(n,o),r=a.width+s.x,l=a.height+s.y,d=i;i&&i.annotations&&(d=i.annotations[0]);var h=this.commandHandler.annotationModule?this.commandHandler.annotationModule.findAnnotationSettings(d):{},p=0,c=0,u=0,f=0;(h.minWidth||h.maxWidth||h.minHeight||h.maxHeight)&&(p=h.maxHeight?h.maxHeight:2e3,c=h.maxWidth?h.maxWidth:2e3,u=h.minHeight?h.minHeight:0,f=h.minWidth?h.minWidth:0),(u||f||p||c)&&(l>=u&&l<=p&&r>=f&&r<=c?(n=n,o=o):((l<u||l>p)&&(o=l<u?u-a.height:p-a.height),(r<f||r>c)&&(n=r<f?f-a.width:c-a.width)));var g={x:n,y:o};if(this.currentElement.wrapper&&(g=sf.drawings.rotatePoint(-this.currentElement.wrapper.rotateAngle,void 0,void 0,g)),g=this.getChanges(g),!this.helper){var m=this.commandHandler.selectedItems.annotations.length>0?S(this.commandHandler.selectedItems.annotations[0]):S(this.commandHandler.selectedItems.formFields[0]);m.id="diagram_helper","Stamp"===m.shapeAnnotationType?(m.strokeColor="",m.bounds.height=d.wrapper.bounds.height,m.bounds.width=d.wrapper.bounds.width,m.bounds.x=d.wrapper.bounds.x,m.bounds.y=d.wrapper.bounds.y,m.borderDashArray="",m.fillColor="transparent",m.stampFillColor="transparent",m.data=""):"FreeText"===m.shapeAnnotationType?(m.strokeColor="blue",m.fillColor="transparent",m.thickness=1,m.opacity=1,m.dynamicText=""):(m.bounds=this.commandHandler.selectedItems.annotations.length>0?this.commandHandler.selectedItems.annotations[0].wrapper.bounds:this.commandHandler.selectedItems.formFields[0].wrapper.bounds,m.strokeColor="red",m.borderDashArray="5,5",m.fillColor="transparent",m.thickness=2,m.opacity=1),!0===m.enableShapeLabel&&(m.labelContent=""),"SignatureText"===m.shapeAnnotationType&&(m.fillColor="transparent",m.thickness=1,m.opacity=1,m.data=""),this.helper=m=this.commandHandler.add(m),this.commandHandler.selectedItems.annotations.length>0?this.commandHandler.selectedItems.annotations=[m]:this.commandHandler.selectedItems.formFields=[m]}var w=this.updateSize(this.helper,this.startPosition,this.currentPosition,this.corner,this.initialBounds);return this.blocked=!this.scaleObjects(w.width,w.height,this.corner,this.startPosition,this.currentPosition,this.helper),this.prevPosition=this.currentPosition,!this.blocked},t.prototype.mouseLeave=function(e){this.mouseUp(e)},t.prototype.getTooltipContent=function(e){return"W:"+Math.round(e.wrapper.bounds.width)+" H:"+Math.round(e.wrapper.bounds.height)},t.prototype.getChanges=function(e){switch(this.corner){case"ResizeEast":return{x:e.x,y:0};case"ResizeSouthEast":return e;case"ResizeSouth":return{x:0,y:e.y};case"ResizeNorth":return{x:0,y:-e.y};case"ResizeNorthEast":return{x:e.x,y:-e.y};case"ResizeNorthWest":return{x:-e.x,y:-e.y};case"ResizeWest":return{x:-e.x,y:0};case"ResizeSouthWest":return{x:-e.x,y:e.y}}return e},t.prototype.getPoints=function(e,t){switch(this.corner){case"ResizeEast":return{x:e,y:0};case"ResizeSouthEast":return{x:e,y:t};case"ResizeSouth":return{x:0,y:t};case"ResizeNorth":return{x:0,y:-t};case"ResizeNorthEast":return{x:e,y:-t};case"ResizeNorthWest":return{x:-e,y:-t};case"ResizeWest":return{x:-e,y:0};case"ResizeSouthWest":return{x:-e,y:t}}return{x:e,y:t}},t.prototype.scaleObjects=function(e,t,i,n,o,a){var s=this.commandHandler.annotationModule?this.commandHandler.annotationModule.findAnnotationSettings(a):{},r=0,l=0,d=this.currentPosition.x-this.startPosition.x,h=this.currentPosition.y-this.startPosition.y;d/=this.commandHandler.viewerBase.getZoomFactor(),h/=this.commandHandler.viewerBase.getZoomFactor();var p=a,c=this.getPoints(d,h),u=p.bounds.width+c.x,g=p.bounds.height+c.y;return(s.minWidth||s.maxWidth||s.minHeight||s.maxHeight)&&(r=s.maxHeight?s.maxHeight:2e3,l=s.maxWidth?s.maxWidth:2e3,s.minHeight?s.minHeight:0,s.minWidth?s.minWidth:0),a instanceof f&&1===a.annotations.length&&("Perimeter"===a.annotations[0].shapeAnnotationType||"Radius"===a.annotations[0].shapeAnnotationType||"Stamp"===a.shapeAnnotationType)?t=e=1!==t||1!==e?Math.max(1===t?0:t,1===e?0:e):n!==o?Math.max(t,e):0:"Image"===a.shapeAnnotationType||"HandWrittenSignature"===a.shapeAnnotationType||"SignatureText"===a.shapeAnnotationType||"SignatureImage"===a.shapeAnnotationType?1===t&&1===e||(u>=l&&g<r&&(t=Math.max(t,e)),g>=r&&u<l&&(e=Math.max(t,e)),u<l&&g<r&&(t=e=Math.max(t,e))):"Perimeter"!==a.shapeAnnotationType&&"Radius"!==a.shapeAnnotationType&&"Stamp"!==a.shapeAnnotationType||("Stamp"===a.shapeAnnotationType?(r||t||(t=Math.max(1===t?0:t)),l||e||(e=Math.max(1===e?0:e))):r&&l||1===t&&1===e||(t=e=Math.max(1===t?0:t,1===e?0:e))),this.blocked=this.commandHandler.scaleSelectedItems(e,t,this.getPivot(this.corner)),this.blocked},t}(ke),De=function(e){function t(t,i,n){var o=e.call(this,t,i)||this;return o.sourceObject=n,o}return Ie(t,e),t.prototype.mouseDown=function(t){e.prototype.mouseDown.call(this,t),this.inAction=!0;var i={bounds:{x:100,y:300,width:100,height:100},pageIndex:0,strokeColor:"red",thickness:3};i.id=sf.drawings.randomId(),this.sourceObject.pageIndex=i.pageIndex=this.pdfViewerBase.activeElements.activePageID||0,this.sourceObject.enableShapeLabel=this.commandHandler.enableShapeLabel,this.pdfViewerBase.updateFreeTextProperties(this.sourceObject);var n=document.getElementById("FormField_helper_html_element");n&&n.remove(),this.commandHandler.lastAnnotation=this.commandHandler.drawingObject=this.drawingObject=this.commandHandler.add(this.sourceObject||i)},t.prototype.mouseMove=function(t){if(e.prototype.mouseMove.call(this,t),this.inAction&&!1===sf.drawings.Point.equals(this.currentPosition,this.prevPosition)){this.dragging=!0;var i=sf.drawings.Rect.toBounds([this.prevPosition,this.currentPosition]);this.updateNodeDimension(this.drawingObject,i),"Radius"===this.drawingObject.shapeAnnotationType&&this.updateRadiusLinePosition(this.drawingObject.wrapper.children[1],this.drawingObject)}return!0},t.prototype.mouseUp=function(t){this.drawingObject&&this.dragging?(this.commandHandler.blazorAction|=Y.AnnotationAdding,this.commandHandler.clearSelection(this.pdfViewerBase.activeElements.activePageID),this.commandHandler.select([this.drawingObject.id],this.commandHandler.annotationSelectorSettings),this.commandHandler.annotation.updateCalibrateValues(this.drawingObject,!0),this.commandHandler&&this.commandHandler.annotation.addAction(this.pageIndex,null,this.drawingObject,"Addition","",this.drawingObject,this.drawingObject),this.drawingObject=null,this.dragging=!1,e.prototype.mouseUp.call(this,t),this.inAction=!1):(this.drawingObject=null,e.prototype.mouseUp.call(this,t))},t.prototype.endAction=function(){e.prototype.endAction.call(this)},t.prototype.updateNodeDimension=function(e,t){var i=this.commandHandler.viewerBase.getZoomFactor();e.bounds.x=t.x/i+t.width/i,e.bounds.y=t.y/i+t.height/i,e.bounds.width=t.width/i,e.bounds.height=t.height/i;var n=this.commandHandler.annotationModule?this.commandHandler.annotationModule.findAnnotationSettings(e):{},o=0,a=0;n.maxWidth||n.maxHeight?(o=n.maxHeight?n.maxHeight:2e3,a=n.maxWidth?n.maxWidth:2e3,e.bounds.width>a&&(e.bounds.width=a),e.bounds.height>o&&(e.bounds.height=o),e.bounds.height<=o&&e.bounds.width<=a&&this.commandHandler.nodePropertyChange(e,{bounds:e.bounds})):this.commandHandler.nodePropertyChange(e,{bounds:e.bounds})},t.prototype.updateRadiusLinePosition=function(e,t){var i={x:t.bounds.x+t.bounds.width/4,y:t.bounds.y},n={x:t.bounds.x+t.bounds.width/2,y:t.bounds.y+t.bounds.height/2},o=sf.drawings.identityMatrix();sf.drawings.rotateMatrix(o,t.rotateAngle,n.x,n.y);var a=sf.drawings.transformPointByMatrix(o,i),s={x:a.x,y:a.y};e.offsetX=s.x,e.offsetY=s.y,e.width=t.bounds.width/2;var r=this.commandHandler.annotationModule.findAnnotationSettings(t),l=0;r.maxWidth&&(l=r.maxWidth?r.maxWidth:2e3,t.bounds.width>l&&(t.bounds.width=l,e.width=t.bounds.width/2)),this.commandHandler.renderDrawing(void 0,t.pageIndex)},t}(ke),Fe=function(e){function t(t,i,n){var o=e.call(this,t,i)||this;return o.action=n,o}return Ie(t,e),t.prototype.mouseDown=function(t){if(e.prototype.mouseDown.call(this,t),this.inAction=!0,this.drawingObject){var i=void 0,n=this.drawingObject;i={x:(i=n.vertexPoints[n.vertexPoints.length-1]).x,y:i.y};var o=this.drawingObject.vertexPoints[this.drawingObject.vertexPoints.length-1];o.x===i.x&&o.x===i.y||this.drawingObject.vertexPoints.push(i),this.commandHandler.nodePropertyChange(n,{vertexPoints:n.vertexPoints})}else{this.startPoint={x:this.startPosition.x,y:this.startPosition.y};var a={bounds:{x:this.currentPosition.x,y:this.currentPosition.y,width:5,height:5},vertexPoints:[{x:this.startPoint.x/this.pdfViewerBase.getZoomFactor(),y:this.startPoint.y/this.pdfViewerBase.getZoomFactor()},{x:this.currentPosition.x/this.pdfViewerBase.getZoomFactor(),y:this.currentPosition.y/this.pdfViewerBase.getZoomFactor()}],shapeAnnotationType:"Line",fillColor:this.commandHandler.drawingObject.fillColor,strokeColor:this.commandHandler.drawingObject.strokeColor,pageIndex:this.pdfViewerBase.activeElements.activePageID,notes:this.commandHandler.drawingObject.notes,thickness:this.commandHandler.drawingObject.thickness,author:this.commandHandler.drawingObject.author,subject:this.commandHandler.drawingObject.subject,borderDashArray:this.commandHandler.drawingObject.borderDashArray,modifiedDate:this.commandHandler.drawingObject.modifiedDate,borderStyle:this.commandHandler.drawingObject.borderStyle,measureType:this.commandHandler.drawingObject.measureType,enableShapeLabel:this.commandHandler.enableShapeLabel,opacity:this.commandHandler.drawingObject.opacity};this.pdfViewerBase.updateFreeTextProperties(a),this.drawingObject=this.commandHandler.add(a)}},t.prototype.mouseMove=function(t){if(e.prototype.mouseMove.call(this,t),this.inAction&&!1===sf.drawings.Point.equals(this.currentPosition,this.prevPosition)){this.dragging=!0;var i=this.drawingObject;this.drawingObject&&this.currentPosition&&(i.vertexPoints[i.vertexPoints.length-1].x=this.currentPosition.x/this.pdfViewerBase.getZoomFactor(),i.vertexPoints[i.vertexPoints.length-1].y=this.currentPosition.y/this.pdfViewerBase.getZoomFactor(),this.commandHandler.nodePropertyChange(i,{vertexPoints:i.vertexPoints})),"Perimeter"===i.measureType&&k(i,i.vertexPoints,this.commandHandler.annotation.measureAnnotationModule)}return!0},t.prototype.mouseUp=function(t,i,n){var o;if(e.prototype.mouseMove.call(this,t),t.source&&null!==t.annotationSelectorSettings&&(o=t.source.annotationSelectorSettings),this.drawingObject){var a=new sf.drawings.Rect(this.drawingObject.vertexPoints[this.drawingObject.vertexPoints.length-1].x-20,this.drawingObject.vertexPoints[this.drawingObject.vertexPoints.length-1].y-20,40,40),s={x:this.drawingObject.vertexPoints[0].x,y:this.drawingObject.vertexPoints[0].y};if((a.containsPoint(s)||i)&&this.dragging){if(this.inAction&&(this.inAction=!1,this.drawingObject)){if(n||this.drawingObject.vertexPoints.length>2&&this.drawingObject.vertexPoints.splice(this.drawingObject.vertexPoints.length-1,1),"Polygon"===this.action){n?this.drawingObject.vertexPoints[this.drawingObject.vertexPoints.length]=this.drawingObject.vertexPoints[0]:this.drawingObject.vertexPoints[this.drawingObject.vertexPoints.length-1]=this.drawingObject.vertexPoints[0],this.commandHandler.nodePropertyChange(this.drawingObject,{vertexPoints:this.drawingObject.vertexPoints});var r=S(this.drawingObject);r.shapeAnnotationType="Polygon",r.bounds.width=r.wrapper.actualSize.width,r.bounds.height=r.wrapper.actualSize.height,r.bounds.x=this.drawingObject.wrapper.bounds.x,r.bounds.y=this.drawingObject.wrapper.bounds.y,this.commandHandler.add(r),this.commandHandler.remove(this.drawingObject),this.commandHandler.select([r.id],o);var l=this.commandHandler.selectedItems.annotations[0];l&&(this.commandHandler.enableShapeAnnotation&&(sf.base.isNullOrUndefined(l.measureType)||""===l.measureType)&&this.commandHandler.annotation.shapeAnnotationModule.renderShapeAnnotations(l,l.pageIndex),!this.commandHandler.enableMeasureAnnotation||"Area"!==l.measureType&&"Volume"!==l.measureType||("Area"===l.measureType?l.notes=this.commandHandler.annotation.measureAnnotationModule.calculateArea(l.vertexPoints):"Volume"===l.measureType&&(l.notes=this.commandHandler.annotation.measureAnnotationModule.calculateVolume(l.vertexPoints)),l.enableShapeLabel&&(l.labelContent=l.notes,this.commandHandler.nodePropertyChange(l,{vertexPoints:l.vertexPoints,notes:l.notes})),this.commandHandler.annotation.measureAnnotationModule.renderMeasureShapeAnnotations(l,l.pageIndex)))}else n||i&&this.drawingObject.vertexPoints.splice(this.drawingObject.vertexPoints.length-1,1),this.commandHandler.nodePropertyChange(this.drawingObject,{vertexPoints:this.drawingObject.vertexPoints,sourceDecoraterShapes:this.commandHandler.drawingObject.sourceDecoraterShapes,taregetDecoraterShapes:this.commandHandler.drawingObject.taregetDecoraterShapes}),this.commandHandler.select([this.drawingObject.id],o),this.commandHandler.enableMeasureAnnotation&&"Perimeter"===this.drawingObject.measureType&&(this.commandHandler.renderDrawing(null,this.drawingObject.pageIndex),this.drawingObject.notes=this.commandHandler.annotation.measureAnnotationModule.calculatePerimeter(this.drawingObject),this.drawingObject.enableShapeLabel&&(this.drawingObject.labelContent=this.drawingObject.notes,this.commandHandler.nodePropertyChange(this.drawingObject,{vertexPoints:this.drawingObject.vertexPoints,notes:this.drawingObject.notes})),this.commandHandler.annotation.measureAnnotationModule.renderMeasureShapeAnnotations(this.drawingObject,this.drawingObject.pageIndex));var d=this.commandHandler.selectedItems.annotations[0];this.commandHandler.annotation.addAction(this.pageIndex,null,d,"Addition","",d,d),this.drawingObject=null}this.endAction()}else this.inAction&&!this.dragging&&this.commandHandler.remove(this.drawingObject)}},t.prototype.mouseLeave=function(e){this.mouseUp(e,!0,!0)},t.prototype.mouseWheel=function(t){e.prototype.mouseWheel.call(this,t),this.mouseMove(t)},t.prototype.endAction=function(){this.inAction=!1,this.drawingObject=null,this.commandHandler.tool=""},t}(ke),Le=function(e){function t(t,i,n,o){var a=e.call(this,t,i,!0)||this;return a.endPoint=n,a.drawingObject=o,a}return Ie(t,e),t.prototype.mouseDown=function(t){if(this.inAction=!0,this.undoElement=void 0,e.prototype.mouseDown.call(this,t),t.source&&t.source.annotations&&({x:this.prevPosition.x,y:this.prevPosition.y},this.drawingObject),this.initialPosition=t.position,this.prevSource=this.drawingObject,this.currentPosition=t.position,this.drawingObject){if(!this.dragging){var i={bounds:{x:this.currentPosition.x,y:this.currentPosition.y,width:5,height:5},vertexPoints:[{x:this.startPosition.x/this.pdfViewerBase.getZoomFactor(),y:this.startPosition.y/this.pdfViewerBase.getZoomFactor()},{x:this.currentPosition.x/this.pdfViewerBase.getZoomFactor(),y:this.currentPosition.y/this.pdfViewerBase.getZoomFactor()}],shapeAnnotationType:this.drawingObject.shapeAnnotationType,sourceDecoraterShapes:this.drawingObject.sourceDecoraterShapes,taregetDecoraterShapes:this.drawingObject.taregetDecoraterShapes,fillColor:this.drawingObject.fillColor,strokeColor:this.drawingObject.strokeColor,pageIndex:this.pdfViewerBase.activeElements.activePageID,opacity:this.drawingObject.opacity||1,borderDashArray:this.drawingObject.borderDashArray,thickness:this.drawingObject.thickness,modifiedDate:this.drawingObject.modifiedDate,author:this.drawingObject.author,subject:this.drawingObject.subject,lineHeadEnd:this.drawingObject.lineHeadEnd,lineHeadStart:this.drawingObject.lineHeadStart,measureType:this.commandHandler.drawingObject.measureType,enableShapeLabel:this.commandHandler.enableShapeLabel};this.pdfViewerBase.updateFreeTextProperties(i),this.drawingObject=this.commandHandler.add(i)}}else{var n=this.commandHandler.annotation.measureAnnotationModule,o={vertexPoints:[{x:this.startPosition.x/this.pdfViewerBase.getZoomFactor(),y:this.startPosition.y/this.pdfViewerBase.getZoomFactor()},{x:this.currentPosition.x/this.pdfViewerBase.getZoomFactor(),y:this.currentPosition.y/this.pdfViewerBase.getZoomFactor()}],bounds:{x:this.currentPosition.x,y:this.currentPosition.y,width:5,height:5},sourceDecoraterShapes:this.commandHandler.drawingObject.sourceDecoraterShapes,taregetDecoraterShapes:this.commandHandler.drawingObject.taregetDecoraterShapes,measureType:"Distance",fillColor:this.commandHandler.drawingObject.fillColor,notes:this.commandHandler.drawingObject.notes,strokeColor:this.commandHandler.drawingObject.strokeColor,opacity:this.commandHandler.drawingObject.opacity,thickness:this.commandHandler.drawingObject.thickness,borderDashArray:this.commandHandler.drawingObject.borderDashArray,shapeAnnotationType:"Distance",pageIndex:this.pdfViewerBase.activeElements.activePageID,author:this.commandHandler.drawingObject.author,subject:this.commandHandler.drawingObject.subject,enableShapeLabel:this.commandHandler.enableShapeLabel,leaderHeight:n.leaderLength};this.pdfViewerBase.updateFreeTextProperties(o),this.drawingObject=this.commandHandler.add(o)}},t.prototype.mouseUp=function(t){if(this.dragging){if(e.prototype.mouseMove.call(this,t),this.commandHandler){var i=void 0;i=t.source&&null!==t.annotationSelectorSettings?t.source.annotationSelectorSettings:"";var n=this.drawingObject;this.commandHandler.nodePropertyChange(n,{vertexPoints:n.vertexPoints,leaderHeight:n.leaderHeight}),this.commandHandler.clearSelection(this.pdfViewerBase.activeElements.activePageID),this.commandHandler.select([n.id],i),this.commandHandler.renderSelector(this.pdfViewerBase.activeElements.activePageID,i)}this.endPoint&&this.endPoint.indexOf("ConnectorSegmentPoint")>-1&&this.dragging&&(this.commandHandler.annotation.updateCalibrateValues(this.drawingObject),this.commandHandler.annotation.addAction(this.pageIndex,null,this.drawingObject,"Addition","",this.drawingObject,this.drawingObject),this.drawingObject=null,this.dragging=!1,e.prototype.mouseUp.call(this,t)),this.drawingObject&&(this.endPoint="ConnectorSegmentPoint_1")}else this.drawingObject&&this.commandHandler.remove(this.drawingObject)},t.prototype.mouseMove=function(t){if(e.prototype.mouseMove.call(this,t),this.inAction&&!1===sf.drawings.Point.equals(this.currentPosition,this.prevPosition)){if(this.currentPosition=t.position,this.dragging=!0,this.currentPosition&&this.prevPosition){var i=this.currentPosition.x-this.prevPosition.x,n=this.currentPosition.y-this.prevPosition.y,o=void 0;o=t.source&&null!==t.annotationSelectorSettings?t.source.annotationSelectorSettings:"",(this.inAction&&this.commandHandler&&this.drawingObject&&void 0!==this.endPoint&&0!==i||0!==n)&&(this.blocked=!this.commandHandler.dragConnectorEnds(this.endPoint,this.drawingObject,this.currentPosition,this.selectedSegment,t.target,null,o),this.commandHandler.renderSelector(this.pdfViewerBase.activeElements.activePageID,o))}this.prevPosition=this.currentPosition}return!this.blocked},t.prototype.mouseLeave=function(e){this.mouseUp(e)},t.prototype.endAction=function(){e.prototype.endAction.call(this),this.prevPosition=null,this.endPoint=null},t}(ke),_e=function(e){function t(t,i){return e.call(this,t,i,!0)||this}return Ie(t,e),t.prototype.mouseDown=function(t){var i=S(t.source);this.undoElement={bounds:{x:i.wrapper.offsetX,y:i.wrapper.offsetY,width:i.wrapper.actualSize.width,height:i.wrapper.actualSize.height},rotateAngle:i.rotateAngle},e.prototype.mouseDown.call(this,t)},t.prototype.mouseUp=function(t){var i,n=t.source;if(this.undoElement.rotateAngle!==n.wrapper.rotateAngle){var o=t.source.annotations[0].annotationSelectorSettings;this.commandHandler.renderSelector(this.pdfViewerBase.activeElements.activePageID,o),i={bounds:{x:t.source.wrapper.offsetX,y:t.source.wrapper.offsetY,width:t.source.wrapper.actualSize.width,height:t.source.wrapper.actualSize.height},rotateAngle:t.source.wrapper.rotateAngle}}this.commandHandler.annotation.addAction(this.pageIndex,null,t.source,"Rotate","",this.undoElement,i),this.commandHandler.annotation.stampAnnotationModule.updateSessionStorage(t.source,null,"Rotate"),this.commandHandler.annotation.stickyNotesAnnotationModule.updateStickyNotes(t.source,null),e.prototype.mouseUp.call(this,t)},t.prototype.mouseMove=function(t){e.prototype.mouseMove.call(this,t);var i=t.source,n=t.source.annotations[0].annotationSelectorSettings;if(this.currentPosition=t.position,i.wrapper){var o={x:i.wrapper.offsetX,y:i.wrapper.offsetY},a=sf.drawings.Point.findAngle(o,this.currentPosition)+90;a=(a+360)%360,this.blocked=!this.commandHandler.rotate(a-i.wrapper.rotateAngle,n)}return!this.blocked},t.prototype.getTooltipContent=function(e){return Math.round(e.rotateAngle%360).toString()+""},t.prototype.mouseLeave=function(e){this.mouseUp(e)},t.prototype.endAction=function(){e.prototype.endAction.call(this)},t}(ke);function Oe(e,t,i,n){if(i&&t.activeElements.activePageID>-1){var o=Re(t,i,e),a=function(e,t,i,n){var o,a,s,r=null;if(t&&t.type&&-1!==t.type.indexOf("touch")){if(o=t,n.annotation){var l=i.getElement("_pageDiv_"+n.annotation.getEventPageNumber(t));if(l){var d=l.getBoundingClientRect();a=o.changedTouches[0].clientX-d.left,s=o.changedTouches[0].clientY-d.top}}}else if(t&&t.target&&t.path&&t.target.parentElement&&t.target.parentElement.classList.contains("foreign-object")){var h=t.path[4].getBoundingClientRect();a=t.clientX-h.left,s=t.clientY-h.top}else if(t.target&&t.target.parentElement&&t.target.parentElement.classList.contains("foreign-object")){h=t.target.offsetParent.offsetParent.offsetParent.getBoundingClientRect();a=t.clientX-h.left,s=t.clientY-h.top}else a=isNaN(t.offsetX)?t.position?t.position.x:0:t.offsetX,s=isNaN(t.offsetY)?t.position?t.position.y:0:t.offsetY;for(var p=0,c=0;c<e.length;c++)if("Distance"===e[c].shapeAnnotationType||"Line"===e[c].shapeAnnotationType||"LineWidthArrowHead"===e[c].shapeAnnotationType||i.tool instanceof Le){var u={x:a/i.getZoomFactor(),y:s/i.getZoomFactor()},f=He(e[c],u,5),g=E(e[c],u);if(f&&!g){var m=ze(e[c],f);if(m){var w=sf.drawings.Rect.toBounds([m,m]);w.Inflate(10),w.containsPoint(u)&&(g=!0)}}f&&g&&(r=e[c])}else{var y=e[c].wrapper.bounds,S=0;if("Stamp"!==e[c].shapeAnnotationType&&"Image"!==e[c].shapeAnnotationType||(S=25),(y.x-5)*i.getZoomFactor()<a&&(y.x+y.width+5)*i.getZoomFactor()>a&&(y.y-5-S)*i.getZoomFactor()<s&&(y.y+y.height+5)*i.getZoomFactor()>s)if(i.tool instanceof De||i.tool instanceof Pe)r=e[c];else if(p){var v=a-(y.x-5)*i.getZoomFactor()+((y.x+y.width+5)*i.getZoomFactor()-a)+(s-(y.y-5-S)*i.getZoomFactor())+((y.y+y.height+5)*i.getZoomFactor()-s);(p>v||p===v||p===v)&&(r=e[c],p=v)}else r=e[c],p=a-(y.x-5)*i.getZoomFactor()+((y.x+y.width+5)*i.getZoomFactor()-a)+(s-(y.y-5-S)*i.getZoomFactor())+((y.y+y.height+5)*i.getZoomFactor()-s)}return r}(o,e,t,i);return n?o:a}}function Re(e,t,i){var n=e.currentPosition||{x:i.offsetX,y:i.offsetY};return function(e,t){for(var i=[],n=0,o=t;n<o.length;n++){var a=o[n];(He(a,e,10)||"Stamp"===a.shapeAnnotationType&&He(a,e,40))&&je(a,"zIndex",i)}return i}(n={x:n.x/e.getZoomFactor(),y:n.y/e.getZoomFactor()},t.getPageTable(e.activeElements.activePageID).objects)}function ze(e,t){var i=e.sourcePoint,n=e.targetPoint;if("Distance"===e.shapeAnnotationType){var o=t,a=void 0,s=sf.drawings.Point.findAngle(e.sourcePoint,e.targetPoint);if(o.id.indexOf("leader")>-1){var r=e.wrapper.children[0].bounds.center;o.id.indexOf("leader1")>-1?(a={x:e.sourcePoint.x,y:e.sourcePoint.y-e.leaderHeight},r=i):(a={x:e.targetPoint.x,y:e.targetPoint.y-e.leaderHeight},r=n);var l=sf.drawings.identityMatrix();return sf.drawings.rotateMatrix(l,s,r.x,r.y),sf.drawings.transformPointByMatrix(l,{x:a.x,y:a.y})}}}function He(e,t,i){return function(e,t,i){if(e&&e.children)for(var n=e.children.length-1;n>=0;n--){var o=e.children[n];if(!sf.base.isNullOrUndefined(o.children)&&o.children.length>0)for(var a=o.children.length-1;a>=0;a--){var s=o.children[a];if(s&&s.bounds.containsPoint(t,10)){if(s instanceof sf.drawings.Container)if(r=this.findTargetElement(s,t))return r;if(s.bounds.containsPoint(t,10))return s}}else if(o&&o.bounds.containsPoint(t,10)){var r;if(o instanceof sf.drawings.Container)if(r=this.findTargetElement(o,t))return r;if(o.bounds.containsPoint(t,10))return o}}if(e&&e.bounds.containsPoint(t,i)&&"none"!==e.style.fill){var l=e,d=sf.drawings.identityMatrix();sf.drawings.rotateMatrix(d,l.parentTransform,l.offsetX,l.offsetY);var h=l.offsetX-l.pivot.x*l.actualSize.width,p=l.offsetY-l.pivot.y*l.actualSize.height,c={x:h+(.5===l.pivot.x?2*l.pivot.x:l.pivot.x)*l.actualSize.width/2,y:p-30};if(c=sf.drawings.transformPointByMatrix(d,c),sf.drawings.contains(t,c,10))return e}return null}(e.wrapper,t,i)}function je(e,t,i){if(0===i.length)i.push(e);else if(1===i.length)i[0][t]>e[t]?i.splice(0,0,e):i.push(e);else if(i.length>1){for(var n=0,o=i.length-1,a=Math.floor((n+o)/2);a!==n;)i[a][t]<e[t]?(n=a,a=Math.floor((n+o)/2)):i[a][t]>e[t]&&(o=a,a=Math.floor((n+o)/2));i[o][t]<e[t]?i.push(e):i[n][t]>e[t]?i.splice(n,0,e):i[n][t]<e[t]&&i[o][t]>e[t]&&i.splice(o,0,e)}}var We=function(){function e(){this.activePage=void 0,this.activePageID=void 0}return Object.defineProperty(e.prototype,"activePageID",{get:function(){return this.activePage},set:function(e){this.activePage=e,this.activePage},enumerable:!0,configurable:!0}),e}(),Ze=function(){function e(e,t){this.inputBoxCount=0,this.isFreeTextValueChange=!1,this.isAddAnnotationProgramatically=!1,this.isInuptBoxInFocus=!1,this.freeTextPageNumbers=[],this.selectedText="",this.isTextSelected=!1,this.selectionStart=0,this.selectionEnd=0,this.isBold=!1,this.isItalic=!1,this.isUnderline=!1,this.isStrikethrough=!1,this.isReadonly=!1,this.isMaximumWidthReached=!1,this.previousText="Type Here",this.pdfViewer=e,this.pdfViewerBase=t,this.updateTextProperties(),this.inputBoxElement=document.createElement("textarea"),this.inputBoxElement.style.position="absolute",this.inputBoxElement.style.Width=this.defautWidth,this.inputBoxElement.style.Height=this.defaultHeight,this.inputBoxElement.style.zIndex="5",this.inputBoxElement.style.fontSize=this.fontSize+"px",this.inputBoxElement.className="free-text-input",this.inputBoxElement.style.resize="none",this.inputBoxElement.style.borderColor=this.borderColor,this.inputBoxElement.style.background=this.fillColor,this.inputBoxElement.style.lineHeight="normal",this.inputBoxElement.style.display="inline-block",this.inputBoxElement.style.borderStyle=this.borderStyle,this.inputBoxElement.style.borderWidth=this.borderWidth+"px",this.inputBoxElement.style.padding=this.padding,this.inputBoxElement.style.paddingLeft="4px",this.inputBoxElement.style.paddingTop="3px",this.inputBoxElement.style.borderRadius="2px",this.inputBoxElement.style.verticalAlign="middle",this.inputBoxElement.style.fontFamily=this.fontFamily,this.inputBoxElement.style.color=this.pdfViewer.freeTextSettings.fontColor?this.pdfViewer.freeTextSettings.fontColor:"#000",this.inputBoxElement.style.overflow="hidden",this.inputBoxElement.style.wordBreak=this.wordBreak,this.inputBoxElement.readOnly=this.isReadonly,this.inputBoxElement.addEventListener("focusout",this.onFocusOutInputBox.bind(this)),this.inputBoxElement.addEventListener("keydown",this.onKeyDownInputBox.bind(this)),this.inputBoxElement.addEventListener("mouseup",this.onMouseUpInputBox.bind(this)),this.freeTextPageNumbers=[]}return e.prototype.updateTextProperties=function(){this.defautWidth=this.pdfViewer.freeTextSettings.width?this.pdfViewer.freeTextSettings.width:151,this.defaultHeight=this.pdfViewer.freeTextSettings.height?this.pdfViewer.freeTextSettings.height:24.6,this.borderColor=this.pdfViewer.freeTextSettings.borderColor?this.pdfViewer.freeTextSettings.borderColor:"#ffffff00",this.fillColor=this.pdfViewer.freeTextSettings.fillColor?this.pdfViewer.freeTextSettings.fillColor:"#fff",this.borderStyle=this.pdfViewer.freeTextSettings.borderStyle?this.pdfViewer.freeTextSettings.borderStyle:"solid";var e=this.pdfViewer.freeTextSettings.borderThickness||this.pdfViewer.freeTextSettings.borderWidth;if(this.borderWidth=e||1,this.fontSize=this.pdfViewer.freeTextSettings.fontSize?this.pdfViewer.freeTextSettings.fontSize:16,this.opacity=this.pdfViewer.freeTextSettings.opacity?this.pdfViewer.freeTextSettings.opacity:1,this.fontColor=this.pdfViewer.freeTextSettings.fontColor?this.pdfViewer.freeTextSettings.fontColor:"#000",this.author="Guest"!==this.pdfViewer.freeTextSettings.author?this.pdfViewer.freeTextSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest",this.pdfViewer.freeTextSettings.fontFamily){var t=this.pdfViewer.freeTextSettings.fontFamily;this.fontFamily="Helvetica"===t||"Times New Roman"===t||"Courier"===t||"Symbol"===t||"ZapfDingbats"===t?t:"Helvetica"}else this.fontFamily="Helvetica";this.textAlign=this.pdfViewer.freeTextSettings.textAlignment?this.pdfViewer.freeTextSettings.textAlignment:"Left",this.defaultText=this.pdfViewer.freeTextSettings.defaultText?this.pdfViewer.freeTextSettings.defaultText:"Type here",this.isReadonly=!1,this.pdfViewer.freeTextSettings.enableAutoFit?(this.wordBreak="break-all",this.padding="2px"):(this.padding="0px",this.wordBreak="break-word"),(this.pdfViewer.freeTextSettings.isLock||this.pdfViewer.annotationSettings.isLock||this.pdfViewer.freeTextSettings.isReadonly)&&(this.isReadonly=!0),1===this.pdfViewer.freeTextSettings.fontStyle?this.isBold=!0:2===this.pdfViewer.freeTextSettings.fontStyle?this.isItalic=!0:4===this.pdfViewer.freeTextSettings.fontStyle?this.isUnderline=!0:8===this.pdfViewer.freeTextSettings.fontStyle?this.isStrikethrough=!0:3===this.pdfViewer.freeTextSettings.fontStyle?(this.isBold=!0,this.isItalic=!0):5===this.pdfViewer.freeTextSettings.fontStyle?(this.isBold=!0,this.isUnderline=!0):9===this.pdfViewer.freeTextSettings.fontStyle?(this.isBold=!0,this.isStrikethrough=!0):7===this.pdfViewer.freeTextSettings.fontStyle?(this.isBold=!0,this.isItalic=!0,this.isUnderline=!0):11===this.pdfViewer.freeTextSettings.fontStyle?(this.isBold=!0,this.isItalic=!0,this.isStrikethrough=!0):14===this.pdfViewer.freeTextSettings.fontStyle?(this.isBold=!0,this.isUnderline=!0,this.isStrikethrough=!0):6===this.pdfViewer.freeTextSettings.fontStyle&&(this.isUnderline=!0,this.isItalic=!0)},e.prototype.renderFreeTextAnnotations=function(e,t,i){var n=!1;if(!i)for(var o=0;o<this.freeTextPageNumbers.length;o++)if(this.freeTextPageNumbers[o]===t){n=!0;break}if(e&&!n&&e.length>=1){this.freeTextPageNumbers.push(t);for(var a=0;a<e.length;a++){var s=e[a];if(s.annotationAddMode=this.pdfViewer.annotationModule.findAnnotationMode(s,t,s.AnnotType),s.AnnotType){var r=null;if(s.VertexPoints){r=[];for(var l=0;l<s.VertexPoints.length;l++){var d={x:s.VertexPoints[l].X,y:s.VertexPoints[l].Y};r.push(d)}}s.AnnotationSettings=s.AnnotationSettings?s.AnnotationSettings:this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.freeTextSettings);var h=void 0,p=this.getPaddingValues(s.FontSize),c=(p[0],p[1],sf.base.isNullOrUndefined(s.Bounds.X)?s.Bounds.x:s.Bounds.X-.5),u=sf.base.isNullOrUndefined(s.Bounds.Y)?s.Bounds.y:s.Bounds.Y-.5,f=s.Bounds.Width?s.Bounds.Width:s.Bounds.width,g=s.Bounds.Height?s.Bounds.Height:s.Bounds.height,m=this.getRotationValue(t),w=(s.Rotate,s.PageRotation);1===Math.sign(s.Rotate)?s.Rotate=-s.Rotate+m:s.Rotate=s.Rotate+m;var y=Math.abs(s.Rotate);if(i&&m!==w&&this.pdfViewerBase.isJsonImported){var S=this.pdfViewerBase.pageSize[t],v=s.Bounds.X,b=s.Bounds.Y,V=f,A=g;if(w>0){var x=w/90;1===x?(g=f,f=s.Bounds.Height,c=s.Bounds.Y,u=270!==m?S.height-s.Bounds.X-s.Bounds.Width:S.width-s.Bounds.X-s.Bounds.Width):2===x?270!==m&&90!==m?(c=S.width-s.Bounds.X-s.Bounds.Width,u=S.height-s.Bounds.Y-s.Bounds.Height):(c=S.height-s.Bounds.X-s.Bounds.Width,u=S.width-s.Bounds.Y-s.Bounds.Height):3===x&&(g=f,f=s.Bounds.Height,c=90!==m?S.width-s.Bounds.Y-f:S.height-s.Bounds.Y-f,u=s.Bounds.X),v=c,b=u,V=f,A=g}var C=m/90%4;1===C?(g=f,f=A,c=S.width-b-A-.5,u=v-.5):2===C?(c=S.width-v-V-.5,u=S.height-b-A-.5):3===C?(g=f,f=A,c=b-.5,u=S.height-v-g-.5):0===C&&(c=v-.5,u=b-.5)}if(90===y||270===y){var I=f;c=c-(f=g)/2+(g=I)/2,u+=f/2-g/2}var k=!0;k="Imported Annotation"===s.annotationAddMode?s.IsPrint:s.AnnotationSettings.isPrint,s.allowedInteractions=s.AllowedInteractions?s.AllowedInteractions:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(s),h={author:s.Author,modifiedDate:s.ModifiedDate,subject:s.Subject,id:"freetext"+this.inputBoxCount,rotateAngle:s.Rotate,dynamicText:s.MarkupText,strokeColor:s.StrokeColor,thickness:s.Thickness,fillColor:s.FillColor,bounds:{x:c,y:u,left:c,top:u,width:f,height:g,right:s.Bounds.Right,bottom:s.Bounds.Bottom},annotName:s.AnnotName,shapeAnnotationType:"FreeText",pageIndex:t,opacity:s.Opacity,fontColor:s.FontColor,fontSize:s.FontSize,pageRotation:m,fontFamily:s.FontFamily,notes:s.MarkupText,textAlign:s.TextAlign,comments:this.pdfViewer.annotationModule.getAnnotationComments(s.Comments,s,s.Author),review:{state:s.State,stateModel:s.StateModel,modifiedDate:s.ModifiedDate,author:s.Author},font:{isBold:s.Font.Bold,isItalic:s.Font.Italic,isStrikeout:s.Font.Strikeout,isUnderline:s.Font.Underline},annotationSelectorSettings:this.getSettings(s),annotationSettings:s.AnnotationSettings,customData:this.pdfViewer.annotation.getCustomData(s),annotationAddMode:s.annotationAddMode,allowedInteractions:s.allowedInteractions,isPrint:k,isCommentLock:s.IsCommentLock,isReadonly:s.IsReadonly},i&&(h.id=s.AnnotName,h.previousFontSize=s.FontSize?s.FontSize:this.fontSize);var T=this.pdfViewer.add(h);if(this.pdfViewer.annotationModule.storeAnnotations(t,h,"_annotations_freetext"),this.isAddAnnotationProgramatically){var M={opacity:h.opacity,borderColor:h.strokeColor,borderWidth:h.thickness,author:s.author,subject:s.subject,modifiedDate:s.modifiedDate,fillColor:h.fillColor,fontSize:h.fontSize,width:h.bounds.width,height:h.bounds.height,fontColor:h.fontColor,fontFamily:h.fontFamily,defaultText:h.dynamicText,fontStyle:h.font,textAlignment:h.textAlign};this.pdfViewer.fireAnnotationAdd(h.pageIndex,h.annotName,"FreeText",h.bounds,M)}this.inputBoxCount+=1,this.pdfViewer.annotation.freeTextAnnotationModule.isFreeTextValueChange=!0,this.pdfViewer.nodePropertyChange(T,{}),this.pdfViewer.annotation.freeTextAnnotationModule.isFreeTextValueChange=!1}}}},e.prototype.getSettings=function(e){var t=this.pdfViewer.annotationSelectorSettings;return e.AnnotationSelectorSettings?t=e.AnnotationSelectorSettings:this.pdfViewer.freeTextSettings.annotationSelectorSettings&&(t=this.pdfViewer.freeTextSettings.annotationSelectorSettings),t},e.prototype.setAnnotationType=function(e){switch(this.pdfViewerBase.disableTextSelectionMode(),e){case"FreeText":this.currentAnnotationMode="FreeText",this.updateTextProperties();var t=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();this.pdfViewer.drawingObject={shapeAnnotationType:"FreeText",strokeColor:this.borderColor,fillColor:this.fillColor,opacity:this.opacity,notes:"",isCommentLock:!1,thickness:this.borderWidth,borderDashArray:"0",modifiedDate:t,author:this.pdfViewer.freeTextSettings.author,subject:"Text Box",font:{isBold:this.isBold,isItalic:this.isItalic,isStrikeout:this.isStrikethrough,isUnderline:this.isUnderline},textAlign:this.textAlign},this.pdfViewer.tool="Select"}},e.prototype.modifyInCollection=function(e,t,i,n){n||this.pdfViewerBase.updateDocumentEditedProperty(!0);var o=null,a=this.getAnnotations(t,null);if(null!=a&&i){for(var s=0;s<a.length;s++)if(i.id===a[s].id){if("bounds"===e)a[s].bounds={x:i.bounds.x,y:i.bounds.y,left:i.bounds.x,top:i.bounds.y,width:i.bounds.width,height:i.bounds.height,right:i.bounds.right,bottom:i.bounds.bottom};else if("fill"===e)a[s].fillColor=i.wrapper.children[0].style.fill;else if("stroke"===e)a[s].strokeColor=i.wrapper.children[0].style.strokeColor;else if("opacity"===e)a[s].opacity=i.wrapper.children[0].style.opacity;else if("thickness"===e)a[s].thickness=i.wrapper.children[0].style.strokeWidth;else if("notes"===e)a[s].note=i.notes;else{if("delete"===e){o=a.splice(s,1)[0];break}"dynamicText"===e?a[s].dynamicText=i.dynamicText:"fontColor"===e?a[s].fontColor=i.fontColor:"fontSize"===e?a[s].fontSize=i.fontSize:"fontFamily"===e?a[s].fontFamily=i.fontFamily:"textPropertiesChange"===e?a[s].font={isBold:i.font.isBold,isItalic:i.font.isItalic,isStrikeout:i.font.isStrikeout,isUnderline:i.font.isUnderline}:"textAlign"===e&&(a[s].textAlign=i.textAlign)}a[s].modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),this.pdfViewer.annotationModule.storeAnnotationCollections(a[s],t)}this.manageAnnotations(a,t)}return o},e.prototype.addInCollection=function(e,t){if(t){var i=this.getAnnotations(e,null);i&&i.push(t),this.manageAnnotations(i,e)}},e.prototype.saveFreeTextAnnotations=function(){var e=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_freetext");this.pdfViewerBase.isStorageExceed&&(e=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_freetext"]);for(var t=new Array,i=0;i<this.pdfViewerBase.pageCount;i++)t[i]=[];if(e&&!this.pdfViewer.annotationSettings.skipDownload)for(var n=JSON.parse(e),o=0;o<n.length;o++){var a=[],s=n[o];if(s){for(var r=0;s.annotations.length>r;r++){this.pdfViewer.annotationModule.updateModifiedDate(s.annotations[r]),s.annotations[r].bounds=this.getBoundsBasedOnRotation(s.annotations[r].bounds,s.annotations[r].rotateAngle,s.pageIndex,s.annotations[r]),s.annotations[r].bounds=JSON.stringify(this.pdfViewer.annotation.getBounds(s.annotations[r].bounds,s.pageIndex));var l=s.annotations[r].strokeColor;s.annotations[r].strokeColor=JSON.stringify(this.getRgbCode(l));var d=s.annotations[r].fillColor;s.annotations[r].fillColor=JSON.stringify(this.getRgbCode(d));var h=s.annotations[r].fontColor;s.annotations[r].fontColor=JSON.stringify(this.getRgbCode(h)),s.annotations[r].vertexPoints=JSON.stringify(s.annotations[r].vertexPoints),null!==s.annotations[r].rectangleDifference&&(s.annotations[r].rectangleDifference=JSON.stringify(s.annotations[r].rectangleDifference))}a=s.annotations}t[s.pageIndex]=a}return JSON.stringify(t)},e.prototype.getRotationValue=function(e){var t=this.pdfViewerBase.pageSize[e];return 0===t.rotation?0:1===t.rotation?90:2===t.rotation?180:3===t.rotation?270:0},e.prototype.getBoundsBasedOnRotation=function(e,t,i,n){var o=this.getPaddingValues(this.fontSize),a=(o[0],o[1],this.getRotationValue(i));if(n.rotateAngle=t-a,n.pageRotation=a,90===t||-90===t||270===t||-270===t){var s=e.left+e.width/2-e.height/2,r=e.top-(e.width/2-e.height/2);return{x:s+.5,y:r+.5,left:s+.5,top:r+.5,width:e.height,height:e.width}}return{x:e.left+.5,y:e.top+.5,left:e.left+.5,top:e.top+.5,width:e.width,height:e.height}},e.prototype.manageAnnotations=function(e,t){var i=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_freetext");if(this.pdfViewerBase.isStorageExceed&&(i=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_freetext"]),i){var n=JSON.parse(i);this.pdfViewerBase.isStorageExceed||window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_freetext");var o=this.pdfViewer.annotationModule.getPageCollection(n,t);n[o]&&(n[o].annotations=e);var a=JSON.stringify(n);this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_freetext"]=a:window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_annotations_freetext",a)}},e.prototype.getAnnotations=function(e,t){var i,n=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_freetext");if(this.pdfViewerBase.isStorageExceed&&(n=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_freetext"]),n){var o=JSON.parse(n),a=this.pdfViewer.annotationModule.getPageCollection(o,e);i=o[a]?o[a].annotations:t}else i=t;return i},e.prototype.getRgbCode=function(e){e.match(/#([a-z0-9]+)/gi)||e.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/)||(e=this.pdfViewer.annotationModule.nameToHash(e));var t=e.split(",");return sf.base.isNullOrUndefined(t[1])&&(t=(e=this.pdfViewer.annotationModule.getValue(e,"rgba")).split(",")),{r:parseInt(t[0].split("(")[1]),g:parseInt(t[1]),b:parseInt(t[2]),a:parseInt(t[3])}},e.prototype.onFocusOutInputBox=function(){var e=this.pdfViewer.allowServerDataBinding;if(this.pdfViewer.enableServerDataBinding(!1),this.pdfViewerBase.isFreeTextContextMenu)this.inputBoxElement.focus(),this.isTextSelected||window.getSelection().removeAllRanges();else{this.pdfViewer.fireBeforeAddFreeTextAnnotation(this.inputBoxElement.value);var t=this.inputBoxElement.id&&this.inputBoxElement.id.split("_freeText_")[1]&&this.inputBoxElement.id.split("_freeText_")[1].split("_")[0]?parseFloat(this.inputBoxElement.id.split("_freeText_")[1].split("_")[0]):this.pdfViewerBase.currentPageNumber-1,i=this.pdfViewerBase.getElement("_pageDiv_"+t),n=parseFloat(this.inputBoxElement.style.width),o=parseFloat(this.inputBoxElement.style.paddingLeft);if(this.pdfViewer.freeTextSettings.enableAutoFit&&!this.isMaximumWidthReached&&!this.isNewFreeTextAnnot){var a=parseFloat(this.inputBoxElement.style.fontSize);this.inputBoxElement.style.width=n+o-a+"px"}if(this.pdfViewer.freeTextSettings.enableAutoFit&&!this.isMaximumWidthReached&&this.isNewFreeTextAnnot){n=parseFloat(this.inputBoxElement.style.width);this.inputBoxElement.style.width=n-8+"px"}var s=parseFloat(this.inputBoxElement.style.height),r=parseFloat(this.inputBoxElement.style.width),l=parseFloat(this.inputBoxElement.style.left);if(this.pdfViewerBase.isMixedSizeDocument)l-=document.getElementById(this.pdfViewer.dataId+"_annotationCanvas_"+t).offsetLeft;var d=parseFloat(this.inputBoxElement.style.top),h=this.pdfViewerBase.getZoomFactor();this.pdfViewer.isValidFreeText&&(this.inputBoxElement.value="Type Here",this.pdfViewer.isValidFreeText=!1);var p=this.inputBoxElement.value,c=!1;if(!0===this.isNewFreeTextAnnot){var u=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),f=this.pdfViewer.annotation.createGUID();this.isNewFreeTextAnnot=!1,c=!0;var g=void 0,m=this.pdfViewer.freeTextSettings.annotationSelectorSettings?this.pdfViewer.freeTextSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,w=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.freeTextSettings);this.author=this.author?this.author:this.pdfViewer.freeTextSettings.author?this.pdfViewer.freeTextSettings.author:"Guest";var y=this.pdfViewer.freeTextSettings.allowedInteractions?this.pdfViewer.freeTextSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions;this.pdfViewer.annotation.stickyNotesAnnotationModule.addComments("freeText",t+1,"",f,p,this.author),g={author:this.author,modifiedDate:u,subject:"Text Box",id:"free_text"+this.inputBoxCount,rotateAngle:0,dynamicText:p,strokeColor:this.borderColor,thickness:this.borderWidth,fillColor:this.fillColor,bounds:{left:l/h,top:d/h,x:l/h,y:d/h,width:r/h,height:s/h},annotName:f,shapeAnnotationType:"FreeText",type:"FreeText",pageIndex:t,fontColor:this.fontColor,fontSize:this.fontSize,fontFamily:this.fontFamily,opacity:this.opacity,comments:[],textAlign:this.textAlign,font:{isBold:this.isBold,isItalic:this.isItalic,isStrikeout:this.isStrikethrough,isUnderline:this.isUnderline},review:{state:"Unmarked",stateModel:"None",modifiedDate:u,author:this.author},annotationSelectorSettings:m,annotationSettings:w,customData:this.pdfViewer.annotationModule.getData("FreeText"),isPrint:this.pdfViewer.freeTextSettings.isPrint,allowedInteractions:y,isReadonly:this.isReadonly},this.pdfViewer.enableRtl&&(g.textAlign="Right");var S=this.pdfViewer.add(g),v={x:g.bounds.x,y:g.bounds.y,left:g.bounds.x,top:g.bounds.y,width:g.bounds.width,height:g.bounds.height},b={opacity:g.opacity,borderColor:g.strokeColor,borderWidth:g.thickness,author:S.author,subject:S.subject,modifiedDate:S.modifiedDate,fillColor:g.fillColor,fontSize:g.fontSize,width:g.bounds.width,height:g.bounds.height,fontColor:g.fontColor,fontFamily:g.fontFamily,defaultText:g.dynamicText,fontStyle:g.font,textAlignment:g.textAlign};this.pdfViewer.annotation.storeAnnotations(t,g,"_annotations_freetext"),this.pdfViewer.fireAnnotationAdd(g.pageIndex,g.annotName,"FreeText",v,b),this.pdfViewer.annotation.addAction(t,null,g,"Addition","",g,g),this.pdfViewer.renderSelector(g.pageIndex),this.pdfViewer.clearSelection(g.pageIndex),this.pdfViewerBase.updateDocumentEditedProperty(!0),this.selectedAnnotation=S}if(this.isInuptBoxInFocus=!1,this.selectedAnnotation&&this.pdfViewer.selectedItems.annotations){r/=h;var V=(s/=h)-this.selectedAnnotation.bounds.height,A=void 0;V>0&&(A=(A=this.selectedAnnotation.wrapper.offsetY+V/2)>0?A:void 0);var x=r-this.selectedAnnotation.bounds.width,C=void 0;x>0?C=(C=this.selectedAnnotation.wrapper.offsetX+x/2)>0?C:void 0:(x=Math.abs(x),C=this.selectedAnnotation.wrapper.offsetX-x/2),this.selectedAnnotation.bounds.width=r,this.selectedAnnotation.bounds.height=s,this.pdfViewer.annotation.modifyDynamicTextValue(p,this.selectedAnnotation.annotName),this.selectedAnnotation.dynamicText=p,this.modifyInCollection("dynamicText",t,this.selectedAnnotation,c),this.modifyInCollection("bounds",t,this.selectedAnnotation,c),this.pdfViewer.nodePropertyChange(this.selectedAnnotation,{bounds:{width:this.selectedAnnotation.bounds.width,height:this.selectedAnnotation.bounds.height,y:A,x:C}}),this.pdfViewer._dotnetInstance.invokeMethodAsync("UpdateFreeText",this.selectedAnnotation.annotName,p),this.pdfViewer.renderSelector(this.selectedAnnotation.pageIndex,this.selectedAnnotation.annotationSelectorSettings)}this.inputBoxElement.parentElement&&(i&&i.id===this.inputBoxElement.parentElement.id?i.removeChild(this.inputBoxElement):this.inputBoxElement.parentElement.removeChild(this.inputBoxElement));var I=document.getElementById(this.pdfViewer.dataId+"_annotationCanvas_"+t);this.pdfViewer.renderDrawing(I,t),this.inputBoxCount+=1,c||this.previousText===p||this.pdfViewer.annotationModule.triggerAnnotationPropChange(this.selectedAnnotation,!1,!1,!1,!1,!1,!1,!1,!0,this.previousText,p)}this.pdfViewer.enableServerDataBinding(e,!0)},e.prototype.onKeyDownInputBox=function(e){var t=this;(9===e.which||sf.base.isNullOrUndefined(this.pdfViewer.selectedItems.annotations[0])&&!this.isNewFreeTextAnnot)&&e.preventDefault(),this.selectedAnnotation=this.pdfViewer.selectedItems.annotations&&this.isNewFreeTextAnnot?this.pdfViewer.selectedItems.annotations[0]:this.selectedAnnotation,setTimeout((function(){t.defaultHeight<t.inputBoxElement.scrollHeight&&parseInt(t.inputBoxElement.style.height)<t.inputBoxElement.scrollHeight?t.updateFreeTextAnnotationSize(!0):t.updateFreeTextAnnotationSize(!1)}),0)},e.prototype.updateFreeTextAnnotationSize=function(e){var t=this.pdfViewer.freeTextSettings.enableAutoFit;if(t?this.autoFitFreeText():this.isMaximumWidthReached=!0,this.isMaximumWidthReached){var i=this.inputBoxElement.getBoundingClientRect().height;e||this.inputBoxElement.readOnly||(this.inputBoxElement.style.height=this.defaultHeight+"px");var n=this.inputBoxElement.getBoundingClientRect().height-i,o=parseFloat(this.inputBoxElement.style.fontSize),a=this.pdfViewerBase.getZoomFactor();this.defaultHeight*a<this.inputBoxElement.scrollHeight&&parseInt(this.inputBoxElement.style.height)<this.inputBoxElement.scrollHeight&&(this.inputBoxElement.style.height=this.inputBoxElement.readOnly?this.inputBoxElement.style.height:this.inputBoxElement.scrollHeight+o/2+"px"),this.inputBoxElement.style.height=n<0&&!this.inputBoxElement.readOnly?i+"px":this.inputBoxElement.style.height}var s=this.pdfViewerBase.getZoomFactor(),r=parseFloat(this.inputBoxElement.style.height),l=parseFloat(this.inputBoxElement.style.width);if(r/=s,l/=s,this.selectedAnnotation){var d=r-this.selectedAnnotation.bounds.height,h=0;if(d>0?h=this.selectedAnnotation.wrapper.offsetY+d/2:(d=Math.abs(d),h=this.selectedAnnotation.wrapper.offsetY-d/2),t){var p=l-this.selectedAnnotation.bounds.width,c=0;p>0?c=this.selectedAnnotation.wrapper.offsetX+p/2:(p=Math.abs(p),c=this.selectedAnnotation.wrapper.offsetX-p/2)}this.selectedAnnotation.bounds.width=l,this.selectedAnnotation.bounds.height=r,t?this.pdfViewer.nodePropertyChange(this.selectedAnnotation,{bounds:{width:this.selectedAnnotation.bounds.width,height:this.selectedAnnotation.bounds.height,y:h,x:c}}):this.pdfViewer.nodePropertyChange(this.selectedAnnotation,{bounds:{width:this.selectedAnnotation.bounds.width,height:this.selectedAnnotation.bounds.height,y:h}}),this.pdfViewer.renderSelector(this.selectedAnnotation.pageIndex,this.selectedAnnotation.annotationSelectorSettings)}},e.prototype.autoFitFreeText=function(e,t){var i=this.pdfViewerBase.currentPageNumber-1,n=(this.pdfViewerBase.getElement("_pageDiv_"+i),this.pdfViewerBase.getElement("_annotationCanvas_"+i).getContext("2d")),o=this.inputBoxElement.style.fontSize;this.pdfViewer.freeTextSettings.fontStyle===L.Bold||"bold"===this.inputBoxElement.style.fontWeight?n.font="bold "+o+" "+this.inputBoxElement.style.fontFamily:n.font=o+" "+this.inputBoxElement.style.fontFamily;var a="",s=[],r=this.inputBoxElement.value;if(r.indexOf("\n")>-1){s=r.split("\n");for(var l=0;l<s.length;l++){var d=n.measureText(s[l]),h=n.measureText(a);d.width>h.width&&(a=s[l])}this.isMaximumWidthReached=!0}else a=r,this.isMaximumWidthReached=!1;var p,c=n.measureText(a),u=(o=parseFloat(this.inputBoxElement.style.fontSize))+o/2;this.isNewFreeTextAnnot?(p=Math.ceil(c.width+18),this.inputBoxElement.style.height=u+"px",this.inputBoxElement.style.top=t-u/2+"px"):p=Math.ceil(c.width)+o+Math.ceil(4),e||(this.inputBoxElement.style.height=u+"px"),this.inputBoxElement.style.width=p+"px";var f=this.pdfViewerBase.getPageWidth(i)-parseFloat(this.inputBoxElement.style.left);if(parseFloat(this.inputBoxElement.style.width)>f)if(this.isMaximumWidthReached=!0,this.isNewAddedAnnot&&e){p-=8,this.inputBoxElement.style.width=p+"px";var g=e+p*this.pdfViewerBase.getZoomFactor(),m=parseFloat(this.inputBoxElement.style.left);g>=this.pdfViewerBase.getPageWidth(i)&&(m=this.pdfViewerBase.getPageWidth(i)-p),this.inputBoxElement.style.left=m+"px"}else this.inputBoxElement.style.width=f+"px"},e.prototype.onMouseUpInputBox=function(e){var t=e.target;this.selectionStart=0,this.selectionEnd=0,3===e.which&&t&&(this.selectionStart=t.selectionStart,this.selectionEnd=t.selectionEnd),3===e.which&&null!=window.getSelection()&&""!==window.getSelection().toString()?this.isTextSelected=!0:this.isTextSelected=!1},e.prototype.addInuptElemet=function(e,t,i,n){void 0===t&&(t=null),sf.base.isNullOrUndefined(i)&&(i=this.pdfViewerBase.currentPageNumber-1),t&&(i=t.pageIndex),null===t&&0===this.pdfViewer.selectedItems.annotations.length&&this.updateTextProperties(),this.inputBoxElement.id=this.pdfViewer.dataId+"_freeText_"+i+"_"+this.inputBoxCount;var o=this.pdfViewerBase.getElement("_pageDiv_"+i),a=document.getElementById(this.pdfViewer.dataId+"_annotationCanvas_"+i),s=this.pdfViewerBase.getZoomFactor();if(this.inputBoxElement.value=t&&t.dynamicText?t.dynamicText:this.defaultText,this.inputBoxElement.style.boxSizing="border-box",this.inputBoxElement.style.left=e.x+"px",this.inputBoxElement.style.top=e.y-this.defaultHeight*s/2+"px",this.pdfViewer.freeTextSettings.enableAutoFit?this.inputBoxElement.style.wordBreak="break-all":this.inputBoxElement.style.wordBreak="break-word",t?this.applyFreetextStyles(s,t.isReadonly):this.applyFreetextStyles(s),this.isBold?this.inputBoxElement.style.fontWeight="bold":this.inputBoxElement.style.fontWeight="normal",this.isItalic?this.inputBoxElement.style.fontStyle="italic":this.inputBoxElement.style.fontStyle="normal",this.inputBoxElement.style.textDecoration="none",this.isUnderline&&(this.inputBoxElement.style.textDecoration="underline"),this.isStrikethrough&&(this.inputBoxElement.style.textDecoration="line-through"),this.pdfViewer.enableRtl?(this.inputBoxElement.style.textAlign="right",this.inputBoxElement.style.direction="rtl",this.inputBoxElement.style.left=e.x-this.defautWidth*s/2):this.inputBoxElement.style.textAlign=this.textAlign.toLowerCase(),this.inputBoxElement.style.borderColor=this.borderColor,this.inputBoxElement.style.color=this.fontColor,this.inputBoxElement.style.background=this.fillColor,t&&t.wrapper&&t.wrapper.children[0]&&(this.inputBoxElement.style.opacity=t.wrapper.children[0].style.opacity),!0===this.isNewFreeTextAnnot&&this.pdfViewer.clearSelection(i),t&&t.wrapper&&t.wrapper.bounds){var r=t.wrapper.bounds;r.left&&(this.inputBoxElement.style.left=r.left*s+"px"),r.top&&(this.inputBoxElement.style.top=r.top*s+"px"),this.inputBoxElement.style.height=r.height?r.height*s+"px":this.defaultHeight*s+"px",this.inputBoxElement.style.width=r.width?r.width*s+"px":this.defautWidth*s+"px",this.selectedAnnotation=t,this.previousText=this.selectedAnnotation.dynamicText,this.selectedAnnotation.dynamicText="",this.inputBoxElement.style.borderColor=this.selectedAnnotation.strokeColor,this.inputBoxElement.style.color=this.selectedAnnotation.fontColor,this.inputBoxElement.style.background=this.selectedAnnotation.fillColor,!0===this.selectedAnnotation.font.isBold&&(this.inputBoxElement.style.fontWeight="bold"),!0===this.selectedAnnotation.font.isItalic&&(this.inputBoxElement.style.fontStyle="italic"),!0===this.selectedAnnotation.font.isUnderline&&(this.inputBoxElement.style.textDecoration="underline"),!0===this.selectedAnnotation.font.isStrikeout&&(this.inputBoxElement.style.textDecoration="line-through"),this.pdfViewer.enableRtl?(this.inputBoxElement.style.textAlign="right",this.inputBoxElement.style.direction="rtl"):this.selectedAnnotation.textAlign&&(this.inputBoxElement.style.textAlign=this.selectedAnnotation.textAlign),this.inputBoxElement.style.fontSize=this.selectedAnnotation.fontSize*s+"px",this.inputBoxElement.style.fontFamily=this.selectedAnnotation.fontFamily,this.pdfViewer.drawing.clearSelectorLayer(i),this.pdfViewer.nodePropertyChange(this.selectedAnnotation,{})}this.pdfViewerBase.isMixedSizeDocument&&(this.inputBoxElement.style.left=e.x+a.offsetLeft+"px"),this.pdfViewer.annotation.freeTextAnnotationModule.isFreeTextValueChange=!1,this.pdfViewer.freeTextSettings.enableAutoFit&&this.autoFitFreeText(e.x,e.y),o.appendChild(this.inputBoxElement),!this.pdfViewer.freeTextSettings.enableAutoFit&&this.defaultHeight*s<this.inputBoxElement.scrollHeight&&parseInt(this.inputBoxElement.style.height)<this.inputBoxElement.scrollHeight&&(this.inputBoxElement.style.height=this.inputBoxElement.scrollHeight+"px",n&&this.updateFreeTextAnnotationSize(!0)),this.isInuptBoxInFocus=!0,this.inputBoxElement.focus(),!0!==this.isNewFreeTextAnnot&&this.inputBoxElement.value!==this.defaultText||(this.inputBoxElement.select(),this.pdfViewerBase.isFreeTextSelected=!0)},e.prototype.applyFreetextStyles=function(e,t){this.inputBoxElement.style.height=this.defaultHeight*e+"px",this.inputBoxElement.style.width=this.defautWidth*e+"px",this.inputBoxElement.style.borderWidth=this.borderWidth*e+"px",this.inputBoxElement.style.fontSize=this.fontSize*e+"px",this.inputBoxElement.style.fontFamily=this.fontFamily,this.inputBoxElement.readOnly=sf.base.isNullOrUndefined(t)?this.isReadonly:t},e.prototype.copySelectedText=function(){if(null!==window.getSelection()){this.selectedText=window.getSelection().toString();var e=document.createElement("textarea");e.contentEditable="true",e.textContent=this.selectedText,e.style.position="fixed",document.body.appendChild(e),e.select();try{document.execCommand("copy")}catch(e){console.warn("Copy to clipboard failed.",e)}finally{e&&document.body.removeChild(e)}}},e.prototype.pasteSelectedText=function(e){if(""!==this.selectedText&&e){var t=e.value;e.value=t.slice(0,this.selectionStart)+this.selectedText+t.slice(this.selectionEnd,t.length)}var i=event;this.onKeyDownInputBox(i)},e.prototype.cutSelectedText=function(e){if(null!==window.getSelection()){var t=e.value;this.selectedText=window.getSelection().toString(),e.value=t.slice(0,e.selectionStart)+t.slice(e.selectionEnd);var i=document.createElement("textarea");i.contentEditable="true",i.textContent=this.selectedText,i.style.position="fixed",document.body.appendChild(i),i.select();try{document.execCommand("cut")}catch(e){console.warn("Copy to clipboard failed.",e)}finally{i&&document.body.removeChild(i)}}},e.prototype.saveImportedFreeTextAnnotations=function(e,t){var i=e;if(i.AnnotType){var n=null;if(i.VertexPoints){n=[];for(var o=0;o<i.VertexPoints.length;o++){var a={x:i.VertexPoints[o].X,y:i.VertexPoints[o].Y};n.push(a)}}i.AnnotationSettings=i.AnnotationSettings?i.AnnotationSettings:this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.freeTextSettings);var s;i.allowedInteractions=this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(i);var r=sf.base.isNullOrUndefined(i.Bounds.X)?i.Bounds.x:i.Bounds.X,l=sf.base.isNullOrUndefined(i.Bounds.Y)?i.Bounds.y:i.Bounds.Y,d=i.Bounds.Width?i.Bounds.Width:i.Bounds.width,h=i.Bounds.Height?i.Bounds.Height:i.Bounds.height;s={author:i.Author,allowedInteractions:i.allowedInteractions,modifiedDate:i.ModifiedDate,subject:i.Subject,id:"freetext",rotateAngle:i.Rotate,dynamicText:i.MarkupText,strokeColor:i.StrokeColor,thickness:i.Thickness,fillColor:i.FillColor,bounds:{x:r,y:l,left:r,top:l,width:d,height:h,right:i.Bounds.Right,bottom:i.Bounds.Bottom},annotName:i.AnnotName,shapeAnnotationType:"FreeText",pageIndex:t,opacity:i.Opacity,fontColor:i.FontColor,fontSize:i.FontSize,fontFamily:i.FontFamily,notes:i.MarkupText,textAlign:i.TextAlign,comments:this.pdfViewer.annotationModule.getAnnotationComments(i.Comments,i,i.Author),review:{state:i.State,stateModel:i.StateModel,modifiedDate:i.ModifiedDate,author:i.Author},font:{isBold:i.Font.Bold,isItalic:i.Font.Italic,isStrikeout:i.Font.Strikeout,isUnderline:i.Font.Underline},annotationSelectorSettings:this.getSettings(i),annotationSettings:i.AnnotationSettings,customData:this.pdfViewer.annotation.getCustomData(i),isPrint:i.IsPrint,isCommentLock:i.IsCommentLock,isReadonly:i.IsReadonly},this.pdfViewer.annotationModule.storeAnnotations(t,s,"_annotations_freetext")}},e.prototype.updateFreeTextAnnotationCollections=function(e,t){var i=e;if(i.AnnotType){var n=null;if(i.VertexPoints){n=[];for(var o=0;o<i.VertexPoints.length;o++){var a={x:i.VertexPoints[o].X,y:i.VertexPoints[o].Y};n.push(a)}}i.AnnotationSettings=i.AnnotationSettings?i.AnnotationSettings:this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.freeTextSettings),i.IsLocked&&(i.AnnotationSettings.isLock=i.IsLocked),i.allowedInteractions=this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(i);var s=i.Bounds.X?i.Bounds.X:i.Bounds.x,r=i.Bounds.Y?i.Bounds.Y:i.Bounds.y,l=i.Bounds.Width?i.Bounds.Width:i.Bounds.width,d=i.Bounds.Height?i.Bounds.Height:i.Bounds.height;return{author:i.Author,allowedInteractions:i.allowedInteractions,modifiedDate:i.ModifiedDate,subject:i.Subject,id:"freetext",rotateAngle:i.Rotate,dynamicText:i.MarkupText,strokeColor:i.StrokeColor,thickness:i.Thickness,fillColor:i.FillColor,bounds:{x:s,y:r,left:s,top:r,width:l,height:d,right:i.Bounds.Right,bottom:i.Bounds.Bottom},annotationId:i.AnnotName,shapeAnnotationType:"FreeText",pageIndex:t,opacity:i.Opacity,fontColor:i.FontColor,fontSize:i.FontSize,fontFamily:i.FontFamily,notes:i.MarkupText,comments:this.pdfViewer.annotationModule.getAnnotationComments(i.Comments,i,i.Author),review:{state:i.State,stateModel:i.StateModel,modifiedDate:i.ModifiedDate,author:i.Author},font:{isBold:i.Font.Bold,isItalic:i.Font.Italic,isStrikeout:i.Font.Strikeout,isUnderline:i.Font.Underline},pageNumber:t,annotationSettings:i.AnnotationSettings,isCommentLock:i.IsCommentLock}}},e.prototype.updateAddAnnotationDetails=function(e,t){t=e?e.offset?e.offset:{x:1,y:1}:(e={offset:{x:1,y:1},pageNumber:0,width:void 0,height:void 0}).offset;var i=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),n=this.pdfViewer.annotation.createGUID(),o=e.fontStyle?e.fontStyle:L.None,a=this.pdfViewer.freeTextSettings.annotationSelectorSettings?this.pdfViewer.freeTextSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,s=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.freeTextSettings),r=this.pdfViewer.freeTextSettings.allowedInteractions?this.pdfViewer.freeTextSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions;s.isLock=!!e.isLock&&e.isLock,s.minHeight=e.minHeight?e.minHeight:0,s.minWidth=e.minWidth?e.minWidth:0,s.maxWidth=e.maxWidth?e.maxWidth:0,s.maxHeight=e.maxHeight?e.maxHeight:0,e.width=e.width?e.width:150,e.height=e.height?e.height:24.6;var l=[],d={AllowedInteractions:e.allowedInteractions?e.allowedInteractions:r,AnnotName:n,AnnotType:"freeText",AnnotationFlags:"Default",AnnotationIntent:null,AnnotationSelectorSettings:e.annotationSelectorSettings?e.annotationSelectorSettings:a,AnnotationSettings:s,Author:e.author?e.author:"Guest",Border:{HorizontalRadius:0,VerticalRadius:0,Width:e.borderWidth?e.borderWidth:1},BorderColor:{IsEmpty:!0,B:255,Blue:1,C:0,G:255},Bounds:{X:t.x,Y:t.y,Width:e.width,Height:e.height,Left:t.x,Top:t.y,Right:t.x+e.width,Bottom:t.y+e.height},CalloutLines:null,Color:{IsEmpty:!1,B:51,Blue:.2,C:0,G:255},Comments:null,CreatedDate:i,CustomData:e.customData?e.customData:null,ExistingCustomData:null,FillColor:e.fillColor?e.fillColor:"#ffffff00",Flatten:!1,FlattenPopups:!1,Font:{Bold:o==L.Bold,Italic:o==L.Italic,Strikeout:o==L.Strikethrough,Underline:o==L.Underline},FontColor:e.fontColor?e.fontColor:"#000",FontFamily:e.fontFamily?e.fontFamily:"Helvetica",FontSize:e.fontSize?e.fontSize:16,FreeTextAnnotationType:"Text Box",InnerColor:null,IsCommentLock:!1,IsLock:!!e.isLock&&e.isLock,IsPrint:null===e.isPrint||void 0===e.isPrint||e.isPrint,Layer:null,LineEndingStyle:"OpenArrow",Location:null,MarkupText:e.defaultText?e.defaultText:"Type Here",ModifiedDate:i,Name:n,Opacity:e.opacity?e.opacity:1,Page:null,PageTags:null,ReviewHistory:null,Rotate:0,IsReadonly:!!e.isReadonly&&e.isReadonly,State:"Unmarked",StateModel:"None",StrokeColor:e.borderColor?e.borderColor:"#ffffff00",Subject:"Text Box",Text:e.defaultText?e.defaultText:"Type Here",TextAlign:e.textAlignment?e.textAlignment:"Left",TextMarkupColor:null,Thickness:e.borderWidth?e.borderWidth:1};return l[0]=d,{freeTextAnnotation:l}},e.prototype.getPaddingValues=function(e){var t=5;return[4,t=e/16*(t-2)]},e}(),qe=function(){function e(e,t){this.pdfViewer=e,this.pdfViewerBase=t,this.inputBoxElement=document.createElement("input"),this.inputBoxElement.addEventListener("focusout",this.onFocusOutInputBox.bind(this)),this.maxHeight=24.6,this.maxWidth=151,this.fontSize=16,this.isInFocus=!1,this.inputBoxElement.style.position="absolute",this.inputBoxElement.style.fontFamily="Helvetica"}return e.prototype.editLabel=function(e,t){var i=this.pdfViewerBase.currentPageNumber-1,n=this.pdfViewerBase.getElement("_pageDiv_"+i),o=this.pdfViewerBase.getZoomFactor();if(this.inputBoxElement.value=t.labelContent,this.inputBoxElement.select(),t.labelContent="",this.pdfViewer.nodePropertyChange(t,{}),this.inputBoxElement.style.left=e.x*o+"px",this.inputBoxElement.style.top=e.y*o+"px",this.inputBoxElement.style.maxHeight=this.maxHeight*o+"px",this.inputBoxElement.style.maxWidth=this.maxWidth*o+"px",this.inputBoxElement.style.fontSize=this.fontSize*o+"px",this.inputBoxElement.style.textAlign="center",t&&t.wrapper&&t.wrapper.bounds){this.inputBoxElement.style.width=t.wrapper.bounds.width?t.wrapper.bounds.width/2*o+1+"px":this.maxWidth*o+"px";var a=parseFloat(this.inputBoxElement.style.width);a=a>this.maxWidth*o?this.maxWidth*o:a,t.wrapper.bounds.left&&(this.inputBoxElement.style.left=(t.wrapper.bounds.left+t.wrapper.bounds.width/2-a/(2*o))*o+"px"),t.wrapper.bounds.top&&("Line"===t.shapeAnnotationType||"LineWidthArrowHead"===t.shapeAnnotationType||"Distance"===t.shapeAnnotationType||"Polygon"===t.shapeAnnotationType?this.inputBoxElement.style.top=(t.wrapper.bounds.top+t.wrapper.bounds.height/2-this.maxHeight)*o+"px":this.inputBoxElement.style.top=(t.wrapper.bounds.top+t.wrapper.bounds.height/2-this.maxHeight/2)*o+"px"),this.inputBoxElement.maxLength=t.labelMaxLength,this.inputBoxElement.fontFamily=t.fontFamily,this.inputBoxElement.style.color=t.fontColor,this.inputBoxElement.style.border="1px solid #ffffff00",this.inputBoxElement.style.padding="2px",this.inputBoxElement.style.background=t.labelFillColor}n.appendChild(this.inputBoxElement),this.isInFocus=!0,this.inputBoxElement.focus()},e.prototype.onFocusOutInputBox=function(){var e=this.pdfViewerBase.currentPageNumber-1,t=this.pdfViewerBase.getElement("_pageDiv_"+e),i=parseFloat(this.inputBoxElement.style.height),n=parseFloat(this.inputBoxElement.style.width);this.isInFocus=!1;var o=this.pdfViewer.selectedItems.annotations[0];o&&(n=(n-1)/this.pdfViewerBase.getZoomFactor(),i=(i-1)/this.pdfViewerBase.getZoomFactor(),o.labelContent=this.inputBoxElement.value,o.notes=this.inputBoxElement.value,"Rectangle"===o.shapeAnnotationType||"Ellipse"===o.shapeAnnotationType||"Line"===o.shapeAnnotationType||"LineWidthArrowHead"===o.shapeAnnotationType?this.pdfViewer.annotation.shapeAnnotationModule.modifyInCollection("labelContent",e,o):"Radius"===o.shapeAnnotationType&&o.measureType&&this.pdfViewer.annotation.measureAnnotationModule.modifyInCollection("labelContent",e,o),this.pdfViewer.nodePropertyChange(o,{}),this.pdfViewer.renderSelector(o.pageIndex,this.pdfViewer.annotationSelectorSettings)),t.removeChild(this.inputBoxElement);var a=document.getElementById(this.pdfViewer.dataId+"_annotationCanvas_"+e);this.pdfViewer.renderDrawing(a,e)},e.prototype.calculateLabelBounds=function(e,t){var i={};if(e){var n=0,o=0,a=0;void 0===t&&(t=this.pdfViewerBase.currentPageNumber-1);var s=this.pdfViewerBase.pageSize[t].rotation;e.width&&(a=(a=e.width/2)>0&&a<151?a:151),e.left&&(o=e.left+e.width/2-a/2),e.top&&(n=e.top+e.height/2-12.3),i=1===s||3===s?{left:o,top:n,width:a-24.6+a/2,height:49.2+a,right:0,bottom:0}:{left:o,top:n,width:a,height:24.6,right:0,bottom:0}}return i},e.prototype.calculateLabelBoundsFromLoadedDocument=function(e){var t={};if(e){var i=0,n=0,o=0;e.Width&&(o=(o=e.Width/2)>0&&o<151?o:151),e.Left&&(n=e.Left+e.Width/2-o/2),e.Top&&(i=e.Top+e.Height/2-12.3),t={left:n,top:i,width:o,height:24.6,right:0,bottom:0}}return t},e}(),Ue=function(){function e(e,t){this.isUndoRedoAction=!1,this.isUndoAction=!1,this.annotationSelected=!0,this.isShapeCopied=!1,this.actionCollection=[],this.redoCollection=[],this.isPopupNoteVisible=!1,this.undoCommentsElement=[],this.redoCommentsElement=[],this.selectAnnotationId=null,this.isAnnotationSelected=!1,this.annotationPageIndex=null,this.previousIndex=null,this.overlappedAnnotations=[],this.overlappedCollections=[],this.isFormFieldShape=!1,this.removedAnnotationCollection=[],this.oldProperties=null,this.pdfViewer=e,this.pdfViewerBase=t,this.pdfViewer.enableTextMarkupAnnotation&&(this.textMarkupAnnotationModule=new Ge(this.pdfViewer,this.pdfViewerBase)),this.pdfViewer.enableShapeAnnotation&&(this.shapeAnnotationModule=new Qe(this.pdfViewer,this.pdfViewerBase)),this.pdfViewer.enableMeasureAnnotation&&(this.measureAnnotationModule=new Ke(this.pdfViewer,this.pdfViewerBase)),this.stampAnnotationModule=new $e(this.pdfViewer,this.pdfViewerBase),this.stickyNotesAnnotationModule=new et(this.pdfViewer,this.pdfViewerBase),this.freeTextAnnotationModule=new Ze(this.pdfViewer,this.pdfViewerBase),this.inputElementModule=new qe(this.pdfViewer,this.pdfViewerBase),this.inkAnnotationModule=new tt(this.pdfViewer,this.pdfViewerBase)}return e.prototype.setAnnotationMode=function(e,t,i,n){var o=this.pdfViewer.allowServerDataBinding;if(this.pdfViewer.enableServerDataBinding(!1),"None"!==e&&this.triggerAnnotationUnselectEvent(),"None"===e)this.clearAnnotationMode();else if("Highlight"===e||"Strikethrough"===e||"Underline"===e)this.textMarkupAnnotationModule&&(this.textMarkupAnnotationModule.isSelectionMaintained=!1,this.textMarkupAnnotationModule.drawTextMarkupAnnotations(e.toString()));else if("Line"===e||"Arrow"===e||"Rectangle"===e||"Circle"===e||"Polygon"===e)this.shapeAnnotationModule&&this.shapeAnnotationModule.setAnnotationType(e);else if("Distance"===e||"Perimeter"===e||"Area"===e||"Radius"===e||"Volume"===e)this.measureAnnotationModule&&this.measureAnnotationModule.setAnnotationType(e);else if("FreeText"===e&&this.freeTextAnnotationModule)this.freeTextAnnotationModule.setAnnotationType("FreeText"),this.freeTextAnnotationModule.isNewFreeTextAnnot=!0,this.freeTextAnnotationModule.isNewAddedAnnot=!0;else if("HandWrittenSignature"===e)this.pdfViewerBase.signatureModule.setAnnotationMode();else if("Initial"===e)this.pdfViewerBase.signatureModule.setInitialMode();else if("Ink"===e)this.inkAnnotationModule.setAnnotationMode();else if("StickyNotes"===e){this.pdfViewerBase.isCommentIconAdded=!0,this.pdfViewerBase.isAddComment=!0;var a=document.getElementById(this.pdfViewer.dataId+"_pageDiv_"+(this.pdfViewerBase.currentPageNumber-1));a&&a.addEventListener("mousedown",this.pdfViewer.annotationModule.stickyNotesAnnotationModule.drawIcons.bind(this))}else if("Stamp"===e)if(this.pdfViewer.annotation.stampAnnotationModule.isStampAddMode=!0,this.pdfViewer.annotationModule.stampAnnotationModule.isStampAnnotSelected=!0,this.pdfViewerBase.stampAdded=!0,t){var s=j[t];this.pdfViewerBase.isDynamicStamp=!0,this.stampAnnotationModule.retrieveDynamicStampAnnotation(s)}else if(i){s=W[i];this.pdfViewerBase.isDynamicStamp=!1,this.stampAnnotationModule.retrievestampAnnotation(s)}else if(n){s=Z[n];this.pdfViewerBase.isDynamicStamp=!1,this.stampAnnotationModule.retrievestampAnnotation(s)}this.pdfViewer.enableServerDataBinding(o,!0),this.pdfViewerBase.initiateTextSelection()},e.prototype.deleteAnnotationById=function(e){e&&(this.annotationSelected=!1,e&&this.pdfViewer.annotations&&this.pdfViewer.annotations.length>0&&this.pdfViewer.annotations[0].annotName&&e!==this.pdfViewer.annotations[0].annotName&&this.selectAnnotation(e),this.deleteAnnotation())},e.prototype.clearAnnotationMode=function(){if(this.textMarkupAnnotationModule&&(this.textMarkupAnnotationModule.isTextMarkupAnnotationMode=!1),this.freeTextAnnotationModule&&(this.freeTextAnnotationModule.isNewFreeTextAnnot=!1,this.freeTextAnnotationModule.isNewAddedAnnot=!1),this.pdfViewerBase.isTextMarkupAnnotationModule()&&(this.pdfViewer.annotation.textMarkupAnnotationModule.currentTextMarkupAddMode=""),this.pdfViewerBase.isShapeAnnotationModule()&&(this.pdfViewer.annotation.shapeAnnotationModule.currentAnnotationMode=""),this.pdfViewerBase.isCalibrateAnnotationModule()&&(this.pdfViewer.annotation.measureAnnotationModule.currentAnnotationMode=""),this.pdfViewer.annotationModule.inkAnnotationModule){var e=parseInt(this.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber);this.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(e)}},e.prototype.deleteAnnotation=function(){this.textMarkupAnnotationModule&&this.textMarkupAnnotationModule.deleteTextMarkupAnnotation();var e=this.pdfViewer.selectedItems.annotations[0];if(e){var t=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_formfields"),i=[];if(V=JSON.parse(t)){for(var n=0;n<V.length;n++)V[n].uniqueID==e.id&&(V[n].Value="",V[n].FontFamily=""),i.push(V[n]);window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_formfields",JSON.stringify(i))}}var o=!1,a=!1;if(this.pdfViewer.selectedItems.annotations.length>0){var s=this.pdfViewer.selectedItems.annotations[0],r=s.shapeAnnotationType;if("Path"===r||"SignatureField"===s.formFieldAnnotationType||"InitialField"===s.formFieldAnnotationType||"HandWrittenSignature"===r||"SignatureText"===r||"SignatureImage"===r)(g=document.getElementById(s.id))&&g.disabled&&(a=!0);if(s.annotationSettings&&(o=s.annotationSettings.isLock)&&this.checkAllowedInteractions("Delete",s)&&(o=!1),!o&&!a){var l=s.pageIndex,d=s.shapeAnnotationType,h=void 0;"Line"===d||"LineWidthArrowHead"===d||"Polygon"===d||"Ellipse"===d||"Rectangle"===d||"Radius"===d||"Distance"===d?(sf.base.isNullOrUndefined(s.measureType)||""===s.measureType?(this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(s,"shape"),this.updateImportAnnotationCollection(s,l,"shapeAnnotation")):(this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(s,"measure"),this.updateImportAnnotationCollection(s,l,"measureShapeAnnotation")),h=this.modifyInCollections(s,"delete")):"FreeText"===d?(this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(s,"FreeText","delete"),h=this.modifyInCollections(s,"delete"),this.updateImportAnnotationCollection(s,l,"freeTextAnnotation")):"HandWrittenSignature"===d||"SignatureImage"===d||"SignatureText"===d?h=this.modifyInCollections(s,"delete"):"Ink"===d?(this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(s,"Ink","delete"),h=this.modifyInCollections(s,"delete"),this.updateImportAnnotationCollection(s,l,"signatureInkAnnotation")):(h=this.pdfViewer.selectedItems.annotations[0],this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(h,h.shapeAnnotationType,"delete"),this.pdfViewer.annotation.stampAnnotationModule.updateSessionStorage(s,null,"delete")),"StickyNotes"===d&&this.updateImportAnnotationCollection(s,l,"stickyNotesAnnotation"),this.updateImportAnnotationCollection(s,l,"stampAnnotations"),this.pdfViewer.annotation.addAction(l,null,s,"Delete","",h,s);var p=void 0;""!==s.annotName?p=document.getElementById(s.annotName):h&&""!==h.annotName&&(p=document.getElementById(h.annotName)),p&&this.pdfViewer._dotnetInstance.invokeMethodAsync("RemoveCommentsCollection",s.annotName,l);var c=this.pdfViewer.selectedItems.annotations[0],u=c.annotName,f=this.getAnnotationType(c.shapeAnnotationType,c.measureType);if("Path"===d||"SignatureField"===c.formFieldAnnotationType||"InitialField"===c.formFieldAnnotationType||"HandWrittenSignature"===d||"SignatureText"===d||"SignatureImage"===d){var g=document.getElementById(c.id),m=document.getElementById(c.id+"_html_element");null!==g||sf.base.isNullOrUndefined(m)||(g=m.children[0].children[0]),g&&g.classList.contains("e-pdfviewer-signatureformfields-signature")&&(g.className="e-pdfviewer-signatureformfields",g.style.pointerEvents="",g.parentElement.style.pointerEvents="",this.pdfViewer.formFieldsModule.updateDataInSession(g,""));for(var w=this.pdfViewer.retrieveFormFields(),y=0;y<w.length;y++)c.id===w[y].id&&(w[y].value="",w[y].signatureType="")}this.updateAnnotationCollection(s);var S=this.pdfViewer.nameTable[s.id.split("_")[0]];if(null!=S&&("SignatureField"===S.formFieldAnnotationType||"InitialField"===S.formFieldAnnotationType||"SignatureField"===S.annotName||"InitialField"===S.annotName)){S.wrapper.children.splice(S.wrapper.children.indexOf(s.wrapper.children[0]),1);var v=this.pdfViewer.formFieldCollections.findIndex((function(e){return e.id===s.id})),b=void 0;v>-1&&(b=this.pdfViewer.formFieldCollections[v].name);t=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_formfields");for(var V=JSON.parse(t),A=(i=[],0);A<this.pdfViewer.formFieldCollections.length;A++){if(b===this.pdfViewer.formFieldCollections[A].name&&b===V[A].FieldName){var x=this.pdfViewer.formFieldCollections[A];this.pdfViewer.fireFormFieldPropertiesChangeEvent("formFieldPropertiesChange",x,x.pageIndex,!0,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,x.value,""),V[A].Value="";var C=this.getAnnotationsFromCollections(x.id);h=this.modifyInCollections(C,"delete"),this.pdfViewer.annotation.addAction(C.pageIndex,null,C,"Delete","",h,C),this.updateInputFieldDivElement(C);var I=this.pdfViewer.nameTable[C.id];I.wrapper.children.splice(I.wrapper.children.indexOf(C.wrapper.children[0]),1),this.pdfViewer.remove(C)}i.push(V[A])}window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_formfields",JSON.stringify(i))}if(this.pdfViewer.remove(s),this.pdfViewer.renderDrawing(),this.pdfViewer.clearSelection(l),this.pdfViewerBase.updateDocumentEditedProperty(!0),this.pdfViewerBase.tool=null,this.pdfViewer.tool=null,"Path"===c.shapeAnnotationType||"HandWrittenSignature"===c.shapeAnnotationType||"SignatureText"===c.shapeAnnotationType||"SignatureImage"===c.shapeAnnotationType){var k={left:c.bounds.x,top:c.bounds.y,width:c.bounds.width,height:c.bounds.height};this.pdfViewer.fireSignatureRemove(l,c.signatureName,c.shapeAnnotationType,k)}else this.pdfViewer.annotationModule&&this.pdfViewer.fireAnnotationRemove(l,u,f,c.bounds);this.pdfViewer.textSelectionModule&&this.pdfViewer.textSelectionModule.enableTextSelectionMode()}}this.updateToolbar(!0),this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.annotationToolbarModule&&!o&&(this.pdfViewer.toolbarModule.annotationToolbarModule.selectAnnotationDeleteItem(!1,!0),this.pdfViewer.toolbarModule.annotationToolbarModule.enableTextMarkupAnnotationPropertiesTools(!1))},e.prototype.getAnnotationsFromCollections=function(e){var t=this.pdfViewer.annotations;if(t&&e)for(var i=0;i<t.length;i++)if(t[i].id===e)return t[i]},e.prototype.updateInputFieldDivElement=function(e){var t=document.getElementById(e.id),i=document.getElementById(e.id+"_html_element");null!==t||sf.base.isNullOrUndefined(i)||(t=i.children[0].children[0]),(t&&t.classList.contains("e-pdfviewer-signatureformfields-signature")||t.classList.contains("e-pdfviewer-signatureformfields"))&&(t.className="e-pdfviewer-signatureformfields",t.style.pointerEvents="",t.parentElement.style.pointerEvents="",this.pdfViewer.formFieldsModule.updateDataInSession(t,""))},e.prototype.storeAnnotationCollections=function(e,t){if(this.isFormFieldShape){var i=this.checkFormDesignCollection(e);(n=S(e)).formFieldId=e.annotName,n.pageNumber=t,delete n.annotName,e.id&&(n.uniqueKey=e.id,delete n.id),i.isExisting?this.pdfViewer.formFieldCollection.splice(i.position,0,n):this.pdfViewer.formFieldCollection.push(n)}else{var n;i=this.checkAnnotationCollection(e);(n=S(e)).annotationId=e.annotName,n.pageNumber=t,delete n.annotName,"stamp"===e.shapeAnnotationType&&(n.uniqueKey=e.randomId,delete n.randomId),"sticky"!==e.shapeAnnotationType&&"StickyNotes"!==e.shapeAnnotationType||(n.uniqueKey=e.annotName),e.id&&(n.uniqueKey=e.id,delete n.id),n.customData&&e.customData&&JSON.stringify(n.customData)!==JSON.stringify(e.customData)&&(n.customData=e.customData),i.isExisting?this.pdfViewer.annotationCollection.splice(i.position,0,n):this.pdfViewer.annotationCollection.push(n)}},e.prototype.checkFormDesignCollection=function(e){var t=this.pdfViewer.formFieldCollection;if(t&&e)for(var i=0;i<t.length;i++)if(t[i].formFieldId===e.annotName)return this.pdfViewer.formFieldCollection.splice(i,1),{isExisting:!0,position:i};return{isExisting:!1,position:null}},e.prototype.getCustomData=function(e){var t;return e.ExistingCustomData&&!e.CustomData?t=JSON.parse(e.ExistingCustomData):null===e.CustomData?("sticky"===e.shapeAnnotationType&&(t=this.pdfViewer.stickyNotesSettings.customData),"Stamp"===e.shapeAnnotationType&&(t=this.pdfViewer.stampSettings.customData),"FreeText"===e.shapeAnnotationType&&(t=this.pdfViewer.freeTextSettings.customData),"shape"===e.id&&(t=this.getShapeData(e.ShapeAnnotationType,e.subject)),"measure"===e.id&&(t=this.getMeasureData(e.Subject)),"textMarkup"===e.shapeAnnotationType&&(t=this.getTextMarkupData(e.subject)),"Ink"===e.shapeAnnotationType&&(t=this.pdfViewer.inkAnnotationSettings.customData)):t=e.CustomData,t},e.prototype.getShapeData=function(e,t){var i;return"Line"===e&&"Arrow"!==t&&this.pdfViewer.lineSettings.customData?i=this.pdfViewer.lineSettings.customData:"LineWidthArrowHead"!==e&&"Arrow"!==t||!this.pdfViewer.arrowSettings.customData?"Rectangle"!==e&&"Square"!==e||!this.pdfViewer.rectangleSettings.customData?"Ellipse"!==e&&"Circle"!==e||!this.pdfViewer.circleSettings.customData?"Polygon"===e&&this.pdfViewer.polygonSettings.customData?i=this.pdfViewer.polygonSettings.customData:this.pdfViewer.annotationSettings.customData&&(i=this.pdfViewer.annotationSettings.customData):i=this.pdfViewer.circleSettings.customData:i=this.pdfViewer.rectangleSettings.customData:i=this.pdfViewer.arrowSettings.customData,i},e.prototype.getMeasureData=function(e){var t;return"Distance"!==e&&"Distance calculation"!==e||!this.pdfViewer.distanceSettings.customData?"Line"!==e&&"Perimeter calculation"!==e||!this.pdfViewer.lineSettings.customData?"Polygon"!==e&&"Area calculation"!==e&&"Volume calculation"!==e||!this.pdfViewer.polygonSettings.customData?"Radius"!==e&&"Radius calculation"!==e||!this.pdfViewer.radiusSettings.customData?this.pdfViewer.annotationSettings.customData&&(t=this.pdfViewer.annotationSettings.customData):t=this.pdfViewer.radiusSettings.customData:t=this.pdfViewer.polygonSettings.customData:t=this.pdfViewer.lineSettings.customData:t=this.pdfViewer.distanceSettings.customData,t},e.prototype.getTextMarkupData=function(e){var t;return"Highlight"===e&&this.pdfViewer.highlightSettings.customData?t=this.pdfViewer.highlightSettings.customData:"Underline"===e&&this.pdfViewer.underlineSettings.customData?t=this.pdfViewer.underlineSettings.customData:"Strikethrough"===e&&this.pdfViewer.strikethroughSettings.customData?t=this.pdfViewer.strikethroughSettings.customData:this.pdfViewer.annotationSettings.customData&&(t=this.pdfViewer.annotationSettings.customData),t},e.prototype.getData=function(e){var t;return"FreeText"===e&&this.pdfViewer.freeTextSettings.customData?t=this.pdfViewer.freeTextSettings.customData:"image"!==e&&"Stamp"!==e||!this.pdfViewer.stampSettings.customData?"sticky"===e&&this.pdfViewer.stickyNotesSettings.customData?t=this.pdfViewer.stickyNotesSettings.customData:this.pdfViewer.annotationSettings.customData&&(t=this.pdfViewer.annotationSettings.customData):t=this.pdfViewer.stampSettings.customData,t},e.prototype.clearAnnotationStorage=function(){if(Math.round(JSON.stringify(window.sessionStorage).length/1024)>4500){for(var e=window.sessionStorage.length,t=[],i=0;i<e;i++)window.sessionStorage.key(i)&&window.sessionStorage.key(i).split("_")[3]&&"annotations"===window.sessionStorage.key(i).split("_")[3]&&(this.pdfViewerBase.annotationStorage[window.sessionStorage.key(i)]=window.sessionStorage.getItem(window.sessionStorage.key(i)),t.push(window.sessionStorage.key(i)));if(t)for(i=0;i<t.length;i++)window.sessionStorage.removeItem(t[i])}},e.prototype.checkAnnotationCollection=function(e){var t=this.pdfViewer.annotationCollection;if(t&&e)for(var i=0;i<t.length;i++)if(t[i].annotationId===e.annotName)return this.pdfViewer.annotationCollection.splice(i,1),{isExisting:!0,position:i};return{isExisting:!1,position:null}},e.prototype.updateAnnotationCollection=function(e){var t=this.pdfViewer.annotationCollection;if(t&&e)for(var i=0;i<t.length;i++)if(t[i].annotationId===e.annotName){this.removedAnnotationCollection.push(t[i]),this.pdfViewer.annotationCollection.splice(i,1);break}},e.prototype.updateImportAnnotationCollection=function(e,t,i){if(this.pdfViewerBase.isImportAction&&this.pdfViewerBase.importedAnnotation&&this.pdfViewerBase.importedAnnotation[t]){var n=this.pdfViewerBase.importedAnnotation[t];if(n[i])for(var o=0;o<n[i].length;o++)if(e.annotName===n[i][o].AnnotName||e.annotName===n[i][o].annotName){this.pdfViewerBase.importedAnnotation[t][i].splice(o,1);break}}var a=this.pdfViewerBase.documentAnnotationCollections;if(a&&a[t]){var s=a[t];if(s&&s[i])for(o=0;o<s[i].length;o++)if(e.annotName===s[i][o].AnnotName){this.pdfViewerBase.documentAnnotationCollections[t][i].splice(o,1);break}}},e.prototype.selectAnnotation=function(e,t){var n,o;if("object"===i(e)&&(o=(n=e).annotationId,n=this.getAnnotationsFromAnnotationCollections(o)),"string"==typeof e&&(n=this.getAnnotationsFromAnnotationCollections(e),o=e),n){var a,s=n.pageNumber;a=this.findRenderPageList(s);var r=this.pdfViewer.annotationSelectorSettings;if(n&&s>=0){if("textMarkup"===n.shapeAnnotationType)if(n.rect||n.bounds){var l=((d=this.pdfViewerBase.pageSize[s].top*this.pdfViewerBase.getZoomFactor()+this.getAnnotationTop(n)*this.pdfViewerBase.getZoomFactor())-20).toString();this.pdfViewerBase.viewerContainer.scrollTop=parseInt(l),this.pdfViewerBase.viewerContainer.scrollLeft=this.getAnnotationLeft(n)*this.pdfViewerBase.getZoomFactor()}else this.pdfViewer.navigation&&this.pdfViewer.navigation.goToPage(s+1);else if(n.bounds){var d=this.pdfViewerBase.pageSize[s].top*this.pdfViewerBase.getZoomFactor()+n.bounds.top*this.pdfViewerBase.getZoomFactor(),h=n.bounds.left*this.pdfViewerBase.getZoomFactor();if("Ink"===n.shapeAnnotationType&&(d=this.pdfViewerBase.pageSize[s].top*this.pdfViewerBase.getZoomFactor()+n.bounds.y*this.pdfViewerBase.getZoomFactor(),h=n.bounds.x*this.pdfViewerBase.getZoomFactor()),t){var p=(d-20).toString();this.pdfViewerBase.viewerContainer.scrollTop=parseInt(p),this.pdfViewerBase.viewerContainer.scrollLeft=h}}else this.pdfViewer.navigation&&this.pdfViewer.navigation.goToPage(s+1);if(a){if(this.previousIndex&&this.pdfViewer.clearSelection(this.previousIndex),this.pdfViewer.clearSelection(s),this.previousIndex=s,"textMarkup"===n.shapeAnnotationType){this.pdfViewer.annotationModule.textMarkupAnnotationModule.clearCurrentAnnotationSelection(s,!0);var c=this.pdfViewerBase.getElement("_annotationCanvas_"+s),u=this.getTextMarkupAnnotations(s,n);u&&(this.textMarkupAnnotationModule.currentTextMarkupAnnotation=null,this.textMarkupAnnotationModule.isSelectedAnnotation=!0,this.textMarkupAnnotationModule.showHideDropletDiv(!0),this.textMarkupAnnotationModule.annotationClickPosition=null,this.textMarkupAnnotationModule.selectAnnotation(u,c,s,null,!0),this.textMarkupAnnotationModule.currentTextMarkupAnnotation=u,this.textMarkupAnnotationModule.selectTextMarkupCurrentPage=s,this.textMarkupAnnotationModule.enableAnnotationPropertiesTool(!0),this.textMarkupAnnotationModule.isSelectedAnnotation=!1,this.pdfViewer.toolbarModule&&this.pdfViewer.enableAnnotationToolbar&&(this.pdfViewer.toolbarModule.annotationToolbarModule.isToolbarHidden=!0))}else"stamp"===n.shapeAnnotationType||"stamp"===n.ShapeAnnotationType?(this.pdfViewer.select([n.uniqueKey],r),this.pdfViewer.annotation.onAnnotationMouseDown()):"sticky"===n.shapeAnnotationType||"sticky"===n.ShapeAnnotationType?(this.pdfViewer.select([n.annotationId],r),this.pdfViewer.annotation.onAnnotationMouseDown()):(this.pdfViewer.select([n.uniqueKey],r),this.pdfViewer.annotation.onAnnotationMouseDown());var f=document.getElementById(this.pdfViewer.dataId+"_commantPanel");if(f&&"block"===f.style.display){var g=document.getElementById(o);g&&(g.classList.contains("e-pv-comments-border")||g.firstChildElement&&g.firstChildElement.click())}}else this.selectAnnotationId=o,this.isAnnotationSelected=!0,this.annotationPageIndex=s}}},e.prototype.showCommentsPanelInBlazor=function(){if(this.pdfViewer.enableCommentPanel){var e=0,t=0,i=document.getElementById(this.pdfViewer.dataId+"_commantPanel");if(i&&"none"===i.style.display){this.pdfViewer.enableRtl&&(i.style.right="",i.style.left="0px"),i.style.display="block",this.pdfViewer.enableAnnotationToolbar&&this.pdfViewer._dotnetInstance.invokeMethodAsync("ShowAnnotationToolbar",null),this.pdfViewerBase.navigationPane.commentPanelResizer=document.getElementById(this.pdfViewer.dataId+"_commentPanelResizer"),this.pdfViewer.enableRtl&&(this.pdfViewerBase.navigationPane.commentPanelResizer.className="e-pv-comment-panel-resizer e-left"),this.pdfViewerBase.navigationPane.commentPanelResizer.style.display="block";var n=document.getElementById(this.pdfViewer.dataId+"_resize"),o=document.getElementById("AnnotationToolbar");this.pdfViewer.toolbar&&(e=this.pdfViewer.toolbar.toolbarElement.getBoundingClientRect().height),o&&(t=o.getBoundingClientRect().height),i.style.top=e+t+"px",i&&i.clientHeight&&""===n.style.top&&(n.style.top=i.clientHeight/2+"px");var a=document.getElementById(this.pdfViewer.dataId+"_viewerContainer"),s=document.getElementById(this.pdfViewer.dataId+"_pageViewContainer");a&&(this.pdfViewer.enableRtl?a.style.left=this.pdfViewerBase.navigationPane.getViewerContainerRight()+"px":a.style.right=this.pdfViewerBase.navigationPane.getViewerContainerRight()+"px",a.style.width=this.pdfViewer.element.clientWidth-this.pdfViewerBase.navigationPane.getViewerContainerLeft()-this.pdfViewerBase.navigationPane.getViewerContainerRight()+"px",s.style.width=a.offsetWidth-this.pdfViewerBase.navigationPane.getViewerContainerScrollbarWidth()+"px"),this.pdfViewerBase.updateZoomValue()}}},e.prototype.clearSelection=function(){if(this.textMarkupAnnotationModule&&this.textMarkupAnnotationModule.currentTextMarkupAnnotation)this.textMarkupAnnotationModule.clearCurrentSelectedAnnotation(),this.textMarkupAnnotationModule.clearCurrentAnnotationSelection(this.textMarkupAnnotationModule.selectTextMarkupCurrentPage);else if(this.pdfViewer.selectedItems&&this.pdfViewer.selectedItems.annotations[0]){var e=this.pdfViewer.selectedItems.annotations[0];this.pdfViewer.clearSelection(e.pageIndex)}else this.pdfViewer.clearSelection(this.pdfViewer.currentPageNumber-1)},e.prototype.getAnnotationTop=function(e){return e.bounds?e.bounds[0].Top?e.bounds[0].Top:e.bounds[0].top:e.rect?e.rect.Top?e.rect.Top:e.rect.top:0},e.prototype.getAnnotationLeft=function(e){return e.rect?e.rect.Left?e.rect.Left:e.rect.left:e.bounds[0].Left?e.bounds[0].Left:e.bounds[0].left},e.prototype.selectAnnotationFromCodeBehind=function(){if(this.isAnnotationSelected&&this.selectAnnotationId){var e=this.getAnnotationsFromAnnotationCollections(this.selectAnnotationId),t=this.selectAnnotationId,i=e.pageNumber,n=this.pdfViewer.annotationSelectorSettings;if(e&&this.annotationPageIndex>=0&&this.annotationPageIndex===i){if(this.previousIndex&&this.pdfViewer.clearSelection(this.previousIndex),this.pdfViewer.clearSelection(i),this.previousIndex=i,"textMarkup"===e.shapeAnnotationType){this.pdfViewer.annotationModule.textMarkupAnnotationModule.clearCurrentAnnotationSelection(i,!0);var o=this.pdfViewerBase.getElement("_annotationCanvas_"+i),a=this.getTextMarkupAnnotations(i,e);a&&(this.textMarkupAnnotationModule.currentTextMarkupAnnotation=null,this.textMarkupAnnotationModule.isSelectedAnnotation=!0,this.textMarkupAnnotationModule.showHideDropletDiv(!0),this.textMarkupAnnotationModule.annotationClickPosition=null,this.textMarkupAnnotationModule.selectAnnotation(a,o,i),this.textMarkupAnnotationModule.currentTextMarkupAnnotation=a,this.textMarkupAnnotationModule.selectTextMarkupCurrentPage=i,this.textMarkupAnnotationModule.enableAnnotationPropertiesTool(!0),this.textMarkupAnnotationModule.isSelectedAnnotation=!1,this.pdfViewer.toolbarModule&&this.pdfViewer.enableAnnotationToolbar&&(this.pdfViewer.toolbarModule.annotationToolbarModule.isToolbarHidden=!0))}else"stamp"===e.shapeAnnotationType||"stamp"===e.ShapeAnnotationType?(this.pdfViewer.select([e.uniqueKey],n),this.pdfViewer.annotation.onAnnotationMouseDown()):"sticky"===e.shapeAnnotationType||"sticky"===e.ShapeAnnotationType?(this.pdfViewer.select([e.annotationId],n),this.pdfViewer.annotation.onAnnotationMouseDown()):e.uniqueKey?(this.pdfViewer.select([e.uniqueKey],n),this.pdfViewer.annotation.onAnnotationMouseDown()):(this.pdfViewer.select([e.annotationId],n),this.pdfViewer.annotation.onAnnotationMouseDown());var s=document.getElementById(this.pdfViewer.dataId+"_commantPanel");if(s&&"block"===s.style.display){var r=document.getElementById(t);r&&(r.classList.contains("e-pv-comments-border")||r.firstElementChild&&r.firstElementChild.click())}}this.isAnnotationSelected=!1,this.selectAnnotationId=null,this.annotationPageIndex=null}},e.prototype.findRenderPageList=function(e){var t=!1,i=this.pdfViewerBase.renderedPagesList;if(i)for(var n=0;n<i.length;n++)if(i[n]===e)return t=!0;return t},e.prototype.getPageNumberFromAnnotationCollections=function(e){var t=this.pdfViewer.annotations;if(e){if("textMarkup"===e.shapeAnnotationType)return e.pageNumber;if(t)for(var i=0;i<t.length;i++)if(t[i].annotName===e.annotationId)return t[i].pageIndex}},e.prototype.getAnnotationsFromAnnotationCollections=function(e){var t=this.pdfViewer.annotationCollection;if(t&&e)for(var i=0;i<t.length;i++)if(t[i].annotationId===e)return t[i];0===this.pdfViewer.selectedItems.annotations.length&&this.pdfViewer.selectedItems.annotations.push(this.pdfViewer.nameTable[e])},e.prototype.getTextMarkupAnnotations=function(e,t){var i=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_textMarkup");if(this.pdfViewerBase.isStorageExceed&&(i=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_textMarkup"]),!i)return null;var n=JSON.parse(i),o=this.getPageCollection(n,e);if(n[o]){for(var a=0;a<n[o].annotations.length;a++)if(n[o].annotations[a].annotName===t.annotationId)return n[o].annotations[a];return null}},e.prototype.getAnnotationType=function(e,t){var i;if(""===t||sf.base.isNullOrUndefined(t))switch(e){case"Line":i="Line";break;case"LineWidthArrowHead":i="Arrow";break;case"Rectangle":i="Rectangle";break;case"Ellipse":i="Circle";break;case"Polygon":i="Polygon";break;case"Stamp":i="Stamp";break;case"Image":i="Image";break;case"FreeText":i="FreeText";break;case"Ink":i="Ink";break;case"StickyNotes":i="StickyNotes"}else switch(t){case"Distance":i="Distance";break;case"Perimeter":i="Perimeter";break;case"Area":i="Area";break;case"Radius":i="Radius";break;case"Volume":i="Volume"}return i},e.prototype.getAnnotationIndex=function(e,t){for(var i=this.pdfViewer.drawing.getPageObjects(e),n=null,o=0;o<i.length;o++)if(i[o].id===t){n=o;break}return n},e.prototype.initializeCollection=function(){this.actionCollection=[],this.redoCollection=[],this.pdfViewerBase.customStampCollection=[],this.popupNote||this.createNote()},e.prototype.addAction=function(e,t,i,n,o,a,s){var r={pageIndex:e,index:t,annotation:i,action:n,modifiedProperty:o,undoElement:a,redoElement:s};this.actionCollection.push(r),this.updateToolbar()},e.prototype.undo=function(){var e=this.actionCollection.pop(),t=this.pdfViewer.nameTable[e.annotation.id];if(e){var i=e.annotation.shapeAnnotationType;switch(this.isUndoRedoAction=!0,this.isUndoAction=!0,e.action){case"Text Markup Added":case"Text Markup Deleted":this.textMarkupAnnotationModule&&this.textMarkupAnnotationModule.undoTextMarkupAction(e.annotation,e.pageIndex,e.index,e.action);break;case"Text Markup Property modified":this.textMarkupAnnotationModule&&(e.annotation=this.textMarkupAnnotationModule.undoRedoPropertyChange(e.annotation,e.pageIndex,e.index,e.modifiedProperty,!0));break;case"Drag":case"Resize":g(e.annotation)?this.pdfViewer.nodePropertyChange(e.annotation,{bounds:e.undoElement.bounds,vertexPoints:e.undoElement.vertexPoints,leaderHeight:e.undoElement.leaderHeight}):this.pdfViewer.nodePropertyChange(e.annotation,{bounds:e.undoElement.bounds}),"Distance"!==e.annotation.measureType&&"Perimeter"!==e.annotation.measureType&&"Area"!==e.annotation.measureType&&"Radius"!==e.annotation.measureType&&"Volume"!==e.annotation.measureType||(this.pdfViewer.nodePropertyChange(e.annotation,{notes:e.undoElement.notes}),this.updateCalibrateValues(e.annotation)),this.pdfViewer.clearSelection(this.pdfViewerBase.activeElements.activePageID),this.pdfViewer.select([e.annotation.id]),"Line"!==e.annotation.shapeAnnotationType&&"Rectangle"!==e.annotation.shapeAnnotationType&&"Ellipse"!==e.annotation.shapeAnnotationType&&"Polygon"!==e.annotation.shapeAnnotationType&&"LineWidthArrowHead"!==e.annotation.shapeAnnotationType&&"Radius"!==e.annotation.shapeAnnotationType&&"FreeText"!==e.annotation.shapeAnnotationType&&"HandWrittenSignature"!==e.annotation.shapeAnnotationType&&"SignatureText"!==e.annotation.shapeAnnotationType&&"SignatureImage"!==e.annotation.shapeAnnotationType&&"Ink"!==e.annotation.shapeAnnotationType||this.modifyInCollections(e.annotation,"bounds");break;case"Addition":var n=!1;if("Line"===i||"LineWidthArrowHead"===i||"Polygon"===i||"Ellipse"===i||"Rectangle"===i||"Radius"===i||"Distance"===i){""===e.annotation.measureType||sf.base.isNullOrUndefined(e.annotation.measureType)?this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(e.annotation,"shape"):this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(e.annotation,"measure"),n=!0;var o=e.annotation,a=o.wrapper?o.wrapper:null;a&&a.bounds&&(e.annotation.bounds=a.bounds),e.duplicate=this.modifyInCollections(e.annotation,"delete")}"Stamp"!==i&&"Image"!==i||(this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(e.annotation,e.annotation.shapeAnnotationType,"delete"),this.stampAnnotationModule.updateSessionStorage(e.annotation,null,"delete"),n=!0),"FreeText"!==i&&"HandWrittenSignature"!==i&&"SignatureImage"!==i&&"SignatureText"!==i&&"Ink"!==i||(n=!0,this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(e.annotation,e.annotation.shapeAnnotationType,"delete"),e.duplicate=this.modifyInCollections(e.annotation,"delete")),n||this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(e.annotation,e.annotation.shapeAnnotationType,"delete"),this.pdfViewer.clearSelection(this.pdfViewerBase.activeElements.activePageID),this.pdfViewer.remove(e.annotation),this.pdfViewer.renderDrawing(null,e.annotation.pageIndex),document.getElementById(e.annotation.annotName)&&this.pdfViewer._dotnetInstance.invokeMethodAsync("RemoveCommentsCollection",e.annotation.annotName,e.annotation.pageIndex),this.pdfViewer.annotation.undoCommentsElement.pop();break;case"Delete":"Line"!==i&&"LineWidthArrowHead"!==i&&"Polygon"!==i&&"Ellipse"!==i&&"Rectangle"!==i&&"Radius"!==i&&"Distance"!==i||(""===e.annotation.measureType||sf.base.isNullOrUndefined(e.annotation.measureType)?(i="shape",this.shapeAnnotationModule.addInCollection(e.annotation.pageIndex,e.undoElement)):(i="shape_measure",this.measureAnnotationModule.addInCollection(e.annotation.pageIndex,e.undoElement))),"Stamp"===i||"Image"===i?this.stampAnnotationModule.updateDeleteItems(e.annotation.pageIndex,e.annotation):"FreeText"===i?this.freeTextAnnotationModule.addInCollection(e.annotation.pageIndex,e.undoElement):"Ink"===i?this.inkAnnotationModule.addInCollection(e.annotation.pageIndex,e.undoElement):"StickyNotes"===i&&this.stickyNotesAnnotationModule.addInCollection(e.annotation.pageIndex,e.undoElement);var s=this.pdfViewer.add(e.annotation);("FreeText"===i||s.enableShapeLabel)&&s&&this.pdfViewer.nodePropertyChange(s,{});var r=this.pdfViewer.nameTable[e.annotation.id.split("_")[0]];null==r||"SignatureField"!==r.formFieldAnnotationType&&"InitialField"!==r.formFieldAnnotationType||(r.wrapper.children.push(e.annotation.wrapper.children[0]),"SignatureText"===e.annotation.shapeAnnotationType&&r.wrapper.children.push(e.annotation.wrapper.children[1])),this.pdfViewer.renderDrawing(null,e.annotation.pageIndex),this.pdfViewer.annotationModule.stickyNotesAnnotationModule.addAnnotationComments(e.annotation.pageIndex,i);break;case"stampOpacity":this.pdfViewer.nodePropertyChange(e.annotation,{opacity:e.undoElement.opacity}),this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(e.annotation,null,!0),e.annotation.modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();break;case"Shape Stroke":this.pdfViewer.nodePropertyChange(e.annotation,{strokeColor:e.undoElement.strokeColor}),this.modifyInCollections(e.annotation,"stroke"),this.pdfViewer.renderDrawing();break;case"Shape Fill":this.pdfViewer.nodePropertyChange(e.annotation,{fillColor:e.undoElement.fillColor}),this.modifyInCollections(e.annotation,"fill"),this.pdfViewer.renderDrawing();break;case"Shape Opacity":this.pdfViewer.nodePropertyChange(e.annotation,{opacity:e.undoElement.opacity}),"StickyNotes"===e.annotation.shapeAnnotationType?(this.stickyNotesAnnotationModule.updateOpacityValue(e.annotation),this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(e.annotation,null,!0),e.annotation.modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime()):this.modifyInCollections(e.annotation,"opacity"),this.pdfViewer.renderDrawing();break;case"Shape Thickness":this.pdfViewer.nodePropertyChange(e.annotation,{thickness:e.undoElement.thickness}),this.modifyInCollections(e.annotation,"thickness"),this.pdfViewer.renderDrawing();break;case"Line properties change":this.pdfViewer.nodePropertyChange(e.annotation,{fillColor:e.undoElement.fillColor,borderDashArray:e.undoElement.borderDashArray,borderStyle:e.undoElement.borderStyle,strokeColor:e.undoElement.strokeColor,opacity:e.undoElement.opacity,thickness:e.undoElement.thickness,sourceDecoraterShapes:this.getArrowType(e.undoElement.lineHeadStart),taregetDecoraterShapes:this.getArrowType(e.undoElement.lineHeadEnd)}),this.updateCollectionForLineProperty(e.annotation),this.pdfViewer.renderDrawing();break;case"Text Property Added":e.annotation=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.undoAction(e.annotation,e.action,e.undoElement),this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(e.annotation,null,!0),e.annotation.modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();break;case"Comments Property Added":case"Status Property Added":case"Comments Reply Deleted":e.annotation=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.undoAction(e.annotation,e.action,e.undoElement);break;case"dynamicText Change":this.pdfViewer.annotation.freeTextAnnotationModule.isFreeTextValueChange=!0,t.dynamicText=e.undoElement.dynamicText,this.pdfViewer.selectedItems.annotations[0]&&(this.pdfViewer.selectedItems.annotations[0].dynamicText=e.undoElement.dynamicText),this.pdfViewer.annotationModule.stickyNotesAnnotationModule.undoAction(t,e.action,e.undoElement),this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(t,null,!0),this.modifyInCollections(t,"dynamicText"),this.pdfViewer.selectedItems.annotations[0]?this.pdfViewer.nodePropertyChange(this.pdfViewer.selectedItems.annotations[0],{}):this.pdfViewer.nodePropertyChange(t,{}),this.pdfViewer.annotation.freeTextAnnotationModule.isFreeTextValueChange=!1,this.pdfViewer.clearSelection(this.pdfViewerBase.activeElements.activePageID);break;case"fontColor":this.pdfViewer.nodePropertyChange(e.annotation,{fontColor:e.undoElement.fontColor}),this.modifyInCollections(e.annotation,"fontColor"),this.pdfViewer.renderDrawing();break;case"fontSize":this.pdfViewer.nodePropertyChange(e.annotation,{fontSize:e.undoElement.fontSize}),this.modifyInCollections(e.annotation,"fontSize"),this.pdfViewer.renderDrawing();break;case"fontFamily":this.pdfViewer.nodePropertyChange(e.annotation,{fontFamily:e.undoElement.fontFamily}),this.modifyInCollections(e.annotation,"fontFamily"),this.pdfViewer.renderDrawing();break;case"textAlign":this.pdfViewer.nodePropertyChange(e.annotation,{textAlign:e.undoElement.textAlign}),this.modifyInCollections(e.annotation,"textAlign"),this.pdfViewer.renderDrawing();break;case"textPropertiesChange":this.pdfViewer.nodePropertyChange(e.annotation,{font:e.undoElement.font}),this.modifyInCollections(e.annotation,"textPropertiesChange"),this.pdfViewer.renderDrawing();break;case"Rotate":this.pdfViewer.nodePropertyChange(e.annotation.annotations[0],{bounds:e.undoElement.bounds,rotateAngle:e.undoElement.rotateAngle}),this.modifyInCollections(e.annotation.annotations[0],"bounds"),this.pdfViewer.renderDrawing();break;case"FormField Value Change":document.getElementById(e.annotation.id+"_html_element").children[0].children[0].className="e-pdfviewer-signatureformfields";var l=this.pdfViewer.nameTable[e.annotation.id.split("_")[0]],d=this.pdfViewer.nameTable[e.annotation.id];l.wrapper.children.splice(l.wrapper.children.indexOf(d.wrapper.children[0]),1),"SignatureText"===e.annotation.shapeAnnotationType&&l.wrapper.children.splice(l.wrapper.children.indexOf(d.wrapper.children[1]),1)}this.redoCollection.push(e),this.updateToolbar(),this.isUndoRedoAction=!1,this.isUndoAction=!1}},e.prototype.redo=function(){var e=this.redoCollection.pop(),t=this.pdfViewer.nameTable[e.annotation.id];if(e){var i=e.annotation.shapeAnnotationType;switch(this.isUndoRedoAction=!0,e.action){case"Text Markup Property modified":this.textMarkupAnnotationModule&&(e.annotation=this.textMarkupAnnotationModule.undoRedoPropertyChange(e.annotation,e.pageIndex,e.index,e.modifiedProperty));break;case"Text Markup Added":case"Text Markup Deleted":this.textMarkupAnnotationModule&&this.textMarkupAnnotationModule.redoTextMarkupAction(e.annotation,e.pageIndex,e.index,e.action);break;case"Drag":case"Resize":g(e.annotation)?this.pdfViewer.nodePropertyChange(t,{bounds:e.redoElement.bounds,vertexPoints:e.redoElement.vertexPoints,leaderHeight:e.redoElement.leaderHeight}):this.pdfViewer.nodePropertyChange(t,{bounds:e.redoElement.bounds}),"Distance"!==e.annotation.measureType&&"Perimeter"!==e.annotation.measureType&&"Area"!==e.annotation.measureType&&"Radius"!==e.annotation.measureType&&"Volume"!==e.annotation.measureType||(this.pdfViewer.nodePropertyChange(t,{notes:e.redoElement.notes}),this.updateCalibrateValues(t)),this.pdfViewer.clearSelection(this.pdfViewerBase.activeElements.activePageID),this.pdfViewer.select([t.id]),"Line"!==e.annotation.shapeAnnotationType&&"Rectangle"!==e.annotation.shapeAnnotationType&&"Ellipse"!==e.annotation.shapeAnnotationType&&"Polygon"!==e.annotation.shapeAnnotationType&&"LineWidthArrowHead"!==e.annotation.shapeAnnotationType&&"Radius"!==e.annotation.shapeAnnotationType&&"FreeText"!==e.annotation.shapeAnnotationType&&"HandWrittenSignature"!==e.annotation.shapeAnnotationType&&"SignatureText"!==e.annotation.shapeAnnotationType&&"SignatureImage"!==e.annotation.shapeAnnotationType&&"Ink"!==e.annotation.shapeAnnotationType||this.modifyInCollections(t,"bounds");break;case"Addition":"Line"!==i&&"LineWidthArrowHead"!==i&&"Polygon"!==i&&"Ellipse"!==i&&"Rectangle"!==i&&"Radius"!==i&&"Distance"!==i||(""===e.annotation.measureType||sf.base.isNullOrUndefined(e.annotation.measureType)?(i="shape",this.shapeAnnotationModule.addInCollection(e.annotation.pageIndex,e.duplicate)):(i="shape_measure",this.measureAnnotationModule.addInCollection(e.annotation.pageIndex,e.duplicate))),"FreeText"===i&&this.freeTextAnnotationModule.addInCollection(e.annotation.pageIndex,e.duplicate),"Stamp"!==i&&"Image"!==i||this.stampAnnotationModule.updateDeleteItems(e.annotation.pageIndex,e.redoElement),"HandWrittenSignature"!==i&&"SignatureText"!==i&&"SignatureImage"!==i||this.pdfViewerBase.signatureModule.addInCollection(e.annotation.pageIndex,e.duplicate),"Ink"===i&&this.inkAnnotationModule.addInCollection(e.annotation.pageIndex,e.duplicate);var n=this.pdfViewer.add(e.annotation);this.pdfViewer.select([e.annotation.id]),("FreeText"===i||n.enableShapeLabel)&&n&&this.pdfViewer.nodePropertyChange(n,{}),this.pdfViewer.renderDrawing(null,e.annotation.pageIndex),"sticky"===i||"StickyNotes"===i||"Stamp"===i||"Image"===i?this.pdfViewer.annotation.undoCommentsElement.push(e.redoElement):this.pdfViewer.annotation.undoCommentsElement.push(e.duplicate),this.pdfViewer.annotationModule.stickyNotesAnnotationModule.addAnnotationComments(e.annotation.pageIndex,i);break;case"Delete":var o=!1,a=e.annotation.shapeAnnotationType;"Line"!==i&&"LineWidthArrowHead"!==i&&"Polygon"!==i&&"Ellipse"!==i&&"Rectangle"!==i&&"Radius"!==i&&"Distance"!==i||(a=""===e.annotation.measureType||sf.base.isNullOrUndefined(e.annotation.measureType)?"shape":"measure",this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(e.annotation,a,"delete"),this.modifyInCollections(e.annotation,"delete"),o=!0),"Stamp"!==i&&"Image"!==i||(this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(e.annotation,a,"delete"),this.stampAnnotationModule.updateSessionStorage(e.annotation,null,"delete"),o=!0),"FreeText"!==i&&"HandWrittenSignature"!==i&&"SignatureText"!==i&&"SignatureImage"!==i||(this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(e.annotation,a,"delete"),this.modifyInCollections(e.annotation,"delete")),o||this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(e.annotation,a,"delete");var s=this.pdfViewer.nameTable[e.annotation.id.split("_")[0]];null==s||"SignatureField"!==s.formFieldAnnotationType&&"InitialField"!==s.formFieldAnnotationType||(s.wrapper.children.splice(s.wrapper.children.indexOf(e.annotation.wrapper.children[0]),1),"SignatureText"===e.annotation.shapeAnnotationType&&s.wrapper.children.splice(s.wrapper.children.indexOf(e.annotation.wrapper.children[1]),1)),this.pdfViewer.clearSelection(e.annotation.pageIndex),this.pdfViewer.remove(e.annotation),this.pdfViewer.renderDrawing(null,e.annotation.pageIndex),document.getElementById(e.annotation.annotName)&&this.pdfViewer._dotnetInstance.invokeMethodAsync("RemoveCommentsCollection",e.annotation.annotName,e.annotation.pageIndex);break;case"stampOpacity":this.pdfViewer.nodePropertyChange(t,{opacity:e.redoElement.opacity}),this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(t,null,!0);break;case"Shape Stroke":this.pdfViewer.nodePropertyChange(t,{strokeColor:e.redoElement.strokeColor}),this.modifyInCollections(t,"stroke"),this.pdfViewer.renderDrawing();break;case"Shape Fill":this.pdfViewer.nodePropertyChange(t,{fillColor:e.redoElement.fillColor}),this.modifyInCollections(t,"fill"),this.pdfViewer.renderDrawing();break;case"Shape Opacity":this.pdfViewer.nodePropertyChange(t,{opacity:e.redoElement.opacity}),"StickyNotes"===e.annotation.shapeAnnotationType?(this.stickyNotesAnnotationModule.updateOpacityValue(t),this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(t,null,!0)):this.modifyInCollections(t,"opacity"),this.pdfViewer.renderDrawing();break;case"Shape Thickness":this.pdfViewer.nodePropertyChange(t,{thickness:e.redoElement.thickness}),this.modifyInCollections(t,"thickness"),this.pdfViewer.renderDrawing();break;case"Line properties change":this.pdfViewer.nodePropertyChange(t,{fillColor:e.redoElement.fillColor,strokeColor:e.redoElement.strokeColor,opacity:e.redoElement.opacity,thickness:e.redoElement.thickness,sourceDecoraterShapes:this.getArrowType(e.redoElement.lineHeadStart),taregetDecoraterShapes:this.getArrowType(e.redoElement.lineHeadEnd),borderDashArray:e.redoElement.borderDashArray,borderStyle:e.redoElement.borderStyle}),this.updateCollectionForLineProperty(t),this.pdfViewer.renderDrawing();break;case"Text Property Added":e.annotation=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.redoAction(e.annotation,e.action,e.undoElement),this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(e.annotation,null,!0);break;case"Comments Property Added":e.annotation=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.redoAction(e.annotation,e.action,e.undoElement);break;case"Status Property Added":case"Comments Reply Deleted":e.annotation=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.redoAction(e.annotation,e.action);break;case"dynamicText Change":this.pdfViewer.annotation.freeTextAnnotationModule.isFreeTextValueChange=!0,t.dynamicText=e.redoElement.dynamicText;var r=this.pdfViewer.selectedItems.annotations[0];r&&(r.dynamicText=e.redoElement.dynamicText,r.bounds.height=e.redoElement.bounds.height),this.pdfViewer.annotationModule.stickyNotesAnnotationModule.redoAction(t,e.action,e.undoElement),this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(t,null,!0),this.modifyInCollections(t,"dynamicText"),r?this.pdfViewer.nodePropertyChange(r,{}):this.pdfViewer.nodePropertyChange(t,{}),this.pdfViewer.annotation.freeTextAnnotationModule.isFreeTextValueChange=!1,this.pdfViewer.clearSelection(this.pdfViewerBase.activeElements.activePageID),this.pdfViewer.select([t.id]);break;case"fontColor":this.pdfViewer.nodePropertyChange(t,{fontColor:e.redoElement.fontColor}),this.modifyInCollections(t,"fontColor"),this.pdfViewer.renderDrawing();break;case"fontSize":this.pdfViewer.nodePropertyChange(t,{fontSize:e.redoElement.fontSize}),this.modifyInCollections(t,"fontSize"),this.pdfViewer.renderDrawing();break;case"textAlign":this.pdfViewer.nodePropertyChange(t,{textAlign:e.redoElement.textAlign}),this.modifyInCollections(t,"textAlign"),this.pdfViewer.renderDrawing();break;case"textPropertiesChange":this.pdfViewer.nodePropertyChange(t,{font:e.redoElement.font}),this.modifyInCollections(t,"textPropertiesChange"),this.pdfViewer.renderDrawing();break;case"Rotate":this.pdfViewer.nodePropertyChange(t.annotations[0],{bounds:e.redoElement.bounds,rotateAngle:e.redoElement.rotateAngle}),this.modifyInCollections(t.annotations[0],"bounds"),this.pdfViewer.renderDrawing();break;case"FormField Value Change":document.getElementById(e.annotation.id+"_html_element").children[0].children[0].className="e-pdfviewer-signatureformfields-signature";var l=this.pdfViewer.nameTable[e.annotation.id.split("_")[0]],d=this.pdfViewer.nameTable[e.annotation.id];l.wrapper.children.push(d.wrapper.children[0]),"SignatureText"===e.annotation.shapeAnnotationType&&l.wrapper.children.push(d.wrapper.children[1])}e.redoElement&&void 0!==e.redoElement.modifiedDate&&(e.annotation.modifiedDate=e.redoElement.modifiedDate),this.actionCollection.push(e),this.updateToolbar(),this.isUndoRedoAction=!1}},e.prototype.updateCollectionForLineProperty=function(e){this.modifyInCollections(e,"fill"),this.modifyInCollections(e,"stroke"),this.modifyInCollections(e,"opacity"),this.modifyInCollections(e,"thickness"),this.modifyInCollections(e,"dashArray"),this.modifyInCollections(e,"startArrow"),this.modifyInCollections(e,"endArrow")},e.prototype.updateToolbar=function(e){this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.updateUndoRedoButtons(),this.pdfViewer.viewerBase.blazorUIAdaptor.canUndoRedo(),this.actionCollection&&0==this.actionCollection.length?this.pdfViewerBase.updateDocumentEditedProperty(!1):this.pdfViewerBase.updateDocumentEditedProperty(!0),e&&this.pdfViewerBase.updateDocumentEditedProperty(!0)},e.prototype.createNote=function(){this.popupNote=sf.base.createElement("div",{id:this.pdfViewer.dataId+"_annotation_note",className:"e-pv-annotation-note",styles:"display:none"}),this.popupNoteAuthor=sf.base.createElement("div",{id:this.pdfViewer.dataId+"_annotation_note_author",className:"e-pv-annotation-note-author"}),this.popupNote.appendChild(this.popupNoteAuthor),this.popupNoteContent=sf.base.createElement("div",{id:this.pdfViewer.dataId+"_annotation_note_content",className:"e-pv-annotation-note-content"}),this.popupNote.appendChild(this.popupNoteContent),this.pdfViewerBase.mainContainer.appendChild(this.popupNote)},e.prototype.showPopupNote=function(e,t,i,n,o){var a=this.pdfViewerBase.mainContainer.getBoundingClientRect(),s=this.popupNote.getBoundingClientRect();i&&(this.popupNoteAuthor.textContent=i),this.popupNoteContent.textContent=n,"Highlight"===o?this.popupNote.style.backgroundColor="rgb(237, 232, 177)":"Underline"===o?this.popupNote.style.backgroundColor="rgb(187, 241, 191)":"Strikethrough"===o&&(this.popupNote.style.backgroundColor="rgb(242, 188, 207)"),this.popupNote.style.display="block";var r=e.pageY-a.top+5,l=e.pageX-a.left+5;l+s.width>a.width&&(l-=s.width),r+s.height>a.height&&(r-=s.height),this.popupNote.style.top=r+"px",this.popupNote.style.left=l+"px"},e.prototype.hidePopupNote=function(){this.popupNote&&(this.popupNote.style.display="none")},e.prototype.createTextMarkupPopup=function(){var e=this,t=this.pdfViewer.dataId;this.popupElement=sf.base.createElement("div",{id:t+"_popup_annotation_note",className:"e-pv-annotation-popup-menu",styles:"display:none"});var i=sf.base.createElement("div",{id:t+"_popup_header",className:"e-pv-annotation-popup-header"});this.authorPopupElement=sf.base.createElement("div",{id:t+"_popup_author",className:"e-pv-annotation-popup-author"}),i.appendChild(this.authorPopupElement);var n=sf.base.createElement("span",{id:t+"_popup_close",className:"e-pv-annotation-popup-close e-pv-icon"});i.appendChild(n),this.popupElement.appendChild(i),this.modifiedDateElement=sf.base.createElement("div",{id:t+"_popup_modified_time",className:"e-pv-annotation-modified-time"}),this.popupElement.appendChild(this.modifiedDateElement);var o=sf.base.createElement("div",{id:t+"_popup_content_container",className:"e-pv-annotation-popup-note-container"});this.noteContentElement=sf.base.createElement("div",{id:t+"_popup_content",className:"e-pv-annotation-popup-content"}),this.noteContentElement.contentEditable="true",o.appendChild(this.noteContentElement),this.popupElement.appendChild(o),this.pdfViewerBase.viewerContainer.appendChild(this.popupElement),n.addEventListener("click",this.saveClosePopupMenu.bind(this)),n.addEventListener("touchend",this.saveClosePopupMenu.bind(this)),this.popupElement.addEventListener("mousedown",this.onPopupElementMoveStart.bind(this)),this.popupElement.addEventListener("mousemove",this.onPopupElementMove.bind(this)),window.addEventListener("mouseup",this.onPopupElementMoveEnd.bind(this)),this.popupElement.addEventListener("touchstart",this.onPopupElementMoveStart.bind(this)),this.popupElement.addEventListener("touchmove",this.onPopupElementMove.bind(this)),window.addEventListener("touchend",this.onPopupElementMoveEnd.bind(this)),this.noteContentElement.addEventListener("mousedown",(function(){e.noteContentElement.focus()}))},e.prototype.onPopupElementMoveStart=function(e){if("touchstart"===e.type&&(e=e.changedTouches[0]),e.target.id!==this.noteContentElement.id||!e.target.contains(this.noteContentElement.childNodes[0])){this.isPopupMenuMoved=!0;var t=this.popupElement.getBoundingClientRect();this.clientX=e.clientX-t.left,this.clientY=e.clientY-t.top+this.pdfViewerBase.pageSize[this.currentAnnotPageNumber].top*this.pdfViewerBase.getZoomFactor()}},e.prototype.onPopupElementMove=function(e){if("touchmove"===e.type&&(e=e.changedTouches[0]),this.isPopupMenuMoved&&(e.target.id!==this.noteContentElement.id||!e.target.contains(this.noteContentElement.childNodes[0]))){var t=e.clientX-this.clientX+parseFloat(this.popupElement.style.left),i=e.clientY-this.clientY+parseFloat(this.popupElement.style.top);this.clientX=e.clientX,this.clientY=e.clientY;var n=this.popupElement.getBoundingClientRect(),o=document.getElementById(this.pdfViewer.dataId+"_pageDiv_"+this.currentAnnotPageNumber);t>parseFloat(o.style.left)&&t+n.width<parseFloat(o.style.left)+parseFloat(o.style.width)?this.popupElement.style.left=t+"px":this.popupElement.style.left=parseFloat(this.popupElement.style.left)+"px",i>parseFloat(o.style.top)&&i+n.height<parseFloat(o.style.top)+parseFloat(o.style.height)?this.popupElement.style.top=i+"px":this.popupElement.style.top=parseFloat(this.popupElement.style.top)+"px"}},e.prototype.onPopupElementMoveEnd=function(){this.isPopupMenuMoved=!1},e.prototype.saveClosePopupMenu=function(){this.textMarkupAnnotationModule&&this.textMarkupAnnotationModule.saveNoteContent(this.currentAnnotPageNumber,this.noteContentElement.innerText),this.closePopupMenu()},e.prototype.closePopupMenu=function(){this.popupElement&&(this.popupElement.parentElement.removeChild(this.popupElement),this.popupElement=null,this.isPopupNoteVisible=!1)},e.prototype.showAnnotationPopup=function(e){if(this.textMarkupAnnotationModule&&(this.currentAnnotPageNumber=this.getEventPageNumber(e),this.textMarkupAnnotationModule&&(e.target!==this.noteContentElement||e.target.contains(this.noteContentElement.childNodes[0]))&&(this.hidePopupNote(),!this.popupElement))){this.createTextMarkupPopup(),this.popupElement.style.display="block",this.authorPopupElement.textContent=this.textMarkupAnnotationModule.currentTextMarkupAnnotation.author,this.modifiedDateElement.textContent=this.getProperDate(this.textMarkupAnnotationModule.currentTextMarkupAnnotation.modifiedDate),this.noteContentElement.textContent=this.textMarkupAnnotationModule.currentTextMarkupAnnotation.note;var t=this.popupElement.getBoundingClientRect(),i=document.getElementById(this.pdfViewer.dataId+"_pageDiv_"+this.currentAnnotPageNumber),n=i.getBoundingClientRect(),o=e.clientY-n.top+parseFloat(i.style.top),a=e.clientX;a+t.width>parseFloat(i.style.left)+parseFloat(i.style.width)?this.popupElement.style.left=a-t.width+"px":this.popupElement.style.left=a+"px",o+t.height>parseFloat(i.style.top)+parseFloat(i.style.height)?this.popupElement.style.top=o-t.height+"px":this.popupElement.style.top=o+"px",this.isPopupNoteVisible=!0}},e.prototype.modifyOpacity=function(e,t){var i=this.pdfViewer.selectedItems.annotations[0],n=S(i),o=S(i),a=1;a=t?e:e.value/100,i.opacity!==a&&(o.opacity=a,this.pdfViewer.nodePropertyChange(i,{opacity:a}),"StickyNotes"===i.shapeAnnotationType?this.stickyNotesAnnotationModule.updateOpacityValue(i):this.modifyInCollections(i,"opacity"),"HandWrittenSignature"===i.shapeAnnotationType||"SignatureImage"===i.shapeAnnotationType||"SignatureText"===i.shapeAnnotationType?this.pdfViewer.fireSignaturePropertiesChange(i.pageIndex,i.signatureName,i.shapeAnnotationType,!1,!0,!1,n.opacity,o.opacity):this.triggerAnnotationPropChange(i,!1,!1,!1,!0),this.pdfViewer.annotation.addAction(i.pageIndex,null,i,"Shape Opacity","",n,o),this.pdfViewer.renderDrawing())},e.prototype.modifyFontColor=function(e){var t=this.pdfViewer.selectedItems.annotations[0],i=S(t),n=S(t);n.fontColor=e,this.pdfViewer.nodePropertyChange(t,{fontColor:e}),this.modifyInCollections(t,"fontColor"),this.triggerAnnotationPropChange(t,!1,!1,!1,!0),this.pdfViewer.annotation.addAction(t.pageIndex,null,t,"fontColor","",i,n),this.pdfViewer.renderDrawing()},e.prototype.modifyFontFamily=function(e){var t=this.pdfViewer.selectedItems.annotations[0],i=S(t),n=S(t);n.fontFamily=e,this.pdfViewer.freeTextSettings.enableAutoFit?this.updateFontFamilyRenderSize(t,e):this.pdfViewer.nodePropertyChange(t,{fontFamily:e}),this.modifyInCollections(t,"fontFamily"),this.triggerAnnotationPropChange(t,!1,!1,!1,!0),this.pdfViewer.annotation.addAction(t.pageIndex,null,t,"fontFamily","",i,n),this.pdfViewer.renderDrawing()},e.prototype.modifyFontSize=function(e){var t=this.pdfViewer.selectedItems.annotations[0],i=S(t),n=S(t);n.fontSize=e;var o=this.freeTextAnnotationModule,a=t.bounds.x,s=t.bounds.y;if(t.fontSize=e,o&&!o.isNewFreeTextAnnot&&""!==t.dynamicText){if(o.addInuptElemet({x:a,y:s},t),t){t.previousFontSize>e&&(o.inputBoxElement.style.height="auto",o.inputBoxElement.style.height=o.inputBoxElement.scrollHeight+5+"px");var r=parseFloat(o.inputBoxElement.style.height),l=parseFloat(o.inputBoxElement.style.width),d=this.pdfViewerBase.getZoomFactor();l/=d;var h=(r/=d)-t.bounds.height,p=void 0;h>0?p=(p=t.wrapper.offsetY+h/2)>0?p:void 0:(h=Math.abs(h),p=(p=t.wrapper.offsetY-h/2)>0?p:void 0);var c=l-t.bounds.width,u=void 0;c>0?u=(u=t.wrapper.offsetX+c/2)>0?u:void 0:(c=Math.abs(c),u=t.wrapper.offsetX-c/2),t.bounds.width=l,t.bounds.height=r,this.pdfViewer.nodePropertyChange(t,{fontSize:e,bounds:{width:t.bounds.width,height:t.bounds.height,y:p,x:u}}),this.pdfViewer.renderSelector(t.pageIndex,this.pdfViewer.annotationSelectorSettings),t.previousFontSize=e}this.modifyInCollections(t,"fontSize"),this.modifyInCollections(t,"bounds"),this.triggerAnnotationPropChange(t,!1,!1,!1,!0),this.pdfViewer.annotation.addAction(t.pageIndex,null,t,"fontSize","",i,n),this.pdfViewer.renderDrawing()}},e.prototype.modifyTextAlignment=function(e){var t=this.pdfViewer.selectedItems.annotations[0],i=S(t),n=S(t);n.textAlign=e,this.pdfViewer.nodePropertyChange(t,{textAlign:e}),this.modifyInCollections(t,"textAlign"),this.triggerAnnotationPropChange(t,!1,!1,!1,!0),this.pdfViewer.annotation.addAction(t.pageIndex,null,t,"textAlign","",i,n),this.pdfViewer.renderDrawing()},e.prototype.modifyTextProperties=function(e,t){var i=this.pdfViewer.selectedItems.annotations[0],n=S(i),o=S(i);"bold"===t?o.font.isBold=e.isBold:"italic"===t?o.font.isItalic=e.isItalic:"underline"===t?(o.font.isUnderline=e.isUnderline,o.font.isUnderline&&o.font.isStrikeout&&(o.font.isStrikeout=!1)):"strikeout"===t&&(o.font.isStrikeout=e.isStrikeout,o.font.isUnderline&&o.font.isStrikeout&&(o.font.isUnderline=!1)),this.pdfViewer.nodePropertyChange(i,{font:e}),this.modifyInCollections(i,"textPropertiesChange"),this.triggerAnnotationPropChange(i,!1,!1,!1,!0),this.pdfViewer.annotation.addAction(i.pageIndex,null,i,"textPropertiesChange","",n,o),this.pdfViewer.renderDrawing()},e.prototype.modifyThickness=function(e){var t=this.pdfViewer.selectedItems.annotations[0];if(t.thickness!==e){var i=S(t),n=S(t);n.thickness=e,this.pdfViewer.nodePropertyChange(t,{thickness:e}),this.modifyInCollections(t,"thickness"),"HandWrittenSignature"===t.shapeAnnotationType||"SignatureText"===t.shapeAnnotationType||"SignatureImage"===t.shapeAnnotationType?this.pdfViewer.fireSignaturePropertiesChange(t.pageIndex,t.signatureName,t.shapeAnnotationType,!1,!1,!0,i.thickness,n.thickness):this.triggerAnnotationPropChange(t,!1,!1,!0,!1),this.pdfViewer.annotation.addAction(t.pageIndex,null,t,"Shape Thickness","",i,n),this.pdfViewer.renderDrawing()}},e.prototype.modifyStrokeColor=function(e){var t=this.pdfViewer.selectedItems.annotations[0],i=S(t),n=S(t);n.strokeColor=e,this.pdfViewer.nodePropertyChange(t,{strokeColor:e}),this.modifyInCollections(t,"stroke"),"HandWrittenSignature"===t.shapeAnnotationType||"SignatureText"===t.shapeAnnotationType||"SignatureImage"===t.shapeAnnotationType?this.pdfViewer.fireSignaturePropertiesChange(t.pageIndex,t.signatureName,t.shapeAnnotationType,!0,!1,!1,i.strokeColor,n.strokeColor):this.triggerAnnotationPropChange(t,!1,!0,!1,!1),this.pdfViewer.annotation.addAction(t.pageIndex,null,t,"Shape Stroke","",i,n),this.pdfViewer.renderDrawing()},e.prototype.modifyFillColor=function(e){var t=this.pdfViewer.selectedItems.annotations[0],i=S(t),n=S(t);n.fillColor=e,this.pdfViewer.nodePropertyChange(this.pdfViewer.selectedItems.annotations[0],{fillColor:e}),this.modifyInCollections(t,"fill"),this.triggerAnnotationPropChange(t,!0,!1,!1,!1),this.pdfViewer.annotation.addAction(t.pageIndex,null,t,"Shape Fill","",i,n),this.pdfViewer.renderDrawing()},e.prototype.modifyDynamicTextValue=function(e,t){var i=null;if(i=this.pdfViewer.selectedItems.annotations.filter((function(e){return e.annotName===t}))[0]){var n=S(i),o=S(i);i.dynamicText=e,o.dynamicText=e,""===n.dynamicText&&(n.dynamicText=this.freeTextAnnotationModule.previousText),this.pdfViewer.nodePropertyChange(this.pdfViewer.selectedItems.annotations[0],{dynamicText:e}),this.pdfViewer.annotation.addAction(i.pageIndex,null,i,"dynamicText Change","",n,o),this.modifyInCollections(i,"dynamicText"),this.pdfViewer.renderDrawing()}},e.prototype.modifyInCollections=function(e,t){var i;return""===e.measureType||sf.base.isNullOrUndefined(e.measureType)?i="FreeText"===e.shapeAnnotationType?this.freeTextAnnotationModule.modifyInCollection(t,e.pageIndex,e):"HandWrittenSignature"===e.shapeAnnotationType||"SignatureText"===e.shapeAnnotationType||"SignatureImage"===e.shapeAnnotationType?this.pdfViewerBase.signatureModule.modifySignatureCollection(t,e.pageIndex,e):"Stamp"===e.shapeAnnotationType?this.stampAnnotationModule.modifyInCollection(t,e.pageIndex,e):"Ink"===e.shapeAnnotationType?this.inkAnnotationModule.modifySignatureInkCollection(t,e.pageIndex,e):this.shapeAnnotationModule.modifyInCollection(t,e.pageIndex,e):"Distance"!==e.measureType&&"Perimeter"!==e.measureType&&"Radius"!==e.measureType&&"Area"!==e.measureType&&"Volume"!==e.measureType||(i=this.measureAnnotationModule.modifyInCollection(t,e.pageIndex,e)),this.isUndoRedoAction?(this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(e,null,!0),this.isUndoAction&&(e.modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime())):"bounds"!==t&&this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(e),i},e.prototype.createPropertiesWindow=function(){var e,t=100*this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.opacity,i=this.getArrowString(this.pdfViewer.selectedItems.annotations[0].sourceDecoraterShapes),n=this.getArrowString(this.pdfViewer.selectedItems.annotations[0].taregetDecoraterShapes);parseInt(this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeDashArray)>=3?e="Dashed":"2"===this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeDashArray?e="Dotted":"0"===this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeDashArray&&(e="Solid"),this.pdfViewer._dotnetInstance.invokeMethodAsync("OpenPropertiesDialog",t,i,n,e)},e.prototype.updatePropertiesWindowInBlazor=function(){var e=document.querySelector("#"+this.pdfViewer.dataId+"_line_thickness"),t=document.querySelector("#"+this.pdfViewer.dataId+"_properties_fill_color_button"),i=document.querySelector("#"+this.pdfViewer.dataId+"_properties_stroke_color_button"),n=document.querySelector("#"+this.pdfViewer.dataId+"_properties_leader_length");e.value=this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeWidth,t.value=this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.fill,i.value=this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeColor,this.onStrokeColorChange(i.value),this.onFillColorChange(t.value),"Distance"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&(n.value=parseInt(this.pdfViewer.selectedItems.annotations[0].leaderHeight.toString())),"Line"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&(t.disabled=!0)},e.prototype.destroyPropertiesWindow=function(){this.strokeColorPicker&&(this.strokeColorPicker.destroy(),this.strokeColorPicker=null),this.fillColorPicker&&(this.fillColorPicker.destroy(),this.fillColorPicker=null),this.endArrowDropDown&&(this.endArrowDropDown.destroy(),this.endArrowDropDown=null),this.startArrowDropDown&&(this.startArrowDropDown.destroy(),this.startArrowDropDown=null),this.opacitySlider&&(this.opacitySlider.destroy(),this.opacitySlider=null),this.thicknessBox&&(this.thicknessBox.destroy(),this.thicknessBox=null),this.lineStyleDropDown&&(this.lineStyleDropDown.destroy(),this.lineStyleDropDown=null),this.leaderLengthBox&&(this.leaderLengthBox.destroy(),this.leaderLengthBox=null),this.propertiesDialog&&(this.propertiesDialog.destroy(),this.propertiesDialog=null);var e=this.pdfViewerBase.getElement("_properties_window");e&&e.parentElement.removeChild(e)},e.prototype.refreshColorPicker=function(e){e.setProperties({value:e.value},!0),e.refresh()},e.prototype.createContent=function(e){var t=sf.base.createElement("div",{className:"e-pv-properties-line-style-content"});return t.textContent=e,t},e.prototype.onStrokeDropDownBeforeOpen=function(){1===this.pdfViewer.selectedItems.annotations.length&&(this.strokeColorPicker.value=this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeColor),this.strokeColorPicker.refresh()},e.prototype.onFillDropDownBeforeOpen=function(){1===this.pdfViewer.selectedItems.annotations.length&&(this.fillColorPicker.value=this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeColor),this.fillColorPicker.refresh()},e.prototype.createColorPicker=function(e,t){var i=sf.base.createElement("input",{id:e+"_target"});document.body.appendChild(i);var n=new sf.inputs.ColorPicker({inline:!0,mode:"Palette",enableOpacity:!1,value:"#000000",showButtons:!1,modeSwitcher:!1,noColor:t});return this.pdfViewer.enableRtl&&(n.enableRtl=!0),n.appendTo(i),n},e.prototype.createDropDownButton=function(e,t,i){var n=new sf.splitbuttons.DropDownButton({iconCss:t+" e-pv-icon",target:i});return this.pdfViewer.enableRtl&&(n.enableRtl=!0),n.appendTo(e),n},e.prototype.updateColorInIcon=function(e,t){e.childNodes[0].style.borderBottomColor=t},e.prototype.onFillColorChange=function(e){var t=document.querySelector("#"+this.pdfViewer.dataId+"_properties_fill_color_button");"transparent"!==e&&(t.children[0].style.borderBottomColor=e)},e.prototype.onStrokeColorChange=function(e){var t=document.querySelector("#"+this.pdfViewer.dataId+"_properties_stroke_color_button");"transparent"!==e&&(t.children[0].style.borderBottomColor=e)},e.prototype.setThickness=function(e,t){this.selectedLineDashArray=e,"0"===e?this.selectedLineStyle="Solid":"2"!==e&&"3"!==e||(this.selectedLineStyle="Dashed")},e.prototype.createDropDownContent=function(e){var t=sf.base.createElement("div",{className:"e-pv-line-styles-content-container"}),i=sf.base.createElement("span",{className:"e-pv-line-styles-content",styles:"border-bottom-style:"+e});return t.appendChild(i),t},e.prototype.createListForStyle=function(e){var t=sf.base.createElement("li",{className:"e-menu-item"}),i=sf.base.createElement("div",{className:"e-pv-line-styles-container"}),n=sf.base.createElement("span",{className:"e-pv-line-styles-item",styles:"border-bottom-style:"+e});return i.appendChild(n),t.appendChild(i),t},e.prototype.onStartArrowHeadStyleSelect=function(e){this.startArrowDropDown.content=this.createContent(e.item.text).outerHTML},e.prototype.onEndArrowHeadStyleSelect=function(e){this.endArrowDropDown.content=this.createContent(e.item.text).outerHTML},e.prototype.createInputElement=function(e,t,i,n,o,a,s){var r=sf.base.createElement("div",{id:s+"_container",className:a+"-container"});if(o){var l=sf.base.createElement("div",{id:s+"_label",className:a+"-label"});l.textContent=e,r.appendChild(l)}this.pdfViewer.localeObj.getConstant("Opacity")===e&&(this.opacityIndicator=sf.base.createElement("span",{className:"e-pv-properties-opacity-indicator"}),r.appendChild(this.opacityIndicator));var d=sf.base.createElement(n,{id:s});return"input"===n&&(d.type=i),r.appendChild(d),t.appendChild(r),d},e.prototype.updateOpacityIndicator=function(){this.opacityIndicator.textContent=this.opacitySlider.value+"%"},e.prototype.onOkClicked=function(e){var t,i,n,o,a,s,r=document.querySelector("#"+this.pdfViewer.dataId+"_properties_line_start"),l=document.querySelector("#"+this.pdfViewer.dataId+"_properties_line_end"),d=document.querySelector("#"+this.pdfViewer.dataId+"_line_thickness"),h=document.querySelector("#"+this.pdfViewer.dataId+"_properties_style"),p=document.querySelector("#"+this.pdfViewer.dataId+"_properties_fill_color_button"),c=document.querySelector("#"+this.pdfViewer.dataId+"_properties_stroke_color_button"),u=document.querySelector("#"+this.pdfViewer.dataId+"_properties_opacity");t=this.getArrowTypeFromDropDown(r.value),i=this.getArrowTypeFromDropDown(l.value),n=parseInt(d.value),o=""===(o=this.getValue(c.children[0].style.borderBottomColor,"hex"))?"#ffffff00":o,a=""===(a=this.getValue(p.children[0].style.borderBottomColor,"hex"))?"#ffffff00":a,s=e?e/100:u.value/100,h.value&&("Solid"===h.value?this.setThickness("0","solid"):"Dotted"===h.value?this.setThickness("2","dotted"):"Dashed"===h.value&&this.setThickness("3","dashed"));var f=this.pdfViewer.selectedItems.annotations[0],g=S(f),m=S(f),w={},y=!1,v=!1,b=!1,V=!1,A=!1,x=!1,C=!1;t!==f.sourceDecoraterShapes&&(w.sourceDecoraterShapes=t,m.lineHeadStart=this.getArrowString(t),A=!0),i!==f.taregetDecoraterShapes&&(w.taregetDecoraterShapes=i,m.lineHeadEnd=this.getArrowString(i),x=!0),n!==f.wrapper.children[0].style.strokeWidth&&(w.thickness=n,m.thickness=n,b=!0),o!==f.wrapper.children[0].style.strokeColor&&(w.strokeColor=o,m.strokeColor=o,v=!0),a!==f.wrapper.children[0].style.fill&&(w.fillColor=a,m.fillColor=a,y=!0),s!==f.wrapper.children[0].style.opacity&&(w.opacity=s,m.opacity=s,V=!0),this.selectedLineDashArray!==f.wrapper.children[0].style.strokeDashArray&&(w.borderDashArray=this.selectedLineDashArray,w.borderStyle=this.selectedLineStyle,m.borderDashArray=w.borderDashArray,m.borderStyle=w.borderStyle,C=!0);var I=document.querySelector("#"+this.pdfViewer.dataId+"_properties_leader_length");"Distance"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&parseInt(I.value)!==this.pdfViewer.selectedItems.annotations[0].leaderHeight&&(w.leaderHeight=parseInt(I.value)),this.pdfViewer.nodePropertyChange(this.pdfViewer.selectedItems.annotations[0],w),this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.fill=a,this.triggerAnnotationPropChange(this.pdfViewer.selectedItems.annotations[0],y,v,b,V,A,x,C),this.modifyInCollections(this.pdfViewer.selectedItems.annotations[0],"thickness"),this.modifyInCollections(this.pdfViewer.selectedItems.annotations[0],"stroke"),this.modifyInCollections(this.pdfViewer.selectedItems.annotations[0],"fill"),this.modifyInCollections(this.pdfViewer.selectedItems.annotations[0],"opacity"),this.modifyInCollections(this.pdfViewer.selectedItems.annotations[0],"dashArray"),this.modifyInCollections(this.pdfViewer.selectedItems.annotations[0],"startArrow"),this.modifyInCollections(this.pdfViewer.selectedItems.annotations[0],"endArrow"),"Distance"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&this.modifyInCollections(this.pdfViewer.selectedItems.annotations[0],"leaderLength"),this.pdfViewer.annotation.addAction(f.pageIndex,null,f,"Line properties change","",g,m),this.renderAnnotations(f.pageIndex,null,null,null)},e.prototype.onCancelClicked=function(){this.propertiesDialog.hide()},e.prototype.getArrowTypeFromDropDown=function(e){var t="None";switch(e){case this.pdfViewer.localeObj.getConstant("None"):t="None";break;case this.pdfViewer.localeObj.getConstant("Open Arrow"):t="OpenArrow";break;case this.pdfViewer.localeObj.getConstant("Closed Arrow"):t="Arrow";break;case this.pdfViewer.localeObj.getConstant("Round Arrow"):t="Circle";break;case this.pdfViewer.localeObj.getConstant("Square Arrow"):t="Square";break;case this.pdfViewer.localeObj.getConstant("Diamond Arrow"):t="Diamond";break;case this.pdfViewer.localeObj.getConstant("Butt"):t="Butt"}return t},e.prototype.getArrowString=function(e){var t=this.pdfViewer.localeObj.getConstant("None");switch(e){case"Arrow":t=this.pdfViewer.localeObj.getConstant("Closed");break;case"OpenArrow":t=this.pdfViewer.localeObj.getConstant("Open Arrow");break;case"Circle":t=this.pdfViewer.localeObj.getConstant("Round");break;case"None":case"Square":case"Diamond":t=this.pdfViewer.localeObj.getConstant(e);break;case"Butt":t=this.pdfViewer.localeObj.getConstant("Butt")}return t},e.prototype.onAnnotationMouseUp=function(){if(0!==this.pdfViewer.selectedItems.annotations.length)this.pdfViewer.toolbar&&this.pdfViewer.toolbar.annotationToolbarModule&&(this.enableBasedOnType(),this.pdfViewer.toolbar.annotationToolbarModule.selectAnnotationDeleteItem(!0),sf.base.Browser.isDevice||this.pdfViewer.toolbar.annotationToolbarModule.updateAnnnotationPropertyItems()),this.pdfViewerBase.disableTextSelectionMode();else if(this.pdfViewer.textSelectionModule&&!this.pdfViewerBase.isPanMode&&this.pdfViewer.textSelectionModule.enableTextSelectionMode(),this.pdfViewer.toolbar&&this.pdfViewer.toolbar.annotationToolbarModule&&(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode)){var e=this.pdfViewer.toolbar.annotationToolbarModule.inkAnnotationSelected;!this.pdfViewer.annotation.freeTextAnnotationModule||this.pdfViewer.annotation.freeTextAnnotationModule.isInuptBoxInFocus||e||(this.pdfViewer.toolbar.annotationToolbarModule.enableAnnotationPropertiesTools(!1),this.pdfViewer.toolbar.annotationToolbarModule.enableFreeTextAnnotationPropertiesTools(!1)),this.pdfViewer.toolbar.annotationToolbarModule.updateAnnnotationPropertyItems(),this.pdfViewer.toolbar.annotationToolbarModule.selectAnnotationDeleteItem(!1)}},e.prototype.onShapesMouseup=function(e,t){if(e=sf.base.isNullOrUndefined(this.pdfViewer.selectedItems.annotations[0])?e:this.pdfViewer.selectedItems.annotations[0]){if(this.textMarkupAnnotationModule&&this.textMarkupAnnotationModule.currentTextMarkupAnnotation&&(this.textMarkupAnnotationModule.currentTextMarkupAnnotation=null,this.textMarkupAnnotationModule.selectTextMarkupCurrentPage=null),(this.pdfViewerBase.tool instanceof De||this.pdfViewerBase.tool instanceof Le)&&!this.pdfViewerBase.tool.dragging){var i={opacity:e.opacity,fillColor:e.fillColor,strokeColor:e.strokeColor,thickness:e.thickness,author:e.author,subject:e.subject,modifiedDate:e.modifiedDate};this.getAnnotationIndex(e.pageIndex,e.id),e.bounds.x,e.bounds.y,e.bounds.width,e.bounds.height;this.pdfViewerBase.tool instanceof Le&&(i.lineHeadStartStyle=this.getArrowString(e.sourceDecoraterShapes),i.lineHeadEndStyle=this.getArrowString(e.taregetDecoraterShapes),i.borderDashArray=e.borderDashArray),this.pdfViewerBase.isAnnotationAdded&&"Distance"!==e.measureType||(""===e.measureType||sf.base.isNullOrUndefined(e.measureType)?this.shapeAnnotationModule.renderShapeAnnotations(e,this.pdfViewer.annotation.getEventPageNumber(t)):"Distance"!==e.measureType&&"Perimeter"!==e.measureType&&"Radius"!==e.measureType||this.measureAnnotationModule.renderMeasureShapeAnnotations(e,this.pdfViewer.annotation.getEventPageNumber(t))),this.pdfViewerBase.updateDocumentEditedProperty(!0)}else this.pdfViewerBase.tool instanceof Me||this.pdfViewerBase.tool instanceof Ne?(this.pdfViewerBase.updateDocumentEditedProperty(!0),this.oldProperties=e.bounds,""===e.measureType||sf.base.isNullOrUndefined(e.measureType)?"FreeText"===e.shapeAnnotationType?this.pdfViewer.annotation.freeTextAnnotationModule.modifyInCollection("bounds",this.pdfViewer.annotation.getEventPageNumber(t),e):"HandWrittenSignature"===e.shapeAnnotationType||"SignatureImage"===e.shapeAnnotationType||"SignatureText"===e.shapeAnnotationType?this.pdfViewerBase.signatureModule.modifySignatureCollection("bounds",this.pdfViewer.annotation.getEventPageNumber(t),e):"Ink"===e.shapeAnnotationType?this.inkAnnotationModule.modifySignatureInkCollection("bounds",this.pdfViewer.annotation.getEventPageNumber(t),e):"Stamp"===e.shapeAnnotationType||"Image"===e.shapeAnnotationType?this.stampAnnotationModule.modifyInCollection("bounds",this.pdfViewer.annotation.getEventPageNumber(t),e):this.pdfViewer.annotation.shapeAnnotationModule.modifyInCollection("bounds",this.pdfViewer.annotation.getEventPageNumber(t),e):"Distance"!==e.measureType&&"Perimeter"!==e.measureType&&"Radius"!==e.measureType&&"Area"!==e.measureType&&"Volume"!==e.measureType||this.pdfViewer.annotation.measureAnnotationModule.modifyInCollection("bounds",this.pdfViewer.annotation.getEventPageNumber(t),e),this.pdfViewerBase.tool instanceof Ne&&(e.formFieldAnnotationType||this.triggerAnnotationResize(e)),this.pdfViewerBase.tool instanceof Me&&"Select"!==this.pdfViewerBase.action&&(e.formFieldAnnotationType||this.triggerAnnotationMove(e))):this.pdfViewerBase.tool instanceof Ee&&(this.pdfViewerBase.updateDocumentEditedProperty(!0),this.oldProperties=e.bounds,""===e.measureType||sf.base.isNullOrUndefined(e.measureType)?"Line"!==e.shapeAnnotationType&&"LineWidthArrowHead"!==e.shapeAnnotationType&&"Polygon"!==e.shapeAnnotationType||this.pdfViewer.annotation.shapeAnnotationModule.modifyInCollection("bounds",this.pdfViewer.annotation.getEventPageNumber(t),e):"Distance"!==e.measureType&&"Perimeter"!==e.measureType&&"Area"!==e.measureType&&"Volume"!==e.measureType||("Distance"===e.measureType&&this.pdfViewer.annotation.measureAnnotationModule.modifyInCollection("leaderLength",this.pdfViewer.annotation.getEventPageNumber(t),e),this.pdfViewer.annotation.measureAnnotationModule.modifyInCollection("bounds",this.pdfViewer.annotation.getEventPageNumber(t),e)),this.triggerAnnotationResize(e));this.pdfViewerBase.navigationPane&&this.pdfViewerBase.navigationPane.annotationMenuObj&&this.pdfViewer.isSignatureEditable&&("HandWrittenSignature"===e.shapeAnnotationType||"SignatureText"===e.shapeAnnotationType||"SignatureImage"===e.shapeAnnotationType)&&(this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant("Export Annotations")],!0),this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant("Export XFDF")],!0)),this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.annotationToolbarModule&&this.pdfViewer.enableAnnotationToolbar&&(this.pdfViewer.toolbarModule.annotationToolbarModule.clearTextMarkupMode(),""===e.measureType||sf.base.isNullOrUndefined(e.measureType)?this.pdfViewer.toolbarModule.annotationToolbarModule.clearMeasureMode():"Distance"!==e.measureType&&"Perimeter"!==e.measureType&&"Area"!==e.measureType&&"Volume"!==e.measureType&&"Radius"!==e.measureType||this.pdfViewer.toolbarModule.annotationToolbarModule.clearShapeMode(),1===this.pdfViewer.selectedItems.annotations.length&&null===this.pdfViewer.selectedItems.annotations[0].formFieldAnnotationType&&this.pdfViewer.toolbarModule.annotationToolbarModule.enableAnnotationPropertiesTools(!0))}},e.prototype.updateCalibrateValues=function(e,t){"Distance"===e.measureType?(e.notes=function(e,t,i){for(var n,o=0;o<e.wrapper.children.length;o++){var a=e.wrapper.children[o];a&&!sf.base.isNullOrUndefined(a.content)&&(n=i.setConversion(w([t[0],t[1]])*i.pixelToPointFactor,e),a.content=n,a.childNodes[0].text=a.content,a.refreshTextElement())}return n}(e,e.vertexPoints,this.measureAnnotationModule),!0===e.enableShapeLabel&&(e.labelContent=e.notes),this.pdfViewer.annotation.measureAnnotationModule.modifyInCollection("notes",e.pageIndex,e,t),this.renderAnnotations(e.pageIndex,null,null,null,null)):"Radius"===e.measureType?(e.notes=function(e,t){for(var i,n=0;n<e.wrapper.children.length;n++){var o=e.wrapper.children[n];o&&!sf.base.isNullOrUndefined(o.content)&&(i=t.setConversion(e.bounds.width/2*t.pixelToPointFactor,e),o.content=i,2===o.childNodes.length?(o.childNodes[0].text=i,o.childNodes.splice(o.childNodes.length-1,1)):o.childNodes[0].text=i,o.refreshTextElement())}return i}(e,this.measureAnnotationModule),!0===e.enableShapeLabel&&(e.labelContent=e.notes),this.pdfViewer.annotation.measureAnnotationModule.modifyInCollection("notes",e.pageIndex,e,t),this.renderAnnotations(e.pageIndex,null,null,null,null)):"Perimeter"===e.measureType?(e.notes=k(e,e.vertexPoints,this.measureAnnotationModule),!0===e.enableShapeLabel&&(e.labelContent=e.notes),this.pdfViewer.annotation.measureAnnotationModule.modifyInCollection("notes",e.pageIndex,e,t),this.renderAnnotations(e.pageIndex,null,null,null,null)):"Area"===e.measureType?(e.notes=this.measureAnnotationModule.calculateArea(e.vertexPoints,e.id,e.pageIndex),!0===e.enableShapeLabel&&(e.labelContent=e.notes,T(e)),this.pdfViewer.annotation.measureAnnotationModule.modifyInCollection("notes",e.pageIndex,e,t),this.renderAnnotations(e.pageIndex,null,null,null,null)):"Volume"===e.measureType&&(e.notes=this.measureAnnotationModule.calculateVolume(e.vertexPoints,e.id,e.pageIndex),!0===e.enableShapeLabel&&(e.labelContent=e.notes,T(e)),this.pdfViewer.annotation.measureAnnotationModule.modifyInCollection("notes",e.pageIndex,e,t),this.renderAnnotations(e.pageIndex,null,null,null,null))},e.prototype.onAnnotationMouseDown=function(){1===this.pdfViewer.selectedItems.annotations.length&&null===this.pdfViewer.selectedItems.annotations[0].formFieldAnnotationType&&this.pdfViewer.toolbar&&this.pdfViewer.toolbar.annotationToolbarModule&&(this.enableBasedOnType(),this.pdfViewer.toolbar.annotationToolbarModule.selectAnnotationDeleteItem(!0))},e.prototype.enableBasedOnType=function(){var e=!1,t=this.pdfViewer.selectedItems.annotations[0];t&&t.annotationSettings&&(e=t.annotationSettings.isLock)&&this.checkAllowedInteractions("PropertyChange",t)&&(e=!1),sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode||e||("Stamp"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType||"Image"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType||"StickyNotes"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType?this.pdfViewer.toolbar.annotationToolbarModule.enableStampAnnotationPropertiesTools(!0):"Path"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType||"SignatureImage"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType||"SignatureText"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType?this.pdfViewer.toolbar.annotationToolbarModule.enableAnnotationPropertiesTools(!1):"FreeText"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType?this.pdfViewer.toolbar.annotationToolbarModule.enableFreeTextAnnotationPropertiesTools(!0):"HandWrittenSignature"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType||"Ink"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType?this.pdfViewer.toolbar.annotationToolbarModule.enableSignaturePropertiesTools(!0):1===this.pdfViewer.selectedItems.annotations.length&&null===this.pdfViewer.selectedItems.annotations[0].formFieldAnnotationType&&this.pdfViewer.toolbar.annotationToolbarModule.enableAnnotationPropertiesTools(!0))},e.prototype.getProperDate=function(e){var t=new Date(e.toString());if(isNaN(t.getFullYear())){var i=e.slice(2,16);i=i.slice(0,4)+"/"+i.slice(4,6)+"/"+i.slice(6,8)+" "+i.slice(8,10)+":"+i.slice(10,12)+":"+i.slice(12,14),t=new Date(i)}return t.getMonth()+1+"/"+t.getDate()+"/"+t.getFullYear()+" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()},e.prototype.getPageCollection=function(e,t){for(var i=null,n=0;n<e.length;n++)if(e[n].pageIndex===t){i=n;break}return i},e.prototype.getAnnotationWithId=function(e,t){for(var i,n=0;n<e.length;n++)t===e[n].id&&(i=e[n]);return i},e.prototype.getEventPageNumber=function(e){var t,i=e.target;return i.classList.contains("e-pv-hyperlink")?i=i.parentElement:i.parentElement&&i.parentElement.classList.contains("foreign-object")?i=i.parentElement.parentElement.parentElement.parentElement:i.classList.contains("e-pdfviewer-formFields")&&"text"!=i.attributes[0].nodeValue||i.classList.contains("e-pdfviewer-signatureformfields")?i=i.parentElement:i.classList.contains("e-pdfviewer-formFields")&&"text"==i.attributes[0].nodeValue&&(i=i.parentElement.parentElement),i&&(t=i.id.split("_text_")[1]||i.id.split("_textLayer_")[1]||i.id.split("_annotationCanvas_")[1]||i.id.split("_pageDiv_")[1]),isNaN(t)&&(e=this.pdfViewerBase.annotationEvent)&&(t=(i=e.target).id.split("_text_")[1]||i.id.split("_textLayer_")[1]||i.id.split("_annotationCanvas_")[1]||i.id.split("_pageDiv_")[1]),parseInt(t)},e.prototype.getAnnotationComments=function(e,t,i){var n=[],o=null;if(e&&e.length>0)for(var a=0;a<e.length;a++){var s=e[a];o={shapeAnnotationType:"sticky",author:s.Author,modifiedDate:s.ModifiedDate,note:s.Note,state:s.State,stateModel:s.StateModel,comments:[],review:{state:s.State,stateModel:s.StateModel,modifiedDate:s.ModifiedDate,author:s.Author},annotName:s.AnnotName,parentId:t.AnnotName,subject:"Comments",isLock:s.IsLock},n[n.length]=o}return n},e.prototype.getRandomNumber=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){return(16*Math.random()|0).toString(16)}))},e.prototype.createGUID=function(){return this.getRandomNumber()},e.prototype.createAnnotationLayer=function(e,t,i,n,o){var a=this.pdfViewerBase.getElement("_annotationCanvas_"+n);if(a)return this.updateCanvas(a,t,i,n),a;var s=sf.base.createElement("canvas",{id:this.pdfViewer.dataId+"_annotationCanvas_"+n,className:"e-pv-annotation-canvas"});return this.updateCanvas(s,t,i,n),e.appendChild(s),s},e.prototype.resizeAnnotations=function(e,t,i){var n=this.pdfViewerBase.getElement("_annotationCanvas_"+i);n&&(n.style.width=e+"px",n.style.height=t+"px",this.pdfViewerBase.applyElementStyles(n,i))},e.prototype.clearAnnotationCanvas=function(e){var t=this.pdfViewerBase.getElement("_annotationCanvas_"+e),i=this.pdfViewerBase.getZoomFactor(),n=this.pdfViewerBase.getZoomRatio(i);if(t){var o=this.pdfViewerBase.pageSize[e].width,a=this.pdfViewerBase.pageSize[e].height;t.width=o*n,t.height=a*n,t.style.width=o*i+"px",t.style.height=a*i+"px"}},e.prototype.renderAnnotations=function(e,t,i,n,o,a){this.clearAnnotationCanvas(e),this.shapeAnnotationModule&&(a?this.shapeAnnotationModule.renderShapeAnnotations(t,e,!0):this.shapeAnnotationModule.renderShapeAnnotations(t,e)),this.measureAnnotationModule&&(a?this.measureAnnotationModule.renderMeasureShapeAnnotations(i,e,!0):this.measureAnnotationModule.renderMeasureShapeAnnotations(i,e)),o=null!=o?o:this.pdfViewerBase.getElement("_annotationCanvas_"+e),this.pdfViewer.drawing.refreshCanvasDiagramLayer(o,e),this.textMarkupAnnotationModule&&(a?this.textMarkupAnnotationModule.renderTextMarkupAnnotationsInPage(n,e,!0):this.textMarkupAnnotationModule.renderTextMarkupAnnotationsInPage(n,e))},e.prototype.storeAnnotations=function(e,t,i){Math.round(JSON.stringify(window.sessionStorage).length/1024)>4500&&(this.clearAnnotationStorage(),this.pdfViewerBase.isStorageExceed=!0);var n=window.sessionStorage.getItem(this.pdfViewerBase.documentId+i);this.pdfViewerBase.isStorageExceed&&(n=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+i]);var o=0;if(n){this.storeAnnotationCollections(t,e);var a=JSON.parse(n);this.pdfViewerBase.isStorageExceed||window.sessionStorage.removeItem(this.pdfViewerBase.documentId+i);var s=this.pdfViewer.annotationModule.getPageCollection(a,e);if(a[s])a[s].annotations.push(t),o=a[s].annotations.indexOf(t);else{var r={pageIndex:e,annotations:[]};r.annotations.push(t),o=r.annotations.indexOf(t),a.push(r)}h=JSON.stringify(a);this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+i]=h:window.sessionStorage.setItem(this.pdfViewerBase.documentId+i,h)}else{this.storeAnnotationCollections(t,e);var l={pageIndex:e,annotations:[]};l.annotations.push(t),o=l.annotations.indexOf(t);var d=[];d.push(l);var h=JSON.stringify(d);this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+i]=h:window.sessionStorage.setItem(this.pdfViewerBase.documentId+i,h)}return o},e.prototype.getArrowType=function(e){var t="None";switch(e){case"ClosedArrow":case"Closed":t="Arrow";break;case"OpenArrow":case"Open":t="OpenArrow";break;case"Square":t="Square";break;case"Circle":case"Round":t="Circle";break;case"Diamond":t="Diamond";break;case"Butt":t="Butt"}return t},e.prototype.getArrowTypeForCollection=function(e){var t;switch(e){case"Arrow":t="ClosedArrow";break;case"OpenArrow":case"Square":case"Circle":case"Diamond":case"None":t=e.toString();break;case"Butt":t="Butt"}return t},e.prototype.getBounds=function(e,t){var i=this.pdfViewerBase.pageSize[t];return i?1===i.rotation?{left:e.top,top:i.width-(e.left+e.width),width:e.height,height:e.width}:2===i.rotation?{left:i.width-e.left-e.width,top:i.height-e.top-e.height,width:e.width,height:e.height}:3===i.rotation?{left:i.height-e.top-e.height,top:e.left,width:e.height,height:e.width}:e:e},e.prototype.getInkBounds=function(e,t){var i=this.pdfViewerBase.pageSize[t];return i?1===i.rotation?{x:e.y,y:i.width-(e.x+e.width),width:e.height,height:e.width}:2===i.rotation?{x:i.width-e.x-e.width,y:i.height-e.y-e.height,width:e.width,height:e.height}:3===i.rotation?{x:i.height-e.y-e.height,y:e.x,width:e.height,height:e.width}:e:e},e.prototype.getVertexPoints=function(e,t){if(e){var i=this.pdfViewerBase.pageSize[t];if(1===i.rotation){for(var n=[],o=0;o<e.length;o++){var a={x:e[o].y,y:i.width-e[o].x};n.push(a)}return n}if(2===i.rotation){var s=[];for(o=0;o<e.length;o++){a={x:i.width-e[o].x,y:i.height-e[o].y};s.push(a)}return s}if(3===i.rotation){var r=[];for(o=0;o<e.length;o++){a={x:i.height-e[o].y,y:e[o].x};r.push(a)}return r}return e}},e.prototype.getStoredAnnotations=function(e,t,i){var n,o=window.sessionStorage.getItem(this.pdfViewerBase.documentId+i);if(this.pdfViewerBase.isStorageExceed&&(o=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+i]),o){var a=JSON.parse(o),s=this.pdfViewer.annotationModule.getPageCollection(a,e);n=a[s]?a[s].annotations:null}else n=null;return n},e.prototype.triggerAnnotationPropChange=function(e,t,i,n,o,a,s,r,l,d,h){this.getAnnotationIndex(e.pageIndex,e.id);var p=this.getAnnotationType(e.shapeAnnotationType,e.measureType),c={name:"annotationPropertiesChange",pageIndex:e.pageIndex,annotationId:e.annotName,annotationType:p,isColorChanged:t,isOpacityChanged:o,isThicknessChanged:n,isStrokeColorChanged:i};l&&(c.isFreeTextChanged=l,c.previousText=d,c.currentText=h),a&&(c.isLineHeadStartStyleChanged=a),s&&(c.isLineHeadEndStyleChanged=s),r&&(c.isBorderDashArrayChanged=r),this.pdfViewer._dotnetInstance.invokeMethodAsync("Trigger","AnnotationPropertiesChange",c)},e.prototype.triggerAnnotationAdd=function(e){var t,i={opacity:e.opacity,fillColor:e.fillColor,strokeColor:e.strokeColor,thickness:e.thickness,author:e.author,subject:e.subject,modifiedDate:e.modifiedDate},n={x:e.wrapper.bounds.x,y:e.wrapper.bounds.y,left:e.wrapper.bounds.x,top:e.wrapper.bounds.y,width:e.wrapper.bounds.width,height:e.wrapper.bounds.height},o=this.getAnnotationType(e.shapeAnnotationType,e.measureType);"Line"!==o&&"Arrow"!==o&&"Distance"!==o&&"Perimeter"!==o||(i.lineHeadStartStyle=this.getArrowString(e.sourceDecoraterShapes),i.lineHeadEndStyle=this.getArrowString(e.taregetDecoraterShapes),i.borderDashArray=e.borderDashArray),this.pdfViewer.enableShapeLabel?(t={fontColor:e.fontColor,fontSize:e.fontSize,fontFamily:e.fontFamily,opacity:e.labelOpacity,labelContent:e.labelContent,fillColor:e.labelFillColor},this.pdfViewer.fireAnnotationAdd(e.pageIndex,e.annotName,o,n,i,null,null,null,t)):this.pdfViewer.fireAnnotationAdd(e.pageIndex,e.annotName,o,n,i)},e.prototype.triggerAnnotationResize=function(e){var t,i={opacity:e.opacity,fillColor:e.fillColor,strokeColor:e.strokeColor,thickness:e.thickness,author:e.author,subject:e.subject,modifiedDate:e.modifiedDate},n=(this.getAnnotationIndex(e.pageIndex,e.id),e.bounds),o={left:n.x,top:n.y,x:n.x,y:n.y,width:n.width,height:n.height},a={left:this.oldProperties.x,top:this.oldProperties.y,width:this.oldProperties.width,height:this.oldProperties.height},s=this.getAnnotationType(e.shapeAnnotationType,e.measureType);"Line"!==s&&"Arrow"!==s&&"Distance"!==s&&"Perimeter"!==s||(i.lineHeadStartStyle=this.getArrowString(e.sourceDecoraterShapes),i.lineHeadEndStyle=this.getArrowString(e.taregetDecoraterShapes),i.borderDashArray=e.borderDashArray),this.pdfViewer.enableShapeLabel&&"HandWrittenSignature"!==e.shapeAnnotationType?(t={fontColor:e.fontColor,fontSize:e.fontSize,fontFamily:e.fontFamily,opacity:e.labelOpacity,labelContent:e.labelContent,fillColor:e.labelFillColor,notes:e.notes},this.pdfViewer.fireAnnotationResize(e.pageIndex,e.annotName,s,o,i,null,null,null,t)):"HandWrittenSignature"===e.shapeAnnotationType||"SignatureText"===e.shapeAnnotationType||"SignatureImage"===e.shapeAnnotationType?this.pdfViewer.fireSignatureResize(e.pageIndex,e.signatureName,e.shapeAnnotationType,e.opacity,e.strokeColor,e.thickness,o,a):this.pdfViewer.fireAnnotationResize(e.pageIndex,e.annotName,s,o,i)},e.prototype.triggerAnnotationMove=function(e,t){var i,n={opacity:e.opacity,fillColor:e.fillColor,strokeColor:e.strokeColor,thickness:e.thickness,author:e.author,subject:e.subject,modifiedDate:e.modifiedDate},o=e.bounds,a={left:o.x,top:o.y,x:o.x,y:o.y,width:o.width,height:o.height};i=this.oldProperties?{left:this.oldProperties.x?this.oldProperties.x:o.x,top:this.oldProperties.y?this.oldProperties.y:o.y,width:o.width,height:o.height}:{left:o.x,top:o.y,width:o.width,height:o.height};var s=this.getAnnotationType(e.shapeAnnotationType,e.measureType);"Line"!==s&&"Arrow"!==s&&"Distance"!==s&&"Perimeter"!==s||(n.lineHeadStartStyle=this.getArrowString(e.sourceDecoraterShapes),n.lineHeadEndStyle=this.getArrowString(e.taregetDecoraterShapes),n.borderDashArray=e.borderDashArray),"HandWrittenSignature"===e.shapeAnnotationType||"SignatureText"===e.shapeAnnotationType||"SignatureImage"===e.shapeAnnotationType?this.pdfViewer.fireSignatureMove(e.pageIndex,e.signatureName,e.shapeAnnotationType,e.opacity,e.strokeColor,e.thickness,i,a):t?this.pdfViewer.fireAnnotationMoving(e.pageIndex,e.annotName,s,n,i,a):this.pdfViewer.fireAnnotationMove(e.pageIndex,e.annotName,s,n,i,a)},e.prototype.annotationSelect=function(e,t,i,n,o,a){var s;"textMarkup"===i.shapeAnnotationType?s={type:"TextMarkup",subType:i.subject,opacity:i.opacity,color:i.color,textMarkupContent:i.textMarkupContent,textMarkupStartIndex:i.textMarkupStartIndex,textMarkupEndIndex:i.textMarkupEndIndex,customData:i.customData}:"StickyNotes"===i.shapeAnnotationType?s={type:"StickyNotes",opacity:i.opacity,customData:i.customData}:"Stamp"===i.shapeAnnotationType||"Image"===i.shapeAnnotationType?s={type:"Stamp",opacity:i.opacity,customData:i.customData}:"Ink"===i.shapeAnnotationType?s={type:"Ink",opacity:i.opacity,strokeColor:i.strokeColor,thickness:i.thickness,modifiedDate:i.modifiedDate,width:i.bounds.width,height:i.bounds.height,left:i.bounds.x,top:i.bounds.y,data:i.data,customData:i.customData}:"FreeText"===i.shapeAnnotationType?s={type:"FreeText",opacity:i.opacity,fillColor:i.fillColor,strokeColor:i.strokeColor,thickness:i.thickness,content:i.dynamicText,fontFamily:i.fontFamily,fontSize:i.fontSize,fontColor:i.fontColor,textAlign:i.textAlign,fontStyle:this.updateFreeTextFontStyle(i.font),customData:i.customData}:""===i.measureType?"Line"===i.shapeAnnotationType?s={type:"Shape",subType:"Line",opacity:i.opacity,fillColor:i.fillColor,strokeColor:i.strokeColor,thickness:i.thickness,borderDashArray:i.borderDashArray,lineHeadStartStyle:i.sourceDecoraterShapes,lineHeadEndStyle:i.taregetDecoraterShapes,customData:i.customData}:"Arrow"===i.shapeAnnotationType||"LineWidthArrowHead"===i.shapeAnnotationType?s={type:"Shape",subType:"Arrow",opacity:i.opacity,fillColor:i.fillColor,strokeColor:i.strokeColor,thickness:i.thickness,borderDashArray:i.borderDashArray,lineHeadStartStyle:i.sourceDecoraterShapes,lineHeadEndStyle:i.taregetDecoraterShapes,customData:i.customData}:"Rectangle"===i.shapeAnnotationType?s={type:"Shape",subType:"Rectangle",opacity:i.opacity,fillColor:i.fillColor,strokeColor:i.strokeColor,thickness:i.thickness,customData:i.customData}:"Circle"===i.shapeAnnotationType||"Ellipse"===i.shapeAnnotationType?s={type:"Shape",subType:"Circle",opacity:i.opacity,fillColor:i.fillColor,strokeColor:i.strokeColor,thickness:i.thickness,customData:i.customData}:"Polygon"===i.shapeAnnotationType&&(s={type:"Shape",subType:"Polygon",opacity:i.opacity,fillColor:i.fillColor,strokeColor:i.strokeColor,thickness:i.thickness,customData:i.customData}):""!==i.measureType&&("Distance"===i.measureType?s={type:"Measure",subType:"Distance",opacity:i.opacity,fillColor:i.fillColor,strokeColor:i.strokeColor,thickness:i.thickness,borderDashArray:i.borderDashArray,lineHeadStartStyle:i.sourceDecoraterShapes,lineHeadEndStyle:i.taregetDecoraterShapes,customData:i.customData}:"Perimeter"===i.measureType?s={type:"Measure",subType:"Perimeter",opacity:i.opacity,fillColor:i.fillColor,strokeColor:i.strokeColor,thickness:i.thickness,borderDashArray:i.borderDashArray,lineHeadStartStyle:i.sourceDecoraterShapes,lineHeadEndStyle:i.taregetDecoraterShapes,customData:i.customData}:"Area"===i.measureType?s={type:"Measure",subType:"Area",opacity:i.opacity,fillColor:i.fillColor,strokeColor:i.strokeColor,thickness:i.thickness,customData:i.customData}:"Radius"===i.measureType?s={type:"Measure",subType:"Radius",opacity:i.opacity,fillColor:i.fillColor,strokeColor:i.strokeColor,thickness:i.thickness,customData:i.customData}:"Volume"===i.measureType&&(s={type:"Measure",subType:"Volume",opacity:i.opacity,fillColor:i.fillColor,strokeColor:i.strokeColor,thickness:i.thickness,calibrate:i.calibrate,annotationId:i.annotName,customData:i.customData}));var r=[],l=this.getOverlappedAnnotations(i,t);if(l&&this.overlappedCollections){for(var d=[],h=0;h<l.length;h++)if("textMarkup"!==l[h].shapeAnnotationType&&this.overlappedCollections||a){for(var p=0;p<this.overlappedCollections.length;p++)if(l[h].annotName===this.overlappedCollections[p].annotName){d.push(l[h]);break}}else d.push(l[h]);l=d}if(this.pdfViewer.enableMultiLineOverlap)for(h=0;h<l.length;h++)if("textMarkup"===l[h].shapeAnnotationType){var c=!1;for(p=0;p<l[h].bounds.length;p++){var u=this.orderTextMarkupBounds(l[h].bounds[p]),f=this.textMarkupAnnotationModule.annotationClickPosition;f&&(f.x||f.y)?u.left<=f.x&&u.left+u.width>=f.x&&u.top<=f.y&&u.top+u.height>=f.y&&(c=!0):c=!0}c||l.splice(h,1)}if(l&&l.length>0){n=l;for(h=0;h<n.length;h++){var g=S(n[h]);g.annotationId=n[h].annotName,e===n[h].annotName&&i.measureType&&"Volume"===i.measureType&&(g.calibrate=n[h].calibrate),delete g.annotName,r.push(g)}}else r=null;this.addFreeTextProperties(i,s);var m=i.annotationAddMode;if(o)("Stamp"===i.shapeAnnotationType||"Image"===i.shapeAnnotationType)&&this.pdfViewerBase.isNewStamp||this.pdfViewer.fireAnnotationDoubleClick(e,t,s);else if("Stamp"===i.shapeAnnotationType||"Image"===i.shapeAnnotationType)!this.pdfViewerBase.isNewStamp&&this.annotationSelected&&(r?this.pdfViewer.fireAnnotationSelect(e,t,s,r,null,null,m):this.pdfViewer.fireAnnotationSelect(e,t,s,null,null,null,m));else{var w=this.textMarkupAnnotationModule.multiPageCollectionList(i);0===w.length&&(w=null),this.annotationSelected&&(r?(a=!1,this.pdfViewer.fireAnnotationSelect(e,t,s,r,w,a,m)):(a=!0,this.pdfViewer.fireAnnotationSelect(e,t,s,null,w,a,m)))}this.annotationSelected=!0},e.prototype.selectSignature=function(e,t,i){var n=i.bounds,o={height:n.height,width:n.width,x:n.x,y:n.y};if(!this.pdfViewerBase.signatureAdded){var a={bounds:o,opacity:i.opacity,thickness:i.thickness,strokeColor:i.strokeColor};this.pdfViewer.fireSignatureSelect(e,t,a)}},e.prototype.editSignature=function(e){var t,i=(t=e.uniqueKey?this.pdfViewer.nameTable[e.uniqueKey]:this.pdfViewer.selectedItems.annotations[0]).pageIndex;if("HandWrittenSignature"===t.shapeAnnotationType||"SignatureText"===t.shapeAnnotationType||"SignatureImage"===t.shapeAnnotationType){var n=S(t),o=S(t);t.opacity!==e.opacity&&(o.opacity=e.opacity,this.pdfViewer.nodePropertyChange(t,{opacity:e.opacity}),this.pdfViewer.fireSignaturePropertiesChange(t.pageIndex,t.signatureName,t.shapeAnnotationType,!1,!0,!1,n.opacity,o.opacity),this.pdfViewer.annotation.addAction(t.pageIndex,null,t,"Shape Opacity","",n,o)),t.strokeColor!==e.strokeColor&&(o.strokeColor=e.strokeColor,this.pdfViewer.nodePropertyChange(t,{strokeColor:e.strokeColor}),this.pdfViewer.fireSignaturePropertiesChange(t.pageIndex,t.signatureName,t.shapeAnnotationType,!0,!1,!1,n.strokeColor,o.strokeColor),this.pdfViewer.annotation.addAction(t.pageIndex,null,t,"Shape Stroke","",n,o)),t.thickness!==e.thickness&&(o.thickness=e.thickness,this.pdfViewer.nodePropertyChange(t,{thickness:e.thickness}),this.pdfViewer.fireSignaturePropertiesChange(t.pageIndex,t.signatureName,t.shapeAnnotationType,!1,!1,!0,n.thickness,o.thickness),this.pdfViewer.annotation.addAction(t.pageIndex,null,t,"Shape Thickness","",n,o)),t.modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),this.pdfViewer.renderDrawing(),this.pdfViewerBase.signatureModule.modifySignatureCollection(null,i,t,!0)}},e.prototype.editAnnotation=function(e){var t,i,n,o,a=!1;if(this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation?(i=(t=this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation).annotName,o=this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage):this.pdfViewer.selectedItems.annotations[0]&&(i=(t=this.pdfViewer.selectedItems.annotations[0]).annotName,o=t.pageIndex),void 0!==e.uniqueKey){(t=this.pdfViewer.nameTable[e.uniqueKey]).annotationSettings.isLock=e.annotationSettings.isLock;var s=this.pdfViewer.annotationCollection.filter((function(e){return e.annotationId===t.annotName}));if(s.length>0&&(s[0].annotationSettings.isLock=t.annotationSettings.isLock),i=t.annotName,o=t.pageIndex,e.allowedInteractions)for(var r=e.allowedInteractions.length,l=0;l<r;l++)0===e.allowedInteractions[l]&&(e.allowedInteractions[l]=q.Select),1===e.allowedInteractions[l]&&(e.allowedInteractions[l]=q.Move),2===e.allowedInteractions[l]&&(e.allowedInteractions[l]=q.Resize),3===e.allowedInteractions[l]&&(e.allowedInteractions[l]=q.Delete),4===e.allowedInteractions[l]&&(e.allowedInteractions[l]=q.PropertyChange),5===e.allowedInteractions[l]&&(e.allowedInteractions[l]=q.None);t.allowedInteractions=e.allowedInteractions?e.allowedInteractions:this.updateAnnotationAllowedInteractions(e)}if(t||"sticky"===e.shapeAnnotationType&&void 0!==e.annotationId&&((t=this.pdfViewer.nameTable[e.annotationId]).annotationSettings.isLock=e.annotationSettings.isLock,i=t.annotName,o=t.pageIndex),"textMarkup"===e.shapeAnnotationType&&!this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation){t=this.pdfViewer.annotationModule.textMarkupAnnotationModule.getAnnotations(e.pageNumber,e);for(l=0;l<t.length;l++)if(e.annotationId===t[l].annotName){a=!0,(t=t[l]).isPrint=e.isPrint,this.textMarkupAnnotationModule.currentTextMarkupAnnotation=t,this.textMarkupAnnotationModule.selectTextMarkupCurrentPage=t.pageNumber,t.allowedInteractions=e.allowedInteractions,o=t.pageNumber,i=e.annotationId;break}}if(t){var d=S(t),h=S(t);if("textMarkup"===e.shapeAnnotationType&&(n="textMarkup"),"TextMarkup"===e.type||"textMarkup"===e.shapeAnnotationType){if(t.annotationSettings&&e.annotationSettings&&t.annotationSettings.isLock!==e.annotationSettings.isLock){var p=this.textMarkupAnnotationModule.modifyAnnotationProperty("AnnotationSettings",e.annotationSettings.isLock,null);this.textMarkupAnnotationModule.manageAnnotations(p,this.textMarkupAnnotationModule.selectTextMarkupCurrentPage)}t.opacity!==e.opacity&&this.pdfViewer.annotationModule.textMarkupAnnotationModule.modifyOpacityProperty(null,e.opacity),t.color!==e.color&&this.pdfViewer.annotationModule.textMarkupAnnotationModule.modifyColorProperty(e.color),n="textMarkup",a&&(this.textMarkupAnnotationModule.currentTextMarkupAnnotation=null,this.textMarkupAnnotationModule.selectTextMarkupCurrentPage=null)}else if(e&&"image"===e.stampAnnotationType&&"stamp"===e.shapeAnnotationType&&e.stampAnnotationPath)n="stamp",t.data!==e.stampAnnotationPath&&(t.data=e.stampAnnotationPath,t.wrapper.children[0].imageSource=e.stampAnnotationPath),e.opacity&&t.opacity!==e.opacity&&this.annotationPropertyChange(t,e.opacity,"Shape Opacity",d,h),this.calculateAnnotationBounds(t,e);else if("StickyNotes"===e.type||"Stamp"===e.type||"sticky"===e.shapeAnnotationType||"stamp"===e.shapeAnnotationType)e.opacity&&t.opacity!==e.opacity&&this.annotationPropertyChange(t,e.opacity,"Shape Opacity",d,h),this.calculateAnnotationBounds(t,e),n="StickyNotes"===e.type||"sticky"===e.shapeAnnotationType?"sticky":"stamp";else if("Ink"===e.type||"Shape"===e.type||"Measure"===e.type||"Line"===e.shapeAnnotationType||"Square"===e.shapeAnnotationType||"Circle"===e.shapeAnnotationType||"Polygon"===e.shapeAnnotationType||"Polyline"===e.shapeAnnotationType||"Ink"===e.shapeAnnotationType){if(this.calculateAnnotationBounds(t,e),e.opacity&&t.opacity!==e.opacity&&this.annotationPropertyChange(t,e.opacity,"Shape Opacity",d,h),e.fillColor&&t.fillColor!==e.fillColor&&(h.fillColor=e.fillColor,e.labelSettings&&e.labelSettings.fillColor&&(e.labelSettings.fillColor=e.fillColor),this.pdfViewer.nodePropertyChange(t,{fillColor:e.fillColor}),this.triggerAnnotationPropChange(t,!0,!1,!1,!1),this.pdfViewer.annotation.addAction(t.pageIndex,null,t,"Shape Fill","",d,h)),e.strokeColor&&t.strokeColor!==e.strokeColor&&(h.strokeColor=e.strokeColor,this.pdfViewer.nodePropertyChange(t,{strokeColor:e.strokeColor}),this.triggerAnnotationPropChange(t,!1,!0,!1,!1),this.pdfViewer.annotation.addAction(t.pageIndex,null,t,"Shape Stroke","",d,h)),e.thickness&&t.thickness!==e.thickness&&(h.thickness=e.thickness,this.pdfViewer.nodePropertyChange(t,{thickness:e.thickness}),this.triggerAnnotationPropChange(t,!1,!1,!0,!1),this.pdfViewer.annotation.addAction(t.pageIndex,null,t,"Shape Thickness","",d,h)),t.author!==e.author&&(h.author=e.author,this.pdfViewer.nodePropertyChange(t,{author:e.author}),this.triggerAnnotationPropChange(t,!1,!0,!1,!1)),t.modifiedDate!==e.modifiedDate&&(h.modifiedDate=e.modifiedDate,this.pdfViewer.nodePropertyChange(t,{modifiedDate:e.modifiedDate})),t.subject!==e.subject&&(h.subject=e.subject,this.pdfViewer.nodePropertyChange(t,{subject:e.subject}),this.triggerAnnotationPropChange(t,!1,!0,!1,!1),this.pdfViewer.annotation.addAction(t.pageIndex,null,t,"Shape Stroke","",d,h)),this.pdfViewer.enableShapeLabel&&t.fontColor!==e.fontColor&&(h.fontColor=e.fontColor,this.pdfViewer.nodePropertyChange(t,{fontColor:e.fontColor})),this.pdfViewer.enableShapeLabel&&e.labelSettings&&e.labelSettings.fillColor&&t.labelFillColor!==e.labelSettings.fillColor&&(h.labelFillColor=e.labelSettings.fillColor,this.pdfViewer.nodePropertyChange(t,{labelFillColor:e.labelSettings.fillColor})),"Line"!==e.shapeAnnotationType&&"Polyline"!==e.shapeAnnotationType&&"Polygon"!==e.shapeAnnotationType||JSON.stringify(t.vertexPoints)!==JSON.stringify(e.vertexPoints)&&(t.vertexPoints=e.vertexPoints,this.pdfViewer.nodePropertyChange(t,{vertexPoints:e.vertexPoints})),"Line"===e.subType||"Arrow"===e.subType||"Distance"===e.subType||"Perimeter"===e.subType){var c=!1,u=!1,f=!1;d.lineHeadStart=t.sourceDecoraterShapes,d.lineHeadEnd=t.taregetDecoraterShapes,h.lineHeadStart=e.lineHeadStartStyle,h.lineHeadEnd=e.lineHeadEndStyle,h.borderDashArray=e.borderDashArray,t.taregetDecoraterShapes!==e.lineHeadEndStyle&&(u=!0),t.sourceDecoraterShapes!==e.lineHeadStartStyle&&(c=!0),t.borderDashArray!==e.borderDashArray&&(f=!0),this.pdfViewer.nodePropertyChange(t,{sourceDecoraterShapes:e.lineHeadStartStyle,taregetDecoraterShapes:e.lineHeadEndStyle,borderDashArray:e.borderDashArray}),this.triggerAnnotationPropChange(t,!1,!1,!1,!1,c,u,f),this.pdfViewer.annotation.addAction(t.pageIndex,null,t,"Line properties change","",d,h)}"Shape"!==e.type&&"Line"!==e.shapeAnnotationType&&"Square"!==e.shapeAnnotationType&&"Circle"!==e.shapeAnnotationType&&"Polygon"!==e.shapeAnnotationType||(n="shape"),"Ink"!==e.type&&"Ink"!==e.shapeAnnotationType||(n="ink"),"Measure"!==e.type&&"Distance calculation"!==e.subject&&"Perimeter calculation"!==e.subject&&"Radius calculation"!==e.subject&&"Area calculation"!==e.subject&&"Volume calculation"!==e.subject||(n="shape_measure"),e.labelSettings&&this.pdfViewer.enableShapeLabel&&(this.updateFreeTextProperties(t),this.pdfViewer.nodePropertyChange(t,{labelOpacity:e.labelSettings.opacity,fontColor:e.labelSettings.fontColor,fontSize:e.labelSettings.fontSize,fontFamily:e.labelSettings.fontFamily,labelContent:e.labelSettings.labelContent,labelFillColor:e.labelSettings.fillColor})),this.pdfViewer.enableShapeLabel&&e.calibrate&&e.calibrate.depth&&this.pdfViewer.annotationModule.measureAnnotationModule.volumeDepth!==e.calibrate.depth&&(this.pdfViewer.annotationModule.measureAnnotationModule.volumeDepth=e.calibrate.depth,t.notes=this.pdfViewer.annotationModule.measureAnnotationModule.calculateVolume(t.vertexPoints),t.labelContent=t.notes,e.labelSettings&&e.labelSettings.labelContent&&(e.labelSettings.labelContent=t.notes),this.pdfViewer.nodePropertyChange(t,{labelContent:t.labelContent}))}else if("FreeText"===e.type||"FreeText"===e.shapeAnnotationType){if(n="freetext",this.pdfViewer.freeTextSettings.enableAutoFit&&t.dynamicText!==e.content){var g=this.pdfViewerBase.getElement("_annotationCanvas_"+t.pageIndex).getContext("2d"),m=e.fontSize,w=void 0,y=e.fontFamily,v=this.pdfViewerBase.getZoomFactor();w=e.font.isBold?"bold "+m+"px "+y:m+"px "+y,g.font=w;var b="",V=[],A=e.content?e.content:e.dynamicText;if(A.indexOf("\n")>-1){V=A.split("\n");for(var x=0;x<V.length;x++){var C=g.measureText(V[x]),I=g.measureText(b);C.width>I.width&&(b=V[x])}}else b=A;var k=g.measureText(b);e.bounds.width=Math.ceil(k.width+18);var T=this.pdfViewerBase.getElement("_pageDiv_"+e.pageIndex).clientWidth-e.bounds.left*v;e.bounds.width>T&&(e.bounds.width=T/v);var M=e.bounds.height;e.bounds.height=M>=t.bounds.height?M:t.bounds.height}e.content=e.content?e.content:e.dynamicText,this.calculateAnnotationBounds(t,e),this.pdfViewer.nodePropertyChange(t,{opacity:e.opacity,fontColor:e.fontColor,fontSize:e.fontSize,fontFamily:e.fontFamily,dynamicText:e.content?e.content:e.dynamicText,fillColor:e.fillColor,textAlign:e.textAlign,strokeColor:e.strokeColor,thickness:e.thickness,font:e.fontStyle?this.setFreeTextFontStyle(e.fontStyle):this.setFreeTextFontStyle(e.font),isReadonly:e.isReadonly}),e.opacity&&t.opacity!==e.opacity&&this.triggerAnnotationPropChange(t,!1,!1,!1,!0),e.fillColor&&t.fillColor!==e.fillColor&&this.triggerAnnotationPropChange(t,!0,!1,!1,!1),e.strokeColor&&t.strokeColor!==e.strokeColor&&this.triggerAnnotationPropChange(t,!1,!0,!1,!1),e.thickness&&t.thickness!==e.thickness&&this.triggerAnnotationPropChange(t,!1,!1,!0,!1),this.pdfViewer._dotnetInstance.invokeMethodAsync("UpdateFreeText",e.Id,e.content)}t.modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),t.customData!==e.customData&&(t.customData=e.customData),t.isPrint=e.isPrint,"TextMarkup"!==e.type&&(this.pdfViewer.renderDrawing(),this.updateCollection(i,o,e,n))}},e.prototype.annotationPropertyChange=function(e,t,i,n,o){this.pdfViewer.nodePropertyChange(e,{opacity:t}),this.triggerAnnotationPropChange(e,!1,!1,!1,!0),this.pdfViewer.annotation.addAction(e.pageIndex,null,e,i,"",n,o)},e.prototype.calculateAnnotationBounds=function(e,t){var i=this.pdfViewerBase.convertBounds(e.wrapper.bounds),n=this.pdfViewerBase.convertBounds(t.bounds);if(i&&n&&(JSON.stringify(i)!==JSON.stringify(n)&&Math.abs(i.Y-n.Y)>2||Math.abs(i.X-n.X)>2||Math.abs(i.Width-n.Width)>2||Math.abs(i.Height-n.Height)>2)){var o={x:n.X+n.Width/2,y:n.Y+n.Height/2,width:n.Width,height:n.Height};this.pdfViewer.nodePropertyChange(e,{bounds:o}),this.pdfViewer.clearSelection(this.pdfViewerBase.activeElements.activePageID),this.triggerAnnotationPropChange(e,!1,!1,!1,!1)}},e.prototype.updateFreeTextProperties=function(e){e.labelSettings&&(e.labelSettings.fillColor&&(e.labelFillColor=e.labelSettings.fillColor),e.labelSettings.fontColor&&(e.fontColor=e.labelSettings.fontColor),e.labelSettings.fontSize&&(e.fontSize=e.labelSettings.fontSize),e.labelSettings.fontFamily&&(e.fontFamily=e.labelSettings.fontFamily),e.labelSettings.opacity&&(e.labelOpacity=e.labelSettings.opacity),e.labelSettings.labelContent&&(e.labelContent=e.labelSettings.labelContent))},e.prototype.addFreeTextProperties=function(e,t){this.pdfViewer.enableShapeLabel&&e&&t&&(t.labelSettings={fontColor:e.fontColor,fontSize:e.fontSize,fontFamily:e.fontFamily,opacity:e.labelOpacity,labelContent:e.labelContent,fillColor:e.labelFillColor})},e.prototype.updateMeasurementSettings=function(){if(this.pdfViewer.enableAnnotation&&this.pdfViewer.enableMeasureAnnotation){var e="1 "+this.pdfViewer.measurementSettings.conversionUnit+" = "+this.pdfViewer.measurementSettings.scaleRatio+" "+this.pdfViewer.measurementSettings.displayUnit;this.measureAnnotationModule.updateMeasureValues(e,this.pdfViewer.measurementSettings.displayUnit,this.pdfViewer.measurementSettings.conversionUnit,this.pdfViewer.measurementSettings.depth)}},e.prototype.updateCollection=function(e,t,i,n){var o,a=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_"+n);if(this.pdfViewerBase.isStorageExceed&&(a=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_"+n]),a){var s=JSON.parse(a),r=this.getPageCollection(s,t);if(s[r]&&null!==(o=s[r].annotations)){for(var l=0;l<o.length;l++)if(o[l].annotName===e){var d=this.modifyAnnotationProperties(o[l],i,n);o[l]=d}this.pdfViewerBase.isStorageExceed||window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_"+n),s[r]&&(s[r].annotations=o);var h=JSON.stringify(s);this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_"+n]=h:window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_annotations_"+n,h)}}},e.prototype.modifyAnnotationProperties=function(e,t,i){if(t&&!0===t.isCommentLock&&(e.isCommentLock=t.isCommentLock),t.comments)for(var n=0;n<t.comments.length;n++)!0===t.comments[n].isLock&&(e.comments[n].isLock=t.comments[n].isLock);if(t&&""!==t.note&&void 0!==t.note&&(e.note=t.note),"textMarkup"===i)e.opacity=t.opacity,e.color=t.color,e.allowedInteractions=t.allowedInteractions;else if("sticky"===i||"stamp"===i)t.bounds&&(e.bounds=t.bounds),e.opacity=t.opacity,e.annotationSettings=t.annotationSettings,e.allowedInteractions=t.allowedInteractions,t.stampAnnotationPath&&(e.stampAnnotationPath=t.stampAnnotationPath);else if("ink"===i)t.bounds&&(e.bounds=t.bounds),e.opacity=t.opacity,e.strokeColor=t.strokeColor,e.thickness=t.thickness,e.annotationSettings=t.annotationSettings,e.allowedInteractions=t.allowedInteractions;else if("shape"===i||"shape_measure"===i){if("Line"===t.subType||"Arrow"===t.subType||"Distance"===t.subType||"Perimeter"===t.subType?(t.bounds&&(e.bounds=t.bounds),t.vertexPoint&&(e.vertexPoints=t.vertexPoints),e.opacity=t.opacity,e.fillColor=t.fillColor,e.strokeColor=t.strokeColor,e.thickness=t.thickness,e.borderDashArray=t.borderDashArray,e.lineHeadStart=this.getArrowTypeForCollection(t.lineHeadStartStyle),e.lineHeadEnd=this.getArrowTypeForCollection(t.lineHeadEndStyle),e.annotationSettings=t.annotationSettings,e.allowedInteractions=t.allowedInteractions):(t.bounds&&(e.bounds=t.bounds),t.vertexPoint&&(e.vertexPoints=t.vertexPoints),e.opacity=t.opacity,e.fillColor=t.fillColor,e.strokeColor=t.strokeColor,e.thickness=t.thickness,e.annotationSettings=t.annotationSettings,e.allowedInteractions=t.allowedInteractions,t.calibrate&&e.annotName===t.annotationId&&e.calibrate.depth!==t.calibrate.depth&&(e.calibrate.depth=t.calibrate.depth,this.pdfViewer.annotationModule.measureAnnotationModule.volumeDepth=t.calibrate.depth,e.note=this.pdfViewer.annotationModule.measureAnnotationModule.calculateVolume(e.vertexPoints))),this.pdfViewer.enableShapeLabel&&t.labelSettings){var o=t.labelSettings.labelContent;e.note=o,e.fontSize=t.labelSettings.fontSize,e.labelFillColor=t.labelSettings.fillColor,e.labelContent&&(e.labelContent=o),e.labelSettings&&(e.labelSettings=t.labelSettings)}}else"freetext"===i&&(t.bounds&&(e.bounds=t.bounds),e.opacity=t.opacity,e.strokeColor=t.strokeColor,e.thickness=t.thickness,t.content&&(e.dynamicText=t.content),e.fontFamily=t.fontFamily,e.fontSize=t.fontSize,e.fontColor=t.fontColor,e.fillColor=t.fillColor,e.font=t.font?t.font:t.fontStyle,e.textAlign=t.textAlign,e.annotationSettings=t.annotationSettings,e.allowedInteractions=t.allowedInteractions,e.isReadonly=t.isReadonly);return e.customData=t.customData,e.modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),e.isPrint=t.isPrint,t.annotationSettings&&!sf.base.isNullOrUndefined(t.annotationSettings.isLock)&&(e.isLocked=t.annotationSettings.isLock),e},e.prototype.updateAnnotationAuthor=function(e,t){var i;return"sticky"===e?i="Guest"!==this.pdfViewer.stickyNotesSettings.author?this.pdfViewer.stickyNotesSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest":"stamp"===e?i="Guest"!==this.pdfViewer.stampSettings.author?this.pdfViewer.stampSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest":"shape"===e?"Line"===t?i="Guest"!==this.pdfViewer.lineSettings.author?this.pdfViewer.lineSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest":"LineWidthArrowHead"===t||"Arrow"===t?i="Guest"!==this.pdfViewer.arrowSettings.author?this.pdfViewer.arrowSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest":"Circle"===t||"Ellipse"===t||"Oval"===t?i="Guest"!==this.pdfViewer.circleSettings.author?this.pdfViewer.circleSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest":"Rectangle"===t||"Square"===t?i="Guest"!==this.pdfViewer.rectangleSettings.author?this.pdfViewer.rectangleSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest":"Polygon"===t&&(i="Guest"!==this.pdfViewer.polygonSettings.author?this.pdfViewer.polygonSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest"):"measure"===e?"Distance"===t||"Distance calculation"===t?i="Guest"!==this.pdfViewer.distanceSettings.author?this.pdfViewer.distanceSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest":"Perimeter"===t||"Perimeter calculation"===t?i="Guest"!==this.pdfViewer.perimeterSettings.author?this.pdfViewer.perimeterSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest":"Radius"===t||"Radius calculation"===t?i="Guest"!==this.pdfViewer.radiusSettings.author?this.pdfViewer.radiusSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest":"Area"===t||"Area calculation"===t?i="Guest"!==this.pdfViewer.areaSettings.author?this.pdfViewer.areaSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest":"Volume"!==t&&"Volume calculation"!==t||(i="Guest"!==this.pdfViewer.volumeSettings.author?this.pdfViewer.volumeSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest"):"textMarkup"===e?i="Highlight"===t?"Guest"!==this.pdfViewer.highlightSettings.author?this.pdfViewer.highlightSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest":"Underline"===t?"Guest"!==this.pdfViewer.underlineSettings.author?this.pdfViewer.underlineSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest":"Strikethrough"===t?"Guest"!==this.pdfViewer.strikethroughSettings.author?this.pdfViewer.strikethroughSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest":this.pdfViewer.annotationSettings.author:"freeText"===e?i="Guest"!==this.pdfViewer.freeTextSettings.author?this.pdfViewer.freeTextSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest":"ink"===e&&(i="Guest"!==this.pdfViewer.inkAnnotationSettings.author?this.pdfViewer.inkAnnotationSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest"),i||(i=this.pdfViewer.annotationSettings.author),i},e.prototype.nameToHash=function(e){var t={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",yellow:"#ffff00",yellowgreen:"#9acd32",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkred:"#8b0000",darksalmon:"#e9967a",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",indigo:"#4b0082",ivory:"#fffff0",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",pink:"#ffc0cb",plum:"#dda0dd",steelblue:"#4682b4",violet:"#ee82ee",powderblue:"#b0e0e6",purple:"#800080",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0"};return void 0!==t[e.toLowerCase()]?t[e.toLowerCase()]:""},e.prototype.updateFreeTextFontStyle=function(e){return 1===e.isBold?1:2===e.isItalic?2:4===e.isUnderline?4:e.isStrikeout?8:{isBold:e.isBold,isItalic:e.isItalic,isUnderline:e.isUnderline,isStrikeout:e.isUnderline}},e.prototype.setFreeTextFontStyle=function(e){return 1===e?{isBold:!0}:2===e?{isItalic:!0}:4===e?{isUnderline:!0}:8===e?{isStrikeout:!0}:{isBold:e.isBold,isItalic:e.isItalic,isUnderline:e.isUnderline,isStrikeout:e.isUnderline}},e.prototype.findAnnotationSettings=function(e,t){var i=this.pdfViewer.annotationSettings;if(e){var n=e.shapeAnnotationType;"StickyNotes"===n&&this.pdfViewer.stickyNotesSettings?i=this.pdfViewer.stickyNotesSettings:"Stamp"===n||"Image"===n?(i=this.pdfViewer.stampSettings,"image"!==n&&"Image"!==n||(i=this.pdfViewer.customStampSettings)):"FreeText"===n?i=this.pdfViewer.freeTextSettings:"HandWrittenSignature"===n?i=this.pdfViewer.handWrittenSignatureSettings:""===e.measureType?"Line"===n?i=this.pdfViewer.lineSettings:"Arrow"===n||"LineWidthArrowHead"===n?i=this.pdfViewer.arrowSettings:"Rectangle"===n?i=this.pdfViewer.rectangleSettings:"Circle"===n||"Ellipse"===n?i=this.pdfViewer.circleSettings:"Polygon"===n&&this.pdfViewer.polygonSettings&&(i=this.pdfViewer.polygonSettings):""!==e.measureType&&("Distance"===e.measureType?i=this.pdfViewer.distanceSettings:"Perimeter"===e.measureType?i=this.pdfViewer.perimeterSettings:"Area"===e.measureType?i=this.pdfViewer.areaSettings:"Radius"===e.measureType?i=this.pdfViewer.radiusSettings:"Volume"===e.measureType&&(i=this.pdfViewer.volumeSettings))}var o=e?e.annotationSettings:{};return o&&(o.minWidth||o.maxWidth||o.minHeight||o.maxHeight)?this.updateSettings(o):t?this.updateSettings(i):i},e.prototype.updateAnnotationSettings=function(e){var t=this.pdfViewer.annotationSettings;return"sticky"===e.AnnotType?t=this.pdfViewer.stickyNotesSettings:"stamp"===e.AnnotType||"image"===e.AnnotType||"Image"===e.AnnotType?(t=this.pdfViewer.stampSettings,"image"!==e.Subject&&"Image"!==e.Subject||(t=this.pdfViewer.customStampSettings)):"freeText"===e.AnnotType?t=this.pdfViewer.freeTextSettings:"ink"===e.AnnotType?t=this.pdfViewer.inkAnnotationSettings:"shape"===e.AnnotType?"Line"===e.Subject?t=this.pdfViewer.lineSettings:"Arrow"===e.Subject||"LineWidthArrowHead"===e.Subject?t=this.pdfViewer.arrowSettings:"Rectangle"===e.Subject||"Square"===e.Subject?t=this.pdfViewer.rectangleSettings:"Circle"===e.Subject||"Ellipse"===e.Subject||"Oval"===e.Subject?t=this.pdfViewer.circleSettings:"Polygon"===e.Subject&&(t=this.pdfViewer.polygonSettings):"shape_measure"===e.AnnotType&&("Distance"===e.Subject||"Distance calculation"===e.Subject?t=this.pdfViewer.distanceSettings:"Perimeter"===e.Subject||"Perimeter calculation"===e.Subject?t=this.pdfViewer.perimeterSettings:"Area"===e.Subject||"Area calculation"===e.Subject?t=this.pdfViewer.areaSettings:"Radius"===e.Subject||"Radius calculation"===e.Subject?t=this.pdfViewer.radiusSettings:"Volume"!==e.Subject&&"Volume calculation"!==e.Subject||(t=this.pdfViewer.volumeSettings)),this.updateSettings(t)},e.prototype.updateSettings=function(e){var t=0,i=0,n=0,o=0,a=this.pdfViewer.annotationSettings;return e.minWidth||e.maxWidth||e.minHeight||e.maxHeight?(t=e.maxHeight?e.maxHeight:2e3,i=e.maxWidth?e.maxWidth:2e3,n=e.minHeight?e.minHeight:0,o=e.minWidth?e.minWidth:0):(a.minWidth||a.maxWidth||a.minHeight||a.maxHeight)&&(t=a.maxHeight?a.maxHeight:2e3,i=a.maxWidth?a.maxWidth:2e3,n=a.minHeight?a.minHeight:0,o=a.minWidth?a.minWidth:0),{minWidth:o,maxWidth:i,minHeight:n,maxHeight:t,isLock:e.isLock?e.isLock:!!a.isLock&&a.isLock,isPrint:e.isPrint}},e.prototype.getOverlappedAnnotations=function(e,t){for(var i,n=this.getPageShapeAnnotations(t),o=0;o<n.length;o++)if(e.annotName===n[o].annotName){i=n[o];break}return this.findOverlappedAnnotations(i,n)},e.prototype.getPageShapeAnnotations=function(e){var t=[],i=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_ink");if(i){var n=JSON.parse(i);if(n)if(n[V=this.getPageCollection(n,e)]){var o=n[V].annotations;if(o&&o.length>0)for(var a=0;a<o.length;a++)t.push(o[a])}}var s=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_shape");if(s){var r=JSON.parse(s);if(r)if(r[V=this.getPageCollection(r,e)]){var l=r[V].annotations;if(l&&l.length>0)for(a=0;a<l.length;a++)t.push(l[a])}}var d=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_shape_measure");if(d){var h=JSON.parse(d);if(h)if(h[V=this.getPageCollection(h,e)]){var p=h[V].annotations;if(p&&p.length>0)for(a=0;a<p.length;a++)t.push(p[a])}}var c=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_stamp");if(c){var u=JSON.parse(c);if(u)if(u[V=this.getPageCollection(u,e)]){var f=u[V].annotations;if(f&&f.length>0)for(a=0;a<f.length;a++)t.push(f[a])}}var g=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_freetext");if(g){var m=JSON.parse(g);if(m)if(m[V=this.getPageCollection(m,e)]){var w=m[V].annotations;if(w&&w.length>0)for(a=0;a<w.length;a++)t.push(w[a])}}var y=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_sticky");if(y){var S=JSON.parse(y);if(S)if(S[V=this.getPageCollection(S,e)]){var v=S[V].annotations;if(v&&v.length>0)for(a=0;a<v.length;a++)t.push(v[a])}}var b=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_textMarkup");if(b){var V,A=JSON.parse(b);if(A)if(A[V=this.getPageCollection(A,e)]){var x=A[V].annotations;if(x&&x.length>0)for(a=0;a<x.length;a++)t.push(x[a])}}return t},e.prototype.findOverlappedAnnotations=function(e,t){if(this.overlappedAnnotations=[],e&&e.bounds)if("textMarkup"===e.shapeAnnotationType)for(var i=0;i<e.bounds.length;i++){var n=this.orderTextMarkupBounds(e.bounds[i]);this.calculateOverlappedAnnotationBounds(e,n,t)}else this.calculateOverlappedAnnotationBounds(e,e.bounds,t);return this.overlappedAnnotations},e.prototype.calculateOverlappedAnnotationBounds=function(e,t,i){var n=t;"Ink"===e.shapeAnnotationType&&(n={left:t.x,top:t.y,height:t.height,width:t.width});for(var o=parseInt(n.left),a=parseInt(n.top),s=parseInt(n.top+n.height),r=parseInt(n.left+n.width),l=0;l<i.length;l++)if(e.annotName===i[l].annotName)this.checkOverlappedCollections(i[l],this.overlappedAnnotations);else{var d=1;"textMarkup"===i[l].shapeAnnotationType&&(d=i[l].bounds.length);for(var h=0;h<d;h++){var p=void 0,c=i[l].bounds;if("Ink"===i[l].shapeAnnotationType&&(c={left:c.x,top:c.y,height:c.height,width:c.width}),p="textMarkup"!==i[l].shapeAnnotationType&&1===d?c:this.orderTextMarkupBounds(c[h])){var u=!1;(o<=parseInt(p.left)&&r>=parseInt(p.left)||o<=parseInt(p.left+p.width)&&r>=parseInt(p.left+p.width))&&(u=!0),u&&(u=a<=parseInt(p.top)&&s>=parseInt(p.top)||a<=parseInt(p.top+p.height)&&s>=parseInt(p.top+p.height)),u?this.checkOverlappedCollections(i[l],this.overlappedAnnotations):((parseInt(p.left)<=o&&parseInt(p.left+p.width)>=o||r>=parseInt(p.left)&&r<=parseInt(p.left+p.width))&&(u=!0),u&&(u=parseInt(p.top)<=a&&parseInt(p.top+p.height)>=a||s>=parseInt(p.top)&&s<=parseInt(p.top+p.height)),u?this.checkOverlappedCollections(i[l],this.overlappedAnnotations):((o<=parseInt(p.left)&&r>=parseInt(p.left)||o<=parseInt(p.left+p.width)&&r>=parseInt(p.left+p.width))&&(u=!0),u&&(u=parseInt(p.top)<=a&&parseInt(p.top+p.height)>=a||s>=parseInt(p.top)&&s<=parseInt(p.top+p.height)),u?this.checkOverlappedCollections(i[l],this.overlappedAnnotations):((parseInt(p.left)<=o&&parseInt(p.left+p.width)>=o||r>=parseInt(p.left)&&r<=parseInt(p.left+p.width))&&(u=!0),u&&(u=a<=parseInt(p.top)&&s>=parseInt(p.top)||a<=parseInt(p.top+p.height)&&s>=parseInt(p.top+p.height)),u&&this.checkOverlappedCollections(i[l],this.overlappedAnnotations))))}}}},e.prototype.findAnnotationMode=function(e,t,i){var n=this.pdfViewer.viewerBase.importedAnnotation[t];if(n){var o=void 0;if("shape"===i?o=n.shapeAnnotation:"shape_measure"===i?o=n.measureShapeAnnotation:"freeText"===i?o=n.freeTextAnnotation:"stamp"===i?o=n.stampAnnotations:"sticky"===i?o=n.stickyNotesAnnotation:"textMarkup"===i&&(o=n.textMarkupAnnotation),o)for(var a=0;a<o.length;a++)if(o[a].AnnotName===e.AnnotName)return"Imported Annotation"}return"Existing Annotation"},e.prototype.checkOverlappedCollections=function(e,t){if(t.length>0){for(var i=!1,n=0;n<t.length;n++)if(e.annotName===t[n].annotName&&e.bounds===t[n].bounds){i=!0;break}i||t.push(e)}else t.push(e)},e.prototype.orderTextMarkupBounds=function(e){return e.Left||e.Width?{left:e.Left,top:e.Top,height:e.Height,width:e.Width}:{left:e.left,top:e.top,height:e.height,width:e.width}},e.prototype.updateModifiedDate=function(e){if(e.modifiedDate&&(e.modifiedDate=this.setAnnotationModifiedDate(e.modifiedDate)),e.comments&&e.comments.length>0)for(var t=0;t<e.comments.length;t++)e.comments[t].modifiedDate&&(e.comments[t].modifiedDate=this.setAnnotationModifiedDate(e.comments[t].modifiedDate),e.comments[t].review&&e.comments[t].review.modifiedDate&&(e.comments[t].review.modifiedDate=this.setAnnotationModifiedDate(e.comments[t].review.modifiedDate)));e.review&&e.review.modifiedDate&&(e.review.modifiedDate=this.setAnnotationModifiedDate(e.review.modifiedDate))},e.prototype.setAnnotationModifiedDate=function(e){var t;if(""===e)return e;var i=parseInt(e.split(" ")[1].split(":")[0]);t=3===e.split(" ").length?i+":"+e.split(" ")[1].split(":")[1]+":"+e.split(" ")[1].split(":")[2]+" "+e.split(" ")[2]:i>=12?12===i?i+":"+e.split(" ")[1].split(":")[1]+":"+e.split(" ")[1].split(":")[2]+" PM":i-12+":"+e.split(" ")[1].split(":")[1]+":"+e.split(" ")[1].split(":")[2]+" PM":i+":"+e.split(" ")[1].split(":")[1]+":"+e.split(" ")[1].split(":")[2]+" AM";var n=e.split(" ")[0];return e.split(",").length>1?n+" "+t:n+", "+t},e.prototype.clear=function(){this.shapeAnnotationModule&&(this.shapeAnnotationModule.shapeCount=0),this.measureAnnotationModule&&(this.measureAnnotationModule.measureShapeCount=0),this.textMarkupAnnotationModule&&this.textMarkupAnnotationModule.clear(),this.stickyNotesAnnotationModule&&this.stickyNotesAnnotationModule.clear(),this.pdfViewer.refresh(),this.undoCommentsElement=[],this.redoCommentsElement=[],this.overlappedAnnotations=[],this.previousIndex=null,this.pdfViewer.annotation&&this.pdfViewer.annotation.stampAnnotationModule&&(this.pdfViewer.annotation.stampAnnotationModule.stampPageNumber=[]),this.pdfViewer.annotation&&this.pdfViewer.annotation.freeTextAnnotationModule&&(this.pdfViewer.annotation.freeTextAnnotationModule.freeTextPageNumbers=[],this.freeTextAnnotationModule.previousText="Type Here"),this.pdfViewer.annotation&&this.pdfViewer.annotation.inkAnnotationModule&&(this.pdfViewer.annotation.inkAnnotationModule.inkAnnotationindex=[]),window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_shape"),window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_shape_measure"),window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_stamp"),window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_sticky")},e.prototype.retrieveAnnotationCollection=function(){return this.pdfViewer.annotationCollection},e.prototype.checkAllowedInteractions=function(e,t){var i=this.updateAnnotationAllowedInteractions(t);if(i&&i.length>0)for(var n=0;n<i.length;n++)if("Select"===e){if("Move"===i[n]||"Resize"===i[n]||"Delete"===i[n]||"PropertyChange"===i[n]||"Select"===i[n])return!0}else if(i[n]===e)return!0;return!1},e.prototype.checkContextMenuDeleteItem=function(e){var t=this.findCurrentAnnotation();t&&t.annotationSettings&&(t.annotationSettings.isLock?this.checkAllowedInteractions("Delete",t)?e.enableItems([this.pdfViewer.localeObj.getConstant("Delete Context")],!0):e.enableItems([this.pdfViewer.localeObj.getConstant("Delete Context")],!1):e.enableItems([this.pdfViewer.localeObj.getConstant("Delete Context")],!0))},e.prototype.isEnableDelete=function(){var e=this.findCurrentAnnotation();return!(!e||!e.annotationSettings)&&(!e.annotationSettings.isLock||!!this.checkAllowedInteractions("Delete",e))},e.prototype.findCurrentAnnotation=function(){return this.textMarkupAnnotationModule&&this.textMarkupAnnotationModule.currentTextMarkupAnnotation?this.textMarkupAnnotationModule.currentTextMarkupAnnotation:this.pdfViewer.selectedItems.annotations&&this.pdfViewer.selectedItems.annotations[0]?this.pdfViewer.selectedItems.annotations[0]:void 0},e.prototype.updateAnnotationAllowedInteractions=function(e){var t=["None"];return e&&("FreeText"===e.shapeAnnotationType&&this.pdfViewer.freeTextSettings.allowedInteractions?t=this.checkAllowedInteractionSettings(this.pdfViewer.freeTextSettings.allowedInteractions,e.allowedInteractions):"Ink"===e.shapeAnnotationType&&this.pdfViewer.inkAnnotationSettings.allowedInteractions?t=this.checkAllowedInteractionSettings(this.pdfViewer.inkAnnotationSettings.allowedInteractions,e.allowedInteractions):"StickyNotes"===e.shapeAnnotationType&&this.pdfViewer.stickyNotesSettings.allowedInteractions?t=this.checkAllowedInteractionSettings(this.pdfViewer.stickyNotesSettings.allowedInteractions,e.allowedInteractions):"Stamp"===e.shapeAnnotationType&&this.pdfViewer.stampSettings.allowedInteractions?t=this.checkAllowedInteractionSettings(this.pdfViewer.stampSettings.allowedInteractions,e.allowedInteractions):"Image"===e.shapeAnnotationType&&this.pdfViewer.customStampSettings.allowedInteractions?t=this.checkAllowedInteractionSettings(this.pdfViewer.customStampSettings.allowedInteractions,e.allowedInteractions):"textMarkup"===e.shapeAnnotationType?"Highlight"===e.textMarkupAnnotationType&&this.pdfViewer.highlightSettings.allowedInteractions?t=this.checkAllowedInteractionSettings(this.pdfViewer.highlightSettings.allowedInteractions,e.allowedInteractions):"Underline"===e.textMarkupAnnotationType&&this.pdfViewer.underlineSettings.allowedInteractions?t=this.checkAllowedInteractionSettings(this.pdfViewer.underlineSettings.allowedInteractions,e.allowedInteractions):"Strikethrough"===e.textMarkupAnnotationType&&this.pdfViewer.strikethroughSettings.allowedInteractions&&(t=this.checkAllowedInteractionSettings(this.pdfViewer.strikethroughSettings.allowedInteractions,e.allowedInteractions)):""!==e.measureType?"Distance"===e.measureType&&this.pdfViewer.distanceSettings.allowedInteractions?t=this.checkAllowedInteractionSettings(this.pdfViewer.distanceSettings.allowedInteractions,e.allowedInteractions):"Perimeter"===e.measureType&&this.pdfViewer.perimeterSettings.allowedInteractions?t=this.checkAllowedInteractionSettings(this.pdfViewer.perimeterSettings.allowedInteractions,e.allowedInteractions):"Radius"===e.measureType&&this.pdfViewer.radiusSettings.allowedInteractions?t=this.checkAllowedInteractionSettings(this.pdfViewer.radiusSettings.allowedInteractions,e.allowedInteractions):"Area"===e.measureType&&this.pdfViewer.areaSettings.allowedInteractions?t=this.checkAllowedInteractionSettings(this.pdfViewer.areaSettings.allowedInteractions,e.allowedInteractions):"Volume"===e.measureType&&this.pdfViewer.volumeSettings.allowedInteractions&&(t=this.checkAllowedInteractionSettings(this.pdfViewer.volumeSettings.allowedInteractions,e.allowedInteractions)):"Line"===e.shapeAnnotationType&&this.pdfViewer.lineSettings.allowedInteractions?t=this.checkAllowedInteractionSettings(this.pdfViewer.lineSettings.allowedInteractions,e.allowedInteractions):"Arrow"!==e.shapeAnnotationType&&"LineWidthArrowHead"!==e.shapeAnnotationType||!this.pdfViewer.arrowSettings.allowedInteractions?"Circle"!==e.shapeAnnotationType&&"Ellipse"!==e.shapeAnnotationType&&"Oval"!==e.shapeAnnotationType||!this.pdfViewer.circleSettings.allowedInteractions?"Rectangle"!==e.shapeAnnotationType&&"Square"!==e.shapeAnnotationType||!this.pdfViewer.rectangleSettings.allowedInteractions?"Polygon"===e.shapeAnnotationType&&this.pdfViewer.polygonSettings.allowedInteractions&&(t=this.checkAllowedInteractionSettings(this.pdfViewer.polygonSettings.allowedInteractions,e.allowedInteractions)):t=this.checkAllowedInteractionSettings(this.pdfViewer.rectangleSettings.allowedInteractions,e.allowedInteractions):t=this.checkAllowedInteractionSettings(this.pdfViewer.circleSettings.allowedInteractions,e.allowedInteractions):t=this.checkAllowedInteractionSettings(this.pdfViewer.arrowSettings.allowedInteractions,e.allowedInteractions)),t},e.prototype.checkIsLockSettings=function(e){var t=!1;return e&&("FreeText"===e.shapeAnnotationType?t=this.checkLockSettings(this.pdfViewer.freeTextSettings.isLock):"Ink"===e.shapeAnnotationType?t=this.checkLockSettings(this.pdfViewer.inkAnnotationSettings.isLock):"StickyNotes"===e.shapeAnnotationType?t=this.checkLockSettings(this.pdfViewer.stickyNotesSettings.isLock):"Stamp"===e.shapeAnnotationType?t=this.checkLockSettings(this.pdfViewer.stampSettings.isLock):"Image"===e.shapeAnnotationType?t=this.checkLockSettings(this.pdfViewer.customStampSettings.isLock):"textMarkup"===e.shapeAnnotationType?"Highlight"===e.textMarkupAnnotationType?t=this.checkLockSettings(this.pdfViewer.highlightSettings.isLock):"Underline"===e.textMarkupAnnotationType?t=this.checkLockSettings(this.pdfViewer.underlineSettings.isLock):"Strikethrough"===e.textMarkupAnnotationType&&(t=this.checkLockSettings(this.pdfViewer.strikethroughSettings.isLock)):""!==e.measureType?"Distance"===e.measureType?t=this.checkLockSettings(this.pdfViewer.distanceSettings.isLock):"Perimeter"===e.measureType?t=this.checkLockSettings(this.pdfViewer.perimeterSettings.isLock):"Radius"===e.measureType?t=this.checkLockSettings(this.pdfViewer.radiusSettings.isLock):"Area"===e.measureType?t=this.checkLockSettings(this.pdfViewer.areaSettings.isLock):"Volume"===e.measureType&&(t=this.checkLockSettings(this.pdfViewer.volumeSettings.isLock)):"Line"===e.shapeAnnotationType?t=this.checkLockSettings(this.pdfViewer.lineSettings.isLock):"Arrow"===e.shapeAnnotationType||"LineWidthArrowHead"===e.shapeAnnotationType?t=this.checkLockSettings(this.pdfViewer.arrowSettings.isLock):"Circle"===e.shapeAnnotationType||"Ellipse"===e.shapeAnnotationType||"Oval"===e.shapeAnnotationType?t=this.checkLockSettings(this.pdfViewer.circleSettings.isLock):"Rectangle"===e.shapeAnnotationType||"Square"===e.shapeAnnotationType?t=this.checkLockSettings(this.pdfViewer.rectangleSettings.isLock):"Polygon"===e.shapeAnnotationType&&(t=this.checkLockSettings(this.pdfViewer.polygonSettings.isLock))),t},e.prototype.checkLockSettings=function(e){var t=!1;return(e||this.pdfViewer.annotationSettings.isLock)&&(t=!0),t},e.prototype.restrictContextMenu=function(){var e=!1,t=this.findCurrentAnnotation();return t&&this.checkIsLockSettings(t)&&this.checkAllowedInteractions("Select",t)&&(e=!0),e},e.prototype.checkAllowedInteractionSettings=function(e,t){if(t){if(1!==t.length)return t;if("None"!==t[0])return t}if(e){if(1!==e.length)return e;if("None"!==e[0])return e}return this.pdfViewer.annotationSettings.allowedInteractions?this.pdfViewer.annotationSettings.allowedInteractions:["None"]},e.prototype.getValue=function(e,t){if(t=t?t.toLowerCase():"hex","r"===e[0]){var i=this.convertRgbToNumberArray(e);if("hex"===t||"hexa"===t){var n=this.rgbToHex(i);return"hex"===t?n.slice(0,7):n}return"hsv"===t?this.convertToHsvString(this.rgbToHsv.apply(this,i.slice(0,3))):"hsva"===t?this.convertToHsvString(this.rgbToHsv.apply(this,i)):"null"}if("h"===e[0]){i=this.hsvToRgb.apply(this,this.convertRgbToNumberArray(e));if("rgba"===t)return this.convertToRgbString(i);if("hex"===t||"hexa"===t){n=this.rgbToHex(i);return"hex"===t?n.slice(0,7):n}return"rgb"===t?this.convertToRgbString(i.slice(0,3)):"null"}e=this.roundValue(e);var o=this.hexToRgb(e);return"rgb"!==t&&"hsv"!==t||(o=o.slice(0,3)),"rgba"===t||"rgb"===t?this.convertToRgbString(o):"hsva"===t||"hsv"===t?this.convertToHsvString(this.rgbToHsv.apply(this,o)):"hex"===t?e.slice(0,7):"a"===t?o[3].toString():"null"},e.prototype.convertRgbToNumberArray=function(e){return e.slice(e.indexOf("(")+1,e.indexOf(")")).split(",").map((function(e,t){return 3!==t?parseInt(e,10):parseFloat(e)}))},e.prototype.convertToRgbString=function(e){return e.length?4===e.length?"rgba("+e.join()+")":"rgb("+e.join()+")":""},e.prototype.convertToHsvString=function(e){return 4===e.length?"hsva("+e.join()+")":"hsv("+e.join()+")"},e.prototype.roundValue=function(e){if(!e)return"";"#"!==e[0]&&(e="#"+e);var t=e.length;if(4===t&&(e+="f",t=5),5===t){for(var i="",n=1,o=e.length;n<o;n++)i+=e.charAt(n)+e.charAt(n);e="#"+i,t=9}return 7===t&&(e+="ff"),e},e.prototype.hexToRgb=function(e){if(!e)return[];9!==(e=e.trim()).length&&(e=this.roundValue(e));var t=Number((parseInt(e.slice(-2),16)/255).toFixed(2));e=e.slice(1,7);var i=parseInt(e,16),n=[];return n.push(i>>16&255),n.push(i>>8&255),n.push(255&i),n.push(t),n},e.prototype.rgbToHsv=function(e,t,i,n){e/=255,t/=255,i/=255;var o,a,s=Math.max(e,t,i),r=Math.min(e,t,i),l=s,d=s-r;if(a=0===s?0:d/s,s===r)o=0;else{switch(s){case e:o=(t-i)/d+(t<i?6:0);break;case t:o=(i-e)/d+2;break;case i:o=(e-t)/d+4}o/=6}var h=[Math.round(360*o),Math.round(1e3*a)/10,Math.round(1e3*l)/10];return sf.base.isNullOrUndefined(n)||h.push(n),h},e.prototype.hsvToRgb=function(e,t,i,n){var o,a,s,r,l,d,h,p;if(i/=100,0===(t/=100))return o=a=s=i,[Math.round(255*o),Math.round(255*a),Math.round(255*s),n];switch(d=i*(1-t),h=i*(1-t*(l=(e/=60)-(r=Math.floor(e)))),p=i*(1-t*(1-l)),r){case 0:o=i,a=p,s=d;break;case 1:o=h,a=i,s=d;break;case 2:o=d,a=i,s=p;break;case 3:o=d,a=h,s=i;break;case 4:o=p,a=d,s=i;break;default:o=i,a=d,s=h}var c=[Math.round(255*o),Math.round(255*a),Math.round(255*s)];return sf.base.isNullOrUndefined(n)||c.push(n),c},e.prototype.rgbToHex=function(e){return e.length?"#"+this.hex(e[0])+this.hex(e[1])+this.hex(e[2])+(sf.base.isNullOrUndefined(e[3])?"":0!==e[3]?(Math.round(255*e[3])+65536).toString(16).substr(-2):"00"):""},e.prototype.exportAnnotationsAsStream=function(e){var t=this;if(this.pdfViewer.annotationModule&&this.pdfViewer.viewerBase.updateExportItem())return new Promise((function(i,n){t.pdfViewer.viewerBase.createRequestForExportAnnotations(!0,e,!0).then((function(e){i(e)}))}));return null},e.prototype.hex=function(e){return sf.base.isNullOrUndefined(e)?"0":("0"+e.toString(16)).slice(-2)},e.prototype.cloneObject=function(e){return JSON.parse(JSON.stringify(e))},e.prototype.destroy=function(){this.destroyPropertiesWindow(),this.textMarkupAnnotationModule.clear()},e.prototype.getModuleName=function(){return"Annotation"},e.prototype.getVertexPointsXY=function(e){for(var t=[],i=0;i<e.length;i++)t[i]={X:e[i].x,Y:e[i].y};return t},e.prototype.addAnnotation=function(e,t,i,n,o){var a={x:1,y:1},s=0;t&&t.pageNumber&&t.pageNumber>0&&(s=t.pageNumber?t.pageNumber-1:0);var r=null,l=[];this.pdfViewer.annotation.triggerAnnotationUnselectEvent(),"FreeText"==e?(l[s]=this.pdfViewer.annotation.freeTextAnnotationModule.updateAddAnnotationDetails(t,a),this.pdfViewer.annotation.freeTextAnnotationModule.isAddAnnotationProgramatically=!0):"StickyNotes"==e?(l[s]=this.pdfViewer.annotation.stickyNotesAnnotationModule.updateAddAnnotationDetails(t,a),this.pdfViewer.annotation.stickyNotesAnnotationModule.isAddAnnotationProgramatically=!0):"Highlight"==e||"Underline"==e||"Strikethrough"==e?(("Highlight"==e||"Underline"==e||"Strikethrough"==e)&&(r=t),l[s]=this.pdfViewer.annotation.textMarkupAnnotationModule.updateAddAnnotationDetails(e,r),this.pdfViewer.annotation.textMarkupAnnotationModule.isAddAnnotationProgramatically=!0):"Line"===e||"Arrow"===e||"Rectangle"===e||"Circle"===e||"Polygon"===e?(("Line"==e||"Arrow"==e||"Rectangle"==e||"Circle"==e||"Polygon"==e)&&(r=t),l[s]=this.pdfViewer.annotation.shapeAnnotationModule.updateAddAnnotationDetails(e,r,a),this.pdfViewer.annotation.shapeAnnotationModule.isAddAnnotationProgramatically=!0):"Distance"===e||"Perimeter"===e||"Area"===e||"Radius"===e||"Volume"===e?(("Distance"==e||"Perimeter"==e||"Area"==e||"Radius"==e||"Volume"==e)&&(r=t),l[s]=this.pdfViewer.annotation.measureAnnotationModule.updateAddAnnotationDetails(e,r,a),this.pdfViewer.annotation.measureAnnotationModule.isAddAnnotationProgramatically=!0):"Stamp"===e?(t&&t.customStamps,l[s]=this.pdfViewer.annotation.stampAnnotationModule.updateAddAnnotationDetails(t,a,s,i,n,o),this.pdfViewer.annotation.stampAnnotationModule.isAddAnnotationProgramatically=!0):"Ink"===e&&(l[s]=this.pdfViewer.annotation.inkAnnotationModule.updateAddAnnotationDetails(t,a,s),this.pdfViewer.annotation.inkAnnotationModule.isAddAnnotationProgramatically=!0);var d={pdfAnnotation:l};this.pdfViewerBase.isAddAnnotation=!0,this.pdfViewerBase.importAnnotations(d),this.pdfViewerBase.isAddAnnotation=!1},e.prototype.triggerAnnotationAddEvent=function(e){var t=e.shapeAnnotationType;if("Stamp"===t||"Image"===t||"Path"===t||"FreeText"===t||"StickyNotes"===t||"Ink"===t){var i=void 0;i="FreeText"===t?{opacity:e.opacity,borderColor:e.strokeColor,borderWidth:e.thickness,author:e.author,subject:e.subject,modifiedDate:e.modifiedDate,fillColor:e.fillColor,fontSize:e.fontSize,width:e.bounds.width,height:e.bounds.height,fontColor:e.fontColor,fontFamily:e.fontFamily,defaultText:e.dynamicText,fontStyle:e.font,textAlignment:e.textAlign}:{opacity:e.opacity,fillColor:e.fillColor,strokeColor:e.strokeColor,thickness:e.thickness,author:e.author,subject:e.subject,modifiedDate:e.modifiedDate,data:e.data};var n={left:e.bounds.x,top:e.bounds.y,width:e.bounds.width,height:e.bounds.height},o=this.getAnnotationType(e.shapeAnnotationType,e.measureType);this.pdfViewer.fireAnnotationAdd(e.pageIndex,e.annotName,o,n,i)}else if("SignatureText"===t||"SignatureImage"===t||"HandWrittenSignature"===t){n={left:e.bounds.x,top:e.bounds.y,width:e.bounds.width,height:e.bounds.height};this.pdfViewer.fireSignatureAdd(e.pageIndex,e.signatureName,e.shapeAnnotationType,n,e.opacity,e.strokeColor,e.thickness,e.data)}else{var a={opacity:e.opacity,fillColor:e.fillColor,strokeColor:e.strokeColor,thickness:e.thickness,author:e.author,subject:e.subject,modifiedDate:e.modifiedDate};n={left:e.bounds.x,top:e.bounds.y,width:e.bounds.width,height:e.bounds.height};"Line"!==(o=this.getAnnotationType(e.shapeAnnotationType,e.measureType))&&"Arrow"!==o&&"Distance"!==o&&"Perimeter"!==o||(a.lineHeadStartStyle=this.getArrowString(e.sourceDecoraterShapes),a.lineHeadEndStyle=this.getArrowString(e.taregetDecoraterShapes),a.borderDashArray=e.borderDashArray);var s=void 0;this.pdfViewer.enableShapeLabel?(s={fontColor:e.fontColor,fontSize:e.fontSize,fontFamily:e.fontFamily,opacity:e.labelOpacity,labelContent:e.labelContent,fillColor:e.labelFillColor},this.pdfViewer.fireAnnotationAdd(e.pageIndex,e.annotName,o,n,a,null,null,null,s)):this.pdfViewer.fireAnnotationAdd(e.pageIndex,e.annotName,o,n,a)}},e.prototype.triggerAnnotationUnselectEvent=function(){if(this.pdfViewer.selectedItems.annotations&&this.pdfViewer.selectedItems.annotations[0]){var e=this.pdfViewer.selectedItems.annotations[0];"HandWrittenSignature"!==e.shapeAnnotationType&&"SignatureText"!==e.shapeAnnotationType&&"SignatureImage"!==e.shapeAnnotationType&&"Path"!==e.shapeAnnotationType&&(this.pdfViewer.fireAnnotationUnSelect(e.annotName,e.pageIndex,e),this.pdfViewer.clearSelection(e.pageIndex))}},e.prototype.updateFontFamilyRenderSize=function(e,t){var i=this.freeTextAnnotationModule;i.inputBoxElement.style.fontFamily=t,i.autoFitFreeText();var n=this.pdfViewerBase.getZoomFactor(),o=(parseFloat(i.inputBoxElement.style.paddingLeft),e.bounds.height*n),a=parseFloat(i.inputBoxElement.style.width)-8;a/=n;var s=(o/=n)-e.bounds.height,r=void 0;s>0?r=(r=e.wrapper.offsetY+s/2)>0?r:void 0:(s=Math.abs(s),r=(r=e.wrapper.offsetY-s/2)>0?r:void 0);var l=a-e.bounds.width,d=void 0;l>0?d=(d=e.wrapper.offsetX+l/2)>0?d:void 0:(l=Math.abs(l),d=e.wrapper.offsetX-l/2),e.bounds.width=a,e.bounds.height=o,this.pdfViewer.nodePropertyChange(e,{fontFamily:t,bounds:{width:e.bounds.width,height:e.bounds.height,y:r,x:d}}),this.pdfViewer.renderSelector(e.pageIndex,this.pdfViewer.annotationSelectorSettings),this.modifyInCollections(e,"bounds")},e.prototype.updateCanvas=function(e,t,i,n){var o=this.pdfViewerBase.getZoomRatio();e.width=t*o,e.height=i*o,e.style.width=t+"px",e.style.height=i+"px",e.style.position="absolute",e.style.zIndex="1",this.pdfViewerBase.applyElementStyles(e,n)},e}(),Ye=function(e,t,i,n){return new(i||(i=Promise))((function(o,a){function s(e){try{l(n.next(e))}catch(e){a(e)}}function r(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){e.done?o(e.value):new i((function(t){t(e.value)})).then(s,r)}l((n=n.apply(e,t||[])).next())}))},Xe=function(e,t){var i,n,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function r(a){return function(r){return function(a){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],n=0}finally{i=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,r])}}},Je=function(){function e(e,t){this.pdfViewer=e,this.pdfViewerBase=t}return e.prototype.renderHyperlinkContent=function(e,t){if(this.pdfViewer.enableHyperlink){var i=e.hyperlinks,n=e.hyperlinkBounds;this.linkAnnotation=e.linkAnnotation,this.linkPage=e.linkPage,this.annotationY=e.annotationLocation,i&&i.length>0&&n.length>0&&this.renderWebLink(i,n,t,e.textWebLinkBorderWidth,e.textWebLinkBorderColor),this.linkAnnotation&&this.linkAnnotation.length>0&&this.linkPage.length>0&&this.renderDocumentLink(this.linkAnnotation,this.linkPage,this.annotationY,t,e.hyperLinkBorderWidth,e.hyperLinkBorderColor)}},e.prototype.disableHyperlinkNavigationUnderObjects=function(e,t,i){if(Re(i,i.pdfViewer,t).length>0)t.target.classList.contains("e-pv-hyperlink")&&(e.style.cursor="move",e.style.pointerEvents="none",e.title="");else{var n=document.getElementsByClassName("e-pv-hyperlink");if(n&&n.length>0)for(var o=0;o<n.length;o++)"none"===n[o].style.pointerEvents&&(n[o].style.pointerEvents="all"),n[o].title||(n[o].title=n[o].href)}},e.prototype.renderWebLink=function(e,t,i,n,o){for(var a=this,s=this,r=!1,l=function(l){var h=sf.base.createElement("a",{id:"weblinkdiv_"+l}),p=t[l];if((h=d.setHyperlinkProperties(h,p,i,l,n,o,!0)).title=e[l],e[l]&&1===e[l].split("http").length){var c="http://"+e[l];h.setAttribute("href",c)}else h.setAttribute("href",e[l]);"CurrentTab"===d.pdfViewer.hyperlinkOpenState?(h.target="_self",h.onclick=function(t){return Ye(a,void 0,void 0,(function(){var i;return Xe(this,(function(n){switch(n.label){case 0:return r?[3,4]:(t.preventDefault(),s.pdfViewerBase.tool instanceof Le||s.pdfViewerBase.tool instanceof Fe?[2,!1]:[3,1]);case 1:return[4,s.pdfViewer.fireHyperlinkClick(e[l],h)];case 2:return(i=n.sent())&&(r=!0,h.click()),[2,i];case 3:return[3,5];case 4:return r=!1,[2,!0];case 5:return[2]}}))}))},h.onmouseover=function(){s.triggerHyperlinkEvent(h)}):"NewTab"===d.pdfViewer.hyperlinkOpenState?(h.target="_blank",h.onclick=function(t){return Ye(a,void 0,void 0,(function(){var i;return Xe(this,(function(n){switch(n.label){case 0:return r?[3,4]:(t.preventDefault(),s.pdfViewerBase.tool instanceof Le||s.pdfViewerBase.tool instanceof Fe?[2,!1]:[3,1]);case 1:return[4,s.pdfViewer.fireHyperlinkClick(e[l],h)];case 2:return(i=n.sent())&&(r=!0,h.click()),[2,i];case 3:return[3,5];case 4:return r=!1,[2,!0];case 5:return[2]}}))}))},h.onmouseover=function(){s.triggerHyperlinkEvent(h)}):"NewWindow"===d.pdfViewer.hyperlinkOpenState&&(h.onclick=function(t){return Ye(a,void 0,void 0,(function(){return Xe(this,(function(i){switch(i.label){case 0:return t.preventDefault(),s.pdfViewerBase.tool instanceof Le||s.pdfViewerBase.tool instanceof Fe?[2,!1]:[3,1];case 1:return[4,s.pdfViewer.fireHyperlinkClick(e[l],h)];case 2:return i.sent()&&window.open(h.href,"_blank","scrollbars=yes,resizable=yes"),[2,!1]}}))}))},h.onmouseover=function(){s.triggerHyperlinkEvent(h)}),document.getElementById(d.pdfViewer.dataId+"_pageDiv_"+i).appendChild(h)},d=this,h=0;h<e.length;h++)l(h)},e.prototype.triggerHyperlinkEvent=function(e){return!(this.pdfViewerBase.tool instanceof Le||this.pdfViewerBase.tool instanceof Fe)&&(this.pdfViewer.fireHyperlinkHover(e),!0)},e.prototype.renderDocumentLink=function(e,t,i,n,o,a){for(var s=this,r=function(r){var d=sf.base.createElement("a",{id:"linkdiv_"+r}),h=e[r];if((d=l.setHyperlinkProperties(d,h,n,r,o,a,!1)).setAttribute("href","javascript:void(0)"),void 0!==t[r]&&t[r]>=0){var p=l.pdfViewerBase.pageSize[n].height,c=void 0,u=void 0,f=l.pdfViewerBase.pageSize[t[r]];f&&(0!==i.length?(c=i[r],u=f.top*l.pdfViewerBase.getZoomFactor()+(p-c)*l.pdfViewerBase.getZoomFactor()):u=f.top*l.pdfViewerBase.getZoomFactor()),void 0!==u&&(d.name=u.toString(),d.onclick=function(){return s.pdfViewerBase.tool instanceof Le||s.pdfViewerBase.tool instanceof Fe||(s.pdfViewerBase.viewerContainer.scrollTop=parseInt(d.name)),!1}),document.getElementById(l.pdfViewer.dataId+"_pageDiv_"+n).appendChild(d)}else{document.getElementById(l.pdfViewer.dataId+"_pageDiv_"+n).appendChild(d)}},l=this,d=0;d<e.length;d++)r(d)},e.prototype.setHyperlinkProperties=function(e,t,i,n,o,a,s){return e.className="e-pv-hyperlink",e.style.background="transparent",e.style.position="absolute",e.style.left=t.Left*this.pdfViewerBase.getZoomFactor()+"px",e.style.top=t.Top*this.pdfViewerBase.getZoomFactor()+"px",e.style.width=t.Width*this.pdfViewerBase.getZoomFactor()+"px",t.Height<0?(e.style.height=-t.Height*this.pdfViewerBase.getZoomFactor()+"px",e.style.top=(t.Top+t.Height)*this.pdfViewerBase.getZoomFactor()+"px"):e.style.height=(t.Height<0?-t.Height:t.Height)*this.pdfViewerBase.getZoomFactor()+"px",e.style.color="transparent",s||null==o||null==a||null==a[n]||(e.style.border=o[n]+"px solid rgb("+a[n].R+", "+a[n].G+", "+a[n].B+")"),s&&null!=o&&null!=o&&null!=a[n]&&(e.style.border=o[n]+"px solid rgb("+a[n].R+", "+a[n].G+", "+a[n].B+")"),this.pdfViewerBase.applyElementStyles(e,i),e},e.prototype.modifyZindexForTextSelection=function(e,t){if(this.pdfViewerBase.pageCount>0){var i=this.pdfViewerBase.getElement("_pageDiv_"+e);if(i)for(var n=i.childNodes,o=0;o<n.length;o++){var a=n[o];"A"===a.tagName&&(t?a.classList.add("e-pv-onselection"):a.classList.remove("e-pv-onselection"))}}},e.prototype.modifyZindexForHyperlink=function(e,t){t?e.classList.add("e-pv-onselection"):e.classList.remove("e-pv-onselection")},e.prototype.destroy=function(){for(var e=0;e<this.pdfViewerBase.pageCount-1;e++){var t=document.getElementById(this.pdfViewer.dataId+"_pageDiv_"+e);if(t){var i=t.getElementsByTagName("a");if(0!==i.length)for(var n=i.length-1;n>=0;n--)i[n].parentNode.removeChild(i[n])}}},e.prototype.getModuleName=function(){return"LinkAnnotation"},e}(),Ge=function(){function e(e,t){var i=this;this.currentTextMarkupAddMode="",this.selectTextMarkupCurrentPage=null,this.currentTextMarkupAnnotation=null,this.isAddAnnotationProgramatically=!1,this.currentAnnotationIndex=null,this.isAnnotationSelect=!1,this.isDropletClicked=!1,this.isRightDropletClicked=!1,this.isLeftDropletClicked=!1,this.isSelectionMaintained=!1,this.isExtended=!1,this.isNewAnnotation=!1,this.selectedTextMarkup=null,this.multiPageCollection=[],this.triggerAddEvent=!1,this.isSelectedAnnotation=!1,this.dropletHeight=20,this.annotationClickPosition={},this.maintainSelection=function(e){i.isDropletClicked=!0,i.pdfViewer.textSelectionModule.initiateSelectionByTouch(),i.isExtended=!0,i.pdfViewer.textSelectionModule.selectionRangeArray=[]},this.selectionEnd=function(e){i.isDropletClicked&&(i.isDropletClicked=!1)},this.annotationLeftMove=function(e){i.isDropletClicked&&(i.isLeftDropletClicked=!0)},this.annotationRightMove=function(e){i.isDropletClicked&&(i.isRightDropletClicked=!0)},this.pdfViewer=e,this.pdfViewerBase=t}return e.prototype.createAnnotationSelectElement=function(){this.dropDivAnnotationLeft=sf.base.createElement("div",{id:this.pdfViewer.dataId+"_droplet_left",className:"e-pv-drop"}),this.dropDivAnnotationLeft.style.borderRight="2px solid",this.dropDivAnnotationRight=sf.base.createElement("div",{id:this.pdfViewer.dataId+"_droplet_right",className:"e-pv-drop"}),this.dropDivAnnotationRight.style.borderLeft="2px solid",this.dropElementLeft=sf.base.createElement("div",{className:"e-pv-droplet",id:this.pdfViewer.dataId+"_dropletspan_left"}),this.dropElementLeft.style.transform="rotate(0deg)",this.dropDivAnnotationLeft.appendChild(this.dropElementLeft),this.dropElementRight=sf.base.createElement("div",{className:"e-pv-droplet",id:this.pdfViewer.dataId+"_dropletspan_right"}),this.dropElementRight.style.transform="rotate(-90deg)",this.dropDivAnnotationRight.appendChild(this.dropElementRight),this.pdfViewerBase.pageContainer.appendChild(this.dropDivAnnotationLeft),this.pdfViewerBase.pageContainer.appendChild(this.dropDivAnnotationRight),this.dropElementLeft.style.top="20px",this.dropElementRight.style.top="20px",this.dropElementRight.style.left="-8px",this.dropElementLeft.style.left="-8px",this.dropDivAnnotationLeft.style.display="none",this.dropDivAnnotationRight.style.display="none",this.dropDivAnnotationLeft.addEventListener("mousedown",this.maintainSelection),this.dropDivAnnotationLeft.addEventListener("mousemove",this.annotationLeftMove),this.dropDivAnnotationLeft.addEventListener("mouseup",this.selectionEnd),this.dropDivAnnotationRight.addEventListener("mousedown",this.maintainSelection),this.dropDivAnnotationRight.addEventListener("mousemove",this.annotationRightMove),this.dropDivAnnotationRight.addEventListener("mouseup",this.selectionEnd)},e.prototype.textSelect=function(e,t,i){if(this.isLeftDropletClicked){var n=this.dropDivAnnotationRight.getBoundingClientRect(),o=this.dropDivAnnotationLeft.getBoundingClientRect(),a=t,s=i;e.classList.contains("e-pv-text")&&(o.top-25>n.top?this.pdfViewer.textSelectionModule.textSelectionOnDrag(e,a,s,!0):this.pdfViewer.textSelectionModule.textSelectionOnDrag(e,a,s,!1),this.updateLeftposition(a,s))}else if(this.isRightDropletClicked){n=this.dropDivAnnotationLeft.getBoundingClientRect(),a=t,s=i;e.classList.contains("e-pv-text")&&(s>=n.top?this.pdfViewer.textSelectionModule.textSelectionOnDrag(e,a,s,!0):this.pdfViewer.textSelectionModule.textSelectionOnDrag(e,a,s,!1),this.updatePosition(a,s))}},e.prototype.showHideDropletDiv=function(e){var t=this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode;this.isEnableTextMarkupResizer(t)&&this.dropDivAnnotationLeft&&this.dropDivAnnotationRight&&(e?(this.dropDivAnnotationLeft.style.display="none",this.dropDivAnnotationRight.style.display="none"):(this.dropDivAnnotationLeft.style.display="",this.dropDivAnnotationRight.style.display="",this.updateDropletStyles(t)))},e.prototype.isEnableTextMarkupResizer=function(e){var t=!1;return e?("Highlight"===e&&this.pdfViewer.highlightSettings.enableTextMarkupResizer||"Underline"===e&&this.pdfViewer.underlineSettings.enableTextMarkupResizer||"Strikethrough"===e&&this.pdfViewer.strikethroughSettings.enableTextMarkupResizer||this.pdfViewer.enableTextMarkupResizer)&&(t=!0):(this.pdfViewer.enableTextMarkupResizer||this.pdfViewer.highlightSettings.enableTextMarkupResizer||this.pdfViewer.underlineSettings.enableTextMarkupResizer||this.pdfViewer.strikethroughSettings.enableTextMarkupResizer)&&(t=!0),t},e.prototype.updateDropletStyles=function(e){this.isEnableTextMarkupResizer(e)&&this.dropDivAnnotationLeft&&this.dropDivAnnotationLeft.offsetWidth>0&&(this.dropDivAnnotationLeft.style.width=this.dropletHeight*this.pdfViewerBase.getZoomFactor()+"px",this.dropDivAnnotationRight.style.width=this.dropletHeight*this.pdfViewerBase.getZoomFactor()+"px",this.dropElementLeft.style.width=this.dropletHeight*this.pdfViewerBase.getZoomFactor()+"px",this.dropElementRight.style.width=this.dropletHeight*this.pdfViewerBase.getZoomFactor()+"px",this.dropDivAnnotationLeft.style.height=this.dropletHeight*this.pdfViewerBase.getZoomFactor()+"px",this.dropDivAnnotationRight.style.height=this.dropletHeight*this.pdfViewerBase.getZoomFactor()+"px",this.dropElementLeft.style.height=this.dropletHeight*this.pdfViewerBase.getZoomFactor()+"px",this.dropElementRight.style.height=this.dropletHeight*this.pdfViewerBase.getZoomFactor()+"px",this.dropElementLeft.style.top=this.dropletHeight*this.pdfViewerBase.getZoomFactor()+"px",this.dropElementRight.style.top=this.dropletHeight*this.pdfViewerBase.getZoomFactor()+"px")},e.prototype.updateAnnotationBounds=function(){this.isSelectionMaintained=!1;var e=this.currentTextMarkupAnnotation;if(e&&e.isMultiSelect)this.showHideDropletDiv(!0),this.updateMultiAnnotBounds(e);else if(e&&e.bounds){var t=!0;document.activeElement&&"INPUT"==document.activeElement.tagName&&(t=!1),t&&(this.retreieveSelection(e,null),this.pdfViewer.textSelectionModule.maintainSelection(this.selectTextMarkupCurrentPage,!1),this.isSelectionMaintained=!0,window.getSelection().removeAllRanges())}},e.prototype.updateMultiAnnotBounds=function(e){if(!e.annotpageNumbers&&(r=this.getAnnotations(e.pageNumber,null)))for(var t=0;t<r.length;t++)if(r[t].annotName===e.annotName){e=r[t];break}for(var i=e.annotpageNumbers[0],n=e.annotpageNumbers[0],o=0;o<e.annotpageNumbers.length;o++){var a=e.annotpageNumbers[o];a>=n&&(n=a),a<=i&&(i=a)}for(var s=i;s<=n;s++){var r;if(r=this.getAnnotations(s,null))for(var l=0;l<e.annotNameCollection.length;l++){var d=e.annotNameCollection[l];for(t=0;t<r.length;t++)if(r[t].annotName===d){var h=r[t];this.retreieveSelection(h,null),this.pdfViewer.textSelectionModule.maintainSelection(h.pageNumber,!1)}}}this.isSelectionMaintained=!0,window.getSelection().removeAllRanges()},e.prototype.retreieveSelection=function(e,t){for(var i=0;i<e.bounds.length;i++){var n=e.bounds[i],o=(n.left?n.left:n.Left)*this.pdfViewerBase.getZoomFactor(),a=(n.top?n.top:n.Top)*this.pdfViewerBase.getZoomFactor(),s=(n.width?n.width:n.Width)*this.pdfViewerBase.getZoomFactor(),r=(n.height?n.height:n.Height,this.pdfViewerBase.getElement("_textLayer_"+e.pageNumber));if(r){for(var l=r.childNodes,d=0;d<l.length;d++)if(l[d]){var h=l[d].getBoundingClientRect(),p=this.getClientValueTop(h.top,e.pageNumber),c=h.left-this.pdfViewerBase.getElement("_pageDiv_"+e.pageNumber).getBoundingClientRect().left,u=c+h.width,f=parseInt(l[d].style.left),g=parseInt(l[d].style.top),m=this.pdfViewer.textSelectionModule.checkLeftBounds(c,f,u,o),w=this.pdfViewer.textSelectionModule.checkTopBounds(p,g,a);if(m&&w){t=l[d];break}}if(null!=t){var y=this.pdfViewerBase.getElement("_textLayer_"+e.pageNumber).getBoundingClientRect();this.pdfViewer.textSelectionModule.textSelectionOnMouseMove(t,o+y.left,a+y.top,!1),e.bounds.length-1===i&&this.pdfViewer.textSelectionModule.textSelectionOnMouseMove(t,o+y.left+s,a+y.top,!1)}}}},e.prototype.updatePosition=function(e,t,i){this.showHideDropletDiv(!1);var n=this.pdfViewerBase.pageSize[this.pdfViewerBase.currentPageNumber-1].top,o=this.getClientValueTop(t,this.pdfViewerBase.currentPageNumber-1),a=document.getElementById(this.pdfViewer.dataId+"_droplet_right");a.style.top=i?o*this.pdfViewerBase.getZoomFactor()+n*this.pdfViewerBase.getZoomFactor()+"px":o+n*this.pdfViewerBase.getZoomFactor()+"px",a.style.left=e+this.pdfViewerBase.viewerContainer.scrollLeft-this.pdfViewerBase.viewerContainer.getBoundingClientRect().left+"px"},e.prototype.updateLeftposition=function(e,t,i){this.showHideDropletDiv(!1);var n=this.pdfViewerBase.pageSize[this.pdfViewerBase.currentPageNumber-1].top,o=this.getClientValueTop(t,this.pdfViewerBase.currentPageNumber-1),a=document.getElementById(this.pdfViewer.dataId+"_droplet_left");a.style.display="",a.style.top=i?o*this.pdfViewerBase.getZoomFactor()+n*this.pdfViewerBase.getZoomFactor()+"px":o+n*this.pdfViewerBase.getZoomFactor()+"px",a.style.left=e+this.pdfViewerBase.viewerContainer.scrollLeft-this.pdfViewerBase.viewerContainer.getBoundingClientRect().left-this.dropletHeight*this.pdfViewerBase.getZoomFactor()+"px"},e.prototype.getClientValueTop=function(e,t){return this.pdfViewerBase.getElement("_pageDiv_"+t)?e-this.pdfViewerBase.getElement("_pageDiv_"+t).getBoundingClientRect().top:e},e.prototype.renderTextMarkupAnnotationsInPage=function(e,t,i){var n=this.pdfViewerBase.getElement("_annotationCanvas_"+t);i?(this.renderTextMarkupAnnotations(null,t,n,this.pdfViewerBase.getZoomFactor()),this.renderTextMarkupAnnotations(e,t,n,this.pdfViewerBase.getZoomFactor(),!0)):this.renderTextMarkupAnnotations(e,t,n,this.pdfViewerBase.getZoomFactor())},e.prototype.renderTextMarkupAnnotations=function(e,t,i,n,o){if(i){var a=i.getContext("2d");a.setTransform(1,0,0,1,0,0),a.setLineDash([]);var s=void 0;if(s=o?e:this.getAnnotations(t,e))for(var r=0;r<s.length;r++){var l=s[r],d=null,h=void 0;if(l.TextMarkupAnnotationType){if(o&&!l.isAlreadyAdded&&this.pdfViewerBase.isJsonImported){for(var p=[],c=0;c<l.Bounds.length;c++)l.Bounds[c]=this.pdfViewerBase.importJsonForRotatedDocuments(l.Rotate,t,l.Bounds[c],l.AnnotationRotation),l.Bounds[c].left=l.Bounds[c].X,l.Bounds[c].top=l.Bounds[c].Y,p.push(l.Bounds[c]);l.Bounds=p,h=this.pdfViewerBase.isPageRotated}l.annotationAddMode=this.pdfViewer.annotationModule.findAnnotationMode(l,t,l.AnnotType),l.Author||(l.Author=this.pdfViewer.annotationModule.updateAnnotationAuthor("textMarkup",l.TextMarkupAnnotationType)),l.Subject||(l.Subject=l.TextMarkupAnnotationType),l.AnnotationSettings&&l.AnnotationSettings.isLock?l.AnnotationSettings={isLock:l.AnnotationSettings.isLock}:l.AnnotationSettings=this.getAnnotationSettings(l.TextMarkupAnnotationType);var u=!0;if(u="Imported Annotation"===l.annotationAddMode?l.IsPrint:this.getIsPrintValue(l.TextMarkupAnnotationType),l.allowedInteractions=l.AllowedInteractions?l.AllowedInteractions:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(l),d={textMarkupAnnotationType:l.TextMarkupAnnotationType,color:l.Color,allowedInteractions:l.allowedInteractions,opacity:l.Opacity,bounds:l.Bounds,author:l.Author,subject:l.Subject,modifiedDate:l.ModifiedDate,note:l.Note,rect:l.Rect,annotName:l.AnnotName,comments:this.pdfViewer.annotationModule.getAnnotationComments(l.Comments,l,l.Author),review:{state:l.State,stateModel:l.StateModel,modifiedDate:l.ModifiedDate,author:l.Author},shapeAnnotationType:"textMarkup",pageNumber:t,textMarkupContent:l.TextMarkupContent,textMarkupStartIndex:0,textMarkupEndIndex:0,annotationSelectorSettings:this.getSettings(l),customData:this.pdfViewer.annotation.getCustomData(l),annotationAddMode:l.annotationAddMode,annotationSettings:l.AnnotationSettings,isPrint:u,isCommentLock:l.IsCommentLock,isAnnotationRotated:h,annotationRotation:l.AnnotationRotation},l.IsMultiSelect&&(d.annotNameCollection=l.AnnotNameCollection,d.annotpageNumbers=l.AnnotpageNumbers,d.isMultiSelect=l.IsMultiSelect),l.textMarkupContent&&""!==l.textMarkupContent&&(d.textMarkupContent=l.textMarkupContent,d.textMarkupStartIndex=l.textMarkupStartIndex,d.textMarkupEndIndex=l.textMarkupEndIndex),this.pdfViewer.annotationModule.storeAnnotations(t,d,"_annotations_textMarkup"),this.isAddAnnotationProgramatically){var f={opacity:d.opacity,author:l.author,subject:l.subject,modifiedDate:l.modifiedDate,width:d.bounds.width,height:d.bounds.height};this.pdfViewer.fireAnnotationAdd(d.pageNumber,d.annotName,l.TextMarkupAnnotationType,d.bounds,f)}}var g=l.TextMarkupAnnotationType?l.TextMarkupAnnotationType:l.textMarkupAnnotationType,m=l.Bounds?l.Bounds:l.bounds,w=l.Opacity?l.Opacity:l.opacity,y=l.Color?l.Color:l.color,S=l.AnnotationRotation?l.AnnotationRotation:l.annotationRotation,v=!0;switch(l.TextMarkupAnnotationType&&(v=l.IsPrint),l.textMarkupAnnotationType&&(v=l.isPrint),g){case"Highlight":this.renderHighlightAnnotation(m,w,y,a,n,v,t);break;case"Strikethrough":this.renderStrikeoutAnnotation(m,w,y,a,n,t,v,S);break;case"Underline":this.renderUnderlineAnnotation(m,w,y,a,n,t,v,S)}}var b=!1;if(this.currentTextMarkupAnnotation&&this.currentTextMarkupAnnotation.annotpageNumbers)for(var V=0;V<this.currentTextMarkupAnnotation.annotpageNumbers.length;V++)if(t===this.currentTextMarkupAnnotation.annotpageNumbers[V]){b=!0,this.isAnnotationSelect=!1;break}(t===this.selectTextMarkupCurrentPage||b)&&(this.isAnnotationSelect?this.isAnnotationSelect=!1:this.maintainAnnotationSelection())}},e.prototype.getSettings=function(e){return e.AnnotationSelectorSettings?e.AnnotationSelectorSettings:this.getSelector(e.TextMarkupAnnotationType)},e.prototype.drawTextMarkupAnnotations=function(e){this.isTextMarkupAnnotationMode=!0,this.currentTextMarkupAddMode=e;var t=!0;this.multiPageCollection=[];var i=this.pdfViewer.textSelectionModule?this.pdfViewer.textSelectionModule.selectionRangeArray:[];i.length>0&&!this.isSelectionMaintained&&this.convertSelectionToTextMarkup(e,i,this.pdfViewerBase.getZoomFactor());var n,o=window.getSelection();if(o&&o.anchorNode&&(n=o.anchorNode.parentElement),this.isEnableTextMarkupResizer(e)&&this.isExtended&&window.getSelection().toString()){if((l=this.getDrawnBounds())[0]&&l[0].bounds)for(var a=this.currentTextMarkupAnnotation,s=0;s<l.length;s++)if(a&&a.pageNumber===l[s].pageIndex)this.currentTextMarkupAnnotation=a,this.selectTextMarkupCurrentPage=l[s].pageIndex,this.updateTextMarkupAnnotationBounds(l,s);else if(a&&""===e&&(e=a.textMarkupAnnotationType),a.isMultiSelect)a.isMultiSelect&&a.annotNameCollection&&this.modifyCurrentAnnotation(a,l,s);else{var r=!1;this.isMultiAnnotation(e)&&(this.multiPageCollection.push(a),r=!0),this.drawTextMarkups(e,l[s].bounds,l[s].pageIndex,l[s].rect,this.pdfViewerBase.getZoomFactor(),l[s].textContent,l[s].startIndex,l[s].endIndex,r,n)}}else if(window.getSelection().toString()){var l=this.getDrawnBounds();r=this.isMultiPageAnnotations(l,e);if(l.length>0)for(var d=0;d<l.length;d++)""===e&&(t=!1),this.drawTextMarkups(e,l[d].bounds,l[d].pageIndex,l[d].rect,this.pdfViewerBase.getZoomFactor(),l[d].textContent,l[d].startIndex,l[d].endIndex,r,n)}if(this.multiPageCollection)for(var h=0;h<this.multiPageCollection.length;h++)this.updateAnnotationNames(this.multiPageCollection[h],this.multiPageCollection[h].pageNumber);this.isExtended=!1,this.isSelectionMaintained=!1,t&&this.pdfViewer.textSelectionModule&&this.pdfViewer.textSelectionModule.clearTextSelection(),this.isEnableTextMarkupResizer(e)&&this.updateAnnotationBounds()},e.prototype.isMultiPageAnnotations=function(e,t){for(var i=!1,n=0;n<e.length;n++)if(e[n].pageIndex!==e[0].pageIndex&&this.isMultiAnnotation(t)){i=!0;break}return i},e.prototype.isMultiAnnotation=function(e){var t=!1;return("Highlight"===e&&this.pdfViewer.highlightSettings.enableMultiPageAnnotation||"Underline"===e&&this.pdfViewer.underlineSettings.enableMultiPageAnnotation||"Strikethrough"===e&&this.pdfViewer.strikethroughSettings.enableMultiPageAnnotation||this.pdfViewer.enableMultiPageAnnotation)&&(t=!0),t},e.prototype.modifyCurrentAnnotation=function(e,t,i){for(var n=0;n<e.annotNameCollection.length;n++){var o=e.annotNameCollection[n],a=this.getAnnotations(t[i].pageIndex,null);if(a)for(var s=0;s<a.length;s++)if(a[s].annotName===o){this.currentTextMarkupAnnotation=a[s],this.selectTextMarkupCurrentPage=t[i].pageIndex,this.updateTextMarkupAnnotationBounds(t,i);break}}},e.prototype.drawAnnotationSelector=function(e,t,i){for(var n=0;n<e.bounds.length;n++){var o=e.bounds[n],a=o.left?o.left:o.Left,s=o.top?o.top:o.Top,r=o.width?o.width:o.Width,l=o.height?o.height:o.Height;i||(i=this.pdfViewerBase.getElement("_annotationCanvas_"+e.pageNumber)),this.drawAnnotationSelectRect(i,this.getMagnifiedValue(a-.5,this.pdfViewerBase.getZoomFactor()),this.getMagnifiedValue(s-.5,this.pdfViewerBase.getZoomFactor()),this.getMagnifiedValue(r+.5,this.pdfViewerBase.getZoomFactor()),this.getMagnifiedValue(l+.5,this.pdfViewerBase.getZoomFactor()),t)}},e.prototype.selectMultiPageAnnotations=function(e){for(var t=0;t<e.annotNameCollection.length;t++){var i=e.annotNameCollection[t];if(i!==e.annotName)for(var n=0;n<e.annotpageNumbers.length;n++){var o=e.annotpageNumbers[n],a=this.getAnnotations(o,null);if(a)for(var s=0;s<a.length;s++)if(a[s].annotName===i){var r=a[s];this.drawAnnotationSelector(r,e)}}}},e.prototype.deletMultiPageAnnotation=function(e){for(var t=0;t<e.annotNameCollection.length;t++){var i=e.annotNameCollection[t];if(i!==e.annotName)for(var n=0;n<e.annotpageNumbers.length;n++){var o=e.annotpageNumbers[n],a=this.getAnnotations(o,null);if(a)for(var s=0;s<a.length;s++)if(a[s].annotName===i){var r,l=a[s];r=a.splice(s,1)[0],this.pdfViewer.annotationModule.addAction(o,s,r,"Text Markup Deleted",null),this.currentAnnotationIndex=s,this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(r,"textMarkup");var d=document.getElementById(r.annotName);d&&(1===d.parentElement.childElementCount||d.remove()),this.pdfViewer.annotationModule.updateAnnotationCollection(l),this.manageAnnotations(a,o),this.pdfViewer.annotationModule.updateImportAnnotationCollection(l,l.pageNumber,"textMarkupAnnotation");l.annotName,l.bounds;this.pdfViewer.annotationModule.renderAnnotations(o,null,null,null)}}}},e.prototype.modifyMultiPageAnnotations=function(e,t,i){for(var n=0;n<e.annotNameCollection.length;n++){var o=e.annotNameCollection[n];if(o!==e.annotName)for(var a=0;a<e.annotpageNumbers.length;a++){var s=e.annotpageNumbers[a],r=this.getAnnotations(s,null);if(r)for(var l=0;l<r.length;l++)r[l].annotName===o&&("Color"===t?r[l].color=i:r[l].opacity=i,r[l].modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),this.currentAnnotationIndex=l,null!==status&&"changed"!==status||this.pdfViewer.annotationModule.addAction(r[l].pageNumber,l,r[l],"Text Markup Property modified",t),this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateAnnotationModifiedDate(r[l]),this.manageAnnotations(r,s),this.pdfViewer.annotationModule.renderAnnotations(s,null,null,null))}}},e.prototype.convertSelectionToTextMarkup=function(e,t,i){var n=!1;this.triggerAddEvent=!1,this.multiPageCollection=[];for(var o=0;o<t.length;o++){var a=t[o].textContent,s=void 0;if(t[o].startNode===t[o].endNode){var r=document.getElementById(t[o].startNode).textContent;s=this.getIndexNumbers(t[o].pageNumber,a,r)}else s=this.getIndexNumbers(t[o].pageNumber,a);if(!n)for(var l=1;l<t.length;l++)if(t[l].pageNumber!==t[0].pageNumber&&this.isMultiAnnotation(e)){n=!0;break}this.isMultiAnnotation(e)&&t.length-1===o&&(this.triggerAddEvent=!0),this.drawTextMarkups(e,t[o].rectangleBounds,t[o].pageNumber,t[o].bound,i,a,s.startIndex,s.endIndex,n,document.getElementById(t[o].startNode))}},e.prototype.updateTextMarkupAnnotationBounds=function(e,t){if(this.currentTextMarkupAnnotation){var i=this.getAnnotations(e[t].pageIndex,null),n=null;if(i){for(var o=0;o<i.length;o++)JSON.stringify(this.currentTextMarkupAnnotation)===JSON.stringify(i[o])&&(i[o].bounds=e[t].bounds,i[o].textMarkupContent=e[t].textContent,i[o].textMarkupStartIndex=e[t].startIndex,i[o].textMarkupEndIndex=e[t].endIndex,i[o].modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),n=i[o]);if(this.manageAnnotations(i,e[t].pageIndex),this.currentTextMarkupAnnotation=null,this.pdfViewer.annotationModule.renderAnnotations(e[t].pageIndex,null,null,null),this.pdfViewerBase.updateDocumentEditedProperty(!0),n){var a={opacity:n.opacity,color:n.color,author:n.author,subject:n.subject,modifiedDate:n.modifiedDate},s=this.multiPageCollectionList(n);s.length>0?e.length-1===t&&this.pdfViewer.fireAnnotationResize(e[t].pageIndex,n.annotName,n.textMarkupAnnotationType,n.bounds,a,n.textMarkupContent,n.textMarkupStartIndex,n.textMarkupEndIndex,null,s):this.pdfViewer.fireAnnotationResize(e[t].pageIndex,n.annotName,n.textMarkupAnnotationType,n.bounds,a,n.textMarkupContent,n.textMarkupStartIndex,n.textMarkupEndIndex,null)}this.currentAnnotationIndex=null,this.selectTextMarkupCurrentPage=null}}},e.prototype.multiPageCollectionList=function(e){var t=[];if(e.isMultiSelect&&e.annotNameCollection){t.push(e);for(var i=0;i<e.annotNameCollection.length;i++){var n=e.annotNameCollection[i];if(n!==e.annotName)for(var o=0;o<e.annotpageNumbers.length;o++){var a=e.annotpageNumbers[o],s=this.getAnnotations(a,null);if(s)for(var r=0;r<s.length;r++)s[r].annotName===n&&t.push(s[r])}}}return t},e.prototype.updateAnnotationNames=function(e,t){if(e){var i=this.getAnnotations(t,null);if(i){for(var n=0;n<i.length;n++)if(e.annotName===i[n].annotName){for(var o=[],a=[],s=0;s<this.multiPageCollection.length;s++)o.push(this.multiPageCollection[s].annotName),a.push(this.multiPageCollection[s].pageNumber);i[n].isMultiSelect=!0,i[n].annotNameCollection=o,i[n].annotpageNumbers=a,i[n]}this.manageAnnotations(i,t)}}},e.prototype.updateAnnotationContent=function(e,t){if(e){var i=this.getAnnotations(this.selectTextMarkupCurrentPage,null);if(i){for(var n=0;n<i.length;n++)JSON.stringify(this.currentTextMarkupAnnotation)===JSON.stringify(i[n])&&(i[n].textMarkupContent=t.textContent,i[n].textMarkupStartIndex=t.startIndex,i[n].textMarkupEndIndex=t.endIndex,i[n]),this.pdfViewer.annotationModule.storeAnnotationCollections(i[n],this.selectTextMarkupCurrentPage);this.manageAnnotations(i,this.selectTextMarkupCurrentPage)}}},e.prototype.drawTextMarkups=function(e,t,i,n,o,a,s,r,l,d){var h=null;this.isNewAnnotation=!1;var p,c,u="Guest",f=this.getPageContext(i),g=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();this.highlightColor=this.highlightColor?this.highlightColor:this.pdfViewer.highlightSettings.color,this.underlineColor=this.underlineColor?this.underlineColor:this.pdfViewer.underlineSettings.color,this.strikethroughColor=this.strikethroughColor?this.strikethroughColor:this.pdfViewer.strikethroughSettings.color,this.highlightOpacity=this.pdfViewer.highlightSettings.opacity,this.underlineOpacity=this.pdfViewer.underlineSettings.opacity,this.strikethroughOpacity=this.pdfViewer.strikethroughSettings.opacity,this.annotationAddMode="UI Drawn Annotation";var m=this.pdfViewerBase.pageSize[i],w=0,y=this.getAngle(m.rotation);if(f){switch(f.setLineDash([]),e){case"Highlight":this.isNewAnnotation=!0,p="Highlight",u="Guest"!==this.pdfViewer.highlightSettings.author&&this.pdfViewer.highlightSettings.author?this.pdfViewer.highlightSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest",c=this.pdfViewer.highlightSettings.allowedInteractions?this.pdfViewer.highlightSettings.allowedInteractions:"None",(h=this.getAddedAnnotation(e,this.highlightColor,this.highlightOpacity,t,u,p,g,"",!1,n,i,a,s,r,l,c,w))&&this.renderHighlightAnnotation(h.bounds,h.opacity,h.color,f,o,h.isPrint,i);break;case"Strikethrough":this.isNewAnnotation=!0,p="Strikethrough",u="Guest"!==this.pdfViewer.strikethroughSettings.author&&this.pdfViewer.strikethroughSettings.author?this.pdfViewer.strikethroughSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest",c=this.pdfViewer.strikethroughSettings.allowedInteractions?this.pdfViewer.strikethroughSettings.allowedInteractions:"None",d&&""!==d.style.transform&&(w=d.style.transform.startsWith("rotate(90deg)")?Math.abs(y-90):d.style.transform.startsWith("rotate(180deg)")?Math.abs(y-180):d.style.transform.startsWith("rotate(-90deg)")?Math.abs(y-270):y),(h=this.getAddedAnnotation(e,this.strikethroughColor,this.strikethroughOpacity,t,u,p,g,"",!1,n,i,a,s,r,l,c,w))&&this.renderStrikeoutAnnotation(h.bounds,h.opacity,h.color,f,o,i,h.isPrint,h.annotationRotation);break;case"Underline":this.isNewAnnotation=!0,p="Underline",u="Guest"!==this.pdfViewer.underlineSettings.author&&this.pdfViewer.underlineSettings.author?this.pdfViewer.underlineSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest",c=this.pdfViewer.underlineSettings.allowedInteractions?this.pdfViewer.underlineSettings.allowedInteractions:"None",d&&""!==d.style.transform&&(w=d.style.transform.startsWith("rotate(90deg)")?Math.abs(y-90):d.style.transform.startsWith("rotate(180deg)")?Math.abs(y-180):d.style.transform.startsWith("rotate(-90deg)")?Math.abs(y-270):y),(h=this.getAddedAnnotation(e,this.underlineColor,this.underlineOpacity,t,u,p,g,"",!1,n,i,a,s,r,l,c,w))&&this.renderUnderlineAnnotation(h.bounds,h.opacity,h.color,f,o,i,h.isPrint,h.annotationRotation)}if(this.isNewAnnotation=!1,h){this.pdfViewerBase.updateDocumentEditedProperty(!0);var S={opacity:h.opacity,color:h.color,author:h.author,subject:h.subject,modifiedDate:h.modifiedDate};this.pdfViewer.annotationModule.actionCollection[this.pdfViewer.annotationModule.actionCollection.length-1].index;this.isMultiAnnotation(e)?this.triggerAddEvent&&this.pdfViewer.fireAnnotationAdd(i,h.annotName,e,h.bounds,S,a,s,r,null,this.multiPageCollection):this.pdfViewer.fireAnnotationAdd(i,h.annotName,e,h.bounds,S,a,s,r)}}},e.prototype.getAngle=function(e){var t=0;if(e)switch(e){case 0:t=0;break;case 1:t=90;break;case 2:t=180;break;case 3:t=270}return t},e.prototype.retreiveTextIndex=function(e){if(""===e.textMarkupContent){this.retreieveSelection(e,null);var t=this.getDrawnBounds();window.getSelection().removeAllRanges(),t[0]&&t[0].bounds&&(this.updateAnnotationContent(e,t[0]),e.textMarkupContent=t[0].textContent,e.textMarkupStartIndex=t[0].startIndex,e.textMarkupEndIndex=t[0].endIndex)}return e},e.prototype.renderHighlightAnnotation=function(e,t,i,n,o,a,s){for(var r=this.pdfViewerBase.getZoomRatio(o),l=0;l<e.length;l++){var d=e[l];n.beginPath();var h=d.X?d.X:d.left,p=d.Y?d.Y:d.top,c=d.Width?d.Width:d.width,u=d.Height?d.Height:d.height;h=h||d.x,p=p||d.y,u-=1,n.canvas.id===this.pdfViewer.dataId+"_print_annotation_layer_"+s?a&&(n.rect(h*r,p*r,c*r,u*r),n.globalAlpha=.5*t,n.closePath(),n.fillStyle=i,n.msFillRule="nonzero",n.fill()):(n.rect(h*r,p*r,c*r,u*r),n.globalAlpha=.5*t,n.closePath(),n.fillStyle=i,n.msFillRule="nonzero",n.fill())}n.save()},e.prototype.renderStrikeoutAnnotation=function(e,t,i,n,o,a,s,r){for(var l=0;l<e.length;l++){var d=this.getProperBounds(e[l]),h=this.pdfViewerBase.pageSize[a],p=this.pdfViewerBase.getZoomRatio(o),c=h.rotation;if(r){var u=this.getAngle(c);c=Math.abs(r-u)/90}n.canvas.id===this.pdfViewer.element.id+"_print_annotation_layer_"+a?s&&(1===c?this.drawLine(t,d.x+d.width/2,d.y,d.width,d.height,i,p,n,a,r):2===c?this.drawLine(t,d.x,d.y+d.height/2,d.width,d.height,i,p,n,a,r):3===c?this.drawLine(t,d.x,d.y,d.width/2,d.height,i,p,n,a,r):this.drawLine(t,d.x,d.y,d.width,d.height/2,i,p,n,a,r)):1===c?this.drawLine(t,d.x+d.width/2,d.y,d.width,d.height,i,p,n,a,r):2===c?this.drawLine(t,d.x,d.y+d.height/2,d.width,d.height,i,p,n,a,r):3===c?this.drawLine(t,d.x,d.y,d.width/2,d.height,i,p,n,a,r):this.drawLine(t,d.x,d.y,d.width,d.height/2,i,p,n,a,r)}},e.prototype.renderUnderlineAnnotation=function(e,t,i,n,o,a,s,r){for(var l=0;l<e.length;l++){var d=this.getProperBounds(e[l]),h=this.pdfViewerBase.getZoomRatio(o);n.canvas.id===this.pdfViewer.dataId+"_print_annotation_layer_"+a?s&&this.drawLine(t,d.x,d.y,d.width,d.height,i,h,n,a,r):this.drawLine(t,d.x,d.y,d.width,d.height,i,h,n,a,r)}},e.prototype.getProperBounds=function(e){var t=e.X?e.X:e.left,i=e.Y?e.Y:e.top,n=e.Width?e.Width:e.width,o=e.Height?e.Height:e.height;return{x:t=t||e.x,y:i=i||e.y,width:n,height:o}},e.prototype.drawLine=function(e,t,i,n,o,a,s,r,l,d){r.globalAlpha=e,i-=1,o-=1,r.beginPath();var h=this.pdfViewerBase.pageSize[l].rotation;if(d){var p=this.getAngle(h);h=Math.abs(d-p)/90}1===h?(r.moveTo(t*s,i*s),r.lineTo(t*s,(i+o)*s)):2===h?(r.moveTo(t*s,i*s),r.lineTo((n+t)*s,i*s)):3===h?(r.moveTo((n+t)*s,i*s),r.lineTo((n+t)*s,(i+o)*s)):(r.moveTo(t*s,(i+o)*s),r.lineTo((n+t)*s,(i+o)*s)),r.lineWidth=1,r.strokeStyle=a,r.closePath(),r.msFillRule="nonzero",r.stroke()},e.prototype.printTextMarkupAnnotations=function(e,t,i,n,o,a){var s=sf.base.createElement("canvas",{id:this.pdfViewer.dataId+"_print_annotation_layer_"+t});s.style.width="816px",s.style.height="1056px";var r=this.pdfViewerBase.pageSize[t].width,l=this.pdfViewerBase.pageSize[t].height,d=this.pdfViewerBase.getZoomFactor(),h=this.pdfViewerBase.getZoomRatio(d);s.height=l*h,s.width=r*h;var p=this.getAnnotations(t,null,"_annotations_textMarkup"),c=this.getAnnotations(t,null,"_annotations_shape"),u=this.getAnnotations(t,null,"_annotations_shape_measure"),f=this.getAnnotations(t,null,"_annotations_stamp"),g=this.getAnnotations(t,null,"_annotations_sticky");f||c||g||u?this.pdfViewer.renderDrawing(s,t):(this.pdfViewer.annotation.renderAnnotations(t,n,o,null,s),this.pdfViewer.annotation.stampAnnotationModule.renderStampAnnotations(i,t,s),this.pdfViewer.annotation.stickyNotesAnnotationModule.renderStickyNotesAnnotations(a,t,s));var m=this.pdfViewerBase.getZoomFactor();return p?this.renderTextMarkupAnnotations(null,t,s,m):this.renderTextMarkupAnnotations(e,t,s,m),s.toDataURL()},e.prototype.saveTextMarkupAnnotations=function(){var e=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_textMarkup");this.pdfViewerBase.isStorageExceed&&(e=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_textMarkup"]);for(var t=new Array,i=0;i<this.pdfViewerBase.pageCount;i++)t[i]=[];if(e&&!this.pdfViewer.annotationSettings.skipDownload)for(var n=JSON.parse(e),o=0;o<n.length;o++){var a=[],s=n[o];if(s){for(var r=0;s.annotations.length>r;r++){if(this.pdfViewer.annotationModule.updateModifiedDate(s.annotations[r]),this.pdfViewerBase.isJsonExported)if(s.annotations[r].isAnnotationRotated)s.annotations[r].bounds=this.getBoundsForSave(s.annotations[r].bounds,o);else{var l=this.pdfViewerBase.pageSize[s.pageIndex];l&&(s.annotations[r].annotationRotation=l.rotation)}s.annotations[r].bounds=JSON.stringify(this.getBoundsForSave(s.annotations[r].bounds,s.pageIndex));var d=s.annotations[r].color;s.annotations[r].color=JSON.stringify(this.getRgbCode(d)),s.annotations[r].rect=JSON.stringify(s.annotations[r].rect)}a=s.annotations}t[s.pageIndex]=a}return JSON.stringify(t)},e.prototype.deleteTextMarkupAnnotation=function(){if(this.currentTextMarkupAnnotation){var e=!1;if(this.currentTextMarkupAnnotation.annotationSettings&&(e=this.currentTextMarkupAnnotation.annotationSettings.isLock,this.pdfViewer.annotationModule.checkAllowedInteractions("Delete",this.currentTextMarkupAnnotation)&&(e=!1)),!e){var t=null;this.showHideDropletDiv(!0);var i=this.currentTextMarkupAnnotation;this.currentTextMarkupAnnotation.isMultiSelect&&i.annotNameCollection&&this.deletMultiPageAnnotation(i);var n=this.getAnnotations(this.selectTextMarkupCurrentPage,null);if(n){for(var o=0;o<n.length;o++){if(this.currentTextMarkupAnnotation.annotName===n[o].annotName)t=n.splice(o,1)[0],this.pdfViewer.annotationModule.addAction(this.selectTextMarkupCurrentPage,o,t,"Text Markup Deleted",null),this.currentAnnotationIndex=o,this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(t,"textMarkup"),document.getElementById(t.annotName)&&this.pdfViewer._dotnetInstance.invokeMethodAsync("RemoveCommentsCollection",t.annotName,this.currentAnnotationIndex)}this.pdfViewer.annotationModule.updateAnnotationCollection(this.currentTextMarkupAnnotation),this.manageAnnotations(n,this.selectTextMarkupCurrentPage),this.pdfViewer.annotationModule.updateImportAnnotationCollection(this.currentTextMarkupAnnotation,this.currentTextMarkupAnnotation.pageNumber,"textMarkupAnnotation");var a=this.currentTextMarkupAnnotation.annotName,s=this.currentTextMarkupAnnotation.bounds;this.currentTextMarkupAnnotation=null,this.pdfViewer.annotationModule.renderAnnotations(this.selectTextMarkupCurrentPage,null,null,null),this.pdfViewerBase.updateDocumentEditedProperty(!0);var r=this.multiPageCollectionList(i);r.length>0?(r.push(t),this.pdfViewer.fireAnnotationRemove(this.selectTextMarkupCurrentPage,a,t.textMarkupAnnotationType,s,t.textMarkupContent,t.textMarkupStartIndex,t.textMarkupEndIndex,r)):this.pdfViewer.fireAnnotationRemove(this.selectTextMarkupCurrentPage,a,t.textMarkupAnnotationType,s,t.textMarkupContent,t.textMarkupStartIndex,t.textMarkupEndIndex),this.currentAnnotationIndex=null,this.selectTextMarkupCurrentPage=null,sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&this.pdfViewer.toolbarModule.showToolbar(!0)}}}},e.prototype.modifyColorProperty=function(e){if(this.currentTextMarkupAnnotation){var t=this.modifyAnnotationProperty("Color",e,null);this.manageAnnotations(t,this.selectTextMarkupCurrentPage),this.pdfViewer.annotationModule.renderAnnotations(this.selectTextMarkupCurrentPage,null,null,null),this.pdfViewerBase.updateDocumentEditedProperty(!0);var i=this.currentTextMarkupAnnotation,n=this.multiPageCollectionList(i);n.length>0?(this.pdfViewer.fireAnnotationPropertiesChange(this.selectTextMarkupCurrentPage,i.annotName,i.textMarkupAnnotationType,!0,!1,!1,!1,i.textMarkupContent,i.textMarkupStartIndex,i.textMarkupEndIndex,n),this.currentAnnotationIndex=null):(this.pdfViewer.fireAnnotationPropertiesChange(this.selectTextMarkupCurrentPage,i.annotName,i.textMarkupAnnotationType,!0,!1,!1,!1,i.textMarkupContent,i.textMarkupStartIndex,i.textMarkupEndIndex),this.currentAnnotationIndex=null)}},e.prototype.modifyOpacityProperty=function(e,t){if(this.currentTextMarkupAnnotation){var i=void 0;if((i=null!=t?this.modifyAnnotationProperty("Opacity",t,"changed"):this.modifyAnnotationProperty("Opacity",e.value/100,e.name))&&(this.manageAnnotations(i,this.selectTextMarkupCurrentPage),this.pdfViewer.annotationModule.renderAnnotations(this.selectTextMarkupCurrentPage,null,null,null),t||"changed"===e.name)){this.pdfViewerBase.updateDocumentEditedProperty(!0);var n=this.currentTextMarkupAnnotation,o=this.multiPageCollectionList(n);o.length>0?(this.pdfViewer.fireAnnotationPropertiesChange(this.selectTextMarkupCurrentPage,n.annotName,n.textMarkupAnnotationType,!1,!0,!1,!1,n.textMarkupContent,n.textMarkupStartIndex,n.textMarkupEndIndex,o),this.currentAnnotationIndex=null):(this.pdfViewer.fireAnnotationPropertiesChange(this.selectTextMarkupCurrentPage,n.annotName,n.textMarkupAnnotationType,!1,!0,!1,!1,n.textMarkupContent,n.textMarkupStartIndex,n.textMarkupEndIndex),this.currentAnnotationIndex=null)}}},e.prototype.modifyAnnotationProperty=function(e,t,i,n){var o=this.currentTextMarkupAnnotation;o.isMultiSelect&&o.annotNameCollection&&this.modifyMultiPageAnnotations(o,e,t);var a=this.getAnnotations(this.selectTextMarkupCurrentPage,null);if(a)for(var s=0;s<a.length;s++)JSON.stringify(this.currentTextMarkupAnnotation)===JSON.stringify(a[s])&&("Color"===e?a[s].color=t:"Opacity"===e?a[s].opacity=t:"AnnotationSettings"===e&&(a[s].annotationSettings={isLock:t}),a[s].modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),this.currentAnnotationIndex=s,null!==i&&"changed"!==i||this.pdfViewer.annotationModule.addAction(this.selectTextMarkupCurrentPage,s,this.currentTextMarkupAnnotation,"Text Markup Property modified",e),this.currentTextMarkupAnnotation=a[s],this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateAnnotationModifiedDate(a[s]),this.pdfViewer.annotationModule.storeAnnotationCollections(a[s],this.selectTextMarkupCurrentPage));return a},e.prototype.undoTextMarkupAction=function(e,t,i,n){var o=this.getAnnotations(t,null);o&&("Text Markup Added"===n?(this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(o[i],"textMarkup"),document.getElementById(o[i].annotName)&&this.pdfViewer._dotnetInstance.invokeMethodAsync("RemoveCommentsCollection",e.annotName,t),o.splice(i,1)):"Text Markup Deleted"===n&&o.splice(i,0,e));this.clearCurrentAnnotation(),this.pdfViewerBase.updateDocumentEditedProperty(!0),this.manageAnnotations(o,t),this.pdfViewer.annotationModule.renderAnnotations(t,null,null,null),this.pdfViewer.annotationModule.stickyNotesAnnotationModule.addAnnotationComments(t,e.shapeAnnotationType)},e.prototype.undoRedoPropertyChange=function(e,t,i,n,o){var a=this.getAnnotations(t,null);if(a){if("Color"===n){var s=a[i].color;a[i].color=e.color,e.color=s}else{var r=a[i].opacity;a[i].opacity=e.opacity,e.opacity=r}this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateAnnotationModifiedDate(e,null,!0),o&&(e.modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime())}return this.clearCurrentAnnotation(),this.pdfViewerBase.updateDocumentEditedProperty(!0),this.manageAnnotations(a,t),this.pdfViewer.annotationModule.renderAnnotations(t,null,null,null),e},e.prototype.redoTextMarkupAction=function(e,t,i,n){var o=this.getAnnotations(t,null);if(o)if("Text Markup Added"===n)this.pdfViewer.annotationModule.stickyNotesAnnotationModule.addAnnotationComments(t,e.shapeAnnotationType),o.push(e);else if("Text Markup Deleted"===n){this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(o[i],"textMarkup");var a=document.getElementById(o[i].annotName);a&&(1===a.parentElement.childElementCount||a.remove()),o.splice(i,1)}this.clearCurrentAnnotation(),this.pdfViewerBase.updateDocumentEditedProperty(!0),this.manageAnnotations(o,t),this.pdfViewer.annotationModule.renderAnnotations(t,null,null,null)},e.prototype.saveNoteContent=function(e,t){var i=this.getAnnotations(e,null);if(i)for(var n=0;n<i.length;n++)JSON.stringify(this.currentTextMarkupAnnotation)===JSON.stringify(i[n])&&(i[n].note=t);this.manageAnnotations(i,e),this.pdfViewerBase.updateDocumentEditedProperty(!0)},e.prototype.clearCurrentAnnotation=function(){if(!this.isExtended){this.pdfViewer.isMaintainSelection&&!this.pdfViewer.textSelectionModule.isTextSelection?(this.selectTextMarkupCurrentPage=this.selectTextMarkupCurrentPage,this.currentTextMarkupAnnotation=this.currentTextMarkupAnnotation):(this.selectTextMarkupCurrentPage=null,this.currentTextMarkupAnnotation=null);var e=!1;this.pdfViewer.annotation.freeTextAnnotationModule&&this.pdfViewer.annotation.freeTextAnnotationModule.isInuptBoxInFocus&&(e=!0),e||this.enableAnnotationPropertiesTool(!1)}},e.prototype.clearCurrentAnnotationSelection=function(e,t){this.isAnnotationSelect=!!t;for(var i=e-2>=0?e-2:0,n=e+2<this.pdfViewerBase.pageCount?e+2:this.pdfViewerBase.pageCount-1,o=i;o<=n;o++)this.clearAnnotationSelection(o)},e.prototype.getBoundsForSave=function(e,t){for(var i=[],n=0;n<e.length;n++){var o=this.getAnnotationBounds(e[n],t);i.push(o)}return i},e.prototype.getAnnotationBounds=function(e,t){var i=e.left?e.left:e.Left?e.Left:0,n=e.top?e.top:e.Top?e.Top:0,o=e.height?e.height:e.Height?e.Height:0,a=e.width?e.width:e.Width?e.Width:0,s=this.pdfViewerBase.pageSize[t];return i=i||e.x,n=n||e.y,s?1===s.rotation?{left:n,top:s.width-(i+a),width:o,height:a}:2===s.rotation?{left:s.width-i-a,top:s.height-n-o,width:a,height:o}:3===s.rotation?{left:s.height-n-o,top:i,width:o,height:a}:{left:i,top:n,width:a,height:o}:{left:i,top:n,width:a,height:o}},e.prototype.getRgbCode=function(e){e.match(/#([a-z0-9]+)/gi)||e.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/)||(e=this.pdfViewer.annotationModule.nameToHash(e));var t=e.split(",");sf.base.isNullOrUndefined(t[1])&&(t=(e=this.pdfViewer.annotationModule.getValue(e,"rgba")).split(","));var i=parseInt(t[0].split("(")[1]),n=parseInt(t[1]),o=parseInt(t[2]);return{a:parseInt(t[3]),r:i,g:n,b:o}},e.prototype.getDrawnBounds=function(){var e=[],t=window.getSelection();if(null!==t.anchorNode){var i=document.createRange(),n=this.pdfViewerBase.textLayer.isBackWardSelection(t);if(t.anchorNode===t.focusNode){var o=this.pdfViewerBase.textLayer.getPageIndex(t.anchorNode);if(!isNaN(o)){var a=this.pdfViewerBase.getElement("_pageDiv_"+o).getBoundingClientRect();this.pdfViewerBase.isMixedSizeDocument&&(a=this.pdfViewerBase.getElement("_textLayer_"+o).getBoundingClientRect()),n?(i.setStart(t.focusNode,t.focusOffset),i.setEnd(t.anchorNode,t.anchorOffset)):t.anchorOffset<t.focusOffset?(t.anchorOffset,t.focusOffset,i.setStart(t.anchorNode,t.anchorOffset),i.setEnd(t.focusNode,t.focusOffset)):(t.focusOffset,t.anchorOffset,i.setStart(t.focusNode,t.focusOffset),i.setEnd(t.anchorNode,t.anchorOffset));var s=i.getBoundingClientRect(),r=this.getIndexNumbers(o,i.toString(),i.commonAncestorContainer.textContent.toString()),l={x:this.getDefaultValue(s.left-a.left),y:this.getDefaultValue(s.top-a.top),left:this.getDefaultValue(s.left-a.left),top:this.getDefaultValue(s.top-a.top),width:this.getDefaultValue(s.width),height:this.getDefaultValue(s.height),right:this.getDefaultValue(s.right-a.left),bottom:this.getDefaultValue(s.bottom-a.top)},d=[];d.push(l);var h={x:l.left,y:l.top,left:l.left,top:l.top,right:l.right,bottom:l.bottom};e.push({pageIndex:o,bounds:d,rect:h,startIndex:r.startIndex,endIndex:r.endIndex,textContent:i.toString()})}}else{var p=void 0,c=void 0,u=void 0,f=void 0;n?(p=t.focusNode,u=t.focusOffset,c=t.anchorNode,f=t.anchorOffset):(p=t.anchorNode,u=t.anchorOffset,c=t.focusNode,f=t.focusOffset);for(var g=this.pdfViewerBase.textLayer.getPageIndex(p),m=this.pdfViewerBase.textLayer.getTextIndex(p,g),w=this.pdfViewerBase.textLayer.getPageIndex(c),y=this.pdfViewerBase.textLayer.getTextIndex(c,w),S=0,v=0,b=0,V=g;V<=w;V++){var A=[],x=void 0,C=void 0,I=void 0,k=void 0,T=this.pdfViewerBase.getElement("_textLayer_"+V).childNodes;a=this.pdfViewerBase.getElement("_pageDiv_"+V).getBoundingClientRect();this.pdfViewerBase.isMixedSizeDocument&&(a=this.pdfViewerBase.getElement("_textLayer_"+V).getBoundingClientRect());for(var M=b=V===g?m:0;M<T.length;M++){var P=T[M];M===b?(x=b,I=V===g?u:0):(C=M,k=V===w?f:P.textContent.length),S=M===m&&V===g?u:0,v=M===y&&V===w?f:P.textContent.length;for(var B=0;B<P.childNodes.length;B++){var E=P.childNodes[B];i.setStart(E,S),i.setEnd(E,v)}s=i.getBoundingClientRect(),l={x:this.getDefaultValue(s.left-a.left),y:this.getDefaultValue(s.top-a.top),left:this.getDefaultValue(s.left-a.left),top:this.getDefaultValue(s.top-a.top),width:this.getDefaultValue(s.width),height:this.getDefaultValue(s.height),right:this.getDefaultValue(s.right-a.left),bottom:this.getDefaultValue(s.bottom-a.top)};if(A.push(l),i.detach(),V===w&&M===y)break}C||(C=x),k||(k=v);var N=this.pdfViewerBase.getElement("_text_"+V+"_"+x).childNodes[0],D=this.pdfViewerBase.getElement("_text_"+V+"_"+C).childNodes[0],F=document.createRange();F.setStart(N,I),F.setEnd(D,k);var L=F.getBoundingClientRect(),_=F.toString(),O=(r=this.getIndexNumbers(V,_),{left:this.getDefaultValue(L.left-a.left),top:this.getDefaultValue(L.top-a.top),width:this.getDefaultValue(L.width),height:this.getDefaultValue(L.height),right:this.getDefaultValue(L.right-a.left),bottom:this.getDefaultValue(L.bottom-a.top)});h={x:O.left,y:O.top,left:O.left,top:O.top,right:O.right,bottom:O.bottom};e.push({pageIndex:V,bounds:A,rect:h,startIndex:r.startIndex,endIndex:r.endIndex,textContent:_})}}}return t.removeAllRanges(),e},e.prototype.getIndexNumbers=function(e,t,i){var n,o,a=this.pdfViewerBase.getStoredData(e);if(a){for(var s=0,r=a.pageText,l=0;l<e;l++)if(this.pdfViewer.isExtractText){var d=this.pdfViewer.textSearchModule.documentTextCollection[l][l],h=d.pageText?d.pageText:d.PageText;if(this.pdfViewer.textSearchModule&&this.pdfViewer.textSearchModule.documentTextCollection&&this.pdfViewer.textSearchModule.isTextRetrieved)this.pdfViewer.textSearchModule.documentTextCollection[l]&&(s+=h.length);else if(this.pdfViewer.textSearchModule&&this.pdfViewer.textSearchModule.documentTextCollection){if(!(e<=this.pdfViewer.textSearchModule.documentTextCollection.length)){s=0;break}this.pdfViewer.textSearchModule.documentTextCollection[l]&&(s+=h.length)}}if(sf.base.isNullOrUndefined(i))n=r.indexOf(t)+s;else n=r.indexOf(i)+i.indexOf(t)+s;o=n+(t.length-1)}return{startIndex:n,endIndex:o}},e.prototype.rerenderAnnotationsPinch=function(e){var t=this.pdfViewerBase.getElement("_annotationCanvas_"+e);if(t){var i=this.pdfViewerBase.getElement("_old_annotationCanvas_"+e);i&&(t?(i.id=t.id,t.parentElement.removeChild(t)):i.id=this.pdfViewer.dataId+"_annotationCanvas_"+e,t=i),t.style.width="",t.style.height="",this.pdfViewer.restrictZoomRequest?(t.style.width=this.pdfViewerBase.pageSize[e].width*this.pdfViewerBase.getZoomFactor()+"px",t.style.height=this.pdfViewerBase.pageSize[e].height*this.pdfViewerBase.getZoomFactor()+"px"):(t.width=this.pdfViewerBase.pageSize[e].width*this.pdfViewerBase.getZoomFactor(),t.height=this.pdfViewerBase.pageSize[e].height*this.pdfViewerBase.getZoomFactor()),this.renderTextMarkupAnnotations(null,e,t,this.pdfViewerBase.getZoomFactor())}},e.prototype.rerenderAnnotations=function(e){for(var t=document.querySelectorAll("#"+this.pdfViewer.dataId+"_old_annotationCanvas_"+e),i=0;i<t.length;i++)t[i]&&t[i].parentElement.removeChild(t[i]);var n=this.pdfViewerBase.getElement("_annotationCanvas_"+e);n&&(n.style.display="block")},e.prototype.onTextMarkupAnnotationMouseUp=function(e){var t=this.pdfViewer.annotationModule.getEventPageNumber(e);if(sf.base.isNullOrUndefined(t)||isNaN(t))this.pdfViewerBase.isClickedOnScrollBar(e,!0)||(this.clearCurrentAnnotation(),this.clearCurrentAnnotationSelection(t));else{var i=this.pdfViewerBase.getElement("_annotationCanvas_"+t);this.currentTextMarkupAnnotation?this.selectedTextMarkup=this.currentTextMarkupAnnotation:this.selectedTextMarkup=null,this.clearCurrentSelectedAnnotation();var n=this.getCurrentMarkupAnnotation(e.clientX,e.clientY,t,i);if(n&&!window.getSelection().toString()){var o=!1,a=!1;if(n.annotationSettings&&n.annotationSettings.isLock&&(o=n.annotationSettings.isLock)&&this.pdfViewer.annotationModule.checkAllowedInteractions("Select",n)&&(o=!1,a=!this.pdfViewer.annotationModule.checkAllowedInteractions("PropertyChange",n)),!o){var s=i.parentElement.getBoundingClientRect(),r=e.clientX-s.left,l=e.clientY-s.top;this.annotationClickPosition={x:r,y:l},this.selectAnnotation(n,i,t,e),this.currentTextMarkupAnnotation=n,this.selectTextMarkupCurrentPage=t,a||this.enableAnnotationPropertiesTool(!0);var d=document.getElementById(this.pdfViewer.dataId+"_commantPanel");if(d&&"block"===d.style.display){var h=document.getElementById(n.annotName);h&&h.firstElementChild&&h.firstElementChild.click()}}}else this.clearCurrentAnnotation();this.pdfViewer.isMaintainSelection&&!this.pdfViewer.textSelectionModule.isTextSelection?n&&this.clearCurrentAnnotationSelection(t):this.clearCurrentAnnotationSelection(t)}},e.prototype.onTextMarkupAnnotationTouchEnd=function(e){var t=this.pdfViewer.annotationModule.getEventPageNumber(e);if(sf.base.isNullOrUndefined(t)||isNaN(t))if(null!=this.selectTextMarkupCurrentPage&&sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){var i=this.selectTextMarkupCurrentPage;this.selectTextMarkupCurrentPage=null,this.clearAnnotationSelection(i)}else this.clearCurrentAnnotation(),this.clearCurrentAnnotationSelection(t);else{this.currentTextMarkupAnnotation?this.selectedTextMarkup=this.currentTextMarkupAnnotation:this.selectedTextMarkup=null,this.clearCurrentAnnotationSelection(t);var n=this.pdfViewerBase.getElement("_annotationCanvas_"+t);this.clearCurrentSelectedAnnotation();var o=this.getCurrentMarkupAnnotation(e.touches[0].clientX,e.touches[0].clientY,t,n);if(o){var a=!1;if(o.annotationSettings&&o.annotationSettings.isLock&&(a=o.annotationSettings.isLock),!a){var s=n.parentElement.getBoundingClientRect(),r=e.touches[0].clientX-s.left,l=e.touches[0].clientY-s.top;this.annotationClickPosition={x:r,y:l},this.selectAnnotation(o,n,t,e),this.currentTextMarkupAnnotation=o,this.selectTextMarkupCurrentPage=t,this.enableAnnotationPropertiesTool(!0);var d=document.getElementById(this.pdfViewer.dataId+"_accordionContainer"+(t+1));d&&d.ej2_instances[0].expandItem(!0);var h=document.getElementById(o.annotName);h&&(sf.base.Browser.isDevice||h.firstChild.click())}}else this.clearCurrentAnnotation();this.clearCurrentAnnotationSelection(t)}},e.prototype.clearCurrentSelectedAnnotation=function(){if(this.currentTextMarkupAnnotation){this.clearAnnotationSelection(this.selectTextMarkupCurrentPage);var e=this.currentTextMarkupAnnotation;this.pdfViewer.fireAnnotationUnSelect(e.annotName,e.pageNumber,e),this.clearCurrentAnnotation()}},e.prototype.onTextMarkupAnnotationMouseMove=function(e){var t=e.target,i=parseInt(t.id.split("_text_")[1])||parseInt(t.id.split("_textLayer_")[1])||parseInt(t.id.split("_annotationCanvas_")[1]);if(e.target&&(t.id.indexOf("_text")>-1||t.id.indexOf("_annotationCanvas")>-1||t.classList.contains("e-pv-hyperlink"))&&this.pdfViewer.annotation){i=this.pdfViewer.annotation.getEventPageNumber(e);var n=this.pdfViewerBase.getElement("_annotationCanvas_"+i),o=this.getCurrentMarkupAnnotation(e.clientX,e.clientY,i,n);if(o){t.style.cursor="pointer";var a=this.pdfViewerBase.getMousePosition(e),s=this.pdfViewerBase.relativePosition(e),r={left:s.x,top:s.y},l={left:a.x,top:a.y},d={opacity:o.opacity,color:o.color,author:o.author,subject:o.subject,modifiedDate:o.modifiedDate};this.pdfViewerBase.isMousedOver=!0,this.pdfViewer.fireAnnotationMouseover(o.annotName,o.pageNumber,o.textMarkupAnnotationType,o.bounds,d,l,r)}else this.pdfViewer.annotationModule.hidePopupNote(),this.pdfViewerBase.isPanMode&&!this.pdfViewerBase.getAnnotationToolStatus()&&(t.style.cursor="grab"),this.pdfViewerBase.isMousedOver&&!this.pdfViewerBase.isFormFieldMousedOver&&(this.pdfViewer.fireAnnotationMouseLeave(i),this.pdfViewerBase.isMousedOver=!1)}},e.prototype.showPopupNote=function(e,t){t.note&&this.pdfViewer.annotationModule.showPopupNote(e,t.color,t.author,t.note,t.textMarkupAnnotationType)},e.prototype.getCurrentMarkupAnnotation=function(e,t,i,n){var o=[];if(n){var a=n.parentElement.getBoundingClientRect();n.clientWidth!==n.parentElement.clientWidth&&(a=n.getBoundingClientRect());var s=e-a.left,r=t-a.top,l=this.getAnnotations(i,null),d=!1;if(l)for(var h=0;h<l.length;h++)for(var p=l[h],c=0;c<p.bounds.length;c++){var u=p.bounds[c],f=u.left?u.left:u.Left,g=u.top?u.top:u.Top,m=u.width?u.width:u.Width,w=u.height?u.height:u.Height;if(s>=this.getMagnifiedValue(f,this.pdfViewerBase.getZoomFactor())&&s<=this.getMagnifiedValue(f+m,this.pdfViewerBase.getZoomFactor())&&r>=this.getMagnifiedValue(g,this.pdfViewerBase.getZoomFactor())&&r<=this.getMagnifiedValue(g+w,this.pdfViewerBase.getZoomFactor()))o.push(p),d=!0;else if(d){d=!1;break}}var y=null;return o.length>1?y=this.compareCurrentAnnotations(o):1===o.length&&(y=o[0]),y}return null},e.prototype.compareCurrentAnnotations=function(e){for(var t,i=null,n=0;n<e.length&&n!==e.length-1;n++){var o=e[n].bounds,a=o[0].left?o[0].left:o[0].Left,s=o[0].top?o[0].top:o[0].Top,r=e[n+1].bounds,l=r[0].left?r[0].left:r[0].Left,d=r[0].top?r[0].top:r[0].Top;a<l||s<d?(t=l,i=e[n+1]):(t=a,i=e[n]),t&&n===e.length-2&&t===a&&t===l&&(t=l,i=e[n+1])}return i},e.prototype.clearAnnotationSelection=function(e){var t=this.pdfViewerBase.getElement("_annotationCanvas_"+e);t&&(t.getContext("2d").setLineDash([]),this.pdfViewer.annotationModule.renderAnnotations(e,null,null,null))},e.prototype.selectAnnotation=function(e,t,i,n,o){this.pdfViewer.selectedItems.annotations[0]&&(this.pdfViewer.clearSelection(this.pdfViewer.selectedItems.annotations[0].pageIndex),this.pdfViewer.clearSelection(this.selectTextMarkupCurrentPage));var a=!1;if(e.annotationSettings&&e.annotationSettings.isLock&&(a=e.annotationSettings.isLock)&&this.pdfViewer.annotationModule.checkAllowedInteractions("Select",e)&&(a=!1),!a){var s=!1;this.currentTextMarkupAnnotation||(s=!0),this.selectedTextMarkup&&e&&!o&&(s=this.selectedTextMarkup.annotName!==e.annotName),isNaN(i)||(this.selectTextMarkupCurrentPage=i,this.currentTextMarkupAnnotation=e,e=this.retreiveTextIndex(e),this.currentTextMarkupAnnotation=e),this.isSelectedAnnotation&&this.pdfViewer.textSelectionModule&&(this.pdfViewerBase.isSelection=!0,this.updateAnnotationBounds());var r=n;if(this.isEnableTextMarkupResizer(e.textMarkupAnnotationType)&&e&&r&&!r.touches&&this.updateCurrentResizerPosition(e),this.drawAnnotationSelector(e,this.currentTextMarkupAnnotation,t),e.isMultiSelect&&e.annotNameCollection&&this.selectMultiPageAnnotations(e),""!==e.annotName&&!this.isNewAnnotation&&s){var l=!1;r||(l=!0),this.pdfViewer.annotationModule.annotationSelect(e.annotName,this.selectTextMarkupCurrentPage,e,null,!1,l),this.selectedTextMarkup=null}e&&this.isEnableTextMarkupResizer(e.textMarkupAnnotationType)&&(this.isTextMarkupAnnotationMode=!0)}},e.prototype.updateCurrentResizerPosition=function(e){if(e||(e=this.currentTextMarkupAnnotation),e&&this.isEnableTextMarkupResizer(e.textMarkupAnnotationType)&&e){var t=this.pdfViewerBase.getElement("_textLayer_"+this.selectTextMarkupCurrentPage);if(t){var i=t.getBoundingClientRect(),n=e.bounds[0].left?e.bounds[0].left:e.bounds[0].Left,o=e.bounds[0].top?e.bounds[0].top:e.bounds[0].Top;this.updateLeftposition(n*this.pdfViewerBase.getZoomFactor()+i.left,i.top+o,!0);var a=e.bounds[e.bounds.length-1],s=a.left?a.left:a.Left,r=a.top?a.top:a.Top,l=a.width?a.width:a.Width;this.updatePosition((s+l)*this.pdfViewerBase.getZoomFactor()+i.left,r+i.top,!0)}}},e.prototype.drawAnnotationSelectRect=function(e,t,i,n,o,a){var s=this.pdfViewerBase.getZoomRatio();if(e){var r=e.getContext("2d");if(r.setTransform(1,0,0,1,0,0),r.beginPath(),"string"==typeof a.annotationSelectorSettings){(d=0===JSON.parse(a.annotationSelectorSettings).selectorLineDashArray.length?[4]:JSON.parse(a.annotationSelectorSettings).selectorLineDashArray).length>2&&(d=[d[0],d[1]]),r.setLineDash(d),r.globalAlpha=1,r.rect(t*s,i*s,n*s,o*s),r.closePath();var l=""===JSON.parse(a.annotationSelectorSettings).selectionBorderColor?"#0000ff":JSON.parse(a.annotationSelectorSettings).selectionBorderColor;r.strokeStyle=l,r.lineWidth=1===JSON.parse(a.annotationSelectorSettings).selectionBorderThickness?1:a.annotationSelectorSettings.selectionBorderThickness,r.stroke(),r.save()}else{var d;(d=0===a.annotationSelectorSettings.selectorLineDashArray.length?[4]:a.annotationSelectorSettings.selectorLineDashArray).length>2&&(d=[d[0],d[1]]),r.setLineDash(d),r.globalAlpha=1,r.rect(t*s,i*s,n*s,o*s),r.closePath();l=""===a.annotationSelectorSettings.selectionBorderColor?"#0000ff":a.annotationSelectorSettings.selectionBorderColor;r.strokeStyle=l,r.lineWidth=a.annotationSelectorSettings.selectionBorderThickness?1:a.annotationSelectorSettings.selectionBorderThickness,r.stroke(),r.save()}}},e.prototype.enableAnnotationPropertiesTool=function(e){if(this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.annotationToolbarModule&&(this.pdfViewer.toolbarModule.annotationToolbarModule.colorDropDownElementInBlazor=this.pdfViewer.element.querySelector(".e-pv-annotation-color-container")),this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.annotationToolbarModule&&0===this.pdfViewer.selectedItems.annotations.length&&this.pdfViewer.toolbarModule.annotationToolbarModule){this.pdfViewer.toolbarModule.annotationToolbarModule.selectAnnotationDeleteItem(e);var t=e;this.isTextMarkupAnnotationMode&&(t=!0),this.pdfViewer.toolbarModule.annotationToolbarModule.enableTextMarkupAnnotationPropertiesTools(t),this.currentTextMarkupAnnotation?this.pdfViewer.toolbarModule.annotationToolbarModule.updateColorInIcon(this.pdfViewer.toolbarModule.annotationToolbarModule.colorDropDownElementInBlazor,this.currentTextMarkupAnnotation.color):sf.base.isNullOrUndefined(this.isTextMarkupAnnotationMode)||this.isTextMarkupAnnotationMode||this.pdfViewer.toolbarModule.annotationToolbarModule.updateColorInIcon(this.pdfViewer.toolbarModule.annotationToolbarModule.colorDropDownElementInBlazor,"#000000")}},e.prototype.maintainAnnotationSelection=function(){if(this.currentTextMarkupAnnotation){var e=this.pdfViewerBase.getElement("_annotationCanvas_"+this.selectTextMarkupCurrentPage);e&&this.selectAnnotation(this.currentTextMarkupAnnotation,e,this.selectTextMarkupCurrentPage)}},e.prototype.manageAnnotations=function(e,t){var i=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_textMarkup");if(this.pdfViewerBase.isStorageExceed&&(i=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_textMarkup"]),i){var n=JSON.parse(i);this.pdfViewerBase.isStorageExceed||window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_textMarkup");var o=this.pdfViewer.annotationModule.getPageCollection(n,t);n[o]&&(n[o].annotations=e);var a=JSON.stringify(n);this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_textMarkup"]=a:window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_annotations_textMarkup",a)}},e.prototype.getAnnotations=function(e,t,i){var n;null!=i&&null!=i||(i="_annotations_textMarkup");var o=window.sessionStorage.getItem(this.pdfViewerBase.documentId+i);if(this.pdfViewerBase.isStorageExceed&&(o=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+i]),o){var a=JSON.parse(o),s=this.pdfViewer.annotationModule.getPageCollection(a,e);n=a[s]?a[s].annotations:t}else n=t;return n},e.prototype.getAddedAnnotation=function(e,t,i,n,o,a,s,r,l,d,h,p,c,u,f,g,m){var w=s||this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),y=this.pdfViewer.annotation.createGUID();this.pdfViewer.annotation.stickyNotesAnnotationModule.addComments("textMarkup",h+1,e,y,"",o);var S=this.getAnnotationSettings(e),v=this.getIsPrintValue(e),b={textMarkupAnnotationType:e,color:t,opacity:i,bounds:n,author:o,allowedInteractions:g,subject:a,modifiedDate:w,note:r,rect:d,annotName:y,comments:[],review:{state:"",stateModel:"",author:o,modifiedDate:w},shapeAnnotationType:"textMarkup",pageNumber:h,textMarkupContent:p,textMarkupStartIndex:c,textMarkupEndIndex:u,isMultiSelect:f,annotationSelectorSettings:this.getSelector(e),customData:this.pdfViewer.annotation.getTextMarkupData(a),annotationAddMode:this.annotationAddMode,annotationSettings:S,isPrint:v,isCommentLock:l,isAnnotationRotated:!1,annotationRotation:m};f&&this.multiPageCollection.push(b);var V=!1;f&&this.isExtended&&(V=!0),document.getElementById(y)&&!V&&document.getElementById(y).addEventListener("mouseup",this.annotationDivSelect(b,h));var A=this.pdfViewer.annotationModule.storeAnnotations(h,b,"_annotations_textMarkup");return this.pdfViewer.annotationModule.addAction(h,A,b,"Text Markup Added",null),b},e.prototype.getSelector=function(e){var t=this.pdfViewer.annotationSelectorSettings;return"Highlight"===e&&this.pdfViewer.highlightSettings.annotationSelectorSettings?t=this.pdfViewer.highlightSettings.annotationSelectorSettings:"Underline"===e&&this.pdfViewer.underlineSettings.annotationSelectorSettings?t=this.pdfViewer.underlineSettings.annotationSelectorSettings:"Strikethrough"===e&&this.pdfViewer.strikethroughSettings.annotationSelectorSettings&&(t=this.pdfViewer.strikethroughSettings.annotationSelectorSettings),t},e.prototype.getAnnotationSettings=function(e){var t={isLock:!1};return("Highlight"===e&&this.pdfViewer.highlightSettings.isLock||"Underline"===e&&this.pdfViewer.underlineSettings.isLock||"Strikethrough"===e&&this.pdfViewer.strikethroughSettings.isLock||this.pdfViewer.annotationSettings.isLock)&&(t={isLock:!0}),t},e.prototype.getIsPrintValue=function(e){var t=!0;return"Highlight"===e&&(t=this.pdfViewer.highlightSettings.isPrint),"Underline"===e&&(t=this.pdfViewer.underlineSettings.isPrint),"Strikethrough"===e&&(t=this.pdfViewer.strikethroughSettings.isPrint),t},e.prototype.annotationDivSelect=function(e,t){var i=this.pdfViewerBase.getElement("_annotationCanvas_"+t);if(this.selectAnnotation(e,i,t),this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.annotationToolbarModule&&this.pdfViewer.enableAnnotationToolbar){this.pdfViewer.toolbarModule.annotationToolbarModule.clearShapeMode(),this.pdfViewer.toolbarModule.annotationToolbarModule.clearMeasureMode();var n=!1;e.annotationSettings&&e.annotationSettings.isLock&&(n=e.annotationSettings.isLock),n?(this.pdfViewer.annotationModule.checkAllowedInteractions("PropertyChange",e)&&this.pdfViewer.toolbarModule.annotationToolbarModule.enableTextMarkupAnnotationPropertiesTools(!0),this.pdfViewer.annotationModule.checkAllowedInteractions("Delete",e)&&this.pdfViewer.toolbarModule.annotationToolbarModule.selectAnnotationDeleteItem(!0)):(this.pdfViewer.toolbarModule.annotationToolbarModule.enableTextMarkupAnnotationPropertiesTools(!0),this.pdfViewer.toolbarModule.annotationToolbarModule.selectAnnotationDeleteItem(!0)),this.pdfViewer.toolbarModule.annotationToolbarModule.isToolbarHidden=!1}},e.prototype.getPageContext=function(e){var t=this.pdfViewerBase.getElement("_annotationCanvas_"+e),i=null;return t&&(i=t.getContext("2d")),i},e.prototype.getDefaultValue=function(e){return e/this.pdfViewerBase.getZoomFactor()},e.prototype.getMagnifiedValue=function(e,t){return e*t},e.prototype.saveImportedTextMarkupAnnotations=function(e,t){var i;e.Author=this.pdfViewer.annotationModule.updateAnnotationAuthor("textMarkup",e.Subject),e.AnnotationSettings&&e.AnnotationSettings.isLock?e.AnnotationSettings={isLock:e.AnnotationSettings.isLock}:e.AnnotationSettings=this.getAnnotationSettings(e.TextMarkupAnnotationType),e.allowedInteractions=this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(e),i={textMarkupAnnotationType:e.TextMarkupAnnotationType,color:e.Color,opacity:e.Opacity,allowedInteractions:e.allowedInteractions,bounds:e.Bounds,author:e.Author,subject:e.Subject,modifiedDate:e.ModifiedDate,note:e.Note,rect:e.Rect,annotName:e.AnnotName,comments:this.pdfViewer.annotationModule.getAnnotationComments(e.Comments,e,e.Author),review:{state:e.State,stateModel:e.StateModel,modifiedDate:e.ModifiedDate,author:e.Author},shapeAnnotationType:"textMarkup",pageNumber:t,textMarkupContent:e.TextMarkupContent,textMarkupStartIndex:0,textMarkupEndIndex:0,annotationSelectorSettings:this.getSettings(e),customData:this.pdfViewer.annotation.getCustomData(e),isMultiSelect:e.IsMultiSelect,annotNameCollection:e.AnnotNameCollection,annotpageNumbers:e.AnnotpageNumbers,annotationAddMode:this.annotationAddMode,annotationSettings:e.AnnotationSettings,isPrint:e.isPrint,isCommentLock:e.IsCommentLock,isAnnotationRotated:!1},this.pdfViewer.annotationModule.storeAnnotations(t,i,"_annotations_textMarkup")},e.prototype.updateTextMarkupAnnotationCollections=function(e,t){return e.allowedInteractions=e.AllowedInteractions?e.AllowedInteractions:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(e),{textMarkupAnnotationType:e.TextMarkupAnnotationType,allowedInteractions:e.allowedInteractions,color:e.Color,opacity:e.Opacity,bounds:e.Bounds,author:e.Author,subject:e.Subject,modifiedDate:e.ModifiedDate,note:e.Note,rect:e.Rect,annotationId:e.AnnotName,comments:this.pdfViewer.annotationModule.getAnnotationComments(e.Comments,e,e.Author),review:{state:e.State,stateModel:e.StateModel,modifiedDate:e.ModifiedDate,author:e.Author},shapeAnnotationType:"textMarkup",pageNumber:t,isMultiSelect:e.IsMultiSelect,annotNameCollection:e.AnnotNameCollection,annotpageNumbers:e.AnnotpageNumbers,customData:this.pdfViewer.annotation.getCustomData(e),isPrint:e.isPrint,isCommentLock:e.IsCommentLock}},e.prototype.updateTextMarkupSettings=function(e){"highlightSettings"===e&&(this.highlightColor=this.pdfViewer.highlightSettings.color?this.pdfViewer.highlightSettings.color:this.highlightColor,this.highlightOpacity=this.pdfViewer.highlightSettings.opacity?this.pdfViewer.highlightSettings.opacity:this.highlightOpacity),"underlineSettings"===e&&(this.underlineColor=this.pdfViewer.underlineSettings.color?this.pdfViewer.underlineSettings.color:this.underlineColor,this.underlineOpacity=this.pdfViewer.underlineSettings.opacity?this.pdfViewer.underlineSettings.opacity:this.underlineOpacity),"strikethroughSettings"===e&&(this.strikethroughColor=this.pdfViewer.strikethroughSettings.color?this.pdfViewer.strikethroughSettings.color:this.strikethroughColor,this.strikethroughOpacity=this.pdfViewer.strikethroughSettings.opacity?this.pdfViewer.strikethroughSettings.opacity:this.strikethroughOpacity)},e.prototype.clear=function(){this.selectTextMarkupCurrentPage=null,this.currentTextMarkupAnnotation=null,this.annotationClickPosition=null,window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_textMarkup")},e.prototype.getOffsetPoints=function(e){for(var t=[],i=0;i<e.length;i++)t[i]={X:e[i].x,Y:e[i].y,Width:e[i].width,Height:e[i].height,Left:e[i].x,Top:e[i].y};return t},e.prototype.updateAddAnnotationDetails=function(e,t){t||(t={pageNumber:0});var i=null,n=null,o="",a=null,s="",r=[],l=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),d=this.pdfViewer.annotation.createGUID();"Highlight"==e?(i=this.pdfViewer.highlightSettings.annotationSelectorSettings?this.pdfViewer.highlightSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,a=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.highlightSettings),n=this.pdfViewer.highlightSettings.allowedInteractions?this.pdfViewer.highlightSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions,o="Highlight",s=t.color?t.color:"#ffff00"):"Underline"==e?(i=this.pdfViewer.underlineSettings.annotationSelectorSettings?this.pdfViewer.underlineSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,a=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.underlineSettings),n=this.pdfViewer.underlineSettings.allowedInteractions?this.pdfViewer.underlineSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions,o="Underline",s=t.color?t.color:"#00ff00"):"Strikethrough"==e&&(i=this.pdfViewer.strikethroughSettings.annotationSelectorSettings?this.pdfViewer.strikethroughSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,a=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.strikethroughSettings),n=this.pdfViewer.strikethroughSettings.allowedInteractions?this.pdfViewer.strikethroughSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions,o="Strikethrough",s=t.color?t.color:"#ff0000"),a.isLock=!!t.isLock&&t.isLock,r=t.bounds?this.getOffsetPoints(t.bounds):[{X:1,Y:1,Width:100,Height:14,Left:1,Top:1,Location:{X:1,Y:1},Size:{Height:14,IsEmpty:!1,Width:100}}];var h=[],p={AllowedInteractions:t.allowedInteractions?t.allowedInteractions:n,AnnotName:d,AnnotNameCollection:null,AnnotType:"textMarkup",AnnotationSelectorSettings:t.annotationSelectorSettings?t.annotationSelectorSettings:i,AnnotationSettings:a,Author:t.author?t.author:"Guest",Bounds:r,Color:t.color?t.color:s,Comments:null,CreatedDate:l,CustomData:t.customData?t.customData:null,ExistingCustomData:null,EnableMultiPageAnnotation:!!t.enableMultiPageAnnotation&&t.enableMultiPageAnnotation,EnableTextMarkupResizer:!!t.enableTextMarkupResizer&&t.enableTextMarkupResizer,IsCommentLock:!1,IsMultiSelect:!1,IsLock:!!t.isLock&&t.isLock,IsPrint:!t.isPrint||t.isPrint,ModifiedDate:l,Note:"",Opacity:t.opacity?t.opacity:1,Rect:{},State:"",StateModel:"",Subject:o,TextMarkupAnnotationType:o};return h[0]=p,{textMarkupAnnotation:h}},e}(),Ke=function(){function e(e,t){this.measureShapeCount=0,this.isAddAnnotationProgramatically=!1,this.pdfViewer=e,this.pdfViewerBase=t}return Object.defineProperty(e.prototype,"pixelToPointFactor",{get:function(){return.75},enumerable:!0,configurable:!0}),e.prototype.renderMeasureShapeAnnotations=function(e,t,i){if(e)if(e.length>=1){if(!this.pdfViewer.annotation.getStoredAnnotations(t,e,"_annotations_shape_measure")||i)for(var n=0;n<e.length;n++){var o=e[n],a=null;this.measureShapeCount=this.measureShapeCount+1,o.annotationAddMode=this.pdfViewer.annotationModule.findAnnotationMode(o,t,o.AnnotType);var s=void 0;if(o.ShapeAnnotationType){i&&this.pdfViewerBase.isJsonImported&&(o.Bounds=this.pdfViewerBase.importJsonForRotatedDocuments(o.Rotate,t,o.Bounds,o.AnnotationRotation),s=this.pdfViewerBase.isPageRotated);var r=null;if(o.VertexPoints)if(r=[],i&&this.pdfViewerBase.isJsonImported)r=this.pdfViewerBase.calculateVertexPoints(o.Rotate,t,o.VertexPoints,o.AnnotationRotation);else for(var l=0;l<o.VertexPoints.length;l++){var d={x:o.VertexPoints[l].X?o.VertexPoints[l].X:o.VertexPoints[l].x,y:o.VertexPoints[l].Y?o.VertexPoints[l].Y:o.VertexPoints[l].y};r.push(d)}o.Bounds&&!0===o.EnableShapeLabel&&(o.LabelBounds=this.pdfViewer.annotationModule.inputElementModule.calculateLabelBoundsFromLoadedDocument(o.Bounds),o.LabelBorderColor=o.LabelBorderColor?o.LabelBorderColor:o.StrokeColor,o.FontColor=o.FontColor?o.FontColor:o.StrokeColor,o.LabelFillColor=o.LabelFillColor?o.LabelFillColor:o.FillColor,o.FontSize=o.FontSize?o.FontSize:16,o.LabelSettings=o.LabelSettings?o.LabelSettings:this.pdfViewer.shapeLabelSettings),o.AnnotationSettings=o.AnnotationSettings?o.AnnotationSettings:this.pdfViewer.annotationModule.updateAnnotationSettings(o),o.allowedInteractions=o.AllowedInteractions?o.AllowedInteractions:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(o);var h=o.AnnotationSettings.isPrint,p={ratio:o.Calibrate.Ratio,x:this.getNumberFormatArray(o.Calibrate.X),distance:this.getNumberFormatArray(o.Calibrate.Distance),area:this.getNumberFormatArray(o.Calibrate.Area),angle:this.getNumberFormatArray(o.Calibrate.Angle),volume:this.getNumberFormatArray(o.Calibrate.Volume),targetUnitConversion:o.Calibrate.TargetUnitConversion};o.Calibrate.Depth&&(p.depth=o.Calibrate.Depth);var c,u=o.Bounds.X?o.Bounds.X:o.Bounds.x,f=o.Bounds.Y?o.Bounds.Y:o.Bounds.y,g=o.Bounds.Width?o.Bounds.Width:o.Bounds.width,m=o.Bounds.Height?o.Bounds.Height:o.Bounds.height,w=(a={id:"measure"+this.measureShapeCount,shapeAnnotationType:o.ShapeAnnotationType,type:this.getMeasureType(o.ShapeAnnotationType,o.Indent),author:o.Author,allowedInteractions:o.allowedInteractions,modifiedDate:o.ModifiedDate,subject:o.Subject,note:o.Note,strokeColor:o.StrokeColor,fillColor:o.FillColor,opacity:o.Opacity,thickness:o.Thickness,rectangleDifference:o.RectangleDifference,borderStyle:o.BorderStyle,borderDashArray:o.BorderDashArray,rotateAngle:o.RotateAngle,isCloudShape:o.IsCloudShape,cloudIntensity:o.CloudIntensity,vertexPoints:r,lineHeadStart:o.LineHeadStart,lineHeadEnd:o.LineHeadEnd,isLocked:o.IsLocked,bounds:{x:u,y:f,left:u,top:f,width:g,height:m,right:o.Bounds.Right,bottom:o.Bounds.Bottom},caption:o.Caption,captionPosition:o.CaptionPosition,calibrate:p,leaderLength:o.LeaderLength,leaderLineExtension:o.LeaderLineExtension,leaderLineOffset:o.LeaderLineOffset,indent:o.Indent,annotName:o.AnnotName,comments:this.pdfViewer.annotationModule.getAnnotationComments(o.Comments,o,o.Author),review:{state:o.State,stateModel:o.StateModel,modifiedDate:o.ModifiedDate,author:o.Author},labelContent:o.LabelContent,enableShapeLabel:o.EnableShapeLabel,labelFillColor:o.LabelFillColor,fontColor:o.FontColor,labelBorderColor:o.LabelBorderColor,fontSize:o.FontSize,labelBounds:o.LabelBounds,annotationSelectorSettings:this.getSettings(o),labelSettings:o.LabelSettings,annotationSettings:o.AnnotationSettings,customData:this.pdfViewer.annotation.getCustomData(o),isPrint:h,isCommentLock:o.IsCommentLock,isAnnotationRotated:s}).vertexPoints;if(null==r&&(w=[]),o.AnnotationSelectorSettings=o.AnnotationSelectorSettings?o.AnnotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,o.allowedInteractions=o.AllowedInteractions?o.AllowedInteractions:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(o),c={id:"measure"+this.measureShapeCount,shapeAnnotationType:this.getShapeType(a),type:this.getMeasureType(a.shapeAnnotationType,a.indent),author:a.author,allowedInteractions:o.allowedInteractions,modifiedDate:a.modifiedDate,subject:a.subject,notes:a.note,fillColor:a.fillColor,strokeColor:a.strokeColor,opacity:a.opacity,thickness:a.thickness,borderStyle:a.borderStyle,borderDashArray:a.borderDashArray.toString(),rotateAngle:parseFloat(a.rotateAngle.split("Angle")[1]),isCloudShape:a.isCloudShape,cloudIntensity:a.cloudIntensity,taregetDecoraterShapes:this.pdfViewer.annotation.getArrowType(a.lineHeadEnd),sourceDecoraterShapes:this.pdfViewer.annotation.getArrowType(a.lineHeadStart),vertexPoints:w,bounds:{x:a.bounds.left,y:a.bounds.top,width:a.bounds.width,height:a.bounds.height},leaderHeight:a.leaderLength,pageIndex:t,annotName:a.annotName,comments:a.comments,review:a.review,measureType:this.getMeasureType(a.shapeAnnotationType,a.indent),labelContent:o.LabelContent,enableShapeLabel:o.EnableShapeLabel,labelFillColor:o.LabelFillColor,fontColor:o.FontColor,labelBorderColor:o.LabelBorderColor,fontSize:o.FontSize,labelBounds:o.LabelBounds,annotationSelectorSettings:o.AnnotationSelectorSettings,annotationSettings:a.annotationSettings,annotationAddMode:o.annotationAddMode,isPrint:h,isCommentLock:a.isCommentLock},this.pdfViewer.annotation.storeAnnotations(t,a,"_annotations_shape_measure"),this.isAddAnnotationProgramatically){var y={opacity:c.opacity,strokeColor:c.strokeColor,thickness:c.thickness,modifiedDate:c.modifiedDate,width:c.bounds.width,height:c.bounds.height};this.pdfViewer.fireAnnotationAdd(c.pageIndex,c.annotName,o.ShapeAnnotationType,c.bounds,y)}this.pdfViewer.add(c)}}}else if(e.shapeAnnotationType){a=this.createAnnotationObject(e);this.pdfViewer.annotationModule.storeAnnotations(t,a,"_annotations_shape_measure"),this.pdfViewer.annotationModule.triggerAnnotationAdd(e)}},e.prototype.getSettings=function(e){this.pdfViewer.annotationSelectorSettings;return e.AnnotationSelectorSettings?e.AnnotationSelectorSettings:this.getSelector(e.Subject)},e.prototype.setAnnotationType=function(e){var t="Guest";switch(this.updateMeasureproperties(),this.pdfViewerBase.disableTextSelectionMode(),e){case"Distance":this.currentAnnotationMode="Distance";this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();t="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.distanceSettings.author?this.pdfViewer.distanceSettings.author:"Guest",this.pdfViewer.drawingObject={sourceDecoraterShapes:this.pdfViewer.annotation.getArrowType(this.distanceStartHead),taregetDecoraterShapes:this.pdfViewer.annotation.getArrowType(this.distanceEndHead),measureType:"Distance",fillColor:this.distanceFillColor,notes:"",strokeColor:this.distanceStrokeColor,leaderHeight:this.leaderLength,opacity:this.distanceOpacity,thickness:this.distanceThickness,borderDashArray:this.distanceDashArray.toString(),shapeAnnotationType:"Distance",author:t,subject:"Distance calculation",isCommentLock:!1},this.pdfViewer.tool="Distance";break;case"Perimeter":this.currentAnnotationMode="Perimeter";this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();t="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.perimeterSettings.author?this.pdfViewer.perimeterSettings.author:"Guest",this.pdfViewer.drawingObject={shapeAnnotationType:"LineWidthArrowHead",fillColor:this.perimeterFillColor,notes:"",strokeColor:this.perimeterStrokeColor,opacity:this.perimeterOpacity,thickness:this.perimeterThickness,sourceDecoraterShapes:this.pdfViewer.annotation.getArrowType(this.perimeterStartHead),taregetDecoraterShapes:this.pdfViewer.annotation.getArrowType(this.perimeterEndHead),measureType:"Perimeter",borderDashArray:this.perimeterDashArray.toString(),author:t,subject:"Perimeter calculation",isCommentLock:!1},this.pdfViewer.tool="Perimeter";break;case"Area":this.currentAnnotationMode="Area";var i=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();t="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.areaSettings.author?this.pdfViewer.areaSettings.author:"Guest",this.pdfViewer.drawingObject={shapeAnnotationType:"Polygon",fillColor:this.areaFillColor,notes:"",strokeColor:this.areaStrokeColor,thickness:this.areaThickness,opacity:this.areaOpacity,measureType:"Area",modifiedDate:i,borderStyle:"",borderDashArray:"0",author:t,subject:"Area calculation",isCommentLock:!1},this.pdfViewer.tool="Polygon";break;case"Radius":this.currentAnnotationMode="Radius";var n=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();t="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.radiusSettings.author?this.pdfViewer.radiusSettings.author:"Guest",this.pdfViewer.drawingObject={shapeAnnotationType:"Radius",fillColor:this.radiusFillColor,notes:"",strokeColor:this.radiusStrokeColor,opacity:this.radiusOpacity,thickness:this.radiusThickness,measureType:"Radius",modifiedDate:n,borderStyle:"",borderDashArray:"0",author:t,subject:"Radius calculation",isCommentLock:!1},this.pdfViewer.tool="DrawTool";break;case"Volume":this.currentAnnotationMode="Volume";var o=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();t="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.volumeSettings.author?this.pdfViewer.volumeSettings.author:"Guest",this.pdfViewer.drawingObject={shapeAnnotationType:"Polygon",notes:"",fillColor:this.volumeFillColor,strokeColor:this.volumeStrokeColor,opacity:this.volumeOpacity,thickness:this.volumeThickness,measureType:"Volume",modifiedDate:o,borderStyle:"",borderDashArray:"0",author:t,subject:"Volume calculation",isCommentLock:!1},this.pdfViewer.tool="Polygon"}},e.prototype.updateMeasureproperties=function(){this.distanceFillColor=this.pdfViewer.distanceSettings.fillColor?this.pdfViewer.distanceSettings.fillColor:"#ff0000",this.distanceStrokeColor=this.pdfViewer.distanceSettings.strokeColor?this.pdfViewer.distanceSettings.strokeColor:"#ff0000",this.distanceOpacity=this.pdfViewer.distanceSettings.opacity?this.pdfViewer.distanceSettings.opacity:1,this.distanceThickness=this.pdfViewer.distanceSettings.thickness?this.pdfViewer.distanceSettings.thickness:1,this.distanceDashArray=this.pdfViewer.distanceSettings.borderDashArray?this.pdfViewer.distanceSettings.borderDashArray:0,this.leaderLength=null!=this.pdfViewer.distanceSettings.leaderLength?this.pdfViewer.distanceSettings.leaderLength:40,this.distanceStartHead=this.pdfViewer.distanceSettings.lineHeadStartStyle?this.pdfViewer.distanceSettings.lineHeadStartStyle:"Closed",this.distanceEndHead=this.pdfViewer.distanceSettings.lineHeadEndStyle?this.pdfViewer.distanceSettings.lineHeadEndStyle:"Closed",this.perimeterFillColor=this.pdfViewer.perimeterSettings.fillColor?this.pdfViewer.perimeterSettings.fillColor:"#ffffff00",this.perimeterStrokeColor=this.pdfViewer.perimeterSettings.strokeColor?this.pdfViewer.perimeterSettings.strokeColor:"#ff0000",this.perimeterOpacity=this.pdfViewer.perimeterSettings.opacity?this.pdfViewer.perimeterSettings.opacity:1,this.perimeterThickness=this.pdfViewer.perimeterSettings.thickness?this.pdfViewer.perimeterSettings.thickness:1,this.perimeterDashArray=this.pdfViewer.perimeterSettings.borderDashArray?this.pdfViewer.perimeterSettings.borderDashArray:0,this.perimeterStartHead=this.pdfViewer.perimeterSettings.lineHeadStartStyle?this.pdfViewer.perimeterSettings.lineHeadStartStyle:"Open",this.perimeterEndHead=this.pdfViewer.perimeterSettings.lineHeadEndStyle?this.pdfViewer.perimeterSettings.lineHeadEndStyle:"Open",this.areaFillColor=this.pdfViewer.areaSettings.fillColor?this.pdfViewer.areaSettings.fillColor:"#ffffff00",this.areaStrokeColor=this.pdfViewer.areaSettings.strokeColor?this.pdfViewer.areaSettings.strokeColor:"#ff0000",this.areaOpacity=this.pdfViewer.areaSettings.opacity?this.pdfViewer.areaSettings.opacity:1,this.areaThickness=this.pdfViewer.areaSettings.thickness?this.pdfViewer.areaSettings.thickness:1,this.radiusFillColor=this.pdfViewer.radiusSettings.fillColor?this.pdfViewer.radiusSettings.fillColor:"#ffffff00",this.radiusStrokeColor=this.pdfViewer.radiusSettings.strokeColor?this.pdfViewer.radiusSettings.strokeColor:"#ff0000",this.radiusOpacity=this.pdfViewer.radiusSettings.opacity?this.pdfViewer.radiusSettings.opacity:1,this.radiusThickness=this.pdfViewer.radiusSettings.thickness?this.pdfViewer.radiusSettings.thickness:1,this.volumeFillColor=this.pdfViewer.volumeSettings.fillColor?this.pdfViewer.volumeSettings.fillColor:"#ffffff00",this.volumeStrokeColor=this.pdfViewer.volumeSettings.strokeColor?this.pdfViewer.volumeSettings.strokeColor:"#ff0000",this.volumeOpacity=this.pdfViewer.volumeSettings.opacity?this.pdfViewer.volumeSettings.opacity:1,this.volumeThickness=this.pdfViewer.volumeSettings.thickness?this.pdfViewer.volumeSettings.thickness:1,this.unit=this.pdfViewer.measurementSettings.conversionUnit.toLowerCase(),this.displayUnit=this.pdfViewer.measurementSettings.displayUnit.toLowerCase(),this.ratio=this.pdfViewer.measurementSettings.scaleRatio,this.volumeDepth=this.pdfViewer.measurementSettings.depth,this.scaleRatioString="1 "+this.unit+" = "+this.ratio.toString()+" "+this.displayUnit},e.prototype.createAnnotationObject=function(e){var t,i,n=this.pdfViewer.annotation.createGUID();this.pdfViewer.annotation.stickyNotesAnnotationModule.addComments("shape_measure",e.pageIndex+1,e.measureType,n,e.notes,e.author),e.annotName=n,e.author=this.pdfViewer.annotationModule.updateAnnotationAuthor("measure",e.subject),e.wrapper.bounds?(t={x:e.wrapper.bounds.x,y:e.wrapper.bounds.y,left:e.wrapper.bounds.x,top:e.wrapper.bounds.y,height:e.wrapper.bounds.height,width:e.wrapper.bounds.width,right:e.wrapper.bounds.right,bottom:e.wrapper.bounds.bottom},i=this.pdfViewer.annotationModule.inputElementModule.calculateLabelBounds(e.wrapper.bounds)):(t={x:0,y:0,left:0,top:0,height:0,width:0,right:0,bottom:0},i={x:0,y:0,left:0,top:0,height:0,width:0,right:0,bottom:0});var o=parseInt(e.borderDashArray);o=isNaN(o)?0:o;var a={ratio:this.scaleRatioString,x:[this.createNumberFormat("x")],distance:[this.createNumberFormat("d")],area:[this.createNumberFormat("a")]};"Volume"===e.measureType&&(a.depth=this.volumeDepth);var s=this.pdfViewer.annotationModule.findAnnotationSettings(e,!0),r=this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(e);e.isPrint=s.isPrint;var l=this.pdfViewer.shapeLabelSettings,d={borderColor:e.strokeColor,fillColor:e.fillColor,fontColor:e.fontColor,fontSize:e.fontSize,labelContent:e.labelContent,labelHeight:l.labelHeight,labelWidth:l.labelMaxWidth,opacity:e.opacity};return{id:e.id,shapeAnnotationType:this.getShapeAnnotType(e.measureType),type:this.getMeasureType(this.getShapeAnnotType(e.measureType),this.getIndent(e.measureType)),author:e.author,allowedInteractions:r,subject:e.subject,note:e.notes,strokeColor:e.strokeColor,fillColor:e.fillColor,opacity:e.opacity,thickness:e.thickness,borderStyle:e.borderStyle,borderDashArray:o,bounds:t,modifiedDate:this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),rotateAngle:"RotateAngle"+e.rotateAngle,isCloudShape:e.isCloudShape,cloudIntensity:e.cloudIntensity,vertexPoints:e.vertexPoints,lineHeadStart:this.pdfViewer.annotation.getArrowTypeForCollection(e.sourceDecoraterShapes),lineHeadEnd:this.pdfViewer.annotation.getArrowTypeForCollection(e.taregetDecoraterShapes),rectangleDifference:[],isLocked:s.isLock,leaderLength:e.leaderHeight,leaderLineExtension:2,leaderLineOffset:0,calibrate:a,caption:!0,captionPosition:"Top",indent:this.getIndent(e.measureType),annotName:n,comments:[],review:{state:"",stateModel:"",modifiedDate:this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),author:e.author},labelContent:e.labelContent,enableShapeLabel:e.enableShapeLabel,labelFillColor:e.labelFillColor,labelBorderColor:e.labelBorderColor,fontColor:e.fontColor,fontSize:e.fontSize,labelBounds:i,annotationSelectorSettings:this.getSelector(e.subject),labelSettings:d,annotationSettings:s,customData:this.pdfViewer.annotation.getMeasureData(e.subject),isPrint:e.isPrint,isCommentLock:e.isCommentLock,isAnnotationRotated:!1}},e.prototype.getSelector=function(e){var t=this.pdfViewer.annotationSelectorSettings;return"Distance calculation"===e&&this.pdfViewer.distanceSettings.annotationSelectorSettings?t=this.pdfViewer.distanceSettings.annotationSelectorSettings:"Perimeter calculation"===e&&this.pdfViewer.perimeterSettings.annotationSelectorSettings?t=this.pdfViewer.perimeterSettings.annotationSelectorSettings:"Area calculation"===e&&this.pdfViewer.areaSettings.annotationSelectorSettings?t=this.pdfViewer.areaSettings.annotationSelectorSettings:"Radius calculation"===e&&this.pdfViewer.radiusSettings.annotationSelectorSettings?t=this.pdfViewer.radiusSettings.annotationSelectorSettings:"Volume calculation"===e&&this.pdfViewer.volumeSettings.annotationSelectorSettings&&(t=this.pdfViewer.volumeSettings.annotationSelectorSettings),t},e.prototype.getShapeAnnotType=function(e){var t;switch(e){case"Distance":t="Line";break;case"Perimeter":t="Polyline";break;case"Area":case"Volume":t="Polygon";break;case"Radius":t="Circle"}return t},e.prototype.getShapeType=function(e){var t;return"Line"===e.shapeAnnotationType?t="Distance":"Polyline"===e.shapeAnnotationType?t="LineWidthArrowHead":"Polygon"===e.shapeAnnotationType&&"PolygonDimension"===e.indent?t="Polygon":"Polygon"===e.shapeAnnotationType&&"PolygonRadius"===e.indent||"Circle"===e.shapeAnnotationType?t="Radius":"Polygon"===e.shapeAnnotationType&&"PolygonVolume"===e.indent&&(t="Polygon"),t},e.prototype.getMeasureType=function(e,t){var i;return"Line"===e?i="Distance":"Polyline"===e?i="Perimeter":"Polygon"===e&&"PolygonDimension"===t?i="Area":"Polygon"===e&&"PolygonRadius"===t||"Circle"===e?i="Radius":"Polygon"===e&&"PolygonVolume"===t&&(i="Volume"),i},e.prototype.getIndent=function(e){var t;switch(e){case"Distance":t="LineDimension";break;case"Perimeter":t="PolyLineDimension";break;case"Area":t="PolygonDimension";break;case"Radius":t="PolygonRadius";break;case"Volume":t="PolygonVolume"}return t},e.prototype.getNumberFormatArray=function(e){var t=new Array;if(e)for(var i=0;i<e.length;i++)t[i]={unit:e[i].Unit,fractionalType:e[i].FractionalType,conversionFactor:e[i].ConversionFactor,denominator:e[i].Denominator,formatDenominator:e[i].FormatDenominator};return t},e.prototype.createNumberFormat=function(e){var t=1,i=this.displayUnit;return"x"===e&&(t=this.getFactor(this.unit)),"a"===e&&(i="sq "+this.displayUnit),{unit:i,fractionalType:"D",conversionFactor:t,denominator:100,formatDenominator:!1}},e.prototype.saveMeasureShapeAnnotations=function(){var e=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_shape_measure");this.pdfViewerBase.isStorageExceed&&(e=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_shape_measure"]);for(var t=new Array,i=0;i<this.pdfViewerBase.pageCount;i++)t[i]=[];if(e&&!this.pdfViewer.annotationSettings.skipDownload)for(var n=JSON.parse(e),o=0;o<n.length;o++){var a=[],s=n[o];if(s){for(var r=0;s.annotations.length>r;r++){if(this.pdfViewer.annotationModule.updateModifiedDate(s.annotations[r]),0==s.annotations[r].bounds.height&&(s.annotations[r].bounds.height=.01),0==s.annotations[r].bounds.width&&(s.annotations[r].bounds.width=.01),this.pdfViewerBase.isJsonExported)if(s.annotations[r].isAnnotationRotated)s.annotations[r].bounds=this.pdfViewer.annotation.getBounds(s.annotations[r].bounds,s.pageIndex),s.annotations[r].vertexPoints=this.pdfViewer.annotation.getVertexPoints(s.annotations[r].vertexPoints,s.pageIndex);else{var l=this.pdfViewerBase.pageSize[s.pageIndex];l&&(s.annotations[r].annotationRotation=l.rotation)}s.annotations[r].bounds=JSON.stringify(this.pdfViewer.annotation.getBounds(s.annotations[r].bounds,s.pageIndex));var d=s.annotations[r].strokeColor;s.annotations[r].strokeColor=JSON.stringify(this.getRgbCode(d));var h=s.annotations[r].fillColor;if(s.annotations[r].fillColor=JSON.stringify(this.getRgbCode(h)),s.annotations[r].vertexPoints=JSON.stringify(this.pdfViewer.annotation.getVertexPoints(s.annotations[r].vertexPoints,s.pageIndex)),null!==s.annotations[r].rectangleDifference&&(s.annotations[r].rectangleDifference=JSON.stringify(s.annotations[r].rectangleDifference)),s.annotations[r].calibrate=this.getStringifiedMeasure(s.annotations[r].calibrate),!0===s.annotations[r].enableShapeLabel){s.annotations[r].labelBounds=JSON.stringify(this.pdfViewer.annotationModule.inputElementModule.calculateLabelBounds(JSON.parse(s.annotations[r].bounds),s.pageIndex));var p=s.annotations[r].labelFillColor;s.annotations[r].labelFillColor=JSON.stringify(this.getRgbCode(p));var c=s.annotations[r].labelBorderColor;s.annotations[r].labelBorderColor=JSON.stringify(this.getRgbCode(c)),s.annotations[r].labelSettings.fillColor=p;var u=s.annotations[r].labelSettings.fontColor;s.annotations[r].fontColor=JSON.stringify(this.getRgbCode(u))}}a=s.annotations}t[s.pageIndex]=a}return JSON.stringify(t)},e.prototype.createScaleRatioWindow=function(){this.pdfViewer._dotnetInstance.invokeMethodAsync("OpenScaleRatioDialog")},e.prototype.convertUnitSelect=function(e){this.convertUnit.content=this.createContent(e.item.text).outerHTML},e.prototype.dispUnitSelect=function(e){this.dispUnit.content=this.createContent(e.item.text).outerHTML,this.depthUnit.content=this.createContent(e.item.text).outerHTML},e.prototype.depthUnitSelect=function(e){this.depthUnit.content=this.createContent(e.item.text).outerHTML},e.prototype.createContent=function(e){var t=sf.base.createElement("div",{className:"e-pv-scale-unit-content"});return t.textContent=e,t},e.prototype.createInputElement=function(e,t,i,n){var o=sf.base.createElement("div",{id:i+"_container",className:t+"-container"}),a=sf.base.createElement(e,{id:i});return"input"===e&&(a.type="text"),o.appendChild(a),n.appendChild(o),a},e.prototype.onOkClicked=function(){var e=document.querySelector("#"+this.pdfViewer.dataId+"_src_unit"),t=document.querySelector("#"+this.pdfViewer.dataId+"_dest_unit"),i=document.querySelector("#"+this.pdfViewer.dataId+"_ratio_input"),n=document.querySelector("#"+this.pdfViewer.dataId+"_dest_input"),o=document.querySelector("#"+this.pdfViewer.dataId+"_depth_input");e&&t&&i&&n&&o&&(this.unit=e.value,this.displayUnit=t.value,this.ratio=parseInt(n.value)/parseInt(i.value),this.volumeDepth=parseInt(o.value)),this.scaleRatioString=parseInt(i.value)+" "+this.unit+" = "+parseInt(n.value)+" "+this.displayUnit,this.updateMeasureValues(this.scaleRatioString,this.displayUnit,this.unit,this.volumeDepth)},e.prototype.restoreUnit=function(e){for(var t,i=0;i<e.items.length;i++){var n=e.items[i];this.unit===n.text&&(t=n.label)}return t},e.prototype.updateMeasureValues=function(e,t,i,n){this.scaleRatioString=e,this.displayUnit=t,this.unit=i,this.volumeDepth=n;for(var o=0;o<this.pdfViewerBase.pageCount;o++){var a=this.getAnnotations(o,null);if(a)for(var s=0;s<a.length;s++){var r=(a=this.getAnnotations(o,null))[s];r.annotationSettings.isLock||(r.calibrate.ratio=e,r.calibrate.x[0].unit=t,r.calibrate.distance[0].unit=t,r.calibrate.area[0].unit=t,r.calibrate.x[0].conversionFactor=this.getFactor(i),"PolygonVolume"===r.indent&&(r.calibrate.depth=n),a[s]=r,this.manageAnnotations(a,o),this.pdfViewer.annotation.updateCalibrateValues(this.getAnnotationBaseModel(r.id)))}this.pdfViewer.annotation.renderAnnotations(o,null,null,null,null,!1)}},e.prototype.getAnnotationBaseModel=function(e){for(var t=null,i=0;i<this.pdfViewer.annotations.length;i++)if(e===this.pdfViewer.annotations[i].id){t=this.pdfViewer.annotations[i];break}return t},e.prototype.getContent=function(e){return e.split("</div>")[0].split('">')[1]},e.prototype.setConversion=function(e,t){var i;if(t){var n=t.pageIndex;"diagram_helper"===t.id&&(n=t.pageIndex?t.pageIndex:this.pdfViewerBase.activeElements.activePageID,t=this.getCurrentObject(n,null,t.annotName)),i=t?this.getCurrentValues(t.id,n):this.getCurrentValues()}else i=this.getCurrentValues();var o=e*i.ratio;return this.convertPointToUnits(i.factor,o,i.unit)},e.prototype.onCancelClicked=function(){this.scaleRatioDialog.hide()},e.prototype.modifyInCollection=function(e,t,i,n){n||this.pdfViewerBase.updateDocumentEditedProperty(!0);var o=null,a=this.getAnnotations(t,null);if(null!=a&&i){for(var s=0;s<a.length;s++)if(i.id===a[s].id){if("bounds"===e)this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateAnnotationModifiedDate(i,!0),"Line"===a[s].shapeAnnotationType||"Polyline"===a[s].shapeAnnotationType||"Polygon"===a[s].shapeAnnotationType?(a[s].vertexPoints=i.vertexPoints,a[s].bounds={x:i.bounds.x,y:i.bounds.y,left:i.bounds.x,top:i.bounds.y,width:i.bounds.width,height:i.bounds.height,right:i.bounds.right,bottom:i.bounds.bottom}):a[s].bounds={x:i.bounds.x,y:i.bounds.y,left:i.bounds.x,top:i.bounds.y,width:i.bounds.width,height:i.bounds.height,right:i.bounds.right,bottom:i.bounds.bottom},!0===a[s].enableShapeLabel&&i.wrapper&&(a[s].labelBounds=this.pdfViewer.annotationModule.inputElementModule.calculateLabelBounds(i.wrapper.bounds));else if("fill"===e)a[s].fillColor=i.wrapper.children[0].style.fill,this.pdfViewer.enableShapeLabel&&(a[s].labelFillColor=i.wrapper.children[0].style.fill);else if("stroke"===e)a[s].strokeColor=i.wrapper.children[0].style.strokeColor;else if("opacity"===e)a[s].opacity=i.wrapper.children[0].style.opacity;else if("thickness"===e)a[s].thickness=i.wrapper.children[0].style.strokeWidth;else if("dashArray"===e)a[s].borderDashArray=i.wrapper.children[0].style.strokeDashArray,a[s].borderStyle=i.borderStyle;else if("startArrow"===e)a[s].lineHeadStart=this.pdfViewer.annotation.getArrowTypeForCollection(i.sourceDecoraterShapes);else if("endArrow"===e)a[s].lineHeadEnd=this.pdfViewer.annotation.getArrowTypeForCollection(i.taregetDecoraterShapes);else if("leaderLength"===e)a[s].leaderLength=i.leaderHeight;else if("notes"===e)a[s].note=i.notes,!0===a[s].enableShapeLabel&&(a[s].labelContent=i.notes);else{if("delete"===e){o=a.splice(s,1)[0];break}if("labelContent"===e){a[s].note=i.labelContent,a[s].labelContent=i.labelContent;break}"fontColor"===e?a[s].fontColor=i.fontColor:"fontSize"===e&&(a[s].fontSize=i.fontSize)}a[s].modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),this.pdfViewer.annotationModule.storeAnnotationCollections(a[s],t)}this.manageAnnotations(a,t)}return o},e.prototype.addInCollection=function(e,t){var i=this.getAnnotations(e,null);i&&i.push(t),this.manageAnnotations(i,e)},e.prototype.manageAnnotations=function(e,t){var i=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_shape_measure");if(this.pdfViewerBase.isStorageExceed&&(i=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_shape_measure"]),i){var n=JSON.parse(i);this.pdfViewerBase.isStorageExceed||window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_shape_measure");var o=this.pdfViewer.annotationModule.getPageCollection(n,t);n[o]&&(n[o].annotations=e);var a=JSON.stringify(n);this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_shape_measure"]=a:window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_annotations_shape_measure",a)}},e.prototype.getAnnotations=function(e,t){var i,n=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_shape_measure");if(this.pdfViewerBase.isStorageExceed&&(n=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_shape_measure"]),n){var o=JSON.parse(n),a=this.pdfViewer.annotationModule.getPageCollection(o,e);i=o[a]?o[a].annotations:t}else i=t;return i},e.prototype.getCurrentObject=function(e,t,i){var n=null,o=this.getAnnotations(e,null);if(null!=o)for(var a=0;a<o.length;a++)if(t){if(t===o[a].id){n=o[a];break}}else if(i&&i===o[a].annotName){n=o[a];break}return n},e.prototype.getCurrentValues=function(e,t){var i,n,o,a;if(e&&!isNaN(t)){var s=this.getCurrentObject(t,e);s?(i=this.getCurrentRatio(s.calibrate.ratio),n=s.calibrate.x[0].unit,o=s.calibrate.x[0].conversionFactor,a=s.calibrate.depth):(i=this.ratio,n=this.displayUnit,o=this.getFactor(this.unit),a=this.volumeDepth)}else i=this.ratio,n=this.displayUnit,o=this.getFactor(this.unit),a=this.volumeDepth;return{ratio:i,unit:n,factor:o,depth:a}},e.prototype.getCurrentRatio=function(e){var t=e.split(" ");return"="===t[3]?parseFloat(t[4])/parseFloat(t[0]):parseFloat(t[3])/parseFloat(t[0])},e.prototype.calculateArea=function(e,t,i){var n=this.getCurrentValues(t,i),o=this.getArea(e,n.factor,n.unit)*n.ratio;if("ft_in"===n.unit){var a=Math.round(100*o)/100;if(a>=12){if((a=(a=(Math.round(a/12*100)/100).toString()).split("."))[1]){var s=0;return a[1].charAt(1)?(s=parseInt(a[1].charAt(0))+"."+parseInt(a[1].charAt(1)),s=Math.round(s)):s=a[1],s?a[0]+" "+this.pdfViewer.localeObj.getConstant("sq")+" "+this.pdfViewer.localeObj.getConstant("ft")+" "+s+" "+this.pdfViewer.localeObj.getConstant("in"):a[0]+" "+this.pdfViewer.localeObj.getConstant("sq")+" "+this.pdfViewer.localeObj.getConstant("ft")}return a[0]+" "+this.pdfViewer.localeObj.getConstant("sq")+" "+this.pdfViewer.localeObj.getConstant("ft")}return Math.round(100*o)/100+" "+this.pdfViewer.localeObj.getConstant("sq")+" "+this.pdfViewer.localeObj.getConstant("in")}return"m"===n.unit?100*o/100+" "+this.pdfViewer.localeObj.getConstant("sq")+" "+this.pdfViewer.localeObj.getConstant(n.unit):Math.round(100*o)/100+" "+this.pdfViewer.localeObj.getConstant("sq")+" "+this.pdfViewer.localeObj.getConstant(n.unit)},e.prototype.getArea=function(e,t,i){for(var n=0,o=e.length-1,a=0;a<e.length;a++)n+=(e[o].x*this.pixelToPointFactor*t+e[a].x*this.pixelToPointFactor*t)*(e[o].y*this.pixelToPointFactor*t-e[a].y*this.pixelToPointFactor*t),o=a;return"ft_in"===i?Math.abs(2*n):Math.abs(n/2)},e.prototype.calculateVolume=function(e,t,i){var n=this.getCurrentValues(t,i),o=n.depth?n.depth:this.volumeDepth,a=this.getArea(e,n.factor,n.unit)*(o*this.convertUnitToPoint(n.unit)*n.factor)*n.ratio;if("ft_in"===n.unit){var s=Math.round(100*a)/100;if(s>=12){if((s=(s=(Math.round(s/12*100)/100).toString()).split("."))[1]){var r=0;return s[1].charAt(1)?(r=parseInt(s[1].charAt(0))+"."+parseInt(s[1].charAt(1)),r=Math.round(r)):r=s[1],r?s[0]+" "+this.pdfViewer.localeObj.getConstant("cu")+" "+this.pdfViewer.localeObj.getConstant("ft")+" "+r+" "+this.pdfViewer.localeObj.getConstant("in"):s[0]+" "+this.pdfViewer.localeObj.getConstant("cu")+" "+this.pdfViewer.localeObj.getConstant("ft")}return s[0]+" "+this.pdfViewer.localeObj.getConstant("cu")+" "+this.pdfViewer.localeObj.getConstant("ft")}return Math.round(100*a)/100+" "+this.pdfViewer.localeObj.getConstant("cu")+" "+this.pdfViewer.localeObj.getConstant("in")}return Math.round(100*a)/100+" "+this.pdfViewer.localeObj.getConstant("cu")+" "+this.pdfViewer.localeObj.getConstant(n.unit)},e.prototype.calculatePerimeter=function(e){var t=sf.drawings.Point.getLengthFromListOfPoints(e.vertexPoints);return this.setConversion(t*this.pixelToPointFactor,e)},e.prototype.getFactor=function(e){var t;switch(e){case"in":t=1/72;break;case"cm":t=1/28.346;break;case"mm":t=1/2.835;break;case"pt":t=1;break;case"p":t=1/12;break;case"ft":t=1/864;break;case"ft_in":t=1/72;break;case"m":t=1/2834.64567}return t},e.prototype.convertPointToUnits=function(e,t,i){var n;if("ft_in"===i){var o=Math.round(t*e*100)/100;if(o>=12)if((o=(o=(Math.round(o/12*100)/100).toString()).split("."))[1]){var a=0;o[1].charAt(1)?(a=parseInt(o[1].charAt(0))+"."+parseInt(o[1].charAt(1)),a=Math.round(a)):a=o[1],n=a?o[0]+" "+this.pdfViewer.localeObj.getConstant("ft")+" "+a+" "+this.pdfViewer.localeObj.getConstant("in"):o[0]+" "+this.pdfViewer.localeObj.getConstant("ft")}else n=o[0]+" "+this.pdfViewer.localeObj.getConstant("ft");else n=Math.round(t*e*100)/100+" "+this.pdfViewer.localeObj.getConstant("in")}else n=Math.round(t*e*100)/100+" "+this.pdfViewer.localeObj.getConstant(i);return n},e.prototype.convertUnitToPoint=function(e){var t;switch(e){case"in":t=72;break;case"cm":t=28.346;break;case"mm":t=2.835;break;case"pt":t=1;break;case"p":t=12;break;case"ft":t=864;break;case"ft_in":t=72;break;case"m":t=2834.64567}return t},e.prototype.getStringifiedMeasure=function(e){return sf.base.isNullOrUndefined(e)||(e.angle=JSON.stringify(e.angle),e.area=JSON.stringify(e.area),e.distance=JSON.stringify(e.distance),e.volume=JSON.stringify(e.volume)),JSON.stringify(e)},e.prototype.getRgbCode=function(e){e.match(/#([a-z0-9]+)/gi)||e.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/)||(e=this.pdfViewer.annotationModule.nameToHash(e));var t=e.split(",");return sf.base.isNullOrUndefined(t[1])&&(t=(e=this.pdfViewer.annotationModule.getValue(e,"rgba")).split(",")),{r:parseInt(t[0].split("(")[1]),g:parseInt(t[1]),b:parseInt(t[2]),a:parseInt(t[3])}},e.prototype.saveImportedMeasureAnnotations=function(e,t){var i,n=null;if(e.VertexPoints){n=[];for(var o=0;o<e.VertexPoints.length;o++){var a={x:e.VertexPoints[o].X,y:e.VertexPoints[o].Y};n.push(a)}}var s={ratio:e.Calibrate.Ratio,x:this.getNumberFormatArray(e.Calibrate.X),distance:this.getNumberFormatArray(e.Calibrate.Distance),area:this.getNumberFormatArray(e.Calibrate.Area),angle:this.getNumberFormatArray(e.Calibrate.Angle),volume:this.getNumberFormatArray(e.Calibrate.Volume),targetUnitConversion:e.Calibrate.TargetUnitConversion};e.Calibrate.Depth&&(s.depth=e.Calibrate.Depth),e.Bounds&&!0===e.EnableShapeLabel&&(e.LabelBounds=this.pdfViewer.annotationModule.inputElementModule.calculateLabelBoundsFromLoadedDocument(e.Bounds),e.LabelBorderColor=e.LabelBorderColor?e.LabelBorderColor:e.StrokeColor,e.FontColor=e.FontColor?e.FontColor:e.StrokeColor,e.LabelFillColor=e.LabelFillColor?e.LabelFillColor:e.FillColor,e.FontSize=e.FontSize?e.FontSize:16,e.LabelSettings=e.LabelSettings?e.LabelSettings:this.pdfViewer.shapeLabelSettings),e.AnnotationSettings=e.AnnotationSettings?e.AnnotationSettings:this.pdfViewer.annotationModule.updateAnnotationSettings(e),e.Author=this.pdfViewer.annotationModule.updateAnnotationAuthor("measure",e.Subject),i={id:"measure",shapeAnnotationType:e.ShapeAnnotationType,type:this.getMeasureType(e.ShapeAnnotationType,e.Indent),author:e.Author,modifiedDate:e.ModifiedDate,subject:e.Subject,note:e.Note,strokeColor:e.StrokeColor,fillColor:e.FillColor,opacity:e.Opacity,thickness:e.Thickness,rectangleDifference:e.RectangleDifference,borderStyle:e.BorderStyle,borderDashArray:e.BorderDashArray,rotateAngle:e.RotateAngle,isCloudShape:e.IsCloudShape,cloudIntensity:e.CloudIntensity,vertexPoints:n,lineHeadStart:e.LineHeadStart,lineHeadEnd:e.LineHeadEnd,isLocked:e.IsLocked,bounds:{x:e.Bounds.X,y:e.Bounds.Y,left:e.Bounds.X,top:e.Bounds.Y,width:e.Bounds.Width,height:e.Bounds.Height,right:e.Bounds.Right,bottom:e.Bounds.Bottom},caption:e.Caption,captionPosition:e.CaptionPosition,calibrate:s,leaderLength:e.LeaderLength,leaderLineExtension:e.LeaderLineExtension,leaderLineOffset:e.LeaderLineOffset,indent:e.Indent,annotName:e.AnnotName,comments:this.pdfViewer.annotationModule.getAnnotationComments(e.Comments,e,e.Author),review:{state:e.State,stateModel:e.StateModel,modifiedDate:e.ModifiedDate,author:e.Author},labelContent:e.LabelContent,enableShapeLabel:e.EnableShapeLabel,labelFillColor:e.LabelFillColor,labelBorderColor:e.LabelBorderColor,fontColor:e.FontColor,fontSize:e.FontSize,labelBounds:e.LabelBounds,annotationSelectorSettings:this.getSettings(e),labelSettings:e.LabelSettings,annotationSettings:e.AnnotationSettings,customData:this.pdfViewer.annotation.getCustomData(e),isPrint:e.IsPrint,isCommentLock:e.IsCommentLock,isAnnotationRotated:!1},this.pdfViewer.annotationModule.storeAnnotations(t,i,"_annotations_shape_measure")},e.prototype.updateMeasureAnnotationCollections=function(e,t){var i=null;if(e.VertexPoints){i=[];for(var n=0;n<e.VertexPoints.length;n++){var o={x:e.VertexPoints[n].X,y:e.VertexPoints[n].Y};i.push(o)}}var a={ratio:e.Calibrate.Ratio,x:this.getNumberFormatArray(e.Calibrate.X),distance:this.getNumberFormatArray(e.Calibrate.Distance),area:this.getNumberFormatArray(e.Calibrate.Area),angle:this.getNumberFormatArray(e.Calibrate.Angle),volume:this.getNumberFormatArray(e.Calibrate.Volume),targetUnitConversion:e.Calibrate.TargetUnitConversion};if(e.Calibrate.Depth&&(a.depth=e.Calibrate.Depth),e.Bounds&&!0===e.EnableShapeLabel){e.LabelBounds=this.pdfViewer.annotationModule.inputElementModule.calculateLabelBoundsFromLoadedDocument(e.Bounds),e.LabelBorderColor=e.LabelBorderColor?e.LabelBorderColor:e.StrokeColor,e.FontColor=e.FontColor?e.FontColor:e.StrokeColor,e.LabelFillColor=e.LabelFillColor?e.LabelFillColor:e.FillColor,e.FontSize=e.FontSize?e.FontSize:16;var s=this.pdfViewer.shapeLabelSettings,r={borderColor:e.StrokeColor,fillColor:e.FillColor,fontColor:e.FontColor,fontSize:e.FontSize,labelContent:e.LabelContent,labelHeight:s.labelHeight,labelWidth:s.labelWidth,opacity:e.Opacity};e.LabelSettings=e.LabelSettings?e.LabelSettings:r}return e.AnnotationSelectorSettings=e.AnnotationSelectorSettings?e.AnnotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,e.AnnotationSettings=e.AnnotationSettings?e.AnnotationSettings:this.pdfViewer.annotationModule.updateAnnotationSettings(e),e.IsLocked&&(e.AnnotationSettings.isLock=e.IsLocked),{id:"measure",shapeAnnotationType:e.ShapeAnnotationType,type:this.getMeasureType(e.ShapeAnnotationType,e.Indent),author:e.Author,modifiedDate:e.ModifiedDate,subject:e.Subject,note:e.Note,strokeColor:e.StrokeColor,fillColor:e.FillColor,opacity:e.Opacity,thickness:e.Thickness,rectangleDifference:e.RectangleDifference,borderStyle:e.BorderStyle,borderDashArray:e.BorderDashArray,rotateAngle:e.RotateAngle,isCloudShape:e.IsCloudShape,cloudIntensity:e.CloudIntensity,vertexPoints:i,lineHeadStart:e.LineHeadStart,lineHeadEnd:e.LineHeadEnd,isLocked:e.IsLocked,bounds:{x:e.Bounds.X,y:e.Bounds.Y,left:e.Bounds.X,top:e.Bounds.Y,width:e.Bounds.Width,height:e.Bounds.Height,right:e.Bounds.Right,bottom:e.Bounds.Bottom},caption:e.Caption,captionPosition:e.CaptionPosition,calibrate:a,leaderLength:e.LeaderLength,leaderLineExtension:e.LeaderLineExtension,leaderLineOffset:e.LeaderLineOffset,indent:e.Indent,annotationId:e.AnnotName,comments:this.pdfViewer.annotationModule.getAnnotationComments(e.Comments,e,e.Author),review:{state:e.State,stateModel:e.StateModel,modifiedDate:e.ModifiedDate,author:e.Author},labelContent:e.LabelContent,enableShapeLabel:e.EnableShapeLabel,labelFillColor:e.LabelFillColor,labelBorderColor:e.LabelBorderColor,fontColor:e.FontColor,fontSize:e.FontSize,labelBounds:e.LabelBounds,pageNumber:t,annotationSelectorSettings:e.AnnotationSelectorSettings,labelSettings:e.labelSettings,annotationSettings:e.AnnotationSettings,customData:this.pdfViewer.annotation.getCustomData(e),isPrint:e.IsPrint}},e.prototype.updateAddAnnotationDetails=function(e,t,i){i=t?t.offset?t.offset:{x:10,y:10}:(t={offset:{x:10,y:10},pageNumber:0,width:void 0,height:void 0}).offset;var n=null,o=null,a=null,s="",r="",l="",d=!1,h=[],p=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),c=this.pdfViewer.annotation.createGUID();"Distance"==e?(n=this.pdfViewer.lineSettings.annotationSelectorSettings?this.pdfViewer.lineSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,a=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.lineSettings),o=this.pdfViewer.lineSettings.allowedInteractions?this.pdfViewer.lineSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions,s="LineDimension",r="Line",l="Distance calculation",d=!0,h=t.vertexPoints?t.vertexPoints:[{x:i.x,y:i.y},{x:i.x+100,y:i.y}],t.width=t.width?t.width:1,t.height=t.height?t.height:1):"Perimeter"==e?(n=this.pdfViewer.arrowSettings.annotationSelectorSettings?this.pdfViewer.arrowSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,a=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.arrowSettings),o=this.pdfViewer.arrowSettings.allowedInteractions?this.pdfViewer.arrowSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions,s="PolyLineDimension",r="Polyline",l="Perimeter calculation",d=!0,h=t.vertexPoints?t.vertexPoints:[{x:i.x,y:i.y},{x:i.x+85,y:i.y},{x:i.x+86,y:i.y+62}],t.width=t.width?t.width:1,t.height=t.height?t.height:1):"Area"==e?(n=this.pdfViewer.rectangleSettings.annotationSelectorSettings?this.pdfViewer.rectangleSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,a=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.rectangleSettings),o=this.pdfViewer.rectangleSettings.allowedInteractions?this.pdfViewer.rectangleSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions,s="PolygonDimension",r="Polygon",l="Area calculation",h=t.vertexPoints?t.vertexPoints:[{x:i.x,y:i.y},{x:i.x+88,y:i.y-1},{x:i.x+89,y:i.y+53},{x:i.x,y:i.y}],t.width=t.width?t.width:1,t.height=t.height?t.height:1):"Radius"==e?(n=this.pdfViewer.circleSettings.annotationSelectorSettings?this.pdfViewer.circleSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,a=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.circleSettings),o=this.pdfViewer.circleSettings.allowedInteractions?this.pdfViewer.circleSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions,s="PolygonRadius",r="Circle",l="Radius calculation",t.width=t.width?t.width:100,t.height=t.height?t.height:100,h=null):"Volume"==e&&(n=this.pdfViewer.polygonSettings.annotationSelectorSettings?this.pdfViewer.polygonSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,a=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.polygonSettings),o=this.pdfViewer.polygonSettings.allowedInteractions?this.pdfViewer.polygonSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions,s="PolygonVolume",r="Polygon",l="Volume calculation",h=t.vertexPoints?t.vertexPoints:[{x:i.x,y:i.y},{x:i.x,y:i.y+109},{x:i.x+120,y:i.y+109},{x:i.x+120,y:i.y-1},{x:i.x,y:i.y}],t.width=t.width?t.width:1,t.height=t.height?t.height:1),a.isLock=!!t.isLock&&t.isLock,a.minHeight=t.minHeight?t.minHeight:0,a.minWidth=t.minWidth?t.minWidth:0,a.maxWidth=t.maxWidth?t.maxWidth:0,a.maxHeight=t.maxHeight?t.maxHeight:0;var u=96,f=.013888888888888888,g=1,m="in",w="";if(h||"Radius"==e||"Volume"==e)if("Distance"==e||"Perimeter"==e||"Radius"==e){var y=0;if("Radius"==e)y=t.width/2*this.pixelToPointFactor;else{for(var S=0;S<h.length-1;S++)y+=Math.sqrt(Math.pow(h[S].x-h[S+1].x,2)+Math.pow(h[S].y-h[S+1].y,2));y*=this.pixelToPointFactor}var v=y*g;w=this.convertPointToUnits(f,v,m)}else if("Area"==e||"Volume"==e){for(var b=0,V=h.length-1,A=0;A<h.length;A++)b+=(h[V].x*this.pixelToPointFactor*f+h[A].x*this.pixelToPointFactor*f)*(h[V].y*this.pixelToPointFactor*f-h[A].y*this.pixelToPointFactor*f),V=A;b=Math.abs(b/2),"Volume"==e?(b=b*(u*this.convertUnitToPoint(m)*f)*g,w=Math.round(100*b)/100+this.pdfViewer.localeObj.getConstant("cu")+" "+this.pdfViewer.localeObj.getConstant(m)):w=Math.round(100*b)/100+this.pdfViewer.localeObj.getConstant("sq")+" "+this.pdfViewer.localeObj.getConstant(m)}h&&(h=this.pdfViewer.annotation.getVertexPointsXY(h));var x=[],C={AllowedInteractions:t.allowedInteractions?t.allowedInteractions:o,AnnotName:c,AnnotType:"shape_measure",AnnotationSelectorSettings:t.annotationSelectorSettings?t.annotationSelectorSettings:n,AnnotationSettings:a,Author:t.author?t.author:"Guest",BorderDashArray:t.borderDashArray?t.borderDashArray:0,BorderStyle:"Solid",Bounds:{X:i.x,Y:i.y,Width:t.width,Height:t.height,Left:i.x,Top:i.y,Location:{X:i.x,Y:i.y},Size:{Height:t.height,IsEmpty:!1,Width:t.width}},Calibrate:{Area:[{ConversionFactor:1,Denominator:100,FormatDenominator:!1,FractionalType:"D",Unit:"sq in"}],Depth:t.depth?t.depth:0,Distance:[{ConversionFactor:1,Denominator:100,FormatDenominator:!1,FractionalType:"D",Unit:"in"}],Ratio:"1 in = 1 in",TargetUnitConversion:0,Volume:null,X:[{ConversionFactor:.013888889,Denominator:100,FormatDenominator:!1,FractionalType:"D",Unit:"in"}]},Caption:!0,CaptionPosition:"Top",CloudIntensity:0,Comments:null,CustomData:t.customData?t.customData:null,CreatedDate:p,EnableShapeLabel:!1,ExistingCustomData:null,FillColor:t.fillColor?t.fillColor:"#ffffff00",FontColor:null,FontSize:0,Indent:s,IsCloudShape:!1,IsCommentLock:!1,IsLocked:!!t.isLock&&t.isLock,IsPrint:!t.isPrint||t.isPrint,LabelBorderColor:null,LabelBounds:{X:0,Y:0,Width:0,Height:0},LabelContent:null,LabelFillColor:null,LabelSettings:null,LeaderLength:0,LeaderLineExtension:0,LeaderLineOffset:0,LineHeadEnd:t.lineHeadStartStyle?t.lineHeadStartStyle:d?"ClosedArrow":"None",LineHeadStart:t.lineHeadEndStyle?t.lineHeadEndStyle:d?"ClosedArrow":"None",ModifiedDate:"",Note:w,Opacity:t.opacity?t.opacity:1,RectangleDifference:null,RotateAngle:"RotateAngle0",ShapeAnnotationType:r,State:"",StateModel:"",StrokeColor:t.strokeColor?t.strokeColor:"#ff0000",Subject:l,Thickness:t.thickness?t.thickness:1,VertexPoints:h};return x[0]=C,{measureShapeAnnotation:x}},e}(),Qe=function(){function e(e,t){this.shapeCount=0,this.isAddAnnotationProgramatically=!1,this.pdfViewer=e,this.pdfViewerBase=t}return e.prototype.renderShapeAnnotations=function(e,t,i){if(e)if(e.length>=1){if(!this.pdfViewer.annotation.getStoredAnnotations(t,e,"_annotations_shape")||i)for(var n=0;n<e.length;n++){var o=e[n];o.annotationAddMode=this.pdfViewer.annotationModule.findAnnotationMode(o,t,o.AnnotType);var a=null;this.shapeCount=this.shapeCount+1;var s=void 0;if(o.ShapeAnnotationType){i&&!o.isAlreadyAdded&&this.pdfViewerBase.isJsonImported&&(o.Bounds=this.pdfViewerBase.importJsonForRotatedDocuments(o.Rotate,t,o.Bounds,o.AnnotationRotation),s=this.pdfViewerBase.isPageRotated);var r=null;if(o.VertexPoints)if(r=[],i&&this.pdfViewerBase.isJsonImported)r=this.pdfViewerBase.calculateVertexPoints(o.Rotate,t,o.VertexPoints,o.AnnotationRotation);else for(var l=0;l<o.VertexPoints.length;l++){var d={x:o.VertexPoints[l].X?o.VertexPoints[l].X:o.VertexPoints[l].x,y:o.VertexPoints[l].Y?o.VertexPoints[l].Y:o.VertexPoints[l].y};r.push(d)}o.Bounds&&!0===o.EnableShapeLabel&&(o.LabelBounds=this.pdfViewer.annotationModule.inputElementModule.calculateLabelBoundsFromLoadedDocument(o.Bounds),o.LabelBorderColor=o.LabelBorderColor?o.LabelBorderColor:o.StrokeColor,o.FontColor=o.FontColor?o.FontColor:o.StrokeColor,o.LabelFillColor=o.LabelFillColor?o.LabelFillColor:o.FillColor,o.FontSize=o.FontSize?o.FontSize:16,o.LabelSettings=o.LabelSettings?o.LabelSettings:this.pdfViewer.shapeLabelSettings),o.AnnotationSelectorSettings=o.AnnotationSelectorSettings?o.AnnotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,o.AnnotationSettings=o.AnnotationSettings?o.AnnotationSettings:this.pdfViewer.annotationModule.updateAnnotationSettings(o),o.allowedInteractions=o.AllowedInteractions?o.AllowedInteractions:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(o);var h=!0;h="Imported Annotation"===o.annotationAddMode?o.IsPrint:o.AnnotationSettings.isPrint;var p,c=o.Bounds.X?o.Bounds.X:o.Bounds.x,u=o.Bounds.Y?o.Bounds.Y:o.Bounds.y,f=o.Bounds.Width?o.Bounds.Width:o.Bounds.width,g=o.Bounds.Height?o.Bounds.Height:o.Bounds.height,m=(a={id:"shape"+this.shapeCount,shapeAnnotationType:o.ShapeAnnotationType,type:this.getShapeType(o.ShapeAnnotationType,o.LineHeadStart,o.LineHeadEnd),author:o.Author,allowedInteractions:o.allowedInteractions,modifiedDate:o.ModifiedDate,subject:o.Subject,pageNumber:t,note:o.Note,strokeColor:o.StrokeColor,fillColor:o.FillColor,opacity:o.Opacity,thickness:o.Thickness,rectangleDifference:o.RectangleDifference,borderStyle:o.BorderStyle,borderDashArray:o.BorderDashArray,rotateAngle:o.RotateAngle,isCloudShape:o.IsCloudShape,cloudIntensity:o.CloudIntensity,vertexPoints:r,lineHeadStart:o.LineHeadStart,lineHeadEnd:o.LineHeadEnd,isLocked:o.IsLocked,comments:this.pdfViewer.annotationModule.getAnnotationComments(o.Comments,o,o.Author),review:{state:o.State,stateModel:o.StateModel,modifiedDate:o.ModifiedDate,author:o.Author},annotName:o.AnnotName,bounds:{x:c,y:u,left:c,top:u,width:f,height:g,right:o.Bounds.Right,bottom:o.Bounds.Bottom},labelContent:o.LabelContent,enableShapeLabel:o.EnableShapeLabel,labelFillColor:o.LabelFillColor,fontColor:o.FontColor,labelBorderColor:o.LabelBorderColor,fontSize:o.FontSize,labelBounds:o.LabelBounds,annotationSelectorSettings:this.getSettings(o),labelSettings:o.LabelSettings,annotationSettings:o.AnnotationSettings,customData:this.pdfViewer.annotation.getCustomData(o),isPrint:h,isCommentLock:o.IsCommentLock,isAnnotationRotated:s}).vertexPoints;null==r&&(m=[]),o.AnnotationSelectorSettings=o.AnnotationSelectorSettings?o.AnnotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,p={id:"shape"+this.shapeCount,shapeAnnotationType:this.getShapeType(a.shapeAnnotationType,a.lineHeadStart,a.lineHeadEnd),type:this.getShapeType(a.shapeAnnotationType,a.lineHeadStart,a.lineHeadEnd),author:a.author,allowedInteractions:a.allowedInteractions,modifiedDate:a.modifiedDate,annotName:a.annotName,subject:a.subject,notes:a.note,fillColor:a.fillColor,strokeColor:a.strokeColor,opacity:a.opacity,thickness:a.thickness,borderStyle:a.borderStyle,borderDashArray:a.borderDashArray?a.borderDashArray.toString():"0",rotateAngle:parseFloat(a.rotateAngle.split("Angle")[1]),comments:a.comments,review:a.review,isCloudShape:a.isCloudShape,cloudIntensity:a.cloudIntensity,taregetDecoraterShapes:this.pdfViewer.annotation.getArrowType(a.lineHeadEnd),sourceDecoraterShapes:this.pdfViewer.annotation.getArrowType(a.lineHeadStart),vertexPoints:m,bounds:{x:a.bounds.left,y:a.bounds.top,width:a.bounds.width,height:a.bounds.height},pageIndex:a.pageNumber,labelContent:o.LabelContent,enableShapeLabel:o.EnableShapeLabel,labelFillColor:o.LabelFillColor,fontColor:o.FontColor,labelBorderColor:o.LabelBorderColor,fontSize:o.FontSize,labelBounds:o.LabelBounds,annotationSelectorSettings:o.AnnotationSelectorSettings,annotationSettings:a.annotationSettings,annotationAddMode:o.annotationAddMode,isPrint:h,isCommentLock:a.isCommentLock};this.pdfViewer.add(p);if(this.pdfViewer.annotationModule.storeAnnotations(t,a,"_annotations_shape"),this.isAddAnnotationProgramatically){var w={opacity:p.opacity,strokeColor:p.strokeColor,thickness:p.thickness,modifiedDate:p.modifiedDate,width:p.bounds.width,height:p.bounds.height};this.pdfViewer.fireAnnotationAdd(p.pageIndex,p.annotName,o.ShapeAnnotationType,p.bounds,w)}}}}else if(e.shapeAnnotationType){a=this.createAnnotationObject(e);sf.base.isNullOrUndefined(e.formFieldAnnotationType)||""===e.formFieldAnnotationType?this.pdfViewer.annotationModule.isFormFieldShape=!1:this.pdfViewer.annotationModule.isFormFieldShape=!0,this.pdfViewer.annotationModule.storeAnnotations(t,a,"_annotations_shape"),this.pdfViewer.annotationModule.triggerAnnotationAdd(e)}},e.prototype.getSettings=function(e){this.pdfViewer.annotationSelectorSettings;return e.AnnotationSelectorSettings?e.AnnotationSelectorSettings:this.getSelector(e.ShapeAnnotationType,e.Subject)},e.prototype.setAnnotationType=function(e){this.updateShapeProperties(),this.pdfViewerBase.disableTextSelectionMode();var t="Guest";switch(e){case"Line":this.currentAnnotationMode="Line";var i=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();t="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.lineSettings.author?this.pdfViewer.lineSettings.author:"Guest",this.pdfViewer.drawingObject={shapeAnnotationType:this.setShapeType("Line"),fillColor:this.lineFillColor,notes:"",strokeColor:this.lineStrokeColor,opacity:this.lineOpacity,thickness:this.lineThickness,modifiedDate:i,borderDashArray:this.lineDashArray.toString(),sourceDecoraterShapes:this.pdfViewer.annotation.getArrowType(this.lineStartHead.toString()),taregetDecoraterShapes:this.pdfViewer.annotation.getArrowType(this.lineEndHead.toString()),author:t,subject:"Line",lineHeadStart:this.lineStartHead,lineHeadEnd:this.lineEndHead,isCommentLock:!1},this.pdfViewer.tool="Line";break;case"Arrow":this.currentAnnotationMode="Arrow";var n=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();t="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.arrowSettings.author?this.pdfViewer.arrowSettings.author:"Guest",this.pdfViewer.drawingObject={shapeAnnotationType:this.setShapeType("Arrow"),opacity:this.arrowOpacity,sourceDecoraterShapes:this.pdfViewer.annotation.getArrowType(this.arrowStartHead.toString()),taregetDecoraterShapes:this.pdfViewer.annotation.getArrowType(this.arrowEndHead.toString()),fillColor:this.arrowFillColor,strokeColor:this.arrowStrokeColor,notes:"",thickness:this.arrowThickness,borderDashArray:this.arrowDashArray.toString(),author:t,subject:"Arrow",modifiedDate:n,lineHeadStart:this.arrowStartHead,lineHeadEnd:this.arrowEndHead,isCommentLock:!1},this.pdfViewer.tool="Line";break;case"Rectangle":this.currentAnnotationMode="Rectangle";var o=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();t="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.rectangleSettings.author?this.pdfViewer.rectangleSettings.author:"Guest",this.pdfViewer.drawingObject={shapeAnnotationType:this.setShapeType("Rectangle"),strokeColor:this.rectangleStrokeColor,fillColor:this.rectangleFillColor,opacity:this.rectangleOpacity,notes:"",thickness:this.rectangleThickness,borderDashArray:"0",modifiedDate:o,author:t,subject:"Rectangle",isCommentLock:!1},this.pdfViewer.tool="DrawTool";break;case"Circle":this.currentAnnotationMode="Circle";var a=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();t="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.circleSettings.author?this.pdfViewer.circleSettings.author:"Guest",this.pdfViewer.drawingObject={shapeAnnotationType:this.setShapeType("Circle"),strokeColor:this.circleStrokeColor,fillColor:this.circleFillColor,opacity:this.circleOpacity,notes:"",thickness:this.circleThickness,borderDashArray:"0",modifiedDate:a,author:t,subject:"Circle",isCommentLock:!1},this.pdfViewer.tool="DrawTool";break;case"Polygon":this.currentAnnotationMode="Polygon";var s=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();t="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.polygonSettings.author?this.pdfViewer.polygonSettings.author:"Guest",this.pdfViewer.drawingObject={strokeColor:this.polygonStrokeColor,fillColor:this.polygonFillColor,opacity:this.polygonOpacity,thickness:this.polygonThickness,borderDashArray:"0",notes:"",author:t,subject:"Polygon",modifiedDate:s,borderStyle:"",isCommentLock:!1},this.pdfViewer.tool="Polygon"}},e.prototype.updateShapeProperties=function(){this.lineFillColor=this.pdfViewer.lineSettings.fillColor?this.pdfViewer.lineSettings.fillColor:"#ffffff00",this.lineStrokeColor=this.pdfViewer.lineSettings.strokeColor?this.pdfViewer.lineSettings.strokeColor:"#ff0000",this.lineThickness=this.pdfViewer.lineSettings.thickness?this.pdfViewer.lineSettings.thickness:1,this.lineOpacity=this.pdfViewer.lineSettings.opacity?this.pdfViewer.lineSettings.opacity:1,this.lineDashArray=this.pdfViewer.lineSettings.borderDashArray?this.pdfViewer.lineSettings.borderDashArray:0,this.lineStartHead=this.pdfViewer.lineSettings.lineHeadStartStyle?this.pdfViewer.lineSettings.lineHeadStartStyle:"None",this.lineEndHead=this.pdfViewer.lineSettings.lineHeadEndStyle?this.pdfViewer.lineSettings.lineHeadEndStyle:"None",this.arrowFillColor=this.pdfViewer.arrowSettings.fillColor?this.pdfViewer.arrowSettings.fillColor:"#ffffff00",this.arrowStrokeColor=this.pdfViewer.arrowSettings.strokeColor?this.pdfViewer.arrowSettings.strokeColor:"#ff0000",this.arrowThickness=this.pdfViewer.arrowSettings.thickness?this.pdfViewer.arrowSettings.thickness:1,this.arrowOpacity=this.pdfViewer.arrowSettings.opacity?this.pdfViewer.arrowSettings.opacity:1,this.arrowDashArray=this.pdfViewer.arrowSettings.borderDashArray?this.pdfViewer.arrowSettings.borderDashArray:0,this.arrowStartHead=this.pdfViewer.arrowSettings.lineHeadStartStyle?this.pdfViewer.arrowSettings.lineHeadStartStyle:"Closed",this.arrowEndHead=this.pdfViewer.arrowSettings.lineHeadEndStyle?this.pdfViewer.arrowSettings.lineHeadEndStyle:"Closed",this.rectangleFillColor=this.pdfViewer.rectangleSettings.fillColor?this.pdfViewer.rectangleSettings.fillColor:"#ffffff00",this.rectangleStrokeColor=this.pdfViewer.rectangleSettings.strokeColor?this.pdfViewer.rectangleSettings.strokeColor:"#ff0000",this.rectangleThickness=this.pdfViewer.rectangleSettings.thickness?this.pdfViewer.rectangleSettings.thickness:1,this.rectangleOpacity=this.pdfViewer.rectangleSettings.opacity?this.pdfViewer.rectangleSettings.opacity:1,this.circleFillColor=this.pdfViewer.circleSettings.fillColor?this.pdfViewer.circleSettings.fillColor:"#ffffff00",this.circleStrokeColor=this.pdfViewer.circleSettings.strokeColor?this.pdfViewer.circleSettings.strokeColor:"#ff0000",this.circleThickness=this.pdfViewer.circleSettings.thickness?this.pdfViewer.circleSettings.thickness:1,this.circleOpacity=this.pdfViewer.circleSettings.opacity?this.pdfViewer.circleSettings.opacity:1,this.polygonFillColor=this.pdfViewer.polygonSettings.fillColor?this.pdfViewer.polygonSettings.fillColor:"#ffffff00",this.polygonStrokeColor=this.pdfViewer.polygonSettings.strokeColor?this.pdfViewer.polygonSettings.strokeColor:"#ff0000",this.polygonThickness=this.pdfViewer.polygonSettings.thickness?this.pdfViewer.polygonSettings.thickness:1,this.polygonOpacity=this.pdfViewer.polygonSettings.opacity?this.pdfViewer.polygonSettings.opacity:1},e.prototype.setShapeType=function(e){var t;switch(e){case"Line":t="Line";break;case"Circle":t="Ellipse";break;case"Square":t="Rectangle";break;case"Polyline":t="Line";break;case"Arrow":t="LineWidthArrowHead"}return t},e.prototype.getShapeType=function(e,t,i){var n;switch(e){case"Line":n="Line";break;case"Circle":n="Ellipse";break;case"Square":n="Rectangle";break;case"Polyline":n="Line";break;case"Polygon":n="Polygon"}return"Line"!==e&&"Polyline"!==e||"None"===t&&"None"===i||(n="LineWidthArrowHead"),n},e.prototype.getShapeAnnotType=function(e){var t;switch(e){case"Line":case"LineWidthArrowHead":t="Line";break;case"Rectangle":t="Square";break;case"Ellipse":t="Circle";break;case"Polygon":t="Polygon"}return t},e.prototype.modifyInCollection=function(e,t,i){sf.base.isNullOrUndefined(i.formFieldAnnotationType)||""===i.formFieldAnnotationType?this.pdfViewer.annotationModule.isFormFieldShape=!1:this.pdfViewer.annotationModule.isFormFieldShape=!0,this.pdfViewerBase.updateDocumentEditedProperty(!0);var n=null;i&&"bounds"===e&&this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateAnnotationModifiedDate(i,!0);var o=this.getAnnotations(t,null);if(null!=o&&i){for(var a=0;a<o.length;a++)if(i.id===o[a].id){if("bounds"===e){if("Line"===o[a].shapeAnnotationType||"Polygon"===o[a].shapeAnnotationType?(o[a].vertexPoints=i.vertexPoints,o[a].bounds={x:i.bounds.x,y:i.bounds.y,left:i.bounds.x,top:i.bounds.y,width:i.bounds.width,height:i.bounds.height,right:i.bounds.right,bottom:i.bounds.bottom}):o[a].bounds={x:i.bounds.x,y:i.bounds.y,left:i.bounds.x,top:i.bounds.y,width:i.bounds.width,height:i.bounds.height,right:i.bounds.right,bottom:i.bounds.bottom},!0===o[a].enableShapeLabel&&i.wrapper){var s=0,r=0,l=0;i.wrapper.bounds.width&&(l=(l=i.wrapper.bounds.width/2)>0&&l<151?l:151),i.wrapper.bounds.left&&(r=i.wrapper.bounds.left+i.wrapper.bounds.width/2-l/2),i.wrapper.bounds.top&&(s=i.wrapper.bounds.top+i.wrapper.bounds.height/2-12.3),o[a].labelBounds={left:r,top:s,width:l,height:24.6,right:0,bottom:0}}}else if("fill"===e)o[a].fillColor=i.wrapper.children[0].style.fill;else if("stroke"===e)o[a].strokeColor=i.wrapper.children[0].style.strokeColor;else if("opacity"===e)o[a].opacity=i.wrapper.children[0].style.opacity;else if("thickness"===e)o[a].thickness=i.wrapper.children[0].style.strokeWidth;else if("dashArray"===e)o[a].borderDashArray=i.wrapper.children[0].style.strokeDashArray,o[a].borderStyle=i.borderStyle;else if("startArrow"===e)o[a].lineHeadStart=this.pdfViewer.annotation.getArrowTypeForCollection(i.sourceDecoraterShapes);else if("endArrow"===e)o[a].lineHeadEnd=this.pdfViewer.annotation.getArrowTypeForCollection(i.taregetDecoraterShapes);else if("notes"===e)o[a].note=i.notes;else{if("delete"===e){n=o.splice(a,1)[0];break}if("labelContent"===e){o[a].note=i.labelContent,o[a].labelContent=i.labelContent;break}"fontColor"===e?o[a].fontColor=i.fontColor:"fontSize"===e&&(o[a].fontSize=i.fontSize)}o[a].modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),this.pdfViewer.annotationModule.storeAnnotationCollections(o[a],t)}this.manageAnnotations(o,t)}return n},e.prototype.addInCollection=function(e,t){var i=this.getAnnotations(e,null);i&&i.push(t),this.manageAnnotations(i,e)},e.prototype.saveShapeAnnotations=function(){var e=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_shape");this.pdfViewerBase.isStorageExceed&&(e=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_shape"]);for(var t=new Array,i=0;i<this.pdfViewerBase.pageCount;i++)t[i]=[];if(e&&!this.pdfViewer.annotationSettings.skipDownload)for(var n=JSON.parse(e),o=0;o<n.length;o++){var a=[],s=n[o];if(s){for(var r=0;s.annotations.length>r;r++){if(this.pdfViewer.annotationModule.updateModifiedDate(s.annotations[r]),0==s.annotations[r].bounds.height&&(s.annotations[r].bounds.height=.01),0==s.annotations[r].bounds.width&&(s.annotations[r].bounds.width=.01),this.pdfViewerBase.isJsonExported)if(s.annotations[r].isAnnotationRotated)s.annotations[r].bounds=this.pdfViewer.annotation.getBounds(s.annotations[r].bounds,s.pageIndex),s.annotations[r].vertexPoints=this.pdfViewer.annotation.getVertexPoints(s.annotations[r].vertexPoints,s.pageIndex);else{var l=this.pdfViewerBase.pageSize[s.pageIndex];l&&(s.annotations[r].annotationRotation=l.rotation)}s.annotations[r].bounds=JSON.stringify(this.pdfViewer.annotation.getBounds(s.annotations[r].bounds,s.pageIndex));var d=s.annotations[r].strokeColor;s.annotations[r].strokeColor=JSON.stringify(this.getRgbCode(d));var h=s.annotations[r].fillColor;if(s.annotations[r].fillColor=JSON.stringify(this.getRgbCode(h)),s.annotations[r].vertexPoints=JSON.stringify(this.pdfViewer.annotation.getVertexPoints(s.annotations[r].vertexPoints,s.pageIndex)),null!==s.annotations[r].rectangleDifference&&(s.annotations[r].rectangleDifference=JSON.stringify(s.annotations[r].rectangleDifference)),!0===s.annotations[r].enableShapeLabel){s.annotations[r].labelBounds=JSON.stringify(this.pdfViewer.annotationModule.inputElementModule.calculateLabelBounds(JSON.parse(s.annotations[r].bounds)));var p=s.annotations[r].labelFillColor;s.annotations[r].labelFillColor=JSON.stringify(this.getRgbCode(p));var c=s.annotations[r].labelBorderColor;s.annotations[r].labelBorderColor=JSON.stringify(this.getRgbCode(c)),s.annotations[r].labelSettings.fillColor=p;var u=s.annotations[r].labelSettings.fontColor;s.annotations[r].fontColor=JSON.stringify(this.getRgbCode(u))}}s.annotations=s.annotations.filter((function(e){return e})),a=s.annotations}t[s.pageIndex]=a}return JSON.stringify(t)},e.prototype.manageAnnotations=function(e,t){var i=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_shape");if(this.pdfViewerBase.isStorageExceed&&(i=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_shape"]),i){var n=JSON.parse(i);this.pdfViewerBase.isStorageExceed||window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_shape");var o=this.pdfViewer.annotationModule.getPageCollection(n,t);n[o]&&(n[o].annotations=e);var a=JSON.stringify(n);this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_shape"]=a:window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_annotations_shape",a)}},e.prototype.createAnnotationObject=function(e){var t,i,n=this.pdfViewer.annotation.createGUID();e.formFieldAnnotationType||this.pdfViewer.annotation.stickyNotesAnnotationModule.addComments("shape",e.pageIndex+1,e.shapeAnnotationType,n,"",e.author),e.annotName=n,e.wrapper.bounds?(t={x:e.wrapper.bounds.x,y:e.wrapper.bounds.y,left:e.wrapper.bounds.x,top:e.wrapper.bounds.y,height:e.wrapper.bounds.height,width:e.wrapper.bounds.width,right:e.wrapper.bounds.right,bottom:e.wrapper.bounds.bottom},i=this.pdfViewer.annotationModule.inputElementModule.calculateLabelBounds(e.wrapper.bounds)):(t={x:0,y:0,left:0,top:0,height:0,width:0,right:0,bottom:0},i={x:0,y:0,left:0,top:0,height:0,width:0,right:0,bottom:0}),"Line"===e.subject&&"Polygon"===e.shapeAnnotationType?e.author=this.pdfViewer.annotationModule.updateAnnotationAuthor("shape","Polygon"):e.author=this.pdfViewer.annotationModule.updateAnnotationAuthor("shape",e.subject);var o=parseInt(e.borderDashArray);o=isNaN(o)?0:o;var a=this.pdfViewer.annotationModule.findAnnotationSettings(e,!0);e.isPrint=a.isPrint;var s=this.pdfViewer.shapeLabelSettings,r={borderColor:e.strokeColor,fillColor:e.fillColor,fontColor:e.fontColor,fontSize:e.fontSize,labelContent:e.labelContent,labelHeight:s.labelHeight,labelWidth:s.labelMaxWidth,opacity:e.opacity};return{id:e.id,shapeAnnotationType:this.getShapeAnnotType(e.shapeAnnotationType),type:this.getShapeType(e.shapeAnnotationType,e.lineHeadStart,e.lineHeadEnd),author:e.author,allowedInteractions:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(e),subject:e.subject,note:e.notes,strokeColor:e.strokeColor,annotName:n,comments:[],review:{state:"",stateModel:"",modifiedDate:this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),author:e.author},fillColor:e.fillColor,opacity:e.opacity,thickness:e.thickness,pageNumber:e.pageIndex,borderStyle:e.borderStyle,borderDashArray:o,bounds:t,modifiedDate:this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),rotateAngle:"RotateAngle"+e.rotateAngle,isCloudShape:e.isCloudShape,cloudIntensity:e.cloudIntensity,vertexPoints:e.vertexPoints,lineHeadStart:this.pdfViewer.annotation.getArrowTypeForCollection(e.sourceDecoraterShapes),lineHeadEnd:this.pdfViewer.annotation.getArrowTypeForCollection(e.taregetDecoraterShapes),rectangleDifference:[],isLocked:a.isLock,labelContent:e.labelContent,enableShapeLabel:e.enableShapeLabel,labelFillColor:e.labelFillColor,fontColor:e.fontColor,labelBorderColor:e.labelBorderColor,fontSize:e.fontSize,labelBounds:i,annotationSelectorSettings:this.getSelector(e.shapeAnnotationType,e.subject),labelSettings:r,annotationSettings:a,customData:this.pdfViewer.annotation.getShapeData(e.shapeAnnotationType,e.subject),isPrint:e.isPrint,isCommentLock:e.isCommentLock,isAnnotationRotated:!1}},e.prototype.getSelector=function(e,t){var i=this.pdfViewer.annotationSelectorSettings;return"Line"===e&&"Arrow"!==t&&this.pdfViewer.lineSettings.annotationSelectorSettings?i=this.pdfViewer.lineSettings.annotationSelectorSettings:"LineWidthArrowHead"!==e&&"Arrow"!==t||!this.pdfViewer.lineSettings.annotationSelectorSettings?"Rectangle"!==e&&"Square"!==e||!this.pdfViewer.rectangleSettings.annotationSelectorSettings?"Ellipse"!==e&&"Circle"!==e||!this.pdfViewer.circleSettings.annotationSelectorSettings?"Polygon"===e&&this.pdfViewer.polygonSettings.annotationSelectorSettings&&(i=this.pdfViewer.polygonSettings.annotationSelectorSettings):i=this.pdfViewer.circleSettings.annotationSelectorSettings:i=this.pdfViewer.rectangleSettings.annotationSelectorSettings:i=this.pdfViewer.arrowSettings.annotationSelectorSettings,i},e.prototype.getAnnotations=function(e,t){var i,n=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_shape");if(this.pdfViewerBase.isStorageExceed&&(n=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_shape"]),n){var o=JSON.parse(n),a=this.pdfViewer.annotationModule.getPageCollection(o,e);i=o[a]?o[a].annotations:t}else i=t;return i},e.prototype.getRgbCode=function(e){e.match(/#([a-z0-9]+)/gi)||e.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/)||(e=this.pdfViewer.annotationModule.nameToHash(e));var t=e.split(",");return sf.base.isNullOrUndefined(t[1])&&(t=(e=this.pdfViewer.annotationModule.getValue(e,"rgba")).split(",")),{r:parseInt(t[0].split("(")[1]),g:parseInt(t[1]),b:parseInt(t[2]),a:parseFloat(t[3])}},e.prototype.saveImportedShapeAnnotations=function(e,t){var i,n=null;if(e.Author=this.pdfViewer.annotationModule.updateAnnotationAuthor("shape",e.Subject),e.VertexPoints){n=[];for(var o=0;o<e.VertexPoints.length;o++){var a={x:e.VertexPoints[o].X,y:e.VertexPoints[o].Y};n.push(a)}}e.Bounds&&!0===e.EnableShapeLabel&&(e.LabelBounds=this.pdfViewer.annotationModule.inputElementModule.calculateLabelBoundsFromLoadedDocument(e.Bounds),e.LabelBorderColor=e.LabelBorderColor?e.LabelBorderColor:e.StrokeColor,e.FontColor=e.FontColor?e.FontColor:e.StrokeColor,e.LabelFillColor=e.LabelFillColor?e.LabelFillColor:e.FillColor,e.FontSize=e.FontSize?e.FontSize:16,e.LabelSettings=e.LabelSettings?e.LabelSettings:this.pdfViewer.shapeLabelSettings),e.AnnotationSettings=e.AnnotationSettings?e.AnnotationSettings:this.pdfViewer.annotationModule.updateAnnotationSettings(e),e.allowedInteractions=this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(e),i={id:"shape",shapeAnnotationType:e.ShapeAnnotationType,type:this.getShapeType(e.ShapeAnnotationType,e.LineHeadStart,e.LineHeadEnd),author:e.Author,allowedInteractions:e.allowedInteractions,modifiedDate:e.ModifiedDate,subject:e.Subject,pageNumber:t,note:e.Note,strokeColor:e.StrokeColor,fillColor:e.FillColor,opacity:e.Opacity,thickness:e.Thickness,rectangleDifference:e.RectangleDifference,borderStyle:e.BorderStyle,borderDashArray:e.BorderDashArray,rotateAngle:e.RotateAngle,isCloudShape:e.IsCloudShape,cloudIntensity:e.CloudIntensity,vertexPoints:n,lineHeadStart:e.LineHeadStart,lineHeadEnd:e.LineHeadEnd,isLocked:e.IsLocked,comments:this.pdfViewer.annotationModule.getAnnotationComments(e.Comments,e,e.Author),review:{state:e.State,stateModel:e.StateModel,modifiedDate:e.ModifiedDate,author:e.Author},annotName:e.AnnotName,bounds:{x:e.Bounds.X,y:e.Bounds.Y,left:e.Bounds.X,top:e.Bounds.Y,width:e.Bounds.Width,height:e.Bounds.Height,right:e.Bounds.Right,bottom:e.Bounds.Bottom},labelContent:e.LabelContent,enableShapeLabel:e.EnableShapeLabel,labelFillColor:e.LabelFillColor,labelBorderColor:e.LabelBorderColor,fontColor:e.FontColor,fontSize:e.FontSize,labelBounds:e.LabelBounds,annotationSelectorSettings:this.getSettings(e),labelSettings:e.LabelSettings,annotationSettings:e.AnnotationSettings,customData:this.pdfViewer.annotation.getCustomData(e),isPrint:e.IsPrint,isCommentLock:e.IsCommentLock,isAnnotationRotated:!1},this.pdfViewer.annotationModule.storeAnnotations(t,i,"_annotations_shape")},e.prototype.updateShapeAnnotationCollections=function(e,t){var i=null;if(e.VertexPoints){i=[];for(var n=0;n<e.VertexPoints.length;n++){var o={x:e.VertexPoints[n].X,y:e.VertexPoints[n].Y};i.push(o)}}if(e.Bounds&&!0===e.EnableShapeLabel){e.LabelBounds=this.pdfViewer.annotationModule.inputElementModule.calculateLabelBoundsFromLoadedDocument(e.Bounds),e.LabelBorderColor=e.LabelBorderColor?e.LabelBorderColor:e.StrokeColor,e.FontColor=e.FontColor?e.FontColor:e.StrokeColor,e.LabelFillColor=e.LabelFillColor?e.LabelFillColor:e.FillColor,e.FontSize=e.FontSize?e.FontSize:16;var a=this.pdfViewer.shapeLabelSettings,s={borderColor:e.StrokeColor,fillColor:e.FillColor,fontColor:e.FontColor,fontSize:e.FontSize,labelContent:e.LabelContent,labelHeight:a.labelHeight,labelWidth:a.labelWidth,opacity:e.Opacity};e.LabelSettings=e.LabelSettings?e.LabelSettings:s}return e.AnnotationSettings=e.AnnotationSettings?e.AnnotationSettings:this.pdfViewer.annotationModule.updateAnnotationSettings(e),e.IsLocked&&(e.AnnotationSettings.isLock=e.IsLocked),e.allowedInteractions=e.AllowedInteractions?e.AllowedInteractions:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(e),{id:"shape",shapeAnnotationType:e.ShapeAnnotationType,type:this.getShapeType(e.ShapeAnnotationType,e.LineHeadStart,e.LineHeadEnd),author:e.Author,allowedInteractions:e.allowedInteractions,modifiedDate:e.ModifiedDate,subject:e.Subject,note:e.Note,strokeColor:e.StrokeColor,fillColor:e.FillColor,opacity:e.Opacity,thickness:e.Thickness,rectangleDifference:e.RectangleDifference,borderStyle:e.BorderStyle,borderDashArray:e.BorderDashArray,rotateAngle:e.RotateAngle,isCloudShape:e.IsCloudShape,cloudIntensity:e.CloudIntensity,vertexPoints:i,lineHeadStart:e.LineHeadStart,lineHeadEnd:e.LineHeadEnd,isLocked:e.IsLocked,comments:this.pdfViewer.annotationModule.getAnnotationComments(e.Comments,e,e.Author),review:{state:e.State,stateModel:e.StateModel,modifiedDate:e.ModifiedDate,author:e.Author},annotationId:e.AnnotName,bounds:{x:e.Bounds.X,y:e.Bounds.Y,left:e.Bounds.X,top:e.Bounds.Y,width:e.Bounds.Width,height:e.Bounds.Height,right:e.Bounds.Right,bottom:e.Bounds.Bottom},labelContent:e.LabelContent,enableShapeLabel:e.EnableShapeLabel,labelFillColor:e.LabelFillColor,labelBorderColor:e.LabelBorderColor,fontColor:e.FontColor,fontSize:e.FontSize,labelBounds:e.LabelBounds,pageNumber:t,labelSettings:e.LabelSettings,annotationSettings:e.AnnotationSettings,customData:this.pdfViewer.annotation.getCustomData(e),isPrint:e.IsPrint}},e.prototype.updateAddAnnotationDetails=function(e,t,i){i=t?t.offset?t.offset:{x:10,y:10}:(t={offset:{x:10,y:10},pageNumber:0,width:void 0,height:void 0}).offset;var n=null,o=null,a=null,s="",r=!1,l=null,d=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),h=this.pdfViewer.annotation.createGUID();"Line"==e?(n=this.pdfViewer.lineSettings.annotationSelectorSettings?this.pdfViewer.lineSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,a=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.lineSettings),o=this.pdfViewer.lineSettings.allowedInteractions?this.pdfViewer.lineSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions,s="Line",l=t.vertexPoints?t.vertexPoints:[{x:i.x,y:i.y},{x:i.x+100,y:i.y}],t.width=t.width?t.width:1,t.height=t.height?t.height:1):"Arrow"==e?(n=this.pdfViewer.arrowSettings.annotationSelectorSettings?this.pdfViewer.arrowSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,a=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.arrowSettings),o=this.pdfViewer.arrowSettings.allowedInteractions?this.pdfViewer.arrowSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions,s="Line",r=!0,l=t.vertexPoints?t.vertexPoints:[{x:i.x,y:i.y},{x:i.x+100,y:i.y}],t.width=t.width?t.width:1,t.height=t.height?t.height:1):"Rectangle"==e?(n=this.pdfViewer.rectangleSettings.annotationSelectorSettings?this.pdfViewer.rectangleSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,a=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.rectangleSettings),o=this.pdfViewer.rectangleSettings.allowedInteractions?this.pdfViewer.rectangleSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions,s="Square",t.width=t.width?t.width:150,t.height=t.height?t.height:75):"Circle"==e?(n=this.pdfViewer.circleSettings.annotationSelectorSettings?this.pdfViewer.circleSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,a=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.circleSettings),o=this.pdfViewer.circleSettings.allowedInteractions?this.pdfViewer.circleSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions,s="Circle",t.width=t.width?t.width:100,t.height=t.height?t.height:90):"Polygon"==e&&(n=this.pdfViewer.polygonSettings.annotationSelectorSettings?this.pdfViewer.polygonSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,a=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.polygonSettings),o=this.pdfViewer.polygonSettings.allowedInteractions?this.pdfViewer.polygonSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions,s="Polygon",l=t.vertexPoints?t.vertexPoints:[{x:i.x,y:i.y},{x:i.x+42,y:i.y-29},{x:i.x+89,y:i.y-1},{x:i.x+78,y:i.y+42},{x:i.x+11,y:i.y+42},{x:i.x,y:i.y}],t.width=t.width?t.width:1,t.height=t.height?t.height:1),a.isLock=!!t.isLock&&t.isLock,a.minHeight=t.minHeight?t.minHeight:0,a.minWidth=t.minWidth?t.minWidth:0,a.maxWidth=t.maxWidth?t.maxWidth:0,a.maxHeight=t.maxHeight?t.maxHeight:0,l&&(l=this.pdfViewer.annotation.getVertexPointsXY(l));var p=[],c={AllowedInteractions:t.allowedInteractions?t.allowedInteractions:o,AnnotName:h,AnnotType:"shape",AnnotationSelectorSettings:t.annotationSelectorSettings?t.annotationSelectorSettings:n,AnnotationSettings:a,Author:t.author?t.author:"Guest",BorderDashArray:t.borderDashArray?t.borderDashArray:0,BorderStyle:"Solid",Bounds:{X:i.x,Y:i.y,Width:t.width,Height:t.height,Left:i.x,Top:i.y,Location:{X:i.x,Y:i.y},Size:{Height:t.height,IsEmpty:!1,Width:t.width}},CloudIntensity:0,Comments:null,CustomData:t.customData?t.customData:null,CreatedDate:d,EnableShapeLabel:!1,ExistingCustomData:null,FillColor:t.fillColor?t.fillColor:"#ffffff00",FontColor:null,FontSize:0,IsCloudShape:!1,IsCommentLock:!1,IsLocked:!!t.isLock&&t.isLock,IsPrint:!t.isPrint||t.isPrint,LabelBorderColor:null,LabelBounds:{X:0,Y:0,Width:0,Height:0},LabelContent:null,LabelFillColor:null,LabelSettings:null,LineHeadEnd:t.lineHeadStartStyle?t.lineHeadStartStyle:r?"ClosedArrow":"None",LineHeadStart:t.lineHeadEndStyle?t.lineHeadEndStyle:r?"ClosedArrow":"None",ModifiedDate:"",Note:"",Opacity:t.opacity?t.opacity:1,RectangleDifference:null,RotateAngle:"RotateAngle0",ShapeAnnotationType:s,State:"",StateModel:"",StrokeColor:t.strokeColor?t.strokeColor:"#ff0000",Subject:e.toString(),Thickness:t.thickness?t.thickness:1,VertexPoints:l};return p[0]=c,{shapeAnnotation:p}},e}(),$e=function(){function e(e,t){this.isStampAddMode=!1,this.stampPageNumber=[],this.isAddAnnotationProgramatically=!1,this.customStampName=null,this.dynamicText="",this.pdfViewer=e,this.pdfViewerBase=t}return e.prototype.renderStampAnnotations=function(e,t,i,n){for(var o=!1,a=0;a<this.stampPageNumber.length;a++)if(this.stampPageNumber[a]===t){o=!0;break}if(n&&(o=!1),e&&!o){this.stampPageNumber.push(t);for(var s=0;s<e.length;s++){var r=e[s];r.annotationAddMode=this.pdfViewer.annotationModule.findAnnotationMode(r,t,r.AnnotType);var l=r.Apperarance,d=r.Rect,h=r.Opacity,p=(r.AnnotationSelectorSettings,parseFloat(e[s].pageNumber));isNaN(p)&&(p=e[s].PageNumber);var c=r.IsDynamic;document.getElementById(this.pdfViewer.dataId+"_pageDiv_"+p);r.AnnotationSettings=r.AnnotationSettings?r.AnnotationSettings:this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.stampSettings);var u=this.stampImageData(r);if(c&&r.Subject&&"Draft"!==r.Subject&&!u){this.retrieveDynamicStampAnnotation(r.Subject),this.isExistingStamp=!0;for(var f=this.calculateImagePosition(d,!0),g=r.RotateAngle,m=0;m<l.length;m++){if("string"===(S=l[m]).type&&void 0!==S.text){var w=void 0;2===(w=n?S.text:S.text.split("(")[1].split(")")[0]).split("(").length?w.split("(")[1].split(")")[0].toLowerCase()!==r.Subject.toLowerCase()&&(this.dynamicText+=w.split("(")[1].split(")")[0]):w.toLowerCase()!==r.Subject.toLowerCase()&&(this.dynamicText+=w)}}this.renderStamp(f.left,f.top,f.width,f.height,p,h,g,i,r,!0)}else if(r.Subject&&!u){this.retrievestampAnnotation(r.Subject),this.isExistingStamp=!0;f=this.calculateImagePosition(d,!0),g=r.RotateAngle;this.renderStamp(f.left,f.top,f.width,f.height,p,h,g,i,r),this.isExistingStamp=!1}else if(l)for(var y=0;y<l.length;y++){var S,v=(S=l[y]).imagedata,b=(S.matrix,S.CreationDate),V=S.ModifiedDate,A=S.RotateAngle;if(v){var x=void 0;window.customStampCollection&&window.customStampCollection.get(r.AnnotName)?x=window.customStampCollection.get(r.AnnotName):(x=new Image).src=v;x.complete,this.customStampLoad(this,d,r,p,x,b,V,A,h,i)}}}}},e.prototype.customStampLoad=function(e,t,i,n,o,a,s,r,l,d){if(t){var h=parseFloat(t.y?t.y:t.Y);h<0&&(t.Y=.75*(e.pdfViewerBase.pageSize[n].height+h))}var p=e.calculateImagePosition(t,!0);i.AnnotationSettings=i.AnnotationSettings?i.AnnotationSettings:e.pdfViewer.customStampSettings.annotationSettings,e.renderCustomImage(p,n,o,a,s,r,l,d,!0,i)},e.prototype.moveStampElement=function(e,t,i){var n=this.pdfViewerBase.getZoomFactor();e/=n,t/=n;var o,a="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.stampSettings.author?this.pdfViewer.stampSettings.author:"Guest";if(this.pdfViewerBase.isDynamicStamp)if(this.pdfViewer.dateTimeFormat){var s=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();this.dynamicText="By "+a+" at "+s+" "}else{var r=(new Date).toString().split(" ").splice(1,3).join(" "),l=(new Date).toLocaleTimeString();this.dynamicText="By "+a+" at "+l+" , "+r+"   "}var d=this.currentStampAnnotation;return d&&"Image"===d.shapeAnnotationType?o={id:"stamp"+this.pdfViewerBase.customStampCount,bounds:{x:e,y:t,width:d.bounds.width,height:d.bounds.height},pageIndex:i,data:d.data,modifiedDate:d.modifiedDate,shapeAnnotationType:"Image",opacity:d.opacity,rotateAngle:d.RotationAngle,annotName:d.annotationName?d.annotationName:d.annotName,comments:[],review:{state:"",stateModel:"",modifiedDate:"",author:d.author}}:d&&(o={id:"stamp"+this.pdfViewerBase.customStampCount,bounds:{x:e,y:t,width:d.width,height:d.height},pageIndex:i,data:d.pathdata,shapeAnnotationType:"Stamp",strokeColor:d.strokeColor,fillColor:d.fillColor,opacity:.5,stampFillColor:d.stampFillColor,stampStrokeColor:d.stampStrokeColor,rotateAngle:d.RotateAngle,isDynamicStamp:this.pdfViewerBase.isDynamicStamp,dynamicText:this.dynamicText,subject:d.iconName,annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings}),this.pdfViewerBase.currentSignatureAnnot&&(o="SignatureText"===(d=this.pdfViewerBase.currentSignatureAnnot).shapeAnnotationType?{id:"sign"+this.pdfViewerBase.signatureCount,bounds:{x:e,y:t,width:d.bounds.width,height:d.bounds.height},pageIndex:i,data:d.data,modifiedDate:"",shapeAnnotationType:"SignatureText",thickness:d.thickness,strokeColor:d.strokeColor,opacity:d.opacity,signatureName:d.signatureName,fontFamily:d.fontFamily,fontSize:d.bounds.height/2}:"SignatureImage"===d.shapeAnnotationType?{id:"sign"+this.pdfViewerBase.signatureCount,bounds:{x:e,y:t,width:d.bounds.width,height:d.bounds.height},pageIndex:i,data:d.data,modifiedDate:"",shapeAnnotationType:"SignatureImage",thickness:d.thickness,strokeColor:d.strokeColor,opacity:d.opacity,signatureName:d.signatureName}:{id:"sign"+this.pdfViewerBase.signatureCount,bounds:{x:e,y:t,width:d.bounds.width,height:d.bounds.height},pageIndex:i,data:d.data,shapeAnnotationType:"HandWrittenSignature",thickness:d.thickness,strokeColor:d.strokeColor,opacity:d.opacity,signatureName:d.signatureName}),o},e.prototype.ConvertPointToPixel=function(e){return e*(96/72)},e.prototype.calculateImagePosition=function(e,t){var i={width:0,height:0,left:0,top:0},n=parseFloat(e.x?e.x:e.X),o=parseFloat(e.y?e.y:e.Y),a=parseFloat(e.width?e.width:e.Width),s=parseFloat(e.height?e.height:e.Height);t?i={width:this.ConvertPointToPixel(a),height:this.ConvertPointToPixel(s),left:this.ConvertPointToPixel(n),top:this.ConvertPointToPixel(o)}:i={width:a,height:s,left:n,top:o};return i},e.prototype.createCustomStampAnnotation=function(e,t){var i=this,n=this.pdfViewerBase.stampAdded,o=this.pdfViewerBase.currentPageNumber-1,a=document.getElementById(this.pdfViewer.dataId+"_pageDiv_"+o),s=new Image,r=this;s.onload=function(){var e=i.pdfViewerBase.getZoomFactor(),l=i.pdfViewer.customStampSettings.width>0?i.pdfViewer.customStampSettings.width:100,d=i.pdfViewer.customStampSettings.height>0?i.pdfViewer.customStampSettings.height:100,h={width:l,height:d,left:i.pdfViewer.customStampSettings.left>0&&i.pdfViewer.customStampSettings.left<parseFloat(a.style.width)?i.pdfViewer.customStampSettings.left:(parseFloat(a.style.width)/2-l/2)/e,top:i.pdfViewer.customStampSettings.top>0&&i.pdfViewer.customStampSettings.top<parseFloat(a.style.height)?i.pdfViewer.customStampSettings.top:(parseFloat(a.style.height)/2-d/2)/e},p=(new Date).toLocaleDateString(),c=i.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();r.renderCustomImage(h,o,s,p,c,0,1,null,null,null,t,n)},s.src=e},e.prototype.renderStamp=function(e,t,i,n,o,a,s,r,l,d){sf.base.Browser.isDevice&&(this.pdfViewerBase.customStampCount+=1);var h,p="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.stampSettings.author?this.pdfViewer.stampSettings.author:"Guest";if(this.pdfViewerBase.isDynamicStamp){var c=(new Date).toString().split(" ").splice(1,3).join(" "),u=(new Date).toLocaleTimeString();this.dynamicText="By "+p+" at "+u+" , "+c+" "}d&&(this.dynamicText+=" ",this.pdfViewerBase.isDynamicStamp=!0);var f=null,g=(l&&l.annotationAddMode,this.currentStampAnnotation);if(g){if(null!==i&&null!==n){g.width=i,g.height=n,g.Opacity=a,g.RotateAngle=s;var m=l.AnnotName;g.AnnotName=m;var w=l.State;g.State=w;var y=l.AnnotationSettings;g.AnnotationSettings=y||this.pdfViewer.annotationModule.updateAnnotationSettings(g);var S=l.AnnotationSelectorSettings;g.AnnotationSelectorSettings=S||this.pdfViewer.annotationSelectorSettings;var v=l.ModifiedDate;g.ModifiedDate=v;var b=l.StateNodel;g.StateModel=b;var V=l.IsCommentLock;g.IsCommentLock=V;var A=l.Note;g.Note=A;var x=l.Author;g.Author=x;var C=l.Subject;g.Subject=C;var I=this.pdfViewer.annotation.getCustomData(l);g.allowedInteractions=l.AllowedInteractions?l.AllowedInteractions:l.allowedInteractions?l.allowedInteractions:["None"],g.CustomData=I;var k=!0;k="Imported Annotation"===g.annotationAddMode?l.IsPrint:l.AnnotationSettings.isPrint,g.isPrint=k,null===g.Author&&(g.Author="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.stampSettings.author?this.pdfViewer.stampSettings.author:"Guest");var T=l.Comments;g.Comments=this.pdfViewer.annotationModule.getAnnotationComments(T,l,x)}else{m=this.pdfViewer.annotation.createGUID();this.pdfViewer.annotation.stickyNotesAnnotationModule.addComments("stamp",o+1,"",m,"",g.author),g.AnnotationSettings=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.stampSettings),g.AnnotName=m,g.Comments=[],g.State="",g.StateModel="",g.Note="",g.Opacity=1,g.RotateAngle=0,g.ModifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),g.Author="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.stampSettings.author?this.pdfViewer.stampSettings.author:"Guest"}var M=sf.drawings.processPathData(g.pathdata),P=sf.drawings.splitArrayCollection(M),B=l?l.annotationAddMode:"UI Drawn Annotation";g.AnnotationSelectorSettings=g.AnnotationSelectorSettings?g.AnnotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,h={id:"stamp"+this.pdfViewerBase.customStampCount,bounds:{x:e,y:t,width:g.width,height:g.height},pageIndex:o,data:g.pathdata,modifiedDate:g.ModifiedDate,shapeAnnotationType:"Stamp",type:"Stamp",strokeColor:g.strokeColor,fillColor:g.fillColor,opacity:g.Opacity,stampFillColor:g.stampFillColor,stampStrokeColor:g.stampStrokeColor,rotateAngle:g.RotateAngle,isDynamicStamp:this.pdfViewerBase.isDynamicStamp,dynamicText:this.dynamicText,annotName:g.AnnotName,notes:g.Note,comments:g.Comments,review:{state:g.State,stateModel:g.StateModel,modifiedDate:g.ModifiedDate,author:g.Author},subject:g.iconName,annotationSelectorSettings:g.AnnotationSelectorSettings,annotationSettings:g.AnnotationSettings,allowedInteractions:g.allowedInteractions,annotationAddMode:B,isPrint:g.isPrint,isCommentLock:g.IsCommentLock},f={stampAnnotationType:"path",author:g.Author,modifiedDate:g.ModifiedDate,subject:g.Subject,note:g.Note,strokeColor:g.strokeColor,fillColor:g.fillColor,opacity:g.Opacity,stampFillcolor:g.stampFillColor,rotateAngle:g.RotateAngle,creationDate:g.creationDate,pageNumber:o,icon:g.iconName,stampAnnotationPath:P,randomId:"stamp"+this.pdfViewerBase.customStampCount,isDynamicStamp:this.pdfViewerBase.isDynamicStamp,dynamicText:this.dynamicText,bounds:{x:e,y:t,left:e,top:t,width:g.width,height:g.height},annotName:g.AnnotName,comments:g.Comments,review:{state:g.State,stateModel:g.StateModel,author:g.Author,modifiedDate:g.ModifiedDate},shapeAnnotationType:"stamp",type:"Stamp",annotationSelectorSettings:this.getSettings(g),annotationSettings:g.AnnotationSettings,customData:this.pdfViewer.annotation.getCustomData(g),allowedInteractions:g.allowedInteractions,isPrint:g.isPrint,isCommentLock:g.IsCommentLock,isMaskedImage:g.IsMaskedImage,customStampName:""},this.storeStampInSession(o,f),this.isAddAnnotationProgramatically&&this.triggerAnnotationAdd(h,g),this.pdfViewer.add(h),r=null!=r&&null!=r?r:document.getElementById(this.pdfViewer.dataId+"_annotationCanvas_"+o),this.pdfViewer.renderDrawing(r,o),this.pdfViewerBase.stampAdded&&(this.triggerAnnotationAdd(h,g),this.pdfViewerBase.isNewStamp=!0,this.pdfViewer.annotation.addAction(o,null,h,"Addition","",h,h)),this.pdfViewerBase.stampAdded=!1,this.isExistingStamp||(g.creationDate=(new Date).toLocaleDateString(),g.modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime())}this.resetAnnotation()},e.prototype.getSettings=function(e){var t=this.pdfViewer.annotationSelectorSettings;return e.AnnotationSelectorSettings?t=e.AnnotationSelectorSettings:this.pdfViewer.stampSettings.annotationSelectorSettings&&(t=this.pdfViewer.stampSettings.annotationSelectorSettings),t},e.prototype.resetAnnotation=function(){this.pdfViewerBase.isDynamicStamp=!1,this.dynamicText="",this.currentStampAnnotation=null,sf.base.Browser.isDevice||(this.pdfViewerBase.customStampCount+=1)},e.prototype.updateDeleteItems=function(e,t,i){this.pdfViewerBase.updateDocumentEditedProperty(!0);var n=null,o=!1;if(t.modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),t.author="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.stampSettings.author?this.pdfViewer.stampSettings.author:"Guest",i){var a=t.annotName?t.annotName:this.pdfViewer.annotation.createGUID();this.pdfViewer.annotation.stickyNotesAnnotationModule.addComments("stamp",e+1,"",a,"",t.author),t.annotName=a,t.Comments=[],t.State="",t.StateModel="",t.Note="",t.Opacity=1,t.RotateAngle=0}"Stamp"===t.shapeAnnotationType&&(t.isPrint=this.pdfViewer.stampSettings.isPrint);var s=this.pdfViewer.stampSettings.annotationSelectorSettings?this.pdfViewer.stampSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,r=this.pdfViewer.stampSettings.allowedInteractions?this.pdfViewer.stampSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions;if("Image"===t.shapeAnnotationType){t.Author="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.customStampSettings.author?this.pdfViewer.customStampSettings.author:"Guest",t.isPrint=this.pdfViewer.customStampSettings.isPrint;var l=this.pdfViewer.annotationModule.undoCommentsElement;if(!this.customStampName)for(var d=0;d<l.length;d++)t.annotName===l[d].annotName&&(this.customStampName=l[d].customStampName);n={stampAnnotationType:"image",author:t.author,modifiedDate:t.modifiedDate,subject:"",note:"",strokeColor:"",fillColor:"",opacity:i,rotateAngle:"0",creationDate:t.currentDate,pageNumber:e,icon:"",stampAnnotationPath:t.data,randomId:"stamp"+this.pdfViewerBase.customStampCount,bounds:{x:t.bounds.x,y:t.bounds.y,left:t.bounds.x,top:t.bounds.y,width:t.bounds.width,height:t.bounds.height},stampFillcolor:"",isDynamicStamp:!1,annotName:t.annotName,comments:[],review:{state:"",stateModel:"",author:t.author,modifiedDate:t.modifiedDate},shapeAnnotationType:"stamp",type:"Image",annotationSelectorSettings:s,annotationSettings:this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.customStampSettings),customData:this.pdfViewer.annotationModule.getData("image"),isPrint:t.isPrint,allowedInteractions:r,isCommentLock:!1,isMaskedImage:t.isMaskedImage,customStampName:this.customStampName}}else n=t.stampAnnotationType?{stampAnnotationType:t.stampAnnotationType,author:t.author,modifiedDate:t.modifiedDate,subject:t.Subject?t.Subject:t.subject,note:t.Note?t.Note:t.note,strokeColor:t.strokeColor,fillColor:t.fillColor,opacity:t.opacity,stampFillcolor:t.stampFillcolor,rotateAngle:t.rotateAngle,creationDate:t.creationDate,pageNumber:t.pageNumber,icon:t.icon,stampAnnotationPath:t.stampAnnotationPath,randomId:t.randomId,isDynamicStamp:t.isDynamicStamp,dynamicText:t.dynamicText,bounds:{x:t.bounds.X,y:t.bounds.top,left:t.bounds.left,top:t.bounds.top,width:t.bounds.width,height:t.bounds.height},annotName:t.annotName,comments:t.Comments?t.Comments:t.comments,review:{state:t.State?t.State:t.review.state,stateModel:t.StateModel?t.StateModel:t.review.stateModel,author:t.author?t.author:t.review.author,modifiedDate:t.ModifiedDate?t.ModifiedDate:t.review.modifiedDate},shapeAnnotationType:"stamp",type:"Stamp",annotationSelectorSettings:s,annotationSettings:this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.stampSettings),customData:this.pdfViewer.annotationModule.getData(t.stampAnnotationType),isPrint:t.isPrint,allowedInteractions:r,isCommentLock:t.isCommentLock,isMaskedImage:t.isMaskedImage,customStampName:""}:{stampAnnotationType:t.shapeAnnotationType,author:t.author,modifiedDate:t.modifiedDate,subject:t.subject,note:t.notes,strokeColor:t.strokeColor,fillColor:t.fillColor,opacity:t.opacity,stampFillcolor:t.stampFillColor,rotateAngle:t.rotateAngle,creationDate:t.creationDate,pageNumber:t.pageIndex,icon:t.subject,stampAnnotationPath:t.data,randomId:t.id,isDynamicStamp:t.isDynamicStamp,dynamicText:t.dynamicText,shapeAnnotationType:"stamp",type:"Stamp",bounds:{x:t.bounds.x,y:t.bounds.y,left:t.bounds.x,top:t.bounds.y,width:t.bounds.width,height:t.bounds.height},annotName:t.annotName,comments:t.Comments,review:{state:t.State,stateModel:t.StateModel,author:t.author,modifiedDate:t.ModifiedDate},annotationSelectorSettings:s,annotationSettings:this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.stampSettings),customData:this.pdfViewer.annotationModule.getData(t.shapeAnnotationType),isPrint:t.isPrint,allowedInteractions:r,isCommentLock:t.isCommentLock,isMaskedImage:t.isMaskedImage,customStampName:""};if(i){if("Image"!==t.shapeAnnotationType){var h=sf.drawings.processPathData(t.data),p=sf.drawings.splitArrayCollection(h);n.stampAnnotationPath=p}if(t.creationDate=(new Date).toLocaleDateString(),sf.base.Browser.isDevice||(n.bounds.width=t.wrapper.actualSize.width,n.bounds.height=t.wrapper.actualSize.height,n.bounds.left=t.wrapper.bounds.x,n.bounds.top=t.wrapper.bounds.y,n.bounds.x=t.wrapper.bounds.x,n.bounds.y=t.wrapper.bounds.y),n.opacity=i,this.pdfViewerBase.stampAdded){this.storeStampInSession(e,n),o=!0;var c={left:n.bounds.left,top:n.bounds.top,width:n.bounds.width,height:n.bounds.height};this.pdfViewerBase.updateDocumentEditedProperty(!0);var u={opacity:n.opacity,author:n.author,modifiedDate:n.modifiedDate};this.pdfViewerBase.stampAdded=!1,"Image"===t.shapeAnnotationType?(this.pdfViewer.fireAnnotationAdd(n.pageNumber,n.annotName,"Image",c,u,null,null,null,null,null,this.customStampName),this.customStampName=null):this.pdfViewer.fireAnnotationAdd(n.pageNumber,n.annotName,"Stamp",c,u),this.pdfViewer.annotation.addAction(e,null,t,"Addition","",t,n)}}o||this.storeStampInSession(e,n)},e.prototype.renderCustomImage=function(e,t,i,n,o,a,s,r,l,d,h,p){var c,u,f,g,m,w=null,y=this.pdfViewer.customStampSettings.left>0&&this.pdfViewer.customStampSettings.top>0,S=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.customStampSettings),v=this.pdfViewer.stampSettings.allowedInteractions?this.pdfViewer.stampSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions;sf.base.Browser.isDevice&&(this.pdfViewerBase.customStampCount+=1),l?(u=d.AnnotName,f=d.Author,m=d.IsCommentLock,S=d.AnnotationSettings?d.AnnotationSettings:this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.customStampSettings),v=d.AllowedInteractions?d.AllowedInteractions:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(d),null===f&&(f="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.customStampSettings.author?this.pdfViewer.customStampSettings.author:"Guest")):(u=this.pdfViewer.annotation.createGUID(),f="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.customStampSettings.author?this.pdfViewer.customStampSettings.author:"Guest",m=!1),o||(o=d.ModifiedDate?d.ModifiedDate:(new Date).toLocaleString());var b=d?d.annotationAddMode:"UI Drawn Annotation ",V=!0;V=l?"Imported Annotation"===d.annotationAddMode?d.IsPrint:d.AnnotationSettings.isPrint:this.pdfViewer.customStampSettings.isPrint,c={id:"stamp"+this.pdfViewerBase.customStampCount,allowedInteractions:v,bounds:{x:e.left,y:e.top,width:e.width,height:e.height},pageIndex:t,data:p?i.src:"",modifiedDate:o,shapeAnnotationType:"Image",type:"Image",opacity:s,rotateAngle:a,annotName:u,comments:[],review:{state:"",stateModel:"",modifiedDate:"",author:f},annotationSettings:S,annotationAddMode:b,signatureName:h,isPrint:V,isCommentLock:m},this.currentStampAnnotation=c;var A=this.pdfViewer.stampSettings.annotationSelectorSettings?this.pdfViewer.stampSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings;if(l||y){if(d||(this.isStampAnnotSelected=!1,(d=c).Note="",d.State="",d.StateModel="",this.pdfViewer.annotation.stickyNotesAnnotationModule.addComments("stamp",t+1,"",u,"",f)),w={stampAnnotationType:"image",author:f,allowedInteractions:v,modifiedDate:o,subject:"",note:d.Note,strokeColor:"",fillColor:"",opacity:s,rotateAngle:"0",creationDate:n,pageNumber:t,icon:"",stampAnnotationPath:p?i.src:"",randomId:"stamp"+this.pdfViewerBase.customStampCount,bounds:{x:e.left,y:e.top,left:e.left,top:e.top,width:e.width,height:e.height},stampFillcolor:"",isDynamicStamp:!1,annotName:u,comments:this.pdfViewer.annotationModule.getAnnotationComments(d.Comments,d,d.Author),review:{state:d.State,stateModel:d.StateModel,author:f,modifiedDate:o},shapeAnnotationType:"stamp",type:"Image",annotationSelectorSettings:A,annotationSettings:S,customData:this.pdfViewer.annotation.getCustomData(d),isPrint:V,isCommentLock:m,isMaskedImage:d.IsMaskedImage,customStampName:d.CustomStampName},c.comments=this.pdfViewer.annotationModule.getAnnotationComments(d.Comments,d,d.Author),c.review={state:d.State,stateModel:d.StateModel,author:f,modifiedDate:o},this.isAddAnnotationProgramatically){var x={opacity:c.opacity,borderColor:c.strokeColor,borderWidth:c.thickness,author:d.author,subject:d.subject,modifiedDate:d.modifiedDate,fillColor:c.fillColor,fontSize:c.fontSize,width:c.bounds.width,height:c.bounds.height,fontColor:c.fontColor,fontFamily:c.fontFamily,defaultText:c.dynamicText,fontStyle:c.font,textAlignment:c.textAlign};this.customStampName=this.customStampName?this.customStampName:this.currentStampAnnotation.signatureName?this.currentStampAnnotation.signatureName:d.id,this.pdfViewer.fireAnnotationAdd(c.pageIndex,c.annotName,"Image",c.bounds,x,null,null,null,null,null,this.customStampName),this.customStampName=null}this.pdfViewer.add(c),r=null!=r&&null!=r?r:document.getElementById(this.pdfViewer.dataId+"_annotationCanvas_"+t),this.pdfViewer.renderDrawing(r,t),this.pdfViewerBase.stampAdded&&this.pdfViewer.annotation.addAction(t,null,c,"Addition","",c,c)}sf.base.Browser.isDevice||(this.pdfViewerBase.customStampCount+=1);var C=this;d&&(g=d.AnnotName,i.setAttribute("annotationId",g)),i.onload=function(){var e=C.pdfViewer.drawing.getPageObjects(t),n=i.src;if(e&&e.length>0)for(var o=0;o<e.length;o++)if(e[o].annotName==g){var a=C.pdfViewer.nameTable[e[o].id];if(null!==a&&"Image"===a.shapeAnnotationType){if(i.getAttribute("annotationId")===a.annotName){var s=a.wrapper.children[0];null!==s&&(s.source=""===s.source?n:s.source,s.imageSource=""===s.imageSource?n:s.imageSource),w.stampAnnotationPath=""===w.stampAnnotationPath?n:w.stampAnnotationPath}C.storeStampInSession(t,w),C.pdfViewer.renderDrawing(r,t)}}}},e.prototype.retrieveDynamicStampAnnotation=function(e){var t;if(e){switch(e.trim()){case"Revised":t={iconName:"Revised",pathdata:"M19.68,21.22a3.94,3.94,0,0,1-1.1-1.9L16,11.87l-.21-.64a20.77,20.77,0,0,0,2.11-.58,7.24,7.24,0,0,0,2-1.09,5.65,5.65,0,0,0,1.72-2.12,5.4,5.4,0,0,0,.52-2.2A4.15,4.15,0,0,0,19.1,1.05a14.58,14.58,0,0,0-4.72-.6H5.31v.86a7,7,0,0,1,2,.33c.3.14.45.48.45,1a6.1,6.1,0,0,1-.14,1.08l-.21.8L3.31,19.32a3.35,3.35,0,0,1-.94,1.78,3.58,3.58,0,0,1-1.74.57v.86h9.83v-.86a6.22,6.22,0,0,1-2-.35c-.29-.15-.43-.52-.43-1.11,0-.1,0-.21,0-.31a2.36,2.36,0,0,1,0-.28l.28-1.14,1.95-6.86h.93l3.56,10.91h6.25v-.88A3.05,3.05,0,0,1,19.68,21.22ZM13.29,10.31a14,14,0,0,1-2.63.23l2-7.56a2.67,2.67,0,0,1,.52-1.17,1.4,1.4,0,0,1,1-.3,2.74,2.74,0,0,1,2.33.91,3.72,3.72,0,0,1,.69,2.3,6.4,6.4,0,0,1-.49,2.52,6.72,6.72,0,0,1-1.06,1.82A4.11,4.11,0,0,1,13.29,10.31ZM26,.45H43.74l-1.4,6.27-.88-.15a6,6,0,0,0-.78-3.4c-.84-1.12-2.54-1.69-5.11-1.69a2.9,2.9,0,0,0-1.68.32A2.34,2.34,0,0,0,33.26,3l-1.95,7.33a13.55,13.55,0,0,0,4.48-.56c.68-.32,1.44-1.3,2.27-2.92l.91.11-2.44,9-.91-.16a7.27,7.27,0,0,0,.09-.82q0-.35,0-.57a2.69,2.69,0,0,0-1-2.4A7.57,7.57,0,0,0,31,11.38l-2.17,8c0,.2-.09.38-.12.57a2.62,2.62,0,0,0,0,.43.92.92,0,0,0,.35.74,2.54,2.54,0,0,0,1.49.29,13.84,13.84,0,0,0,5.11-.84A9.85,9.85,0,0,0,40.73,16l.81.14-1.95,6.42h-18v-.9a3.43,3.43,0,0,0,1.42-.53A3.42,3.42,0,0,0,24,19.32L28,4.51c.1-.37.18-.72.25-1a4.23,4.23,0,0,0,.09-.78c0-.56-.15-.91-.44-1.06a6.85,6.85,0,0,0-2-.34ZM63.4,3.37,51,23.15H49.9L47.39,6.34a17.25,17.25,0,0,0-.93-4.24c-.25-.43-.93-.7-2.05-.79V.45h9.86v.86a5.47,5.47,0,0,0-1.72.19,1.14,1.14,0,0,0-.81,1.16,3,3,0,0,0,0,.31l0,.32L53.5,16.43l6.24-9.85c.49-.79.94-1.57,1.33-2.36a4.45,4.45,0,0,0,.6-1.85.88.88,0,0,0-.61-.9,6.11,6.11,0,0,0-1.52-.16V.45h6.34v.86a3.88,3.88,0,0,0-1.16.5A5.73,5.73,0,0,0,63.4,3.37ZM70.08,20c0,.11,0,.22,0,.31,0,.56.15.91.45,1.06a6.39,6.39,0,0,0,1.95.35v.86H62.63v-.86a3.58,3.58,0,0,0,1.74-.57,3.35,3.35,0,0,0,.94-1.78l4-14.81q.18-.63.27-1a3.78,3.78,0,0,0,.09-.75c0-.56-.16-.91-.47-1.06a7,7,0,0,0-2-.34V.45h9.83v.86a3.61,3.61,0,0,0-1.75.58,3.37,3.37,0,0,0-.91,1.78L70.4,18.48l-.26,1.14Zm19.26-7.23a6.37,6.37,0,0,1,1.07,3.62,6.58,6.58,0,0,1-2.06,4.71,7.54,7.54,0,0,1-5.65,2.1A10.15,10.15,0,0,1,80.89,23a11.42,11.42,0,0,1-1.8-.49l-.83-.3-.58-.2a2,2,0,0,0-.38,0,1,1,0,0,0-.78.26,3.89,3.89,0,0,0-.52.92H75l1.19-7.4,1,.07a14.63,14.63,0,0,0,.28,2.3,5.27,5.27,0,0,0,2.79,3.44,4.73,4.73,0,0,0,2.06.44,3.85,3.85,0,0,0,3.07-1.26,4.39,4.39,0,0,0,1.09-2.94q0-2.09-4.05-5.25c-2.7-2.22-4-4.26-4-6.14a6.31,6.31,0,0,1,1.78-4.53,6.51,6.51,0,0,1,5-1.87,9.67,9.67,0,0,1,1.82.18A6.54,6.54,0,0,1,88,.45l.84.28.56.13a2.59,2.59,0,0,0,.52.06,1.4,1.4,0,0,0,.88-.24,2.2,2.2,0,0,0,.53-.6h1L91,6.69l-.85-.12L90,5.49a6,6,0,0,0-1-2.62,3.82,3.82,0,0,0-3.38-1.73A3,3,0,0,0,82.9,2.53a3.6,3.6,0,0,0-.58,2,3.44,3.44,0,0,0,.59,2,6,6,0,0,0,1,1l2.85,2.33A12.75,12.75,0,0,1,89.34,12.72ZM110.27,16l.81.14-2,6.42H90.85v-.86a3.66,3.66,0,0,0,1.74-.57,3.42,3.42,0,0,0,.93-1.78l4-14.81c.1-.37.18-.72.25-1a4.23,4.23,0,0,0,.09-.78c0-.56-.14-.91-.44-1.06a6.85,6.85,0,0,0-2-.34V.45h17.77l-1.4,6.27L111,6.57a6,6,0,0,0-.78-3.4c-.84-1.12-2.54-1.69-5.1-1.69a2.92,2.92,0,0,0-1.69.32A2.34,2.34,0,0,0,102.8,3l-2,7.33a13.55,13.55,0,0,0,4.48-.56c.69-.32,1.44-1.3,2.27-2.92l.92.11-2.45,9-.91-.16a7.27,7.27,0,0,0,.09-.82q0-.35,0-.57a2.69,2.69,0,0,0-1-2.4,7.57,7.57,0,0,0-3.79-.64l-2.17,8c0,.2-.09.38-.12.57a2.62,2.62,0,0,0,0,.43.92.92,0,0,0,.35.74,2.54,2.54,0,0,0,1.49.29,13.84,13.84,0,0,0,5.11-.84A9.81,9.81,0,0,0,110.27,16Zm22.65-13Q130.39.45,125.52.45h-9.58v.86a7,7,0,0,1,2,.34c.31.15.47.5.47,1.06a3.61,3.61,0,0,1-.09.74c-.06.29-.15.64-.26,1.06L114,19.31a3.18,3.18,0,0,1-1.15,1.91,3.57,3.57,0,0,1-1.53.45v.86h9.47a14.87,14.87,0,0,0,10.95-4.14,12,12,0,0,0,3.75-8.77A8.94,8.94,0,0,0,132.92,2.94ZM129,15.36q-2.62,6.06-8.52,6.05a2.46,2.46,0,0,1-1.42-.29,1.05,1.05,0,0,1-.4-.93,2.24,2.24,0,0,1,0-.34,2.65,2.65,0,0,1,.08-.43l4.55-16.67a2,2,0,0,1,.54-.92,2.2,2.2,0,0,1,1.44-.35,4.74,4.74,0,0,1,4.47,2.22,7.9,7.9,0,0,1,.83,3.9A19.32,19.32,0,0,1,129,15.36Z",opacity:1,strokeColor:"",fillColor:"#192760",width:127.47,height:55.84601,stampFillColor:"#dce3ef",stampStrokeColor:""};break;case"Reviewed":t={iconName:"Reviewed",pathdata:"M17.37,18.25a3.47,3.47,0,0,1-1-1.67L14.17,10c0-.07-.1-.26-.19-.56A14.71,14.71,0,0,0,15.83,9a6.08,6.08,0,0,0,1.76-1A4.92,4.92,0,0,0,19.1,6.14a4.71,4.71,0,0,0,.46-1.93A3.65,3.65,0,0,0,16.86.52,12.83,12.83,0,0,0,12.72,0h-8V.75a6.62,6.62,0,0,1,1.72.3c.26.12.39.41.39.88a4.56,4.56,0,0,1-.13.94c0,.2-.1.44-.17.7L3,16.58a2.87,2.87,0,0,1-.82,1.56,3.15,3.15,0,0,1-1.53.51v.75H9.27v-.75a5.88,5.88,0,0,1-1.74-.31c-.25-.13-.37-.46-.37-1a2.53,2.53,0,0,1,0-.28,1.44,1.44,0,0,1,0-.24l.24-1,1.71-6H10l3.13,9.59h5.49v-.77A2.71,2.71,0,0,1,17.37,18.25ZM11.75,8.67a12.06,12.06,0,0,1-2.3.19L11.2,2.22a2.2,2.2,0,0,1,.46-1,1.19,1.19,0,0,1,.87-.27,2.41,2.41,0,0,1,2.05.8,3.29,3.29,0,0,1,.6,2A5.63,5.63,0,0,1,14.75,6a6.06,6.06,0,0,1-.93,1.59A3.65,3.65,0,0,1,11.75,8.67ZM22.9,0H38.52L37.29,5.51l-.78-.13a5.34,5.34,0,0,0-.68-3c-.74-1-2.24-1.48-4.49-1.48a2.68,2.68,0,0,0-1.49.27,2.09,2.09,0,0,0-.54,1L27.59,8.67a12.08,12.08,0,0,0,3.94-.5,5.69,5.69,0,0,0,2-2.56l.81.1-2.16,7.93-.79-.15c0-.27.06-.51.08-.71s0-.37,0-.5a2.34,2.34,0,0,0-.85-2.11A6.61,6.61,0,0,0,27.3,9.6l-1.91,7.08a4.91,4.91,0,0,0-.1.5,2,2,0,0,0,0,.38.83.83,0,0,0,.31.65,2.29,2.29,0,0,0,1.31.25,12.21,12.21,0,0,0,4.49-.73,8.69,8.69,0,0,0,4.51-4.09l.71.12L34.86,19.4H19.05v-.79a2.88,2.88,0,0,0,1.28-.47,2.94,2.94,0,0,0,.82-1.56l3.56-13q.13-.49.21-.9A3.26,3.26,0,0,0,25,2q0-.73-.39-.93A6.44,6.44,0,0,0,22.9.75ZM55.79,2.57,44.86,20h-.93L41.72,5.17a16.05,16.05,0,0,0-.81-3.73c-.22-.37-.82-.6-1.81-.69V0h8.67V.75a5,5,0,0,0-1.52.17,1,1,0,0,0-.7,1,2.53,2.53,0,0,0,0,.28l0,.27L47.09,14l5.48-8.66C53,4.69,53.4,4,53.75,3.32a4,4,0,0,0,.52-1.63.78.78,0,0,0-.54-.8A5.88,5.88,0,0,0,52.4.75V0H58V.75a3.55,3.55,0,0,0-1,.44A5.18,5.18,0,0,0,55.79,2.57ZM62,18.34a6,6,0,0,0,1.71.31v.75H55.12v-.75a3.15,3.15,0,0,0,1.53-.51,2.94,2.94,0,0,0,.82-1.56L61,3.57c.1-.37.18-.68.23-.93A2.81,2.81,0,0,0,61.34,2c0-.49-.13-.8-.41-.93a6.61,6.61,0,0,0-1.71-.3V0h8.63V.75a3.17,3.17,0,0,0-1.53.51,3,3,0,0,0-.8,1.57l-3.58,13-.22,1a2.74,2.74,0,0,0,0,.28,1.41,1.41,0,0,0,0,.28C61.64,17.9,61.78,18.21,62,18.34ZM69.13,0H84.75L83.52,5.51l-.78-.13a5.34,5.34,0,0,0-.68-3c-.74-1-2.24-1.48-4.49-1.48a2.68,2.68,0,0,0-1.49.27,2.09,2.09,0,0,0-.54,1L73.82,8.67a12.08,12.08,0,0,0,3.94-.5,5.69,5.69,0,0,0,2-2.56l.81.1L78.4,13.64l-.79-.15c0-.27.07-.51.08-.71s0-.37,0-.5a2.34,2.34,0,0,0-.85-2.11,6.61,6.61,0,0,0-3.33-.57l-1.91,7.08a4.91,4.91,0,0,0-.1.5,2,2,0,0,0,0,.38.83.83,0,0,0,.31.65,2.29,2.29,0,0,0,1.31.25,12.21,12.21,0,0,0,4.49-.73,8.69,8.69,0,0,0,4.51-4.09l.71.12L81.1,19.4H65v-.75a3.15,3.15,0,0,0,1.53-.51,2.94,2.94,0,0,0,.82-1.56l3.56-13q.14-.49.21-.9A3.26,3.26,0,0,0,71.24,2q0-.73-.39-.93a6.44,6.44,0,0,0-1.72-.3Zm39.15,2.83L100,20h-.84L97.41,5.85,90.67,20h-.84L87.58,3.13A3.83,3.83,0,0,0,87,1.23,2.84,2.84,0,0,0,85.33.71V0h8.06V.75A2.55,2.55,0,0,0,92.27,1a1.33,1.33,0,0,0-.66,1.31c0,.06,0,.13,0,.19s0,.15,0,.26l1.15,10.16,4.32-9a1,1,0,0,0,0-.27,3.33,3.33,0,0,0-.64-2.38A2.5,2.5,0,0,0,95.06.71V0h7.78V.71a2.9,2.9,0,0,0-1.4.34c-.27.19-.41.6-.41,1.24,0,.13,0,.32,0,.55,0,.4.08.88.14,1.47l1,8.47,4.51-9.42a7.12,7.12,0,0,0,.29-.74,2.48,2.48,0,0,0,.14-.79.9.9,0,0,0-.48-.93,3.25,3.25,0,0,0-1.34-.19V0h5.41V.71a2.34,2.34,0,0,0-1.1.35A4.56,4.56,0,0,0,108.28,2.83Zm16.45,10.81.71.12-1.71,5.64H107.66v-.75a3.15,3.15,0,0,0,1.53-.51,2.87,2.87,0,0,0,.82-1.56l3.57-13q.12-.49.21-.9a3.17,3.17,0,0,0,.08-.69q0-.73-.39-.93a6.44,6.44,0,0,0-1.72-.3V0h15.62l-1.23,5.51-.78-.13a5.26,5.26,0,0,0-.68-3C124,1.4,122.46.91,120.2.91a2.64,2.64,0,0,0-1.48.27,2.09,2.09,0,0,0-.55,1l-1.72,6.45a12,12,0,0,0,3.94-.5,5.62,5.62,0,0,0,2-2.56l.81.1L121,13.64l-.79-.15c0-.27.06-.51.07-.71s0-.37,0-.5a2.34,2.34,0,0,0-.86-2.11,6.57,6.57,0,0,0-3.32-.57l-1.91,7.08a5,5,0,0,0-.11.5,3.14,3.14,0,0,0,0,.38.8.8,0,0,0,.31.65,2.25,2.25,0,0,0,1.3.25,12.26,12.26,0,0,0,4.5-.73A8.67,8.67,0,0,0,124.73,13.64ZM144.64,2.19Q142.41,0,138.14,0h-8.42V.75a6.61,6.61,0,0,1,1.71.3c.28.13.41.44.41.93a2.81,2.81,0,0,1-.08.66c0,.25-.12.56-.23.93l-3.56,13a2.78,2.78,0,0,1-1,1.68,3.44,3.44,0,0,1-1.35.4v.75h8.32a13.06,13.06,0,0,0,9.63-3.64,10.49,10.49,0,0,0,3.3-7.7A7.87,7.87,0,0,0,144.64,2.19ZM141.2,13.1q-2.31,5.32-7.48,5.32a2.27,2.27,0,0,1-1.26-.25,1,1,0,0,1-.34-.82,1.62,1.62,0,0,1,0-.3,2.16,2.16,0,0,1,.08-.38l4-14.65a1.63,1.63,0,0,1,.47-.81A2,2,0,0,1,138,.91a4.16,4.16,0,0,1,3.93,1.95,7,7,0,0,1,.72,3.42A16.82,16.82,0,0,1,141.2,13.1Z",opacity:1,strokeColor:"",fillColor:"#192760",width:127.70402,height:55.84601,stampFillColor:"#dce3ef",stampStrokeColor:""};break;case"Received":t={iconName:"Received",pathdata:"M18.17,8.76a5,5,0,0,0,1.57-1.93,5,5,0,0,0,.47-2A3.76,3.76,0,0,0,17.42,1,13,13,0,0,0,13.13.48H4.89v.78a6.49,6.49,0,0,1,1.77.31c.27.12.41.43.41.91a5.87,5.87,0,0,1-.13,1c-.05.2-.12.44-.19.72L3.06,17.64a3,3,0,0,1-.84,1.61,3.36,3.36,0,0,1-1.59.53v.77H9.57v-.77a6.17,6.17,0,0,1-1.8-.32c-.26-.14-.39-.48-.39-1a2.46,2.46,0,0,1,0-.28,1.78,1.78,0,0,1,0-.26l.25-1,1.78-6.25h.84l3.24,9.92h5.66v-.8A2.76,2.76,0,0,1,18,19.36a3.57,3.57,0,0,1-1-1.72l-2.31-6.78c0-.07-.09-.27-.19-.58.87-.2,1.51-.38,1.92-.52A6.56,6.56,0,0,0,18.17,8.76Zm-2.93-2.1a6.19,6.19,0,0,1-1,1.65,3.85,3.85,0,0,1-2.14,1.14,12.92,12.92,0,0,1-2.39.2l1.81-6.87A2.5,2.5,0,0,1,12,1.72a1.27,1.27,0,0,1,.9-.27,2.5,2.5,0,0,1,2.12.83,3.35,3.35,0,0,1,.62,2.09A5.81,5.81,0,0,1,15.24,6.66ZM30.3,2.78,28.52,9.45a12.53,12.53,0,0,0,4.08-.51,5.91,5.91,0,0,0,2-2.66l.84.11-2.23,8.2-.82-.15c0-.28.07-.53.08-.74a5.17,5.17,0,0,0,0-.52A2.43,2.43,0,0,0,31.66,11a6.87,6.87,0,0,0-3.44-.58l-2,7.32a3.61,3.61,0,0,0-.11.51,2.31,2.31,0,0,0,0,.4.83.83,0,0,0,.32.67,2.32,2.32,0,0,0,1.35.26,12.58,12.58,0,0,0,4.65-.76,9,9,0,0,0,4.67-4.23l.73.13-1.77,5.83H19.8v-.83A2.83,2.83,0,0,0,21,19.25a3.09,3.09,0,0,0,.85-1.61L25.54,4.17c.09-.34.16-.65.22-.93a3.35,3.35,0,0,0,.09-.71c0-.5-.13-.82-.4-1a6.34,6.34,0,0,0-1.78-.31V.48H39.82l-1.27,5.7-.81-.13A5.44,5.44,0,0,0,37,3Q35.9,1.42,32.4,1.42a2.69,2.69,0,0,0-1.54.29A2.08,2.08,0,0,0,30.3,2.78ZM56.56,6.1c0-.07,0-.18,0-.33a4.89,4.89,0,0,0-1.12-3.53,3.75,3.75,0,0,0-2.82-1.16c-2.33,0-4.35,1.55-6.07,4.63a17.09,17.09,0,0,0-2.31,8.43c0,2.08.47,3.5,1.43,4.27a4.89,4.89,0,0,0,3.11,1.15,6.84,6.84,0,0,0,4.14-1.45A11.51,11.51,0,0,0,55,16l.91.66A10.08,10.08,0,0,1,52.26,20a9.33,9.33,0,0,1-4.34,1.11A8.56,8.56,0,0,1,42,19a7.25,7.25,0,0,1-2.35-5.67A13.53,13.53,0,0,1,43.22,4a11.19,11.19,0,0,1,8.56-4A12.34,12.34,0,0,1,55,.44,13.17,13.17,0,0,0,56.9.88a1,1,0,0,0,.71-.24A2.94,2.94,0,0,0,58.06,0H59L57.45,7l-.94-.18C56.54,6.42,56.55,6.17,56.56,6.1Zm18,8.49.74.13-1.78,5.83H56.87v-.77a3.31,3.31,0,0,0,1.58-.53,3.09,3.09,0,0,0,.85-1.61L63,4.17c.09-.34.16-.65.22-.93a3.35,3.35,0,0,0,.09-.71c0-.5-.14-.82-.4-1a6.34,6.34,0,0,0-1.78-.31V.48H77.26L76,6.18l-.81-.13A5.44,5.44,0,0,0,74.48,3q-1.14-1.54-4.64-1.54a2.69,2.69,0,0,0-1.54.29,2.08,2.08,0,0,0-.56,1.07L66,9.45A12.53,12.53,0,0,0,70,8.94a5.91,5.91,0,0,0,2-2.66l.84.11-2.23,8.2-.82-.15c0-.28.07-.53.08-.74a5.17,5.17,0,0,0,0-.52A2.43,2.43,0,0,0,69.1,11a6.87,6.87,0,0,0-3.44-.58l-2,7.32a3.61,3.61,0,0,0-.11.51,2.31,2.31,0,0,0,0,.4.83.83,0,0,0,.32.67,2.32,2.32,0,0,0,1.35.26,12.58,12.58,0,0,0,4.65-.76A8.91,8.91,0,0,0,74.52,14.59Zm31-11.45-11.31,18h-1L91,5.83A16.56,16.56,0,0,0,90.12,2c-.2-.34-.71-.56-1.51-.67a3,3,0,0,0-1.31.48,3.08,3.08,0,0,0-.82,1.62l-3.7,13.47-.24,1c0,.1,0,.2-.05.3s0,.2,0,.28c0,.51.14.83.41,1a6.21,6.21,0,0,0,1.77.32v.77H75.72v-.77a3.31,3.31,0,0,0,1.58-.53,3.09,3.09,0,0,0,.85-1.61L81.83,4.17c.11-.38.19-.7.25-.95a3.75,3.75,0,0,0,.08-.69c0-.5-.15-.82-.43-1A6.49,6.49,0,0,0,80,1.26V.48H97.22v.78a4.92,4.92,0,0,0-1.57.18,1,1,0,0,0-.73,1.05,2.81,2.81,0,0,0,0,.29l0,.28,1.56,12,5.67-9a24.21,24.21,0,0,0,1.21-2.14,4.07,4.07,0,0,0,.54-1.68.79.79,0,0,0-.55-.82A5.69,5.69,0,0,0,102,1.26V.48h5.76v.78a3.5,3.5,0,0,0-1,.46A5.16,5.16,0,0,0,105.52,3.14Zm16.83,11.45.73.13-1.77,5.83H104.69v-.77a3.31,3.31,0,0,0,1.58-.53,3,3,0,0,0,.85-1.61l3.69-13.47c.08-.34.16-.65.22-.93a4,4,0,0,0,.08-.71c0-.5-.13-.82-.4-1a6.34,6.34,0,0,0-1.78-.31V.48h16.16l-1.28,5.7-.8-.13A5.43,5.43,0,0,0,122.3,3q-1.14-1.54-4.64-1.54a2.67,2.67,0,0,0-1.53.29,2.16,2.16,0,0,0-.57,1.07l-1.78,6.67a12.53,12.53,0,0,0,4.08-.51,5.91,5.91,0,0,0,2.06-2.66l.83.11-2.22,8.2-.82-.15c0-.28.06-.53.08-.74s0-.38,0-.52a2.45,2.45,0,0,0-.88-2.18,6.9,6.9,0,0,0-3.44-.58l-2,7.32c-.05.18-.08.35-.11.51a3.58,3.58,0,0,0,0,.4.81.81,0,0,0,.32.67,2.28,2.28,0,0,0,1.35.26,12.62,12.62,0,0,0,4.65-.76A9,9,0,0,0,122.35,14.59ZM142.94,2.75Q140.63.48,136.21.48h-8.7v.78a6.66,6.66,0,0,1,1.77.31q.42.21.42,1a2.91,2.91,0,0,1-.08.68q-.08.39-.24,1L125.7,17.62a2.93,2.93,0,0,1-1,1.75,3.54,3.54,0,0,1-1.39.41v.77h8.61a13.5,13.5,0,0,0,10-3.76,10.84,10.84,0,0,0,3.41-8A8.14,8.14,0,0,0,142.94,2.75ZM139.38,14q-2.38,5.51-7.74,5.5a2.35,2.35,0,0,1-1.29-.26,1,1,0,0,1-.36-.85,1.78,1.78,0,0,1,0-.31,2.08,2.08,0,0,1,.08-.39l4.13-15.15a1.76,1.76,0,0,1,.49-.84A2,2,0,0,1,136,1.42a4.32,4.32,0,0,1,4.07,2A7.17,7.17,0,0,1,140.83,7,17.49,17.49,0,0,1,139.38,14Z",opacity:1,strokeColor:"",fillColor:"#192760",width:127.70402,height:55.84601,stampFillColor:"#dce3ef",stampStrokeColor:""};break;case"Approved":t={iconName:"Approved",pathdata:"M19,20.22H10.55v-.71a4.26,4.26,0,0,0,1.79-.41,1.37,1.37,0,0,0,.53-1.29c0-.22,0-.75-.16-1.58,0-.17-.11-.89-.29-2.15H6.06l-1.72,3a4,4,0,0,0-.31.66,2,2,0,0,0-.14.69c0,.41.12.67.37.78a5.42,5.42,0,0,0,1.53.3v.71H0v-.71A4,4,0,0,0,1.21,19a5.68,5.68,0,0,0,1.28-1.56L13.45.07h.76L17,17a4.35,4.35,0,0,0,.7,2.08,2.4,2.4,0,0,0,1.31.44Zm-6.83-7.31L11.13,5.73,6.76,12.91Zm7.18,6.52a3,3,0,0,0,1.33-.49,3,3,0,0,0,.84-1.59L25.19,4.11c.07-.3.14-.6.2-.9a3.14,3.14,0,0,0,.1-.72,1,1,0,0,0-.58-1,5.68,5.68,0,0,0-1.57-.23V.48h8.47a9.68,9.68,0,0,1,3.57.57,4,4,0,0,1,2.71,4,4.93,4.93,0,0,1-2.2,4.22,9.53,9.53,0,0,1-5.69,1.58l-.85,0-1.71-.11L26,16.6l-.25,1a1,1,0,0,0-.05.3,2.83,2.83,0,0,0,0,.29c0,.5.14.81.4.94a6.31,6.31,0,0,0,1.76.31v.76H19.39Zm8.52-9.66.54.06h.48a5.81,5.81,0,0,0,2.3-.36,3.47,3.47,0,0,0,1.4-1.18,6.24,6.24,0,0,0,.86-2,8.94,8.94,0,0,0,.3-2,3.29,3.29,0,0,0-.58-2,2.3,2.3,0,0,0-2-.79,1.23,1.23,0,0,0-.93.28,2.71,2.71,0,0,0-.46,1Zm8,9.69a3.19,3.19,0,0,0,1.55-.52,3,3,0,0,0,.84-1.59L42,4.11c.07-.3.14-.6.2-.9a3.14,3.14,0,0,0,.1-.72,1,1,0,0,0-.58-1,5.68,5.68,0,0,0-1.57-.23V.48h8.47a9.68,9.68,0,0,1,3.57.57,4,4,0,0,1,2.71,4,4.93,4.93,0,0,1-2.2,4.22A9.53,9.53,0,0,1,47,10.87l-.85,0-1.71-.11L42.79,16.6l-.25,1a1.45,1.45,0,0,0,0,.3,2.83,2.83,0,0,0,0,.29c0,.5.14.81.4.94a6.31,6.31,0,0,0,1.76.31v.76h-8.7Zm8.74-9.69.54.06h.48A5.81,5.81,0,0,0,48,9.48a3.41,3.41,0,0,0,1.4-1.18,6.24,6.24,0,0,0,.86-2,9,9,0,0,0,.31-2,3.29,3.29,0,0,0-.59-2,2.3,2.3,0,0,0-2-.79,1.23,1.23,0,0,0-.93.28,2.88,2.88,0,0,0-.46,1Zm7.95,9.69a3.27,3.27,0,0,0,1.56-.52A3.06,3.06,0,0,0,55,17.35L58.64,4.11l.18-.71a4.72,4.72,0,0,0,.13-1c0-.47-.13-.77-.4-.9a6.74,6.74,0,0,0-1.74-.3V.48h8.11A13,13,0,0,1,69.14,1a3.7,3.7,0,0,1,2.74,3.75,4.8,4.8,0,0,1-.46,2,5,5,0,0,1-1.54,1.9,6.55,6.55,0,0,1-1.79,1,19.35,19.35,0,0,1-1.89.52c.1.3.16.49.2.57l2.27,6.66a3.49,3.49,0,0,0,1,1.7,3.08,3.08,0,0,0,1.6.41v.76H65.33l-3.19-9.76h-.83L59.57,16.6l-.25,1a1.87,1.87,0,0,0,0,.25,2.64,2.64,0,0,0,0,.28q0,.8.39,1a5.88,5.88,0,0,0,1.76.32v.76H52.62ZM63.94,9.3a3.79,3.79,0,0,0,2.11-1.13A6,6,0,0,0,67,6.55a5.84,5.84,0,0,0,.44-2.26,3.31,3.31,0,0,0-.61-2,2.47,2.47,0,0,0-2.09-.81,1.25,1.25,0,0,0-.88.26,2.34,2.34,0,0,0-.47,1.05L61.59,9.5A13.42,13.42,0,0,0,63.94,9.3ZM76.39,4.53Q80.26,0,85,0a7.34,7.34,0,0,1,5.23,1.92,6.76,6.76,0,0,1,2,5.19,13.9,13.9,0,0,1-3.62,9.07q-3.86,4.61-8.88,4.6a7.06,7.06,0,0,1-5.13-1.92,6.86,6.86,0,0,1-2-5.14A14,14,0,0,1,76.39,4.53ZM77.3,18a2.56,2.56,0,0,0,2.57,1.78A4.62,4.62,0,0,0,83,18.47,14.42,14.42,0,0,0,86,13.54a27.18,27.18,0,0,0,1.52-4.83,20.67,20.67,0,0,0,.54-4.11,4.38,4.38,0,0,0-.73-2.55A2.62,2.62,0,0,0,85,1q-3.68,0-6.19,6.54a24.29,24.29,0,0,0-1.9,8.26A5.91,5.91,0,0,0,77.3,18ZM102.23.48v.76a5.19,5.19,0,0,0-1.55.17,1,1,0,0,0-.72,1,2.46,2.46,0,0,0,0,.28L100,3l1.52,11.76L107.11,6c.44-.71.84-1.41,1.2-2.11a4.06,4.06,0,0,0,.53-1.66.79.79,0,0,0-.55-.81,6.11,6.11,0,0,0-1.35-.14V.48h5.67v.76a3.31,3.31,0,0,0-1,.45,5.33,5.33,0,0,0-1.18,1.4L99.26,20.78h-.94l-2.25-15A15.49,15.49,0,0,0,95.24,2c-.22-.39-.84-.62-1.83-.71V.48Zm7.35,19a3.19,3.19,0,0,0,1.55-.52,3,3,0,0,0,.84-1.59l3.62-13.24c.09-.34.16-.64.22-.92a3.27,3.27,0,0,0,.09-.7c0-.5-.14-.81-.4-.94a6.13,6.13,0,0,0-1.75-.31V.48h15.89l-1.25,5.6L127.6,6a5.32,5.32,0,0,0-.7-3q-1.12-1.52-4.56-1.51a2.61,2.61,0,0,0-1.51.28,2.12,2.12,0,0,0-.56,1.06L118.52,9.3a12.1,12.1,0,0,0,4-.51,5.8,5.8,0,0,0,2-2.61l.82.1-2.19,8.07-.81-.14c0-.28.07-.52.08-.73s0-.37,0-.51a2.4,2.4,0,0,0-.87-2.15,6.76,6.76,0,0,0-3.38-.57l-1.94,7.2a3.34,3.34,0,0,0-.11.51,3.67,3.67,0,0,0,0,.39.81.81,0,0,0,.32.66,2.3,2.3,0,0,0,1.33.26,12.39,12.39,0,0,0,4.57-.75A8.84,8.84,0,0,0,127,14.35l.72.13-1.74,5.74H109.58Zm18.27,0a3.27,3.27,0,0,0,1.37-.41,2.85,2.85,0,0,0,1-1.71l3.63-13.23c.1-.38.18-.69.23-1a3,3,0,0,0,.09-.67c0-.5-.15-.81-.42-.94A6.38,6.38,0,0,0,132,1.24V.48h8.57c2.9,0,5.1.74,6.62,2.22a8,8,0,0,1,2.26,6,10.72,10.72,0,0,1-3.35,7.84,13.3,13.3,0,0,1-9.8,3.7h-8.47ZM144.4,3.39a4.23,4.23,0,0,0-4-2,2,2,0,0,0-1.29.31,1.74,1.74,0,0,0-.48.83l-4.07,14.9a3.24,3.24,0,0,0-.07.39,1.69,1.69,0,0,0,0,.3,1,1,0,0,0,.36.84,2.27,2.27,0,0,0,1.27.26q5.26,0,7.62-5.42a17.25,17.25,0,0,0,1.43-6.94A7,7,0,0,0,144.4,3.39Z",opacity:1,strokeColor:"",fillColor:"#516c30",width:127.70402,height:55.84601,stampFillColor:"#e6eddf",stampStrokeColor:""};break;case"Confidential":t={iconName:"Confidential",pathdata:"M13.71,0,12.63,6.9,12,6.73c0-.41,0-.66,0-.73s0-.18,0-.32a6.16,6.16,0,0,0-.79-3.47,2.37,2.37,0,0,0-2-1.14c-1.64,0-3.07,1.51-4.29,4.55a22,22,0,0,0-1.64,8.29c0,2,.34,3.44,1,4.2A3,3,0,0,0,6.5,19.24a4.08,4.08,0,0,0,2.93-1.43,10.47,10.47,0,0,0,1.5-2.09l.64.65A8.84,8.84,0,0,1,9,19.72a5.24,5.24,0,0,1-3.08,1.09,5.16,5.16,0,0,1-4.21-2.08A8.68,8.68,0,0,1,0,13.16,16.5,16.5,0,0,1,2.55,3.92Q5.1,0,8.61,0a6.35,6.35,0,0,1,2.25.43,6.62,6.62,0,0,0,1.38.43.55.55,0,0,0,.5-.23A2.61,2.61,0,0,0,13.06,0ZM27.49,7.11a17.19,17.19,0,0,1-2.61,9.07q-2.77,4.61-6.39,4.6a4.42,4.42,0,0,1-3.7-1.92,8.47,8.47,0,0,1-1.43-5.14A17.31,17.31,0,0,1,16,4.53C17.88,1.51,20,0,22.25,0A4.53,4.53,0,0,1,26,1.92,8.27,8.27,0,0,1,27.49,7.11ZM24.42,4.6a5.71,5.71,0,0,0-.53-2.55A1.76,1.76,0,0,0,22.24,1q-2.65,0-4.45,6.54a31.93,31.93,0,0,0-1.37,8.26A8.15,8.15,0,0,0,16.67,18c.34,1.19,1,1.78,1.85,1.78a2.9,2.9,0,0,0,2.28-1.29,15.85,15.85,0,0,0,2.13-4.93A34.08,34.08,0,0,0,24,8.71,28.5,28.5,0,0,0,24.42,4.6ZM42.75,1.3l.3-.06V.48H38.69v.76a2.55,2.55,0,0,1,1.16.33,1.8,1.8,0,0,1,.51,1.48,10.11,10.11,0,0,1-.13,1.34c-.06.41-.14.87-.24,1.39l-1.65,8.34L33.73.48H29.45v.76a2.66,2.66,0,0,1,1,.24,1.88,1.88,0,0,1,.65,1.06l.09.3L28.81,15a20.72,20.72,0,0,1-1,3.61,1.61,1.61,0,0,1-1.19.9v.76h4.42v-.76a2.55,2.55,0,0,1-1.13-.32,1.67,1.67,0,0,1-.56-1.44,7.13,7.13,0,0,1,.05-.79c.06-.43.17-1.09.34-2L31.89,4.38l5.52,16.33h.52l3-15a22.58,22.58,0,0,1,.87-3.42A1.42,1.42,0,0,1,42.75,1.3ZM55.53.48H44.23v.76a3.63,3.63,0,0,1,1.26.3c.19.13.29.42.29.9a7.08,7.08,0,0,1-.09,1c0,.2-.08.44-.13.71L43,17.34a3.47,3.47,0,0,1-.59,1.58,1.91,1.91,0,0,1-1.13.54v.76h6.29v-.76a2.13,2.13,0,0,1-1-.19A1.23,1.23,0,0,1,46,18.1c0-.1,0-.21,0-.31s0-.23.05-.35l1.4-7.21a3.15,3.15,0,0,1,2.37.64A3.21,3.21,0,0,1,50.38,13c0,.11,0,.28,0,.49s0,.46-.06.75l.58.14,1.58-8.07-.59-.1a5.79,5.79,0,0,1-1.43,2.59,6.17,6.17,0,0,1-2.77.52l1.26-6.54a2.06,2.06,0,0,1,.42-1.08,1.39,1.39,0,0,1,1-.26c1.62,0,2.7.51,3.24,1.54a7.11,7.11,0,0,1,.49,3l.57.13Zm3.69,17.71c0-.08,0-.17,0-.27s0-.2,0-.3l.17-1L62.06,3.36a3.44,3.44,0,0,1,.59-1.6,2,2,0,0,1,1.12-.52V.48H57.44v.76a3.47,3.47,0,0,1,1.26.31c.2.13.3.44.3.94a4.25,4.25,0,0,1-.06.67c0,.26-.09.57-.17,1L56.16,17.35a3.52,3.52,0,0,1-.6,1.59,2,2,0,0,1-1.12.52v.76h6.33v-.76a3.3,3.3,0,0,1-1.26-.32C59.32,19,59.22,18.69,59.22,18.19Zm18-9.51a13,13,0,0,1-2.42,7.84,8.31,8.31,0,0,1-7,3.7H61.6v-.76a2,2,0,0,0,1-.41,3.14,3.14,0,0,0,.73-1.71L65.93,4.11c.08-.38.13-.69.17-1a4.36,4.36,0,0,0,.06-.67c0-.5-.1-.81-.3-.94a3.47,3.47,0,0,0-1.26-.31V.48h6.17A5.52,5.52,0,0,1,75.53,2.7,9.91,9.91,0,0,1,77.17,8.68ZM74,6.87a9.22,9.22,0,0,0-.53-3.48,2.91,2.91,0,0,0-2.87-2,1.12,1.12,0,0,0-.93.31,1.81,1.81,0,0,0-.35.83l-2.93,14.9a3,3,0,0,0-.05.39c0,.11,0,.21,0,.3a1.17,1.17,0,0,0,.25.84,1.3,1.3,0,0,0,.92.26q3.8,0,5.49-5.42A23.26,23.26,0,0,0,74,6.87Zm11.3,11.65a6.72,6.72,0,0,1-3.29.75,1.3,1.3,0,0,1-1-.26,1,1,0,0,1-.23-.66,3.28,3.28,0,0,1,0-.39,4.88,4.88,0,0,1,.08-.51l1.4-7.2a3.73,3.73,0,0,1,2.43.57A2.87,2.87,0,0,1,85.43,13c0,.14,0,.31,0,.51s0,.45-.06.73l.59.14,1.57-8.07-.59-.1a5.79,5.79,0,0,1-1.46,2.61,6.5,6.5,0,0,1-2.89.51l1.26-6.56a2.41,2.41,0,0,1,.41-1.06c.16-.19.52-.28,1.08-.28,1.65,0,2.75.5,3.29,1.51a7,7,0,0,1,.5,3l.57.13.9-5.6H79.14v.76a3.35,3.35,0,0,1,1.26.31c.19.13.29.44.29.94a5,5,0,0,1-.07.7c0,.28-.09.58-.15.92L77.86,17.35a3.52,3.52,0,0,1-.6,1.59,2,2,0,0,1-1.13.52v.76H87.91l1.25-5.74-.52-.13A7.69,7.69,0,0,1,85.34,18.52ZM105.8,1.24V.48h-4.37v.76a2.55,2.55,0,0,1,1.16.33,1.77,1.77,0,0,1,.52,1.48A10.58,10.58,0,0,1,103,4.39c-.06.41-.13.87-.23,1.39l-1.66,8.34L96.47.48H92.19v.76a2.61,2.61,0,0,1,1,.24,1.83,1.83,0,0,1,.65,1.06l.1.3L91.55,15a19,19,0,0,1-1,3.61,1.61,1.61,0,0,1-1.19.9v.76h4.42v-.76a2.59,2.59,0,0,1-1.13-.32,1.67,1.67,0,0,1-.56-1.44,7.13,7.13,0,0,1,0-.79c.06-.43.17-1.09.35-2L94.63,4.38l5.52,16.33h.53l2.95-15a22.93,22.93,0,0,1,.86-3.42,1.42,1.42,0,0,1,1-1Zm11.4,4.9L118,.48H106.28l-.82,5,.55.2a8,8,0,0,1,1.87-3.16,3.7,3.7,0,0,1,2.7-1.06l-3.12,15.85a2.94,2.94,0,0,1-.87,1.85,2.48,2.48,0,0,1-1.34.26v.76h7v-.76a4.24,4.24,0,0,1-1.43-.3c-.23-.13-.34-.45-.34-.95a2.26,2.26,0,0,1,0-.26c0-.09,0-.2,0-.33l.18-1,3-15.1a2.73,2.73,0,0,1,1.79.63c.75.7,1.13,2,1.17,3.94Zm3.57,12.05c0-.08,0-.17,0-.27s0-.2,0-.3l.17-1,2.62-13.24a3.44,3.44,0,0,1,.59-1.6,2,2,0,0,1,1.12-.52V.48H119v.76a3.47,3.47,0,0,1,1.26.31c.2.13.3.44.3.94a4.25,4.25,0,0,1-.06.67c0,.26-.09.57-.17,1l-2.61,13.24a3.52,3.52,0,0,1-.6,1.59,2,2,0,0,1-1.12.52v.76h6.33v-.76a3.36,3.36,0,0,1-1.26-.32C120.87,19,120.77,18.69,120.77,18.19Zm28.86-3.71-1.24,5.74H130.3v-.71a2.48,2.48,0,0,0,1.3-.41,1.64,1.64,0,0,0,.37-1.29c0-.22,0-.75-.11-1.58,0-.17-.08-.89-.21-2.15h-4.58l-1.24,3a5.1,5.1,0,0,0-.22.66,2.45,2.45,0,0,0-.1.69c0,.41.09.67.26.78a3.05,3.05,0,0,0,1.11.3v.71h-4.17v-.71a2.66,2.66,0,0,0,.87-.53,5.79,5.79,0,0,0,.92-1.56L132.39.07h.55L135,17a5.53,5.53,0,0,0,.5,2.08,1.67,1.67,0,0,0,1.14.46v0a1.93,1.93,0,0,0,1.12-.52,3.52,3.52,0,0,0,.6-1.6l2.61-13.23c.08-.38.13-.69.17-1a4.36,4.36,0,0,0,.06-.67c0-.5-.1-.81-.3-.94a3.47,3.47,0,0,0-1.26-.31V.48h6.73v.76a3.23,3.23,0,0,0-1.49.48,3.06,3.06,0,0,0-.64,1.64l-2.77,14.08c0,.16-.05.3-.07.44s0,.29,0,.47a.79.79,0,0,0,.31.71,1.55,1.55,0,0,0,.87.21,6.83,6.83,0,0,0,3.79-1,8.42,8.42,0,0,0,2.81-3.88ZM131.5,12.91l-.78-7.18-3.14,7.18Z",opacity:1,strokeColor:"",fillColor:"#8a251a",width:127.70402,height:55.84601,stampFillColor:"#f6dedd",stampStrokeColor:""};break;case"NotApproved":case"Not Approved":t={iconName:"Not Approved",pathdata:"M0,19.46a1.56,1.56,0,0,0,1.16-.9A19.84,19.84,0,0,0,2.1,15L4.42,2.84l-.09-.3a1.82,1.82,0,0,0-.64-1.06,2.41,2.41,0,0,0-1-.24V.48H6.88l4.49,13.64L13,5.78c.09-.52.17-1,.22-1.39a10.11,10.11,0,0,0,.13-1.34,1.83,1.83,0,0,0-.49-1.48,2.49,2.49,0,0,0-1.13-.33V.48H16v.76l-.29.06a1.42,1.42,0,0,0-1,1,23.7,23.7,0,0,0-.84,3.42L11,20.71h-.51L5.1,4.38,3,15c-.17.87-.28,1.53-.33,2a5.32,5.32,0,0,0,0,.79,1.69,1.69,0,0,0,.54,1.44,2.48,2.48,0,0,0,1.1.32v.76H0ZM17.73,4.53C19.54,1.51,21.55,0,23.79,0a4.4,4.4,0,0,1,3.66,1.92,8.52,8.52,0,0,1,1.43,5.19,17.56,17.56,0,0,1-2.53,9.07q-2.7,4.61-6.21,4.6a4.24,4.24,0,0,1-3.6-1.92,8.6,8.6,0,0,1-1.39-5.14A17.68,17.68,0,0,1,17.73,4.53ZM18.37,18c.33,1.19.93,1.78,1.8,1.78a2.83,2.83,0,0,0,2.22-1.29,16.41,16.41,0,0,0,2.06-4.93,35.53,35.53,0,0,0,1.06-4.83A28.26,28.26,0,0,0,25.9,4.6a5.86,5.86,0,0,0-.52-2.55A1.7,1.7,0,0,0,23.78,1Q21.2,1,19.45,7.53a33,33,0,0,0-1.33,8.26A8.15,8.15,0,0,0,18.37,18Zm11.08,1.48a2.34,2.34,0,0,0,1.3-.26,3,3,0,0,0,.85-1.85l3-15.85A3.54,3.54,0,0,0,32,2.56a8,8,0,0,0-1.82,3.16l-.53-.2.8-5H41.81l-.74,5.66-.54-.07c0-1.92-.41-3.24-1.13-3.94a2.6,2.6,0,0,0-1.74-.63L34.79,16.6l-.17,1a2.43,2.43,0,0,0,0,.33,2.26,2.26,0,0,0,0,.26c0,.5.11.82.33.95a3.94,3.94,0,0,0,1.39.3v.76H29.45Zm26.65.76H50.18v-.71a2.28,2.28,0,0,0,1.25-.41,1.64,1.64,0,0,0,.37-1.29c0-.22,0-.75-.11-1.58,0-.17-.08-.89-.2-2.15H47l-1.2,3c-.08.2-.15.42-.22.66a2.84,2.84,0,0,0-.09.69c0,.41.08.67.25.78a2.91,2.91,0,0,0,1.08.3v.71H42.79v-.71a2.44,2.44,0,0,0,.85-.53,5.59,5.59,0,0,0,.9-1.56L52.21.07h.53l2,16.88A5.46,5.46,0,0,0,55.2,19a1.36,1.36,0,0,0,.9.43Zm-4.76-7.31-.76-7.18-3,7.18Zm4.95,6.53a1.82,1.82,0,0,0,1-.5,3.56,3.56,0,0,0,.58-1.59L60.42,4.11c.06-.3.1-.6.15-.9a5.46,5.46,0,0,0,.06-.72c0-.52-.13-.86-.4-1a2.88,2.88,0,0,0-1.1-.23V.48h5.93a5,5,0,0,1,2.5.57c1.26.73,1.9,2.07,1.9,4a5.81,5.81,0,0,1-1.54,4.22,5.32,5.32,0,0,1-4,1.58l-.59,0-1.2-.11L61,16.6l-.17,1a2.72,2.72,0,0,0,0,.3,2.81,2.81,0,0,0,0,.29c0,.5.09.81.28.94a3.26,3.26,0,0,0,1.23.31v.76h-6Zm6-9.67.38.06H63a3,3,0,0,0,1.62-.36,2.87,2.87,0,0,0,1-1.18,7.28,7.28,0,0,0,.6-2,11.67,11.67,0,0,0,.22-2,4.4,4.4,0,0,0-.41-2,1.44,1.44,0,0,0-1.39-.79.71.71,0,0,0-.65.28,3.7,3.7,0,0,0-.32,1Zm5.61,9.69A1.86,1.86,0,0,0,69,18.94a3.54,3.54,0,0,0,.59-1.59L72.15,4.11q.09-.45.15-.9a5.73,5.73,0,0,0,.07-.72,1.1,1.1,0,0,0-.41-1,2.88,2.88,0,0,0-1.1-.23V.48h5.93a5,5,0,0,1,2.5.57c1.27.73,1.9,2.07,1.9,4a5.77,5.77,0,0,1-1.54,4.22,5.31,5.31,0,0,1-4,1.58l-.6,0-1.2-.11L72.74,16.6l-.17,1a2.72,2.72,0,0,0,0,.3c0,.1,0,.19,0,.29,0,.5.1.81.29.94a3.15,3.15,0,0,0,1.23.31v.76h-6.1Zm6.12-9.69.38.06h.33a3,3,0,0,0,1.62-.36,3,3,0,0,0,1-1.18,7.67,7.67,0,0,0,.59-2,11.67,11.67,0,0,0,.22-2,4.4,4.4,0,0,0-.41-2,1.43,1.43,0,0,0-1.38-.79.73.73,0,0,0-.66.28,3.7,3.7,0,0,0-.32,1Zm5.57,9.69a1.9,1.9,0,0,0,1.09-.52,3.56,3.56,0,0,0,.58-1.59L83.84,4.11c0-.27.09-.51.13-.71a7.08,7.08,0,0,0,.09-1c0-.47-.1-.77-.28-.9a3.53,3.53,0,0,0-1.22-.3V.48h5.68a6.57,6.57,0,0,1,3,.53q1.92,1,1.92,3.75a6.79,6.79,0,0,1-.32,2,5.23,5.23,0,0,1-1.08,1.9,4.56,4.56,0,0,1-1.25,1,11.62,11.62,0,0,1-1.33.52c.07.3.12.49.14.57l1.59,6.66a4.07,4.07,0,0,0,.69,1.7,1.72,1.72,0,0,0,1.13.41v.76H88.52l-2.23-9.76h-.58L84.49,16.6l-.17,1a1,1,0,0,0,0,.25,2.62,2.62,0,0,0,0,.28c0,.53.09.86.26,1a3.11,3.11,0,0,0,1.24.32v.76H79.63ZM87.55,9.3A2.59,2.59,0,0,0,89,8.17a7.24,7.24,0,0,0,.66-1.62A8.18,8.18,0,0,0,90,4.29a4.32,4.32,0,0,0-.43-2,1.5,1.5,0,0,0-1.45-.81.71.71,0,0,0-.62.26,2.78,2.78,0,0,0-.33,1.05L85.91,9.5A6.63,6.63,0,0,0,87.55,9.3Zm8.72-4.77Q99,0,102.32,0A4.37,4.37,0,0,1,106,1.92a8.46,8.46,0,0,1,1.44,5.19,17.58,17.58,0,0,1-2.54,9.07q-2.7,4.61-6.21,4.6a4.27,4.27,0,0,1-3.6-1.92,8.67,8.67,0,0,1-1.38-5.14A17.68,17.68,0,0,1,96.27,4.53ZM96.9,18c.33,1.19.93,1.78,1.8,1.78a2.83,2.83,0,0,0,2.22-1.29A16.63,16.63,0,0,0,103,13.54a37.1,37.1,0,0,0,1.06-4.83,29.49,29.49,0,0,0,.38-4.11,5.86,5.86,0,0,0-.51-2.55A1.71,1.71,0,0,0,102.31,1C100.6,1,99.15,3.17,98,7.53a33.42,33.42,0,0,0-1.33,8.26A8.57,8.57,0,0,0,96.9,18ZM114.35.48v.76a2.57,2.57,0,0,0-1.08.17,1.07,1.07,0,0,0-.5,1,2.53,2.53,0,0,0,0,.28,2.64,2.64,0,0,0,0,.28l1.07,11.76L117.77,6c.31-.71.59-1.41.84-2.11A5.25,5.25,0,0,0,119,2.19a.85.85,0,0,0-.38-.81,3.09,3.09,0,0,0-.95-.14V.48h4v.76a2.08,2.08,0,0,0-.73.45,5.35,5.35,0,0,0-.82,1.4l-7.79,17.69h-.66L110,5.74A22,22,0,0,0,109.46,2c-.16-.39-.58-.62-1.28-.71V.48Zm5.15,19a1.83,1.83,0,0,0,1.08-.52,3.42,3.42,0,0,0,.59-1.59l2.54-13.24c.06-.34.11-.64.15-.92a4.83,4.83,0,0,0,.06-.7c0-.5-.09-.81-.28-.94a3.14,3.14,0,0,0-1.22-.31V.48h11.12l-.87,5.6L132.11,6a7,7,0,0,0-.49-3c-.52-1-1.59-1.51-3.19-1.51-.55,0-.9.09-1.06.28A2.44,2.44,0,0,0,127,2.74L125.76,9.3a6.21,6.21,0,0,0,2.81-.51A6,6,0,0,0,130,6.18l.58.1L129,14.35l-.56-.14c0-.28,0-.52,0-.73s0-.37,0-.51a2.92,2.92,0,0,0-.61-2.15,3.55,3.55,0,0,0-2.37-.57l-1.36,7.2a4.79,4.79,0,0,0-.07.51,3.28,3.28,0,0,0,0,.39,1,1,0,0,0,.22.66,1.24,1.24,0,0,0,.93.26,6.43,6.43,0,0,0,3.21-.75,7.67,7.67,0,0,0,3.21-4.17l.5.13-1.22,5.74H119.5Zm12.79,0a1.87,1.87,0,0,0,1-.41,3.23,3.23,0,0,0,.71-1.71L136.5,4.11c.07-.38.13-.69.17-1a5.89,5.89,0,0,0,.05-.67c0-.5-.1-.81-.29-.94a3.32,3.32,0,0,0-1.22-.31V.48h6a5.35,5.35,0,0,1,4.63,2.22,10.11,10.11,0,0,1,1.58,6,13.3,13.3,0,0,1-2.34,7.84,8,8,0,0,1-6.86,3.7h-5.93ZM143.87,3.39a2.84,2.84,0,0,0-2.79-2,1.08,1.08,0,0,0-.91.31,1.93,1.93,0,0,0-.34.83L137,17.44a3.1,3.1,0,0,0-.06.39c0,.11,0,.21,0,.3a1.22,1.22,0,0,0,.24.84,1.26,1.26,0,0,0,.9.26q3.67,0,5.33-5.42a23.91,23.91,0,0,0,1-6.94A9.45,9.45,0,0,0,143.87,3.39Z",opacity:1,strokeColor:"",fillColor:"#8a251a",width:127.70402,height:55.84601,stampFillColor:"#f6dedd",stampStrokeColor:""}}if(t)return t.modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),this.currentStampAnnotation=t,t}},e.prototype.retrievestampAnnotation=function(e){if(e){var t=void 0;switch(e.trim()){case"Approved":t={iconName:"Approved",pathdata:"M19,20.22H10.55v-.71a4.26,4.26,0,0,0,1.79-.41,1.37,1.37,0,0,0,.53-1.29c0-.22,0-.75-.16-1.58,0-.17-.11-.89-.29-2.15H6.06l-1.72,3a4,4,0,0,0-.31.66,2,2,0,0,0-.14.69c0,.41.12.67.37.78a5.42,5.42,0,0,0,1.53.3v.71H0v-.71A4,4,0,0,0,1.21,19a5.68,5.68,0,0,0,1.28-1.56L13.45.07h.76L17,17a4.35,4.35,0,0,0,.7,2.08,2.4,2.4,0,0,0,1.31.44Zm-6.83-7.31L11.13,5.73,6.76,12.91Zm7.18,6.52a3,3,0,0,0,1.33-.49,3,3,0,0,0,.84-1.59L25.19,4.11c.07-.3.14-.6.2-.9a3.14,3.14,0,0,0,.1-.72,1,1,0,0,0-.58-1,5.68,5.68,0,0,0-1.57-.23V.48h8.47a9.68,9.68,0,0,1,3.57.57,4,4,0,0,1,2.71,4,4.93,4.93,0,0,1-2.2,4.22,9.53,9.53,0,0,1-5.69,1.58l-.85,0-1.71-.11L26,16.6l-.25,1a1,1,0,0,0-.05.3,2.83,2.83,0,0,0,0,.29c0,.5.14.81.4.94a6.31,6.31,0,0,0,1.76.31v.76H19.39Zm8.52-9.66.54.06h.48a5.81,5.81,0,0,0,2.3-.36,3.47,3.47,0,0,0,1.4-1.18,6.24,6.24,0,0,0,.86-2,8.94,8.94,0,0,0,.3-2,3.29,3.29,0,0,0-.58-2,2.3,2.3,0,0,0-2-.79,1.23,1.23,0,0,0-.93.28,2.71,2.71,0,0,0-.46,1Zm8,9.69a3.19,3.19,0,0,0,1.55-.52,3,3,0,0,0,.84-1.59L42,4.11c.07-.3.14-.6.2-.9a3.14,3.14,0,0,0,.1-.72,1,1,0,0,0-.58-1,5.68,5.68,0,0,0-1.57-.23V.48h8.47a9.68,9.68,0,0,1,3.57.57,4,4,0,0,1,2.71,4,4.93,4.93,0,0,1-2.2,4.22A9.53,9.53,0,0,1,47,10.87l-.85,0-1.71-.11L42.79,16.6l-.25,1a1.45,1.45,0,0,0,0,.3,2.83,2.83,0,0,0,0,.29c0,.5.14.81.4.94a6.31,6.31,0,0,0,1.76.31v.76h-8.7Zm8.74-9.69.54.06h.48A5.81,5.81,0,0,0,48,9.48a3.41,3.41,0,0,0,1.4-1.18,6.24,6.24,0,0,0,.86-2,9,9,0,0,0,.31-2,3.29,3.29,0,0,0-.59-2,2.3,2.3,0,0,0-2-.79,1.23,1.23,0,0,0-.93.28,2.88,2.88,0,0,0-.46,1Zm7.95,9.69a3.27,3.27,0,0,0,1.56-.52A3.06,3.06,0,0,0,55,17.35L58.64,4.11l.18-.71a4.72,4.72,0,0,0,.13-1c0-.47-.13-.77-.4-.9a6.74,6.74,0,0,0-1.74-.3V.48h8.11A13,13,0,0,1,69.14,1a3.7,3.7,0,0,1,2.74,3.75,4.8,4.8,0,0,1-.46,2,5,5,0,0,1-1.54,1.9,6.55,6.55,0,0,1-1.79,1,19.35,19.35,0,0,1-1.89.52c.1.3.16.49.2.57l2.27,6.66a3.49,3.49,0,0,0,1,1.7,3.08,3.08,0,0,0,1.6.41v.76H65.33l-3.19-9.76h-.83L59.57,16.6l-.25,1a1.87,1.87,0,0,0,0,.25,2.64,2.64,0,0,0,0,.28q0,.8.39,1a5.88,5.88,0,0,0,1.76.32v.76H52.62ZM63.94,9.3a3.79,3.79,0,0,0,2.11-1.13A6,6,0,0,0,67,6.55a5.84,5.84,0,0,0,.44-2.26,3.31,3.31,0,0,0-.61-2,2.47,2.47,0,0,0-2.09-.81,1.25,1.25,0,0,0-.88.26,2.34,2.34,0,0,0-.47,1.05L61.59,9.5A13.42,13.42,0,0,0,63.94,9.3ZM76.39,4.53Q80.26,0,85,0a7.34,7.34,0,0,1,5.23,1.92,6.76,6.76,0,0,1,2,5.19,13.9,13.9,0,0,1-3.62,9.07q-3.86,4.61-8.88,4.6a7.06,7.06,0,0,1-5.13-1.92,6.86,6.86,0,0,1-2-5.14A14,14,0,0,1,76.39,4.53ZM77.3,18a2.56,2.56,0,0,0,2.57,1.78A4.62,4.62,0,0,0,83,18.47,14.42,14.42,0,0,0,86,13.54a27.18,27.18,0,0,0,1.52-4.83,20.67,20.67,0,0,0,.54-4.11,4.38,4.38,0,0,0-.73-2.55A2.62,2.62,0,0,0,85,1q-3.68,0-6.19,6.54a24.29,24.29,0,0,0-1.9,8.26A5.91,5.91,0,0,0,77.3,18ZM102.23.48v.76a5.19,5.19,0,0,0-1.55.17,1,1,0,0,0-.72,1,2.46,2.46,0,0,0,0,.28L100,3l1.52,11.76L107.11,6c.44-.71.84-1.41,1.2-2.11a4.06,4.06,0,0,0,.53-1.66.79.79,0,0,0-.55-.81,6.11,6.11,0,0,0-1.35-.14V.48h5.67v.76a3.31,3.31,0,0,0-1,.45,5.33,5.33,0,0,0-1.18,1.4L99.26,20.78h-.94l-2.25-15A15.49,15.49,0,0,0,95.24,2c-.22-.39-.84-.62-1.83-.71V.48Zm7.35,19a3.19,3.19,0,0,0,1.55-.52,3,3,0,0,0,.84-1.59l3.62-13.24c.09-.34.16-.64.22-.92a3.27,3.27,0,0,0,.09-.7c0-.5-.14-.81-.4-.94a6.13,6.13,0,0,0-1.75-.31V.48h15.89l-1.25,5.6L127.6,6a5.32,5.32,0,0,0-.7-3q-1.12-1.52-4.56-1.51a2.61,2.61,0,0,0-1.51.28,2.12,2.12,0,0,0-.56,1.06L118.52,9.3a12.1,12.1,0,0,0,4-.51,5.8,5.8,0,0,0,2-2.61l.82.1-2.19,8.07-.81-.14c0-.28.07-.52.08-.73s0-.37,0-.51a2.4,2.4,0,0,0-.87-2.15,6.76,6.76,0,0,0-3.38-.57l-1.94,7.2a3.34,3.34,0,0,0-.11.51,3.67,3.67,0,0,0,0,.39.81.81,0,0,0,.32.66,2.3,2.3,0,0,0,1.33.26,12.39,12.39,0,0,0,4.57-.75A8.84,8.84,0,0,0,127,14.35l.72.13-1.74,5.74H109.58Zm18.27,0a3.27,3.27,0,0,0,1.37-.41,2.85,2.85,0,0,0,1-1.71l3.63-13.23c.1-.38.18-.69.23-1a3,3,0,0,0,.09-.67c0-.5-.15-.81-.42-.94A6.38,6.38,0,0,0,132,1.24V.48h8.57c2.9,0,5.1.74,6.62,2.22a8,8,0,0,1,2.26,6,10.72,10.72,0,0,1-3.35,7.84,13.3,13.3,0,0,1-9.8,3.7h-8.47ZM144.4,3.39a4.23,4.23,0,0,0-4-2,2,2,0,0,0-1.29.31,1.74,1.74,0,0,0-.48.83l-4.07,14.9a3.24,3.24,0,0,0-.07.39,1.69,1.69,0,0,0,0,.3,1,1,0,0,0,.36.84,2.27,2.27,0,0,0,1.27.26q5.26,0,7.62-5.42a17.25,17.25,0,0,0,1.43-6.94A7,7,0,0,0,144.4,3.39Z",opacity:1,strokeColor:"",fillColor:"#516c30",width:149.474,height:20.783,stampFillColor:"#e6eddf",stampStrokeColor:""};break;case"Confidential":t={iconName:"Confidential",pathdata:"M13.71,0,12.63,6.9,12,6.73c0-.41,0-.66,0-.73s0-.18,0-.32a6.16,6.16,0,0,0-.79-3.47,2.37,2.37,0,0,0-2-1.14c-1.64,0-3.07,1.51-4.29,4.55a22,22,0,0,0-1.64,8.29c0,2,.34,3.44,1,4.2A3,3,0,0,0,6.5,19.24a4.08,4.08,0,0,0,2.93-1.43,10.47,10.47,0,0,0,1.5-2.09l.64.65A8.84,8.84,0,0,1,9,19.72a5.24,5.24,0,0,1-3.08,1.09,5.16,5.16,0,0,1-4.21-2.08A8.68,8.68,0,0,1,0,13.16,16.5,16.5,0,0,1,2.55,3.92Q5.1,0,8.61,0a6.35,6.35,0,0,1,2.25.43,6.62,6.62,0,0,0,1.38.43.55.55,0,0,0,.5-.23A2.61,2.61,0,0,0,13.06,0ZM27.49,7.11a17.19,17.19,0,0,1-2.61,9.07q-2.77,4.61-6.39,4.6a4.42,4.42,0,0,1-3.7-1.92,8.47,8.47,0,0,1-1.43-5.14A17.31,17.31,0,0,1,16,4.53C17.88,1.51,20,0,22.25,0A4.53,4.53,0,0,1,26,1.92,8.27,8.27,0,0,1,27.49,7.11ZM24.42,4.6a5.71,5.71,0,0,0-.53-2.55A1.76,1.76,0,0,0,22.24,1q-2.65,0-4.45,6.54a31.93,31.93,0,0,0-1.37,8.26A8.15,8.15,0,0,0,16.67,18c.34,1.19,1,1.78,1.85,1.78a2.9,2.9,0,0,0,2.28-1.29,15.85,15.85,0,0,0,2.13-4.93A34.08,34.08,0,0,0,24,8.71,28.5,28.5,0,0,0,24.42,4.6ZM42.75,1.3l.3-.06V.48H38.69v.76a2.55,2.55,0,0,1,1.16.33,1.8,1.8,0,0,1,.51,1.48,10.11,10.11,0,0,1-.13,1.34c-.06.41-.14.87-.24,1.39l-1.65,8.34L33.73.48H29.45v.76a2.66,2.66,0,0,1,1,.24,1.88,1.88,0,0,1,.65,1.06l.09.3L28.81,15a20.72,20.72,0,0,1-1,3.61,1.61,1.61,0,0,1-1.19.9v.76h4.42v-.76a2.55,2.55,0,0,1-1.13-.32,1.67,1.67,0,0,1-.56-1.44,7.13,7.13,0,0,1,.05-.79c.06-.43.17-1.09.34-2L31.89,4.38l5.52,16.33h.52l3-15a22.58,22.58,0,0,1,.87-3.42A1.42,1.42,0,0,1,42.75,1.3ZM55.53.48H44.23v.76a3.63,3.63,0,0,1,1.26.3c.19.13.29.42.29.9a7.08,7.08,0,0,1-.09,1c0,.2-.08.44-.13.71L43,17.34a3.47,3.47,0,0,1-.59,1.58,1.91,1.91,0,0,1-1.13.54v.76h6.29v-.76a2.13,2.13,0,0,1-1-.19A1.23,1.23,0,0,1,46,18.1c0-.1,0-.21,0-.31s0-.23.05-.35l1.4-7.21a3.15,3.15,0,0,1,2.37.64A3.21,3.21,0,0,1,50.38,13c0,.11,0,.28,0,.49s0,.46-.06.75l.58.14,1.58-8.07-.59-.1a5.79,5.79,0,0,1-1.43,2.59,6.17,6.17,0,0,1-2.77.52l1.26-6.54a2.06,2.06,0,0,1,.42-1.08,1.39,1.39,0,0,1,1-.26c1.62,0,2.7.51,3.24,1.54a7.11,7.11,0,0,1,.49,3l.57.13Zm3.69,17.71c0-.08,0-.17,0-.27s0-.2,0-.3l.17-1L62.06,3.36a3.44,3.44,0,0,1,.59-1.6,2,2,0,0,1,1.12-.52V.48H57.44v.76a3.47,3.47,0,0,1,1.26.31c.2.13.3.44.3.94a4.25,4.25,0,0,1-.06.67c0,.26-.09.57-.17,1L56.16,17.35a3.52,3.52,0,0,1-.6,1.59,2,2,0,0,1-1.12.52v.76h6.33v-.76a3.3,3.3,0,0,1-1.26-.32C59.32,19,59.22,18.69,59.22,18.19Zm18-9.51a13,13,0,0,1-2.42,7.84,8.31,8.31,0,0,1-7,3.7H61.6v-.76a2,2,0,0,0,1-.41,3.14,3.14,0,0,0,.73-1.71L65.93,4.11c.08-.38.13-.69.17-1a4.36,4.36,0,0,0,.06-.67c0-.5-.1-.81-.3-.94a3.47,3.47,0,0,0-1.26-.31V.48h6.17A5.52,5.52,0,0,1,75.53,2.7,9.91,9.91,0,0,1,77.17,8.68ZM74,6.87a9.22,9.22,0,0,0-.53-3.48,2.91,2.91,0,0,0-2.87-2,1.12,1.12,0,0,0-.93.31,1.81,1.81,0,0,0-.35.83l-2.93,14.9a3,3,0,0,0-.05.39c0,.11,0,.21,0,.3a1.17,1.17,0,0,0,.25.84,1.3,1.3,0,0,0,.92.26q3.8,0,5.49-5.42A23.26,23.26,0,0,0,74,6.87Zm11.3,11.65a6.72,6.72,0,0,1-3.29.75,1.3,1.3,0,0,1-1-.26,1,1,0,0,1-.23-.66,3.28,3.28,0,0,1,0-.39,4.88,4.88,0,0,1,.08-.51l1.4-7.2a3.73,3.73,0,0,1,2.43.57A2.87,2.87,0,0,1,85.43,13c0,.14,0,.31,0,.51s0,.45-.06.73l.59.14,1.57-8.07-.59-.1a5.79,5.79,0,0,1-1.46,2.61,6.5,6.5,0,0,1-2.89.51l1.26-6.56a2.41,2.41,0,0,1,.41-1.06c.16-.19.52-.28,1.08-.28,1.65,0,2.75.5,3.29,1.51a7,7,0,0,1,.5,3l.57.13.9-5.6H79.14v.76a3.35,3.35,0,0,1,1.26.31c.19.13.29.44.29.94a5,5,0,0,1-.07.7c0,.28-.09.58-.15.92L77.86,17.35a3.52,3.52,0,0,1-.6,1.59,2,2,0,0,1-1.13.52v.76H87.91l1.25-5.74-.52-.13A7.69,7.69,0,0,1,85.34,18.52ZM105.8,1.24V.48h-4.37v.76a2.55,2.55,0,0,1,1.16.33,1.77,1.77,0,0,1,.52,1.48A10.58,10.58,0,0,1,103,4.39c-.06.41-.13.87-.23,1.39l-1.66,8.34L96.47.48H92.19v.76a2.61,2.61,0,0,1,1,.24,1.83,1.83,0,0,1,.65,1.06l.1.3L91.55,15a19,19,0,0,1-1,3.61,1.61,1.61,0,0,1-1.19.9v.76h4.42v-.76a2.59,2.59,0,0,1-1.13-.32,1.67,1.67,0,0,1-.56-1.44,7.13,7.13,0,0,1,0-.79c.06-.43.17-1.09.35-2L94.63,4.38l5.52,16.33h.53l2.95-15a22.93,22.93,0,0,1,.86-3.42,1.42,1.42,0,0,1,1-1Zm11.4,4.9L118,.48H106.28l-.82,5,.55.2a8,8,0,0,1,1.87-3.16,3.7,3.7,0,0,1,2.7-1.06l-3.12,15.85a2.94,2.94,0,0,1-.87,1.85,2.48,2.48,0,0,1-1.34.26v.76h7v-.76a4.24,4.24,0,0,1-1.43-.3c-.23-.13-.34-.45-.34-.95a2.26,2.26,0,0,1,0-.26c0-.09,0-.2,0-.33l.18-1,3-15.1a2.73,2.73,0,0,1,1.79.63c.75.7,1.13,2,1.17,3.94Zm3.57,12.05c0-.08,0-.17,0-.27s0-.2,0-.3l.17-1,2.62-13.24a3.44,3.44,0,0,1,.59-1.6,2,2,0,0,1,1.12-.52V.48H119v.76a3.47,3.47,0,0,1,1.26.31c.2.13.3.44.3.94a4.25,4.25,0,0,1-.06.67c0,.26-.09.57-.17,1l-2.61,13.24a3.52,3.52,0,0,1-.6,1.59,2,2,0,0,1-1.12.52v.76h6.33v-.76a3.36,3.36,0,0,1-1.26-.32C120.87,19,120.77,18.69,120.77,18.19Zm28.86-3.71-1.24,5.74H130.3v-.71a2.48,2.48,0,0,0,1.3-.41,1.64,1.64,0,0,0,.37-1.29c0-.22,0-.75-.11-1.58,0-.17-.08-.89-.21-2.15h-4.58l-1.24,3a5.1,5.1,0,0,0-.22.66,2.45,2.45,0,0,0-.1.69c0,.41.09.67.26.78a3.05,3.05,0,0,0,1.11.3v.71h-4.17v-.71a2.66,2.66,0,0,0,.87-.53,5.79,5.79,0,0,0,.92-1.56L132.39.07h.55L135,17a5.53,5.53,0,0,0,.5,2.08,1.67,1.67,0,0,0,1.14.46v0a1.93,1.93,0,0,0,1.12-.52,3.52,3.52,0,0,0,.6-1.6l2.61-13.23c.08-.38.13-.69.17-1a4.36,4.36,0,0,0,.06-.67c0-.5-.1-.81-.3-.94a3.47,3.47,0,0,0-1.26-.31V.48h6.73v.76a3.23,3.23,0,0,0-1.49.48,3.06,3.06,0,0,0-.64,1.64l-2.77,14.08c0,.16-.05.3-.07.44s0,.29,0,.47a.79.79,0,0,0,.31.71,1.55,1.55,0,0,0,.87.21,6.83,6.83,0,0,0,3.79-1,8.42,8.42,0,0,0,2.81-3.88ZM131.5,12.91l-.78-7.18-3.14,7.18Z",opacity:1,strokeColor:"",fillColor:"#192760",width:149.633,height:20.811,stampFillColor:"#dce3ef",stampStrokeColor:""};break;case"Witness":t={iconName:"Witness",pathdata:"M19.63,2.67,12.77,16.84h-.69L10.63,5.17,5.05,16.84H4.36L2.5,2.92A3.13,3.13,0,0,0,2,1.35,2.38,2.38,0,0,0,.63.91V.33H7.3V1a2.27,2.27,0,0,0-.92.17A1.11,1.11,0,0,0,5.84,2.2v.16c0,.05,0,.13,0,.22L6.81,11l3.57-7.48a.79.79,0,0,0,0-.23,2.78,2.78,0,0,0-.53-2A2.23,2.23,0,0,0,8.68.91V.33h6.45V.91A2.42,2.42,0,0,0,14,1.2c-.23.16-.34.5-.34,1,0,.11,0,.26,0,.46s.07.73.12,1.21l.8,7L18.3,3.11c.09-.19.17-.4.25-.62a2.11,2.11,0,0,0,.11-.65.73.73,0,0,0-.4-.76,2.73,2.73,0,0,0-1.1-.17V.33h4.47V.91a1.92,1.92,0,0,0-.91.3A3.66,3.66,0,0,0,19.63,2.67ZM29.76.33H22.62V1A5.07,5.07,0,0,1,24,1.2c.23.11.34.36.34.77a2.86,2.86,0,0,1-.06.54c0,.21-.11.47-.19.77L21.17,14.05a2.47,2.47,0,0,1-.68,1.29,2.62,2.62,0,0,1-1.27.42v.62h7.15v-.62A5.09,5.09,0,0,1,25,15.51c-.22-.11-.33-.37-.33-.77a2,2,0,0,1,0-.23c0-.08,0-.16,0-.24l.19-.83,3-10.77a2.5,2.5,0,0,1,.66-1.3A2.76,2.76,0,0,1,29.76,1ZM41.9,4.88l.63,0,.86-4.6H30.2l-.93,4.1.62.16A6.6,6.6,0,0,1,32,2a5.22,5.22,0,0,1,3.06-.86L31.53,14.05a2.24,2.24,0,0,1-1,1.5,3.67,3.67,0,0,1-1.51.21v.62H37v-.62a6,6,0,0,1-1.62-.24c-.26-.1-.39-.36-.39-.77,0-.07,0-.14,0-.21s0-.16.05-.27l.2-.83L38.57,1.16a3.76,3.76,0,0,1,2,.52A3.69,3.69,0,0,1,41.9,4.88ZM59.24,1,59.58,1V.33H54.65V1A3.78,3.78,0,0,1,56,1.22a1.25,1.25,0,0,1,.58,1.2,6.26,6.26,0,0,1-.15,1.09c-.07.33-.16.71-.27,1.13l-1.87,6.79L49.05.33H44.21V1a3.51,3.51,0,0,1,1.13.2,1.51,1.51,0,0,1,.74.85l.1.25L43.49,12.1A13.5,13.5,0,0,1,42.4,15a1.87,1.87,0,0,1-1.35.72v.62h5v-.62a3.62,3.62,0,0,1-1.28-.26,1.19,1.19,0,0,1-.64-1.17,3.55,3.55,0,0,1,.06-.64q.11-.53.39-1.59L47,3.5,53.2,16.78h.59L57.13,4.6a15.29,15.29,0,0,1,1-2.78A1.51,1.51,0,0,1,59.24,1Zm7.26.31a2.11,2.11,0,0,1,1.23-.23c1.87,0,3.1.41,3.71,1.23A4.39,4.39,0,0,1,72,4.78l.64.11,1-4.56H60.75V1a5,5,0,0,1,1.42.25c.22.11.32.36.32.77a2.73,2.73,0,0,1-.07.57c0,.22-.1.47-.17.74l-3,10.77a2.47,2.47,0,0,1-.68,1.29,2.62,2.62,0,0,1-1.27.42v.62h13.3l1.42-4.66-.59-.11A7.1,7.1,0,0,1,67.75,15a10,10,0,0,1-3.72.61A1.86,1.86,0,0,1,63,15.4a.67.67,0,0,1-.26-.54,2.36,2.36,0,0,1,0-.32,3.38,3.38,0,0,1,.09-.41l1.58-5.86a5.48,5.48,0,0,1,2.75.47,2,2,0,0,1,.71,1.75c0,.11,0,.25,0,.41s0,.37-.06.6l.65.11L70.2,5.05,69.54,5a4.69,4.69,0,0,1-1.65,2.12,10.06,10.06,0,0,1-3.26.41l1.42-5.33A1.75,1.75,0,0,1,66.5,1.31ZM80.88.83a2.77,2.77,0,0,1,2.46,1.26A4.36,4.36,0,0,1,84,4l.08.78.62.08,1-4.8H85a1.77,1.77,0,0,1-.38.43A1,1,0,0,1,84,.67a2.76,2.76,0,0,1-.37,0l-.41-.1-.61-.2a4.78,4.78,0,0,0-.79-.2A6.71,6.71,0,0,0,80.46,0a4.76,4.76,0,0,0-3.62,1.36,4.61,4.61,0,0,0-1.29,3.29q0,2.05,2.94,4.47t2.94,3.82a3.19,3.19,0,0,1-.79,2.14,2.8,2.8,0,0,1-2.23.92,3.43,3.43,0,0,1-1.5-.33,3.82,3.82,0,0,1-2-2.5,10.33,10.33,0,0,1-.2-1.67L74,11.45l-.87,5.38h.73a2.85,2.85,0,0,1,.38-.67A.75.75,0,0,1,74.8,16a1.12,1.12,0,0,1,.27,0l.42.15.61.22a8.62,8.62,0,0,0,1.3.35,7.53,7.53,0,0,0,1.32.12,5.48,5.48,0,0,0,4.11-1.53,4.77,4.77,0,0,0,1.49-3.43,4.59,4.59,0,0,0-.77-2.63,9.31,9.31,0,0,0-1.87-2L79.61,5.5a4.31,4.31,0,0,1-.74-.77,2.55,2.55,0,0,1-.43-1.45,2.68,2.68,0,0,1,.42-1.44A2.23,2.23,0,0,1,80.88.83Zm12.31,0a2.8,2.8,0,0,1,2.47,1.26A4.49,4.49,0,0,1,96.35,4l.08.78.62.08,1-4.8h-.71a1.62,1.62,0,0,1-.39.43,1,1,0,0,1-.64.18,2.9,2.9,0,0,1-.38,0l-.41-.1-.61-.2a4.65,4.65,0,0,0-.78-.2A6.88,6.88,0,0,0,92.77,0a4.73,4.73,0,0,0-3.61,1.36,4.57,4.57,0,0,0-1.3,3.29q0,2.05,2.94,4.47c2,1.54,3,2.81,3,3.82a3.2,3.2,0,0,1-.8,2.14,2.78,2.78,0,0,1-2.23.92,3.36,3.36,0,0,1-1.49-.33A3.68,3.68,0,0,1,88,14.73a3.76,3.76,0,0,1-.81-1.56A10.6,10.6,0,0,1,87,11.5l-.7-.05-.86,5.38h.72a2.85,2.85,0,0,1,.38-.67.78.78,0,0,1,.57-.19,1.12,1.12,0,0,1,.27,0l.42.15.61.22a8.74,8.74,0,0,0,1.31.35,7.37,7.37,0,0,0,1.32.12,5.49,5.49,0,0,0,4.11-1.53,4.81,4.81,0,0,0,1.49-3.43,4.67,4.67,0,0,0-.77-2.63A9.57,9.57,0,0,0,94,7.2L91.93,5.5a4,4,0,0,1-.74-.77,2.48,2.48,0,0,1-.43-1.45,2.68,2.68,0,0,1,.42-1.44A2.2,2.2,0,0,1,93.19.83Z",opacity:1,strokeColor:"",fillColor:"#192760",width:97.39,height:16.84,stampFillColor:"#dce3ef",stampStrokeColor:""};break;case"InitialHere":case"Initial Here":t={iconName:"Initial Here",pathdata:"M6.36,15.51a5.09,5.09,0,0,0,1.42.25v.62H.63v-.62a2.62,2.62,0,0,0,1.27-.42,2.47,2.47,0,0,0,.68-1.29l3-10.77c.08-.3.15-.56.19-.77A2.86,2.86,0,0,0,5.78,2c0-.41-.11-.66-.34-.77A5.07,5.07,0,0,0,4,1V.33h7.14V1a2.76,2.76,0,0,0-1.27.42,2.5,2.5,0,0,0-.66,1.3l-3,10.77-.19.83c0,.08,0,.16,0,.24a2,2,0,0,0,0,.23C6,15.14,6.14,15.4,6.36,15.51ZM27,1,27.36,1V.33H22.43V1a3.78,3.78,0,0,1,1.31.27,1.25,1.25,0,0,1,.58,1.2,6.26,6.26,0,0,1-.15,1.09c-.07.33-.16.71-.27,1.13L22,11.43,16.83.33H12V1a3.49,3.49,0,0,1,1.12.2,1.51,1.51,0,0,1,.74.85l.11.25-2.7,9.85A13,13,0,0,1,10.18,15a1.85,1.85,0,0,1-1.35.72v.62h5v-.62a3.62,3.62,0,0,1-1.28-.26,1.19,1.19,0,0,1-.63-1.17,4.72,4.72,0,0,1,.05-.64q.1-.53.39-1.59l2.39-8.6L21,16.78h.6L24.91,4.6a15.29,15.29,0,0,1,1-2.78A1.51,1.51,0,0,1,27,1ZM35.78.33H28.64V1a5.16,5.16,0,0,1,1.41.25c.23.11.34.36.34.77a2.86,2.86,0,0,1-.06.54c0,.21-.11.47-.19.77L27.19,14.05a2.47,2.47,0,0,1-.68,1.29,2.66,2.66,0,0,1-1.27.42v.62h7.15v-.62A5.09,5.09,0,0,1,31,15.51c-.22-.11-.33-.37-.33-.77a2,2,0,0,1,0-.23,2,2,0,0,1,0-.24l.19-.83,3-10.77a2.5,2.5,0,0,1,.66-1.3A2.76,2.76,0,0,1,35.78,1Zm12.76,4.6.87-4.6H36.22l-.93,4.1.62.16A6.52,6.52,0,0,1,38,2a5.21,5.21,0,0,1,3-.86L37.55,14.05a2.24,2.24,0,0,1-1,1.5,3.7,3.7,0,0,1-1.51.21v.62H43v-.62a5.79,5.79,0,0,1-1.61-.24c-.26-.1-.39-.36-.39-.77a1.48,1.48,0,0,1,0-.21,2,2,0,0,1,0-.27l.2-.83L44.58,1.16a3.77,3.77,0,0,1,2,.52,3.74,3.74,0,0,1,1.31,3.2Zm4,9.81a.93.93,0,0,1,0-.23,2,2,0,0,1,0-.24l.18-.83,3-10.77a2.42,2.42,0,0,1,.67-1.3A2.72,2.72,0,0,1,57.72,1V.33H50.57V1A5.26,5.26,0,0,1,52,1.2c.23.11.34.36.34.77a2.28,2.28,0,0,1-.07.54,7.71,7.71,0,0,1-.19.77l-3,10.77a2.4,2.4,0,0,1-.68,1.29,2.58,2.58,0,0,1-1.26.42v.62h7.14v-.62a5.07,5.07,0,0,1-1.41-.25C52.69,15.4,52.58,15.14,52.58,14.74Zm32-3.13.57.11-1.4,4.66H63.34v-.57a3.65,3.65,0,0,0,1.46-.34c.29-.16.43-.51.43-1,0-.18,0-.61-.13-1.29,0-.14-.09-.73-.23-1.75H59.69l-1.4,2.44a3.38,3.38,0,0,0-.25.54,1.64,1.64,0,0,0-.11.56q0,.5.3.63a4.41,4.41,0,0,0,1.25.25v.57H54.76v-.57a3.36,3.36,0,0,0,1-.43,4.58,4.58,0,0,0,1-1.27L65.7,0h.62l2.3,13.72a3.49,3.49,0,0,0,.56,1.7,2.34,2.34,0,0,0,1.29.37v0a2.58,2.58,0,0,0,1.26-.42,2.46,2.46,0,0,0,.68-1.3L75.35,3.28c.09-.3.16-.56.2-.77A2.86,2.86,0,0,0,75.61,2c0-.41-.11-.66-.34-.77A5.17,5.17,0,0,0,73.85,1V.33h7.61V1a4.77,4.77,0,0,0-1.69.39A2.27,2.27,0,0,0,79,2.67L75.92,14.12c0,.13,0,.25-.07.36a2.21,2.21,0,0,0,0,.39.59.59,0,0,0,.35.57,2.33,2.33,0,0,0,1,.17,10.06,10.06,0,0,0,4.28-.84A7.67,7.67,0,0,0,84.6,11.61ZM64.7,10.44,63.81,4.6l-3.55,5.84Zm38,4.32a.71.71,0,0,1,0-.16s0-.16.07-.34l.2-.83L106,2.67a2.43,2.43,0,0,1,.79-1.39A2.78,2.78,0,0,1,107.9,1V.33h-7.15V1a4.45,4.45,0,0,1,1.27.19.81.81,0,0,1,.47.83,2.73,2.73,0,0,1-.07.57c0,.22-.1.47-.17.74l-1.14,4.16h-5.7L96.7,2.67a2.27,2.27,0,0,1,.73-1.33A4.77,4.77,0,0,1,99.12,1V.33H91.51V1a5.09,5.09,0,0,1,1.42.25c.22.11.33.36.33.77a2.93,2.93,0,0,1-.08.58c-.05.24-.1.48-.17.73L90.07,14a2.73,2.73,0,0,1-.65,1.29,2.47,2.47,0,0,1-1.3.43v.62h7.15v-.62a5.13,5.13,0,0,1-1.42-.24c-.21-.1-.31-.34-.31-.72a3.11,3.11,0,0,1,0-.57c0-.16.1-.43.19-.8L95.12,8.5h5.7L99.31,14a2.21,2.21,0,0,1-.74,1.33,4.36,4.36,0,0,1-1.69.39v.62h7.63v-.62a4.72,4.72,0,0,1-1.25-.17A.8.8,0,0,1,102.73,14.76Zm13.38.24a10.07,10.07,0,0,1-3.72.61,1.86,1.86,0,0,1-1.08-.21.67.67,0,0,1-.26-.54,2.36,2.36,0,0,1,0-.32,3.38,3.38,0,0,1,.09-.41l1.58-5.86a5.51,5.51,0,0,1,2.75.47,2,2,0,0,1,.7,1.75c0,.11,0,.25,0,.41s0,.37-.07.6l.66.11,1.78-6.56L117.89,5a4.63,4.63,0,0,1-1.65,2.12A10,10,0,0,1,113,7.5l1.43-5.33a1.6,1.6,0,0,1,.45-.86,2.07,2.07,0,0,1,1.23-.23c1.86,0,3.1.41,3.71,1.23a4.32,4.32,0,0,1,.56,2.47l.65.11,1-4.56H109.1V1a5.1,5.1,0,0,1,1.43.25c.21.11.32.36.32.77a3.63,3.63,0,0,1-.07.57c0,.22-.11.47-.18.74l-2.95,10.77a2.4,2.4,0,0,1-.68,1.29,2.58,2.58,0,0,1-1.26.42v.62H119l1.42-4.66-.58-.11A7.17,7.17,0,0,1,116.11,15ZM144.36,2.17,142.93,7.5a10.13,10.13,0,0,0,3.27-.41A4.69,4.69,0,0,0,147.84,5l.67.08-1.78,6.56-.66-.11c0-.23.06-.43.07-.6s0-.3,0-.41a2,2,0,0,0-.7-1.75,5.51,5.51,0,0,0-2.75-.47l-1.58,5.86a3.38,3.38,0,0,0-.09.41,2.36,2.36,0,0,0,0,.32.67.67,0,0,0,.26.54,1.86,1.86,0,0,0,1.08.21,10.07,10.07,0,0,0,3.72-.61,7.14,7.14,0,0,0,3.73-3.39l.58.11L149,16.38H131l-2.59-7.93h-.68l-1.42,5-.2.83,0,.2a1.77,1.77,0,0,0,0,.23c0,.43.1.7.31.81a4.87,4.87,0,0,0,1.43.25v.62h-7.14v-.62a2.58,2.58,0,0,0,1.26-.42,2.4,2.4,0,0,0,.68-1.29l3-10.77.15-.57a4.09,4.09,0,0,0,.1-.79c0-.38-.11-.62-.32-.72A4.8,4.8,0,0,0,124,1V.33h6.6a10.58,10.58,0,0,1,3.42.43,3,3,0,0,1,2.24,3.05,4,4,0,0,1-.38,1.6A4,4,0,0,1,134.66,7a5.47,5.47,0,0,1-1.45.8c-.33.11-.85.25-1.54.42a4.73,4.73,0,0,0,.16.46l1.85,5.42a2.81,2.81,0,0,0,.8,1.38,2.42,2.42,0,0,0,1.23.32,2.53,2.53,0,0,0,1.22-.41,2.47,2.47,0,0,0,.68-1.29l2.94-10.77c.07-.27.13-.52.18-.74A2.73,2.73,0,0,0,140.8,2c0-.41-.11-.66-.32-.77A5.1,5.1,0,0,0,139.05,1V.33H152l-1,4.56-.65-.11a4.32,4.32,0,0,0-.56-2.47c-.61-.82-1.85-1.23-3.71-1.23a2.07,2.07,0,0,0-1.23.23A1.67,1.67,0,0,0,144.36,2.17ZM131.54,6.59a5,5,0,0,0,.77-1.32,4.68,4.68,0,0,0,.36-1.84,2.74,2.74,0,0,0-.5-1.67,2,2,0,0,0-1.7-.66,1,1,0,0,0-.72.22,2,2,0,0,0-.38.85l-1.45,5.49a10.33,10.33,0,0,0,1.91-.16A3.07,3.07,0,0,0,131.54,6.59Z",opacity:1,strokeColor:"",fillColor:"#192760",width:151.345,height:16.781,stampFillColor:"#dce3ef",stampStrokeColor:""};break;case"SignHere":case"Sign Here":t={iconName:"Sign Here",pathdata:"M6.38,1.9A2.56,2.56,0,0,0,6,3.34a2.49,2.49,0,0,0,.44,1.45,3.9,3.9,0,0,0,.73.76l2.07,1.7a9.34,9.34,0,0,1,1.87,2.06,4.6,4.6,0,0,1,.78,2.63,4.78,4.78,0,0,1-1.5,3.43A5.46,5.46,0,0,1,6.23,16.9a7.34,7.34,0,0,1-1.31-.12,7.48,7.48,0,0,1-1.31-.36L3,16.2l-.42-.14a1.12,1.12,0,0,0-.27,0,.71.71,0,0,0-.57.19,2.85,2.85,0,0,0-.38.67H.63l.87-5.38.69,0a10.34,10.34,0,0,0,.2,1.68,3.82,3.82,0,0,0,2,2.5,3.42,3.42,0,0,0,1.5.32,2.76,2.76,0,0,0,2.23-.92A3.14,3.14,0,0,0,8.94,13c0-1-1-2.29-2.94-3.82S3.06,6.08,3.06,4.71A4.59,4.59,0,0,1,4.35,1.42,4.76,4.76,0,0,1,8,.06,6.71,6.71,0,0,1,9.29.19a4.78,4.78,0,0,1,.79.2l.61.2.41.1a2.76,2.76,0,0,0,.37,0,1,1,0,0,0,.65-.18A1.75,1.75,0,0,0,12.5.12h.72l-1,4.8-.62-.08-.09-.79a4.45,4.45,0,0,0-.69-1.91A2.78,2.78,0,0,0,8.39.89,2.2,2.2,0,0,0,6.38,1.9ZM22.8.39H15.66V1a4.71,4.71,0,0,1,1.41.25c.23.11.34.36.34.77a2.86,2.86,0,0,1-.06.54c0,.21-.11.47-.19.77L14.21,14.11a2.47,2.47,0,0,1-.68,1.29,2.62,2.62,0,0,1-1.27.42v.62h7.15v-.62A4.63,4.63,0,0,1,18,15.56c-.22-.1-.33-.36-.33-.77a1.8,1.8,0,0,1,0-.22c0-.08,0-.16,0-.24l.19-.83,3-10.77a2.5,2.5,0,0,1,.66-1.3A2.76,2.76,0,0,1,22.8,1ZM38.09,9.14V8.52H31.18v.62a5.05,5.05,0,0,1,1.44.28c.22.1.32.35.32.75a13.35,13.35,0,0,1-.54,2.54,19.13,19.13,0,0,1-.54,1.87A1.85,1.85,0,0,1,31,15.66a3.77,3.77,0,0,1-1.78.35A3.71,3.71,0,0,1,27,15.38c-1.09-.77-1.64-2.13-1.64-4.08a13.74,13.74,0,0,1,1.78-6.69q2.05-3.72,5-3.72a2.93,2.93,0,0,1,3,1.86,6.09,6.09,0,0,1,.4,2.48l.69.08L37.44,0h-.71a2.44,2.44,0,0,1-.41.53.82.82,0,0,1-.58.2A9.14,9.14,0,0,1,34.33.36,9.23,9.23,0,0,0,31.73,0a9.4,9.4,0,0,0-7.46,3.42,10.46,10.46,0,0,0-2.65,7,5.88,5.88,0,0,0,2.2,4.83,7.77,7.77,0,0,0,5,1.64A13.06,13.06,0,0,0,32,16.52a14.26,14.26,0,0,0,2.33-.75l.67-.3,1.2-4.36a4.15,4.15,0,0,1,.62-1.59A2.28,2.28,0,0,1,38.09,9.14ZM50.36,1a3.36,3.36,0,0,1,1.31.27,1.25,1.25,0,0,1,.58,1.2,6.26,6.26,0,0,1-.15,1.09c-.07.33-.16.7-.27,1.13L50,11.48,44.76.39H39.93V1a3.49,3.49,0,0,1,1.12.2,1.51,1.51,0,0,1,.74.85l.1.25L39.2,12.16a12.62,12.62,0,0,1-1.09,2.93,1.86,1.86,0,0,1-1.35.73v.62h5v-.62a3.62,3.62,0,0,1-1.28-.26,1.21,1.21,0,0,1-.63-1.17,4.72,4.72,0,0,1,0-.64q.1-.52.39-1.59l2.39-8.6,6.23,13.28h.6L52.84,4.66a15.29,15.29,0,0,1,1-2.78A1.52,1.52,0,0,1,55,1.05l.34,0V.39H50.36Zm22.33,13.8a.66.66,0,0,1,0-.15c0-.05,0-.16.07-.34l.2-.83L75.91,2.73a2.43,2.43,0,0,1,.79-1.39A2.78,2.78,0,0,1,77.86,1V.39H70.71V1A4.45,4.45,0,0,1,72,1.2a.81.81,0,0,1,.47.83,2.73,2.73,0,0,1-.07.57c0,.22-.1.47-.17.74L71.07,7.5h-5.7l1.29-4.77a2.27,2.27,0,0,1,.73-1.33A4.36,4.36,0,0,1,69.08,1V.39H61.47V1a4.73,4.73,0,0,1,1.42.25c.22.11.33.36.33.77a2.93,2.93,0,0,1-.08.58c0,.24-.1.48-.17.73L60,14.1a2.73,2.73,0,0,1-.65,1.29,2.47,2.47,0,0,1-1.3.43v.62h7.15v-.62a5.13,5.13,0,0,1-1.42-.24c-.21-.1-.31-.34-.31-.72a3,3,0,0,1,0-.57c0-.16.1-.43.19-.8l1.35-4.94h5.7L69.27,14.1a2.21,2.21,0,0,1-.74,1.33,4.77,4.77,0,0,1-1.69.39v.62h7.63v-.62a4.72,4.72,0,0,1-1.25-.17A.82.82,0,0,1,72.69,14.81Zm13.38.25a10.28,10.28,0,0,1-3.72.61,1.86,1.86,0,0,1-1.08-.21.67.67,0,0,1-.26-.54,2.23,2.23,0,0,1,0-.32,3.38,3.38,0,0,1,.09-.41l1.58-5.86a5.51,5.51,0,0,1,2.75.47,2,2,0,0,1,.7,1.75c0,.11,0,.24,0,.41s0,.37-.07.59l.66.12,1.78-6.56L87.85,5a4.75,4.75,0,0,1-1.64,2.12,10.13,10.13,0,0,1-3.27.41l1.43-5.33a1.56,1.56,0,0,1,.45-.86,2.07,2.07,0,0,1,1.23-.23c1.86,0,3.1.41,3.71,1.23a4.32,4.32,0,0,1,.56,2.47L91,5,92,.39H79.06V1a4.75,4.75,0,0,1,1.43.25c.21.11.32.36.32.77a2.73,2.73,0,0,1-.07.57c0,.22-.11.47-.18.74l-3,10.77a2.4,2.4,0,0,1-.68,1.29,2.58,2.58,0,0,1-1.26.42v.62H89l1.41-4.66-.58-.11A7.22,7.22,0,0,1,86.07,15.06ZM114.32,2.23l-1.43,5.33a10.13,10.13,0,0,0,3.27-.41A4.75,4.75,0,0,0,117.8,5l.67.08-1.78,6.56-.66-.12c0-.22.06-.42.07-.59s0-.3,0-.41a2,2,0,0,0-.71-1.75,5.51,5.51,0,0,0-2.75-.47l-1.58,5.86a3.38,3.38,0,0,0-.09.41,2.23,2.23,0,0,0,0,.32.67.67,0,0,0,.26.54,1.86,1.86,0,0,0,1.08.21,10.28,10.28,0,0,0,3.72-.61,7.22,7.22,0,0,0,3.73-3.39l.58.11-1.41,4.66h-18L98.33,8.51h-.68l-1.42,5-.2.83,0,.2a1.77,1.77,0,0,0,0,.23c0,.43.1.7.31.8a4.51,4.51,0,0,0,1.43.26v.62H90.59v-.62a2.58,2.58,0,0,0,1.26-.42,2.4,2.4,0,0,0,.68-1.29l3-10.77.15-.57a4.09,4.09,0,0,0,.1-.79c0-.38-.11-.62-.32-.73A5.3,5.3,0,0,0,94,1V.39h6.6A10.58,10.58,0,0,1,104,.82a3,3,0,0,1,2.24,3.05,4,4,0,0,1-.38,1.6A4.06,4.06,0,0,1,104.62,7a5.32,5.32,0,0,1-1.45.8c-.33.11-.84.25-1.54.42.08.24.13.4.16.46l1.85,5.42a2.81,2.81,0,0,0,.8,1.38,2.42,2.42,0,0,0,1.23.32,2.64,2.64,0,0,0,1.22-.41,2.47,2.47,0,0,0,.68-1.29l2.94-10.77c.07-.27.13-.52.18-.74a2.73,2.73,0,0,0,.07-.57c0-.41-.11-.66-.32-.77A4.75,4.75,0,0,0,109,1V.39h12.93l-1,4.56-.64-.11a4.39,4.39,0,0,0-.57-2.47c-.61-.82-1.85-1.23-3.71-1.23a2.07,2.07,0,0,0-1.23.23A1.7,1.7,0,0,0,114.32,2.23ZM101.5,6.64a4.76,4.76,0,0,0,.77-1.31,4.68,4.68,0,0,0,.36-1.84,2.72,2.72,0,0,0-.5-1.67,2,2,0,0,0-1.7-.66.94.94,0,0,0-.71.22,1.81,1.81,0,0,0-.39.85L97.88,7.72a10.33,10.33,0,0,0,1.91-.16A3,3,0,0,0,101.5,6.64Z",opacity:1,strokeColor:"",fillColor:"#192760",width:121.306,height:16.899,stampFillColor:"#dce3ef",stampStrokeColor:""};break;case"Accepted":t={iconName:"Accepted",pathdata:"M22.409294,0.00021190348 C22.64747,0.0056831966 22.875833,0.11701412 23.023336,0.32638185 23.631345,1.1873664 25.36437,2.8183636 27.4584,4.1123583 28.000408,4.4483535 28.015407,5.227338 27.477398,5.5713293 23.803344,7.9272954 12.881201,15.464245 9.4751583,23.800168 9.2091556,24.452168 8.3321453,24.542164 7.9521352,23.95016 6.0691143,21.014182 1.8990528,14.526234 0.095028103,11.832258 -0.13796928,11.485277 0.081027784,11.023275 0.49603404,10.97927 1.9670546,10.824272 4.8490969,10.421291,6.5811144,9.5293013 6.9811216,9.3233086 7.4691268,9.5782811 7.5601316,10.019287 7.847138,11.400286 8.4021459,13.83224 8.952148,14.781236 8.952148,14.781236 16.385246,3.2303471 21.985326,0.10638282 22.119951,0.031756414 22.266389,-0.003070501 22.409294,0.00021190348 z",opacity:1,strokeColor:"",fillColor:"#516c30",width:27.873,height:24.346,stampFillColor:"#e6eddf",stampStrokeColor:""};break;case"Rejected":t={iconName:"Rejected",pathdata:"M3.8779989,0 L11.294,7.4140023 18.710001,0 22.588001,3.8779911 15.172998,11.293032 22.588001,18.707033 18.710001,22.586 11.294,15.169985 3.8779989,22.586 0,18.707033 7.4150017,11.293032 0,3.8779911 z",opacity:1,strokeColor:"",fillColor:"#8a251a",width:22.588,height:22.586,stampFillColor:"#f6dedd",stampStrokeColor:""};break;case"Rejected_with_border":t={iconName:"Rejected_with_border",pathdata:"M3.8779989,0 L11.294,7.4140023 18.710001,0 22.588001,3.8779911 15.172998,11.293032 22.588001,18.707033 18.710001,22.586 11.294,15.169985 3.8779989,22.586 0,18.707033 7.4150017,11.293032 0,3.8779911 z",opacity:1,strokeColor:"",fillColor:"#192760",width:22.588,height:24.346,stampFillColor:"#dce3ef",stampStrokeColor:""};break;case"NotApproved":case"Not Approved":t={iconName:"Not Approved",pathdata:"M0,19.46a1.56,1.56,0,0,0,1.16-.9A19.84,19.84,0,0,0,2.1,15L4.42,2.84l-.09-.3a1.82,1.82,0,0,0-.64-1.06,2.41,2.41,0,0,0-1-.24V.48H6.88l4.49,13.64L13,5.78c.09-.52.17-1,.22-1.39a10.11,10.11,0,0,0,.13-1.34,1.83,1.83,0,0,0-.49-1.48,2.49,2.49,0,0,0-1.13-.33V.48H16v.76l-.29.06a1.42,1.42,0,0,0-1,1,23.7,23.7,0,0,0-.84,3.42L11,20.71h-.51L5.1,4.38,3,15c-.17.87-.28,1.53-.33,2a5.32,5.32,0,0,0,0,.79,1.69,1.69,0,0,0,.54,1.44,2.48,2.48,0,0,0,1.1.32v.76H0ZM17.73,4.53C19.54,1.51,21.55,0,23.79,0a4.4,4.4,0,0,1,3.66,1.92,8.52,8.52,0,0,1,1.43,5.19,17.56,17.56,0,0,1-2.53,9.07q-2.7,4.61-6.21,4.6a4.24,4.24,0,0,1-3.6-1.92,8.6,8.6,0,0,1-1.39-5.14A17.68,17.68,0,0,1,17.73,4.53ZM18.37,18c.33,1.19.93,1.78,1.8,1.78a2.83,2.83,0,0,0,2.22-1.29,16.41,16.41,0,0,0,2.06-4.93,35.53,35.53,0,0,0,1.06-4.83A28.26,28.26,0,0,0,25.9,4.6a5.86,5.86,0,0,0-.52-2.55A1.7,1.7,0,0,0,23.78,1Q21.2,1,19.45,7.53a33,33,0,0,0-1.33,8.26A8.15,8.15,0,0,0,18.37,18Zm11.08,1.48a2.34,2.34,0,0,0,1.3-.26,3,3,0,0,0,.85-1.85l3-15.85A3.54,3.54,0,0,0,32,2.56a8,8,0,0,0-1.82,3.16l-.53-.2.8-5H41.81l-.74,5.66-.54-.07c0-1.92-.41-3.24-1.13-3.94a2.6,2.6,0,0,0-1.74-.63L34.79,16.6l-.17,1a2.43,2.43,0,0,0,0,.33,2.26,2.26,0,0,0,0,.26c0,.5.11.82.33.95a3.94,3.94,0,0,0,1.39.3v.76H29.45Zm26.65.76H50.18v-.71a2.28,2.28,0,0,0,1.25-.41,1.64,1.64,0,0,0,.37-1.29c0-.22,0-.75-.11-1.58,0-.17-.08-.89-.2-2.15H47l-1.2,3c-.08.2-.15.42-.22.66a2.84,2.84,0,0,0-.09.69c0,.41.08.67.25.78a2.91,2.91,0,0,0,1.08.3v.71H42.79v-.71a2.44,2.44,0,0,0,.85-.53,5.59,5.59,0,0,0,.9-1.56L52.21.07h.53l2,16.88A5.46,5.46,0,0,0,55.2,19a1.36,1.36,0,0,0,.9.43Zm-4.76-7.31-.76-7.18-3,7.18Zm4.95,6.53a1.82,1.82,0,0,0,1-.5,3.56,3.56,0,0,0,.58-1.59L60.42,4.11c.06-.3.1-.6.15-.9a5.46,5.46,0,0,0,.06-.72c0-.52-.13-.86-.4-1a2.88,2.88,0,0,0-1.1-.23V.48h5.93a5,5,0,0,1,2.5.57c1.26.73,1.9,2.07,1.9,4a5.81,5.81,0,0,1-1.54,4.22,5.32,5.32,0,0,1-4,1.58l-.59,0-1.2-.11L61,16.6l-.17,1a2.72,2.72,0,0,0,0,.3,2.81,2.81,0,0,0,0,.29c0,.5.09.81.28.94a3.26,3.26,0,0,0,1.23.31v.76h-6Zm6-9.67.38.06H63a3,3,0,0,0,1.62-.36,2.87,2.87,0,0,0,1-1.18,7.28,7.28,0,0,0,.6-2,11.67,11.67,0,0,0,.22-2,4.4,4.4,0,0,0-.41-2,1.44,1.44,0,0,0-1.39-.79.71.71,0,0,0-.65.28,3.7,3.7,0,0,0-.32,1Zm5.61,9.69A1.86,1.86,0,0,0,69,18.94a3.54,3.54,0,0,0,.59-1.59L72.15,4.11q.09-.45.15-.9a5.73,5.73,0,0,0,.07-.72,1.1,1.1,0,0,0-.41-1,2.88,2.88,0,0,0-1.1-.23V.48h5.93a5,5,0,0,1,2.5.57c1.27.73,1.9,2.07,1.9,4a5.77,5.77,0,0,1-1.54,4.22,5.31,5.31,0,0,1-4,1.58l-.6,0-1.2-.11L72.74,16.6l-.17,1a2.72,2.72,0,0,0,0,.3c0,.1,0,.19,0,.29,0,.5.1.81.29.94a3.15,3.15,0,0,0,1.23.31v.76h-6.1Zm6.12-9.69.38.06h.33a3,3,0,0,0,1.62-.36,3,3,0,0,0,1-1.18,7.67,7.67,0,0,0,.59-2,11.67,11.67,0,0,0,.22-2,4.4,4.4,0,0,0-.41-2,1.43,1.43,0,0,0-1.38-.79.73.73,0,0,0-.66.28,3.7,3.7,0,0,0-.32,1Zm5.57,9.69a1.9,1.9,0,0,0,1.09-.52,3.56,3.56,0,0,0,.58-1.59L83.84,4.11c0-.27.09-.51.13-.71a7.08,7.08,0,0,0,.09-1c0-.47-.1-.77-.28-.9a3.53,3.53,0,0,0-1.22-.3V.48h5.68a6.57,6.57,0,0,1,3,.53q1.92,1,1.92,3.75a6.79,6.79,0,0,1-.32,2,5.23,5.23,0,0,1-1.08,1.9,4.56,4.56,0,0,1-1.25,1,11.62,11.62,0,0,1-1.33.52c.07.3.12.49.14.57l1.59,6.66a4.07,4.07,0,0,0,.69,1.7,1.72,1.72,0,0,0,1.13.41v.76H88.52l-2.23-9.76h-.58L84.49,16.6l-.17,1a1,1,0,0,0,0,.25,2.62,2.62,0,0,0,0,.28c0,.53.09.86.26,1a3.11,3.11,0,0,0,1.24.32v.76H79.63ZM87.55,9.3A2.59,2.59,0,0,0,89,8.17a7.24,7.24,0,0,0,.66-1.62A8.18,8.18,0,0,0,90,4.29a4.32,4.32,0,0,0-.43-2,1.5,1.5,0,0,0-1.45-.81.71.71,0,0,0-.62.26,2.78,2.78,0,0,0-.33,1.05L85.91,9.5A6.63,6.63,0,0,0,87.55,9.3Zm8.72-4.77Q99,0,102.32,0A4.37,4.37,0,0,1,106,1.92a8.46,8.46,0,0,1,1.44,5.19,17.58,17.58,0,0,1-2.54,9.07q-2.7,4.61-6.21,4.6a4.27,4.27,0,0,1-3.6-1.92,8.67,8.67,0,0,1-1.38-5.14A17.68,17.68,0,0,1,96.27,4.53ZM96.9,18c.33,1.19.93,1.78,1.8,1.78a2.83,2.83,0,0,0,2.22-1.29A16.63,16.63,0,0,0,103,13.54a37.1,37.1,0,0,0,1.06-4.83,29.49,29.49,0,0,0,.38-4.11,5.86,5.86,0,0,0-.51-2.55A1.71,1.71,0,0,0,102.31,1C100.6,1,99.15,3.17,98,7.53a33.42,33.42,0,0,0-1.33,8.26A8.57,8.57,0,0,0,96.9,18ZM114.35.48v.76a2.57,2.57,0,0,0-1.08.17,1.07,1.07,0,0,0-.5,1,2.53,2.53,0,0,0,0,.28,2.64,2.64,0,0,0,0,.28l1.07,11.76L117.77,6c.31-.71.59-1.41.84-2.11A5.25,5.25,0,0,0,119,2.19a.85.85,0,0,0-.38-.81,3.09,3.09,0,0,0-.95-.14V.48h4v.76a2.08,2.08,0,0,0-.73.45,5.35,5.35,0,0,0-.82,1.4l-7.79,17.69h-.66L110,5.74A22,22,0,0,0,109.46,2c-.16-.39-.58-.62-1.28-.71V.48Zm5.15,19a1.83,1.83,0,0,0,1.08-.52,3.42,3.42,0,0,0,.59-1.59l2.54-13.24c.06-.34.11-.64.15-.92a4.83,4.83,0,0,0,.06-.7c0-.5-.09-.81-.28-.94a3.14,3.14,0,0,0-1.22-.31V.48h11.12l-.87,5.6L132.11,6a7,7,0,0,0-.49-3c-.52-1-1.59-1.51-3.19-1.51-.55,0-.9.09-1.06.28A2.44,2.44,0,0,0,127,2.74L125.76,9.3a6.21,6.21,0,0,0,2.81-.51A6,6,0,0,0,130,6.18l.58.1L129,14.35l-.56-.14c0-.28,0-.52,0-.73s0-.37,0-.51a2.92,2.92,0,0,0-.61-2.15,3.55,3.55,0,0,0-2.37-.57l-1.36,7.2a4.79,4.79,0,0,0-.07.51,3.28,3.28,0,0,0,0,.39,1,1,0,0,0,.22.66,1.24,1.24,0,0,0,.93.26,6.43,6.43,0,0,0,3.21-.75,7.67,7.67,0,0,0,3.21-4.17l.5.13-1.22,5.74H119.5Zm12.79,0a1.87,1.87,0,0,0,1-.41,3.23,3.23,0,0,0,.71-1.71L136.5,4.11c.07-.38.13-.69.17-1a5.89,5.89,0,0,0,.05-.67c0-.5-.1-.81-.29-.94a3.32,3.32,0,0,0-1.22-.31V.48h6a5.35,5.35,0,0,1,4.63,2.22,10.11,10.11,0,0,1,1.58,6,13.3,13.3,0,0,1-2.34,7.84,8,8,0,0,1-6.86,3.7h-5.93ZM143.87,3.39a2.84,2.84,0,0,0-2.79-2,1.08,1.08,0,0,0-.91.31,1.93,1.93,0,0,0-.34.83L137,17.44a3.1,3.1,0,0,0-.06.39c0,.11,0,.21,0,.3a1.22,1.22,0,0,0,.24.84,1.26,1.26,0,0,0,.9.26q3.67,0,5.33-5.42a23.91,23.91,0,0,0,1-6.94A9.45,9.45,0,0,0,143.87,3.39Z",opacity:1,strokeColor:"",fillColor:"#8a251a",width:147.425,height:20.783,stampFillColor:"#f6dedd",stampStrokeColor:""};break;case"Draft":t={iconName:"Draft",pathdata:"M24.92,3Q22,.46,16.4.46h-11v.87a9.38,9.38,0,0,1,2.24.35q.54.23.54,1.08a3.24,3.24,0,0,1-.1.76c-.07.29-.17.65-.31,1.08L3.08,19.69a3.26,3.26,0,0,1-1.32,1.95A4.67,4.67,0,0,1,0,22.1V23H10.91q7.8,0,12.61-4.22a11.56,11.56,0,0,0,4.32-8.94A8.58,8.58,0,0,0,24.92,3ZM20.41,15.66a10.18,10.18,0,0,1-9.8,6.18A3.18,3.18,0,0,1,9,21.54a1,1,0,0,1-.46-.95,2.47,2.47,0,0,1,0-.35,3,3,0,0,1,.1-.44l5.24-17a1.91,1.91,0,0,1,.62-.95,2.81,2.81,0,0,1,1.66-.35c2.44,0,4.15.76,5.15,2.27a7.29,7.29,0,0,1,.94,4A17.63,17.63,0,0,1,20.41,15.66ZM49.75,9.74a5.84,5.84,0,0,0,2-2.16,5.1,5.1,0,0,0,.59-2.24c0-2.1-1.18-3.53-3.54-4.27A18.67,18.67,0,0,0,43.36.46H32.92v.87a8.79,8.79,0,0,1,2.24.35c.35.14.52.48.52,1a5.36,5.36,0,0,1-.17,1.11c-.06.23-.14.5-.23.8L30.61,19.7a3.26,3.26,0,0,1-1.08,1.81,4.44,4.44,0,0,1-2,.59V23H38.85V22.1a8.54,8.54,0,0,1-2.28-.36c-.32-.15-.49-.53-.49-1.13,0-.11,0-.21,0-.32a1.15,1.15,0,0,1,.06-.28l.31-1.16,2.25-7h1.07L43.89,23h7.64V22.1a4.27,4.27,0,0,1-2.07-.47,3.91,3.91,0,0,1-1.27-1.93l-2.92-7.6a4.67,4.67,0,0,1-.25-.65c1.1-.23,1.91-.42,2.43-.59A8.49,8.49,0,0,0,49.75,9.74ZM46,7.39a6.73,6.73,0,0,1-1.21,1.84,5,5,0,0,1-2.72,1.29,19.56,19.56,0,0,1-3,.23L41.38,3A2.54,2.54,0,0,1,42,1.85a1.76,1.76,0,0,1,1.14-.31,3.38,3.38,0,0,1,2.69.93,3.52,3.52,0,0,1,.79,2.34A5.94,5.94,0,0,1,46,7.39Zm27.9,11.85L70.29,0h-1L55.21,19.78a6.61,6.61,0,0,1-1.66,1.78,5.3,5.3,0,0,1-1.55.6V23h7.45v-.81a8,8,0,0,1-2-.34.85.85,0,0,1-.47-.89,2,2,0,0,1,.17-.79,5.32,5.32,0,0,1,.4-.75L59.8,16H68c.22,1.44.35,2.25.37,2.45a16,16,0,0,1,.2,1.81,1.51,1.51,0,0,1-.67,1.47,6.38,6.38,0,0,1-2.31.46V23H77.1v-.81a4.28,4.28,0,0,1-2.28-.55A4.47,4.47,0,0,1,73.93,19.24ZM60.7,14.64l5.62-8.19,1.4,8.19ZM84,.46h20.2l-1.61,6.39-1-.15a5.61,5.61,0,0,0-.88-3.43Q99.2,1.52,94.86,1.51a3.56,3.56,0,0,0-1.76.3A2.05,2.05,0,0,0,92.34,3L90.1,10.5A16.53,16.53,0,0,0,95,9.91c.77-.33,1.62-1.32,2.56-3l1.06.12-2.82,9.2-1-.17c0-.33.08-.61.1-.85s0-.43,0-.56a2.76,2.76,0,0,0-1-2.38c-.66-.49-2.07-.73-4.23-.73l-2.5,8.22a3.56,3.56,0,0,0-.09.39,1.55,1.55,0,0,0,0,.37,1.32,1.32,0,0,0,1,1.33,5.52,5.52,0,0,0,1.78.21V23H78.58V22.1a4.35,4.35,0,0,0,2-.61,3.33,3.33,0,0,0,1.06-1.8L86.32,4.6c.09-.31.16-.58.23-.81a5.05,5.05,0,0,0,.16-1.1c0-.53-.17-.87-.52-1A8.7,8.7,0,0,0,84,1.33Zm24.1,0h20.89l-1.37,6.46-1-.08c-.07-2.2-.76-3.69-2.09-4.49a6.61,6.61,0,0,0-3.2-.72L116,18.84,115.7,20a2.63,2.63,0,0,0-.07.38,1.51,1.51,0,0,0,0,.3c0,.57.2.94.61,1.08a11.19,11.19,0,0,0,2.56.34V23H106.2V22.1a6.49,6.49,0,0,0,2.4-.3,3.19,3.19,0,0,0,1.56-2.1l5.58-18.07a9.07,9.07,0,0,0-4.83,1.2,9.52,9.52,0,0,0-3.34,3.61l-1-.23Z",opacity:1,strokeColor:"",fillColor:"#192760",width:128.941,height:22.97,stampFillColor:"#dce3ef",stampStrokeColor:""};break;case"Final":t={iconName:"Final",pathdata:"M24.94,6l-1.06-.13a4.37,4.37,0,0,0-.91-3q-1.51-1.54-6-1.54a4.28,4.28,0,0,0-1.83.26,1.8,1.8,0,0,0-.78,1.08L12,9.21a20.26,20.26,0,0,0,5.15-.52A6.49,6.49,0,0,0,19.8,6.1l1.1.1L18,14.27l-1.09-.15a6.34,6.34,0,0,0,.11-.74c0-.22,0-.38,0-.5a2.26,2.26,0,0,0-1-2.09c-.68-.42-2.15-.63-4.39-.63L9,17.37a3.09,3.09,0,0,0-.1.34,1.22,1.22,0,0,0,0,.32,1.18,1.18,0,0,0,1,1.17,7,7,0,0,0,1.86.18v.77H0v-.77a5.14,5.14,0,0,0,2.11-.53,3,3,0,0,0,1.1-1.58L8.06,4c.09-.27.17-.5.23-.7a3.74,3.74,0,0,0,.18-1,.83.83,0,0,0-.55-.89,10.94,10.94,0,0,0-2.33-.3V.4h21Zm8.54,12.11a1.49,1.49,0,0,1,0-.28,2.46,2.46,0,0,1,.07-.29l.3-1L38.76,3.29a2.93,2.93,0,0,1,1.09-1.6A5.42,5.42,0,0,1,42,1.17V.4H30.17v.77a10.52,10.52,0,0,1,2.34.31.88.88,0,0,1,.56.94,2.58,2.58,0,0,1-.11.67c-.07.26-.18.57-.32,1L27.79,17.28a2.94,2.94,0,0,1-1.12,1.59,5.28,5.28,0,0,1-2.09.51v.77H36.36v-.77A10.22,10.22,0,0,1,34,19.07.89.89,0,0,1,33.48,18.12ZM66.19,2.24a2.53,2.53,0,0,1,1.87-1l.56-.06V.4H60.5v.77a8,8,0,0,1,2.16.33,1.47,1.47,0,0,1,1,1.48,5.61,5.61,0,0,1-.25,1.34c-.11.4-.25.87-.43,1.38l-3.08,8.35L51.26.4h-8v.77a8.44,8.44,0,0,1,1.86.24,2.26,2.26,0,0,1,1.22,1.05l.17.31L42.11,14.88a13.74,13.74,0,0,1-1.8,3.61,3.36,3.36,0,0,1-2.22.89v.77h8.23v-.77a7.75,7.75,0,0,1-2.1-.31,1.45,1.45,0,0,1-1-1.44,3.56,3.56,0,0,1,.1-.79,16.15,16.15,0,0,1,.64-2L47.85,4.31,58.11,20.64h1l5.5-15A15.48,15.48,0,0,1,66.19,2.24Zm23,17.13v.78H78.08v-.71A7.47,7.47,0,0,0,80.49,19a1.25,1.25,0,0,0,.7-1.29A13.26,13.26,0,0,0,81,16.16c0-.18-.16-.89-.39-2.15H72.06l-2.3,3a3.7,3.7,0,0,0-.42.66,1.54,1.54,0,0,0-.18.69.74.74,0,0,0,.49.78,10.28,10.28,0,0,0,2.06.3v.71H63.94v-.71a6.43,6.43,0,0,0,1.63-.53,6.63,6.63,0,0,0,1.72-1.56L82,0h1l3.78,16.88A3.69,3.69,0,0,0,87.7,19,3.53,3.53,0,0,0,89.24,19.37Zm-8.93-6.53L78.86,5.65,73,12.84Zm32.8,1.44a11.51,11.51,0,0,1-5.23,3.88,21.36,21.36,0,0,1-7,1A4.88,4.88,0,0,1,99.22,19a.74.74,0,0,1-.58-.71,2.33,2.33,0,0,1,0-.48c0-.13.08-.28.13-.43L104,3.29a2.72,2.72,0,0,1,1.19-1.64,9.4,9.4,0,0,1,2.79-.48V.4H95.4v.77a10.42,10.42,0,0,1,2.34.31.88.88,0,0,1,.56.94,2.58,2.58,0,0,1-.11.67c-.07.25-.17.57-.31.94L93,17.27a2.92,2.92,0,0,1-1.12,1.6,4.59,4.59,0,0,1-1.71.47v.81h21.55l2.32-5.74Z",opacity:1,strokeColor:"",fillColor:"#516c30",width:114.058,height:20.639,stampFillColor:"#e6eddf",stampStrokeColor:""};break;case"Completed":t={iconName:"Completed",pathdata:"M16.37,0,15.08,6.9l-.79-.17c0-.41,0-.66,0-.73a2.73,2.73,0,0,0,0-.32,5.33,5.33,0,0,0-.94-3.47A3,3,0,0,0,11,1.07c-2,0-3.68,1.51-5.13,4.55a18.84,18.84,0,0,0-2,8.29q0,3.06,1.2,4.2a3.82,3.82,0,0,0,2.64,1.13,5.3,5.3,0,0,0,3.51-1.43,10.75,10.75,0,0,0,1.78-2.09l.77.65a9.32,9.32,0,0,1-3.12,3.35A7,7,0,0,1,7,20.81a6.66,6.66,0,0,1-5-2.08,7.72,7.72,0,0,1-2-5.57A14.57,14.57,0,0,1,3.05,3.92Q6.1,0,10.29,0A8.92,8.92,0,0,1,13,.43a9.09,9.09,0,0,0,1.65.43.72.72,0,0,0,.6-.23A2.55,2.55,0,0,0,15.6,0ZM32.83,7.11a15.24,15.24,0,0,1-3.11,9.07q-3.31,4.61-7.63,4.6a5.63,5.63,0,0,1-4.42-1.92A7.47,7.47,0,0,1,16,13.72a15.27,15.27,0,0,1,3.18-9.19Q22.46,0,26.57,0a5.82,5.82,0,0,1,4.5,1.92A7.35,7.35,0,0,1,32.83,7.11ZM29.16,4.6a4.92,4.92,0,0,0-.63-2.55,2.14,2.14,0,0,0-2-1.06Q23.4,1,21.24,7.53a27.45,27.45,0,0,0-1.63,8.26A6.68,6.68,0,0,0,19.92,18a2.24,2.24,0,0,0,2.2,1.78,3.71,3.71,0,0,0,2.73-1.29,15,15,0,0,0,2.54-4.93,30.56,30.56,0,0,0,1.3-4.83A23,23,0,0,0,29.16,4.6Zm21.2,13.62a3.83,3.83,0,0,1,.08-.75,8.6,8.6,0,0,1,.19-.88L53.75,3.31a3,3,0,0,1,.85-1.67,2.72,2.72,0,0,1,1.21-.4V.48H50.42L42.66,14.39,41.21.48h-5.8v.76a4.65,4.65,0,0,1,1.45.21c.26.11.38.37.38.78a4.57,4.57,0,0,1-.08.75c-.06.28-.13.61-.23,1L34.34,15a16.85,16.85,0,0,1-1.16,3.65,1.9,1.9,0,0,1-1.42.86v.76h5.3v-.76a3.22,3.22,0,0,1-1.32-.29A1.48,1.48,0,0,1,35,17.74a8.32,8.32,0,0,1,.17-1.42c.07-.37.17-.82.3-1.37L38.06,4.23l1.71,16.38h.71L50,3.76l-3.2,13.58A2.84,2.84,0,0,1,46,19a4.06,4.06,0,0,1-1.76.49v.76h7.93v-.76a4.79,4.79,0,0,1-1.49-.31Q50.36,19,50.36,18.22ZM67.69,9.29a7.39,7.39,0,0,1-4.89,1.58l-.73,0-1.48-.11L59.21,16.6l-.21,1a1,1,0,0,0,0,.3,2.83,2.83,0,0,0,0,.29c0,.5.12.81.35.94a4.74,4.74,0,0,0,1.51.31v.76H53.31v-.76a2.52,2.52,0,0,0,1.33-.52,3.18,3.18,0,0,0,.72-1.59L58.48,4.11q.1-.45.18-.9a4.48,4.48,0,0,0,.08-.72,1,1,0,0,0-.49-1,4.36,4.36,0,0,0-1.36-.23V.48h7.29a7.29,7.29,0,0,1,3.07.57,4,4,0,0,1,2.33,4A5.22,5.22,0,0,1,67.69,9.29Zm-1.8-5a3.65,3.65,0,0,0-.51-2,1.85,1.85,0,0,0-1.7-.79,1,1,0,0,0-.8.28,3.27,3.27,0,0,0-.4,1l-1.66,7,.47.06h.41a4.37,4.37,0,0,0,2-.36,3.14,3.14,0,0,0,1.2-1.18,6.51,6.51,0,0,0,.74-2A9.87,9.87,0,0,0,65.89,4.25Zm16.9,10.1a8.71,8.71,0,0,1-3.35,3.88,9.36,9.36,0,0,1-4.53,1,2.15,2.15,0,0,1-1-.21.75.75,0,0,1-.37-.71,3.18,3.18,0,0,1,0-.47c0-.14,0-.28.08-.44l3.3-14.08a2.94,2.94,0,0,1,.77-1.64,4.47,4.47,0,0,1,1.79-.48V.48h-8v.76a4.8,4.8,0,0,1,1.5.31c.23.13.35.44.35.94a4.36,4.36,0,0,1-.06.67c0,.26-.12.57-.21,1L69.9,17.34a3.18,3.18,0,0,1-.72,1.6,2.53,2.53,0,0,1-1.34.52v.76H81.91l1.49-5.74ZM85.73,1.24a4.59,4.59,0,0,1,1.5.31c.23.13.34.44.34.94a3.84,3.84,0,0,1-.07.7c0,.28-.11.58-.19.92L84.2,17.35a3.18,3.18,0,0,1-.72,1.59,2.27,2.27,0,0,1-1.06.47h-.07v.8H96.2l1.5-5.74-.62-.13a8.14,8.14,0,0,1-3.94,4.17,9.39,9.39,0,0,1-3.94.75A1.75,1.75,0,0,1,88.06,19a.87.87,0,0,1-.27-.66,3.28,3.28,0,0,1,0-.39,5,5,0,0,1,.09-.51l1.67-7.2a5.16,5.16,0,0,1,2.91.57A2.58,2.58,0,0,1,93.24,13c0,.14,0,.31,0,.51s0,.45-.07.73l.7.14,1.88-8.07L95,6.18a5.62,5.62,0,0,1-1.74,2.61,9.05,9.05,0,0,1-3.45.51l1.51-6.56a2.23,2.23,0,0,1,.47-1.06,2,2,0,0,1,1.3-.28c2,0,3.29.5,3.93,1.51a6.13,6.13,0,0,1,.6,3l.68.13L99.4.48H85.73ZM114,6.14l.92-5.66h-14l-1,5,.66.2a7.81,7.81,0,0,1,2.23-3.16,4.91,4.91,0,0,1,3.23-1.06l-3.73,15.85a2.84,2.84,0,0,1-1,1.85,3.48,3.48,0,0,1-1.6.26v.76h8.4v-.76a5.82,5.82,0,0,1-1.71-.3c-.27-.13-.41-.45-.41-.95a2.26,2.26,0,0,1,0-.26c0-.09,0-.2,0-.33l.21-1,3.53-15.1a3.65,3.65,0,0,1,2.14.63c.89.7,1.35,2,1.39,3.94Zm9.44,12.38a9.39,9.39,0,0,1-3.94.75,1.77,1.77,0,0,1-1.14-.26.87.87,0,0,1-.27-.66,3.28,3.28,0,0,1,0-.39,5,5,0,0,1,.09-.51l1.67-7.2a5.12,5.12,0,0,1,2.91.57,2.58,2.58,0,0,1,.75,2.15c0,.14,0,.31,0,.51s0,.45-.07.73l.7.14L126,6.28l-.7-.1a5.78,5.78,0,0,1-1.74,2.61,9.16,9.16,0,0,1-3.46.51l1.51-6.56a2.14,2.14,0,0,1,.48-1.06,2,2,0,0,1,1.3-.28c2,0,3.28.5,3.92,1.51a6,6,0,0,1,.6,3l.68.13,1.08-5.6H116v.76a4.67,4.67,0,0,1,1.51.31c.22.13.34.44.34.94a4,4,0,0,1-.08.7c0,.28-.11.58-.18.92l-3.12,13.24a3.18,3.18,0,0,1-.72,1.59,2.56,2.56,0,0,1-1.34.52v.76h14.06l1.5-5.74-.62-.13A8.14,8.14,0,0,1,123.39,18.52Zm23.32-9.84a11.62,11.62,0,0,1-2.89,7.84,10.6,10.6,0,0,1-8.42,3.7h-7.29v-.76a2.58,2.58,0,0,0,1.18-.41,2.94,2.94,0,0,0,.88-1.71l3.11-13.23c.09-.38.16-.69.21-1a4.49,4.49,0,0,0,.07-.67c0-.5-.12-.81-.36-.94a4.8,4.8,0,0,0-1.5-.31V.48h7.36a7.16,7.16,0,0,1,5.69,2.22A8.72,8.72,0,0,1,146.71,8.68ZM143,6.87a8,8,0,0,0-.64-3.48,3.52,3.52,0,0,0-3.44-2,1.52,1.52,0,0,0-1.11.31,1.75,1.75,0,0,0-.41.83l-3.5,14.9c0,.14,0,.27-.07.39s0,.21,0,.3a1.06,1.06,0,0,0,.3.84,1.75,1.75,0,0,0,1.1.26q4.53,0,6.55-5.42A19.84,19.84,0,0,0,143,6.87Z",opacity:1,strokeColor:"",fillColor:"#516c30",width:146.706,height:20.811,stampFillColor:"#e6eddf",stampStrokeColor:""};break;case"ForPublicRelease":case"For Public Release":t={iconName:"For Public Release",pathdata:"M10.33.48l-.65,5.6L9.27,6a9.74,9.74,0,0,0-.36-3A2.27,2.27,0,0,0,6.57,1.4a.85.85,0,0,0-.71.26,2.67,2.67,0,0,0-.3,1.08L4.65,9.28a3.45,3.45,0,0,0,2-.52,6.65,6.65,0,0,0,1-2.59l.43.1L7,14.34l-.42-.14c0-.29,0-.54,0-.75s0-.38,0-.49a4.17,4.17,0,0,0-.39-2.09,1.91,1.91,0,0,0-1.71-.64l-1,7.21c0,.13,0,.24,0,.35s0,.21,0,.31a1.45,1.45,0,0,0,.38,1.17,1.17,1.17,0,0,0,.72.19v.76H0v-.76a1.31,1.31,0,0,0,.82-.54,4.39,4.39,0,0,0,.42-1.58L3.13,4.11c0-.27.06-.51.09-.71,0-.41.07-.73.07-1a1.34,1.34,0,0,0-.21-.9,2.13,2.13,0,0,0-.91-.3V.48ZM20.5,7.11a22.43,22.43,0,0,1-1.88,9.07q-2,4.61-4.62,4.6a3,3,0,0,1-2.67-1.92,10.91,10.91,0,0,1-1-5.14,22.46,22.46,0,0,1,1.92-9.19Q14.23,0,16.71,0a3.11,3.11,0,0,1,2.72,1.92A10.72,10.72,0,0,1,20.5,7.11ZM18.28,4.6a7.7,7.7,0,0,0-.38-2.55c-.26-.7-.65-1-1.19-1-1.28,0-2.35,2.17-3.22,6.53a43.69,43.69,0,0,0-1,8.26,10.72,10.72,0,0,0,.19,2.2c.24,1.18.69,1.77,1.33,1.77s1.16-.43,1.65-1.29a19.35,19.35,0,0,0,1.54-4.93A48.7,48.7,0,0,0,18,8.71,38.21,38.21,0,0,0,18.28,4.6Zm11.59.16a8.73,8.73,0,0,1-.24,2,5.64,5.64,0,0,1-.8,1.9,3.49,3.49,0,0,1-.93,1,7.31,7.31,0,0,1-1,.52c0,.3.08.49.1.57l1.18,6.66a4.54,4.54,0,0,0,.52,1.7,1.1,1.1,0,0,0,.83.41v.76H26.46l-1.65-9.76h-.43l-.91,6.14-.13,1a2,2,0,0,0,0,.25,2.62,2.62,0,0,0,0,.28,1.57,1.57,0,0,0,.2,1,1.77,1.77,0,0,0,.92.32v.76H19.86v-.76a1.33,1.33,0,0,0,.81-.52,4.35,4.35,0,0,0,.43-1.59L23,4.11c0-.27.07-.51.09-.71a8.23,8.23,0,0,0,.07-1,1.3,1.3,0,0,0-.21-.9,2.08,2.08,0,0,0-.91-.3V.48h4.22A3.79,3.79,0,0,1,28.44,1C29.4,1.66,29.87,2.91,29.87,4.76Zm-2.31-.47a5.77,5.77,0,0,0-.32-2,1.12,1.12,0,0,0-1.09-.81.5.5,0,0,0-.46.26,3.87,3.87,0,0,0-.24,1.05L24.52,9.5a3.73,3.73,0,0,0,1.22-.2,2.1,2.1,0,0,0,1.1-1.13,8.41,8.41,0,0,0,.49-1.62A10.75,10.75,0,0,0,27.56,4.29Zm14.92.78a7.06,7.06,0,0,1-1.14,4.22,3.5,3.5,0,0,1-3,1.58l-.44,0-.89-.11-.84,5.86-.12,1a1.45,1.45,0,0,0,0,.3,2.81,2.81,0,0,0,0,.29,1.38,1.38,0,0,0,.21.94,1.93,1.93,0,0,0,.91.31v.76H32.65v-.76a1.28,1.28,0,0,0,.8-.52,4.3,4.3,0,0,0,.44-1.59L35.77,4.11c0-.3.08-.6.11-.9a5.21,5.21,0,0,0,0-.72,1.29,1.29,0,0,0-.3-1,1.82,1.82,0,0,0-.81-.23V.48h4.4a3,3,0,0,1,1.86.57C42,1.78,42.48,3.12,42.48,5.07Zm-2.23-.82a5.74,5.74,0,0,0-.3-2,1.07,1.07,0,0,0-1-.79.5.5,0,0,0-.49.28,5.11,5.11,0,0,0-.24,1l-1,7,.28.06h.25a1.79,1.79,0,0,0,1.2-.36,2.88,2.88,0,0,0,.73-1.18,10.56,10.56,0,0,0,.44-2A15.74,15.74,0,0,0,40.25,4.25Zm12.91-3V.48H50v.76a1.46,1.46,0,0,1,.82.32A2,2,0,0,1,51.24,3a15,15,0,0,1-.14,1.57q0-.17-.15,1.17l-.89,6.16a29.63,29.63,0,0,1-1,4.77c-.55,1.63-1.31,2.44-2.28,2.44a1.59,1.59,0,0,1-1.38-.77,4.16,4.16,0,0,1-.5-2.23q0-.63.15-2c.06-.5.15-1.14.27-1.93l1.26-8.84a4.13,4.13,0,0,1,.46-1.66,1.66,1.66,0,0,1,1-.46V.48H43.34v.76a2,2,0,0,1,.9.3,1.3,1.3,0,0,1,.21.9,7.27,7.27,0,0,1,0,.75c0,.29-.07.59-.11.92l-1,7.24c-.16,1.14-.27,1.93-.32,2.38a19.16,19.16,0,0,0-.12,2,6.13,6.13,0,0,0,1,3.71,2.93,2.93,0,0,0,2.43,1.33c1.39,0,2.45-.9,3.17-2.69a29.58,29.58,0,0,0,1.23-5.61l1-6.74A24.45,24.45,0,0,1,52.3,2.1,1.22,1.22,0,0,1,53.16,1.24Zm7.14,9.82a5.87,5.87,0,0,1,.68,3,8.55,8.55,0,0,1-1,4.27,3.68,3.68,0,0,1-3.48,1.84H51.82v-.76a1.3,1.3,0,0,0,.72-.4,3.94,3.94,0,0,0,.52-1.71L55,4.1c0-.39.09-.72.12-1s0-.46,0-.6c0-.53-.07-.86-.23-1A1.64,1.64,0,0,0,54,1.24V.48h4.17a3.4,3.4,0,0,1,2.67,1,4.91,4.91,0,0,1,1,3.38,5.33,5.33,0,0,1-1.17,3.61,4.8,4.8,0,0,1-1.68,1.22A4.84,4.84,0,0,1,60.3,11.06Zm-1.66,2.45a3.81,3.81,0,0,0-.73-2.74,2.63,2.63,0,0,0-1.58-.52l-1,7.2a4,4,0,0,0-.05.4c0,.15,0,.32,0,.51a.9.9,0,0,0,.33.82,1.13,1.13,0,0,0,.59.12c1,0,1.67-.87,2.1-2.59A13.54,13.54,0,0,0,58.64,13.51Zm.12-5.29A5.92,5.92,0,0,0,59.4,6.1a12.74,12.74,0,0,0,.13-1.74,6.54,6.54,0,0,0-.29-2.11,1.11,1.11,0,0,0-1.13-.81.49.49,0,0,0-.49.32,3.52,3.52,0,0,0-.23,1l-.94,6.62A7.45,7.45,0,0,0,58,9,1.8,1.8,0,0,0,58.76,8.22Zm11.71,6.14a8.78,8.78,0,0,1-2,3.87,4,4,0,0,1-2.74,1,.89.89,0,0,1-.63-.21.93.93,0,0,1-.22-.7,3.4,3.4,0,0,1,0-.48c0-.14,0-.28,0-.44l2-14.08a3.8,3.8,0,0,1,.47-1.64,1.94,1.94,0,0,1,1.08-.48V.48H63.6v.76a2,2,0,0,1,.91.31,1.36,1.36,0,0,1,.22.94c0,.2,0,.42,0,.67s-.07.57-.13,1L62.68,17.34a4.31,4.31,0,0,1-.44,1.6,1.28,1.28,0,0,1-.8.52v.76h8.5l.9-5.74ZM76.89.48H72.32v.76a1.92,1.92,0,0,1,.9.31c.15.13.22.44.22.94a5.56,5.56,0,0,1,0,.67c0,.26-.07.57-.12,1L71.39,17.35A4.35,4.35,0,0,1,71,18.94a1.33,1.33,0,0,1-.81.52v.76h4.57v-.76a1.81,1.81,0,0,1-.91-.32,1.39,1.39,0,0,1-.21-.94c0-.09,0-.18,0-.28l0-.3.12-1L75.65,3.36a4.43,4.43,0,0,1,.43-1.6,1.3,1.3,0,0,1,.81-.52Zm8.46.15A.38.38,0,0,1,85,.87a4.12,4.12,0,0,1-1-.44A3.51,3.51,0,0,0,82.37,0Q79.84,0,78,3.92a21.42,21.42,0,0,0-1.84,9.24,11.15,11.15,0,0,0,1.2,5.57,3.51,3.51,0,0,0,3.05,2.08,3.15,3.15,0,0,0,2.21-1.09,8.92,8.92,0,0,0,1.89-3.35L84,15.72A11.08,11.08,0,0,1,83,17.81a2.71,2.71,0,0,1-2.12,1.43,2,2,0,0,1-1.59-1.13,8.33,8.33,0,0,1-.74-4.2A29.46,29.46,0,0,1,79.7,5.62Q81,1.08,82.8,1.07c.59,0,1.07.38,1.45,1.14a8,8,0,0,1,.57,3.47,2.73,2.73,0,0,1,0,.32c0,.08,0,.32,0,.73l.48.17L86.05,0h-.47A2.93,2.93,0,0,1,85.35.63Zm21.41,13.73.37.12-.9,5.74H94.72l-1.66-9.76h-.43l-.91,6.14-.13,1c0,.08,0,.16,0,.25s0,.19,0,.28a1.57,1.57,0,0,0,.2,1,1.81,1.81,0,0,0,.92.32v.76H88.11v-.76a1.3,1.3,0,0,0,.81-.52,4.35,4.35,0,0,0,.43-1.59L91.24,4.11c0-.27.07-.51.09-.71a8.23,8.23,0,0,0,.07-1,1.3,1.3,0,0,0-.21-.9,2.08,2.08,0,0,0-.91-.3V.48h4.23A3.81,3.81,0,0,1,96.7,1c1,.65,1.43,1.9,1.43,3.75a8.73,8.73,0,0,1-.24,2,5.66,5.66,0,0,1-.81,1.9,3.49,3.49,0,0,1-.93,1,6.73,6.73,0,0,1-1,.52c0,.3.09.49.1.57l1.18,6.66a4.74,4.74,0,0,0,.52,1.7,1,1,0,0,0,.78.39,1.23,1.23,0,0,0,.78-.5A4.3,4.3,0,0,0,99,17.35l1.88-13.24c.05-.34.09-.64.12-.92a6.28,6.28,0,0,0,0-.7,1.45,1.45,0,0,0-.2-.94,2,2,0,0,0-.91-.31V.48h8.26l-.65,5.6L107.1,6a9.57,9.57,0,0,0-.36-3,2.3,2.3,0,0,0-2.38-1.51c-.41,0-.67.09-.78.28a2.87,2.87,0,0,0-.29,1.06l-.91,6.56a3.57,3.57,0,0,0,2.08-.51,6.59,6.59,0,0,0,1.06-2.61l.42.1-1.14,8.08-.42-.15c0-.28,0-.52.05-.73s0-.37,0-.51a3.6,3.6,0,0,0-.46-2.15,2.14,2.14,0,0,0-1.75-.57l-1,7.2a4.7,4.7,0,0,0-.06.51c0,.16,0,.29,0,.39a1.12,1.12,0,0,0,.17.66.77.77,0,0,0,.69.26,3.77,3.77,0,0,0,2.37-.75A7.71,7.71,0,0,0,106.76,14.36ZM95.09,8.17a7.75,7.75,0,0,0,.49-1.62,10.75,10.75,0,0,0,.23-2.26,5.77,5.77,0,0,0-.32-2,1.11,1.11,0,0,0-1.08-.81.48.48,0,0,0-.46.26,3.44,3.44,0,0,0-.25,1.05L92.78,9.5A3.78,3.78,0,0,0,94,9.3,2.08,2.08,0,0,0,95.09,8.17Zm21.32,6.19a8.67,8.67,0,0,1-2,3.87,4,4,0,0,1-2.73,1,.89.89,0,0,1-.63-.21.93.93,0,0,1-.23-.7c0-.19,0-.35,0-.48s0-.28,0-.44l2-14.08a3.84,3.84,0,0,1,.46-1.64,2,2,0,0,1,1.08-.48V.48h-4.86v.76a2,2,0,0,1,.91.31,1.38,1.38,0,0,1,.21.94,5.56,5.56,0,0,1,0,.67c0,.26-.07.57-.12,1l-1.89,13.23a4.16,4.16,0,0,1-.43,1.6,1.27,1.27,0,0,1-.81.52v.76h8.51l.9-5.74Zm8.64,0a7.71,7.71,0,0,1-2.38,4.16,3.82,3.82,0,0,1-2.38.75.77.77,0,0,1-.69-.26,1.2,1.2,0,0,1-.17-.66c0-.1,0-.23,0-.39a4.7,4.7,0,0,1,.06-.51l1-7.2a2.17,2.17,0,0,1,1.76.57,3.69,3.69,0,0,1,.45,2.15c0,.14,0,.31,0,.51s0,.45,0,.73l.42.15,1.13-8.08-.42-.1a6.79,6.79,0,0,1-1,2.61,3.63,3.63,0,0,1-2.09.51l.91-6.56a2.87,2.87,0,0,1,.29-1.06c.12-.19.38-.28.78-.28A2.3,2.3,0,0,1,125,2.91a9.57,9.57,0,0,1,.36,3l.41.13.65-5.6h-8.26v.76a1.93,1.93,0,0,1,.91.31,1.45,1.45,0,0,1,.2.94,6.28,6.28,0,0,1,0,.7c0,.28-.07.58-.11.92l-1.89,13.24a4.35,4.35,0,0,1-.43,1.59,1.33,1.33,0,0,1-.81.52v.76h8.5l.91-5.74Zm10.29,5.15v.71h-4.65v-.71a1.44,1.44,0,0,0,.93-.41,2.08,2.08,0,0,0,.27-1.29c0-.22,0-.75-.08-1.58,0-.17-.06-.89-.15-2.15h-3.31l-.89,3a5.32,5.32,0,0,0-.16.66,3.4,3.4,0,0,0-.08.69,1.06,1.06,0,0,0,.2.78,1.68,1.68,0,0,0,.79.3v.71h-3v-.71a1.8,1.8,0,0,0,.63-.53,6.45,6.45,0,0,0,.67-1.56L132.19.07h.4L134.06,17a7.15,7.15,0,0,0,.36,2.08A1.13,1.13,0,0,0,135.34,19.51Zm-3.79-6.6L131,5.73l-2.27,7.18Zm9.6-4-1.32-2.09a4.57,4.57,0,0,1-.47-.94,5.12,5.12,0,0,1-.28-1.78,5.57,5.57,0,0,1,.27-1.77c.27-.83.7-1.24,1.29-1.24s1.21.51,1.57,1.54A8.78,8.78,0,0,1,142.65,5l.06,1,.39.1.63-5.91h-.46a2.09,2.09,0,0,1-.25.54.46.46,0,0,1-.41.21.57.57,0,0,1-.24-.05,1.23,1.23,0,0,1-.26-.12l-.39-.24a2.34,2.34,0,0,0-.5-.25,2.41,2.41,0,0,0-.85-.16,2.55,2.55,0,0,0-2.31,1.67,9.11,9.11,0,0,0-.83,4.05,10.47,10.47,0,0,0,1.88,5.5A9.21,9.21,0,0,1,141,16a6.49,6.49,0,0,1-.5,2.63,1.59,1.59,0,0,1-1.43,1.14,1.42,1.42,0,0,1-1-.4,3.55,3.55,0,0,1-.78-1.16,7.09,7.09,0,0,1-.52-1.92c-.05-.43-.1-1.12-.13-2.06l-.44-.06-.55,6.62h.46a4.11,4.11,0,0,1,.25-.82.36.36,0,0,1,.36-.23.47.47,0,0,1,.17,0,2.38,2.38,0,0,1,.27.18l.39.27a3.52,3.52,0,0,0,.84.43,2.48,2.48,0,0,0,.84.15,2.91,2.91,0,0,0,2.63-1.88,9.24,9.24,0,0,0,1-4.21,9.85,9.85,0,0,0-.49-3.24A12.1,12.1,0,0,0,141.15,8.92Zm7.75-7.24c.12-.19.38-.28.78-.28a2.3,2.3,0,0,1,2.38,1.51,9.57,9.57,0,0,1,.36,3l.41.13.65-5.6h-8.26v.76a1.93,1.93,0,0,1,.91.31c.14.13.2.44.2.94a6.28,6.28,0,0,1,0,.7c0,.28-.07.58-.11.92l-1.89,13.24a4.35,4.35,0,0,1-.43,1.59,1.33,1.33,0,0,1-.81.52v.76h8.5l.91-5.74-.38-.12a7.71,7.71,0,0,1-2.38,4.16,3.82,3.82,0,0,1-2.38.75.77.77,0,0,1-.69-.26,1.2,1.2,0,0,1-.17-.66c0-.1,0-.23,0-.39a4.7,4.7,0,0,1,.06-.51l1-7.2a2.17,2.17,0,0,1,1.76.57,3.69,3.69,0,0,1,.45,2.15c0,.14,0,.31,0,.51s0,.45,0,.73l.42.15,1.14-8.08-.43-.1a6.79,6.79,0,0,1-1.05,2.61,3.63,3.63,0,0,1-2.09.51l.91-6.56A2.87,2.87,0,0,1,148.9,1.68Z",opacity:1,strokeColor:"",fillColor:"#192760",width:153.485,height:20.812,stampFillColor:"#dce3ef",stampStrokeColor:""};break;case"NotForPublicRelease":case"Not For Public Release":t={iconName:"Not For Public Release",pathdata:"M9,2.35q-.21.9-.51,3.48L6.69,21.05H6.38L3.11,4.45,1.85,15.19c-.1.89-.17,1.56-.2,2s0,.55,0,.81A2.39,2.39,0,0,0,2,19.45a1.09,1.09,0,0,0,.67.33v.77H0v-.77a1.22,1.22,0,0,0,.71-.91,33.91,33.91,0,0,0,.57-3.68L2.7,2.88l-.06-.3a2.09,2.09,0,0,0-.39-1.07,1,1,0,0,0-.59-.25V.48H4.2L6.93,14.36l1-8.49c.06-.53.11-1,.14-1.4.06-.63.08-1.08.08-1.37a2.67,2.67,0,0,0-.3-1.5,1.07,1.07,0,0,0-.69-.34V.48H9.73v.78l-.18.06C9.29,1.41,9.09,1.75,9,2.35ZM16.74,2a13.19,13.19,0,0,1,.87,5.28,27.45,27.45,0,0,1-1.54,9.22q-1.65,4.66-3.79,4.67-1.35,0-2.19-1.95a13.31,13.31,0,0,1-.85-5.23A27.59,27.59,0,0,1,10.82,4.6C11.91,1.53,13.15,0,14.51,0,15.41,0,16.16.65,16.74,2Zm-.95,2.73a9.33,9.33,0,0,0-.31-2.59c-.21-.72-.54-1.08-1-1.08-1.05,0-1.92,2.21-2.64,6.64a54.69,54.69,0,0,0-.81,8.4,14.21,14.21,0,0,0,.15,2.23c.2,1.2.57,1.8,1.1,1.8s.95-.43,1.35-1.31a22.84,22.84,0,0,0,1.26-5c.28-1.55.49-3.19.65-4.91S15.79,5.74,15.79,4.68Zm2.3.93.32.21A10.7,10.7,0,0,1,19.52,2.6a1.87,1.87,0,0,1,1.6-1.08L19.27,17.63a4,4,0,0,1-.52,1.88,1,1,0,0,1-.79.27v.77h4.17v-.77a1.72,1.72,0,0,1-.85-.3,1.56,1.56,0,0,1-.2-1,2.44,2.44,0,0,1,0-.27c0-.08,0-.2,0-.33l.11-1L23,1.52A1.31,1.31,0,0,1,24,2.17a8.49,8.49,0,0,1,.69,4l.33.07L25.5.48H18.57ZM28.75.48v.78a1.39,1.39,0,0,1,.74.31,1.44,1.44,0,0,1,.18.9q0,.36-.06,1c0,.2-.05.44-.07.71L28,17.62a5.34,5.34,0,0,1-.35,1.61,1.05,1.05,0,0,1-.67.55v.77H30.7v-.77a.82.82,0,0,1-.6-.2,1.69,1.69,0,0,1-.31-1.18c0-.11,0-.22,0-.32l0-.35.83-7.33a1.42,1.42,0,0,1,1.4.64,5,5,0,0,1,.33,2.13c0,.12,0,.28,0,.5s0,.47,0,.76l.34.15.94-8.21-.35-.1a8.12,8.12,0,0,1-.85,2.64,2.42,2.42,0,0,1-1.64.52l.74-6.65a3.34,3.34,0,0,1,.25-1.1.64.64,0,0,1,.59-.26A1.91,1.91,0,0,1,34.28,3a11.32,11.32,0,0,1,.29,3.06l.34.13.54-5.7Zm15,6.75a27.46,27.46,0,0,1-1.55,9.22q-1.65,4.66-3.79,4.67-1.35,0-2.19-1.95a13.49,13.49,0,0,1-.85-5.23A27.59,27.59,0,0,1,37,4.6Q38.65,0,40.69,0c.91,0,1.65.65,2.23,2A13.17,13.17,0,0,1,43.8,7.23ZM42,4.68a9.3,9.3,0,0,0-.32-2.59c-.21-.72-.53-1.08-1-1.08Q39.12,1,38,7.65a54.69,54.69,0,0,0-.81,8.4,13,13,0,0,0,.16,2.23c.2,1.2.56,1.8,1.09,1.8s1-.43,1.35-1.31a23.28,23.28,0,0,0,1.27-5c.27-1.55.49-3.19.64-4.91S42,5.74,42,4.68ZM50.32,1c.78.66,1.17,1.93,1.17,3.8a11,11,0,0,1-.19,2,7.2,7.2,0,0,1-.66,1.93,3.45,3.45,0,0,1-.77,1,5.58,5.58,0,0,1-.8.52c0,.31.07.51.08.58l1,6.78a5.63,5.63,0,0,0,.42,1.72.85.85,0,0,0,.69.42v.77H48.69l-1.36-9.92H47l-.75,6.25-.1,1c0,.08,0,.16,0,.26v.28a1.94,1.94,0,0,0,.16,1,1.39,1.39,0,0,0,.75.32v.77H43.27v-.77a1.07,1.07,0,0,0,.66-.53,4.83,4.83,0,0,0,.36-1.61L45.84,4.18c0-.28.06-.52.08-.72,0-.42,0-.75,0-1a1.48,1.48,0,0,0-.17-.91,1.39,1.39,0,0,0-.74-.31V.48h3.46A2.67,2.67,0,0,1,50.32,1Zm-.73,3.34a7.2,7.2,0,0,0-.26-2.09c-.18-.55-.47-.83-.89-.83a.4.4,0,0,0-.38.27,4.46,4.46,0,0,0-.2,1.06L47.1,9.65a2.39,2.39,0,0,0,1-.2A2,2,0,0,0,49,8.31a10,10,0,0,0,.4-1.65A12.71,12.71,0,0,0,49.59,4.37Zm11.1-3.3c.77.74,1.16,2.1,1.16,4.09a8.51,8.51,0,0,1-.94,4.28A2.78,2.78,0,0,1,58.48,11h-.36l-.73-.12-.69,6-.11,1c0,.1,0,.2,0,.3s0,.2,0,.3a1.7,1.7,0,0,0,.17.95,1.47,1.47,0,0,0,.75.32v.77H53.77v-.77a1.07,1.07,0,0,0,.66-.53,4.83,4.83,0,0,0,.36-1.61L56.34,4.17l.09-.9c0-.31,0-.55,0-.74a1.58,1.58,0,0,0-.25-1,1.33,1.33,0,0,0-.67-.23V.48h3.62A2.11,2.11,0,0,1,60.69,1.07ZM60,4.32a7,7,0,0,0-.25-2.06c-.17-.53-.45-.8-.84-.8a.4.4,0,0,0-.4.29,6.14,6.14,0,0,0-.2,1L57.5,9.93l.23.06h.21a1.3,1.3,0,0,0,1-.36,3.17,3.17,0,0,0,.6-1.2,12.69,12.69,0,0,0,.36-2A19.64,19.64,0,0,0,60,4.32Zm10.6-3.06V.48H68v.78a1.17,1.17,0,0,1,.68.32A2.43,2.43,0,0,1,69,3.05c0,.32,0,.85-.11,1.6,0-.12,0,.27-.12,1.18l-.73,6.26a36.28,36.28,0,0,1-.8,4.86c-.45,1.65-1.07,2.47-1.87,2.47a1.27,1.27,0,0,1-1.13-.78,5.05,5.05,0,0,1-.41-2.27c0-.43,0-1.1.13-2,.05-.51.12-1.17.21-2l1-9a4.69,4.69,0,0,1,.38-1.69,1.24,1.24,0,0,1,.8-.47V.48H62.55v.78a1.39,1.39,0,0,1,.74.31,1.56,1.56,0,0,1,.17.91c0,.21,0,.47,0,.76s-.06.6-.1.94l-.85,7.36c-.14,1.15-.23,2-.27,2.42-.06.76-.1,1.44-.1,2a7.4,7.4,0,0,0,.81,3.78,2.35,2.35,0,0,0,2,1.35c1.14,0,2-.91,2.6-2.74a35.69,35.69,0,0,0,1-5.7l.79-6.85a30.83,30.83,0,0,1,.58-3.7A1.15,1.15,0,0,1,70.61,1.26Zm5.86,10a7.16,7.16,0,0,1,.56,3.1,10.31,10.31,0,0,1-.86,4.34,2.93,2.93,0,0,1-2.86,1.87h-3.8v-.77a1.07,1.07,0,0,0,.59-.41,4.64,4.64,0,0,0,.43-1.73L72.08,4.17c0-.4.08-.73.1-1s0-.46,0-.61a1.83,1.83,0,0,0-.19-1,1.22,1.22,0,0,0-.73-.28V.48h3.43a2.58,2.58,0,0,1,2.19,1.06A5.92,5.92,0,0,1,77.69,5a6.3,6.3,0,0,1-1,3.67,4.18,4.18,0,0,1-1.39,1.24A4.36,4.36,0,0,1,76.47,11.24Zm-1.36,2.49a4.59,4.59,0,0,0-.6-2.79,2,2,0,0,0-1.3-.52l-.84,7.32c0,.12,0,.25,0,.4s0,.33,0,.52a1.06,1.06,0,0,0,.27.84.77.77,0,0,0,.48.11c.8,0,1.38-.87,1.73-2.63A17.3,17.3,0,0,0,75.11,13.73Zm.1-5.38a7.33,7.33,0,0,0,.52-2.15,15,15,0,0,0,.11-1.77,7.89,7.89,0,0,0-.24-2.14c-.16-.55-.46-.83-.93-.83a.42.42,0,0,0-.4.33,4.42,4.42,0,0,0-.19,1l-.77,6.73a5.23,5.23,0,0,0,1.27-.36A1.77,1.77,0,0,0,75.21,8.35Zm9.61,6.24a9.73,9.73,0,0,1-1.66,3.94,2.93,2.93,0,0,1-2.25,1,.64.64,0,0,1-.51-.21,1,1,0,0,1-.19-.71c0-.19,0-.35,0-.49s0-.29,0-.44L81.91,3.41a4.53,4.53,0,0,1,.38-1.66,1.47,1.47,0,0,1,.88-.49V.48h-4v.78a1.39,1.39,0,0,1,.75.32,1.59,1.59,0,0,1,.18.95c0,.2,0,.43,0,.68s0,.58-.1,1L78.42,17.62a5.28,5.28,0,0,1-.35,1.63,1.12,1.12,0,0,1-.67.53v.77h7l.73-5.83ZM90.09,1.26V.48H86.34v.78a1.38,1.38,0,0,1,.74.32,1.59,1.59,0,0,1,.18.95q0,.3,0,.69c0,.25-.06.57-.11.95L85.58,17.64a5.41,5.41,0,0,1-.36,1.61,1.07,1.07,0,0,1-.66.53v.77h3.75v-.77a1.47,1.47,0,0,1-.75-.32,1.78,1.78,0,0,1-.17-1c0-.08,0-.18,0-.28s0-.2,0-.3l.1-1L89.07,3.41a5.68,5.68,0,0,1,.35-1.62A1.1,1.1,0,0,1,90.09,1.26Zm7-.62a.33.33,0,0,1-.3.24,3.1,3.1,0,0,1-.82-.44A2.5,2.5,0,0,0,94.59,0Q92.51,0,91,4a26.57,26.57,0,0,0-1.51,9.39,13.57,13.57,0,0,0,1,5.67c.66,1.41,1.49,2.11,2.5,2.11A2.46,2.46,0,0,0,94.79,20a9.66,9.66,0,0,0,1.55-3.4L96,16a12.68,12.68,0,0,1-.89,2.13c-.54,1-1.12,1.45-1.74,1.45-.47,0-.91-.39-1.31-1.15a10.33,10.33,0,0,1-.6-4.27,36.59,36.59,0,0,1,1-8.43c.72-3.08,1.57-4.63,2.54-4.63.48,0,.88.39,1.19,1.16a10,10,0,0,1,.47,3.53V6.1c0,.07,0,.32,0,.74L97,7l.64-7h-.38A4.28,4.28,0,0,1,97,.64Zm17.57,14,.31.13-.75,5.83h-9.45l-1.35-9.92H103l-.74,6.25-.11,1c0,.08,0,.16,0,.26v.28a1.94,1.94,0,0,0,.16,1,1.39,1.39,0,0,0,.75.32v.77H99.3v-.77a1.12,1.12,0,0,0,.67-.53,5.18,5.18,0,0,0,.35-1.61l1.55-13.46c0-.28.06-.52.08-.72,0-.42,0-.75,0-1a1.48,1.48,0,0,0-.17-.91,1.39,1.39,0,0,0-.74-.31V.48h3.46a2.64,2.64,0,0,1,1.8.55c.78.66,1.17,1.93,1.17,3.8a11,11,0,0,1-.19,2,6.57,6.57,0,0,1-.66,1.93,3.61,3.61,0,0,1-.76,1,6.48,6.48,0,0,1-.81.52c0,.31.07.51.08.58l1,6.78a5.63,5.63,0,0,0,.42,1.72.84.84,0,0,0,.65.4,1.06,1.06,0,0,0,.64-.51,5.41,5.41,0,0,0,.36-1.61l1.54-13.47c0-.34.07-.65.1-.92s0-.52,0-.72a1.61,1.61,0,0,0-.17-.95,1.31,1.31,0,0,0-.74-.32V.48h6.78l-.53,5.7-.34-.13a11.8,11.8,0,0,0-.3-3.09,1.92,1.92,0,0,0-2-1.54c-.33,0-.55.1-.64.29a3.46,3.46,0,0,0-.24,1.07L111,9.45a2.6,2.6,0,0,0,1.72-.51,7.79,7.79,0,0,0,.86-2.66l.35.11-.93,8.2-.35-.15c0-.28,0-.53,0-.74v-.52a4.42,4.42,0,0,0-.37-2.18,1.56,1.56,0,0,0-1.44-.58l-.83,7.32c0,.18,0,.35,0,.51s0,.3,0,.4a1.45,1.45,0,0,0,.13.67c.09.18.28.26.57.26a2.72,2.72,0,0,0,2-.76A8.33,8.33,0,0,0,114.61,14.59ZM105,8.31a9.81,9.81,0,0,0,.41-1.65,13.72,13.72,0,0,0,.18-2.29,6.87,6.87,0,0,0-.26-2.09c-.17-.55-.47-.83-.89-.83a.4.4,0,0,0-.38.27,5.05,5.05,0,0,0-.2,1.06l-.76,6.87a2.39,2.39,0,0,0,1-.2A2,2,0,0,0,105,8.31Zm17.51,6.28a9.86,9.86,0,0,1-1.67,3.94,2.93,2.93,0,0,1-2.25,1,.64.64,0,0,1-.51-.21,1.1,1.1,0,0,1-.19-.71c0-.19,0-.35,0-.49s0-.29,0-.44l1.64-14.32A4.53,4.53,0,0,1,120,1.75a1.47,1.47,0,0,1,.89-.49V.48h-4v.78a1.39,1.39,0,0,1,.75.32,1.59,1.59,0,0,1,.18.95c0,.2,0,.43,0,.68s0,.58-.1,1l-1.55,13.45a5.28,5.28,0,0,1-.35,1.63,1.1,1.1,0,0,1-.66.53v.77h7l.74-5.83Zm7.09,0a8.33,8.33,0,0,1-2,4.23,2.73,2.73,0,0,1-2,.76c-.29,0-.48-.08-.57-.26a1.45,1.45,0,0,1-.13-.67c0-.1,0-.23,0-.4s0-.33,0-.51l.83-7.32a1.58,1.58,0,0,1,1.44.58,4.42,4.42,0,0,1,.37,2.18c0,.14,0,.31,0,.52s0,.46,0,.74l.34.15.94-8.2-.35-.11a7.71,7.71,0,0,1-.87,2.66,2.56,2.56,0,0,1-1.71.51l.75-6.67A3.46,3.46,0,0,1,127,1.71c.09-.19.31-.29.64-.29a1.92,1.92,0,0,1,2,1.54,11.8,11.8,0,0,1,.3,3.09l.33.13.54-5.7H124v.78a1.31,1.31,0,0,1,.75.32,1.7,1.7,0,0,1,.17.95,6.75,6.75,0,0,1,0,.72c0,.27-.05.58-.09.92l-1.55,13.47a5.18,5.18,0,0,1-.35,1.61,1.12,1.12,0,0,1-.67.53v.77h7l.75-5.83Zm8.45,5.24v.72h-3.83v-.72a1.11,1.11,0,0,0,.77-.41,2.52,2.52,0,0,0,.23-1.31c0-.23,0-.77-.07-1.62,0-.17-.05-.9-.13-2.18h-2.71l-.74,3c0,.2-.09.43-.13.67a4.44,4.44,0,0,0-.06.71,1.27,1.27,0,0,0,.16.79,1.35,1.35,0,0,0,.65.3v.72h-2.47v-.72a1.66,1.66,0,0,0,.52-.54,7.25,7.25,0,0,0,.55-1.58L135.49.07h.33L137,17.23a8.87,8.87,0,0,0,.3,2.11A.9.9,0,0,0,138.08,19.83ZM135,13.12l-.47-7.3-1.86,7.3Zm7.88-4-1.09-2.13a6.38,6.38,0,0,1-.39-1,6.65,6.65,0,0,1-.23-1.82,6.93,6.93,0,0,1,.23-1.8q.33-1.26,1-1.26c.57,0,1,.53,1.3,1.57a10.87,10.87,0,0,1,.36,2.39l0,1,.33.1.51-6h-.38a2.26,2.26,0,0,1-.2.54.38.38,0,0,1-.34.22.54.54,0,0,1-.19-.05l-.22-.13-.32-.25a2.36,2.36,0,0,0-.41-.25,1.82,1.82,0,0,0-.7-.16c-.81,0-1.44.57-1.9,1.7a11.21,11.21,0,0,0-.68,4.12,12.36,12.36,0,0,0,1.55,5.58,10.74,10.74,0,0,1,1.54,4.78,7.8,7.8,0,0,1-.41,2.67c-.28.76-.67,1.15-1.17,1.15a1.07,1.07,0,0,1-.79-.4,3.78,3.78,0,0,1-.64-1.18,7.79,7.79,0,0,1-.42-1.95c-.05-.44-.08-1.14-.11-2.1l-.36-.06-.46,6.73h.38a6.32,6.32,0,0,1,.2-.83.31.31,0,0,1,.3-.24.21.21,0,0,1,.14,0,1.06,1.06,0,0,1,.22.18l.32.27a3,3,0,0,0,.69.44,1.72,1.72,0,0,0,.69.15c.92,0,1.64-.63,2.16-1.91a11.22,11.22,0,0,0,.78-4.28,12.2,12.2,0,0,0-.4-3.29A14.21,14.21,0,0,0,142.85,9.07Zm6.36-7.36c.09-.19.31-.29.64-.29a1.92,1.92,0,0,1,2,1.54,11.8,11.8,0,0,1,.3,3.09l.33.13L153,.48h-6.79v.78a1.31,1.31,0,0,1,.75.32,1.7,1.7,0,0,1,.17.95,6.75,6.75,0,0,1,0,.72c0,.27-.05.58-.09.92l-1.55,13.47a5.18,5.18,0,0,1-.35,1.61,1.12,1.12,0,0,1-.67.53v.77h7l.75-5.83-.31-.13a8.33,8.33,0,0,1-2,4.23,2.73,2.73,0,0,1-2,.76c-.29,0-.48-.08-.57-.26a1.45,1.45,0,0,1-.13-.67c0-.1,0-.23,0-.4s0-.33.05-.51l.83-7.32a1.58,1.58,0,0,1,1.44.58,4.42,4.42,0,0,1,.37,2.18c0,.14,0,.31,0,.52s0,.46,0,.74l.34.15.94-8.2-.35-.11a7.71,7.71,0,0,1-.87,2.66,2.56,2.56,0,0,1-1.71.51L149,2.78A3.46,3.46,0,0,1,149.21,1.71Z",opacity:1,strokeColor:"",fillColor:"#192760",width:152.969,height:21.152,stampFillColor:"#dce3ef",stampStrokeColor:""};break;case"ForComment":case"For Comment":t={iconName:"For Comment",pathdata:"M14.1.48l-.89,5.6L12.65,6a7.14,7.14,0,0,0-.48-3c-.54-1-1.6-1.54-3.19-1.54a1.37,1.37,0,0,0-1,.26,2.06,2.06,0,0,0-.42,1.08L6.35,9.28a6,6,0,0,0,2.73-.52,5.92,5.92,0,0,0,1.41-2.59l.58.1L9.52,14.34,9,14.2c0-.29,0-.54.05-.75s0-.38,0-.49a3.15,3.15,0,0,0-.55-2.09,3.07,3.07,0,0,0-2.32-.64L4.77,17.44c0,.13,0,.24-.06.35s0,.21,0,.31a1.23,1.23,0,0,0,.53,1.17,2,2,0,0,0,1,.19v.76H0v-.76a1.91,1.91,0,0,0,1.12-.54,3.56,3.56,0,0,0,.58-1.58L4.27,4.11c.05-.27.09-.51.12-.71a7.42,7.42,0,0,0,.1-1c0-.48-.1-.77-.29-.9A3.54,3.54,0,0,0,3,1.24V.48ZM28,7.11a17.42,17.42,0,0,1-2.57,9.07q-2.75,4.61-6.3,4.6a4.33,4.33,0,0,1-3.65-1.92,8.53,8.53,0,0,1-1.41-5.14,17.56,17.56,0,0,1,2.62-9.19Q19.43,0,22.82,0a4.48,4.48,0,0,1,3.72,1.92A8.46,8.46,0,0,1,28,7.11ZM25,4.6a5.72,5.72,0,0,0-.52-2.55,1.72,1.72,0,0,0-1.63-1c-1.74,0-3.2,2.17-4.39,6.53a32.66,32.66,0,0,0-1.35,8.26,8.24,8.24,0,0,0,.26,2.2c.33,1.18.94,1.77,1.82,1.77a2.88,2.88,0,0,0,2.25-1.29,16.48,16.48,0,0,0,2.1-4.93,37.09,37.09,0,0,0,1.07-4.83A28.26,28.26,0,0,0,25,4.6Zm15.83.16a6.49,6.49,0,0,1-.33,2,5.12,5.12,0,0,1-1.09,1.9,4.65,4.65,0,0,1-1.27,1,11.5,11.5,0,0,1-1.35.52c.07.3.12.49.14.57l1.62,6.66a3.79,3.79,0,0,0,.7,1.7,1.75,1.75,0,0,0,1.14.41v.76H36.13l-2.26-9.76h-.59L32,16.6l-.17,1,0,.25a2.62,2.62,0,0,0,0,.28q0,.8.27,1a3,3,0,0,0,1.25.32v.76H27.11v-.76a1.93,1.93,0,0,0,1.11-.52,3.54,3.54,0,0,0,.59-1.59L31.38,4.11c.06-.27.1-.51.13-.71a6,6,0,0,0,.1-1c0-.47-.1-.77-.29-.9a3.54,3.54,0,0,0-1.24-.3V.48h5.76a6.77,6.77,0,0,1,3,.53Q40.79,2,40.79,4.76Zm-3.16-.47a4.35,4.35,0,0,0-.44-2,1.54,1.54,0,0,0-1.48-.81.75.75,0,0,0-.63.26,2.78,2.78,0,0,0-.33,1.05L33.48,9.5a6.85,6.85,0,0,0,1.67-.2,2.55,2.55,0,0,0,1.49-1.13,6.37,6.37,0,0,0,.67-1.62A7.81,7.81,0,0,0,37.63,4.29ZM58.49,0a2.61,2.61,0,0,1-.32.63.55.55,0,0,1-.49.24A7,7,0,0,1,56.31.43,6.15,6.15,0,0,0,54.1,0q-3.47,0-6,3.92a16.73,16.73,0,0,0-2.51,9.24,8.73,8.73,0,0,0,1.64,5.57,5,5,0,0,0,7.19,1A8.89,8.89,0,0,0,57,16.37l-.64-.65a10.47,10.47,0,0,1-1.47,2.09A4,4,0,0,1,52,19.24a2.89,2.89,0,0,1-2.17-1.13c-.67-.75-1-2.15-1-4.2a22.2,22.2,0,0,1,1.62-8.29q1.8-4.54,4.23-4.55a2.33,2.33,0,0,1,2,1.14,6.16,6.16,0,0,1,.78,3.47c0,.14,0,.25,0,.32s0,.32,0,.73l.66.17L59.12,0ZM72.71,7.11a17.33,17.33,0,0,1-2.57,9.07c-1.82,3.07-3.93,4.6-6.3,4.6a4.34,4.34,0,0,1-3.65-1.92,8.53,8.53,0,0,1-1.4-5.14A17.55,17.55,0,0,1,61.4,4.53Q64.15,0,67.54,0a4.48,4.48,0,0,1,3.72,1.92A8.39,8.39,0,0,1,72.71,7.11Zm-3-2.51a5.72,5.72,0,0,0-.52-2.55,1.72,1.72,0,0,0-1.63-1c-1.74,0-3.2,2.17-4.39,6.53a32.66,32.66,0,0,0-1.35,8.26,8.24,8.24,0,0,0,.26,2.2c.33,1.18.94,1.77,1.82,1.77a2.85,2.85,0,0,0,2.25-1.29,16,16,0,0,0,2.1-4.93,34.08,34.08,0,0,0,1.07-4.83A28.26,28.26,0,0,0,69.68,4.6Zm17.5,13.62a4.63,4.63,0,0,1,.07-.75c0-.3.09-.59.15-.88L90,3.31a3.32,3.32,0,0,1,.7-1.67,2,2,0,0,1,1-.4V.48H87.23l-6.4,13.91L79.63.48H74.84v.76a3.29,3.29,0,0,1,1.2.21c.21.11.31.37.31.78a4.35,4.35,0,0,1-.07.75c0,.28-.11.61-.18,1L74,15a19.63,19.63,0,0,1-1,3.65,1.54,1.54,0,0,1-1.17.86v.76H76.2v-.76a2.31,2.31,0,0,1-1.09-.29,1.6,1.6,0,0,1-.58-1.43,8.8,8.8,0,0,1,.14-1.42c0-.37.14-.82.24-1.37L77,4.24l1.41,16.37H79L86.89,3.76,84.25,17.34A2.94,2.94,0,0,1,83.61,19a2.87,2.87,0,0,1-1.44.49v.76h6.54v-.76a3.39,3.39,0,0,1-1.23-.31Q87.18,19,87.18,18.22Zm17.73,0a4.63,4.63,0,0,1,.07-.75c0-.3.1-.59.16-.88l2.58-13.28a3.24,3.24,0,0,1,.69-1.67,2,2,0,0,1,1-.4V.48H105l-6.4,13.91L97.36.48H92.57v.76a3.29,3.29,0,0,1,1.2.21c.21.11.32.37.32.78A5.65,5.65,0,0,1,94,3c0,.28-.11.61-.19,1L91.69,15a19.63,19.63,0,0,1-1,3.65,1.54,1.54,0,0,1-1.17.86v.76h4.38v-.76a2.33,2.33,0,0,1-1.1-.29,1.6,1.6,0,0,1-.58-1.43,10.12,10.12,0,0,1,.14-1.42c.06-.37.14-.82.25-1.37L94.76,4.24l1.41,16.37h.59l7.86-16.85L102,17.34a3.1,3.1,0,0,1-.64,1.63,3,3,0,0,1-1.45.49v.76h6.55v-.76a3.46,3.46,0,0,1-1.24-.31Q104.91,19,104.91,18.22Zm11.52.3a6.56,6.56,0,0,1-3.25.75,1.27,1.27,0,0,1-.94-.26,1,1,0,0,1-.22-.66,3,3,0,0,1,0-.39,4.88,4.88,0,0,1,.08-.51l1.38-7.2a3.65,3.65,0,0,1,2.4.57,2.92,2.92,0,0,1,.62,2.15c0,.14,0,.31,0,.51s0,.45-.06.73l.58.15,1.55-8.08-.58-.1a5.92,5.92,0,0,1-1.44,2.61,6.32,6.32,0,0,1-2.85.51L115,2.74a2.44,2.44,0,0,1,.39-1.06,1.43,1.43,0,0,1,1.07-.28c1.63,0,2.71.5,3.25,1.51a7.37,7.37,0,0,1,.49,3l.56.13.89-5.6H110.31v.76a3.28,3.28,0,0,1,1.25.31c.19.13.28.44.28.94a4.83,4.83,0,0,1-.06.7c0,.28-.09.58-.16.92l-2.57,13.24a3.54,3.54,0,0,1-.59,1.59,1.93,1.93,0,0,1-1.11.52v.76H119l1.24-5.74-.51-.12A7.7,7.7,0,0,1,116.43,18.52ZM136.6,1.24V.48h-4.3v.76a2.5,2.5,0,0,1,1.14.33A1.8,1.8,0,0,1,134,3.05a10.58,10.58,0,0,1-.14,1.34c-.05.41-.13.87-.22,1.39L132,14.12,127.41.48h-4.22v.76a2.53,2.53,0,0,1,1,.24,1.82,1.82,0,0,1,.64,1.06l.1.3L122.55,15a19.54,19.54,0,0,1-1,3.61,1.59,1.59,0,0,1-1.18.9v.76h4.37v-.76a2.5,2.5,0,0,1-1.12-.32,1.67,1.67,0,0,1-.55-1.44,5.32,5.32,0,0,1,0-.79c0-.43.17-1.09.34-2l2.08-10.57L131,20.71h.52l2.91-15a24.72,24.72,0,0,1,.85-3.42,1.42,1.42,0,0,1,1-1Zm.48-.76-.81,5,.54.2a8.1,8.1,0,0,1,1.85-3.16,3.63,3.63,0,0,1,2.66-1.06l-3.08,15.85a3,3,0,0,1-.86,1.85,2.42,2.42,0,0,1-1.32.26v.76H143v-.76a4,4,0,0,1-1.41-.3c-.23-.13-.34-.45-.34-.95a2.26,2.26,0,0,1,0-.26c0-.09,0-.2,0-.33l.17-1,2.92-15.1a2.64,2.64,0,0,1,1.76.63c.74.7,1.12,2,1.15,3.94l.55.07L148.6.48Z",opacity:1,strokeColor:"",fillColor:"#192760",width:148.603,height:20.812,stampFillColor:"#dce3ef",stampStrokeColor:""};break;case"Void":t={iconName:"Void",pathdata:"M27.88,1.72a6.53,6.53,0,0,0-1.81,1.42L9,21.12H7.54L4.09,5.83A11.83,11.83,0,0,0,2.82,2Q2.3,1.4,0,1.26V.48H13.54v.78a11,11,0,0,0-2.37.18q-1.11.27-1.11,1.05a1.43,1.43,0,0,0,0,.29c0,.09,0,.19,0,.28l2.35,12,8.56-9a25.11,25.11,0,0,0,1.83-2.14,3.15,3.15,0,0,0,.82-1.68c0-.41-.28-.69-.84-.82a12.57,12.57,0,0,0-2.08-.15V.48h8.7v.78A7.11,7.11,0,0,0,27.88,1.72ZM57.37,7.23q0,4.85-5.56,9.22a21.41,21.41,0,0,1-13.62,4.67,14.41,14.41,0,0,1-7.89-1.95,6,6,0,0,1-3-5.23q0-4.92,5.66-9.34A21.12,21.12,0,0,1,46.2,0a15,15,0,0,1,8,2A6,6,0,0,1,57.37,7.23ZM50.82,4.68a3.46,3.46,0,0,0-1.13-2.59A4.93,4.93,0,0,0,46.17,1q-5.64,0-9.49,6.64c-1.94,3.36-2.92,6.16-2.92,8.4a4.27,4.27,0,0,0,.56,2.23q1.08,1.8,3.93,1.8a9.24,9.24,0,0,0,4.87-1.31,15.24,15.24,0,0,0,4.54-5A21.81,21.81,0,0,0,50,8.85,14.23,14.23,0,0,0,50.82,4.68ZM66,18.49a1.49,1.49,0,0,1,0-.28c0-.1,0-.2.08-.3l.35-1L72,3.41a2.94,2.94,0,0,1,1.25-1.62,6.79,6.79,0,0,1,2.4-.53V.48H62.19v.78a13.27,13.27,0,0,1,2.67.32.88.88,0,0,1,.64.95,2.38,2.38,0,0,1-.12.69c-.08.25-.2.57-.36.95L59.45,17.64a3,3,0,0,1-1.28,1.61,6.84,6.84,0,0,1-2.39.53v.77H69.27v-.77a13.72,13.72,0,0,1-2.67-.32A.9.9,0,0,1,66,18.49Zm38.25-9.67q0,4.59-5.15,8-5.73,3.77-15,3.76h-13v-.77a7.4,7.4,0,0,0,2.1-.41,3.08,3.08,0,0,0,1.57-1.75L80.28,4.17c.16-.38.28-.7.37-1a2.27,2.27,0,0,0,.12-.68.89.89,0,0,0-.64-.95,13.41,13.41,0,0,0-2.68-.32V.48H90.6q6.68,0,10.15,2.27A6.92,6.92,0,0,1,104.23,8.82ZM97.58,7a5.28,5.28,0,0,0-1.13-3.54q-1.77-2-6.14-2a4.24,4.24,0,0,0-2,.32,1.77,1.77,0,0,0-.74.84L81.35,17.73a1.72,1.72,0,0,0-.12.39,1.89,1.89,0,0,0,0,.31.89.89,0,0,0,.54.85,5.1,5.1,0,0,0,2,.26q8.07,0,11.68-5.5A12.61,12.61,0,0,0,97.58,7Z",opacity:1,strokeColor:"",fillColor:"#8a251a",width:104.233,height:21.123,stampFillColor:"#f6dedd",stampStrokeColor:""};break;case"PreliminaryResults":case"Preliminary Results":t={iconName:"Preliminary Results",pathdata:"M9.23,5.08q0-3-1.32-4.08A2.6,2.6,0,0,0,6.17.41H2v.78a1.5,1.5,0,0,1,.76.23,1.39,1.39,0,0,1,.28,1c0,.19,0,.43,0,.73s-.07.61-.1.91L1.17,17.56a4.76,4.76,0,0,1-.41,1.62A1.18,1.18,0,0,1,0,19.7v.78H4.25V19.7a1.77,1.77,0,0,1-.86-.31,1.5,1.5,0,0,1-.2-1c0-.09,0-.19,0-.3a1.36,1.36,0,0,1,0-.29l.12-1,.78-6L5,11h.41a3.21,3.21,0,0,0,2.78-1.6A7.57,7.57,0,0,0,9.23,5.08ZM7,6.32a10,10,0,0,1-.42,2,3,3,0,0,1-.68,1.21,1.63,1.63,0,0,1-1.13.36H4.53l-.27-.06,1-7.15a4.75,4.75,0,0,1,.22-1,.45.45,0,0,1,.46-.29,1,1,0,0,1,1,.8,6.22,6.22,0,0,1,.29,2.06A18,18,0,0,1,7,6.32ZM23.4,18.75a3.35,3.35,0,0,1-2.23.76.68.68,0,0,1-.64-.26,1.27,1.27,0,0,1-.16-.68c0-.09,0-.23,0-.39s0-.34.05-.51l.95-7.33a1.92,1.92,0,0,1,1.65.59,4,4,0,0,1,.42,2.18c0,.14,0,.31,0,.52s0,.46,0,.74l.4.15,1.07-8.21-.4-.1a7,7,0,0,1-1,2.65,3.15,3.15,0,0,1-2,.52l.85-6.67a3,3,0,0,1,.28-1.08c.11-.19.35-.28.73-.28a2.16,2.16,0,0,1,2.23,1.54A10.27,10.27,0,0,1,26,6l.39.13L27,.41H19.2v.78a1.67,1.67,0,0,1,.86.31,1.52,1.52,0,0,1,.19,1,6.58,6.58,0,0,1,0,.71c0,.28-.07.59-.11.93L18.33,17.56a4.59,4.59,0,0,1-.4,1.62,1.22,1.22,0,0,1-.74.51,1,1,0,0,1-.73-.4A5.08,5.08,0,0,1,16,17.56l-1.1-6.77c0-.08,0-.27-.1-.58a5.14,5.14,0,0,0,.92-.53,3.23,3.23,0,0,0,.87-1,6,6,0,0,0,.76-1.93,9.63,9.63,0,0,0,.22-2c0-1.87-.44-3.14-1.34-3.81a3.4,3.4,0,0,0-2-.54h-4v.78a1.78,1.78,0,0,1,.85.3,1.4,1.4,0,0,1,.19.91c0,.24,0,.56-.06,1,0,.21-.05.45-.09.73L9.31,17.56a4.53,4.53,0,0,1-.41,1.62,1.15,1.15,0,0,1-.75.52v.78h4.28V19.7a1.62,1.62,0,0,1-.86-.32,1.72,1.72,0,0,1-.18-1v-.29c0-.09,0-.18,0-.25l.12-1,.86-6.24h.4l1.55,9.92h10.8L26,14.65l-.35-.13A7.9,7.9,0,0,1,23.4,18.75ZM13.67,9.38a3.35,3.35,0,0,1-1.15.2l.87-6.87a4,4,0,0,1,.23-1.06.45.45,0,0,1,.43-.27,1.05,1.05,0,0,1,1,.83,6.14,6.14,0,0,1,.3,2.08,11.74,11.74,0,0,1-.21,2.29,9,9,0,0,1-.47,1.65A2,2,0,0,1,13.67,9.38ZM35,14.65l-.84,5.83h-8V19.7a1.24,1.24,0,0,0,.76-.52,4.73,4.73,0,0,0,.4-1.63L29.15,4.1q.08-.57.12-1c0-.26,0-.48,0-.68a1.42,1.42,0,0,0-.21-1,1.67,1.67,0,0,0-.85-.31V.41h4.56v.78a1.67,1.67,0,0,0-1,.49,4.17,4.17,0,0,0-.44,1.66L29.49,17.65c0,.16,0,.31,0,.45a3.47,3.47,0,0,0,0,.48,1,1,0,0,0,.21.72.8.8,0,0,0,.59.21,3.54,3.54,0,0,0,2.56-1.05,9.24,9.24,0,0,0,1.91-3.94Zm2.79,4.73a1.61,1.61,0,0,0,.85.32v.78H34.39V19.7a1.18,1.18,0,0,0,.76-.52,4.76,4.76,0,0,0,.41-1.62L37.33,4.1c.05-.38.09-.7.11-1a5.83,5.83,0,0,0,0-.68,1.5,1.5,0,0,0-.2-1,1.71,1.71,0,0,0-.85-.31V.41h4.29v.78a1.22,1.22,0,0,0-.77.52,4.9,4.9,0,0,0-.39,1.63L37.78,16.8l-.11,1,0,.29c0,.11,0,.2,0,.29A1.52,1.52,0,0,0,37.83,19.38Zm12.2,0a1.81,1.81,0,0,0,.85.31v.78h-4.5V19.7a1.64,1.64,0,0,0,1-.49,4,4,0,0,0,.44-1.66l1.81-13.8-5.4,17.12h-.4l-1-16.64L41.39,15.12c-.07.56-.13,1-.17,1.39-.06.61-.09,1.09-.09,1.45a2,2,0,0,0,.4,1.45,1.19,1.19,0,0,0,.75.29v.78h-3V19.7a1.21,1.21,0,0,0,.81-.87,29.47,29.47,0,0,0,.66-3.71L42.21,4c0-.38.09-.71.12-1a5.41,5.41,0,0,0,.05-.75c0-.42-.07-.69-.21-.8a1.69,1.69,0,0,0-.83-.21V.41h3.29l.83,14.14L49.85.41h3.07v.78a1.12,1.12,0,0,0-.69.41,4.08,4.08,0,0,0-.48,1.69L50,16.79c0,.29-.08.59-.11.89s0,.56,0,.76A1.41,1.41,0,0,0,50,19.39Zm5,0a1.61,1.61,0,0,0,.85.32v.78H51.56V19.7a1.18,1.18,0,0,0,.76-.52,4.76,4.76,0,0,0,.41-1.62L54.5,4.1c0-.38.09-.7.11-1a5.83,5.83,0,0,0,0-.68,1.5,1.5,0,0,0-.2-1,1.71,1.71,0,0,0-.85-.31V.41h4.29v.78a1.22,1.22,0,0,0-.77.52,4.9,4.9,0,0,0-.39,1.63L55,16.8l-.11,1,0,.29c0,.11,0,.2,0,.29A1.52,1.52,0,0,0,55,19.38ZM66.13,5.75,64.13,21h-.36L60,4.38,58.6,15.12c-.12.89-.2,1.55-.23,2a7.32,7.32,0,0,0,0,.81,2.17,2.17,0,0,0,.38,1.46,1.32,1.32,0,0,0,.77.32v.78h-3V19.7a1.26,1.26,0,0,0,.81-.91,29,29,0,0,0,.65-3.67L59.56,2.81,59.5,2.5a2,2,0,0,0-.45-1.06,1.21,1.21,0,0,0-.67-.25V.41h2.9L64.4,14.28,65.52,5.8c.07-.53.12-1,.16-1.41.06-.62.09-1.08.09-1.36a2.45,2.45,0,0,0-.34-1.51,1.39,1.39,0,0,0-.79-.33V.41h3v.78l-.21.06c-.29.08-.52.43-.68,1A34.22,34.22,0,0,0,66.13,5.75ZM83.27,1A3.41,3.41,0,0,0,81.21.41h-4v.78a1.74,1.74,0,0,1,.85.3c.14.13.2.43.2.91,0,.24,0,.56-.06,1,0,.21-.06.45-.09.73L76.38,17.56A4.53,4.53,0,0,1,76,19.18a1.18,1.18,0,0,1-.76.52v0a1,1,0,0,1-.67-.45,8.11,8.11,0,0,1-.34-2.12L72.83,0h-.38L67.11,17.64a6.42,6.42,0,0,1-.63,1.58,1.84,1.84,0,0,1-.59.54v.72h2.83v-.72a1.68,1.68,0,0,1-.75-.31,1.16,1.16,0,0,1-.18-.79,3.46,3.46,0,0,1,.07-.7,5.16,5.16,0,0,1,.15-.67l.84-3H72c.08,1.28.13,2,.13,2.18.06.85.08,1.39.08,1.61a2.26,2.26,0,0,1-.25,1.31,1.43,1.43,0,0,1-.88.42v.72H79.5V19.7a1.58,1.58,0,0,1-.86-.32,1.7,1.7,0,0,1-.19-1c0-.1,0-.2,0-.29a1.81,1.81,0,0,1,0-.25l.12-1,.85-6.24h.41l1.55,9.92h2.9V19.7a1,1,0,0,1-.79-.41A5.15,5.15,0,0,1,83,17.56l-1.11-6.77c0-.08,0-.27-.09-.58a5.53,5.53,0,0,0,.92-.53,3.52,3.52,0,0,0,.87-1,6.16,6.16,0,0,0,.75-1.93,9.67,9.67,0,0,0,.23-2C84.61,2.89,84.16,1.62,83.27,1ZM69.19,13.05l2.13-7.3.53,7.3Zm13-6.47a8.39,8.39,0,0,1-.46,1.65,2,2,0,0,1-1,1.15,3.29,3.29,0,0,1-1.14.2l.87-6.87a3.61,3.61,0,0,1,.23-1.06.45.45,0,0,1,.43-.27,1.05,1.05,0,0,1,1,.83,6.14,6.14,0,0,1,.3,2.08A11,11,0,0,1,82.22,6.58ZM90.48.41h3v.78a1.07,1.07,0,0,0-.55.41,6.13,6.13,0,0,0-.77,1.62l-2.72,8-.72,5.55c0,.22-.07.51-.1.86a7.29,7.29,0,0,0-.06.73,1.46,1.46,0,0,0,.29,1.07,1.61,1.61,0,0,0,.83.25v.78H85V19.7a1.56,1.56,0,0,0,.93-.39,3.7,3.7,0,0,0,.53-1.76l.85-6.45-1.26-8a6.07,6.07,0,0,0-.36-1.47.81.81,0,0,0-.7-.4V.41h4v.78a1.32,1.32,0,0,0-.76.23c-.15.12-.23.4-.23.84a4.46,4.46,0,0,0,0,.48c0,.19,0,.39.07.6l1,6.54,1.88-5.55c.1-.29.18-.55.24-.79a4.68,4.68,0,0,0,.14-1.11,1.35,1.35,0,0,0-.31-1,1.14,1.14,0,0,0-.66-.2Zm18.61,1.22c.1-.19.35-.28.73-.28a2.16,2.16,0,0,1,2.23,1.54A10.27,10.27,0,0,1,112.39,6l.38.13.62-5.7h-7.76v.78a1.67,1.67,0,0,1,.86.31,1.59,1.59,0,0,1,.19,1,6.58,6.58,0,0,1,0,.71c0,.28-.07.59-.11.93l-1.77,13.46a4.53,4.53,0,0,1-.41,1.62,1.17,1.17,0,0,1-.73.51,1,1,0,0,1-.73-.4,5.08,5.08,0,0,1-.49-1.73l-1.1-6.77c0-.08,0-.27-.1-.58a5.14,5.14,0,0,0,.92-.53,3.4,3.4,0,0,0,.88-1,6.16,6.16,0,0,0,.75-1.93,9.63,9.63,0,0,0,.22-2c0-1.87-.44-3.14-1.34-3.81a3.38,3.38,0,0,0-2-.54h-4v.78a1.78,1.78,0,0,1,.85.3,1.4,1.4,0,0,1,.19.91c0,.24,0,.56-.06,1,0,.21,0,.45-.09.73L95.74,17.56a4.53,4.53,0,0,1-.41,1.62,1.15,1.15,0,0,1-.75.52v.78h4.28V19.7a1.62,1.62,0,0,1-.86-.32,1.72,1.72,0,0,1-.18-1v-.29c0-.09,0-.18,0-.25l.12-1,.86-6.24h.4l1.55,9.92h10.8l.85-5.83-.35-.13a7.9,7.9,0,0,1-2.24,4.23,3.35,3.35,0,0,1-2.23.76.71.71,0,0,1-.65-.26,1.37,1.37,0,0,1-.15-.68c0-.09,0-.23,0-.39s0-.34.05-.51l.95-7.33a1.92,1.92,0,0,1,1.65.59,4,4,0,0,1,.42,2.18c0,.14,0,.31,0,.52s0,.46,0,.74l.4.15,1.07-8.21-.41-.1a7,7,0,0,1-1,2.65,3.15,3.15,0,0,1-2,.52l.85-6.67A3,3,0,0,1,109.09,1.63Zm-9,7.75a3.35,3.35,0,0,1-1.15.2l.87-6.87a4,4,0,0,1,.23-1.06.45.45,0,0,1,.43-.27,1.05,1.05,0,0,1,1,.83,6.14,6.14,0,0,1,.3,2.08,11.74,11.74,0,0,1-.21,2.29,9,9,0,0,1-.47,1.65A2,2,0,0,1,100.1,9.38ZM120.18.07h.43l-.59,6-.37-.1-.05-1a10.11,10.11,0,0,0-.41-2.39c-.34-1-.83-1.57-1.48-1.57s-.95.42-1.21,1.26a6.17,6.17,0,0,0-.25,1.8,5.92,5.92,0,0,0,.26,1.82,5.23,5.23,0,0,0,.44,1L118.19,9a12.6,12.6,0,0,1,1.12,2.57,10.75,10.75,0,0,1,.47,3.29,10,10,0,0,1-.9,4.29,2.76,2.76,0,0,1-2.46,1.91,2.17,2.17,0,0,1-.79-.15,3.28,3.28,0,0,1-.79-.44l-.36-.28-.26-.18a.38.38,0,0,0-.16,0,.34.34,0,0,0-.34.23,5.5,5.5,0,0,0-.23.84h-.43l.52-6.73.41.06c0,1,.07,1.66.12,2.09a7.13,7.13,0,0,0,.49,1.95,3.52,3.52,0,0,0,.73,1.18,1.25,1.25,0,0,0,.9.41c.57,0,1-.39,1.34-1.15a7.13,7.13,0,0,0,.47-2.68,9.86,9.86,0,0,0-1.76-4.77,11.23,11.23,0,0,1-1.77-5.58,9.8,9.8,0,0,1,.78-4.12A2.41,2.41,0,0,1,117.46,0a2.06,2.06,0,0,1,.79.16,1.9,1.9,0,0,1,.47.25l.37.25a1.15,1.15,0,0,0,.25.12.47.47,0,0,0,.22,0A.44.44,0,0,0,120,.62,2.6,2.6,0,0,0,120.18.07Zm10,2a26.67,26.67,0,0,0-.66,3.7l-.9,6.85a32.12,32.12,0,0,1-1.16,5.7c-.68,1.83-1.67,2.74-3,2.74a2.7,2.7,0,0,1-2.28-1.36,6.67,6.67,0,0,1-.92-3.77,19.46,19.46,0,0,1,.11-2c0-.46.15-1.26.3-2.42l1-7.36c0-.33.08-.64.11-.93s0-.55,0-.77a1.38,1.38,0,0,0-.2-.91,1.74,1.74,0,0,0-.85-.3V.41h4.43v.78a1.39,1.39,0,0,0-.91.47,4.25,4.25,0,0,0-.44,1.68l-1.18,9c-.11.8-.19,1.46-.25,2q-.15,1.37-.15,2a4.41,4.41,0,0,0,.48,2.27,1.44,1.44,0,0,0,1.29.78c.91,0,1.62-.82,2.13-2.48a30.62,30.62,0,0,0,.91-4.85L129,5.76c.1-.91.14-1.3.13-1.19a14.64,14.64,0,0,0,.13-1.6,2.12,2.12,0,0,0-.38-1.46,1.35,1.35,0,0,0-.77-.32V.41H131v.78A1.18,1.18,0,0,0,130.23,2.06Zm8.41,12.59-.84,5.83h-8V19.7a1.24,1.24,0,0,0,.76-.52,4.73,4.73,0,0,0,.4-1.63L132.75,4.1q.08-.57.12-1c0-.26,0-.48,0-.68,0-.51-.06-.83-.2-1a1.67,1.67,0,0,0-.85-.31V.41h4.56v.78a1.67,1.67,0,0,0-1,.49A4.17,4.17,0,0,0,135,3.34l-1.87,14.31c0,.16,0,.31-.05.45s0,.3,0,.48a1,1,0,0,0,.21.72.8.8,0,0,0,.59.21,3.54,3.54,0,0,0,2.56-1.05,9.24,9.24,0,0,0,1.91-3.94Zm7.72-8.56a7.63,7.63,0,0,0-.79-4,1.53,1.53,0,0,0-1.21-.64l-2,15.35-.12,1a2.47,2.47,0,0,0,0,.34,2.35,2.35,0,0,0,0,.26c0,.52.08.84.23,1a2,2,0,0,0,1,.3v.78h-4.76V19.7a1.18,1.18,0,0,0,.9-.26,3.75,3.75,0,0,0,.6-1.88l2.11-16.11a2.17,2.17,0,0,0-1.83,1.08,9.57,9.57,0,0,0-1.27,3.21l-.37-.2.56-5.13h7.91l-.52,5.76Zm3.41-3.79a6.17,6.17,0,0,0-.25,1.8,5.63,5.63,0,0,0,.26,1.82,5.23,5.23,0,0,0,.44,1L151.46,9a13.19,13.19,0,0,1,1.13,2.57,11.08,11.08,0,0,1,.46,3.29,10,10,0,0,1-.9,4.29,2.76,2.76,0,0,1-2.46,1.91,2.21,2.21,0,0,1-.79-.15,3.28,3.28,0,0,1-.79-.44l-.36-.28-.26-.18a.38.38,0,0,0-.16,0,.34.34,0,0,0-.34.23,5.5,5.5,0,0,0-.23.84h-.43l.52-6.73.41.06c0,1,.07,1.66.12,2.09a7.13,7.13,0,0,0,.49,1.95,3.52,3.52,0,0,0,.73,1.18,1.25,1.25,0,0,0,.9.41c.57,0,1-.39,1.34-1.15a7.13,7.13,0,0,0,.47-2.68,9.86,9.86,0,0,0-1.76-4.77,11.23,11.23,0,0,1-1.77-5.58,9.8,9.8,0,0,1,.78-4.12A2.41,2.41,0,0,1,150.73,0a2.06,2.06,0,0,1,.79.16,1.9,1.9,0,0,1,.47.25l.37.25a1.34,1.34,0,0,0,.24.12.56.56,0,0,0,.23,0,.44.44,0,0,0,.39-.21,2.6,2.6,0,0,0,.23-.55h.43l-.59,6-.37-.1,0-1a10.11,10.11,0,0,0-.41-2.39c-.34-1-.83-1.57-1.48-1.57S150,1.46,149.77,2.3Z",opacity:1,strokeColor:"",fillColor:"#192760",width:153.879,height:21.051,stampFillColor:"#dce3ef",stampStrokeColor:""};break;case"InformationOnly":case"Information Only":t={iconName:"Information Only",pathdata:"M4,19.14a2,2,0,0,0,1,.32v.76H0v-.76a1.42,1.42,0,0,0,.87-.52,4,4,0,0,0,.47-1.59l2-13.24c.06-.38.1-.69.13-1a5.73,5.73,0,0,0,0-.67c0-.5-.08-.81-.24-.94a2.2,2.2,0,0,0-1-.31V.48H7.26v.76a1.48,1.48,0,0,0-.88.52,4.14,4.14,0,0,0-.45,1.6l-2,13.24-.13,1c0,.1,0,.19,0,.3a2.72,2.72,0,0,0,0,.28A1.32,1.32,0,0,0,4,19.14ZM18.17,1.3l.24-.06V.48H15v.76a1.66,1.66,0,0,1,.9.33,2.08,2.08,0,0,1,.4,1.48,12.85,12.85,0,0,1-.1,1.34c-.05.41-.11.87-.18,1.39l-1.29,8.34L11.15.48H7.83v.76a1.69,1.69,0,0,1,.77.24,1.9,1.9,0,0,1,.51,1.06l.07.3L7.33,15a24.86,24.86,0,0,1-.76,3.61,1.32,1.32,0,0,1-.92.9v.76H9.09v-.76a1.67,1.67,0,0,1-.88-.32,1.92,1.92,0,0,1-.44-1.44,7.09,7.09,0,0,1,0-.79c0-.43.13-1.09.27-2L9.72,4.38,14,20.71h.41l2.3-15a28.78,28.78,0,0,1,.67-3.42C17.57,1.72,17.83,1.38,18.17,1.3ZM19.33.48v.76a2.32,2.32,0,0,1,1,.3c.15.13.23.42.23.9,0,.23,0,.55-.07,1,0,.2-.06.44-.1.71l-2,13.23a4,4,0,0,1-.46,1.58,1.39,1.39,0,0,1-.88.54v.76h4.89v-.76a1.36,1.36,0,0,1-.78-.19,1.39,1.39,0,0,1-.41-1.17c0-.1,0-.21,0-.31s0-.22,0-.35l1.09-7.21a2.09,2.09,0,0,1,1.83.64A3.81,3.81,0,0,1,24.1,13c0,.11,0,.28,0,.49s0,.46,0,.75l.45.14,1.22-8.07-.46-.1a6.19,6.19,0,0,1-1.11,2.59A3.89,3.89,0,0,1,22,9.28l1-6.54a2.43,2.43,0,0,1,.33-1.08.93.93,0,0,1,.76-.26,2.45,2.45,0,0,1,2.52,1.54A9,9,0,0,1,27,6l.44.13.7-5.6ZM39.06,7.11a21,21,0,0,1-2,9.07q-2.16,4.61-5,4.6a3.28,3.28,0,0,1-2.88-1.92,10.29,10.29,0,0,1-1.11-5.14,21.08,21.08,0,0,1,2.07-9.19Q32.31,0,35,0a3.37,3.37,0,0,1,2.93,1.92A10.14,10.14,0,0,1,39.06,7.11ZM36.68,4.6a7,7,0,0,0-.42-2.55A1.37,1.37,0,0,0,35,1c-1.37,0-2.52,2.17-3.46,6.53a40.81,40.81,0,0,0-1.07,8.26,10,10,0,0,0,.21,2.2c.26,1.18.74,1.77,1.43,1.77s1.24-.43,1.78-1.29a18.75,18.75,0,0,0,1.65-4.93,43.28,43.28,0,0,0,.85-4.83A36.93,36.93,0,0,0,36.68,4.6ZM61,19.15a2.25,2.25,0,0,0,1,.31v.76H56.84v-.76A2,2,0,0,0,58,19a3.6,3.6,0,0,0,.5-1.63L60.56,3.76l-6.2,16.85H53.9L52.78,4.24,51.12,15c-.09.55-.15,1-.2,1.37a13,13,0,0,0-.11,1.42,1.8,1.8,0,0,0,.46,1.43,1.54,1.54,0,0,0,.86.29v.76H45.49l-1.78-9.76h-.47l-1,6.14-.13,1,0,.25c0,.09,0,.19,0,.28a1.47,1.47,0,0,0,.22,1,2,2,0,0,0,1,.32v.76H38.37v-.76a1.42,1.42,0,0,0,.88-.52,4.21,4.21,0,0,0,.46-1.59l2-13.24c0-.27.08-.51.11-.71a8.23,8.23,0,0,0,.07-1,1.23,1.23,0,0,0-.23-.9,2.32,2.32,0,0,0-1-.3V.48h4.54A4.34,4.34,0,0,1,47.62,1c1,.65,1.54,1.9,1.54,3.75a7.78,7.78,0,0,1-.26,2A5.56,5.56,0,0,1,48,8.62a3.87,3.87,0,0,1-1,1,8.06,8.06,0,0,1-1.06.52c.05.3.09.49.11.57l1.27,6.66a4.58,4.58,0,0,0,.55,1.7,1.23,1.23,0,0,0,.83.39,1.31,1.31,0,0,0,.86-.84A23,23,0,0,0,50.36,15L52.05,4c.06-.37.11-.7.15-1a7.42,7.42,0,0,0,0-.75c0-.41-.08-.67-.25-.78a2.09,2.09,0,0,0-.94-.21V.48h3.77l1,13.91,5-13.91h3.51v.76a1.46,1.46,0,0,0-.79.4A3.71,3.71,0,0,0,63,3.31L61,16.59c0,.29-.09.58-.13.88s-.05.55-.05.75Q60.79,19,61,19.15Zm-15.14-11a7.46,7.46,0,0,0,.53-1.62,9.54,9.54,0,0,0,.25-2.26,5.31,5.31,0,0,0-.35-2,1.18,1.18,0,0,0-1.16-.81.54.54,0,0,0-.5.26,3.37,3.37,0,0,0-.26,1.05l-1,6.76a4.28,4.28,0,0,0,1.31-.2A2.17,2.17,0,0,0,45.89,8.17ZM73.21,19.51v.71h-5v-.71a1.61,1.61,0,0,0,1-.41,1.92,1.92,0,0,0,.3-1.29c0-.22,0-.75-.09-1.58,0-.17-.06-.89-.16-2.15H65.68l-1,3c-.06.2-.12.42-.17.66a3.4,3.4,0,0,0-.08.69q0,.62.21.78a1.9,1.9,0,0,0,.86.3v.71H62.29v-.71A2,2,0,0,0,63,19a6.47,6.47,0,0,0,.72-1.56L69.82.07h.43L71.83,17A6.77,6.77,0,0,0,72.22,19,1.23,1.23,0,0,0,73.21,19.51Zm-4.08-6.6-.61-7.18-2.44,7.18ZM82.52,6.14l.6-5.66H74l-.63,5,.42.2a8.71,8.71,0,0,1,1.46-3.16,2.57,2.57,0,0,1,2.1-1.06L75,17.35a3.36,3.36,0,0,1-.68,1.85,1.57,1.57,0,0,1-1,.26v.76H78.7v-.76a2.69,2.69,0,0,1-1.11-.3c-.18-.13-.27-.45-.27-.95a2.26,2.26,0,0,1,0-.26c0-.09,0-.2,0-.33l.14-1L79.8,1.5a1.87,1.87,0,0,1,1.39.63c.58.7.88,2,.91,3.94ZM88.84.48H83.92v.76a2.31,2.31,0,0,1,1,.31c.15.13.23.44.23.94a5.56,5.56,0,0,1,0,.67c0,.26-.08.57-.14,1l-2,13.24a4,4,0,0,1-.47,1.59,1.36,1.36,0,0,1-.87.52v.76H86.5v-.76a2,2,0,0,1-1-.32,1.32,1.32,0,0,1-.23-.94c0-.09,0-.18,0-.28s0-.2,0-.3l.13-1,2-13.24A4.09,4.09,0,0,1,88,1.76a1.45,1.45,0,0,1,.87-.52ZM99.11,7.11a21,21,0,0,1-2,9.07q-2.16,4.61-5,4.6a3.28,3.28,0,0,1-2.88-1.92,10.29,10.29,0,0,1-1.11-5.14,21.08,21.08,0,0,1,2.07-9.19C91.63,1.51,93.25,0,95,0A3.36,3.36,0,0,1,98,1.92,10,10,0,0,1,99.11,7.11ZM96.72,4.6a7.18,7.18,0,0,0-.41-2.55c-.28-.7-.7-1-1.29-1-1.37,0-2.52,2.17-3.46,6.53a40.7,40.7,0,0,0-1.06,8.26,10,10,0,0,0,.2,2.2c.26,1.18.74,1.77,1.43,1.77a2.2,2.2,0,0,0,1.78-1.29,18.75,18.75,0,0,0,1.65-4.93,41.1,41.1,0,0,0,.85-4.83A34.65,34.65,0,0,0,96.72,4.6Zm11.1-3.36a1.66,1.66,0,0,1,.9.33,2.08,2.08,0,0,1,.4,1.48,12.85,12.85,0,0,1-.1,1.34c0,.41-.11.87-.18,1.39l-1.29,8.34L104,.48h-3.33v.76a1.7,1.7,0,0,1,.78.24,2,2,0,0,1,.51,1.06l.07.3L100.13,15a24,24,0,0,1-.75,3.61,1.35,1.35,0,0,1-.93.9v.76h3.45v-.76a1.67,1.67,0,0,1-.88-.32,1.88,1.88,0,0,1-.44-1.44,7.09,7.09,0,0,1,0-.79c0-.43.13-1.09.27-2l1.64-10.57,4.29,16.33h.41l2.3-15a28.78,28.78,0,0,1,.67-3.42c.18-.59.44-.93.78-1l.23-.06V.48h-3.39ZM125,7.11a21,21,0,0,1-2,9.07c-1.45,3.07-3.1,4.6-5,4.6a3.28,3.28,0,0,1-2.87-1.92A10.29,10.29,0,0,1,114,13.72a21.22,21.22,0,0,1,2.06-9.19Q118.22,0,120.91,0a3.36,3.36,0,0,1,2.92,1.92A10,10,0,0,1,125,7.11ZM122.59,4.6a7,7,0,0,0-.41-2.55,1.37,1.37,0,0,0-1.28-1c-1.37,0-2.53,2.17-3.46,6.53a40.11,40.11,0,0,0-1.07,8.26,10.65,10.65,0,0,0,.2,2.2q.39,1.77,1.44,1.77a2.2,2.2,0,0,0,1.77-1.29,18.29,18.29,0,0,0,1.66-4.93,45.71,45.71,0,0,0,.85-4.83A36.53,36.53,0,0,0,122.59,4.6Zm14.26-3.3.24-.06V.48h-3.4v.76a1.74,1.74,0,0,1,.91.33,2.13,2.13,0,0,1,.4,1.48c0,.28,0,.73-.11,1.34,0,.41-.11.87-.18,1.39l-1.29,8.34L129.83.48h-3.32v.76a1.69,1.69,0,0,1,.77.24,1.9,1.9,0,0,1,.51,1.06l.07.3L126,15a27,27,0,0,1-.75,3.61,1.35,1.35,0,0,1-.93.9v.76h3.44v-.76a1.67,1.67,0,0,1-.88-.32,1.92,1.92,0,0,1-.44-1.44c0-.26,0-.52,0-.79.05-.43.13-1.09.27-2l1.65-10.57,4.29,16.33h.41l2.29-15a31.07,31.07,0,0,1,.67-3.42C136.25,1.72,136.52,1.38,136.85,1.3Zm8.52,13.06a8.55,8.55,0,0,1-2.19,3.87,4.44,4.44,0,0,1-2.94,1,1,1,0,0,1-.68-.21.9.9,0,0,1-.24-.7,3.4,3.4,0,0,1,0-.48c0-.14,0-.28,0-.44l2.15-14.08a3.69,3.69,0,0,1,.5-1.64,2.22,2.22,0,0,1,1.16-.48V.48H138v.76a2.2,2.2,0,0,1,1,.31c.16.13.24.44.24.94a5.73,5.73,0,0,1-.05.67c0,.26-.07.57-.13,1l-2,13.23a4,4,0,0,1-.47,1.6,1.36,1.36,0,0,1-.87.52v.76h9.16l1-5.74ZM151.79.48v.76a1.52,1.52,0,0,1,.76.2,1.21,1.21,0,0,1,.37,1,4.09,4.09,0,0,1-.17,1.09c-.07.24-.16.5-.27.79L150.32,9.8l-1.18-6.44a4.51,4.51,0,0,1-.08-.6,4.37,4.37,0,0,1,0-.46c0-.43.09-.71.27-.83a1.75,1.75,0,0,1,.87-.23V.48h-4.63v.76a.94.94,0,0,1,.8.4,5.08,5.08,0,0,1,.42,1.44L148.2,11l-1,6.35a3.35,3.35,0,0,1-.61,1.73,1.91,1.91,0,0,1-1.06.39v.76h5.32v-.76a2,2,0,0,1-.95-.25,1.29,1.29,0,0,1-.33-1.05,7.29,7.29,0,0,1,.06-.73q.06-.51.12-.84l.82-5.46,3.12-7.89a5.54,5.54,0,0,1,.89-1.59,1.28,1.28,0,0,1,.63-.41V.48Z",opacity:1,strokeColor:"",fillColor:"#192760",width:155.237,height:20.783,stampFillColor:"#dce3ef",stampStrokeColor:""}}if(t)return t.modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),this.currentStampAnnotation=t,t}},e.prototype.saveStampAnnotations=function(){var e=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_stamp");this.pdfViewerBase.isStorageExceed&&(e=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_stamp"]);for(var t=new Array,i=0;i<this.pdfViewerBase.pageCount;i++)t[i]=[];if(e&&!this.pdfViewer.annotationSettings.skipDownload)for(var n=JSON.parse(e),o=0;o<n.length;o++){var a=[],s=n[o];if(s){for(var r=0;s.annotations.length>r;r++)this.pdfViewer.annotationModule.updateModifiedDate(s.annotations[r]),s.annotations[r].bounds=JSON.stringify(this.pdfViewer.annotation.getBounds(s.annotations[r].bounds,s.pageIndex)),this.pdfViewer.nameTable[s.annotations[r].randomId]&&(s.annotations[r].wrapperBounds=this.pdfViewer.nameTable[s.annotations[r].randomId].wrapper.bounds);a=s.annotations}t[s.pageIndex]=a}return JSON.stringify(t)},e.prototype.storeStampInSession=function(e,t){Math.round(JSON.stringify(window.sessionStorage).length/1024)+Math.round(JSON.stringify(t).length/1024)>4500&&(this.pdfViewerBase.isStorageExceed=!0,this.pdfViewer.annotationModule.clearAnnotationStorage());var i=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_stamp"),n=0;if(this.pdfViewerBase.isStorageExceed&&(i=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_stamp"]),i){this.pdfViewer.annotationModule.storeAnnotationCollections(t,e);var o=JSON.parse(i);this.pdfViewerBase.isStorageExceed||window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_stamp");var a=this.pdfViewer.annotationModule.getPageCollection(o,e);if(o[a])o[a].annotations.push(t),n=o[a].annotations.indexOf(t);else{var s={pageIndex:e,annotations:[]};s.annotations.push(t),n=s.annotations.indexOf(t),o.push(s)}d=JSON.stringify(o);this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_stamp"]=d:window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_annotations_stamp",d)}else{this.pdfViewer.annotationModule.storeAnnotationCollections(t,e);var r={pageIndex:e,annotations:[]};r.annotations.push(t),n=r.annotations.indexOf(t);var l=[];l.push(r);var d=JSON.stringify(l);this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_stamp"]=d:window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_annotations_stamp",d)}return n},e.prototype.updateSessionStorage=function(e,t,i){if(null!=t)for(var n=0;n<e.annotations.length;n++)if(e.annotations[n].id===t){e=e.annotations[n];break}"Rotate"===i&&(e=e.annotations[0]);var o=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_stamp");if(this.pdfViewerBase.isStorageExceed&&(o=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_stamp"]),o)for(var a=e.bounds,s=JSON.parse(o),r=0;r<s.length;r++)for(var l=s[r],d=0;d<l.annotations.length;d++)if(null!=s[r].annotations[d]&&s[r].annotations[d].randomId===e.id){this.pdfViewerBase.isStorageExceed||window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_stamp");var h=this.pdfViewer.annotationModule.getPageCollection(s,s[r].annotations[d].pageNumber);"delete"!==i?s[h]&&(e.wrapper.children[1]?s[r].annotations[d].opacity=e.wrapper.children[1].style.opacity:s[r].annotations[d].opacity=e.wrapper.children[0].style.opacity,s[r].annotations[d].rotateAngle=e.rotateAngle,s[r].annotations[d].bounds={x:a.x,y:a.y,left:a.x,top:a.y,width:e.wrapper.actualSize.width,height:e.wrapper.actualSize.height,right:a.right,bottom:a.bottom}):s[r].annotations.splice(d,1);var p=JSON.stringify(s);this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_stamp"]=p:window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_annotations_stamp",p);break}},e.prototype.saveImportedStampAnnotations=function(e,t){var i,n=null,o=!1,a=e.IsDynamic;if(e.AnnotationSettings=e.AnnotationSettings?e.AnnotationSettings:this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.stampSettings),e.allowedInteractions=this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(e),e.Subject&&a)i=this.retrieveDynamicStampAnnotation(e.Subject),o=!0;else if(e.Subject){if(i=this.retrievestampAnnotation(e.Subject),"Accepted"===e.Subject||"Rejected"===e.Subject){var s=sf.drawings.processPathData(i.pathdata);i.pathdata=sf.drawings.splitArrayCollection(s),o=!0}}else e.AnnotationSettings=e.AnnotationSettings?e.AnnotationSettings:this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.customStampSettings),n={stampAnnotationType:"image",author:e.Author,modifiedDate:e.ModifiedDate,subject:e.Subject,allowedInteractions:e.allowedInteractions,note:e.Note,strokeColor:e.StrokeColor,fillColor:e.FillColor,opacity:e.Opacity,stampFillcolor:e.FillColor,rotateAngle:e.RotateAngle,creationDate:e.ModifiedDate,pageNumber:t,icon:"",stampAnnotationPath:this.findImageData(e.Apperarance),randomId:"image",isDynamicStamp:this.pdfViewerBase.isDynamicStamp,dynamicText:" ",bounds:this.calculateImagePosition(e.Rect,!0),annotName:e.AnnotName,comments:this.pdfViewer.annotationModule.getAnnotationComments(e.Comments,e,e.Author),review:{state:e.State,stateModel:e.StateModel,author:e.Author,modifiedDate:e.ModifiedDate},shapeAnnotationType:"stamp",annotationSelectorSettings:this.getSettings(e),annotationSettings:e.annotationSettings,customData:this.pdfViewer.annotation.getCustomData(e),isPrint:e.isPrint,isCommentLock:e.IsCommentLock,isMaskedImage:e.IsMaskedImage,customStampName:e.CustomStampName},this.pdfViewer.annotationModule.storeAnnotations(t,n,"_annotations_stamp");i&&(n={stampAnnotationType:"path",author:e.Author,modifiedDate:e.ModifiedDate,subject:e.Subject,note:e.Note,strokeColor:e.StrokeColor,fillColor:e.FillColor,opacity:e.Opacity,stampFillcolor:i.stampFillColor,rotateAngle:e.RotateAngle,creationDate:e.ModifiedDate,pageNumber:t,icon:i.iconName,stampAnnotationPath:i.pathdata,randomId:"stamp",isDynamicStamp:!1,dynamicText:this.dynamicText,bounds:this.calculateImagePosition(e.Rect,!0),annotName:e.AnnotName,comments:this.pdfViewer.annotationModule.getAnnotationComments(e.Comments,e,e.Author),review:{state:e.State,stateModel:e.StateModel,author:e.Author,modifiedDate:e.ModifiedDate},shapeAnnotationType:"stamp",annotationSelectorSettings:this.getSettings(e),annotationSettings:e.AnnotationSettings,customData:this.pdfViewer.annotation.getCustomData(e),isPrint:e.isPrint,isCommentLock:e.IsCommentLock,isMaskedImage:e.IsMaskedImage,customStampName:""},o&&(n.dynamicText=this.findDynamicText(e.Apperarance,e.Subject),n.isDynamicStamp=!0),this.pdfViewer.annotationModule.storeAnnotations(t,n,"_annotations_stamp"))},e.prototype.updateStampAnnotationCollections=function(e,t){var i,n=e.IsDynamic;e.allowedInteractions=e.AllowedInteractions?e.AllowedInteractions:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(e);var o=this.stampImageData(e);if(e.Subject&&n&&"Draft"!==e.Subject&&!o)i=this.retrieveDynamicStampAnnotation(e.Subject);else{if(!e.Subject||o)return e.AnnotationSettings=e.AnnotationSettings?e.AnnotationSettings:this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.customStampSettings),e.IsLocked&&(e.AnnotationSettings.isLock=e.IsLocked),{stampAnnotationType:"image",author:e.Author,modifiedDate:e.ModifiedDate,allowedInteractions:e.allowedInteractions,note:e.Note,strokeColor:e.StrokeColor,fillColor:e.FillColor,opacity:e.Opacity,stampFillcolor:e.StampFillColor,rotateAngle:e.RotateAngle,pageNumber:t,randomId:"stamp",isDynamicStamp:this.pdfViewerBase.isDynamicStamp,dynamicText:this.dynamicText,annotationId:e.AnnotName,comments:this.pdfViewer.annotationModule.getAnnotationComments(e.Comments,e,e.Author),review:{state:e.State,stateModel:e.StateModel,author:e.Author,modifiedDate:e.ModifiedDate},shapeAnnotationType:"stamp",annotationSettings:e.AnnotationSettings,customData:this.pdfViewer.annotation.getCustomData(e),isPrint:e.isPrint,isMaskedImage:e.IsMaskedImage,customStampName:e.CustomStampName};i=this.retrievestampAnnotation(e.Subject)}if(i)return e.AnnotationSettings=e.AnnotationSettings?e.AnnotationSettings:this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.stampSettings),e.IsLocked&&(e.AnnotationSettings.isLock=e.IsLocked),e.allowedInteractions=e.AllowedInteractions?e.AllowedInteractions:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(e),{stampAnnotationType:"path",author:e.Author,allowedInteractions:e.allowedInteractions,modifiedDate:e.ModifiedDate,subject:e.Subject,note:e.Note,strokeColor:e.StrokeColor,fillColor:e.FillColor,opacity:e.Opacity,stampFillcolor:e.StampFillColor,rotateAngle:e.RotateAngle,creationDate:i.creationDate,pageNumber:t,icon:i.iconName,stampAnnotationPath:i.pathdata,randomId:"stamp",isDynamicStamp:this.pdfViewerBase.isDynamicStamp,dynamicText:this.dynamicText,bounds:{left:e.Rect.X,top:e.Rect.Y,width:e.Rect.Width,height:e.Rect.Height},annotationId:e.AnnotName,comments:this.pdfViewer.annotationModule.getAnnotationComments(e.Comments,e,e.Author),review:{state:e.State,stateModel:e.StateModel,author:e.Author,modifiedDate:e.ModifiedDate},shapeAnnotationType:"stamp",customData:this.pdfViewer.annotation.getCustomData(e),isPrint:e.isPrint,isMaskedImage:e.IsMaskedImage,customStampName:""}},e.prototype.stampImageData=function(e){var t=!1;if(e&&e.Apperarance)for(var i=0;i<e.Apperarance.length;i++)if(e.Apperarance[i].imagedata){t=!0;break}return t},e.prototype.findImageData=function(e){if(e)for(var t=0;t<e.length;t++){var i=e[t].imagedata;if(i)return i}return""},e.prototype.findDynamicText=function(e,t){var i="";if(e){for(var n=0;n<e.length;n++){var o=e[n],a=o.type,s=o.isImport;if("string"===a&&void 0!==o.text){var r=void 0;if(s)r=o.text;else{var l=o.text.split("(");r=l[1]?l[1].split(")")[0]:o.text}r.toLowerCase()!==t.toLowerCase()&&(i+=r)}}return i}return i},e.prototype.getAnnotations=function(e,t){var i,n=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_stamp");if(this.pdfViewerBase.isStorageExceed&&(n=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_stamp"]),n){var o=JSON.parse(n),a=this.pdfViewer.annotationModule.getPageCollection(o,e);i=o[a]?o[a].annotations:t}else i=t;return i},e.prototype.modifyInCollection=function(e,t,i){this.pdfViewerBase.updateDocumentEditedProperty(!0);var n=this.getAnnotations(t,null);if(null!=n&&i){for(var o=0;o<n.length;o++)i.annotName===n[o].annotName&&("bounds"===e&&(n[o].bounds={x:i.wrapper.bounds.x,y:i.wrapper.bounds.y,left:i.wrapper.bounds.x,top:i.wrapper.bounds.y,width:i.wrapper.bounds.width,height:i.wrapper.bounds.height},n[o].modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime()),this.pdfViewer.annotationModule.storeAnnotationCollections(n[o],t));this.manageAnnotations(n,t)}return null},e.prototype.manageAnnotations=function(e,t){var i=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_stamp");if(this.pdfViewerBase.isStorageExceed&&(i=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_stamp"]),i){var n=JSON.parse(i);this.pdfViewerBase.isStorageExceed||window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_stamp");var o=this.pdfViewer.annotationModule.getPageCollection(n,t);n[o]&&(n[o].annotations=e);var a=JSON.stringify(n);this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_stamp"]=a:window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_annotations_stamp",a)}},e.prototype.updateAddAnnotationDetails=function(e,t,i,n,o,a){t=e?e.offset?e.offset:{x:10,y:10}:(e={offset:{x:10,y:10},pageNumber:0,width:void 0,height:void 0}).offset,n||o||a||(n=j.Approved);var s=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),r=this.pdfViewer.annotation.createGUID(),l=i,d=[],h="",p="Stamp",c=[],u=!1,f=e.author?e.author:"Guest",g=this.pdfViewer.stampSettings.annotationSelectorSettings?this.pdfViewer.stampSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,m=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.stampSettings),w=this.pdfViewer.stampSettings.allowedInteractions?this.pdfViewer.stampSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions;if(m.isLock=!!e.isLock&&e.isLock,m.minHeight=e.minHeight?e.minHeight:0,m.minWidth=e.minWidth?e.minWidth:0,m.maxWidth=e.maxWidth?e.maxWidth:0,m.maxHeight=e.maxHeight?e.maxHeight:0,e.customStamps&&e.customStamps[0].customStampName)c[0]={imagedata:e.customStamps[0].customStampImageSource,isImport:!0},this.customStampName=e.customStamps[0].customStampName,this.pdfViewerBase.customStampCollection.push(e.customStamps[0]),p="Image",e.width=e.width?e.width:100,e.height=e.height?e.height:100;else if(n){var y;y=s.split(" "),h=n.toString(),c[0]={baseFontName:"Helvetica-BoldOblique",currentFontname:"95b303ab-d397-438a-83af-e2ff8a9900f1",fontSize:10,isImport:!0,text:"By "+f+" at "+y[1]+y[2]+" , "+y[0],type:"string"},u=!0,e.width=e.width?e.width:140,e.height=e.height?e.height:55}else o?(h=o.toString(),o==W.Accepted||o==W.Rejected?(e.width=e.width?e.width:35,e.height=e.height?e.height:35):o==W.SignHere?(e.width=e.width?e.width:110,e.height=e.height?e.height:30):o==W.Witness?(e.width=e.width?e.width:130,e.height=e.height?e.height:30):o==W.InitialHere&&(e.width=e.width?e.width:90,e.height=e.height?e.height:30)):a&&(h=a.toString(),a==Z.Final||a==Z.Draft?(e.width=e.width?e.width:110,e.height=e.height?e.height:30):a==Z.Void?(e.width=e.width?e.width:100,e.height=e.height?e.height:30):(e.width=e.width?e.width:130,e.height=e.height?e.height:30));var S={AllowedInteractions:e.allowedInteractions?e.allowedInteractions:w,AnnotName:r,AnnotType:"stamp",AnnotationSelectorSettings:e.annotationSelectorSettings?e.annotationSelectorSettings:g,AnnotationSettings:m,Apperarance:c||null,Author:f,Comments:null,CreatedDate:s,CustomData:e.customData?e.customData:null,ExistingCustomData:null,FillColor:"#192760",Icon:0,IsCommentLock:!1,IsDynamic:u,IsLocked:!!e.isLock&&e.isLock,IsPrint:!e.isPrint||e.isPrint,ModifiedDate:"",Name:null,Note:"",Opacity:e.opacity?e.opacity:1,Rect:{X:t.x,Y:t.y,Width:e.width,Height:e.height,Left:t.x,Top:t.y,Location:{X:t.x,Y:t.y},Size:{Height:e.height,IsEmpty:!1,Width:e.width}},RotateAngle:0,StampAnnotationtype:p,State:"",StateModel:"",StrokeColor:"#dce3ef",Subject:h,matrix:null,CustomStampName:this.customStampName?this.customStampName:"",pageNumber:l};return d[0]=S,{stampAnnotations:d}},e.prototype.triggerAnnotationAdd=function(e,t){var i={opacity:e.opacity,borderColor:e.strokeColor,borderWidth:e.thickness,author:t.author,subject:t.subject,modifiedDate:t.modifiedDate,fillColor:e.fillColor,fontSize:e.fontSize,width:e.bounds.width,height:e.bounds.height,fontColor:e.fontColor,fontFamily:e.fontFamily,defaultText:e.dynamicText,fontStyle:e.font,textAlignment:e.textAlign};this.pdfViewer.fireAnnotationAdd(e.pageIndex,e.annotName,"Stamp",e.bounds,i)},e}(),et=function(){function e(e,t){this.commentsCount=0,this.commentsreplyCount=0,this.commentContextMenu=[],this.isAccordionContainer=!0,this.isCreateContextMenu=!1,this.isCommentsSelected=!1,this.isAddAnnotationProgramatically=!1,this.isEditableElement=!1,this.isPageCommentsRendered=!1,this.isCommentsRendered=!1,this.isAnnotationRendered=!1,this.pdfViewer=e,this.pdfViewerBase=t,this.opacity=this.pdfViewer.stickyNotesSettings.opacity?this.pdfViewer.stickyNotesSettings.opacity:1}return e.prototype.renderStickyNotesAnnotations=function(e,t,i){if(e&&e.length>0)for(var n=0;n<e.length;n++){var o=e[n],a=!1,s=this.getAnnotations(t,null,"sticky");if(null!==s)for(var r=0;r<s.length;r++){var l=o.annotName?o.annotName:o.AnnotName,d=s[r].annotName?s[r].annotName:s[r].AnnotName;if(d&&l&&d===l){a=!0;break}}if(!a){o.annotationAddMode=this.pdfViewer.annotationModule.findAnnotationMode(o,t,o.AnnotType);var h,p=o.Bounds,c=o.Author;o.AnnotationSettings=o.AnnotationSettings?o.AnnotationSettings:this.pdfViewer.annotationModule.updateAnnotationSettings(o),o.allowedInteractions=o.AllowedInteraction?o.AllowedInteraction:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(o);var u=!0;u="Imported Annotation"===o.annotationAddMode?o.IsPrint:o.AnnotationSettings.isPrint,o.IsLock&&(o.AnnotationSettings.isLock=o.IsLock),h={shapeAnnotationType:"sticky",type:"StickyNotes",author:c,modifiedDate:o.ModifiedDate,subject:o.Subject,note:o.Note,opacity:o.Opacity,state:o.State,stateModel:o.StateModel,pathData:"",comments:this.pdfViewer.annotationModule.getAnnotationComments(o.Comments,o,c),review:{state:o.State,stateModel:o.StateModel,modifiedDate:o.ModifiedDate,author:c},pageNumber:t,bounds:{x:o.Bounds.X,y:o.Bounds.Y,left:o.Bounds.X,top:o.Bounds.Y,width:o.Bounds.Width,height:o.Bounds.Height,right:o.Bounds.Right,bottom:o.Bounds.Bottom},annotName:o.AnnotName,color:o.color,annotationSelectorSettings:this.getSettings(o),customData:this.pdfViewer.annotation.getCustomData(o),annotationSettings:o.AnnotationSettings,allowedInteractions:o.allowedInteractions,isPrint:u,isCommentLock:o.IsCommentLock};var f;if(o.AnnotationSelectorSettings=o.AnnotationSelectorSettings?o.AnnotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,f={author:c,modifiedDate:h.modifiedDate,annotName:h.annotName,pageIndex:t,bounds:{x:p.Left,y:p.Top,width:p.Width,height:p.Height},strokeColor:"transparent",stampStrokeColor:"",data:this.setImageSource(),shapeAnnotationType:"StickyNotes",type:"StickyNotes",subject:h.subject,notes:h.note,opacity:h.opacity,id:h.annotName,fillColor:h.color,annotationSelectorSettings:o.AnnotationSelectorSettings,annotationSettings:h.annotationSettings,annotationAddMode:o.annotationAddMode,isPrint:u,isCommentLock:h.isCommentLock},i?this.drawStickyNotes(p.Left,p.Top,p.Width,p.Height,t,f,i):(this.pdfViewer.add(f),this.drawStickyNotes(p.Left,p.Top,p.Width,p.Height,t,f),this.pdfViewer.annotationModule.storeAnnotations(t,h,"_annotations_sticky")),this.isAddAnnotationProgramatically){var g={opacity:f.opacity,borderColor:f.strokeColor,borderWidth:f.thickness,author:o.author,subject:o.subject,modifiedDate:o.modifiedDate,fillColor:f.fillColor,fontSize:f.fontSize,width:f.bounds.width,height:f.bounds.height,fontColor:f.fontColor,fontFamily:f.fontFamily,defaultText:f.dynamicText,fontStyle:f.font,textAlignment:f.textAlign};this.pdfViewer.fireAnnotationAdd(f.pageIndex,f.annotName,"StickyNotes",f.bounds,g)}}}},e.prototype.getSettings=function(e){var t=this.pdfViewer.annotationSelectorSettings;return e.AnnotationSelectorSettings?t=e.AnnotationSelectorSettings:this.pdfViewer.stickyNotesSettings.annotationSelectorSettings&&(t=this.pdfViewer.stickyNotesSettings.annotationSelectorSettings),t},e.prototype.drawStickyNotes=function(e,t,i,n,o,a,s){var r,l=this,d=null,h=new Image,p=this;h.onload=function(){var c,u,f="Guest"!==l.pdfViewer.annotationSettings.author?l.pdfViewer.annotationSettings.author:l.pdfViewer.stickyNotesSettings.author;if(a)r={author:a.author,modifiedDate:a.modifiedDate,annotName:a.annotName,data:h.src,bounds:{x:e,y:t,width:i,height:n},subject:a.subject,notes:a.notes,opacity:a.opacity,id:a.annotName,shapeAnnotationType:"StickyNotes",type:"StickyNotes",strokeColor:"transparent",stampStrokeColor:"",pageIndex:a.pageIndex,isPrint:a.isPrint};else{u=l.pdfViewer.annotation.createGUID(),(c=p.addComments("sticky",o+1,"",u,"",f))&&(document.getElementById(c).id=u);var g=l.pdfViewer.stickyNotesSettings.annotationSelectorSettings?l.pdfViewer.stickyNotesSettings.annotationSelectorSettings:l.pdfViewer.annotationSelectorSettings,m=l.pdfViewer.stickyNotesSettings.isPrint;r={bounds:{x:e,y:t,width:i,height:n},pageIndex:o,data:h.src,modifiedDate:l.getDateAndTime(),shapeAnnotationType:"StickyNotes",type:"StickyNotes",strokeColor:"transparent",stampStrokeColor:"",annotName:u,id:u,opacity:l.opacity,isPrint:m};var w=l.pdfViewer.stickyNotesSettings.isLock?l.pdfViewer.stickyNotesSettings.isLock:l.pdfViewer.annotationSettings.isLock,y=l.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(a);d={author:f,allowedInteractions:y,modifiedDate:l.getDateAndTime(),subject:"Sticky Note",shapeAnnotationType:"sticky",pageNumber:o,type:"StickyNotes",note:"",opacity:l.opacity,pathData:"",state:"",stateModel:"",color:"rgba(255,255,0)",comments:[],annotName:u,bounds:{x:e,y:t,left:e,top:t,width:i,height:n},review:{state:"",stateModel:"",modifiedDate:"",author:f},annotationSelectorSettings:g,customData:l.pdfViewer.annotationModule.getData("sticky"),annotationSettings:{isLock:w},isPrint:m,isCommentLock:!1}}if(a||(p.pdfViewer.annotation.addAction(o,null,r,"Addition","",r,r),p.pdfViewer.add(r),p.pdfViewer.annotationModule.storeAnnotations(o,d,"_annotations_sticky")),p.pdfViewerBase.isAddComment){var S={x:r.bounds.x,y:r.bounds.y,left:r.bounds.x,top:r.bounds.y,width:r.bounds.width,height:r.bounds.height};l.pdfViewerBase.updateDocumentEditedProperty(!0);var v={opacity:r.opacity,author:f,modifiedDate:r.modifiedDate,subject:r.shapeAnnotationType};l.pdfViewer.fireAnnotationAdd(r.pageIndex,r.annotName,"StickyNotes",S,v)}if(p.pdfViewerBase.isFreeTextSelected=!1,s)p.pdfViewer.renderDrawing(s,o);else{var b=document.getElementById(p.pdfViewer.element.id+"_annotationCanvas_"+o);p.pdfViewer.renderDrawing(b,o)}sf.base.Browser.isDevice&&p.pdfViewer.select([r.id],r.annotationSelectorSettings),p.pdfViewerBase.isAddComment=!1},h.src=this.setImageSource()},e.prototype.setImageSource=function(){return"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcKICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIgogICB4bWxuczpjYz0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbnMjIgogICB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiCiAgIHhtbG5zOnN2Zz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgd2lkdGg9IjE2IgogICBoZWlnaHQ9IjE1IgogICB2aWV3Qm94PSIwIDAgNC4yMzMzMzMxIDMuOTY4NzQ5NyIKICAgdmVyc2lvbj0iMS4xIj4KICA8ZyBpZD0ibGF5ZXIxIj4KICAgIDxwYXRoCiAgICAgICBkPSJNIDMuODM4OSwwLjk0MTY3IEMgMy42NTM5LDAuNzAzNjcgMy40MTU5LDAuNTE3NjcgMy4xMjQ5LDAuMzg1NjcgMi44MDc5LDAuMjUzNjcgMi40ODk5LDAuMTczNjcgMi4xMTk5LDAuMTczNjcgMS43NDg5LDAuMTczNjcgMS40MzE5LDAuMjUzNjcgMS4xMTQyLDAuMzg1NjcgMC44MjMxNiwwLjUxNzY3IDAuNTg1MTYsMC43MDM2NyAwLjQwMDE2LDAuOTQxNjcgMC4yMTUxNiwxLjE3OTcgMC4xMzUxNiwxLjQxNzcgMC4xMzUxNiwxLjcwODcgMC4xMzUxNiwxLjk0NjcgMC4xODgxNiwyLjE1ODcgMC4zMjAxNiwyLjM0MzcgMC40NTMxNiwyLjU1NTcgMC42MTExNiwyLjcxMzcgMC44MjMxNiwyLjg0NjcgMC43OTIxNiwzLjE1NDcgMC42NTAxNiwzLjM4MjcgMC40NzkxNiwzLjU4NzcgMC40MjgxNiwzLjY2NzcgMC41MTcxNiwzLjc0MTcgMC42OTExNiwzLjcxOTcgMS4wODgyLDMuNjM5NyAxLjQwNDksMy40NTQ3IDEuNjQyOSwzLjE2MzcgMS44MDE5LDMuMTkwNyAxLjk2MDksMy4yMTY3IDIuMTE5OSwzLjIxNjcgMi40ODk5LDMuMjE2NyAyLjgwNzksMy4xMzc3IDMuMTI0OSwzLjAwNTcgMy40MTU5LDIuODcyNyAzLjY4MDksMi42ODc3IDMuODM4OSwyLjQ0OTcgNC4wMjQ5LDIuMjExNyA0LjEwMzksMS45NzM3IDQuMTAzOSwxLjY4MjcgNC4xMDM5LDEuNDE3NyA0LjAyNDksMS4xNTI3IDMuODM4OSwwLjk0MTY3IFoiCiAgICAgICBpZD0icGF0aDE1MjQiCiAgICAgICBzdHlsZT0iZmlsbDojZmZmNzAwO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDowLjI2NDU4MztzdHJva2Utb3BhY2l0eToxIiAvPgogICAgPHBhdGgKICAgICAgIGQ9Ik0gMy4wNDI5LDEuNDE2NyBIIDEuMTkxMiBDIDEuMTExMiwxLjQxNjcgMS4wNTkyLDEuMzYzNyAxLjA1OTIsMS4yODM3IDEuMDU5MiwxLjIwNDcgMS4xMTEyLDEuMTUxNyAxLjE5MTIsMS4xNTE3IEggMy4wNDI5IEMgMy4xMjE5LDEuMTUxNyAzLjE3NDksMS4yMDQ3IDMuMTc0OSwxLjI4MzcgMy4xNzQ5LDEuMzYzNyAzLjEyMTksMS40MTY3IDMuMDQyOSwxLjQxNjcgWiIKICAgICAgIGlkPSJwYXRoMTUzNiIKICAgICAgIHN0eWxlPSJzdHJva2Utd2lkdGg6MC4yNjQ1ODMiIC8+CiAgICA8cGF0aAogICAgICAgZD0iTSAzLjA0MjksMS45NDU3IEggMS4xOTEyIEMgMS4xMTEyLDEuOTQ1NyAxLjA1OTIsMS44OTI3IDEuMDU5MiwxLjgxMjcgMS4wNTkyLDEuNzMzNyAxLjExMTIsMS42ODA3IDEuMTkxMiwxLjY4MDcgSCAzLjA0MjkgQyAzLjEyMTksMS42ODA3IDMuMTc0OSwxLjczMzcgMy4xNzQ5LDEuODEyNyAzLjE3NDksMS44OTI3IDMuMTIxOSwxLjk0NTcgMy4wNDI5LDEuOTQ1NyBaIgogICAgICAgaWQ9InBhdGgxNTQwIgogICAgICAgc3R5bGU9InN0cm9rZS13aWR0aDowLjI2NDU4MyIgLz4KICA8L2c+Cjwvc3ZnPgo="},e.prototype.createRequestForComments=function(){var e,t=this,i=t.pdfViewerBase.pageCount;t.isCommentsRendered||(20<i?i=20:t.isPageCommentsRendered=!0),this.isCommentsRendered?e={pageStartIndex:20,pageEndIndex:i,hashId:this.pdfViewerBase.hashId,action:"RenderAnnotationComments",elementId:this.pdfViewer.dataId,uniqueId:t.pdfViewerBase.documentId}:(e={pageStartIndex:0,pageEndIndex:i,hashId:this.pdfViewerBase.hashId,action:"RenderAnnotationComments",elementId:this.pdfViewer.dataId,uniqueId:t.pdfViewerBase.documentId},t.isCommentsRendered=!0),this.pdfViewerBase.jsonDocumentId&&(e.documentId=this.pdfViewerBase.jsonDocumentId);var n=this.pdfViewer.serviceUrl+"/"+this.pdfViewer.serverActionSettings.renderComments;t.commentsRequestHandler=new xe(t.pdfViewer),t.commentsRequestHandler.url=n,t.commentsRequestHandler.mode=!0,t.commentsRequestHandler.responseType="text",t.commentsRequestHandler.send(e),t.commentsRequestHandler.onSuccess=function(e){var i=e.data;t.updateCommentsCollection(i)},t.commentsRequestHandler.onFailure=function(e){this.pdfViewer.fireAjaxRequestFailed(e.status,e.statusText)},t.commentsRequestHandler.onError=function(e){t.pdfViewer.fireAjaxRequestFailed(e.status,e.statusText,t.pdfViewer.serverActionSettings.renderComments)}},e.prototype.updateCommentsCollection=function(e){if(e){if("object"!==i(e))try{"object"!==i(e=JSON.parse(e))&&(e=JSON.parse(e)),"object"!==i(e)&&(this.pdfViewerBase.onControlError(500,e,this.pdfViewer.serverActionSettings.renderComments),e=null)}catch(t){this.pdfViewerBase.onControlError(500,e,this.pdfViewer.serverActionSettings.renderComments),e=null}if(e){var t=!1;if(this.pdfViewerBase.annotationComments?this.pdfViewerBase.annotationComments=e.annotationDetails:(this.pdfViewerBase.annotationComments=e.annotationDetails,t=!0),e.annotationDetails&&e.uniqueId===this.pdfViewerBase.documentId){this.pdfViewer.fireAjaxRequestSuccess(this.pdfViewer.serverActionSettings.renderComments,e),this.isAnnotationRendered=!0;var n=void 0;if(this.pdfViewerBase.documentAnnotationCollections)n=this.updateAnnotationsInDocumentCollections(this.pdfViewerBase.annotationComments,this.pdfViewerBase.documentAnnotationCollections);else{var o=this.pdfViewerBase.createAnnotationsCollection();n=this.updateAnnotationsInDocumentCollections(this.pdfViewerBase.annotationComments,o)}this.pdfViewerBase.annotationComments=n,this.pdfViewerBase.documentAnnotationCollections=n;for(var a=e.startPageIndex;a<e.endPageIndex;a++){var s=e.annotationDetails[a];this.pdfViewerBase.updateModifiedDateToLocalDate(s,"freeTextAnnotation"),this.pdfViewerBase.updateModifiedDateToLocalDate(s,"measureShapeAnnotation"),this.pdfViewerBase.updateModifiedDateToLocalDate(s,"shapeAnnotation"),this.pdfViewerBase.updateModifiedDateToLocalDate(s,"signatureAnnotation"),this.pdfViewerBase.updateModifiedDateToLocalDate(s,"signatureInkAnnotation"),this.pdfViewerBase.updateModifiedDateToLocalDate(s,"stampAnnotations"),this.pdfViewerBase.updateModifiedDateToLocalDate(s,"stickyNotesAnnotation"),this.pdfViewerBase.updateModifiedDateToLocalDate(s,"textMarkupAnnotation")}for(var r=e.startPageIndex;r<e.endPageIndex;r++)e.annotationDetails[r]&&this.renderAnnotationCollections(e.annotationDetails[r],r,t,e.endPageIndex);this.isPageCommentsRendered?e.endPageIndex<=20?this.pdfViewer.viewerBase.isAnnotationPresent=e.isAnnotationPresent:e.endPageIndex>20&&(this.pdfViewer.viewerBase.isAnnotationPresent||(this.pdfViewer.viewerBase.isAnnotationPresent=e.isAnnotationPresent)):(this.isPageCommentsRendered=!0,this.pdfViewer.viewerBase.isAnnotationPresent=e.isAnnotationPresent,this.createRequestForComments())}}}},e.prototype.updateAnnotationsInDocumentCollections=function(e,t){for(var i=0;i<this.pdfViewerBase.pageCount;i++)if(e[i]&&t[i]){if(e[i].textMarkupAnnotation&&0!==e[i].textMarkupAnnotation.length&&t[i].textMarkupAnnotation)for(var n=0;n<e[i].textMarkupAnnotation.length;n++)this.updateDocumentAnnotationCollections(e[i].textMarkupAnnotation[n],t[i].textMarkupAnnotation);if(e[i].shapeAnnotation&&0!==e[i].shapeAnnotation.length&&t[i].shapeAnnotation)for(n=0;n<e[i].shapeAnnotation.length;n++)this.updateDocumentAnnotationCollections(e[i].shapeAnnotation[n],t[i].shapeAnnotation);if(e[i].measureShapeAnnotation&&0!==e[i].measureShapeAnnotation.length&&t[i].measureShapeAnnotation)for(n=0;n<e[i].measureShapeAnnotation.length;n++)this.updateDocumentAnnotationCollections(e[i].measureShapeAnnotation[n],t[i].measureShapeAnnotation);if(e[i].stampAnnotations&&0!==e[i].stampAnnotations.length&&t[i].stampAnnotations)for(n=0;n<e[i].stampAnnotations.length;n++)this.updateDocumentAnnotationCollections(e[i].stampAnnotations[n],t[i].stampAnnotations);if(e[i].stickyNotesAnnotation&&0!==e[i].stickyNotesAnnotation.length&&t[i].stickyNotesAnnotation)for(n=0;n<e[i].stickyNotesAnnotation.length;n++)this.updateDocumentAnnotationCollections(e[i].stickyNotesAnnotation[n],t[i].stickyNotesAnnotation);if(e[i].freeTextAnnotation&&0!==e[i].freeTextAnnotation.length&&t[i].freeTextAnnotation)for(n=0;n<e[i].freeTextAnnotation.length;n++)this.updateDocumentAnnotationCollections(e[i].freeTextAnnotation[n],t[i].freeTextAnnotation);if(e[i].signatureAnnotation&&0!==e[i].signatureAnnotation.length&&t[i].signatureAnnotation)for(n=0;n<e[i].signatureAnnotation.length;n++)this.updateDocumentAnnotationCollections(e[i].signatureAnnotation[n],t[i].signatureAnnotation);if(e[i].signatureInkAnnotation&&0!==e[i].signatureInkAnnotation.length&&t[i].signatureInkAnnotation)for(n=0;n<e[i].signatureInkAnnotation.length;n++)this.updateDocumentAnnotationCollections(e[i].signatureInkAnnotation[n],t[i].signatureInkAnnotation)}return t},e.prototype.updateDocumentAnnotationCollections=function(e,t){if(0===t.length)t.push(e);else{for(var i=!1,n=0;n<t.length;n++)if(e.AnnotName&&t[n].AnnotName&&e.AnnotName===t[n].AnnotName){i=!0;break}i||t.push(e)}},e.prototype.renderAnnotationCollections=function(e,t,i,n){var o=[];if(e.textMarkupAnnotation&&0!==e.textMarkupAnnotation.length)for(var a=0;a<e.textMarkupAnnotation.length;a++)this.pdfViewer.dateTimeFormat&&(e.textMarkupAnnotation[a].ModifiedDate=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.getDateAndTime(e.textMarkupAnnotation[a].ModifiedDate)),o.push(e.textMarkupAnnotation[a]),this.updateCollections(this.pdfViewer.annotationModule.textMarkupAnnotationModule.updateTextMarkupAnnotationCollections(e.textMarkupAnnotation[a],t));if(e.shapeAnnotation&&0!==e.shapeAnnotation.length)for(a=0;a<e.shapeAnnotation.length;a++)this.pdfViewer.dateTimeFormat&&(e.shapeAnnotation[a].ModifiedDate=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.getDateAndTime(e.shapeAnnotation[a].ModifiedDate)),o.push(e.shapeAnnotation[a]),this.updateCollections(this.pdfViewer.annotationModule.shapeAnnotationModule.updateShapeAnnotationCollections(e.shapeAnnotation[a],t));if(e.measureShapeAnnotation&&0!==e.measureShapeAnnotation.length)for(a=0;a<e.measureShapeAnnotation.length;a++)this.pdfViewer.dateTimeFormat&&(e.measureShapeAnnotation[a].ModifiedDate=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.getDateAndTime(e.measureShapeAnnotation[a].ModifiedDate)),o.push(e.measureShapeAnnotation[a]),this.updateCollections(this.pdfViewer.annotationModule.measureAnnotationModule.updateMeasureAnnotationCollections(e.measureShapeAnnotation[a],t));if(e.stampAnnotations&&0!==e.stampAnnotations.length)for(a=0;a<e.stampAnnotations.length;a++)this.pdfViewer.dateTimeFormat&&(e.stampAnnotations[a].ModifiedDate=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.getDateAndTime(e.stampAnnotations[a].ModifiedDate)),o.push(e.stampAnnotations[a]),this.updateCollections(this.pdfViewer.annotationModule.stampAnnotationModule.updateStampAnnotationCollections(e.stampAnnotations[a],t));if(e.stickyNotesAnnotation&&0!==e.stickyNotesAnnotation.length)for(a=0;a<e.stickyNotesAnnotation.length;a++)this.pdfViewer.dateTimeFormat&&(e.stickyNotesAnnotation[a].ModifiedDate=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.getDateAndTime(e.stickyNotesAnnotation[a].ModifiedDate)),o.push(e.stickyNotesAnnotation[a]),this.updateCollections(this.updateStickyNotesAnnotationCollections(e.stickyNotesAnnotation[a],t));if(e.freeTextAnnotation&&0!==e.freeTextAnnotation.length)for(a=0;a<e.freeTextAnnotation.length;a++)this.pdfViewer.dateTimeFormat&&(e.freeTextAnnotation[a].ModifiedDate=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.getDateAndTime(e.freeTextAnnotation[a].ModifiedDate)),o.push(e.freeTextAnnotation[a]),this.updateCollections(this.pdfViewer.annotationModule.freeTextAnnotationModule.updateFreeTextAnnotationCollections(e.freeTextAnnotation[a],t));if(e.signatureAnnotation&&0!==e.signatureAnnotation.length)for(a=0;a<e.signatureAnnotation.length;a++)this.pdfViewer.dateTimeFormat&&(e.signatureAnnotation[a].ModifiedDate=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.getDateAndTime(e.signatureAnnotation[a].ModifiedDate)),this.updateCollections(this.pdfViewerBase.signatureModule.updateSignatureCollections(e.signatureAnnotation[a],t),!0);if(e.signatureInkAnnotation&&0!==e.signatureInkAnnotation.length)for(a=0;a<e.signatureInkAnnotation.length;a++)this.pdfViewer.dateTimeFormat&&(e.signatureInkAnnotation[a].ModifiedDate=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.getDateAndTime(e.signatureInkAnnotation[a].ModifiedDate)),o.push(e.signatureInkAnnotation[a]),this.updateCollections(this.pdfViewer.annotationModule.inkAnnotationModule.updateInkCollections(e.signatureInkAnnotation[a],t));var s=!1;if(t===n-1&&(s=!0),this.pdfViewer.enableCommentPanel&&this.pdfViewer._dotnetInstance.invokeMethodAsync("RenderAnnotationComments",o,t,s),i)for(a=0;a<this.pdfViewerBase.renderedPagesList.length;a++)this.pdfViewerBase.renderAnnotations(this.pdfViewerBase.renderedPagesList[a])},e.prototype.updateCollections=function(e,t){var i,n=!1;if((i=t?this.pdfViewer.signatureCollection:this.pdfViewer.annotationCollection)&&e)for(var o=0;o<i.length;o++)if(t){if(i[o].signatureName===e.signatureName){n=!0;break}}else if(i[o].annotationId===e.annotationId){n=!0;break}!n&&e&&(t?this.pdfViewer.signatureCollection.push(e):this.pdfViewer.annotationCollection.push(e))},e.prototype.updateCommentPanelTextTop=function(){var e=document.getElementById(this.pdfViewer.dataId+"_commentsPanelText");this.pdfViewerBase.navigationPane.commentPanelContainer&&this.pdfViewerBase.navigationPane.commentPanelContainer.clientHeight&&"none"!==e.style.display&&(e.style.paddingTop=this.pdfViewerBase.navigationPane.commentPanelContainer.clientHeight/2-47+"px",e.style.paddingLeft=this.pdfViewerBase.navigationPane.commentPanelContainer.clientWidth/3+"px")},e.prototype.updateCommentPanelScrollTop=function(e){var t=document.getElementById(this.pdfViewer.dataId+"_accordionContainer"+e);if(this.pdfViewerBase.navigationPane.commentsContentContainer=document.querySelector(".e-pv-comments-content-container"),t){var i=t.offsetTop+t.clientTop-35;this.pdfViewerBase.navigationPane.commentsContentContainer.scrollTop=i}},e.prototype.commentDivFocus=function(e){var t=this,i=this.pdfViewerBase.currentPageNumber;setTimeout((function(){t.updateScrollPosition(i)}),500)},e.prototype.updateScrollPosition=function(e){var t=document.getElementById(this.pdfViewer.dataId+"_accordionContainer"+e);if(t&&this.isNewcommentAdded){var i=0,n=document.querySelectorAll(".e-editable-inline");n[0]&&(i=n[0].getBoundingClientRect().height);var o=t.offsetTop+t.clientTop+i;this.pdfViewerBase.navigationPane.commentsContentContainer.scrollTop<o&&(this.pdfViewerBase.navigationPane.commentsContentContainer.scrollTop=o),this.isNewcommentAdded=!1}},e.prototype.updateCommentsScrollTop=function(e){var t=document.getElementById(this.pdfViewer.dataId+"_accordionContainer"+this.pdfViewerBase.currentPageNumber),i=document.querySelector(".e-pv-comments-border"),n=0;if(t&&i){n=i.getBoundingClientRect().height;var o=void 0;o=e?t.offsetTop+i.offsetTop+n/4:t.offsetTop+i.offsetTop-70,this.pdfViewerBase.navigationPane.commentsContentContainer.scrollTop=o}},e.prototype.modifyProperty=function(e){var t=e.element.parentElement.id,i=e.element.parentElement.parentElement.id,n=e.element.previousSibling.firstChild;this.updateModifiedDate(n),this.modifyCommentsProperty(e.value,t,i,e.prevValue)},e.prototype.updateCommentIcon=function(e,t,i){"sticky"===t?e.className="e-pv-comment-icon e-pv-icon":"stamp"===t?e.className="e-pv-stamp-icon e-pv-icon":"shape"===t?e.className="Line"===i?"e-pv-shape-line-icon e-pv-icon":"LineWidthArrowHead"===i||"Arrow"===i?"e-pv-shape-arrow-icon e-pv-icon":"Circle"===i||"Ellipse"===i||"Oval"===i?"e-pv-shape-circle-icon e-pv-icon":"Rectangle"===i||"Square"===i?"e-pv-shape-rectangle-icon e-pv-icon":"Polygon"===i?"e-pv-shape-pentagon-icon e-pv-icon":"e-pv-annotation-shape-icon e-pv-icon":"measure"===t?e.className="Distance"===i||"Distance calculation"===i?"e-pv-calibrate-distance-icon e-pv-icon":"Perimeter"===i||"Perimeter calculation"===i?"e-pv-calibrate-perimeter-icon e-pv-icon":"Radius"===i||"Radius calculation"===i?"e-pv-calibrate-radius-icon e-pv-icon":"Area"===i||"Area calculation"===i?"e-pv-calibrate-area-icon e-pv-icon":"Volume"===i||"Volume calculation"===i?"e-pv-calibrate-volume-icon e-pv-icon":"e-pv-annotation-calibrate-icon e-pv-icon":"textMarkup"===t?e.className="Highlight"===i?"e-pv-highlight-icon e-pv-icon":"Underline"===i?"e-pv-underline-icon e-pv-icon":"Strikethrough"===i?"e-pv-strikethrough-icon e-pv-icon":"e-pv-annotation-icon e-pv-icon":"freeText"===t?e.className="e-pv-freetext-icon e-pv-icon":"ink"!==t&&"Ink"!==i||(e.className="e-pv-inkannotation-icon e-pv-icon")},e.prototype.updateStatusContainer=function(e,t,i,n){"Accepted"===e?(i.style.backgroundColor="rgb(24,169,85)",t.className="e-pv-accepted-icon"):"Completed"===e?(i.style.backgroundColor="rgb(0,122,255)",t.className="e-pv-completed-icon"):"Cancelled"===e?(i.style.backgroundColor="rgb(245,103,0)",t.className="e-pv-cancelled-icon"):"Rejected"===e?(i.style.backgroundColor="rgb(255,59,48)",t.className="e-pv-rejected-icon"):(t.className="",n.parentElement.removeChild(n))},e.prototype.updateCommentMenuItem=function(e){var t,i=document.querySelectorAll("#"+this.pdfViewer.dataId+"_more-options");if(i)for(var n=0;n<i.length;n++)"visible"===i[n].style.visibility&&(t=i[n].parentElement.nextSibling);if(e)switch(e){case this.pdfViewer.localeObj.getConstant("Edit"):var o=document.querySelectorAll(".e-pv-new-comments-div");for(n=0;n<o.length;n++)o[n].style.display="none";break;case this.pdfViewer.localeObj.getConstant("Delete Context"):t.parentElement.parentElement.firstElementChild===t.parentElement?this.pdfViewer.annotationModule.deleteAnnotation():this.modifyCommentDeleteProperty(t.parentElement.parentElement,t.parentElement);break;case this.pdfViewer.localeObj.getConstant("Set Status"):break;case this.pdfViewer.localeObj.getConstant("Accepted"):case this.pdfViewer.localeObj.getConstant("Completed"):case this.pdfViewer.localeObj.getConstant("Cancelled"):case this.pdfViewer.localeObj.getConstant("Rejected"):case this.pdfViewer.localeObj.getConstant("None"):var a=t.parentElement;this.modifyStatusProperty(e,a)}},e.prototype.commentMenuItemSelect=function(e){var t,i=document.querySelectorAll("#"+this.pdfViewer.dataId+"_more-options");if(i){for(var n=0;n<i.length;n++)"visible"===i[n].style.visibility&&(t=i[n].parentElement.nextSibling);if(e.item)switch(e.item.text){case this.pdfViewer.localeObj.getConstant("Edit"):var o=document.querySelectorAll(".e-pv-new-comments-div");for(n=0;n<o.length;n++)o[n].style.display="none";break;case this.pdfViewer.localeObj.getConstant("Delete Context"):t.parentElement.parentElement.firstElementChild===t.parentElement?this.pdfViewer.annotationModule.deleteAnnotation():this.modifyCommentDeleteProperty(t.parentElement.parentElement,t.parentElement);break;case this.pdfViewer.localeObj.getConstant("Set Status"):break;case this.pdfViewer.localeObj.getConstant("Accepted"):t.parentElement.lastChild.id===this.pdfViewer.dataId+"status_container"&&t.parentElement.lastChild.remove();var a=sf.base.createElement("div",{id:this.pdfViewer.dataId+"status_container",className:"e-pv-status-container"}),s=sf.base.createElement("div",{id:this.pdfViewer.dataId+"status_div",className:"e-pv-status-div"}),r=sf.base.createElement("span",{id:this.pdfViewer.dataId+"status_icon",className:"e-pv-accepted-icon"});s.style.backgroundColor="rgb(24,169,85)",s.appendChild(r),a.appendChild(s),t.parentElement.appendChild(a),this.modifyStatusProperty("Accepted",t.parentElement);break;case this.pdfViewer.localeObj.getConstant("Completed"):t.parentElement.lastChild.id===this.pdfViewer.dataId+"status_container"&&t.parentElement.lastChild.remove();var l=sf.base.createElement("div",{id:this.pdfViewer.dataId+"status_container",className:"e-pv-status-container"}),d=sf.base.createElement("div",{id:this.pdfViewer.dataId+"status_div",className:"e-pv-status-div"}),h=sf.base.createElement("span",{id:this.pdfViewer.dataId+"status_icon",className:"e-pv-completed-icon"});d.style.backgroundColor="rgb(0,122,255)",d.appendChild(h),l.appendChild(d),t.parentElement.appendChild(l),this.modifyStatusProperty("Completed",t.parentElement);break;case this.pdfViewer.localeObj.getConstant("Cancelled"):t.parentElement.lastChild.id===this.pdfViewer.dataId+"status_container"&&t.parentElement.lastChild.remove();var p=sf.base.createElement("div",{id:this.pdfViewer.dataId+"status_container",className:"e-pv-status-container"}),c=sf.base.createElement("div",{id:this.pdfViewer.dataId+"status_div",className:"e-pv-status-div"}),u=sf.base.createElement("span",{id:this.pdfViewer.dataId+"status_icon",className:"e-pv-cancelled-icon"});c.style.backgroundColor="rgb(245,103,0)",c.appendChild(u),p.appendChild(c),t.parentElement.appendChild(p),this.modifyStatusProperty("Cancelled",t.parentElement);break;case this.pdfViewer.localeObj.getConstant("Rejected"):t.parentElement.lastChild.id===this.pdfViewer.dataId+"status_container"&&t.parentElement.lastChild.remove();var f=sf.base.createElement("div",{id:this.pdfViewer.dataId+"status_container",className:"e-pv-status-container"}),g=sf.base.createElement("div",{id:this.pdfViewer.dataId+"status_div",className:"e-pv-status-div"}),m=sf.base.createElement("span",{id:this.pdfViewer.dataId+"status_icon",className:"e-pv-rejected-icon"});g.style.backgroundColor="rgb(255,59,48)",g.appendChild(m),f.appendChild(g),t.parentElement.appendChild(f),this.modifyStatusProperty("Rejected",t.parentElement);break;case this.pdfViewer.localeObj.getConstant("None"):t.parentElement.lastChild.id===this.pdfViewer.dataId+"status_container"&&t.parentElement.lastChild.remove(),this.modifyStatusProperty("None",t.parentElement)}}},e.prototype.moreOptionsClick=function(e,t){if("block"!==document.getElementById(this.pdfViewer.dataId+"_comment_context_menu").style.display&&("e-pv-more-options-button e-btn"===e.currentTarget.className&&e.currentTarget.parentElement.nextSibling.lastChild.firstChild.click(),this.pdfViewer.annotationModule.checkContextMenuDeleteItem(this.commentMenuObj),this.commentMenuObj.open(e.clientY,e.clientX,e.currentTarget)),this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.inkAnnotationModule){var i=parseInt(this.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber);this.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(i)}},e.prototype.commentDivOnSelect=function(e){for(var t=document.querySelectorAll(".e-pv-comments-select"),i=0;i<t.length;i++)t[i].classList.remove("e-pv-comments-select");var n=document.getElementById(e.currentTarget.id);if(n&&(n.classList.remove("e-pv-comments-hover"),n.classList.remove("e-pv-comments-leave"),n.classList.add("e-pv-comments-select"),e.currentTarget.nextSibling&&e.currentTarget.nextSibling.classList.contains("e-pv-new-comments-div"))){var o=document.getElementById(e.currentTarget.nextSibling.id);o.classList.remove("e-pv-comments-hover"),o.classList.remove("e-pv-comments-leave"),o.classList.add("e-pv-comments-select")}},e.prototype.commentDivMouseOver=function(e){var t=document.getElementById(e.currentTarget.id);if(t&&(t.classList.remove("e-pv-comments-select"),t.classList.remove("e-pv-comments-leave"),t.classList.add("e-pv-comments-hover"),e.currentTarget.nextSibling&&e.currentTarget.nextSibling.classList.contains("e-pv-new-comments-div"))){var i=document.getElementById(e.currentTarget.nextSibling.id);i.classList.remove("e-pv-comments-select"),i.classList.remove("e-pv-comments-leave"),i.classList.add("e-pv-comments-hover")}},e.prototype.commentDivMouseLeave=function(e){var t=document.getElementById(e.currentTarget.id);if(t&&(t.classList.remove("e-pv-comments-hover"),t.classList.remove("e-pv-comments-select"),t.classList.add("e-pv-comments-leave"),e.currentTarget.nextSibling&&e.currentTarget.nextSibling.classList.contains("e-pv-new-comments-div"))){var i=document.getElementById(e.currentTarget.nextSibling.id);i.classList.remove("e-pv-comments-hover"),i.classList.remove("e-pv-comments-select"),i.classList.add("e-pv-comments-leave")}},e.prototype.drawIcons=function(e){if(this.pdfViewerBase.isCommentIconAdded){var t=this.pdfViewer.annotation.getEventPageNumber(e),i=this.pdfViewerBase.getElement("_pageDiv_"+t).getBoundingClientRect(),n=this.pdfViewerBase.getZoomFactor();this.pdfViewer.annotation.stickyNotesAnnotationModule.drawStickyNotes((e.clientX-i.left)/n,(e.clientY-i.top)/n,30,30,t,null),this.pdfViewerBase.isCommentIconAdded=!1;var o=document.getElementById(this.pdfViewer.dataId+"_comment");if((o=o.children[0])&&o.classList.contains("e-pv-select"))o.classList.remove("e-pv-select");else{var a=document.getElementById(this.pdfViewer.dataId+"_commentIcon");a&&(this.pdfViewer.enableRtl?a.className="e-pv-comment-icon e-pv-icon e-icon-left e-right":a.className="e-pv-comment-icon e-pv-icon e-icon-left")}}},e.prototype.addComments=function(e,t,i,n,o,a,s){this.pdfViewer._dotnetInstance.invokeMethodAsync("AddComment",e,t,i,n,o,a,s)},e.prototype.commentsAnnotationSelect=function(e){var t=e.currentTarget,i=this.checkAnnotationSettings(t.id);if(i){var n=this.findAnnotationObject(t.id);this.pdfViewer.annotationModule.checkAllowedInteractions("Select",n)&&(i=!1)}if(!i){if(t.classList.contains("e-pv-comments-border")){for(var o=document.querySelectorAll(".e-pv-comments-div"),a=0;a<o.length;a++)o[a].style.minHeight="60px";1===e.currentTarget.childElementCount&&e.currentTarget.childNodes[0].querySelector(".e-editable-inline")&&(e.currentTarget.childNodes[0].style.minHeight=e.currentTarget.childNodes[0].clientHeight)}if("e-pv-more-icon e-pv-icon"===e.target.className||"e-pv-more-options-button e-btn"===e.target.className)return e.preventDefault(),null;var s=parseInt(t.accessKey.split("_")[0]);if(t.classList.contains("e-pv-comments-border"))this.isSetAnnotationType=!0;else{var r=document.querySelectorAll(".e-pv-comments-border");if(r)for(a=0;a<r.length;a++)r[a].classList.remove("e-pv-comments-border");(o=document.getElementById(t.id))&&o.classList.add("e-pv-comments-border");var l=document.querySelectorAll(".e-pv-new-comments-div");for(a=0;a<l.length;a++)l[a].style.display="none";if(o){var d=o.querySelector(".e-pv-new-comments-div");d&&(d.style.display="block")}var h=t.lastChild;if(this.isEditableElement=!1,h.querySelector(".e-editable-inline")){h.style.display="block",h.querySelector(".e-editable-inline").style.display="block";for(var p=0;p<t.childElementCount;p++){var c=t.childNodes[p].querySelector(".e-editable-inline");c&&""===c.style.display&&h.classList.contains("e-pv-new-comments-div")&&(this.isEditableElement=!0,h.style.display="none",h.querySelector(".e-editable-inline").style.display="none")}}this.isSetAnnotationType=!1}if(!this.isSetAnnotationType){this.pdfViewer.navigation&&this.pdfViewer.navigationModule.goToPage(s);var u=t.getAttribute("name");"null"!==u&&"Ink"!==u||(u="ink"),this.isCommentsSelected=!1,this.setAnnotationType(t.id,u,s),this.isCommentsSelected||(this.selectAnnotationObj={id:t.id,annotType:u,pageNumber:s})}}this.isSetAnnotationType=!1},e.prototype.findAnnotationObject=function(e){if(this.pdfViewer.annotationModule.textMarkupAnnotationModule&&this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation)return this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation;if(this.pdfViewer.selectedItems.annotations[0])return this.pdfViewer.selectedItems.annotations[0];var t=this.pdfViewer.annotationCollection;if(t)for(var i=0;i<t.length;i++)if(t[i].annotationId&&t[i].annotationId===e){if("textMarkup"===t[i].shapeAnnotationType)return t[i];t=this.pdfViewer.annotations;for(var n=0;n<t.length;n++)if(t[n].annotName&&t[n].annotName===e)return t[n]}},e.prototype.checkAnnotationSettings=function(e){var t=this.pdfViewer.annotationCollection;if(t){for(var i=0;i<t.length;i++)if(t[i].annotationId&&t[i].annotationId===e)return!(!t[i].annotationSettings||!t[i].annotationSettings.isLock);return!1}return!1},e.prototype.updateCommentsContainerWidth=function(){var e=document.getElementById(this.pdfViewer.dataId+"_accordionContentContainer"),t=document.getElementById(this.pdfViewer.dataId+"_commentscontentcontainer");e.style.width=t.clientWidth+"px"},e.prototype.selectCommentsAnnotation=function(e){this.selectAnnotationObj&&!this.isCommentsSelected&&this.selectAnnotationObj.pageNumber-1===e&&(this.setAnnotationType(this.selectAnnotationObj.id,this.selectAnnotationObj.annotType,this.selectAnnotationObj.pageNumber),this.selectAnnotationObj=null,this.isCommentsSelected=!0)},e.prototype.setAnnotationType=function(e,t,i){var n="measure"===t?"shape_measure":t;"freeText"===n&&(n="freetext");var o=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_"+n);if(this.pdfViewerBase.isStorageExceed&&(o=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_"+n]),o){var a=JSON.parse(o),s=this.pdfViewer.selectedItems.annotations[0],r=this.pdfViewer.annotationModule.getPageCollection(a,i-1);if(a[r])for(var l=a[r].annotations,d=0;d<l.length;d++){var h=l[d].annotationSelectorSettings;if(l[d].annotName===e){if(s&&this.pdfViewer.fireAnnotationUnSelect(s.annotName,s.pageIndex,s),this.pdfViewer.clearSelection(i-1),"textMarkup"===t){this.pdfViewer.annotationModule.textMarkupAnnotationModule.clearCurrentAnnotationSelection(i-1,!0);var p=this.pdfViewerBase.getElement("_annotationCanvas_"+(i-1));this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectAnnotation(l[d],p,i-1),this.pdfViewer.annotation.textMarkupAnnotationModule.currentTextMarkupAnnotation=l[d],this.pdfViewer.annotation.textMarkupAnnotationModule.selectTextMarkupCurrentPage=i-1,this.pdfViewer.annotation.textMarkupAnnotationModule.enableAnnotationPropertiesTool(!0),this.pdfViewer.toolbarModule&&this.pdfViewer.enableAnnotationToolbar&&(this.pdfViewer.toolbarModule.annotationToolbarModule.isToolbarHidden=!0)}else"stamp"===t?(this.pdfViewer.select([l[d].randomId],h),this.pdfViewer.annotation.onAnnotationMouseDown()):"sticky"===t?(this.pdfViewer.select([l[d].annotName],h),this.pdfViewer.annotation.onAnnotationMouseDown()):(this.pdfViewer.select([l[d].id],h),this.pdfViewer.annotation.onAnnotationMouseDown());if("textMarkup"===t){if(l[d].rect||l[d].bounds)if(f=this.pdfViewerBase.pageSize[i-1].top*this.pdfViewerBase.getZoomFactor()+this.pdfViewer.annotationModule.getAnnotationTop(l[d])*this.pdfViewerBase.getZoomFactor()){var c=(f-20).toString();this.pdfViewerBase.viewerContainer.scrollTop=parseInt(c)}}else{var u=l[d].bounds.top;"ink"===t&&(u=l[d].bounds.y);var f,g=((f=this.pdfViewerBase.pageSize[i-1].top*this.pdfViewerBase.getZoomFactor()+u*this.pdfViewerBase.getZoomFactor())-20).toString();this.pdfViewerBase.viewerContainer.scrollTop=parseInt(g)}this.isCommentsSelected=!0}}}},e.prototype.modifyTextProperty=function(e,t,i){var n;if(this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation&&(n=this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation),n?n.annotName!==i&&(n=this.pdfViewer.selectedItems.annotations[0]):n=this.pdfViewer.selectedItems.annotations[0],i&&n.annotName!==i)for(var o=0;o<this.pdfViewer.annotations.length;o++)if(i===this.pdfViewer.annotations[o].annotName){n=this.pdfViewer.annotations[o];break}if(n){var a=document.getElementById(n.annotName);if(a){var s=void 0;s=a.accessKey?parseInt(a.accessKey.split("_")[0]):this.pdfViewerBase.currentPageNumber;var r=a.getAttribute("name"),l=s-1,d=void 0,h=!1;if("FreeText"===n.shapeAnnotationType||this.pdfViewer.enableShapeLabel&&("shape"===r||"shape_measure"===r)){var p=!1;i&&n.annotName!==i&&(this.pdfViewer.annotation.modifyDynamicTextValue(e,i),p=!0),p||("FreeText"===n.shapeAnnotationType?(n.dynamicText!==e&&this.pdfViewer.annotation.modifyDynamicTextValue(e,n.annotName),n.dynamicText=e):(this.pdfViewer.annotation.modifyDynamicTextValue(e,n.annotName),n.labelContent=e,n.notes=e),this.pdfViewer.nodePropertyChange(n,{}))}if(n.measureType&&""!==n.measureType?(d=this.getAnnotations(l,null,"shape_measure"),h=!0):d=this.getAnnotations(l,null,n.shapeAnnotationType),null!==d&&"FreeText"!==n.shapeAnnotationType)for(o=0;o<d.length;o++)if(d[o].annotName===n.annotName){var c=S(d[o]);if(null!==e&&d[o].note!==e)return this.pdfViewer.annotation.addAction(l,o,d[o],"Text Property Added","",c,d[o]),(n=d[o]).note=e,n.enableShapeLabel&&(n.labelContent=e),n.modifiedDate=this.getDateAndTime(),h?this.updateUndoRedoCollections(n,l,"shape_measure"):this.updateUndoRedoCollections(n,l),t&&""!==t?this.pdfViewer.fireCommentEdit(n.annotName,n.note,n):this.pdfViewer.fireCommentAdd(n.annotName,n.note,n),n}}}},e.prototype.getDateAndTime=function(e){e||(e=new Date),this.globalize=new sf.base.Internationalization;var t={format:this.pdfViewer.dateTimeFormat,type:"dateTime"};if(navigator.userAgent.includes("Firefox")){var i=new Date(e);if(isNaN(i.getDate())){var n=this.parseDateString(e);return this.globalize.formatDate(new Date(n),t)}return this.globalize.formatDate(i,t)}return this.globalize.formatDate(new Date(e),t)},e.prototype.parseDateString=function(e){if(e){var t=e.split(/[\s,]+/),i=this.monthToNumber(t[0]),n=parseInt(t[1],10),o=(new Date).getFullYear(),a=t[2].split(":"),s=parseInt(a[0],10),r=parseInt(a[1],10);return"PM"===t[3]&&12!==s&&(s+=12),new Date(o,i,n,s,r)}return new Date},e.prototype.monthToNumber=function(e){return["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].indexOf(e.substr(0,3))},e.prototype.modifyCommentsProperty=function(e,t,i,n){var o;if(o=this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation?this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation:this.pdfViewer.selectedItems.annotations[0]){var a=document.getElementById(o.annotName),s=parseInt(a.accessKey.split("_")[0])-1,r=void 0,l=!1,d=this.getAuthorName(o,a);if(o.measureType&&""!==o.measureType?(r=this.getAnnotations(s,null,"shape_measure"),l=!0):r=this.getAnnotations(s,null,o.shapeAnnotationType),null!==r)for(var h=0;h<r.length;h++)r[h].annotName===o.annotName&&(o=r[h]);var p=S(o);if(o.comments.length>0){for(var c=!1,u=0;u<o.comments.length;u++)o.comments[u].annotName===t&&(c=!0,o.comments[u].note=e,o.comments[u].modifiedDate=this.getDateAndTime());var f={annotName:t,parentId:i,subject:"Comments",comments:[],author:d,note:e,shapeAnnotationType:"",state:"",stateModel:"",modifiedDate:this.getDateAndTime(),review:{state:"",stateModel:"",modifiedDate:this.getDateAndTime(),author:d},isLock:!1};c||(o.comments[o.comments.length]=f)}else{f={annotName:t,parentId:i,subject:"Comments",comments:[],author:d,note:e,shapeAnnotationType:"",state:"",stateModel:"",modifiedDate:this.getDateAndTime(),review:{state:"",stateModel:"",modifiedDate:this.getDateAndTime(),author:d},isLock:!1};o.comments[o.comments.length]=f}this.pdfViewer.annotation.addAction(s,null,o,"Comments Property Added","",p,o),l?this.updateUndoRedoCollections(o,s,"shape_measure"):this.updateUndoRedoCollections(o,s)}void 0!==n?this.pdfViewer.fireCommentEdit(t,e,o):this.pdfViewer.fireCommentAdd(t,e,o)},e.prototype.modifyStatusProperty=function(e,t){var i;if(i=this.pdfViewer.annotation.textMarkupAnnotationModule.currentTextMarkupAnnotation?this.pdfViewer.annotation.textMarkupAnnotationModule.currentTextMarkupAnnotation:this.pdfViewer.selectedItems.annotations[0]){var n=document.getElementById(i.annotName),o=parseInt(n.accessKey.split("_")[0])-1,a=void 0,s=!1,r=n.getAttribute("author");if(i.measureType&&""!==i.measureType?(a=this.getAnnotations(o,null,"shape_measure"),s=!0):a=this.getAnnotations(o,null,i.shapeAnnotationType),null!==a)for(var l=0;l<a.length;l++)a[l].annotName===i.annotName&&(i=a[l]);var d=S(i);if(t.parentElement.firstElementChild.id===t.id)i.review={state:e,stateModel:"Review",author:r,modifiedDate:this.getDateAndTime(),annotId:t.id},i.state=e,i.stateModel="Review",this.pdfViewer.annotation.addAction(o,null,i,"Status Property Added","",d,i),this.pdfViewer.fireCommentStatusChanged(t.id,i.note,i,i.state);else for(var h=0;h<i.comments.length;h++)if(i.comments[h].annotName===t.id){var p=S(i.comments[h]);i.comments[h].state=e,i.comments[h].stateModel="Review",i.comments[h].review={state:e,stateModel:"Review",author:r,modifiedDate:this.getDateAndTime(),annotId:t.id},this.pdfViewer.annotation.addAction(o,null,i,"Status Property Added","",p,i.comments[h]),this.pdfViewer.fireCommentStatusChanged(i.comments[h].annotName,i.comments[h].note,i,i.comments[h].state)}s?this.updateUndoRedoCollections(i,o,"shape_measure"):this.updateUndoRedoCollections(i,o)}},e.prototype.modifyCommentDeleteProperty=function(e,t){var i,n,o,a=document.getElementById(e.id);if(a){var s=parseInt(a.accessKey.split("_")[0])-1,r=e.getAttribute("name"),l=this.getAnnotations(s,null,r);if(null!==l)for(var d=0;d<l.length;d++)l[d].annotName===e.id&&(o=l[d]);for(d=1;d<=o.comments.length;d++)if(o.comments[d-1].annotName===t.id){n=S(o);var h=d-1;o.comments[h].position=d,i=S(o.comments[h]),this.pdfViewer.fireCommentDelete(o.comments[h].annotName,o.comments[h].note,o),o.comments.splice(h,1),this.pdfViewer._dotnetInstance.invokeMethodAsync("RemoveReplyCollection",t.id,s,h)}this.pdfViewer.annotation.addAction(s,null,n,"Comments Reply Deleted","",i,o),this.updateUndoRedoCollections(o,s)}},e.prototype.updateOpacityValue=function(e){var t=this.getAnnotations(e.pageIndex,null,e.shapeAnnotationType);if(null!==t)for(var i=0;i<t.length;i++)t[i].annotName===e.annotName&&(t[i].opacity=e.opacity,this.updateUndoRedoCollections(t[i],e.pageIndex))},e.prototype.undoAction=function(e,t,i){if("Text Property Added"===t){if(e&&(p=document.getElementById(e.annotName))){var n=parseInt(p.accessKey.split("_")[0])-1,o=S(e),a=i.note;return e.note=a,2===p.childElementCount&&(p.lastChild.style.display="block"),this.updateUndoRedoCollections(e,n),o}}else if("Comments Property Added"===t){if(e.comments.length>0){var s=document.getElementById(e.annotName);n=this.pdfViewerBase.currentPageNumber-1;if(s)n=parseInt(s.accessKey.split("_")[0])-1;o=S(e);var r=e.comments[e.comments.length-1],l=document.getElementById(r.annotName);return l&&l.remove(),e=i,this.updateUndoRedoCollections(e,n),o}}else if("Status Property Added"===t){if(e){s=document.getElementById(e.annotName),n=this.pdfViewerBase.currentPageNumber-1;if(s)n=parseInt(s.accessKey.split("_")[0])-1;o=S(e);if(e.annotName===i.annotName)e.review=i.review,e.state=i.state,e.stateModel=i.stateModel,this.pdfViewer.annotation.redoCommentsElement.push(e);else for(var d=0;d<e.comments.length;d++)if(e.comments[d].annotName===i.annotName){e.comments[d].state=i.state,e.comments[d].stateModel=i.stateModel,e.comments[d].review=i.review,this.pdfViewer.annotation.redoCommentsElement.push(e.comments[d]);break}var h=document.getElementById(i.annotName);return h.lastChild.id===this.pdfViewer.dataId+"status_container"?h.lastChild.remove():h.firstChild.lastChild.id===this.pdfViewer.dataId+"status_container"&&h.firstChild.lastChild.remove(),this.updateUndoRedoCollections(e,n),o}}else if("Comments Reply Deleted"===t){if(s=document.getElementById(e.annotName)){n=parseInt(s.accessKey.split("_")[0])-1;return this.pdfViewer.annotation.redoCommentsElement.push(i),this.updateUndoRedoCollections(e,n),e}}else if("dynamicText Change"===t){var p;if(e)if(p=document.getElementById(e.annotName))return this.pdfViewer._dotnetInstance.invokeMethodAsync("UpdateFreeText",i.annotName,i.dynamicText),e}},e.prototype.redoAction=function(e,t,i){if("Text Property Added"===t){if(g=document.getElementById(e.annotName)){var n=parseInt(g.accessKey.split("_")[0])-1;return g.lastChild.style.display="block",this.updateUndoRedoCollections(e,n),e}}else if("Comments Property Added"===t){e.comments[e.comments.length-1];var o=document.getElementById(e.annotName);if(o){n=parseInt(o.accessKey.split("_")[0])-1;return this.updateUndoRedoCollections(e,n),e}}else{if("Status Property Added"===t){var a=this.pdfViewer.annotation.redoCommentsElement.pop();n=this.pdfViewerBase.currentPageNumber-1;if(a){var s=sf.base.createElement("div",{id:this.pdfViewer.dataId+"status_container",className:"e-pv-status-container"}),r=sf.base.createElement("div",{id:this.pdfViewer.dataId+"status_div",className:"e-pv-status-div"}),l=sf.base.createElement("span",{id:this.pdfViewer.dataId+"status_icon"});if(r.appendChild(l),s.appendChild(r),c=document.getElementById(e.annotName))n=parseInt(c.accessKey.split("_")[0])-1;if(e.annotName===a.annotName){this.updateStatusContainer(e.state,l,r,s);for(var d=0;d<c.firstChild.children.length;d++)c.firstChild.children[d].id===this.pdfViewer.dataId+"status_container"&&c.firstChild.children[d].parentElement.removeChild(c.firstChild.children[d]);c.firstChild.appendChild(s)}else for(d=0;d<e.comments.length;d++)if(e.comments[d].annotName===a.annotName){this.updateStatusContainer(e.comments[d].state,l,r,s);for(var h=document.getElementById(a.annotName),p=0;p<h.children.length;p++)h.children[p].id===this.pdfViewer.dataId+"status_container"&&h.children[p].parentElement.removeChild(h.children[p]);h&&h.appendChild(s)}}return this.updateUndoRedoCollections(e,n),e}if("Comments Reply Deleted"===t){var c;n=this.pdfViewerBase.currentPageNumber-1;if(c=document.getElementById(e.annotName))n=parseInt(c.accessKey.split("_")[0])-1;a=this.pdfViewer.annotation.redoCommentsElement.pop();var u=S(e);for(d=0;d<e.comments.length;d++)if(e.comments[d].annotName===a.annotName){var f=document.getElementById(a.annotName);e.comments.splice(d,1),f.remove()}return this.updateUndoRedoCollections(e,n),u}var g;if("dynamicText Change"===t&&e&&(g=document.getElementById(e.annotName)))return this.pdfViewer._dotnetInstance.invokeMethodAsync("UpdateFreeText",e.annotName,e.dynamicText),e}},e.prototype.updateUndoRedoCollections=function(e,t,i,n){var o=i||e.shapeAnnotationType;e.indent&&""!==e.indent&&(o="shape_measure");var a=this.getAnnotations(t,null,o);if(null!==a){for(var s=0;s<a.length;s++)e.annotName===a[s].annotName&&(a[s]=e,this.pdfViewer.annotationModule.storeAnnotationCollections(a[s],t),n&&(a.splice(s,1),this.deleteStickyNotesAnnotations(a,t)));"shape_measure"===o?this.manageAnnotations(a,t,"shape_measure"):this.manageAnnotations(a,t,e.shapeAnnotationType)}},e.prototype.addAnnotationComments=function(e,t){var i=e+1,n=this.pdfViewer.annotation.undoCommentsElement.pop();n&&("freeText"==t||"FreeText"==t?this.addComments(t,i,n.subject,n.annotName,n.dynamicText,n.author,n.comments):this.addComments(t,i,n.subject,n.annotName,n.note,n.author,n.comments),this.updateUndoRedoCollections(n,e,t))},e.prototype.findPosition=function(e,t,i){var n,o,a=document.getElementById(e.annotName);if(a){if(void 0!==e.pageNumber)o=e.pageNumber;else if(void 0!==e.pageIndex)o=e.pageIndex;else{o=parseInt(a.accessKey.split("_")[0])-1}for(var s=a.parentElement,r=0;r<s.childElementCount;r++)s.childNodes[r].id===e.annotName&&(n=r);"Stamp"===t||"Image"===t?t="stamp":"FreeText"===t?t="freetext":"StickyNotes"===t||"sticky"===t?t="sticky":"Ink"===t&&(t="ink");var l=this.getAnnotations(o,null,t);if(null!==l)for(r=0;r<l.length;r++)if(l[r].annotName===e.annotName){var d=S(l[r]);l[r].position=n,this.pdfViewer.annotation.undoCommentsElement.push(l[r]),"sticky"===t&&this.updateUndoRedoCollections(d,o,null,i)}}},e.prototype.addInCollection=function(e,t){if(t){var i=this.getAnnotations(e,null,"sticky");i&&i.push(t),this.manageAnnotations(i,e,"sticky")}},e.prototype.getAnnotations=function(e,t,i){var n;i="Stamp"===i||"stamp"===i||"Image"===i?"stamp":"StickyNotes"===i||"sticky"===i?"sticky":"textMarkup"===i?"textMarkup":"shape"===i||"Line"===i||"Radius"===i||"Rectangle"===i||"Ellipse"===i||"Polygon"===i||"LineWidthArrowHead"===i||"Square"===i||"Circle"===i?"shape":"FreeText"===i||"freetext"===i||"freeText"===i?"freetext":"ink"===i||"Ink"===i?"ink":"shape_measure";var o=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_"+i);if(this.pdfViewerBase.isStorageExceed&&(o=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_"+i]),o){var a=JSON.parse(o),s=this.pdfViewer.annotationModule.getPageCollection(a,e);n=a[s]?a[s].annotations:t}else n=t;return n},e.prototype.manageAnnotations=function(e,t,i){i="Stamp"===i||"stamp"===i?"stamp":"Sticky"===i||"sticky"===i||"StickyNotes"===i?"sticky":"textMarkup"===i?"textMarkup":"shape"===i||"Line"===i||"Radius"===i||"Rectangle"===i||"Ellipse"===i||"Polygon"===i||"LineWidthArrowHead"===i||"Square"===i||"Circle"===i?"shape":"FreeText"===i?"freetext":"ink"===i||"Ink"===i?"ink":"shape_measure";var n=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_"+i);if(this.pdfViewerBase.isStorageExceed&&(n=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_"+i]),n){var o=JSON.parse(n);this.pdfViewerBase.isStorageExceed||window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_"+i);var a=this.pdfViewer.annotationModule.getPageCollection(o,t);o[a]&&(o[a].annotations=e);var s=JSON.stringify(o);this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_"+i]=s:window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_annotations_"+i,s)}},e.prototype.updateStickyNotes=function(e,t){var i=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_sticky");if(this.pdfViewerBase.isStorageExceed&&(i=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_sticky"]),i)for(var n=e.bounds,o=JSON.parse(i),a=0;a<o.length;a++)for(var s=o[a],r=0;r<s.annotations.length;r++)if(o[a].annotations[r].annotName===e.annotName){this.pdfViewerBase.isStorageExceed||window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_sticky"),o[this.pdfViewer.annotationModule.getPageCollection(o,0)]&&(o[a].annotations[r].bounds={x:n.x,y:n.y,left:n.x,top:n.y,width:n.width,height:n.height,right:n.right,bottom:n.bottom});var l=JSON.stringify(o);this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_sticky"]=l:window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_annotations_sticky",l);break}},e.prototype.saveStickyAnnotations=function(){var e=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_sticky");this.pdfViewerBase.isStorageExceed&&(e=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_sticky"]);for(var t=new Array,i=0;i<this.pdfViewerBase.pageCount;i++)t[i]=[];if(e&&!this.pdfViewer.annotationSettings.skipDownload)for(var n=JSON.parse(e),o=0;o<n.length;o++){var a=[],s=n[o];if(s){for(var r=0;s.annotations.length>r;r++)this.pdfViewer.annotationModule.updateModifiedDate(s.annotations[r]),s.annotations[r].bounds=JSON.stringify(this.pdfViewer.annotation.getBounds(s.annotations[r].bounds,s.pageIndex));a=s.annotations}t[s.pageIndex]=a}return JSON.stringify(t)},e.prototype.deleteStickyNotesAnnotations=function(e,t){var i=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_sticky");if(this.pdfViewerBase.isStorageExceed&&(i=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_sticky"]),i){var n=JSON.parse(i);this.pdfViewerBase.isStorageExceed||window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_sticky");var o=this.pdfViewer.annotationModule.getPageCollection(n,t);n[o]&&(n[o].annotations=e);var a=JSON.stringify(n);this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_sticky"]=a:window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_annotations_sticky",a)}},e.prototype.addStickyNotesAnnotations=function(e,t){var i=this.getAnnotations(e,null,"sticky");i&&i.push(t),this.manageAnnotations(i,e,"sticky")},e.prototype.updateAnnotationCollection=function(e,t,i){var n=this.findAnnotationType(t),o=this.getAnnotations(t.pageIndex,null,n);if(i&&(o=this.pdfViewer.annotationModule.removedAnnotationCollection),null!==o)for(var a=0;a<o.length;a++)if(i&&!o[a].annotName&&(o[a].annotName=o[a].annotationId),o[a].annotName===t.annotName){var s=S(o[a]);s.annotName=e.annotName,"shape"!==n&&"shape_measure"!==n&&"freetext"!==n&&"ink"!==n||(s.id=e.id),"stamp"===n&&(s.randomId=e.id),"ink"===n?(s.bounds.x=e.bounds.x,s.bounds.y=e.bounds.y):(s.bounds.left=e.bounds.x,s.bounds.top=e.bounds.y,s.vertexPoints=e.vertexPoints),s.note=s.note?s.note:"","freetext"===n&&(s.note=s.note?s.note:s.notes?s.notes:s.dynamicText?s.dynamicText:""),s.comments=[],e.comments.length>0&&(s.comments=e.comments),s.review={state:"",stateModel:"",modifiedDate:s.ModifiedDate,author:s.author},s.state="",s.stateModel="",s.pageNumber=e.pageIndex,this.pdfViewer.annotationModule.storeAnnotations(e.pageIndex,s,"_annotations_"+n),s.comments.length>0?this.addComments(n,s.pageNumber+1,s.shapeAnnotationType,s.annotName,s.note,s.author,s.comments):this.addComments(n,s.pageNumber+1,s.shapeAnnotationType,s.annotName,s.note,s.author),i&&(this.pdfViewer.annotationModule.removedAnnotationCollection=[]);break}},e.prototype.findAnnotationType=function(e){return""!==e.measureType?"shape_measure":"StickyNotes"===e.shapeAnnotationType?"sticky":"Stamp"===e.shapeAnnotationType||"Image"===e.shapeAnnotationType?"stamp":"FreeText"===e.shapeAnnotationType?"freetext":"Ink"===e.shapeAnnotationType?"ink":"shape"},e.prototype.setExistingAnnotationModifiedDate=function(e){return""!==e?this.setModifiedDate(e):this.setModifiedDate()},e.prototype.updateModifiedTime=function(e,t){return e>=12?12===e?e+":"+t+" PM":e-12+":"+t+" PM":e+":"+t+" AM"},e.prototype.setModifiedDate=function(e){var t;t=e?this.getDateAndTime(e):this.getDateAndTime();var i,n=new Date(t),o=n.toString().split(" ").splice(1,2).join(" ");if(2===n.toLocaleTimeString().split(" ").length)i=n.toLocaleTimeString().split(" ")[0].split(":").splice(0,2).join(":")+" "+n.toLocaleTimeString().split(" ")[1];else{var a=parseInt(n.toLocaleTimeString().split(":")[0]),s=n.toLocaleTimeString().split(":")[1];i=this.updateModifiedTime(a,s)}return o+", "+i},e.prototype.updateModifiedDate=function(e){e.id===this.pdfViewer.dataId+"_commenttype_icon"&&(e=e.nextSibling);var t=e.textContent.split("-")[0];e.textContent=t+" - "+this.setModifiedDate()},e.prototype.updateAnnotationModifiedDate=function(e,t,i){var n;if(e){var o=document.getElementById(e.annotName);if(o){if(t){var a=this.findAnnotationType(e),s=this.getAnnotations(e.pageIndex,null,a);if(null!=s&&e)for(var r=0;r<s.length;r++){if(e.annotName===s[r].annotName&&(e.bounds.x!==s[r].bounds.left||e.bounds.y!==s[r].bounds.top||e.bounds.height!==s[r].bounds.height||e.bounds.width!==s[r].bounds.width)){l=(n=o.firstElementChild.firstElementChild.getElementsByClassName("e-pv-comment-title")[0]).textContent.split("-")[0];n.textContent=l+" - "+this.setModifiedDate()}"sticky"===s[r].shapeAnnotationType&&this.pdfViewer.annotationModule.storeAnnotationCollections(s[r],e.pageIndex)}}else{var l=(n=o.firstElementChild.firstElementChild.getElementsByClassName("e-pv-comment-title")[0]).textContent.split("-")[0];n.textContent=l+" - "+this.setModifiedDate()}if(i&&(n=o.firstElementChild.firstElementChild.getElementsByClassName("e-pv-comment-title")[0],void 0!==e.modifiedDate)){l=n.textContent.split("-")[0];n.textContent=l+" - "+this.setExistingAnnotationModifiedDate(e.modifiedDate)}}}},e.prototype.saveImportedStickyNotesAnnotations=function(e,t){var i;e.Author||(e.Author="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.stickyNotesSettings.author);var n=this.pdfViewer.stickyNotesSettings.isLock?this.pdfViewer.stickyNotesSettings.isLock:this.pdfViewer.annotationSettings.isLock,o=this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(e);i={shapeAnnotationType:"sticky",type:"StickyNotes",author:e.Author,allowedInteractions:o,modifiedDate:e.ModifiedDate,subject:e.Subject,note:e.Note,opacity:e.Opacity,state:e.State,stateModel:e.StateModel,pathData:"",comments:this.pdfViewer.annotationModule.getAnnotationComments(e.Comments,e,e.Author),review:{state:e.State,stateModel:e.StateModel,modifiedDate:e.ModifiedDate,author:e.Author},pageNumber:t,bounds:{x:e.Bounds.X,y:e.Bounds.Y,left:e.Bounds.X,top:e.Bounds.Y,width:e.Bounds.Width,height:e.Bounds.Height,right:e.Bounds.Right,bottom:e.Bounds.Bottom},annotName:e.AnnotName,color:e.color,annotationSelectorSettings:this.getSettings(e),customData:this.pdfViewer.annotation.getCustomData(e),annotationSettings:{isLock:n},isPrint:e.IsPrint,isCommentLock:e.IsCommentLock},this.pdfViewer.annotationModule.storeAnnotations(t,i,"_annotations_sticky")},e.prototype.updateStickyNotesAnnotationCollections=function(e,t){e.Author||(e.Author="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.stickyNotesSettings.author);var i=this.pdfViewer.stickyNotesSettings.isLock?this.pdfViewer.stickyNotesSettings.isLock:this.pdfViewer.annotationSettings.isLock,n=e.AllowedInteraction?e.AllowedInteraction:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(e);return e.IsLock&&(i=e.isLock),{shapeAnnotationType:"sticky",type:"StickyNotes",author:e.Author,allowedInteractions:n,modifiedDate:e.ModifiedDate,subject:e.Subject,note:e.Note,opacity:e.Opacity,state:e.State,stateModel:e.StateModel,pathData:"",comments:this.pdfViewer.annotationModule.getAnnotationComments(e.Comments,e,e.Author),review:{state:e.State,stateModel:e.StateModel,modifiedDate:e.ModifiedDate,author:e.Author},bounds:{x:e.Bounds.X,y:e.Bounds.Y,left:e.Bounds.X,top:e.Bounds.Y,width:e.Bounds.Width,height:e.Bounds.Height,right:e.Bounds.Right,bottom:e.Bounds.Bottom},annotationId:e.AnnotName,color:e.color,pageNumber:t,customData:this.pdfViewer.annotation.getCustomData(e),annotationSettings:{isLock:i},isPrint:e.IsPrint,isCommentLock:e.IsCommentLock}},e.prototype.clear=function(){this.commentsCount=0,this.commentsreplyCount=0,this.isAccordionContainer=!0,this.isEditableElement=!1,this.isCreateContextMenu=!1,this.isPageCommentsRendered=!1,this.isCommentsRendered=!1,this.isAnnotationRendered=!1,this.commentMenuObj&&this.commentMenuObj.destroy();var e=document.querySelectorAll(".e-pv-accordion-page-container");if(e)for(var t=0;t<e.length;t++)e[t].remove();this.commentsRequestHandler&&this.commentsRequestHandler.clear()},e.prototype.getModuleName=function(){return"StickyNotesAnnotation"},e.prototype.updateAddAnnotationDetails=function(e,t){t=e?e.offset?e.offset:{x:1,y:1}:(e={offset:{x:1,y:1},pageNumber:0}).offset;var i=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),n=this.pdfViewer.annotation.createGUID(),o=this.pdfViewer.stickyNotesSettings.annotationSelectorSettings?this.pdfViewer.stickyNotesSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,a=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.stickyNotesSettings),s=this.pdfViewer.stickyNotesSettings.allowedInteractions?this.pdfViewer.stickyNotesSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions;a.isLock=!!e.isLock&&e.isLock;var r=[],l={AllowedInteractions:e.allowedInteractions?e.allowedInteractions:s,AnnotName:n,AnnotType:"sticky",AnnotationFlags:null,AnnotationSelectorSettings:e.annotationSelectorSettings?e.annotationSelectorSettings:o,AnnotationSettings:a,Author:e.author?e.author:"Guest",Bounds:{X:t.x,Y:t.y,Width:30,Height:30,Left:t.x,Top:t.y,Location:{X:t.x,Y:t.y},Size:{Height:30,IsEmpty:!1,Width:30}},Color:{IsEmpty:!1,B:51,Blue:.2,C:0,G:255},Comments:null,CreatedDate:i,CustomData:e.customData?e.customData:null,ExistingCustomData:null,Icon:"Comment",IsCommentLock:!1,IsLock:!!e.isLock&&e.isLock,IsPrint:!e.isPrint||e.isPrint,ModifiedDate:i,Note:"",Opacity:e.opacity?e.opacity:1,Reference:null,Size:{IsEmpty:!0,Width:0,Height:0},State:"",StateModel:"",StrokeColor:null,SubType:null,Subject:"Sticky Note",Type:null};return r[0]=l,{stickyNotesAnnotation:r}},e.prototype.getAnnotationType=function(e){var t;return"stamp"===e||"Stamp"===e?t="stamp":"shape"===e||"Line"===e||"Radius"===e||"Rectangle"===e||"Ellipse"===e||"Polygon"===e||"LineWidthArrowHead"===e||"Square"===e||"Circle"===e?t="shape":"textMarkup"===e?t="textMarkup":"freeText"===e||"FreeText"===e?t="freeText":"sticky"===e||"StickyNotes"===e?t="sticky":"measure"===e||"shape_measure"===e?t="measure":"ink"!==e&&"Ink"!==e||(t="ink"),t},e.prototype.addMouseDownOnCommentDiv=function(){return document.querySelectorAll(".e-pv-comments-container").length>0&&(this.mouseDownOnCommentDiv(),!0)},e.prototype.mouseDownOnCommentDiv=function(){for(var e=document.getElementsByClassName("e-editable-inline"),t=0;t<e.length;t++)e[t].addEventListener("click",this.editReply.bind(this));var i=document.getElementsByClassName("e-pv-comment-textbox");for(t=0;t<i.length;t++)i[t].addEventListener("click",this.editComment.bind(this));var n=document.querySelectorAll(".e-pv-comments-container");for(t=0;t<n.length;t++)n[t].addEventListener("click",this.clickOnCommentsContainer.bind(this));var o=document.getElementsByClassName("e-pv-comment-title-container");for(t=0;t<o.length;t++)o[t].addEventListener("click",this.onClickCommentTitle.bind(this));var a=document.getElementsByClassName("e-pv-reply-title-container");for(t=0;t<a.length;t++)a[t].addEventListener("click",this.onClickReplyTitle.bind(this))},e.prototype.onClickCommentTitle=function(e){for(var t=document.querySelectorAll("#"+this.pdfViewer.dataId+"_more-options"),i=0;i<t.length;i++)t[i].style.visibility="hidden";e.currentTarget.children[2].style.visibility="visible"},e.prototype.onClickReplyTitle=function(e){for(var t=document.querySelectorAll("#"+this.pdfViewer.dataId+"_more-options"),i=0;i<t.length;i++)t[i].style.visibility="hidden";e.currentTarget.children[1].style.visibility="visible",this.pdfViewer._dotnetInstance.invokeMethodAsync("GetReplyCommentId",e.currentTarget.parentElement.id),e.preventDefault()},e.prototype.editReply=function(e){var t=document.querySelectorAll(".e-pv-comments-border");if(t)for(var i=0;i<t.length;i++)t[i].classList.remove("e-pv-comments-border");for(var n=document.querySelectorAll("#"+this.pdfViewer.dataId+"_more-options"),o=0;o<n.length;o++)n[o].style.visibility="hidden";e.currentTarget.parentElement.children[0].children[1]&&(e.currentTarget.parentElement.children[0].children[1].style.visibility="visible",e.currentTarget.parentElement.parentElement.classList.add("e-pv-comments-border")),e.preventDefault()},e.prototype.editComment=function(e){var t=document.querySelectorAll(".e-pv-comments-border");if(t)for(var i=0;i<t.length;i++)t[i].classList.remove("e-pv-comments-border");for(var n=document.querySelectorAll("#"+this.pdfViewer.dataId+"_more-options"),o=0;o<n.length;o++)n[o].style.visibility="hidden";e.currentTarget.parentElement.parentElement.children[0].children[2]&&(e.currentTarget.parentElement.parentElement.children[0].children[2].style.visibility="visible"),e.currentTarget.parentElement.parentElement.parentElement.classList.add("e-pv-comments-border"),e.preventDefault()},e.prototype.clickOnCommentsContainer=function(e){var t=this.findAnnotationObject(e.currentTarget.id),i=this.checkAnnotationSettings(e.currentTarget.id);if(i&&this.pdfViewer.annotationModule.checkAllowedInteractions("Select",t)&&(i=!1),this.pdfViewerBase.updateCommentPanel(),!i){for(var n=document.querySelectorAll(".e-pv-comments-container"),o=0;o<n.length;o++)if(n[o].id!==e.currentTarget.id)n[o].lastElementChild.classList.contains("e-pv-comments-leave")&&n[o].getElementsByClassName("e-editable-inline")[0]&&(n[o].getElementsByClassName("e-editable-inline")[0].style.display="none");else{n[o].getElementsByClassName("e-editable-inline")[0]&&(n[o].getElementsByClassName("e-editable-inline")[0].style.display="block"),e.target.getElementsByClassName("e-pv-more-options-button")[0]&&(e.target.getElementsByClassName("e-pv-more-options-button")[0].style.visibility="visible");var a=e.target.classList.contains("e-pv-more-options-button");a?e.target.style.visibility="visible":(a=e.target.parentElement.classList.contains("e-pv-more-options-button"))&&(e.target.parentElement.style.visibility="visible"),this.pdfViewer._dotnetInstance.invokeMethodAsync("GetCommentId",e.currentTarget.id)}var s=document.querySelectorAll(".e-pv-comments-border");if(s)for(var r=0;r<s.length;r++)s[r].classList.remove("e-pv-comments-border");e.currentTarget.classList.add("e-pv-comments-border"),this.pdfViewer.annotationModule.selectAnnotation(e.currentTarget.id,e.isTrusted),e.preventDefault()}},e.prototype.addBorderForCommentsContainer=function(e){for(var t=document.querySelectorAll(".e-pv-comments-container"),i=0;i<t.length;i++)t[i].id!==e.currentTarget.id?t[i].lastElementChild.style.display="none":t[i].lastElementChild.style.display="block";var n=document.querySelectorAll(".e-pv-comments-border");if(n)for(var o=0;o<n.length;o++)n[o].classList.remove("e-pv-comments-border");e.currentTarget.classList.add("e-pv-comments-border")},e.prototype.UpdateReplyContainerOnEdit=function(){for(var e=document.querySelectorAll(".e-editable-inline"),t=0;t<e.length;t++)e[t].style.display="none"},e.prototype.RemoveLastReply=function(e){for(var t=document.querySelectorAll(".e-pv-comments-container"),i=0;i<t.length;i++)e===t[i].children[0].children[1].children[0].id&&(t[i].lastElementChild.style.display="none");var n=document.querySelectorAll(".e-pv-comments-border");if(n)for(var o=0;o<n.length;o++)n[o].classList.remove("e-pv-comments-border");var a=document.querySelectorAll("#"+this.pdfViewer.dataId+"_more-options");for(i=0;i<a.length;i++)a[i].style.visibility="hidden"},e.prototype.UpdateCommentsCollectionInBlazor=function(e){var t,i,n=e.pageNumber,o=e.shapeAnnotationType;i=this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation?this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation:this.pdfViewer.selectedItems.annotations[0];var a=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_"+o);if(this.pdfViewerBase.isStorageExceed&&(a=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_"+o]),a){var s=JSON.parse(a),r=this.pdfViewer.annotationModule.getPageCollection(s,n-1);s[r]&&(t=s[r].annotations)}if(i)for(var l=0;l<t.length;l++){if(t[l].annotName===e.annotName){t[l].note=e.note,t[l].annotName=e.annotName,t[l].modifiedDate=this.getDateAndTime(e.modifiedDate),null==t[l].modifiedDate&&(t[l].modifiedDate=this.getDateAndTime());for(var d=document.querySelectorAll(".e-pv-new-comments-div"),h=0;h<d.length;h++)d[h].style.display=null;for(var p=1;p<e.replyCollection.length;p++){var c=e.replyCollection[p];c.modifiedDate=this.getDateAndTime(e.replyCollection[p].modifiedDate),null==c.modifiedDate&&(c.modifiedDate=this.getDateAndTime());var u=c.stateModel,f=void 0;f=u?{annotName:c.annotName,parentId:c.parentElement,subject:"Comments",comments:[],author:c.author,note:c.note,shapeAnnotationType:"",state:u,stateModel:"Review",modifiedDate:c.modifiedDate,review:{state:u,stateModel:"Review",modifiedDate:this.getDateAndTime(),author:c.author},isLock:!1}:{annotName:c.annotName,parentId:c.parentElement,subject:"Comments",comments:[],author:c.author,note:c.note,shapeAnnotationType:"",state:"",stateModel:"",modifiedDate:c.modifiedDate,review:{state:"",stateModel:"",modifiedDate:this.getDateAndTime(),author:c.author},isLock:!1},(e.replyCollection[p].note||""!==e.replyCollection[p].note)&&(t[l].comments[p-1]=f,i.comments[p-1]=f)}var g=i.note;i.annotName=t[l].annotName,i.note=t[l].note,i.modifiedDate=this.getDateAndTime(t[l].modifiedDate),"FreeText"===i.shapeAnnotationType&&this.modifyTextProperty(i.note,g,i.annotName)}this.updateUndoRedoCollections(t[l],n-1)}},e.prototype.getAuthorName=function(e,t){var i;if(e){var n=e.shapeAnnotationType,o=this.getAnnotationType(n);i=this.pdfViewer.annotationModule.updateAnnotationAuthor(o,n)}else i=t.getAttribute("author");return i},e}(),tt=function(){function e(e,t){this.newObject=[],this.outputString="",this.inkAnnotationindex=[],this.isAddAnnotationProgramatically=!1,this.currentPageNumber="",this.pdfViewer=e,this.pdfViewerBase=t}return e.prototype.drawInk=function(){this.pdfViewerBase.disableTextSelectionMode(),this.pdfViewer.tool="Ink"},e.prototype.drawInkAnnotation=function(e){if(this.pdfViewerBase.isToolbarInkClicked){this.pdfViewerBase.isInkAdded=!0;var t=isNaN(e)?this.pdfViewerBase.currentPageNumber-1:e;if(this.outputString&&""!==this.outputString){var i=this.addInk(t);this.pdfViewer.renderDrawing(void 0,t),this.pdfViewer.clearSelection(t),this.pdfViewer.select([i.id],i.annotationSelectorSettings),this.pdfViewer.toolbar&&this.pdfViewer.toolbar.annotationToolbarModule&&this.pdfViewer.toolbar.annotationToolbarModule.enableSignaturePropertiesTools(!0)}else this.outputString="",this.newObject=[],this.pdfViewerBase.isToolbarInkClicked=!1,this.pdfViewer.tool="";this.pdfViewerBase.isInkAdded=!1}},e.prototype.storePathData=function(){this.convertToPath(this.newObject),this.newObject=[]},e.prototype.drawInkInCanvas=function(e,t){""!==this.currentPageNumber&&parseInt(this.currentPageNumber)!==t&&(this.drawInkAnnotation(parseInt(this.currentPageNumber)),this.pdfViewerBase.isToolbarInkClicked=!0,this.pdfViewer.tool="Ink");var i=this.pdfViewerBase.getZoomFactor(),n=this.pdfViewerBase.getWindowDevicePixelRatio(),o=document.getElementById(this.pdfViewer.dataId+"_annotationCanvas_"+t).getContext("2d"),a=this.pdfViewer.inkAnnotationSettings.thickness?this.pdfViewer.inkAnnotationSettings.thickness:1,s=this.pdfViewer.inkAnnotationSettings.opacity?this.pdfViewer.inkAnnotationSettings.opacity:1,r=this.pdfViewer.inkAnnotationSettings.strokeColor?this.pdfViewer.inkAnnotationSettings.strokeColor:"#ff0000";(!sf.base.Browser.isDevice||sf.base.Browser.isDevice&&i<=.7)&&o.setTransform(n,0,0,n,0,0),o.beginPath(),o.lineJoin="round",o.lineCap="round",o.moveTo(e.prevPosition.x,e.prevPosition.y),o.lineTo(e.currentPosition.x,e.currentPosition.y),o.lineWidth=a*i>1?a*i:a,o.strokeStyle=r,o.globalAlpha=s,o.stroke(),o.arc(e.prevPosition.x,e.prevPosition.y,1,0,2*Math.PI,!0),o.closePath(),this.pdfViewerBase.prevPosition=e.currentPosition,this.newObject.push(e.currentPosition.x,e.currentPosition.y),this.currentPageNumber=t.toString()},e.prototype.convertToPath=function(e){this.movePath(e[0],e[1]),this.linePath(e[0],e[1]);for(var t=2;t<e.length;t+=2)this.linePath(e[t],e[t+1])},e.prototype.linePath=function(e,t){this.outputString+="L"+e+","+t+" "},e.prototype.movePath=function(e,t){this.outputString+="M"+e+","+t+" "},e.prototype.addInk=function(e){var t,i=this.calculateInkSize();this.pdfViewerBase.getZoomFactor();if(this.pdfViewerBase.isToolbarInkClicked){var n=this.pdfViewer.annotation.createGUID(),o=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),a=isNaN(e)?this.pdfViewerBase.currentPageNumber-1:e,s=this.pdfViewer.inkAnnotationSettings.thickness?this.pdfViewer.inkAnnotationSettings.thickness:1,r=this.pdfViewer.inkAnnotationSettings.opacity?this.pdfViewer.inkAnnotationSettings.opacity:1,l=this.pdfViewer.inkAnnotationSettings.strokeColor?this.pdfViewer.inkAnnotationSettings.strokeColor:"#ff0000",d=this.pdfViewer.inkAnnotationSettings.isLock?this.pdfViewer.inkAnnotationSettings.isLock:this.pdfViewer.annotationSettings.isLock,h="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.inkAnnotationSettings.author?this.pdfViewer.inkAnnotationSettings.author:"Guest",p=this.pdfViewer.inkAnnotationSettings.customData,c=this.pdfViewer.inkAnnotationSettings.isPrint,u=this.pdfViewer.inkAnnotationSettings.allowedInteractions?this.pdfViewer.inkAnnotationSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions,f=this.pdfViewer.annotationSettings?this.pdfViewer.annotationSettings:this.pdfViewer.annotationModule.updateAnnotationSettings(this.pdfViewer.inkAnnotationSettings);t={id:"ink"+this.pdfViewerBase.inkCount,bounds:{x:i.x,y:i.y,width:i.width,height:i.height},pageIndex:a,data:this.outputString,customData:p,shapeAnnotationType:"Ink",type:"Ink",opacity:r,strokeColor:l,thickness:s,annotName:n,comments:[],author:h,subject:"Ink",notes:"",review:{state:"",stateModel:"",modifiedDate:o,author:h},annotationSelectorSettings:this.getSelector("Ink",""),modifiedDate:o,annotationSettings:f,isPrint:c,allowedInteractions:u,isCommentLock:!1,isLocked:d};var g=this.pdfViewer.add(t),m={x:t.bounds.x,y:t.bounds.y,left:t.bounds.x,top:t.bounds.y,width:t.bounds.width,height:t.bounds.height},w={opacity:t.opacity,strokeColor:t.strokeColor,thickness:t.thickness,modifiedDate:t.modifiedDate,width:t.bounds.width,height:t.bounds.height,data:this.outputString};this.pdfViewerBase.inkCount++,this.pdfViewer.annotation.stickyNotesAnnotationModule.addComments("ink",t.pageIndex+1,t.shapeAnnotationType,n,"",h),t.annotName=n,this.pdfViewer.annotation.addAction(a,null,g,"Addition","",g,g),this.pdfViewer.annotationModule.storeAnnotations(a,t,"_annotations_ink"),this.pdfViewer.fireAnnotationAdd(t.pageIndex,t.annotName,"Ink",m,w),this.pdfViewerBase.isInkAdded&&(this.outputString="",this.newObject=[]),this.pdfViewerBase.isToolbarInkClicked=!1,this.pdfViewer.tool=""}return t},e.prototype.setAnnotationMode=function(){this.pdfViewerBase.isToolbarInkClicked?this.drawInkAnnotation():(this.pdfViewerBase.isToolbarInkClicked=!0,this.drawInk())},e.prototype.saveInkSignature=function(){for(var e=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_ink"),t=new Array,i=0;i<this.pdfViewerBase.pageCount;i++)t[i]=[];if(e)for(var n=JSON.parse(e),o=0;o<n.length;o++){var a=[],s=n[o];if(s){for(var r=0;s.annotations.length>r;r++){this.pdfViewer.annotationModule.updateModifiedDate(s.annotations[r]);var l=s.annotations[r].strokeColor;s.annotations[r].strokeColor=JSON.stringify(this.pdfViewerBase.signatureModule.getRgbCode(l)),s.annotations[r].bounds=JSON.stringify(this.pdfViewer.annotation.getInkBounds(s.annotations[r].bounds,s.pageIndex));var d=sf.drawings.processPathData(s.annotations[r].data),h=sf.drawings.splitArrayCollection(d);s.annotations[r].data=JSON.stringify(h)}a=s.annotations}t[s.pageIndex]=a}return JSON.stringify(t)},e.prototype.addInCollection=function(e,t){if(t){var i=this.getAnnotations(e,null);i&&i.push(t),this.manageInkAnnotations(i,e)}},e.prototype.calculateInkSize=function(){for(var e=-1,t=-1,i=-1,n=-1,o=sf.drawings.processPathData(this.outputString),a=this.pdfViewerBase.getZoomFactor(),s=0;s<o.length;s++){var r=o[s];if(-1===e)e=r.x,i=r.x,t=r.y,n=r.y;else{var l=r.x,d=r.y;e>=l&&(e=l),t>=d&&(t=d),i<=l&&(i=l),n<=d&&(n=d)}}return{x:e/a,y:t/a,width:(i-e)/a,height:(n-t)/a}},e.prototype.renderExistingInkSignature=function(e,t,n){var o,a=!1;if(!n)for(var s=0;s<this.inkAnnotationindex.length;s++)if(this.inkAnnotationindex[s]===t){a=!0;break}if(e&&!a){e.length>0&&-1===this.inkAnnotationindex.indexOf(t)&&this.inkAnnotationindex.push(t);for(var r=0;r<e.length;r++){var l=e[r];if(l){var d=l.PathData;n&&d&&(d="object"===i(d)&&d.length>1?sf.drawings.getPathString(d):l.IsPathData||d.split("command").length<=1?d:sf.drawings.getPathString(JSON.parse(d))),this.outputString=d;var h=this.calculateInkSize();this.outputString="";var p=0,c=1,u=l.Bounds;h&&(h.height<1?(p=u.Height?u.Height:u.height,c=u.Height?u.Height:u.height):h.width<1&&(p=u.Width?u.Width:u.width,c=u.Width?u.Width:u.width));var f=sf.base.isNullOrUndefined(u.X)?u.x+p/2:u.X+p/2,g=sf.base.isNullOrUndefined(u.Y)?u.y+p/2:u.Y+p/2,m=u.Width?u.Width-(c-1):u.width-(c-1),w=u.Height?u.Height-(c-1):u.height-(c-1),y=l.AnnotationSettings?l.AnnotationSettings.isLock:this.pdfViewer.annotationSettings.isLock,S=l.AnnotationSelectorSettings?l.AnnotationSelectorSettings:this.getSelector(l,"Ink"),v=this.pdfViewer.annotation.getCustomData(l),b=!0;b=l.AnnotationSettings?l.AnnotationSettings.isPrint:this.pdfViewer.inkAnnotationSettings.isPrint,l.IsLocked&&(y=l.IsLocked),"Highlight"===l.Subject&&1===l.Opacity&&(l.Opacity=l.Opacity/2),l.allowedInteractions=l.AllowedInteractions?l.AllowedInteractions:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(l),o={id:"ink"+this.pdfViewerBase.inkCount,bounds:{x:f,y:g,width:m,height:w},pageIndex:t,data:d,shapeAnnotationType:"Ink",opacity:l.Opacity,strokeColor:l.StrokeColor,thickness:l.Thickness,annotName:l.AnnotName,comments:this.pdfViewer.annotationModule.getAnnotationComments(l.Comments,l,l.Author),author:l.Author,allowedInteractions:l.allowedInteractions,subject:l.Subject,modifiedDate:l.ModifiedDate,review:{state:"",stateModel:"",modifiedDate:l.ModifiedDate,author:l.Author},notes:l.Note,annotationSettings:{isLock:y},annotationSelectorSettings:S,customData:v,isPrint:b,isCommentLock:l.IsCommentLock},this.pdfViewer.add(o);var V=document.getElementById(this.pdfViewer.dataId+"_annotationCanvas_"+l.pageIndex);if(this.pdfViewer.renderDrawing(V,o.pageIndex),this.pdfViewer.annotationModule.storeAnnotations(o.pageIndex,o,"_annotations_ink"),this.isAddAnnotationProgramatically){var A={opacity:o.opacity,strokeColor:o.strokeColor,thickness:o.thickness,modifiedDate:o.modifiedDate,width:o.bounds.width,height:o.bounds.height,data:this.outputString};this.pdfViewer.fireAnnotationAdd(o.pageIndex,o.annotName,"Ink",u,A)}this.pdfViewerBase.currentSignatureAnnot=null,this.pdfViewerBase.signatureCount++,this.pdfViewerBase.inkCount++,this.pdfViewerBase.navigationPane&&this.pdfViewerBase.navigationPane.annotationMenuObj&&this.pdfViewer.isSignatureEditable&&(this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant("Export Annotations")],!0),this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant("Export XFDF")],!0))}}}},e.prototype.storeInkSignatureData=function(e,t){this.pdfViewer.annotation.addAction(t.pageIndex,null,t,"Addition","",t,t);var i,n=t.bounds.left?t.bounds.left:t.bounds.x,o=t.bounds.top?t.bounds.top:t.bounds.y;t.wrapper&&t.wrapper.bounds&&(n=t.wrapper.bounds.left,o=t.wrapper.bounds.top),i={id:t.id,bounds:{x:n,y:o,width:t.bounds.width,height:t.bounds.height},shapeAnnotationType:"Ink",opacity:t.opacity,thickness:t.thickness,strokeColor:t.strokeColor,pageIndex:t.pageIndex,data:t.data,annotName:t.annotName,comments:t.comments,author:t.author,subject:t.subject,modifiedDate:t.modifiedDate,review:{state:"",stateModel:"",modifiedDate:t.modifiedDate,author:t.author},notes:t.notes,annotationSelectorSettings:this.getSelector(t,"Ink"),isCommentLock:t.isCommentLock};var a=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_ink");if(a){var s=JSON.parse(a);window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_ink");var r=this.pdfViewer.annotationModule.getPageCollection(s,e);if(s[r])s[r].annotations.push(i),s[r].annotations.indexOf(i);else{var l={pageIndex:e,annotations:[]};l.annotations.push(i),l.annotations.indexOf(i),s.push(l)}p=JSON.stringify(s);window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_annotations_ink",p)}else{var d={pageIndex:e,annotations:[]};d.annotations.push(i),d.annotations.indexOf(i);var h=[];h.push(d);var p=JSON.stringify(h);window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_annotations_ink",p)}},e.prototype.getSelector=function(e,t){var i=this.pdfViewer.annotationSelectorSettings;return"Ink"===e&&this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings&&(i=this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings),i},e.prototype.getAnnotations=function(e,t){var i,n=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_ink");if(n){var o=JSON.parse(n),a=this.pdfViewer.annotationModule.getPageCollection(o,e);i=o[a]?o[a].annotations:t}else i=t;return i},e.prototype.modifySignatureInkCollection=function(e,t,i){this.pdfViewerBase.updateDocumentEditedProperty(!0);var n=null,o=this.getAnnotations(t,null);if(null!=o&&i){for(var a=0;a<o.length;a++)if(i.id===o[a].id){if("bounds"===e)o[a].bounds={x:i.wrapper.bounds.left,y:i.wrapper.bounds.top,width:i.bounds.width,height:i.bounds.height};else if("stroke"===e)o[a].strokeColor=i.wrapper.children[0].style.strokeColor;else if("opacity"===e)o[a].opacity=i.wrapper.children[0].style.opacity;else if("thickness"===e)o[a].thickness=i.wrapper.children[0].style.strokeWidth;else if("notes"===e)o[a].notes=i.notes;else if("delete"===e){n=o.splice(a,1)[0];break}o[a].modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),this.pdfViewer.annotationModule.storeAnnotationCollections(o[a],t)}this.manageInkAnnotations(o,t)}return n},e.prototype.manageInkAnnotations=function(e,t){var i=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_ink");if(i){var n=JSON.parse(i);window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_ink");var o=this.pdfViewer.annotationModule.getPageCollection(n,t);n[o]&&(n[o].annotations=e);var a=JSON.stringify(n);window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_annotations_ink",a)}},e.prototype.saveImportedInkAnnotation=function(e,t){var n,o=e.Bounds,a={x:o.X,y:o.Y,width:o.Width,height:o.Height},s=this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(e),r=this.pdfViewer.annotation.getCustomData(e),l=this.pdfViewer.annotationModule.getAnnotationComments(e.Comments,e,e.Author),d={state:e.State,stateModel:e.StateModel,modifiedDate:e.ModifiedDate,author:e.Author},h=e.AnnotationSettings?e.AnnotationSettings:this.pdfViewer.annotationModule.updateAnnotationSettings(e),p=this.getSettings(e),c=e.PathData;c="object"===i(c)&&c.length>1?sf.drawings.getPathString(c):e.IsPathData||c.split("command").length<=1?c:sf.drawings.getPathString(JSON.parse(c)),n={allowedInteractions:s,annotName:e.AnnotName,annotationSelectorSettings:p,annotationSettings:h,author:e.Author,bounds:a,customData:r,comments:l,data:c,id:"Ink",isCommentLock:e.IsCommentLock,isLocked:e.IsLocked,isPrint:e.IsPrint,modifiedDate:e.ModifiedDate,note:e.Note,opacity:e.Opacity,pageIndex:t,review:d,shapeAnnotationType:e.AnnotationType,strokeColor:e.StrokeColor,subject:e.Subject,thickness:e.Thickness},this.pdfViewer.annotationModule.storeAnnotations(t,n,"_annotations_ink")},e.prototype.getSettings=function(e){this.pdfViewer.annotationSelectorSettings;return e.AnnotationSelectorSettings?e.AnnotationSelectorSettings:this.getSelector(e.ShapeAnnotationType,e.Subject)},e.prototype.updateInkCollections=function(e,t,i){if(e){var n=e.Bounds,o=n.X,a=n.Y,s=n.Width,r=n.Height,l=e.customData,d=e.isPrint,h=e.AllowedInteractions?e.AllowedInteractions:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(e),p=e.AnnotationSettings?e.AnnotationSettings:this.pdfViewer.inkAnnotationSettings?this.pdfViewer.inkAnnotationSettings:this.pdfViewer.annotationSettings;e.IsLocked&&(p.isLock=e.IsLocked);var c=e.PathData;return i&&(c=sf.drawings.getPathString(JSON.parse(e.PathData))),{id:"ink"+this.pdfViewerBase.signatureCount,bounds:{x:o,y:a,width:s,height:r},pageIndex:t,data:c,shapeAnnotationType:"Ink",opacity:e.Opacity,strokeColor:e.StrokeColor,thickness:e.Thickness,annotationId:e.AnnotName,customData:l,comments:this.pdfViewer.annotationModule.getAnnotationComments(e.Comments,e,e.Author),author:e.Author,allowedInteractions:h,subject:e.Subject,modifiedDate:e.ModifiedDate,review:{state:"",stateModel:"",modifiedDate:e.ModifiedDate,author:e.Author},notes:e.Note,isPrint:d,isCommentLock:e.IsCommentLock,annotationSettings:p,isLocked:p.isLock}}},e.prototype.updateAddAnnotationDetails=function(e,t,i){t=e?e.offset?e.offset:{x:10,y:10}:(e={offset:{x:10,y:10},pageNumber:0,width:void 0,height:void 0}).offset;var n=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),o=this.pdfViewer.annotation.createGUID(),a=this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings?this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,s=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.inkAnnotationSettings),r=this.pdfViewer.inkAnnotationSettings.allowedInteractions?this.pdfViewer.inkAnnotationSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions;s.isLock=!!e.isLock&&e.isLock,e.width=e.width?e.width:150,e.height=e.height?e.height:60;var l=e.path?e.path:"";e.path=sf.drawings.getPathString(JSON.parse(l));var d=[],h={AllowedInteractions:e.allowedInteractions?e.allowedInteractions:r,AnnotName:o,AnnotType:"ink",AnnotationFlags:null,AnnotationSelectorSettings:e.annotationSelectorSettings?e.annotationSelectorSettings:a,AnnotationSettings:s,AnnotationType:"Ink",Author:e.author?e.author:"Guest",Bounds:{X:t.x,Y:t.y,Width:e.width,Height:e.height,Left:t.x,Top:t.y,Location:{X:t.x,Y:t.y},Size:{Height:e.height,IsEmpty:!1,Width:e.width}},Comments:null,CreatedDate:n,CustomData:e.customData?e.customData:null,ExistingCustomData:null,IsCommentLock:!1,IsLock:!!e.isLock&&e.isLock,IsPrint:!e.isPrint||e.isPrint,ModifiedDate:n,Note:"",Opacity:e.opacity?e.opacity:1,PathData:e.path,PageNumber:i,State:"",StateModel:"",StrokeColor:e.strokeColor?e.strokeColor:"rgba(255,0,0,1)",SubType:null,Subject:"Ink",Type:null,Thickness:e.thickness?e.thickness:1};return d[0]=h,{signatureInkAnnotation:d}},e}(),it=function(){function e(e,t){this.zoomFactor=1,this.previousZoomFactor=1,this.scrollWidth=25,this.zoomPercentages=[10,25,50,75,100,125,150,200,400],this.isNotPredefinedZoom=!1,this.pinchStep=0,this.reRenderPageNumber=0,this.magnifyPageRerenderTimer=null,this.rerenderOnScrollTimer=null,this.rerenderInterval=null,this.touchCenterX=0,this.touchCenterY=0,this.mouseCenterX=0,this.mouseCenterY=0,this.pageRerenderCount=0,this.imageObjects=[],this.topValue=0,this.isTapToFitZoom=!1,this.fitType=null,this.isPinchZoomed=!1,this.isPagePinchZoomed=!1,this.isRerenderCanvasCreated=!1,this.isMagnified=!1,this.isPagesZoomed=!1,this.isPinchScrolled=!1,this.isAutoZoom=!1,this.isDoubleTapZoom=!1,this.isFormFieldPageZoomed=!1,this.isWebkitMobile=!1,this.isFitToPageMode=!0,this.pdfViewer=e,this.pdfViewerBase=t,this.zoomLevel=2,this.isWebkitMobile=/Chrome/.test(navigator.userAgent)||/Google Inc/.test(navigator.vendor)||-1!==navigator.userAgent.indexOf("Safari")}return e.prototype.zoomTo=function(e){e<10?e=10:e>400&&(e=400),this.fitType=null,this.isNotPredefinedZoom=!1,this.isAutoZoom&&this.isInitialLoading?this.pdfViewerBase.onWindowResize():(this.isAutoZoom=!1,this.onZoomChanged(e)),this.isInitialLoading=!1},e.prototype.zoomIn=function(){(this.fitType||this.isNotPredefinedZoom)&&(this.zoomLevel=this.lowerZoomLevel,this.fitType=null),this.isNotPredefinedZoom=!1,this.zoomLevel>=8?this.zoomLevel=8:this.zoomLevel++,this.isAutoZoom=!1,this.onZoomChanged(this.zoomPercentages[this.zoomLevel])},e.prototype.zoomOut=function(){(this.fitType||this.isNotPredefinedZoom)&&(this.zoomLevel=this.higherZoomLevel,this.fitType=null),this.isNotPredefinedZoom=!1,this.zoomLevel<=0?this.zoomLevel=0:this.zoomLevel--,this.isAutoZoom=!1,this.onZoomChanged(this.zoomPercentages[this.zoomLevel])},e.prototype.fitToWidth=function(){this.isAutoZoom=!1;var e=this.calculateFitZoomFactor("fitToWidth");this.onZoomChanged(e)},e.prototype.fitToAuto=function(){this.isAutoZoom=!0;var e=this.calculateFitZoomFactor("fitToWidth");this.onZoomChanged(e)},e.prototype.fitToPage=function(){var e=this.calculateFitZoomFactor("fitToPage");null!==e&&(this.isAutoZoom=!1,this.onZoomChanged(e),sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode?this.isWebkitMobile?this.pdfViewerBase.viewerContainer.style.overflowY="auto":this.pdfViewerBase.viewerContainer.style.overflowY="hidden":this.pdfViewerBase.viewerContainer.style.overflowY="auto",this.pdfViewerBase.pageSize[this.pdfViewerBase.currentPageNumber-1]&&(this.pdfViewerBase.viewerContainer.scrollTop=this.pdfViewerBase.pageSize[this.pdfViewerBase.currentPageNumber-1].top*this.zoomFactor))},e.prototype.calculateFitZoomFactor=function(e){var t=this.pdfViewerBase.viewerContainer.getBoundingClientRect().width,i=this.pdfViewerBase.viewerContainer.getBoundingClientRect().height;if(0===t&&0===i&&(t=parseFloat(this.pdfViewer.width.toString()),i=parseFloat(this.pdfViewer.height.toString())),isNaN(i)||isNaN(t))return null;if(this.fitType=e,"fitToWidth"===this.fitType){var n=(t-this.scrollWidth)/this.pdfViewerBase.highestWidth;return this.isAutoZoom&&(this.fitType=null,1===(n=Math.min(1,n))&&(this.zoomLevel=2)),parseInt((100*n).toString())}this.isFitToPageMode=!0;n=(t-this.scrollWidth-10)/this.pdfViewerBase.highestWidth;var o=i/this.pdfViewerBase.highestHeight;return o>n&&(o=n,this.isFitToPageMode=!1),parseInt((100*o).toString())},e.prototype.initiateMouseZoom=function(e,t,i){var n=this.positionInViewer(e,t);this.mouseCenterX=n.x,this.mouseCenterY=n.y,this.zoomTo(i)},e.prototype.pinchIn=function(){this.fitType=null;var e=this.zoomFactor-this.pinchStep;if(e<4&&e>2&&(e=this.zoomFactor-this.pinchStep),e<=1.5&&(e=this.zoomFactor-this.pinchStep/1.5),e<.25&&(e=.25),this.isPinchZoomed=!0,this.onZoomChanged(100*e),this.isTapToFitZoom=!0,sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&100*this.zoomFactor==50){var t=this.calculateFitZoomFactor("fitToWidth");this.fitType=null,t<=50&&this.fitToWidth()}},e.prototype.pinchOut=function(){this.fitType=null;var e=this.zoomFactor+this.pinchStep;sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode||e>2&&(e+=this.pinchStep),e>4&&(e=4),this.isTapToFitZoom=!0,this.isPinchZoomed=!0,this.onZoomChanged(100*e)},e.prototype.getZoomLevel=function(e){for(var t=0,i=this.zoomPercentages.length-1;t<=i&&(0!==t||0!==i);){var n=Math.round((t+i)/2);this.zoomPercentages[n]<=e?t=n+1:this.zoomPercentages[n]>=e&&(i=n-1)}return this.higherZoomLevel=t,this.lowerZoomLevel=i,i},e.prototype.checkZoomFactor=function(){return this.zoomPercentages.indexOf(100*this.zoomFactor)>-1},e.prototype.onZoomChanged=function(e){if(e&&(this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.closePopupMenu(),this.previousZoomFactor=this.zoomFactor,this.zoomLevel=this.getZoomLevel(e),this.zoomFactor=this.getZoomFactor(e),this.zoomFactor<=.25?this.pdfViewerBase.isMinimumZoom=!0:this.pdfViewerBase.isMinimumZoom=!1,sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode?this.isWebkitMobile?this.pdfViewerBase.viewerContainer.style.overflowY="auto":this.pdfViewerBase.viewerContainer.style.overflowY="hidden":this.pdfViewerBase.viewerContainer.style.overflowY="auto",this.pdfViewerBase.pageCount>0&&(this.previousZoomFactor!==this.zoomFactor&&(this.isPinchZoomed?(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&(this.pdfViewerBase.mobilePageNoContainer.style.left=this.pdfViewer.element.clientWidth/2-parseFloat(this.pdfViewerBase.mobilePageNoContainer.style.width)/2+"px"),this.responsivePages()):this.magnifyPages()),this.isInitialLoading||this.previousZoomFactor!==this.zoomFactor&&(this.pdfViewer.zoomValue=parseInt((100*this.zoomFactor).toString()),this.pdfViewer.updatePdfViewerOptions("ZoomValue",this.pdfViewer.zoomValue),this.pdfViewer.fireZoomChange())),this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.updateZoomPercentage(this.zoomFactor),this.isInitialLoading||this.previousZoomFactor!==this.zoomFactor&&(this.pdfViewer.zoomValue=parseInt((100*this.zoomFactor).toString()),this.pdfViewer.updatePdfViewerOptions("ZoomValue",this.pdfViewer.zoomValue),this.pdfViewer.fireZoomChange()),sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&this.isPinchZoomed)){var t=parseInt((100*this.zoomFactor).toString())+"%",i=document.getElementById(this.pdfViewer.dataId+"_container_tooltip").firstElementChild;this.pdfViewerBase.navigationPane.isTostCreated&&!i||this.pdfViewerBase.navigationPane.createTooltipMobile(t)}},e.prototype.setTouchPoints=function(e,t){var i=this.positionInViewer(e,t);this.touchCenterX=i.x,this.touchCenterY=i.y},e.prototype.initiatePinchMove=function(e,t,i,n){this.isPinchScrolled=!1,this.isMagnified=!1,this.reRenderPageNumber=this.pdfViewerBase.currentPageNumber;var o=this.positionInViewer((e+i)/2,(t+n)/2);this.touchCenterX=o.x,this.touchCenterY=o.y,this.zoomOverPages(e,t,i,n)},e.prototype.magnifyPages=function(){this.clearRerenderTimer(),this.isPagesZoomed||(this.reRenderPageNumber=this.pdfViewerBase.currentPageNumber),this.pdfViewerBase.documentLoaded||this.pdfViewerBase.isInitialPageMode||(this.isPagesZoomed=!0);var e=this.pdfViewerBase.viewerContainer.scrollTop;this.pdfViewer.textSelectionModule&&this.pdfViewer.textSelectionModule.maintainSelectionOnZoom(!1,!0),this.isInitialLoading||(this.isMagnified=!0),this.updatePageLocation(),this.resizeCanvas(this.reRenderPageNumber),this.calculateScrollValuesOnMouse(e),this.pdfViewer.textSelectionModule&&this.pdfViewer.textSelectionModule.resizeTouchElements();var t=this.pdfViewer.annotationModule;if(t&&t.textMarkupAnnotationModule&&this.pdfViewer.annotationModule.textMarkupAnnotationModule.updateCurrentResizerPosition(),this.pdfViewerBase.pageSize.length>0){this.pdfViewerBase.pageContainer.style.height=this.topValue+this.pdfViewerBase.getPageHeight(this.pdfViewerBase.pageSize.length-1)+"px";var i=this;this.pdfViewerBase.renderedPagesList=[],this.pdfViewerBase.pinchZoomStorage=[],this.pdfViewerBase.documentLoaded||(this.magnifyPageRerenderTimer=setTimeout((function(){i.rerenderMagnifiedPages()}),800))}},e.prototype.updatePageLocation=function(){this.topValue=0;for(var e=1;e<this.pdfViewerBase.pageSize.length;e++)this.topValue+=(this.pdfViewerBase.pageSize[e].height+this.pdfViewerBase.pageGap)*this.zoomFactor;var t=this.pdfViewerBase.pageCount<10?this.pdfViewerBase.pageCount:10;for(e=0;e<t;e++)this.updatePageContainer(e,this.pdfViewerBase.getPageWidth(e),this.pdfViewerBase.getPageHeight(e),this.pdfViewerBase.getPageTop(e),!0)},e.prototype.updatePageContainer=function(e,t,i,n,o){var a=this.pdfViewerBase.getElement("_pageDiv_"+e);if(a){a.style.width=t+"px",a.style.height=i+"px";var s=this.pdfViewerBase.getElement("_textLayer_"+e);s&&(s.style.width=t+"px",s.style.height=i+"px"),a.style.width=t+"px",a.style.height=i+"px",this.pdfViewer.enableRtl?a.style.right=this.pdfViewerBase.updateLeftPosition(e)+"px":a.style.left=this.pdfViewerBase.updateLeftPosition(e)+"px",a.style.top=n+"px",this.pdfViewerBase.pageContainer.style.width=this.pdfViewerBase.viewerContainer.clientWidth+"px",this.pdfViewerBase.renderPageCanvas(a,t,i,e,"block")}},e.prototype.clearRerenderTimer=function(){clearTimeout(this.rerenderOnScrollTimer),clearTimeout(this.magnifyPageRerenderTimer),this.clearIntervalTimer(),this.isPinchScrolled=!1},e.prototype.clearIntervalTimer=function(){clearInterval(this.rerenderInterval),this.rerenderInterval=null,this.clearRendering();for(var e=document.querySelectorAll('canvas[id*="'+this.pdfViewer.dataId+'_oldCanvas_"]'),t=0;t<e.length;t++){var i=parseInt(e[t].id.split("_oldCanvas_")[1]),n=this.pdfViewerBase.getElement("_pageCanvas_"+i);n?(e[t].id=n.id,n.parentElement.removeChild(n)):e[t].id=this.pdfViewer.dataId+"_pageCanvas_"+i,this.pdfViewerBase.isTextMarkupAnnotationModule()&&this.pdfViewer.annotationModule.textMarkupAnnotationModule.rerenderAnnotationsPinch(t)}this.isRerenderCanvasCreated=!1},e.prototype.pushImageObjects=function(e){this.imageObjects.push(e)},e.prototype.clearRendering=function(){if(this.imageObjects){for(var e=0;e<this.imageObjects.length;e++)this.imageObjects[e]&&(this.imageObjects[e].onload=null);this.imageObjects=[]}},e.prototype.rerenderMagnifiedPages=function(){!this.pdfViewerBase.isInitialLoaded&&!this.pdfViewerBase.isDocumentLoaded||this.pdfViewerBase.isInitialPageMode?this.pdfViewerBase.isInitialPageMode&&(this.pageRerenderCount=0,this.pdfViewerBase.renderedPagesList=[],this.pdfViewerBase.pinchZoomStorage=[],this.isMagnified=!1,this.pdfViewerBase.pageViewScrollChanged(this.reRenderPageNumber),this.pdfViewerBase.isInitialPageMode=!1):(this.renderInSeparateThread(this.reRenderPageNumber),this.isPagesZoomed=!1)},e.prototype.renderInSeparateThread=function(e){var t=this;this.designNewCanvas(e),this.pageRerenderCount=0,this.pdfViewerBase.renderedPagesList=[],this.pdfViewerBase.pinchZoomStorage=[],this.isMagnified=!1,this.pdfViewerBase.pageViewScrollChanged(this.reRenderPageNumber);var i=this;this.rerenderInterval=setInterval((function(){t.initiateRerender(i)}),1)},e.prototype.responsivePages=function(){this.isPagesZoomed=!0,this.clearRerenderTimer(),this.pdfViewer.textSelectionModule&&this.pdfViewer.textSelectionModule.clearTextSelection(),this.pdfViewer.textSearchModule&&this.pdfViewer.textSearchModule.clearAllOccurrences();var e=this.pdfViewerBase.viewerContainer.scrollTop;if(this.isAutoZoom=!1,this.updatePageLocation(),this.pdfViewerBase.pageContainer.style.height=this.topValue+this.pdfViewerBase.pageSize[this.pdfViewerBase.pageSize.length-1].height*this.zoomFactor+"px",this.resizeCanvas(this.pdfViewerBase.currentPageNumber),this.isPinchZoomed&&this.calculateScrollValues(e),this.pdfViewerBase.renderedPagesList=[],this.pdfViewerBase.pinchZoomStorage=[],this.pdfViewer.formFieldsModule){var t=this;this.pdfViewerBase.documentLoaded||(this.magnifyPageRerenderTimer=setTimeout((function(){t.rerenderMagnifiedPages()}),800))}},e.prototype.calculateScrollValues=function(e){var t=this.pdfViewerBase.currentPageNumber-1,i=this.pdfViewerBase.getElement("_pageDiv_"+t);if(i){var n=void 0,o=i.getBoundingClientRect(),a=(n=this.pdfViewer.enableRtl&&!this.isDoubleTapZoom?this.positionInViewer(o.right,o.top):this.positionInViewer(o.left,o.top)).x,s=n.y,r=s*this.previousZoomFactor,l=e+this.touchCenterY,d=s*this.zoomFactor+(l-r<0?l-r:(l-r)*(this.zoomFactor/this.previousZoomFactor)),h=this.zoomFactor-this.previousZoomFactor>0?-this.pdfViewerBase.pageGap*(this.zoomFactor/this.previousZoomFactor):this.pdfViewerBase.pageGap*(this.previousZoomFactor/this.zoomFactor);this.pdfViewerBase.viewerContainer.scrollTop=d-this.touchCenterY+h/this.pdfViewerBase.zoomInterval;var p=o.width*this.previousZoomFactor/o.width,c=this.zoomFactor/p-1,u=this.touchCenterX-a;this.pdfViewerBase.viewerContainer.scrollLeft+=u*c}},e.prototype.calculateScrollValuesOnMouse=function(e){var t=this.pdfViewerBase.currentPageNumber-1,i=this.pdfViewerBase.getElement("_pageDiv_"+t);if(i){var n=void 0,o=i.getBoundingClientRect(),a=(n=this.pdfViewer.enableRtl?this.positionInViewer(o.right,o.top):this.positionInViewer(o.left,o.top)).x,s=n.y,r=s*this.previousZoomFactor,l=e+this.mouseCenterY,d=s*this.zoomFactor+(l-r<0?l-r:(l-r)*(this.zoomFactor/this.previousZoomFactor)),h=this.zoomFactor-this.previousZoomFactor>0?-this.pdfViewerBase.pageGap*(this.zoomFactor/this.previousZoomFactor):this.pdfViewerBase.pageGap*(this.previousZoomFactor/this.zoomFactor);this.pdfViewerBase.isTouchPad&&!this.pdfViewerBase.isMacSafari&&(h/=this.pdfViewerBase.zoomInterval),this.pdfViewerBase.viewerContainer.scrollTop=d-this.mouseCenterY+h;var p=o.width*this.previousZoomFactor/o.width,c=this.zoomFactor/p-1,u=this.mouseCenterX-a;this.pdfViewerBase.viewerContainer.scrollLeft+=u*c}},e.prototype.rerenderOnScroll=function(){var e=this;if(this.isPinchZoomed=!1,this.isPinchScrolled){this.rerenderOnScrollTimer=null,this.isPinchScrolled=!1,this.reRenderPageNumber=this.pdfViewerBase.currentPageNumber,this.pdfViewerBase.renderedPagesList=[],this.pdfViewerBase.pinchZoomStorage=[];for(var t=document.querySelectorAll('img[id*="'+this.pdfViewer.dataId+'_pageCanvas_"]'),i=0;i<t.length;i++){var n=parseInt(t[i].id.split("_pageCanvas_")[1]),o=this.pdfViewerBase.pageSize[n].width;816<o&&this.pdfViewer.tileRenderingSettings.enableTileRendering&&(this.pdfViewer.restrictZoomRequest,t[i].style.width=o*this.pdfViewerBase.getZoomFactor()+"px",t[i].style.height=this.pdfViewerBase.pageSize[n].height*this.pdfViewerBase.getZoomFactor()+"px")}if(this.pdfViewerBase.textLayer){var a=document.querySelectorAll('div[id*="'+this.pdfViewer.dataId+'_textLayer_"]');for(i=0;i<a.length;i++)a[i].style.display="block"}if(this.pdfViewerBase.isTextMarkupAnnotationModule())for(var s=document.querySelectorAll('canvas[id*="'+this.pdfViewer.dataId+'_annotationCanvas_"]'),r=0;r<s.length;r++){n=s[r].id.split("_annotationCanvas_")[1];this.pdfViewer.annotationModule.textMarkupAnnotationModule.rerenderAnnotationsPinch(parseInt(n))}this.pdfViewerBase.pageViewScrollChanged(this.reRenderPageNumber),this.isPagePinchZoomed=!1,this.rerenderOnScrollTimer=setTimeout((function(){e.pdfViewerBase.pageViewScrollChanged(e.reRenderPageNumber)}),300)}},e.prototype.pinchMoveScroll=function(){var e=this;this.isRerenderCanvasCreated&&this.clearIntervalTimer(),(this.isPagesZoomed||!this.isRerenderCanvasCreated&&this.isPagePinchZoomed)&&(this.clearRendering(),this.isPagesZoomed=!1,clearTimeout(this.magnifyPageRerenderTimer),this.isPinchScrolled=!0,this.isFormFieldPageZoomed=!0,this.rerenderOnScrollTimer=setTimeout((function(){e.rerenderOnScroll()}),100))},e.prototype.initiateRerender=function(e){var t=!1;(this.previousZoomFactor<.4||this.pdfViewerBase.isMinimumZoom)&&(t=!0),e.pageRerenderCount!==e.pdfViewerBase.reRenderedCount&&!t||0===e.pageRerenderCount||0===e.pdfViewerBase.reRenderedCount||(e.reRenderAfterPinch(this.reRenderPageNumber),e.isFormFieldPageZoomed=!1)},e.prototype.reRenderAfterPinch=function(e){this.pageRerenderCount=0;var t=e-3,i=e+1;this.pdfViewerBase.isMinimumZoom&&(t=e-4,i=e+4),t=t>0?t:0,i=i<this.pdfViewerBase.pageCount?i:this.pdfViewerBase.pageCount-1;for(var n=t;n<=i;n++){var o=this.pdfViewerBase.getElement("_pageDiv_"+n),a=(this.pdfViewerBase.getElement("_pageCanvas_"+n),this.pdfViewerBase.getElement("_oldCanvas_"+n));a&&a.parentNode.removeChild(a),this.pdfViewerBase.isTextMarkupAnnotationModule()&&this.pdfViewer.annotationModule.textMarkupAnnotationModule.rerenderAnnotations(n),o&&(o.style.visibility="visible")}this.isRerenderCanvasCreated=!1,this.isPagePinchZoomed=!1,0!==this.pdfViewerBase.reRenderedCount&&(this.pdfViewerBase.reRenderedCount=0,this.pageRerenderCount=0,clearInterval(this.rerenderInterval),this.rerenderInterval=null),this.imageObjects=[]},e.prototype.rerenderAnnotations=function(e){for(var t=document.querySelectorAll("#"+this.pdfViewer.dataId+"_old_annotationCanvas_"+e),i=0;i<t.length;i++)t[i]&&t[i].parentElement.removeChild(t[i]);var n=this.pdfViewerBase.getElement("_annotationCanvas_"+e);n&&(n.style.display="block")},e.prototype.designNewCanvas=function(e){this.pdfViewerBase.textLayer&&this.pdfViewerBase.textLayer.clearTextLayers();var t=e-3,i=e+1;this.pdfViewerBase.isMinimumZoom&&(t=e-4,i=e+4),t=t>0?t:0,i=i<this.pdfViewerBase.pageCount?i:this.pdfViewerBase.pageCount-1;for(var n=t;n<=i;n++){var o=this.pdfViewerBase.getElement("_pageCanvas_"+n),a=this.pdfViewerBase.pageSize[n].width*this.zoomFactor,s=this.pdfViewerBase.pageSize[n].height*this.zoomFactor;o&&!this.pdfViewer.restrictZoomRequest?this.pdfViewerBase.renderPageCanvas(this.pdfViewerBase.getElement("_pageDiv_"+n),a,s,n,"none"):this.pdfViewer.restrictZoomRequest||this.pdfViewerBase.renderPageCanvas(this.pdfViewerBase.getElement("_pageDiv_"+n),a,s,n,"none")}this.isRerenderCanvasCreated=!0},e.prototype.pageRerenderOnMouseWheel=function(){var e=this;this.isRerenderCanvasCreated&&(this.clearIntervalTimer(),clearTimeout(this.magnifyPageRerenderTimer),this.isPinchScrolled||(this.isPinchScrolled=!0,this.rerenderOnScrollTimer=setTimeout((function(){e.rerenderOnScroll()}),100)))},e.prototype.renderCountIncrement=function(){this.isRerenderCanvasCreated&&this.pageRerenderCount++},e.prototype.rerenderCountIncrement=function(){this.pageRerenderCount>0&&this.pdfViewerBase.reRenderedCount++},e.prototype.resizeCanvas=function(e){if(this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.inkAnnotationModule){var t=parseInt(this.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber);this.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(t)}var i=e-3,n=e+3;this.pdfViewerBase.isMinimumZoom&&(i=e-4,n=e+4),i=i>0?i:0,n=n<this.pdfViewerBase.pageCount?n:this.pdfViewerBase.pageCount-1;for(var o=i;o<=n;o++){var a=this.pdfViewerBase.getElement("_pageDiv_"+o),s=document.getElementById(this.pdfViewer.dataId+"_textLayer_"+o);if(a&&i<=o&&o<=n){var r=!1;if(this.pdfViewer.textSelectionModule&&(r=this.pdfViewer.textSelectionModule.isSelectionAvailableOnScroll(o)),null!=this.pdfViewerBase.pageSize[o]){var l=this.pdfViewerBase.pageSize[o].width*this.zoomFactor,d=this.pdfViewerBase.pageSize[o].height*this.zoomFactor;a.style.width=l+"px",a.style.height=d+"px",a.style.top=this.pdfViewerBase.pageSize[o].top*this.zoomFactor+"px",this.pdfViewer.enableRtl?a.style.right=this.pdfViewerBase.updateLeftPosition(o)+"px":a.style.left=this.pdfViewerBase.updateLeftPosition(o)+"px";var h=this.pdfViewerBase.getElement("_pageCanvas_"+o);h&&(h.style.width=l+"px",h.style.height=d+"px",this.pdfViewer.annotation&&this.pdfViewer.annotationModule.resizeAnnotations(l,d,o));var p=this.pdfViewerBase.retrieveCurrentZoomFactor(),c=void 0,u=void 0;c=u=this.pdfViewerBase.getTileCount(this.pdfViewerBase.pageSize[o].width);var f=this.pdfViewer.tileRenderingSettings;if(f.enableTileRendering&&f.x>0&&f.y>0&&(1200<this.pdfViewerBase.pageSize[o].width||this.pdfViewerBase.getZoomFactor()>2)&&(c=f.x,u=f.y),1===c*u){var g=this.pdfViewerBase.getWindowSessionStorage(o,p)?this.pdfViewerBase.getWindowSessionStorage(o,p):this.pdfViewerBase.getPinchZoomPage(o);if(g){if(T=(g=JSON.parse(g)).image){h.src=T,h.style.display="block";for(var m=document.querySelectorAll('img[id*="'+this.pdfViewer.dataId+"_tileimg_"+o+'_"]'),w=this.pdfViewerBase.getElement("_pageDiv_"+o),y=0;y<m.length;y++){var S=m[y].id.split("_");parseFloat(S[S.length-3])!=this.pdfViewerBase.getZoomFactor()&&w.removeChild(m[y])}for(var v=document.querySelectorAll('img[id*="'+this.pdfViewer.dataId+'_oldCanvas"]'),b=0;b<v.length;b++)a.removeChild(v[b])}this.pdfViewerBase.isReRenderRequired=!1}else this.pdfViewerBase.isReRenderRequired=!0}else{m=document.querySelectorAll('img[id*="'+this.pdfViewer.dataId+"_tileimg_"+o+'_"]');for(var V=0;V<m.length;V++){S=m[V].id.split("_");var A=parseFloat(S[S.length-2]),x=parseFloat(S[S.length-1]),C=JSON.parse(this.pdfViewerBase.getWindowSessionStorageTile(o,A,x,p));if(C&&C.zoomFactor&&(p=C.zoomFactor),parseFloat(S[S.length-4])===o){h.style.display="none";var I=m[V];if(I.nodeType==Node.ELEMENT_NODE){var k=1.5;sf.base.isNullOrUndefined(C)||(k=sf.base.isNullOrUndefined(C.scaleFactor)?1.5:C.scaleFactor);var T,M=this.pdfViewerBase.pageSize[o].width*p*k/c,P=this.pdfViewerBase.pageSize[o].height*p*k/u,B=M,E=parseFloat(S[S.length-2])*M,N=parseFloat(S[S.length-1])*P;if(I.width=B*this.pdfViewerBase.getZoomFactor()/p/k,I.style.width=B*this.pdfViewerBase.getZoomFactor()/p/k+"px",I.style.left=E*this.pdfViewerBase.getZoomFactor()/p/k+"px",I.style.top=N*this.pdfViewerBase.getZoomFactor()/p/k+"px",I.id=this.pdfViewer.dataId+"_tileimg_"+o+"_"+this.pdfViewerBase.getZoomFactor()+"_"+A+"_"+x,C)(T=C.image)&&(I.src=T),this.pdfViewerBase.isReRenderRequired=!1;else this.pdfViewerBase.isReRenderRequired=!0}}}0===m.length&&(this.pdfViewerBase.isReRenderRequired=!0)}var D=a.getElementsByTagName("a");if(0!==D.length&&this.pdfViewerBase.isReRenderRequired)for(var F=D.length-1;F>=0;F--)D[F].parentNode.removeChild(D[F]);if(s){if(s.style.width=l+"px",s.style.height=d+"px",this.isPinchZoomed)s.style.display="none";else if(this.isMagnified){var L=e-2==0?0:e-2,_=e===this.pdfViewerBase.pageCount?this.pdfViewerBase.pageCount-1:e+1;this.pdfViewer.textSelectionModule&&L<=o&&o<=_&&(this.pdfViewer.textSelectionModule.isTextSelection&&r||this.pdfViewerBase.textLayer.getTextSearchStatus()||this.pdfViewerBase.isInitialPageMode)?(this.pdfViewerBase.textLayer.resizeTextContentsOnZoom(o),this.pdfViewer.textSelectionModule.isTextSelection&&r&&this.pdfViewer.textSelectionModule.applySelectionRangeOnScroll(o)):s.style.display="none"}else s.style.display="block";this.pdfViewerBase.applyElementStyles(s,o)}var O=sf.drawings.getDiagramElement(this.pdfViewer.dataId+"_textLayer_"+o);if(O){var R=sf.drawings.getDiagramElement(this.pdfViewer.dataId+o+"_diagramAdorner_svg");R&&(R.style.width=l+"px",R.style.height=d+"px");var z=sf.drawings.getDiagramElement(this.pdfViewer.dataId+o+"_diagramAdornerLayer");z&&(z.style.width=l+"px",z.style.height=d+"px"),O.style.width=l+"px",O.style.height=d+"px",this.pdfViewer.renderSelector(o,this.pdfViewer.annotationSelectorSettings),this.pdfViewerBase.applyElementStyles(z,o)}if(this.isMagnified){var H=a.getElementsByTagName("a");if(0!==H.length)for(var j=H.length-1;j>=0;j--)H[j].parentNode.removeChild(H[j])}}}}},e.prototype.zoomOverPages=function(e,t,i,n){var o=Math.sqrt(Math.pow(e-i,2)+Math.pow(t-n,2));this.previousTouchDifference>-1&&(o>this.previousTouchDifference?(this.pinchStep=this.getPinchStep(o,this.previousTouchDifference),this.pinchOut()):o<this.previousTouchDifference&&(this.pinchStep=this.getPinchStep(this.previousTouchDifference,o),this.pinchIn())),this.previousTouchDifference=o},e.prototype.pinchMoveEnd=function(){this.touchCenterX=0,this.touchCenterY=0,this.previousTouchDifference=-1,this.isPinchZoomed&&(this.isPinchScrolled=!1,this.isPagePinchZoomed=!0,this.pinchMoveScroll())},e.prototype.fitPageScrollMouseWheel=function(e){"fitToPage"===this.fitType&&(this.isMagnified=!1,e.preventDefault(),e.deltaY>0?this.downwardScrollFitPage(this.pdfViewerBase.currentPageNumber-1):this.upwardScrollFitPage(this.pdfViewerBase.currentPageNumber-1))},e.prototype.magnifyBehaviorKeyDown=function(e){var t=!!!!navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i)&&e.metaKey;switch(e.keyCode){case 38:case 37:case 33:"fitToPage"!==this.fitType||(e.ctrlKey||t)&&e.shiftKey||(e.preventDefault(),this.upwardScrollFitPage(this.pdfViewerBase.currentPageNumber-1));break;case 40:case 39:case 34:"fitToPage"!==this.fitType||(e.ctrlKey||t)&&e.shiftKey||(e.preventDefault(),this.downwardScrollFitPage(this.pdfViewerBase.currentPageNumber-1));break;case 187:(e.ctrlKey||t)&&(e.preventDefault(),this.zoomIn());break;case 189:(e.ctrlKey||t)&&(e.preventDefault(),this.zoomOut());break;case 48:!e.ctrlKey&&!t||e.shiftKey||(e.preventDefault(),this.fitToPage());break;case 49:!e.ctrlKey&&!t||e.shiftKey||(e.preventDefault(),this.zoomTo(100))}},e.prototype.upwardScrollFitPage=function(e){e>0&&(this.pdfViewerBase.getElement("_pageDiv_"+(e-1)).style.visibility="visible",this.pdfViewerBase.viewerContainer.scrollTop=this.pdfViewerBase.pageSize[e-1].top*this.zoomFactor,this.isFitToPageMode&&(this.pdfViewerBase.getElement("_pageDiv_"+e).style.visibility="hidden"))},e.prototype.updatePagesForFitPage=function(e){"fitToPage"===this.fitType&&this.isFitToPageMode&&(e>0&&this.pdfViewerBase.getElement("_pageDiv_"+(e-1))&&(this.pdfViewerBase.getElement("_pageDiv_"+(e-1)).style.visibility="hidden"),e<this.pdfViewerBase.pageCount-1&&this.pdfViewerBase.getElement("_pageDiv_"+(e+1))&&(this.pdfViewerBase.getElement("_pageDiv_"+(e+1)).style.visibility="hidden"))},e.prototype.onDoubleTapMagnification=function(){this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.showToolbar(!0);var e=this.pdfViewerBase.viewerContainer.scrollTop;if(this.pdfViewer.selectedItems.annotations[0]){if(this.pdfViewer.selectedItems.annotations[0]&&"FreeText"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType){var t={};t.x=this.pdfViewer.selectedItems.annotations[0].bounds.x,t.y=this.pdfViewer.selectedItems.annotations[0].bounds.y,this.pdfViewer.annotation.freeTextAnnotationModule.addInuptElemet(t,this.pdfViewer.selectedItems.annotations[0],null,!0)}}else this.isDoubleTapZoom=!0,this.isTapToFitZoom?this.fitToWidth():this.zoomFactor<2?this.zoomTo(200):this.fitToWidth(),this.calculateScrollValues(e),this.isTapToFitZoom=!this.isTapToFitZoom,this.isDoubleTapZoom=!1},e.prototype.downwardScrollFitPage=function(e){e!==this.pdfViewerBase.pageCount-1&&(this.pdfViewerBase.getElement("_pageDiv_"+(e+1)).style.visibility="visible",this.pdfViewerBase.viewerContainer.scrollTop=this.pdfViewerBase.pageSize[e+1].top*this.zoomFactor,this.isFitToPageMode&&(e+1===this.pdfViewerBase.pageCount-1?this.pdfViewerBase.getElement("_pageDiv_"+e).style.visibility="hidden":this.pdfViewerBase.getElement("_pageDiv_"+(e+2)).style.visibility="hidden"))},e.prototype.getMagnifiedValue=function(e){return e/this.previousZoomFactor*this.zoomFactor},e.prototype.destroy=function(){this.imageObjects=void 0},e.prototype.getZoomFactor=function(e){return e/100},e.prototype.getModuleName=function(){return"Magnification"},e.prototype.getPinchStep=function(e,t){var i=(e-t)/100;return i<.02?i=.02:i>1&&(i=.1),i},e.prototype.positionInViewer=function(e,t){var i=this.pdfViewerBase.mainContainer.getBoundingClientRect();return{x:e-i.left,y:t-i.top}},e}(),nt=function(){function e(e,t){this.pdfViewer=e,this.pdfViewerBase=t}return e.prototype.goToNextPage=function(){this.pageNumber=this.pdfViewerBase.currentPageNumber,this.pageNumber++,this.pageNumber<=this.pdfViewerBase.pageCount&&this.pdfViewerBase.updateScrollTop(this.pageNumber-1)},e.prototype.goToPreviousPage=function(){this.pageNumber=this.pdfViewerBase.currentPageNumber,this.pageNumber--,this.pageNumber>0&&this.pdfViewerBase.updateScrollTop(this.pageNumber-1)},e.prototype.goToPage=function(e){e>0&&e<=this.pdfViewerBase.pageCount&&this.pdfViewerBase.currentPageNumber!==e&&this.pdfViewerBase.updateScrollTop(e-1),this.pdfViewer.magnificationModule.resizeCanvas(e);var t=document.getElementById(this.pdfViewer.dataId+"_textLayer_"+(e-1));t&&(t.style.display="block")},e.prototype.goToFirstPage=function(){this.pageNumber=0,this.pdfViewerBase.updateScrollTop(this.pageNumber)},e.prototype.goToLastPage=function(){this.pageNumber=this.pdfViewerBase.pageCount-1,this.pdfViewerBase.updateScrollTop(this.pageNumber)},e.prototype.destroy=function(){this.pageNumber=0},e.prototype.getModuleName=function(){return"Navigation"},e}(),ot=function(){function e(e,t){var i=this;this.thumbnailLimit=30,this.thumbnailThreshold=50,this.thumbnailTopMargin=10,this.isThumbnailClicked=!1,this.thumbnailClick=function(e){var t=i,n=t.getPageNumberFromID(e.srcElement.id);if(t.previousElement&&(t.previousElement.classList.remove("e-pv-thumbnail-selection"),t.previousElement.classList.remove("e-pv-thumbnail-focus"),t.previousElement.classList.add("e-pv-thumbnail-selection-ring")),e.srcElement.parentElement.id===t.pdfViewer.element.id+"_thumbnail_Selection_Ring_"+n?(t.setSelectionStyle(e.srcElement.parentElement),t.previousElement=e.srcElement.parentElement):e.srcElement.id===t.pdfViewer.element.id+"_thumbnail_Selection_Ring_"+n&&(t.setSelectionStyle(e.srcElement),t.previousElement=e.srcElement),t.pdfViewer.fireThumbnailClick(n+1),t.isThumbnailClicked=!0,t.goToThumbnailPage(n+1),t.pdfViewerBase.focusViewerContainer(),i.pdfViewer.annotationModule&&i.pdfViewer.annotationModule.inkAnnotationModule){var o=parseInt(i.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber);i.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(o)}},this.thumbnailMouseOver=function(e){var t=i,n=t.getPageNumberFromID(e.srcElement.id);e.srcElement.id===t.pdfViewer.element.id+"_thumbnail_Selection_Ring_"+n?t.setMouseOverStyle(e.srcElement):e.srcElement.id===t.pdfViewer.element.id+"_thumbnail_image_"+n&&t.setMouseOverStyle(e.srcElement.parentElement)},this.thumbnailMouseLeave=function(e){var t=i,n=t.getPageNumberFromID(e.srcElement.id);e.srcElement.parentElement.id===t.pdfViewer.element.id+"_thumbnail_view"?t.setMouseLeaveStyle(e.srcElement.children[0].children[0]):e.srcElement.parentElement.id===t.pdfViewer.element.id+"_thumbnail_"+n&&t.setMouseLeaveStyle(e.srcElement.parentElement.children[0])},this.pdfViewer=e,this.pdfViewerBase=t}return e.prototype.createThumbnailContainer=function(){this.thumbnailView=sf.base.createElement("div",{id:this.pdfViewer.dataId+"_thumbnail_view",className:"e-pv-thumbnail-view e-pv-thumbnail-row"}),this.pdfViewerBase.navigationPane.sideBarContent.appendChild(this.thumbnailView)},e.prototype.openThumbnailPane=function(){this.pdfViewerBase.navigationPane&&this.pdfViewerBase.navigationPane.openThumbnailPane()},e.prototype.createRequestForThumbnails=function(){var e=this;return!!document.documentMode?(this.requestCreation(e),null):new Promise((function(t,i){e.requestCreation(e)}))},e.prototype.requestCreation=function(e){e.startIndex=e.thumbnailLimit,e.thumbnailLimit=e.startIndex+e.thumbnailThreshold<e.pdfViewer.pageCount?e.startIndex+e.thumbnailThreshold:e.pdfViewer.pageCount;for(var t=!1,i=e.startIndex;i<e.thumbnailLimit;i++)e.pdfViewerBase.digitalSignaturePresent(i)&&(t=!0);var n="";t&&(n=e.pdfViewerBase.digitalSignaturePages.toString());var o={startPage:e.startIndex,endPage:e.thumbnailLimit,sizeX:99.7,sizeY:141,hashId:e.pdfViewerBase.hashId,action:"RenderThumbnailImages",elementId:e.pdfViewer.element.id,uniqueId:e.pdfViewerBase.documentId,digitalSignaturePresent:t,digitalSignaturePageList:n};this.pdfViewerBase.jsonDocumentId&&(o.documentId=this.pdfViewerBase.jsonDocumentId),this.thumbnailRequestHandler=new xe(this.pdfViewer),this.thumbnailRequestHandler.url=e.pdfViewer.serviceUrl+"/"+e.pdfViewer.serverActionSettings.renderThumbnail,this.thumbnailRequestHandler.responseType="json",this.thumbnailRequestHandler.send(o),this.thumbnailRequestHandler.onSuccess=function(t){var i=t.data;e.updateThumbnailCollection(i)},this.thumbnailRequestHandler.onFailure=function(t){e.pdfViewer.fireAjaxRequestFailed(t.status,t.statusText,e.pdfViewer.serverActionSettings.renderThumbnail)},this.thumbnailRequestHandler.onError=function(t){e.pdfViewerBase.openNotificationPopup(),e.pdfViewer.fireAjaxRequestFailed(t.status,t.statusText,e.pdfViewer.serverActionSettings.renderThumbnail)}},e.prototype.updateThumbnailCollection=function(e){if(e){if("object"!==i(e))try{e=JSON.parse(e)}catch(t){this.pdfViewerBase.onControlError(500,e,this.pdfViewer.serverActionSettings.renderThumbnail),e=null}if(e&&e.uniqueId===this.pdfViewerBase.documentId&&(this.pdfViewer.fireAjaxRequestSuccess(this.pdfViewer.serverActionSettings.renderThumbnail,e),this.renderThumbnailImage(e),this.pdfViewer.isThumbnailViewOpen)){this.pdfViewerBase.navigationPane.isThumbnailOpen=!0,this.pdfViewerBase.navigationPane.sideBarTitle.textContent=this.pdfViewer.localeObj.getConstant("Page Thumbnails"),document.getElementById(this.pdfViewer.element.id+"_thumbnail_view").style.display="flex";var t=this.pdfViewer.element.querySelector(".e-pv-bookmark-view");t&&(t.style.display="none"),this.pdfViewerBase.navigationPane.setThumbnailSelectionIconTheme(),this.pdfViewerBase.navigationPane.updateViewerContainerOnExpand(),this.pdfViewerBase.navigationPane.isBookmarkOpen=!1}}},e.prototype.gotoThumbnailImage=function(e){var t=this.checkThumbnailScroll(e);if(this.thumbnailView){var i=this.thumbnailView.children[e];if(i){var n=i.children[0];if(t){var o=n.offsetTop+n.clientTop-this.thumbnailTopMargin;this.pdfViewerBase.navigationPane.sideBarContent.scrollTop=o}this.isThumbnailClicked||(this.previousElement&&(this.previousElement.classList.remove("e-pv-thumbnail-selection"),this.previousElement.classList.remove("e-pv-thumbnail-focus"),this.previousElement.classList.remove("e-pv-thumbnail-hover"),this.previousElement.classList.add("e-pv-thumbnail-selection-ring")),this.setFocusStyle(n,e)),this.previousElement=n.children[0]}}},e.prototype.checkThumbnailScroll=function(e){var t=!1;if(this.thumbnailView){var i=this.getVisibleThumbs(),n=i.views.length;if(n>0){var o=this.getPageNumberFromID(i.first.id),a=n>1?this.getPageNumberFromID(i.last.id):o;e<=o||e>=a?t=!0:i.views.some((function(i){var n=i.id.split("_"),o=n[n.length-1];return parseInt(o)===e&&(t=i.percent<100,!0)}))}}return t},e.prototype.getPageNumberFromID=function(e){var t=e.split("_"),i=t[t.length-1];return parseInt(i)},e.prototype.setFocusStyle=function(e,t){e.children[0].id===this.pdfViewer.dataId+"_thumbnail_Selection_Ring_"+t&&this.setMouseFocusStyle(e.children[0])},e.prototype.renderThumbnailImage=function(e){if(this.thumbnailView)for(var t=e&&isNaN(e.startPage)?e.startPage:this.startIndex,i=e&&isNaN(e.endPage)?e.endPage:this.thumbnailLimit,n=t;n<i;n++){var o=sf.base.createElement("a",{id:"page_"+n,attrs:{"aria-label":"Thumbnail of Page"+(n+1),tabindex:"-1",role:"link"},className:"e-pv-thumbnail-anchor-node"}),a=sf.base.createElement("div",{id:this.pdfViewer.dataId+"_thumbnail_"+n,className:"e-pv-thumbnail e-pv-thumbnail-column"});this.thumbnailSelectionRing=sf.base.createElement("div",{id:this.pdfViewer.dataId+"_thumbnail_Selection_Ring_"+n,className:"e-pv-thumbnail-selection-ring"}),a.appendChild(this.thumbnailSelectionRing);var s=sf.base.createElement("div",{id:this.pdfViewer.dataId+"_thumbnail_pagenumber_"+n,className:"e-pv-thumbnail-number"});s.textContent=(n+1).toString(),a.appendChild(s),this.thumbnailImage=sf.base.createElement("img",{id:this.pdfViewer.dataId+"_thumbnail_image_"+n,className:"e-pv-thumbnail-image"}),this.thumbnailImage.src=e.thumbnailImage[n],this.pdfViewerBase.pageSize[n]&&this.pdfViewerBase.pageSize[n].height<this.pdfViewerBase.pageSize[n].width&&(this.thumbnailImage.style.height="86px",this.thumbnailImage.style.width="126px",a.style.height="100px",a.style.width="140px",o.style.left="-25px",o.style.position="relative",s.style.left="18px",s.style.position="relative"),this.thumbnailImage.setAttribute("alt",""),this.thumbnailSelectionRing.appendChild(this.thumbnailImage),o.appendChild(a),this.thumbnailView.appendChild(o),this.wireUpEvents(),0===n&&this.setMouseFocusToFirstPage()}(this.pdfViewerBase.navigationPane.enableThumbnailButton(),this.thumbnailLimit!==this.pdfViewerBase.pageCount&&this.thumbnailView)&&(!!document.documentMode?this.createRequestForThumbnails():Promise.all([this.createRequestForThumbnails()]))},e.prototype.wireUpEvents=function(){this.thumbnailSelectionRing&&(this.thumbnailSelectionRing.addEventListener("click",this.thumbnailClick),this.thumbnailSelectionRing.addEventListener("mouseover",this.thumbnailMouseOver),this.thumbnailSelectionRing.addEventListener("mouseleave",this.thumbnailMouseLeave))},e.prototype.unwireUpEvents=function(){this.thumbnailSelectionRing&&this.thumbnailImage&&(this.thumbnailSelectionRing.removeEventListener("click",this.thumbnailClick),this.thumbnailSelectionRing.removeEventListener("mouseover",this.thumbnailMouseOver),this.thumbnailSelectionRing.removeEventListener("mouseleave",this.thumbnailMouseLeave))},e.prototype.goToThumbnailPage=function(e){e>0&&e<=this.pdfViewerBase.pageCount&&this.pdfViewerBase.currentPageNumber!==e?this.pdfViewerBase.updateScrollTop(e-1):this.isThumbnailClicked=!1},e.prototype.setSelectionStyle=function(e){e.classList.remove("e-pv-thumbnail-selection-ring"),e.classList.remove("e-pv-thumbnail-hover"),e.classList.remove("e-pv-thumbnail-focus"),e.classList.add("e-pv-thumbnail-selection")},e.prototype.setMouseOverStyle=function(e){e.classList.contains("e-pv-thumbnail-selection")||(e.classList.remove("e-pv-thumbnail-selection-ring"),e.classList.contains("e-pv-thumbnail-focus")||e.classList.add("e-pv-thumbnail-hover"))},e.prototype.setMouseLeaveStyle=function(e){e.classList.contains("e-pv-thumbnail-selection")?e.classList.contains("e-pv-thumbnail-selection")||(e.classList.remove("e-pv-thumbnail-selection"),e.classList.add("e-pv-thumbnail-focus")):(e.classList.contains("e-pv-thumbnail-focus")||e.classList.add("e-pv-thumbnail-selection-ring"),e.classList.remove("e-pv-thumbnail-hover"))},e.prototype.setMouseFocusStyle=function(e){e.classList.remove("e-pv-thumbnail-selection"),e.classList.remove("e-pv-thumbnail-hover"),e.classList.add("e-pv-thumbnail-focus")},e.prototype.setMouseFocusToFirstPage=function(){var e=this.thumbnailView.children[0];if(e){var t=e.children[0].children[0];this.setMouseFocusStyle(t),this.previousElement=t}},e.prototype.clear=function(){if(this.startIndex=0,this.thumbnailLimit=0,this.pdfViewerBase.navigationPane&&this.pdfViewerBase.navigationPane.sideBarContentContainer&&(this.pdfViewerBase.navigationPane.sideBarContentContainer.style.display="block",this.pdfViewerBase.navigationPane.sideBarContent.scrollTop=0,this.pdfViewerBase.navigationPane.sideBarContentContainer.style.display="none"),this.thumbnailView)for(;this.thumbnailView.hasChildNodes();)this.thumbnailView.removeChild(this.thumbnailView.lastChild);this.pdfViewerBase.navigationPane&&this.pdfViewerBase.navigationPane.resetThumbnailView(),this.thumbnailRequestHandler&&this.thumbnailRequestHandler.clear(),this.unwireUpEvents()},e.prototype.getVisibleThumbs=function(){return this.getVisibleElements(this.pdfViewerBase.navigationPane.sideBarContent,this.thumbnailView.children)},e.prototype.getVisibleElements=function(e,t){var i=e.scrollTop,n=i+e.clientHeight,o=e.scrollLeft,a=o+e.clientWidth;var s,r,l,d,h,p,c,u,f,g=[],m=0===t.length?0:this.binarySearchFirstItem(t,(function(e){return e.offsetTop+e.clientTop+e.clientHeight>i}));t.length>0&&(m=this.backtrackBeforeAllVisibleElements(m,t,i));for(var w=-1,y=m,S=t.length;y<S;y++){if(p=(r=s=this.getThumbnailElement(y)).offsetLeft+r.clientLeft,l=r.offsetTop+r.clientTop,u=p+(c=r.clientWidth),h=l+(d=r.clientHeight),-1===w)h>=n&&(w=h);else if(l>w)break;h<=i||l>=n||u<=o||p>=a||(f=(d-(Math.max(0,i-l)+Math.max(0,h-n)))*(c-(Math.max(0,o-p)+Math.max(0,u-a)))*100/d/c|0,g.push({id:s.id,x:p,y:l,view:s,percent:f}))}return{first:g[0],last:g[g.length-1],views:g}},e.prototype.binarySearchFirstItem=function(e,t){var i=0,n=e.length-1;if(0===e.length||!t(this.getThumbnailElement(n)))return e.length-1;if(t(this.getThumbnailElement(i)))return i;for(;i<n;){var o=i+n>>1;t(this.getThumbnailElement(o))?n=o:i=o+1}return i},e.prototype.backtrackBeforeAllVisibleElements=function(e,t,i){if(e<2)return e;var n=this.getThumbnailElement(e),o=n.offsetTop+n.clientTop;o>=i&&(o=(n=this.getThumbnailElement(e-1)).offsetTop+n.clientTop);for(var a=e-2;a>=0&&!((n=this.getThumbnailElement(a)).offsetTop+n.clientTop+n.clientHeight<=o);--a)e=a;return e},e.prototype.getThumbnailElement=function(e){return this.thumbnailView.children[e].children[0]},e.prototype.destroy=function(){this.clear()},e.prototype.getModuleName=function(){return"ThumbnailView"},e}(),at=function(){function e(e,t){var i=this;this.isPageNavigationToolDisabled=!1,this.isMagnificationToolDisabled=!1,this.isSelectionToolDisabled=!1,this.isScrollingToolDisabled=!1,this.isOpenBtnVisible=!0,this.isNavigationToolVisible=!0,this.isMagnificationToolVisible=!0,this.isSelectionBtnVisible=!0,this.isScrollingBtnVisible=!0,this.isDownloadBtnVisible=!0,this.isPrintBtnVisible=!0,this.isSearchBtnVisible=!0,this.isTextSearchBoxDisplayed=!1,this.isUndoRedoBtnsVisible=!0,this.isAnnotationEditBtnVisible=!0,this.isCommentBtnVisible=!0,this.isSubmitbtnvisible=!0,this.toolbarClickHandler=function(e){if(!sf.base.Browser.isDevice||i.pdfViewer.enableDesktopMode)if(e.originalEvent.target===i.zoomDropdownItem.parentElement.childNodes[1]||e.originalEvent.target===i.zoomDropdownItem.parentElement.childNodes[2])e.cancel=!0;else if(e.originalEvent.target.id===i.pdfViewer.dataId+"_openIcon"){var t=e.originalEvent.target.parentElement.dataset;if(t&&t.tooltipId){var n=document.getElementById(t.tooltipId);n&&(n.style.display="none")}}i.handleToolbarBtnClick(e);var o=e.originalEvent.target;!sf.base.Browser.isDevice||i.pdfViewer.enableDesktopMode?e.originalEvent.target!==i.zoomDropdownItem.parentElement.childNodes[1]&&e.originalEvent.target!==i.zoomDropdownItem.parentElement.childNodes[2]&&e.originalEvent.target!==i.currentPageBoxElement&&e.originalEvent.target!==i.textSearchItem.childNodes[0]&&o.parentElement.id!==i.pdfViewer.dataId+"_toolbarContainer_nav"&&o.id!==i.pdfViewer.dataId+"_toolbarContainer_nav"&&(e.originalEvent.target.blur(),i.pdfViewerBase.focusViewerContainer()):(e.originalEvent.target.blur(),i.pdfViewerBase.focusViewerContainer())},this.loadDocument=function(e){var t=e.target.files;if(null!==e.target.files[0]){var n=t[0];if(n){i.uploadedDocumentName=n.name;var o=new FileReader;o.readAsDataURL(n),o.onload=function(e){var t=e.currentTarget.result;i.pdfViewerBase.clear(!0),i.pdfViewerBase.showLoadingIndicator(!0),i.pdfViewer._dotnetInstance.invokeMethodAsync("LoadDocumentFromClient",t)}}}},this.navigateToPage=function(e){if(13===e.which){var t=parseInt(i.currentPageBoxElement.value);null!==t&&t>0&&t<=i.pdfViewerBase.pageCount?i.pdfViewer.navigationModule&&i.pdfViewer.navigationModule.goToPage(t):i.updateCurrentPage(i.pdfViewerBase.currentPageNumber),i.currentPageBoxElement.blur(),i.pdfViewerBase.focusViewerContainer()}},this.textBoxFocusOut=function(){(null===i.currentPageBox.value||i.currentPageBox.value>=i.pdfViewerBase.pageCount||i.currentPageBox.value!==i.pdfViewerBase.currentPageNumber)&&i.updateCurrentPage(i.pdfViewerBase.currentPageNumber)},this.pdfViewer=e,this.pdfViewerBase=t}return e.prototype.intializeToolbar=function(e){var t;(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode||(t=this.pdfViewer.element.querySelector(".e-pv-toolbar"),this.toolbarElement=t),!!document.documentMode&&this.pdfViewerBase.blazorUIAdaptor.totalPageElement.classList.add("e-pv-total-page-ms"),this.createFileElement(t),this.wireEvent(),sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode||(this.initialEnableItems(),this.pdfViewerBase.navigationPane.adjustPane(),this.pdfViewer.enableToolbar&&this.bindOpenIconEvent()),document.getElementById(this.pdfViewer.dataId+"_handTool"))&&(this.PanElement=document.getElementById(this.pdfViewer.dataId+"_handTool").children[0],this.PanElement.classList.add("e-pv-tbar-btn"),this.PanElement.childNodes[0].classList.remove("e-icons","e-btn-icon"));document.getElementById(this.pdfViewer.dataId+"_selectTool")&&(this.SelectToolElement=document.getElementById(this.pdfViewer.dataId+"_selectTool").children[0],this.SelectToolElement.classList.add("e-pv-tbar-btn"),this.SelectToolElement.childNodes[0].classList.remove("e-icons","e-btn-icon"));document.getElementById(this.pdfViewer.dataId+"_comment")&&(this.CommentElement=document.getElementById(this.pdfViewer.dataId+"_comment").children[0],this.CommentElement.classList.add("e-pv-tbar-btn"),this.CommentElement.childNodes[0].classList.remove("e-icons","e-btn-icon"));return(!sf.base.Browser.isDevice||sf.base.Browser.isDevice&&this.pdfViewer.enableDesktopMode)&&(this.annotationToolbarModule=new st(this.pdfViewer,this.pdfViewerBase,this),(this.pdfViewer.enableAnnotationToolbar||this.pdfViewer.enableDesktopMode&&sf.base.Browser.isDevice)&&this.annotationToolbarModule.afterAnnotationToolbarCreationInBlazor()),t},e.prototype.bindOpenIconEvent=function(){var e=document.getElementById(this.pdfViewer.dataId+"_open");null!=e&&(e.children[0].classList.add("e-pv-tbar-btn"),e.childNodes[0].childNodes[0].classList.remove("e-icons","e-btn-icon"),e&&e.addEventListener("click",this.openFileDialogBox.bind(this)))},e.prototype.InitializeMobileToolbarInBlazor=function(){var e;if(e=this.pdfViewer.element.querySelector(".e-pv-mobile-toolbar"),this.createFileElement(e),this.wireEvent(),sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){var t=document.getElementsByClassName("e-pv-open-document")[0],i=document.getElementsByClassName("e-pv-fileupload-element")[0];t&&i&&t.addEventListener("click",(function(){i.click()}))}},e.prototype.showToolbar=function(e){var t=this.toolbarElement;e?t&&(t.style.display="block"):(this.pdfViewerBase.toolbarHeight=0,e&&(sf.base.Browser.isDevice&&this.pdfViewer.toolbarModule.annotationToolbarModule.toolbar&&(this.annotationToolbarModule.toolbarCreated=!1,this.annotationToolbarModule.adjustMobileViewer(),this.pdfViewer.toolbarModule.annotationToolbarModule.toolbar.element.style.display="none"),sf.base.Browser.isDevice&&this.annotationToolbarModule.propertyToolbar&&(this.annotationToolbarModule.propertyToolbar.element.style.display="none")),t.style.display="none")},e.prototype.showNavigationToolbar=function(e){if(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode){var t=this.pdfViewerBase.navigationPane.sideBarToolbar,i=this.pdfViewerBase.navigationPane.sideBarToolbarSplitter;e?(t.style.display="block",i.style.display="block",(this.pdfViewerBase.navigationPane.isBookmarkOpen||this.pdfViewerBase.navigationPane.isThumbnailOpen)&&this.pdfViewerBase.navigationPane.clear()):(t.style.display="none",i.style.display="none",(this.pdfViewerBase.navigationPane.isBookmarkOpen||this.pdfViewerBase.navigationPane.isThumbnailOpen)&&this.pdfViewerBase.navigationPane.updateViewerContainerOnClose())}},e.prototype.showToolbarItem=function(e,t){for(var i=0;i<e.length;i++)switch(e[i]){case"OpenOption":this.showOpenOption(t);break;case"PageNavigationTool":this.showPageNavigationTool(t);break;case"MagnificationTool":this.showMagnificationTool(t);break;case"SelectionTool":this.showSelectionTool(t);break;case"PanTool":this.showScrollingTool(t);break;case"DownloadOption":this.showDownloadOption(t);break;case"PrintOption":this.showPrintOption(t);break;case"SearchOption":this.showSearchOption(t);break;case"UndoRedoTool":this.showUndoRedoTool(t);break;case"AnnotationEditTool":this.showAnnotationEditTool(t);break;case"CommentTool":this.showCommentOption(t);break;case"SubmitForm":this.showSubmitForm(t)}this.applyHideToToolbar(!0,1,1),this.applyHideToToolbar(!0,8,8),this.applyHideToToolbar(!0,12,12),this.applyHideToToolbar(!0,15,15),this.showSeparator(e)},e.prototype.enableToolbarItem=function(e,t){for(var i=0;i<e.length;i++)switch(e[i]){case"OpenOption":this.enableOpenOption(t);break;case"PageNavigationTool":this.isPageNavigationToolDisabled=t,this.enablePageNavigationTool(t);break;case"MagnificationTool":this.isMagnificationToolDisabled=t,this.enableMagnificationTool(t);break;case"SelectionTool":this.isSelectionToolDisabled=t,this.enableSelectionTool(t);break;case"PanTool":this.isScrollingToolDisabled=t,this.enableScrollingTool(t);break;case"DownloadOption":this.enableDownloadOption(t);break;case"PrintOption":this.enablePrintOption(t);break;case"SearchOption":this.enableSearchOption(t);break;case"UndoRedoTool":this.enableUndoRedoTool(t);break;case"AnnotationEditTool":this.enableAnnotationEditTool(t);break;case"CommentTool":this.enableCommentsTool(t)}},e.prototype.showOpenOption=function(e){this.isOpenBtnVisible=e,this.applyHideToToolbar(e,0,0)},e.prototype.showPageNavigationTool=function(e){this.isNavigationToolVisible=e,this.applyHideToToolbar(e,2,7)},e.prototype.showMagnificationTool=function(e){this.isMagnificationToolVisible=e,this.applyHideToToolbar(e,9,11)},e.prototype.showSelectionTool=function(e){this.isSelectionBtnVisible=e,this.applyHideToToolbar(e,13,13)},e.prototype.showScrollingTool=function(e){this.isScrollingBtnVisible=e,this.applyHideToToolbar(e,14,14)},e.prototype.showDownloadOption=function(e){this.isDownloadBtnVisible=e,!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode?this.applyHideToToolbar(e,26,26):this.applyHideToToolbar(e,5,5)},e.prototype.showPrintOption=function(e){this.isPrintBtnVisible=e,this.applyHideToToolbar(e,25,25)},e.prototype.showSearchOption=function(e){this.isSearchBtnVisible=e,!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode?this.applyHideToToolbar(e,22,22):this.applyHideToToolbar(e,5,5)},e.prototype.showUndoRedoTool=function(e){this.isUndoRedoBtnsVisible=e,!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode?this.applyHideToToolbar(e,16,17):this.applyHideToToolbar(e,2,3)},e.prototype.showCommentOption=function(e){this.pdfViewer.enableStickyNotesAnnotation?(this.isCommentBtnVisible=e,this.applyHideToToolbar(e,18,19)):(this.isCommentBtnVisible=e,this.applyHideToToolbar(this.pdfViewer.enableStickyNotesAnnotation,18,19))},e.prototype.showAnnotationEditTool=function(e){this.isAnnotationEditBtnVisible=e,!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode?this.applyHideToToolbar(e,23,23):this.applyHideToToolbar(e,4,4)},e.prototype.showSubmitForm=function(e){this.isSubmitbtnvisible=e,this.applyHideToToolbar(e,20,21)},e.prototype.enableOpenOption=function(e){this.toolbar.enableItems(this.openDocumentItem.parentElement,e)},e.prototype.enablePageNavigationTool=function(e){this.toolbar.enableItems(this.firstPageItem.parentElement,e),this.toolbar.enableItems(this.previousPageItem.parentElement,e),this.toolbar.enableItems(this.nextPageItem.parentElement,e),this.toolbar.enableItems(this.lastPageItem.parentElement,e),this.currentPageBox.readonly=!e},e.prototype.enableMagnificationTool=function(e){this.toolbar.enableItems(this.zoomInItem.parentElement,e),this.toolbar.enableItems(this.zoomOutItem.parentElement,e),this.zoomDropDown.readonly=!e},e.prototype.enableSelectionTool=function(e){this.toolbar.enableItems(this.textSelectItem.parentElement,e)},e.prototype.enableScrollingTool=function(e){this.toolbar.enableItems(this.panItem.parentElement,e)},e.prototype.enableDownloadOption=function(e){this.toolbar.enableItems(this.downloadItem.parentElement,e)},e.prototype.enablePrintOption=function(e){this.toolbar.enableItems(this.printItem.parentElement,e)},e.prototype.enableSearchOption=function(e){this.toolbar.enableItems(this.textSearchItem.parentElement,e)},e.prototype.enableUndoRedoTool=function(e){this.toolbar.enableItems(this.undoItem.parentElement,e),this.toolbar.enableItems(this.redoItem.parentElement,e)},e.prototype.enableAnnotationEditTool=function(e){this.toolbar.enableItems(this.annotationItem.parentElement,e)},e.prototype.enableCommentsTool=function(e){this.pdfViewer.enableStickyNotesAnnotation&&this.toolbar.enableItems(this.annotationItem.parentElement,e)},e.prototype.resetToolbar=function(){if((!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode)&&(this.currentPageBox.min=0,this.currentPageBox.value=0,this.updateTotalPage(),this.updateToolbarItems(),this.annotationToolbarModule)){this.annotationToolbarModule.propertyToolbar&&this.annotationToolbarModule.propertyToolbar.destroy();var e=document.getElementById(this.pdfViewer.dataId+"_commentscontentcontainer");e&&(e.innerHTML="")}},e.prototype.updateToolbarItems=function(){!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode?this.toolbar&&(0===this.pdfViewerBase.pageCount?(this.toolbar.enableItems(this.downloadItem.parentElement,!1),this.toolbar.enableItems(this.printItem.parentElement,!1),this.toolbar.enableItems(this.commentItem.parentElement,!1),this.updateUndoRedoButtons(),this.updateNavigationButtons(),this.toolbar.enableItems(this.zoomInItem.parentElement,!1),this.toolbar.enableItems(this.zoomOutItem.parentElement,!1),this.pdfViewer.magnificationModule&&(this.zoomDropDown.readonly=!0),this.toolbar.enableItems(this.submitItem.parentElement,!1),this.toolbar.enableItems(this.pdfViewerBase.getElement("_currentPageInputContainer"),!1),this.toolbar.enableItems(this.pdfViewerBase.getElement("_zoomDropDownContainer"),!1),this.toolbar.enableItems(this.textSelectItem.parentElement,!1),this.toolbar.enableItems(this.annotationItem.parentElement,!1),this.toolbar.enableItems(this.panItem.parentElement,!1),this.toolbar.enableItems(this.textSearchItem.parentElement,!1),this.deSelectItem(this.annotationItem),this.annotationToolbarModule&&this.annotationToolbarModule.resetToolbar()):this.pdfViewerBase.pageCount>0&&(this.toolbar.enableItems(this.downloadItem.parentElement,!0),this.toolbar.enableItems(this.printItem.parentElement,!0),this.toolbar.enableItems(this.pdfViewerBase.getElement("_currentPageInputContainer"),!0),this.toolbar.enableItems(this.pdfViewerBase.getElement("_zoomDropDownContainer"),!0),this.updateUndoRedoButtons(),this.updateNavigationButtons(),this.updateZoomButtons(),this.pdfViewer.magnificationModule&&(this.zoomDropDown.readonly=!1),this.updateInteractionItems(),this.pdfViewer.annotationModule&&this.pdfViewer.enableAnnotation&&this.toolbar.enableItems(this.annotationItem.parentElement,!0),this.pdfViewer.textSearchModule&&this.pdfViewer.enableTextSearch&&this.toolbar.enableItems(this.textSearchItem.parentElement,!0),this.pdfViewer.annotationModule&&this.pdfViewer.enableStickyNotesAnnotation&&this.toolbar.enableItems(this.commentItem.parentElement,!0)),this.pdfViewer.toolbarSettings.annotationToolbarItems&&(0!==this.pdfViewer.toolbarSettings.annotationToolbarItems.length&&this.pdfViewer.annotationModule&&this.pdfViewer.enableAnnotationToolbar||this.enableToolbarItem(["AnnotationEditTool"],!1)),this.pdfViewer.enableDownload||this.enableDownloadOption(!1),this.pdfViewer.enablePrint||this.enablePrintOption(!1)):0===this.pdfViewerBase.pageCount?(this.toolbar.enableItems(this.textSearchItem.parentElement,!1),this.toolbar.enableItems(this.moreOptionItem.parentElement,!1),this.toolbar.enableItems(this.annotationItem.parentElement,!1)):this.pdfViewerBase.pageCount>0&&(this.toolbar.enableItems(this.textSearchItem.parentElement,!0),this.toolbar.enableItems(this.moreOptionItem.parentElement,!0),this.pdfViewer.annotationModule&&this.pdfViewer.enableAnnotation&&this.toolbar.enableItems(this.annotationItem.parentElement,!0),this.pdfViewer.annotationModule&&this.pdfViewer.enableAnnotationToolbar||this.enableToolbarItem(["AnnotationEditTool"],!1),this.updateUndoRedoButtons()),this.pdfViewer.viewerBase.blazorUIAdaptor.canUndoRedo()},e.prototype.updateNavigationButtons=function(){this.pdfViewer.navigationModule&&!this.isPageNavigationToolDisabled?0===this.pdfViewerBase.pageCount||1===this.pdfViewerBase.currentPageNumber&&1===this.pdfViewerBase.pageCount?(this.toolbar.enableItems(this.firstPageItem.parentElement,!1),this.toolbar.enableItems(this.previousPageItem.parentElement,!1),this.toolbar.enableItems(this.nextPageItem.parentElement,!1),this.toolbar.enableItems(this.lastPageItem.parentElement,!1)):1===this.pdfViewerBase.currentPageNumber&&this.pdfViewerBase.pageCount>0?(this.toolbar.enableItems(this.firstPageItem.parentElement,!1),this.toolbar.enableItems(this.previousPageItem.parentElement,!1),this.toolbar.enableItems(this.nextPageItem.parentElement,!0),this.toolbar.enableItems(this.lastPageItem.parentElement,!0)):this.pdfViewerBase.currentPageNumber===this.pdfViewerBase.pageCount&&this.pdfViewerBase.pageCount>0?(this.toolbar.enableItems(this.firstPageItem.parentElement,!0),this.toolbar.enableItems(this.previousPageItem.parentElement,!0),this.toolbar.enableItems(this.nextPageItem.parentElement,!1),this.toolbar.enableItems(this.lastPageItem.parentElement,!1)):this.pdfViewerBase.currentPageNumber>1&&this.pdfViewerBase.currentPageNumber<this.pdfViewerBase.pageCount&&(this.toolbar.enableItems(this.firstPageItem.parentElement,!0),this.toolbar.enableItems(this.previousPageItem.parentElement,!0),this.toolbar.enableItems(this.nextPageItem.parentElement,!0),this.toolbar.enableItems(this.lastPageItem.parentElement,!0)):(this.toolbar.enableItems(this.firstPageItem.parentElement,!1),this.toolbar.enableItems(this.previousPageItem.parentElement,!1),this.toolbar.enableItems(this.nextPageItem.parentElement,!1),this.toolbar.enableItems(this.lastPageItem.parentElement,!1),this.currentPageBox.readonly=!0)},e.prototype.updateZoomButtons=function(){!this.pdfViewer.magnificationModule||this.isMagnificationToolDisabled||sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode||(this.pdfViewer.magnificationModule.zoomFactor<=.1?(this.toolbar.enableItems(this.zoomInItem.parentElement,!0),this.toolbar.enableItems(this.zoomOutItem.parentElement,!1)):this.pdfViewer.magnificationModule.zoomFactor>=4?(this.toolbar.enableItems(this.zoomInItem.parentElement,!1),this.toolbar.enableItems(this.zoomOutItem.parentElement,!0)):(this.toolbar.enableItems(this.zoomInItem.parentElement,!0),this.toolbar.enableItems(this.zoomOutItem.parentElement,!0)))},e.prototype.updateUndoRedoButtons=function(){this.pdfViewer.annotationModule&&this.pdfViewerBase.pageCount>0?(this.enableCollectionAvailableInBlazor(this.pdfViewer.annotationModule.actionCollection,"undo"),this.enableCollectionAvailableInBlazor(this.pdfViewer.annotationModule.redoCollection,"redo")):this.pdfViewerBase.blazorUIAdaptor.disableUndoRedoButton()},e.prototype.enableCollectionAvailableInBlazor=function(e,t){e.length>0?this.pdfViewerBase.blazorUIAdaptor.updateUndoRedoButton(t,!0):this.pdfViewerBase.blazorUIAdaptor.updateUndoRedoButton(t,!1)},e.prototype.updateCurrentPage=function(e){!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode?(this.pdfViewerBase.blazorUIAdaptor.pageChanged(e),this.pdfViewerBase.currentPageNumber=e,this.pdfViewer.currentPageNumber=e):(this.pdfViewerBase.mobileSpanContainer.innerHTML=e.toString(),this.pdfViewerBase.mobilecurrentPageContainer.innerHTML=e.toString())},e.prototype.updateTotalPage=function(){sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode||(this.pdfViewerBase.pageCount>0&&(this.currentPageBox.min=1),this.totalPageItem.textContent=this.pdfViewer.localeObj.getConstant("of")+this.pdfViewerBase.pageCount.toString())},e.prototype.openFileDialogBox=function(e){e.preventDefault(),this.fileInputElement.click()},e.prototype.createMoreOption=function(e){var t=this;this.moreOptionItem=document.getElementById(e);var i=[{text:this.pdfViewer.localeObj.getConstant("Download"),id:this.pdfViewer.dataId+"_menu_download",iconCss:"e-icons e-pv-download-document-icon e-pv-icon"},{text:this.pdfViewer.localeObj.getConstant("Bookmarks"),id:this.pdfViewer.dataId+"_menu_bookmarks",iconCss:"e-icons e-pv-bookmark-icon e-pv-icon"}];this.moreDropDown=new sf.splitbuttons.DropDownButton({items:i,iconCss:"e-pv-more-icon e-pv-icon",cssClass:"e-caret-hide",open:function(e){var i=t.moreDropDown.element.getBoundingClientRect();t.pdfViewer.enableRtl||(e.element.parentElement.style.left=i.left+i.width-e.element.parentElement.offsetWidth+"px")},select:function(e){switch(e.item.id){case t.pdfViewer.dataId+"_menu_download":t.pdfViewerBase.download();break;case t.pdfViewer.dataId+"_menu_bookmarks":t.showToolbar(!1),t.pdfViewerBase.navigationPane.createNavigationPaneMobile("bookmarks")}},beforeItemRender:function(e){e.item.id===t.pdfViewer.dataId+"_menu_bookmarks"&&(t.pdfViewer.bookmarkViewModule&&t.pdfViewer.bookmarkViewModule.bookmarks?e.element.classList.remove("e-disabled"):e.element.classList.add("e-disabled"))},close:function(e){t.moreOptionItem.blur(),t.pdfViewerBase.focusViewerContainer()}}),this.moreDropDown.appendTo("#"+e)},e.prototype.createFileElement=function(e){e&&(this.fileInputElement=this.pdfViewer.element.querySelector(".e-pv-fileupload-element"),e&&e.appendChild(this.fileInputElement))},e.prototype.wireEvent=function(){this.fileInputElement&&this.fileInputElement.addEventListener("change",this.loadDocument)},e.prototype.unWireEvent=function(){this.fileInputElement&&this.fileInputElement.removeEventListener("change",this.loadDocument)},e.prototype.onToolbarResize=function(e){sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode?this.pdfViewerBase.navigationPane.toolbarResize():this.toolbar.refreshOverflow()},e.prototype.toolbarOnMouseup=function(e){e.target!==this.itemsContainer&&e.target!==this.toolbarElement||this.pdfViewerBase.focusViewerContainer()},e.prototype.applyHideToToolbar=function(e,t,i){for(var n=!e,o=t;o<=i;o++)if(this.toolbar.items[o]){var a=this.toolbar.items[o].cssClass;if(a&&""!==a){var s=this.toolbar.element.querySelector("."+a);s&&this.toolbar.hideItem(s,n)}else this.toolbar.hideItem(o,n)}},e.prototype.handleOpenIconClick=function(e){this.fileInputElement.click(),sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&this.pdfViewerBase.focusViewerContainer()},e.prototype.handleToolbarBtnClick=function(e){switch(this.addInkAnnotation(),this.deSelectCommentAnnotation(),e.originalEvent.target.id){case this.pdfViewer.dataId+"_open":case this.pdfViewer.dataId+"_openIcon":case this.pdfViewer.dataId+"_openText":this.handleOpenIconClick(e);break;case this.pdfViewer.dataId+"_download":case this.pdfViewer.dataId+"_downloadIcon":case this.pdfViewer.dataId+"_downloadText":this.pdfViewerBase.download();break;case this.pdfViewer.dataId+"_print":case this.pdfViewer.dataId+"_printIcon":case this.pdfViewer.dataId+"_printText":this.pdfViewer.printModule&&this.pdfViewer.firePrintStart();break;case this.pdfViewer.dataId+"_undo":case this.pdfViewer.dataId+"_undoIcon":case this.pdfViewer.dataId+"_undoText":this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.undo();break;case this.pdfViewer.dataId+"_redo":case this.pdfViewer.dataId+"_redoIcon":case this.pdfViewer.dataId+"_redoText":this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.redo();break;case this.pdfViewer.dataId+"_firstPage":case this.pdfViewer.dataId+"_firstPageIcon":case this.pdfViewer.dataId+"_firstPageText":this.pdfViewer.navigationModule&&this.pdfViewer.navigationModule.goToFirstPage();break;case this.pdfViewer.dataId+"_previousPage":case this.pdfViewer.dataId+"_previousPageIcon":case this.pdfViewer.dataId+"_previousPageText":this.pdfViewer.navigationModule&&this.pdfViewer.navigationModule.goToPreviousPage();break;case this.pdfViewer.dataId+"_nextPage":case this.pdfViewer.dataId+"_nextPageIcon":case this.pdfViewer.dataId+"_nextPageText":this.pdfViewer.navigationModule&&this.pdfViewer.navigationModule.goToNextPage();break;case this.pdfViewer.dataId+"_lastPage":case this.pdfViewer.dataId+"_lastPageIcon":case this.pdfViewer.dataId+"_lastPageText":this.pdfViewer.navigationModule&&this.pdfViewer.navigationModule.goToLastPage();break;case this.pdfViewer.dataId+"_zoomIn":case this.pdfViewer.dataId+"_zoomInIcon":case this.pdfViewer.dataId+"_zoomInText":this.pdfViewer.magnificationModule.zoomIn();break;case this.pdfViewer.dataId+"_zoomOut":case this.pdfViewer.dataId+"_zoomOutIcon":case this.pdfViewer.dataId+"_zoomOutText":this.pdfViewer.magnificationModule.zoomOut();break;case this.pdfViewer.dataId+"_selectTool":case this.pdfViewer.dataId+"_selectToolIcon":case this.pdfViewer.dataId+"_selectToolText":this.isSelectionToolDisabled||(this.pdfViewerBase.initiateTextSelectMode(),this.updateInteractionTools(!0));break;case this.pdfViewer.dataId+"_handTool":case this.pdfViewer.dataId+"_handToolIcon":case this.pdfViewer.dataId+"_handToolText":this.isScrollingToolDisabled||this.getStampMode()||(this.pdfViewerBase.initiatePanning(),this.updateInteractionTools(!1));break;case this.pdfViewer.dataId+"_search":case this.pdfViewer.dataId+"_searchIcon":case this.pdfViewer.dataId+"_searchText":this.textSearchButtonHandler();break;case this.pdfViewer.dataId+"_comment":case this.pdfViewer.dataId+"_commentIcon":this.pdfViewerBase.isAddComment=!0,this.pdfViewerBase.isCommentIconAdded=!0,this.pdfViewer.annotation.triggerAnnotationUnselectEvent(),this.addComments(e.originalEvent.target);break;case this.pdfViewer.dataId+"_submitForm":case this.pdfViewer.dataId+"_submitFormSpan":this.pdfViewerBase.exportFormFields()}},e.prototype.addInkAnnotation=function(){if(this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.inkAnnotationModule){var e=parseInt(this.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber);this.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(e)}this.annotationToolbarModule&&(this.pdfViewer.toolbar.annotationToolbarModule.deselectInkAnnotation(),this.annotationToolbarModule.inkAnnotationSelected=!1)},e.prototype.deSelectCommentAnnotation=function(){this.pdfViewer.toolbar.deSelectItem(this.CommentElement),this.pdfViewerBase.isCommentIconAdded=!1},e.prototype.addComments=function(e){this.pdfViewerBase.isCommentIconAdded=!0,this.pdfViewerBase.isAddComment=!0,this.annotationToolbarModule.deselectAllItemsInBlazor(),this.pdfViewer.annotation.triggerAnnotationUnselectEvent(),this.CommentElement.classList.add("e-pv-select"),this.updateStampItems(),document.getElementById(this.pdfViewer.dataId+"_pageDiv_"+(this.pdfViewerBase.currentPageNumber-1)).addEventListener("mousedown",this.pdfViewer.annotationModule.stickyNotesAnnotationModule.drawIcons.bind(this))},e.prototype.openZoomDropdown=function(){var e=this;if(document.fullscreen){var t=document.fullscreenElement;t&&"BODY"!==t.tagName&&"HTML"!==t.tagName&&setTimeout((function(){var t=document.getElementById(e.pdfViewer.element.id+"_zoomCombo_popup"),i=document.getElementById(e.toolbarElement.id);t&&i&&t.ej2_instances&&(i.appendChild(t),t.ej2_instances[0].refreshPosition())}),100)}},e.prototype.onZoomDropDownInput=function(e){if((e.which<48||e.which>57)&&8!==e.which&&13!==e.which)return e.preventDefault(),!1;if(13===e.which){e.preventDefault();var t=this.zoomDropDown.element.value;this.zoomDropDownChange(t)}return!0},e.prototype.onZoomDropDownInputClick=function(){this.zoomDropDown.element.select()},e.prototype.zoomPercentSelect=function(e){if(this.pdfViewerBase.pageCount>0)if(e.isInteracted){if(e.itemData){var t=e.itemData.percent;this.zoomDropDownChange(t)}}else this.updateZoomPercentage(this.pdfViewer.magnificationModule.zoomFactor)},e.prototype.zoomDropDownChange=function(e){e!==this.pdfViewer.localeObj.getConstant("Fit Width")&&e!==this.pdfViewer.localeObj.getConstant("Fit Page")&&e!==this.pdfViewer.localeObj.getConstant("Automatic")?(this.pdfViewer.magnificationModule.isAutoZoom=!1,this.pdfViewer.magnificationModule.zoomTo(parseFloat(e)),this.updateZoomPercentage(this.pdfViewer.magnificationModule.zoomFactor),this.zoomDropDown.focusOut()):e===this.pdfViewer.localeObj.getConstant("Fit Width")?(this.pdfViewer.magnificationModule.isAutoZoom=!1,this.pdfViewer.magnificationModule.fitToWidth(),this.zoomDropDown.focusOut()):e===this.pdfViewer.localeObj.getConstant("Fit Page")?(this.pdfViewer.magnificationModule.fitToPage(),this.zoomDropDown.focusOut()):e===this.pdfViewer.localeObj.getConstant("Automatic")&&(this.pdfViewer.magnificationModule.isAutoZoom=!0,this.pdfViewer.magnificationModule.fitToAuto(),this.zoomDropDown.focusOut())},e.prototype.updateZoomPercentage=function(e){if(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode){var t=parseInt((100*e).toString())+"%",i=this.pdfViewerBase.getElement("_zoomDropDown");i&&i.children.length>0&&(i.children[0].children[0].value=t)}},e.prototype.updateInteractionItems=function(){this.pdfViewer.textSelectionModule&&this.pdfViewer.enableTextSelection?this.toolbar.enableItems(this.textSelectItem.parentElement,!0):this.toolbar.enableItems(this.textSelectItem.parentElement,!1),this.toolbar.enableItems(this.panItem.parentElement,!0),"TextSelection"===this.pdfViewer.interactionMode&&this.pdfViewer.enableTextSelection?(this.selectItem(this.textSelectItem),this.deSelectItem(this.panItem)):(this.selectItem(this.panItem),this.deSelectItem(this.textSelectItem),this.pdfViewerBase.initiatePanning())},e.prototype.textSearchButtonHandler=function(){if(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode){if(this.pdfViewer.textSearchModule&&this.pdfViewerBase.pageCount>0)if(this.isTextSearchBoxDisplayed=!this.isTextSearchBoxDisplayed,this.pdfViewer.textSearchModule.showSearchBox(this.isTextSearchBoxDisplayed),this.isTextSearchBoxDisplayed){var e=document.getElementById(this.pdfViewer.dataId+"_search_input");e.select(),e.focus()}else{this.pdfViewerBase.getElement("_search").firstElementChild.blur()}}else this.showToolbar(!1),this.pdfViewerBase.navigationPane.createNavigationPaneMobile("search")},e.prototype.DisableInteractionTools=function(){this.deSelectItem(this.textSelectItem),this.deSelectItem(this.panItem)},e.prototype.selectItem=function(e){e&&e.classList.add("e-pv-select")},e.prototype.deSelectItem=function(e){e&&e.classList.remove("e-pv-select")},e.prototype.updateInteractionTools=function(e){e?(this.selectItem(this.SelectToolElement),this.deSelectItem(this.PanElement)):(this.selectItem(this.PanElement),this.deSelectItem(this.SelectToolElement))},e.prototype.initialEnableItems=function(){this.pdfViewer.enableToolbar?this.showToolbar(!0):this.showToolbar(!1),this.pdfViewer.enableNavigationToolbar?this.showNavigationToolbar(!0):this.showNavigationToolbar(!1)},e.prototype.showSeparator=function(e){this.isOpenBtnVisible&&(this.isNavigationToolVisible||this.isMagnificationToolVisible||this.isSelectionBtnVisible||this.isScrollingBtnVisible||this.isUndoRedoBtnsVisible)||this.applyHideToToolbar(!1,1,1),(this.isNavigationToolVisible||this.isMagnificationToolVisible||this.isOpenBtnVisible)&&(!this.isOpenBtnVisible||this.isNavigationToolVisible)&&(this.isOpenBtnVisible||this.isNavigationToolVisible)&&(this.isMagnificationToolVisible||this.isScrollingBtnVisible||this.isSelectionBtnVisible)||this.applyHideToToolbar(!1,8,8),(!this.isMagnificationToolVisible&&!this.isSelectionBtnVisible&&!this.isScrollingBtnVisible||this.isMagnificationToolVisible&&!this.isSelectionBtnVisible&&!this.isScrollingBtnVisible||!this.isMagnificationToolVisible&&(this.isSelectionBtnVisible||this.isScrollingBtnVisible))&&this.applyHideToToolbar(!1,12,12),(this.isMagnificationToolVisible||this.isNavigationToolVisible||this.isScrollingBtnVisible||this.isSelectionBtnVisible||!this.isUndoRedoBtnsVisible)&&this.isUndoRedoBtnsVisible||this.applyHideToToolbar(!1,15,15)},e.prototype.applyToolbarSettings=function(){var e=this.pdfViewer.toolbarSettings.toolbarItems;e&&(-1!==e.indexOf("OpenOption")?this.showOpenOption(!0):this.showOpenOption(!1),-1!==e.indexOf("PageNavigationTool")?this.showPageNavigationTool(!0):this.showPageNavigationTool(!1),-1!==e.indexOf("MagnificationTool")?this.showMagnificationTool(!0):this.showMagnificationTool(!1),-1!==e.indexOf("SelectionTool")?this.showSelectionTool(!0):this.showSelectionTool(!1),-1!==e.indexOf("PanTool")?this.showScrollingTool(!0):this.showScrollingTool(!1),-1!==e.indexOf("PrintOption")?this.showPrintOption(!0):this.showPrintOption(!1),-1!==e.indexOf("DownloadOption")?this.showDownloadOption(!0):this.showDownloadOption(!1),-1!==e.indexOf("SearchOption")?this.showSearchOption(!0):this.showSearchOption(!1),-1!==e.indexOf("UndoRedoTool")?this.showUndoRedoTool(!0):this.showUndoRedoTool(!1),-1!==e.indexOf("AnnotationEditTool")?this.showAnnotationEditTool(!0):this.showAnnotationEditTool(!1),-1!==e.indexOf("CommentTool")?this.showCommentOption(!0):this.showCommentOption(!1),-1!==e.indexOf("SubmitForm")?this.showSubmitForm(!0):this.showSubmitForm(!1),this.showSeparator(e))},e.prototype.applyToolbarSettingsForMobile=function(){var e=this.pdfViewer.toolbarSettings.toolbarItems;e&&(-1!==e.indexOf("OpenOption")?this.showOpenOption(!0):this.showOpenOption(!1),-1!==e.indexOf("UndoRedoTool")?this.showUndoRedoTool(!0):this.showUndoRedoTool(!1),-1!==e.indexOf("AnnotationEditTool")?this.showAnnotationEditTool(!0):this.showAnnotationEditTool(!1),-1!==e.indexOf("SearchOption")?this.showSearchOption(!0):this.showSearchOption(!1))},e.prototype.getStampMode=function(){return!(!this.pdfViewer.annotation||!this.pdfViewer.annotation.stampAnnotationModule)&&this.pdfViewer.annotation.stampAnnotationModule.isStampAddMode},e.prototype.stampBeforeOpen=function(e){if(this.annotationToolbarModule.resetFreeTextAnnot(),""===e.ParentItem.Text&&this.pdfViewer.customStampSettings.isAddToMenu&&e.Items.length>0){for(var t=null,i=0;i<e.Items.length;i++)if("Custom Stamp"===e.Items[i].Text){e.Items[i].Items=[],t=e.Items[i];break}var n=this.pdfViewerBase.customStampCollection,o=this.pdfViewer.customStampSettings.customStamps;if(0===n.length&&o&&o.length>0)for(var a=0;a<o.length;a++)n.push({customStampName:o[a].customStampName,customStampImageSource:o[a].customStampImageSource});for(var s=0;s<n.length;s++)null!=t&&t.Items.push({text:n[s].customStampName})}},e.prototype.stampBeforeClose=function(e,t){(e.ParentItem&&"Custom Stamp"!==e.ParentItem.Text&&"Standard Business"!==e.ParentItem.Text&&"Dynamic"!==e.ParentItem.Text&&"Sign Here"!==e.ParentItem.Text||!e.ParentItem)&&!0},e.prototype.updateStampItems=function(){this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.stampAnnotationModule&&this.pdfViewer.annotationModule.stampAnnotationModule.isNewStampAnnot&&(this.pdfViewer.selectedItems.annotations[0]&&(this.pdfViewer.remove(this.pdfViewer.selectedItems.annotations[0]),this.pdfViewer.clearSelection(this.pdfViewer.currentPageNumber-1),this.pdfViewer.renderDrawing(),this.pdfViewerBase.tool=null),this.pdfViewerBase.isAlreadyAdded=!1,this.pdfViewer.annotationModule.stampAnnotationModule.isNewStampAnnot=!1)},e.prototype.handleCustomStampClick=function(){if(/^((?!chrome|android).)*safari/i.test(navigator.userAgent)){var e=document.getElementById(this.pdfViewer.dataId+"_stampElement"),t=document.getElementById(this.pdfViewer.dataId+"_e-pv-custom-stamp");if(null!==e&&null!==t){t.addEventListener("click",(function(){e.click()}))}}},e.prototype.stampSelect=function(e,t){if(this.pdfViewerBase.isAlreadyAdded=!1,this.updateStampItems(),"Custom Stamp"===e.Item.Text){this.annotationToolbarModule.checkStampAnnotations(),this.pdfViewer.annotation.stampAnnotationModule.isStampAddMode=!0;var i=sf.base.createElement("input",{id:this.pdfViewer.dataId+"_stampElement",attrs:{type:"file"}});i.setAttribute("accept",".jpg,.jpeg,.png"),i.style.position="absolute",i.style.left="0px",i.style.top="0px",i.style.visibility="hidden",document.body.appendChild(i),i.click(),i.addEventListener("change",this.annotationToolbarModule.addStampImage),document.body.removeChild(i)}else if("Custom Stamp"===t&&""!==e.Item.Text)for(var n=this.pdfViewerBase.customStampCollection,o=0;o<n.length;o++)n[o].customStampName===e.Item.Text&&(this.pdfViewer.annotationModule.stampAnnotationModule.customStampName=e.Item.Text,this.annotationToolbarModule.checkStampAnnotations(),this.pdfViewer.annotation.stampAnnotationModule.isStampAddMode=!0,this.pdfViewer.annotationModule.stampAnnotationModule.isStampAnnotSelected=!0,this.pdfViewerBase.stampAdded=!0,this.pdfViewerBase.isAlreadyAdded=!0,this.pdfViewer.annotationModule.stampAnnotationModule.createCustomStampAnnotation(n[o].customStampImageSource),this.pdfViewerBase.stampAdded=!1);else"Dynamic"===e.Item.Text||""===e.Item.Text||"Standard Business"===e.Item.Text||"Sign Here"!==t&&"Sign Here"===e.Item.Text||(this.annotationToolbarModule.checkStampAnnotations(),this.pdfViewer.annotation.stampAnnotationModule.isStampAddMode=!0,this.pdfViewer.annotationModule.stampAnnotationModule.isStampAnnotSelected=!0,this.pdfViewerBase.stampAdded=!0,"Dynamic"===t?(this.pdfViewerBase.isDynamicStamp=!0,this.pdfViewer.annotationModule.stampAnnotationModule.retrieveDynamicStampAnnotation(e.Item.Text)):(this.pdfViewerBase.isDynamicStamp=!1,this.pdfViewer.annotationModule.stampAnnotationModule.retrievestampAnnotation(e.Item.Text)))},e.prototype.getModuleName=function(){return"Toolbar"},e.prototype.stampSelection=function(e,t,i,n){e&&this.annotationToolbarModule.resetFreeTextAnnot(),t&&this.stampSelect(i,n)},e.prototype.primaryToolbarClick=function(e,t,i,n,o,a,s){if(e&&this.addInkAnnotation(),t&&this.deSelectCommentAnnotation(),i)switch(n){case"GoToNext":this.pdfViewer.navigationModule.goToNextPage();break;case"GoToPrevious":this.pdfViewer.navigationModule.goToPreviousPage();break;case"GoToFirst":this.pdfViewer.navigationModule.goToFirstPage();break;case"GoToLast":this.pdfViewer.navigationModule.goToLastPage();break;case"ZoomOut":this.pdfViewer.magnificationModule.zoomOut();break;case"ZoomIn":this.pdfViewer.magnificationModule.zoomIn();break;case"SelectTool":this.pdfViewerBase.initiateTextSelection();break;case"PanTool":this.pdfViewerBase.initiatePanning();break;case"Undo":this.pdfViewer.undo();break;case"Redo":this.pdfViewer.redo();break;case"SubmitForm":this.pdfViewer.exportFormFields(null);break;case"AddComments":this.addComments(a);break;case"TextSearch":this.textSearchButtonHandler();break;case"EditAnnotation":this.pdfViewerBase.blazorUIAdaptor.showAnnotationToolbar(s);break;case"PrintDocument":this.pdfViewer.firePrintStart();break;case"Download":this.pdfViewer.download()}o&&this.pdfViewerBase.focusViewerContainer()},e}(),st=function(){function e(e,t,i){var n=this;this.toolbarBorderHeight=1,this.isToolbarHidden=!1,this.isHighlightEnabled=!1,this.isUnderlineEnabled=!1,this.isStrikethroughEnabled=!1,this.isHighlightBtnVisible=!0,this.isCommentBtnVisible=!0,this.isUnderlineBtnVisible=!0,this.isStrikethroughBtnVisible=!0,this.isColorToolVisible=!0,this.isOpacityToolVisible=!0,this.isDeleteAnnotationToolVisible=!0,this.isCurrentAnnotationOpacitySet=!1,this.isStampBtnVisible=!1,this.isShapeBtnVisible=!1,this.isSignatureBtnVisible=!1,this.isInkBtnVisible=!1,this.isFontFamilyToolVisible=!1,this.isFontSizeToolVisible=!1,this.isFontAlignToolVisible=!1,this.isFontColorToolVisible=!1,this.isFontStylesToolVisible=!1,this.isCommentPanelBtnVisible=!1,this.isFreeTextBtnVisible=!1,this.isCalibrateBtnVisible=!1,this.isStrokeColorToolVisible=!1,this.isThicknessToolVisible=!1,this.stampMenu=[],this.stampParentID="",this.inkAnnotationSelected=!1,this.openSignaturePopup=!1,this.isSavedSignatureClicked=!1,this.saveSignatureCount=0,this.saveInitialCount=0,this.isToolbarCreated=!1,this.addStampImage=function(e){var t=n,i=e.target.files;if(null!==e.target.files[0]){var o=i[0];if(n.pdfViewer.annotationModule.stampAnnotationModule.customStampName=o.name.split(".")[0],"image"===o.type.split("/")[0]){var a=new FileReader;a.onload=function(e){var i=e.currentTarget.result;t.pdfViewer.annotation.stampAnnotationModule.isStampAddMode=!0,t.pdfViewer.annotationModule.stampAnnotationModule.isStampAnnotSelected=!0,t.pdfViewerBase.stampAdded=!0,n.pdfViewer.annotationModule.stampAnnotationModule.createCustomStampAnnotation(i),t.pdfViewerBase.stampAdded=!1},a.readAsDataURL(o)}}e.target.value="",e.currentTarget.value=""},this.pdfViewer=e,this.pdfViewerBase=t,this.primaryToolbar=i}return e.prototype.adjustMobileViewer=function(){var e;this.toolbarElement&&(e=this.toolbarElement.clientHeight);var t=!1;this.toolbarElement&&0===this.toolbarElement.children.length&&this.propertyToolbar&&this.propertyToolbar.element.children.length>0?(e=this.propertyToolbar.element.clientHeight,"none"===this.pdfViewer.toolbarModule.toolbarElement.style.display&&(this.pdfViewer.toolbarModule.toolbarElement.style.display="block")):this.freetextToolbarElement&&this.freetextToolbarElement.children.length>0?e=this.freetextToolbarElement.clientHeight:0===e&&this.pdfViewer.toolbarModule.toolbar?(e=this.pdfViewer.toolbarModule.toolbarElement.clientHeight,t=!0):!e&&this.propertyToolbar&&this.propertyToolbar.element.children.length>0&&(e=this.propertyToolbar.element.clientHeight),this.pdfViewer.enableToolbar&&this.toolbarCreated?this.pdfViewerBase.viewerContainer.style.height=this.updateViewerHeight(this.getElementHeight(this.pdfViewerBase.viewerContainer),e+e)+"px":t||(this.pdfViewerBase.viewerContainer.style.height.split("%").length>1?this.pdfViewerBase.viewerContainer.style.height=this.resetViewerHeight(this.getElementHeight(this.pdfViewerBase.viewerContainer),-e)+"px":this.pdfViewerBase.viewerContainer.style.height=this.resetViewerHeight(this.getElementHeight(this.pdfViewerBase.viewerContainer),e)+"px")},e.prototype.createCustomStampElement=function(){var e=sf.base.createElement("input",{id:this.pdfViewer.dataId+"_stampElement",attrs:{type:"file"}});e.setAttribute("accept",".jpg,.jpeg,.png"),e.style.position="absolute",e.style.left="0px",e.style.top="0px",e.style.visibility="hidden",document.body.appendChild(e),e.addEventListener("change",this.addStampImage)},e.prototype.checkStampAnnotations=function(){if(this.pdfViewer.annotation.stampAnnotationModule.isStampAddMode&&this.pdfViewer.selectedItems&&this.pdfViewer.selectedItems.annotations)for(var e=0;e<this.pdfViewer.selectedItems.annotations.length;e++){var t=this.pdfViewer.selectedItems.annotations[e];!t||t.annotName||t.author||"Shape"===t.shapeAnnotationType&&"Image"===t.shapeAnnotationType||(this.pdfViewer.remove(t),this.pdfViewer.annotation.renderAnnotations(t.pageIndex,null,null,null),this.pdfViewer.clearSelection(t.pageIndex))}},e.prototype.onFontColorChange=function(e){var t=e;1===this.pdfViewer.selectedItems.annotations.length?this.pdfViewer.annotation.modifyFontColor(t):(this.pdfViewer.freeTextSettings.fontColor=t,this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties()),this.fontColorElementInBlazor=this.pdfViewer.element.querySelector(".e-pv-annotation-textcolor-container"),this.updateColorInIcon(this.fontColorElementInBlazor,t)},e.prototype.onFontFamilyChange=function(e){var t=e;1===this.pdfViewer.selectedItems.annotations.length&&t?this.pdfViewer.annotation.modifyFontFamily(t):(this.pdfViewer.freeTextSettings.fontFamily=t,this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties())},e.prototype.onFontSizeChange=function(e){var t=e,i=parseFloat(t);1===this.pdfViewer.selectedItems.annotations.length&&t?this.pdfViewer.annotation.modifyFontSize(i):(this.pdfViewer.freeTextSettings.fontSize=i,this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties())},e.prototype.onClickTextAlignment=function(e){var t=e;1===this.pdfViewer.selectedItems.annotations.length&&t?this.pdfViewer.annotation.modifyTextAlignment(t):(this.pdfViewer.freeTextSettings.textAlignment=e.item.value,this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties()),this.updateTextAlignInIcon(t)},e.prototype.onClickTextProperties=function(e){var t=e;if(1===this.pdfViewer.selectedItems.annotations.length&&t){var i={isBold:void 0,isItalic:void 0,isStrikeout:void 0,isUnderline:void 0};"bold"===t?i.isBold=!this.pdfViewer.selectedItems.annotations[0].font.isBold:"italic"===t?i.isItalic=!this.pdfViewer.selectedItems.annotations[0].font.isItalic:"underline"===t?i.isUnderline=!this.pdfViewer.selectedItems.annotations[0].font.isUnderline:"strikeout"===t&&(i.isStrikeout=!this.pdfViewer.selectedItems.annotations[0].font.isStrikeout),this.pdfViewer.annotation.modifyTextProperties(i,t)}else"bold"===t?this.pdfViewer.annotationModule.freeTextAnnotationModule.isBold?this.pdfViewer.annotationModule.freeTextAnnotationModule.isBold=!1:(this.pdfViewer.freeTextSettings.fontStyle=1,this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties()):"italic"===t?this.pdfViewer.annotationModule.freeTextAnnotationModule.isItalic?this.pdfViewer.annotationModule.freeTextAnnotationModule.isItalic=!1:(this.pdfViewer.freeTextSettings.fontStyle=2,this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties()):"underline"===t?this.pdfViewer.annotationModule.freeTextAnnotationModule.isUnderline?this.pdfViewer.annotationModule.freeTextAnnotationModule.isUnderline=!1:(this.pdfViewer.freeTextSettings.fontStyle=4,this.pdfViewer.annotationModule.freeTextAnnotationModule.isStrikethrough=!1,this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties()):"strikeout"===t&&(this.pdfViewer.annotationModule.freeTextAnnotationModule.isStrikethrough?this.pdfViewer.annotationModule.freeTextAnnotationModule.isStrikethrough=!1:(this.pdfViewer.freeTextSettings.fontStyle=8,this.pdfViewer.annotationModule.freeTextAnnotationModule.isUnderline=!1,this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties()));this.updateTextPropertySelection(t)},e.prototype.opacityChange=function(e){this.pdfViewerBase.isOpacityChange=!0;var t=1;if(null!=e&&(t=e,t/=100),this.pdfViewer.annotationModule.textMarkupAnnotationModule)if(this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation)this.pdfViewer.annotationModule.textMarkupAnnotationModule.modifyOpacityProperty(null,t);else switch(this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode){case"Highlight":this.pdfViewer.annotationModule.textMarkupAnnotationModule.highlightOpacity=t;break;case"Underline":this.pdfViewer.annotationModule.textMarkupAnnotationModule.underlineOpacity=t;break;case"Strikethrough":this.pdfViewer.annotationModule.textMarkupAnnotationModule.strikethroughOpacity=t}if(1===this.pdfViewer.selectedItems.annotations.length){var i=this.pdfViewer.selectedItems.annotations[0];if(null==i||"Stamp"!==i.shapeAnnotationType&&"Image"!==i.shapeAnnotationType)this.pdfViewer.annotation.modifyOpacity(t,!0);else{var n=S(i),o=S(i);o.opacity=t,this.pdfViewer.nodePropertyChange(i,{opacity:t}),this.pdfViewer.annotation.triggerAnnotationPropChange(i,!1,!1,!1,!0),this.pdfViewer.annotation.addAction(this.pdfViewer.selectedItems.annotations[0].pageIndex,null,this.pdfViewer.selectedItems.annotations[0],"stampOpacity","",n,o),this.pdfViewer.annotation.stampAnnotationModule.updateSessionStorage(this.pdfViewer.selectedItems.annotations[0],null,"opacity")}}else{if(this.pdfViewer.annotation.shapeAnnotationModule)switch(this.pdfViewer.annotation.shapeAnnotationModule.currentAnnotationMode){case"Line":this.pdfViewer.annotation.shapeAnnotationModule.lineOpacity=t;break;case"Arrow":this.pdfViewer.annotation.shapeAnnotationModule.arrowOpacity=t;break;case"Rectangle":this.pdfViewer.annotation.shapeAnnotationModule.rectangleOpacity=t;break;case"Circle":this.pdfViewer.annotation.shapeAnnotationModule.circleOpacity=t;break;case"Polygon":this.pdfViewer.annotation.shapeAnnotationModule.polygonOpacity=t}var a=this.pdfViewer.annotation,s=this.pdfViewer.selectedItems.annotations[0];a&&a.inkAnnotationModule&&s&&"Ink"===s.shapeAnnotationType&&(this.pdfViewer.inkAnnotationSettings.opacity=t),this.pdfViewer.drawingObject&&(this.pdfViewer.drawingObject.opacity=t,"FreeText"===this.pdfViewer.drawingObject.shapeAnnotationType&&(this.pdfViewer.freeTextSettings.opacity=t,this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties()))}},e.prototype.calculateToolbarPosition=function(e){if(e.element&&e.element.parentElement){var t=parseFloat(e.element.parentElement.style.left),i=e.element.parentElement.offsetWidth;t+i<this.pdfViewer.element.offsetWidth+10&&(e.element.parentElement.style.left=t-i+"px")}},e.prototype.thicknessChangeInBlazor=function(e){this.pdfViewerBase.isThicknessChange=!0,1===this.pdfViewer.selectedItems.annotations.length?this.pdfViewer.annotation.modifyThickness(e):this.ShapeThickness(e)},e.prototype.ShapeThickness=function(e){if(this.pdfViewer.annotation.shapeAnnotationModule){switch(this.pdfViewer.annotation.shapeAnnotationModule.currentAnnotationMode){case"Line":this.pdfViewer.annotation.shapeAnnotationModule.lineThickness=e;break;case"Arrow":this.pdfViewer.annotation.shapeAnnotationModule.arrowThickness=e;break;case"Rectangle":this.pdfViewer.annotation.shapeAnnotationModule.rectangleThickness=e;break;case"Circle":this.pdfViewer.annotation.shapeAnnotationModule.circleThickness=e;break;case"Polygon":this.pdfViewer.annotation.shapeAnnotationModule.polygonThickness=e}var t=this.pdfViewer.annotation;t&&t.inkAnnotationModule&&(this.pdfViewer.inkAnnotationSettings.thickness=e.value),this.pdfViewer.drawingObject&&(this.pdfViewer.drawingObject.thickness=e.value),this.pdfViewer.drawingObject&&"FreeText"===this.pdfViewer.drawingObject.shapeAnnotationType&&(this.pdfViewer.freeTextSettings.borderWidth=e.value,this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties())}var i=this.pdfViewer.annotation;i&&i.inkAnnotationModule&&(this.pdfViewer.inkAnnotationSettings.thickness=e),this.pdfViewer.drawingObject&&(this.pdfViewer.drawingObject.thickness=e),this.pdfViewer.drawingObject&&"FreeText"===this.pdfViewer.drawingObject.shapeAnnotationType&&(this.pdfViewer.freeTextSettings.borderWidth=e,this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties())},e.prototype.onShapeDrawSelection=function(e){this.pdfViewer.selectedItems.annotations[0];sf.base.Browser.isDevice||(this.updateInteractionTools(),this.enableAnnotationPropertiesTools(!0),e?this.shapeDropDown.toggle():this.calibrateDropDown.toggle()),this.pdfViewer.annotation.triggerAnnotationUnselectEvent()},e.prototype.onColorPickerChange=function(e){var t=e;if(this.pdfViewer.annotationModule.textMarkupAnnotationModule)if(this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation)this.pdfViewer.annotationModule.textMarkupAnnotationModule.modifyColorProperty(t);else switch(this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode){case"Highlight":this.pdfViewer.annotationModule.textMarkupAnnotationModule.highlightColor=t;break;case"Underline":this.pdfViewer.annotationModule.textMarkupAnnotationModule.underlineColor=t;break;case"Strikethrough":this.pdfViewer.annotationModule.textMarkupAnnotationModule.strikethroughColor=t}if(1===this.pdfViewer.selectedItems.annotations.length)this.pdfViewer.annotation.modifyFillColor(t);else{if(this.pdfViewer.annotation.shapeAnnotationModule)switch(this.pdfViewer.annotation.shapeAnnotationModule.currentAnnotationMode){case"Line":this.pdfViewer.annotation.shapeAnnotationModule.lineFillColor=t;break;case"Arrow":this.pdfViewer.annotation.shapeAnnotationModule.arrowFillColor=t;break;case"Rectangle":this.pdfViewer.annotation.shapeAnnotationModule.rectangleFillColor=t;break;case"Circle":this.pdfViewer.annotation.shapeAnnotationModule.circleFillColor=t;break;case"Polygon":this.pdfViewer.annotation.shapeAnnotationModule.polygonFillColor=t}this.pdfViewer.drawingObject&&(this.pdfViewer.drawingObject.fillColor=t,"FreeText"===this.pdfViewer.drawingObject.shapeAnnotationType&&(this.pdfViewer.freeTextSettings.fillColor=t,this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties()))}this.colorDropDownElementInBlazor=this.pdfViewer.element.querySelector(".e-pv-annotation-color-container"),this.updateColorInIcon(this.colorDropDownElementInBlazor,t)},e.prototype.onStrokePickerChange=function(e){var t=e;if(1===this.pdfViewer.selectedItems.annotations.length)this.pdfViewer.annotation.modifyStrokeColor(t);else{if(this.pdfViewer.annotation.shapeAnnotationModule)switch(this.pdfViewer.annotation.shapeAnnotationModule.currentAnnotationMode){case"Line":this.pdfViewer.annotation.shapeAnnotationModule.lineStrokeColor=t;break;case"Arrow":this.pdfViewer.annotation.shapeAnnotationModule.arrowStrokeColor=t;break;case"Rectangle":this.pdfViewer.annotation.shapeAnnotationModule.rectangleStrokeColor=t;break;case"Circle":this.pdfViewer.annotation.shapeAnnotationModule.circleStrokeColor=t;break;case"Polygon":this.pdfViewer.annotation.shapeAnnotationModule.polygonStrokeColor=t}var i=this.pdfViewer.annotation;i&&i.inkAnnotationModule&&(this.pdfViewer.inkAnnotationSettings.strokeColor=t),this.pdfViewer.drawingObject&&(this.pdfViewer.drawingObject.strokeColor=t),this.pdfViewer.drawingObject&&"FreeText"===this.pdfViewer.drawingObject.shapeAnnotationType&&(this.pdfViewer.freeTextSettings.borderColor=t,this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties())}this.strokeDropDownElementInBlazor=this.pdfViewer.element.querySelector(".e-pv-annotation-stroke-container"),this.updateColorInIcon(this.strokeDropDownElementInBlazor,t)},e.prototype.updateColorInIcon=function(e,t){e&&(e.children[0].style.borderBottomColor=t)},e.prototype.updateTextPropertySelection=function(e){"bold"===e?document.getElementById(this.pdfViewer.dataId+"_bold").classList.toggle("textprop-option-active"):"italic"===e?document.getElementById(this.pdfViewer.dataId+"_italic").classList.toggle("textprop-option-active"):"underline"===e?(document.getElementById(this.pdfViewer.dataId+"_underline_textinput").classList.toggle("textprop-option-active"),document.getElementById(this.pdfViewer.dataId+"_strikeout").classList.remove("textprop-option-active")):"strikeout"===e&&(document.getElementById(this.pdfViewer.dataId+"_strikeout").classList.toggle("textprop-option-active"),document.getElementById(this.pdfViewer.dataId+"_underline_textinput").classList.remove("textprop-option-active"))},e.prototype.updateFontFamilyInIcon=function(e){this.fontFamily.value=e},e.prototype.updateTextAlignInIcon=function(e){var t="e-btn-icon e-pv-left-align-icon e-pv-icon",i=document.getElementById(this.pdfViewer.dataId+"_left_align"),n=document.getElementById(this.pdfViewer.dataId+"_right_align"),o=document.getElementById(this.pdfViewer.dataId+"_center_align"),a=document.getElementById(this.pdfViewer.dataId+"_justify_align");"Left"===e?i.classList.add("textprop-option-active"):"Right"===e?(t="e-btn-icon e-pv-right-align-icon e-pv-icon",n.classList.add("textprop-option-active")):"Center"===e?(t="e-btn-icon e-pv-center-align-icon e-pv-icon",o.classList.add("textprop-option-active")):"Justify"===e&&(t="e-btn-icon e-pv-justfiy-align-icon e-pv-icon",a.classList.add("textprop-option-active")),document.getElementById(this.pdfViewer.dataId+"_annotation_textalign").children[0].className=t},e.prototype.updateFontSizeInIcon=function(e){this.fontSize.value=e+"px"},e.prototype.addInkAnnotation=function(){if(this.pdfViewer.clearSelection(this.pdfViewer.currentPageNumber-1),this.pdfViewer.annotationModule.inkAnnotationModule){var e=this.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber;e&&""!==e&&(this.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(parseInt(e)),this.primaryToolbar.deSelectItem(this.InkAnnotationElement),this.pdfViewerBase.focusViewerContainer())}this.inkAnnotationSelected?this.inkAnnotationSelected=!1:(this.deselectAllItemsInBlazor(),this.drawInkAnnotation())},e.prototype.deselectInkAnnotation=function(){this.primaryToolbar.deSelectItem(this.InkAnnotationElement)},e.prototype.drawInkAnnotation=function(){this.inkAnnotationSelected=!0,this.primaryToolbar.selectItem(this.InkAnnotationElement),this.enableSignaturePropertiesTools(!0),this.pdfViewerBase.isToolbarInkClicked=!0,this.pdfViewer.annotationModule.inkAnnotationModule.drawInk()},e.prototype.resetFreeTextAnnot=function(){if(this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.freeTextAnnotationModule&&(this.pdfViewer.annotation.freeTextAnnotationModule.isNewFreeTextAnnot=!1,this.pdfViewer.annotation.freeTextAnnotationModule.isNewAddedAnnot=!1,sf.base.Browser.isDevice||(this.primaryToolbar.deSelectItem(this.FreeTextElement),this.enableFreeTextAnnotationPropertiesTools(!1))),this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.inkAnnotationModule){var e=this.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber;e&&""!==e&&(this.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(parseInt(e)),this.primaryToolbar.deSelectItem(this.InkAnnotationElement))}this.inkAnnotationSelected=!1},e.prototype.updateInkannotationItems=function(){if(this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.inkAnnotationModule&&this.inkAnnotationSelected){var e=this.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber;e&&""!==e&&(this.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(parseInt(e)),this.pdfViewerBase.isToolbarInkClicked=!0,this.pdfViewer.tool="Ink",this.pdfViewer.clearSelection(e))}},e.prototype.updateFontFamily=function(){this.pdfViewer.annotationModule.freeTextAnnotationModule.isBold?this.updateFontFamilyIcon("_bold",!0):this.updateFontFamilyIcon("_bold",!1),this.pdfViewer.annotationModule.freeTextAnnotationModule.isItalic?this.updateFontFamilyIcon("_italic",!0):this.updateFontFamilyIcon("_italic",!1),this.pdfViewer.annotationModule.freeTextAnnotationModule.isUnderline?(this.updateFontFamilyIcon("_underline_textinput",!0),this.updateFontFamilyIcon("_strikeout",!1)):this.updateFontFamilyIcon("_underline_textinput",!1),this.pdfViewer.annotationModule.freeTextAnnotationModule.isStrikethrough?(this.updateFontFamilyIcon("_strikeout",!0),this.updateFontFamilyIcon("_underline_textinput",!1)):this.updateFontFamilyIcon("_strikeout",!1)},e.prototype.updateFontFamilyIcon=function(e,t){var i=document.getElementById(this.pdfViewer.dataId+e);t?i.classList.add("textprop-option-active"):i.classList.remove("textprop-option-active")},e.prototype.enablePropertiesTool=function(e){this.isHighlightEnabled=!1,this.isUnderlineEnabled=!1,this.isStrikethroughEnabled=!1,this.pdfViewerBase.isTextMarkupAnnotationModule()&&(e.textMarkupAnnotationModule.isTextMarkupAnnotationMode=!1),this.primaryToolbar.deSelectItem(this.highlightItem),this.primaryToolbar.deSelectItem(this.underlineItem),this.primaryToolbar.deSelectItem(this.strikethroughItem),this.enableTextMarkupAnnotationPropertiesTools(!0),this.updateColorInIcon(this.colorDropDownElement,e.textMarkupAnnotationModule.currentTextMarkupAnnotation.color),this.selectAnnotationDeleteItem(!0)},e.prototype.showSeparator=function(){this.isHighlightBtnVisible||this.isUnderlineBtnVisible||this.isStrikethroughBtnVisible||this.applyHideToToolbar(!1,3,3),this.isShapeBtnVisible||this.applyHideToToolbar(!1,5,5),this.isCalibrateBtnVisible||this.applyHideToToolbar(!1,7,7),this.isFreeTextBtnVisible||this.applyHideToToolbar(!1,9,9),this.isStampBtnVisible||this.applyHideToToolbar(!1,11,11),this.isSignatureBtnVisible||this.applyHideToToolbar(!1,13,13),this.isInkBtnVisible||this.applyHideToToolbar(!1,15,15),this.isFontFamilyToolVisible||this.isFontSizeToolVisible||this.isFontColorToolVisible||this.isFontAlignToolVisible||this.isFontStylesToolVisible||this.applyHideToToolbar(!1,21,21),(this.isColorToolVisible||this.isStrokeColorToolVisible||this.isThicknessToolVisible||this.isOpacityToolVisible)&&this.isDeleteAnnotationToolVisible||this.applyHideToToolbar(!1,26,26)},e.prototype.applyHideToToolbar=function(e,t,i){for(var n=!e,o=t;o<=i;o++){var a=void 0,s=this.propertyToolbar&&this.propertyToolbar.element?this.propertyToolbar.element:null,r=this.toolbar&&this.toolbar.element?this.toolbar.element:null;if(r&&r.children&&r.children.length>0?a=this.toolbar:sf.base.Browser.isDevice&&s&&s.children&&s.children.length>0&&(a=this.propertyToolbar),a.items[o]){var l=a.items[o].cssClass;if(l&&""!==l){var d=a.element.querySelector("."+l);d&&this.toolbar.hideItem(d,n)}else a.hideItem(o,n)}}},e.prototype.adjustViewer=function(e){var t,i,n;t=this.pdfViewer.element.querySelector(".e-pv-sidebar-toolbar-splitter"),i=this.pdfViewer.element.querySelector(".e-pv-toolbar");var o=this.pdfViewer.element.querySelector(".e-pv-annotation-toolbar");n=this.getToolbarHeight(o);var a=this.getToolbarHeight(i),s=this.pdfViewerBase.navigationPane.sideBarToolbar,r=this.pdfViewerBase.navigationPane.sideBarContentContainer,l=this.pdfViewerBase.navigationPane.commentPanelContainer,d=this.pdfViewerBase.navigationPane.commentPanelResizer,h="";e?(this.pdfViewer.enableToolbar?(s.style.top=a+n+"px",r.style.top=a+n+"px",t.style.top=a+n+"px",l.style.top=a+n+"px",d.style.top=a+n+"px"):(s.style.top=n+"px",r.style.top=n+"px",t.style.top=n+"px",l.style.top=n+"px",d.style.top=a+n+"px"),this.pdfViewer.enableToolbar||(a=0),this.pdfViewerBase.viewerContainer.style.height=this.updateViewerHeight(this.getElementHeight(this.pdfViewerBase.viewerContainer),n+a)+"px",h=this.getNavigationToolbarHeight(n+a),s.style.height=h,t.style.height=h,d.style.height=h,r.style.height=h):(this.pdfViewer.enableToolbar?(s.style.top=a+"px",r.style.top=a+"px",t.style.top=a+"px",l.style.top=a+"px",d.style.top=a+"px"):(s.style.top="1px",s.style.height="100%",r.style.top="1px",r.style.height="100%",t.style.top="1px",t.style.height="100%",l.style.top="1px",l.style.height="100%",d.style.top="1px",d.style.height="100%"),this.pdfViewer.enableToolbar||(a=0),this.pdfViewerBase.viewerContainer.style.height=this.updateViewerHeight(this.getElementHeight(this.pdfViewerBase.viewerContainer),a)+"px",h=this.getNavigationToolbarHeight(a),s.style.height=h,t.style.height=h,d.style.height=h,r.style.height=h,"0px"===this.pdfViewerBase.viewerContainer.style.height&&(this.pdfViewerBase.viewerContainer.style.height=parseInt(this.pdfViewer.element.style.height)-parseInt(s.style.top)+"px"))},e.prototype.getToolbarHeight=function(e){var t=e.getBoundingClientRect().height;return 0===t&&e===this.pdfViewerBase.getElement("_toolbarContainer")&&(t=parseFloat(window.getComputedStyle(e).height)+this.toolbarBorderHeight),t},e.prototype.getNavigationToolbarHeight=function(e){var t=this.pdfViewer.element.getBoundingClientRect().height;return 0!==t?t-e+"px":""},e.prototype.deselectAllItemsInBlazor=function(){this.pdfViewerBase.isTextMarkupAnnotationModule()&&(this.pdfViewer.annotationModule.textMarkupAnnotationModule.isTextMarkupAnnotationMode=!1,this.pdfViewer.annotationModule.textMarkupAnnotationModule.showHideDropletDiv(!0)),sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode||(this.primaryToolbar.deSelectItem(this.HighlightElement),this.primaryToolbar.deSelectItem(this.UnderlineElement),this.primaryToolbar.deSelectItem(this.StrikethroughElement),this.primaryToolbar.deSelectItem(this.FreeTextElement),this.primaryToolbar.deSelectItem(this.InkAnnotationElement),this.pdfViewer._dotnetInstance.invokeMethodAsync("UpdateTextMarkupButtons",!1,!1,!1)),this.resetFreeTextAnnot(),this.clearTextMarkupMode(),this.clearShapeMode(),this.clearMeasureMode(),this.pdfViewer.tool="",sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode||(this.enableTextMarkupAnnotationPropertiesTools(!1),this.enableFreeTextAnnotationPropertiesTools(!1),this.updateColorInIcon(this.colorDropDownElementInBlazor,"#000000"),this.updateColorInIcon(this.strokeDropDownElementInBlazor,"#000000"),this.updateColorInIcon(this.fontColorElementInBlazor,"#000000"),this.selectAnnotationDeleteItem(!1)),this.pdfViewer.annotationModule&&(this.pdfViewer.annotationModule.freeTextAnnotationModule.isNewFreeTextAnnot=!1)},e.prototype.updateInteractionTools=function(){this.pdfViewer.enableTextSelection?(this.pdfViewerBase.initiateTextSelectMode(),sf.base.Browser.isDevice||this.pdfViewer.toolbar.updateInteractionTools(!0)):sf.base.Browser.isDevice||this.pdfViewer.toolbar.updateInteractionTools(!1)},e.prototype.selectAnnotationDeleteItem=function(e,t){if(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode){if(e){var i=this.pdfViewer.annotationModule.findCurrentAnnotation();i&&(i.annotationSettings&&i.annotationSettings.isLock?this.pdfViewer.annotationModule.checkAllowedInteractions("Delete",i)?this.pdfViewerBase.blazorUIAdaptor.EnableDeleteOption(e):this.pdfViewerBase.blazorUIAdaptor.EnableDeleteOption(!1):this.pdfViewerBase.blazorUIAdaptor&&this.pdfViewerBase.blazorUIAdaptor.EnableDeleteOption(e))}else this.pdfViewerBase.blazorUIAdaptor&&this.pdfViewerBase.blazorUIAdaptor.EnableDeleteOption(e);t&&this.pdfViewerBase.focusViewerContainer()}},e.prototype.enableTextMarkupAnnotationPropertiesTools=function(e){sf.base.Browser.isDevice||this.pdfViewerBase.blazorUIAdaptor.enableTextMarkupAnnotationPropertiesTools(e)},e.prototype.checkAnnotationPropertiesChange=function(){var e=this.pdfViewer.selectedItems.annotations[0];if(e&&e.annotationSettings&&e.annotationSettings.isLock)return!!this.pdfViewer.annotationModule.checkAllowedInteractions("PropertyChange",e);return!0},e.prototype.enableAnnotationPropertiesTools=function(e){if(!sf.base.Browser.isDevice){var t=this.checkAnnotationPropertiesChange();e||(t=!0),this.pdfViewerBase.blazorUIAdaptor.enableAnnotationPropertiesTool(e,t)}},e.prototype.enableSignaturePropertiesTools=function(e){if(!sf.base.Browser.isDevice){var t=this.checkAnnotationPropertiesChange();e||(t=!0),this.pdfViewerBase.blazorUIAdaptor.enableSignaturePropertiesTools(e,t)}},e.prototype.enableStampAnnotationPropertiesTools=function(e){var t=this.checkAnnotationPropertiesChange();e||(t=!0),this.pdfViewerBase.blazorUIAdaptor.enableStampAnnotationPropertiesTools(e,t)},e.prototype.enableFreeTextAnnotationPropertiesTools=function(e){var t=this.checkAnnotationPropertiesChange();e||(t=!0),this.pdfViewerBase.blazorUIAdaptor.enableFreeTextAnnotationPropertiesTools(e,t)},e.prototype.enableAnnotationAddTools=function(e){this.toolbar&&!sf.base.Browser.isDevice&&(this.pdfViewer.enableTextMarkupAnnotation&&(this.toolbar.enableItems(this.highlightItem.parentElement,e),this.toolbar.enableItems(this.underlineItem.parentElement,e),this.toolbar.enableItems(this.strikethroughItem.parentElement,e)),this.pdfViewer.enableShapeAnnotation&&this.toolbar.enableItems(this.shapeElement.parentElement,e),this.pdfViewer.enableStampAnnotations&&this.toolbar.enableItems(this.stampElement.parentElement,e),this.pdfViewer.enableMeasureAnnotation&&this.pdfViewerBase.isCalibrateAnnotationModule()&&this.toolbar.enableItems(this.calibrateElement.parentElement,e),this.pdfViewer.enableFreeText&&this.toolbar.enableItems(this.freeTextEditItem.parentElement,e),this.pdfViewer.enableHandwrittenSignature&&this.toolbar.enableItems(this.handWrittenSignatureItem.parentElement,e),this.pdfViewer.enableInkAnnotation&&this.toolbar.enableItems(this.inkAnnotationItem.parentElement,e),this.pdfViewer.enableCommentPanel&&this.enableCommentPanelTool(e))},e.prototype.isAnnotationButtonsEnabled=function(){var e=!1;return(this.isHighlightEnabled||this.isUnderlineEnabled||this.isStrikethroughEnabled)&&(e=!0),e},e.prototype.enableCommentPanelTool=function(e){this.toolbar&&this.toolbar.enableItems(this.commentItem.parentElement,e)},e.prototype.updateToolbarItems=function(){this.pdfViewer.enableTextMarkupAnnotation?this.enableTextMarkupAddTools(!0):this.enableTextMarkupAddTools(!1),this.toolbar.enableItems(this.shapeElement.parentElement,this.pdfViewer.enableShapeAnnotation),this.toolbar.enableItems(this.stampElement.parentElement,this.pdfViewer.enableStampAnnotations),this.toolbar.enableItems(this.calibrateElement.parentElement,this.pdfViewer.enableMeasureAnnotation),this.toolbar.enableItems(this.freeTextEditItem.parentElement,this.pdfViewer.enableFreeText),this.toolbar.enableItems(this.handWrittenSignatureItem.parentElement,this.pdfViewer.enableHandwrittenSignature),this.toolbar.enableItems(this.inkAnnotationItem.parentElement,this.pdfViewer.enableInkAnnotation)},e.prototype.enableTextMarkupAddTools=function(e){this.toolbar.enableItems(this.highlightItem.parentElement,e),this.toolbar.enableItems(this.underlineItem.parentElement,e),this.toolbar.enableItems(this.strikethroughItem.parentElement,e)},e.prototype.updateAnnnotationPropertyItems=function(){this.colorDropDownElementInBlazor=this.pdfViewer.element.querySelector(".e-pv-annotation-color-container"),this.strokeDropDownElementInBlazor=this.pdfViewer.element.querySelector(".e-pv-annotation-stroke-container"),this.fontColorElementInBlazor=this.pdfViewer.element.querySelector(".e-pv-annotation-textcolor-container"),1===this.pdfViewer.selectedItems.annotations.length?(this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.colorDropDownElementInBlazor,this.getColorHexValue(this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.fill,"fillColor")),this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.strokeDropDownElementInBlazor,this.getColorHexValue(this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeColor,"strokeColor")),"FreeText"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&(this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.fontColorElementInBlazor,this.getColorHexValue(this.pdfViewer.selectedItems.annotations[0].fontColor,"fontColor")),this.pdfViewerBase.blazorUIAdaptor.updateFontFamilyInIcon(this.pdfViewer.selectedItems.annotations[0].fontFamily),this.pdfViewerBase.blazorUIAdaptor.updateFontSizeInIcon(this.pdfViewer.selectedItems.annotations[0].fontSize))):(this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.colorDropDownElementInBlazor,"#000000"),this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.strokeDropDownElementInBlazor,"#000000"),this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.fontColorElementInBlazor,"#000000"))},e.prototype.getColorHexValue=function(e,t){return"#ffffff00"===e&&(e="#ffffff"),"red"===e.toLowerCase()&&(e="#FF0000"),"transparent"!==e?e:"fontColor"===t||"strokeColor"===t?"#000000":"#ffffff"},e.prototype.resetToolbar=function(){this.adjustViewer(!1),this.updateToolbarItems(),(this.pdfViewer.isAnnotationToolbarOpen||this.pdfViewer.isAnnotationToolbarVisible)&&this.pdfViewer.enableAnnotationToolbar?(this.toolbarElement.style.display="",this.isToolbarHidden=!1,this.adjustViewer(!0),this.enableAnnotationAddTools(!1),this.pdfViewer.isAnnotationToolbarVisible=!0):(this.toolbarElement.style.display="none",this.isToolbarHidden=!0,this.pdfViewer.isAnnotationToolbarVisible=!1)},e.prototype.clearTextMarkupMode=function(){this.pdfViewerBase.isTextMarkupAnnotationModule()&&(this.pdfViewer.annotationModule.textMarkupAnnotationModule.isTextMarkupAnnotationMode=!1,this.pdfViewer.annotation.textMarkupAnnotationModule.currentTextMarkupAddMode="")},e.prototype.clearShapeMode=function(){this.pdfViewerBase.isShapeAnnotationModule()&&(this.pdfViewer.annotation.shapeAnnotationModule.currentAnnotationMode="")},e.prototype.clearMeasureMode=function(){this.pdfViewerBase.isCalibrateAnnotationModule()&&(this.pdfViewer.annotation.measureAnnotationModule.currentAnnotationMode="")},e.prototype.getElementHeight=function(e){try{return e.getBoundingClientRect().height}catch(e){return 0}},e.prototype.updateViewerHeight=function(e,t){return this.getElementHeight(this.pdfViewer.element)-t},e.prototype.resetViewerHeight=function(e,t){return e+t},e.prototype.afterAnnotationToolbarCreationInBlazor=function(){this.HighlightElement=document.getElementById(this.pdfViewer.dataId+"_highLight").children[0],this.UnderlineElement=document.getElementById(this.pdfViewer.dataId+"_underline").children[0],this.StrikethroughElement=document.getElementById(this.pdfViewer.dataId+"_strikethrough").children[0],this.InkAnnotationElement=document.getElementById(this.pdfViewer.dataId+"_annotation_ink").children[0],this.InkAnnotationElement.classList.add("e-pv-tbar-btn"),this.FreeTextElement=document.getElementById(this.pdfViewer.dataId+"_annotation_freeTextEdit").children[0],this.HighlightElement=this.addClassToToolbarInBlazor(this.HighlightElement,"e-pv-highlight","_highLight"),this.UnderlineElement=this.addClassToToolbarInBlazor(this.UnderlineElement,"e-pv-underline","_underline"),this.StrikethroughElement=this.addClassToToolbarInBlazor(this.StrikethroughElement,"e-pv-strikethrough","_strikethrough")},e.prototype.addClassToToolbarInBlazor=function(e,t,i){if(e.classList.add(t),e.classList.add("e-pv-tbar-btn"),e.childNodes.length>0){var n=e.childNodes[0];n&&n.classList&&(n.id=this.pdfViewer.dataId+i+"Icon",n.classList.remove("e-icons"),n.classList.remove("e-btn-icon"),this.pdfViewer.enableRtl&&n.classList.add("e-right"))}return e},e.prototype.handleHighlightInBlazor=function(){this.HighlightElement.classList.contains("e-pv-select")?this.primaryToolbar.deSelectItem(this.HighlightElement):this.HighlightElement.classList.contains("e-pv-select")||this.primaryToolbar.selectItem(this.HighlightElement),this.StrikethroughElement.classList.contains("e-pv-select")&&this.primaryToolbar.deSelectItem(this.StrikethroughElement),this.UnderlineElement.classList.contains("e-pv-select")&&this.primaryToolbar.deSelectItem(this.UnderlineElement)},e.prototype.handleUnderlineInBlazor=function(){this.UnderlineElement.classList.contains("e-pv-select")?this.primaryToolbar.deSelectItem(this.UnderlineElement):this.UnderlineElement.classList.contains("e-pv-select")||this.primaryToolbar.selectItem(this.UnderlineElement),this.StrikethroughElement.classList.contains("e-pv-select")&&this.primaryToolbar.deSelectItem(this.StrikethroughElement),this.HighlightElement.classList.contains("e-pv-select")&&this.primaryToolbar.deSelectItem(this.HighlightElement)},e.prototype.handleStrikethroughInBlazor=function(){this.StrikethroughElement.classList.contains("e-pv-select")?this.primaryToolbar.deSelectItem(this.StrikethroughElement):this.StrikethroughElement.classList.contains("e-pv-select")||this.primaryToolbar.selectItem(this.StrikethroughElement),this.HighlightElement.classList.contains("e-pv-select")&&this.primaryToolbar.deSelectItem(this.HighlightElement),this.UnderlineElement.classList.contains("e-pv-select")&&this.primaryToolbar.deSelectItem(this.UnderlineElement)},e.prototype.AnnotationSliderOpened=function(){if(this.pdfViewer.selectedItems.annotations&&this.pdfViewer.selectedItems.annotations.length>0&&this.pdfViewer.selectedItems.annotations[0]){if(this.pdfViewer.selectedItems.annotations[0].wrapper&&this.pdfViewer.selectedItems.annotations[0].wrapper.children[0]){var e=100*this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.opacity,t=this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeWidth;this.pdfViewer._dotnetInstance.invokeMethodAsync("UpdateAnnotationSlider",e,t)}}else if(this.pdfViewer.annotationModule.textMarkupAnnotationModule&&this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation){var i=100*this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation.opacity;this.pdfViewer._dotnetInstance.invokeMethodAsync("UpdateAnnotationOpacity",i)}},e.prototype.DropDownOpened=function(e){if(e&&e[0].element){var t=e[0].element.getBoundingClientRect(),i=this.pdfViewerBase.navigationPane.sideBarToolbar,n=i?i.getBoundingClientRect().width:0;t.left>this.pdfViewerBase.viewerContainer.clientWidth+t.width+n&&(e[0].element.style.left=t.left-this.pdfViewerBase.viewerContainer.clientHeight/2+"px")}},e.prototype.annotatioToolbarClick=function(e,t,i,n){e&&this.resetFreeTextAnnot(),t&&("Highlight"===n?this.handleHighlightInBlazor():"Underline"===n?this.handleUnderlineInBlazor():"Strikethrough"===n&&this.handleStrikethroughInBlazor()),i?this.clearTextMarkupMode():this.pdfViewer.annotationModule.setAnnotationMode(n)},e}(),rt=function(){function e(e,t){var i=this;this.childNavigateCount=0,this.bookmarkClick=function(e){if(e.event.target.classList.contains("e-icons"))i.childNavigateCount++;else{var t=e.data.Id;i.childNavigateCount=0,i.pdfViewerBase.navigationPane.goBackToToolbar();var n=i.bookmarkList.getSelectedItems();i.navigateToBookmark(t,e.text,n.data.FileName)}return!1},this.nodeClick=function(e){i.setHeight(e.node);var t=Number(e.nodeData.id),n=i.treeObj.getTreeData(e.node);if(i.navigateToBookmark(t,e.node.textContent,n[0].FileName),i.pdfViewer.annotationModule&&i.pdfViewer.annotationModule.inkAnnotationModule){var o=parseInt(i.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber);i.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(o)}return!1},this.bookmarkPanelBeforeOpen=function(e){if(i.pdfViewer.enableBookmarkStyles)for(var t=0;t<i.bookmarkStyles.length;t++)if(e.text.trim()===i.bookmarkStyles[t].Text.trim()){var n=e.node.lastElementChild;if(n){for(var o=i.bookmarkStyles[t].FontStyle.split(","),a=0;a<o.length;a++)switch(o[a].trim()){case"Italic":n.style.fontStyle="italic";break;case"Bold":n.style.fontWeight="Bold"}var s=n.getElementsByClassName("e-pv-bookmark-title")[0];s?s.style.color=i.bookmarkStyles[t].Color:n.children[0].style.color=i.bookmarkStyles[t].Color}break}},this.pdfViewer=e,this.pdfViewerBase=t}return e.prototype.createRequestForBookmarks=function(){var e=this,t={hashId:this.pdfViewerBase.hashId,action:"Bookmarks",elementId:this.pdfViewer.dataId,uniqueId:this.pdfViewerBase.documentId};this.pdfViewerBase.jsonDocumentId&&(t.documentId=this.pdfViewerBase.jsonDocumentId),this.pdfViewer.enableBookmarkStyles&&(t.bookmarkStyles=this.pdfViewer.enableBookmarkStyles),this.bookmarkRequestHandler=new xe(this.pdfViewer),this.bookmarkRequestHandler.url=e.pdfViewer.serviceUrl+"/Bookmarks",this.bookmarkRequestHandler.responseType="json",this.bookmarkRequestHandler.send(t),this.bookmarkRequestHandler.onSuccess=function(t){e.pdfViewerBase.navigationPane&&e.pdfViewerBase.navigationPane.disableBookmarkButton();var n=t.data;if(n){if("object"!==i(n))try{n=JSON.parse(n)}catch(t){e.pdfViewerBase.onControlError(500,n,"Bookmarks"),n=null}if(n&&n.uniqueId===e.pdfViewerBase.documentId){e.pdfViewer.fireAjaxRequestSuccess("Bookmarks",n),e.bookmarks={bookMark:n.Bookmarks},e.bookmarkStyles=n.Bookmarkstyles,e.bookmarksDestination={bookMarkDestination:n.BookmarksDestination};var o={bookmarks:e.bookmarks,bookmarksDestination:e.bookmarksDestination};e.pdfViewer&&e.pdfViewer._dotnetInstance&&e.pdfViewer._dotnetInstance.invokeMethodAsync("UpdateBookmarkCollection",o)}}e.pdfViewerBase.navigationPane&&(null==e.bookmarks?(e.pdfViewerBase.navigationPane.disableBookmarkButton(),e.pdfViewer._dotnetInstance&&e.pdfViewer._dotnetInstance.invokeMethodAsync("UpdateBookmarkCollection",null)):(e.isBookmarkViewDiv=!1,e.pdfViewer.isBookmarkPanelOpen&&e.pdfViewerBase.navigationPane.openBookmarkcontentInitially()))},this.bookmarkRequestHandler.onFailure=function(t){e.pdfViewer.fireAjaxRequestFailed(t.status,t.statusText,"Bookmarks")},this.bookmarkRequestHandler.onError=function(t){e.pdfViewerBase.openNotificationPopup(),e.pdfViewer.fireAjaxRequestFailed(t.status,t.statusText,"Bookmarks")}},e.prototype.renderBookmarkcontent=function(){var e=this;if(!this.isBookmarkViewDiv){this.bookmarkView=this.pdfViewer.element.querySelector(".e-pv-bookmark-view"),this.pdfViewerBase.navigationPane.sideBarContent.appendChild(this.bookmarkView);var t=sf.base.createElement("div",{id:this.pdfViewer.dataId+"_bookmark_iconview",className:"e-pv-bookmark-icon-view"});if(this.pdfViewer.enableRtl){i=sf.base.createElement("span",{id:this.pdfViewer.dataId+"_bookmark_icon",className:"e-pv-bookmark-icon e-pv-icon e-right"});t.appendChild(i)}else{var i=sf.base.createElement("span",{id:this.pdfViewer.dataId+"_bookmark_icon",className:"e-pv-bookmark-icon e-pv-icon"});t.appendChild(i)}var n=sf.base.createElement("div",{id:this.pdfViewer.dataId+"_bookmark_Title",className:"e-pv-bookmark-title"});this.pdfViewer.enableRtl&&(n.style.paddingRight="26px"),n.innerText="${Title}",t.appendChild(n);for(var o=["mouseover","keydown"],a=0;a<o.length;a++)this.bookmarkView.addEventListener(o[a],(function(t){e.setHeight(t.target)}));this.isBookmarkViewDiv=!0}this.bookmarkView.style.display="block"},e.prototype.renderBookmarkContentMobile=function(){null!=this.bookmarkView&&this.bookmarkView.remove(),this.bookmarkView=sf.base.createElement("div",{id:this.pdfViewer.dataId+"_bookmark_view",className:"e-pv-bookmark-view"}),this.pdfViewerBase.getElement("_bookmarks_container").appendChild(this.bookmarkView),this.bookmarkList=new sf.lists.ListView({dataSource:this.bookmarks.bookMark,fields:{id:"Id",text:"Title",child:"Child"},showHeader:!1,select:this.bookmarkClick.bind(this)}),this.bookmarkList.isStringTemplate=!0,this.pdfViewer.enableRtl&&(this.bookmarkList.enableRtl=!0),this.bookmarkList.appendTo(this.bookmarkView)},e.prototype.setHeight=function(e){this.treeObj&&this.treeObj.fullRowSelect&&e.classList&&(e.classList.contains("e-treeview")?e=e.querySelector(".e-node-focus").querySelector(".e-fullrow"):e.classList.contains("e-list-parent")?e=e.querySelector(".e-fullrow"):"e-fullrow"!==e.classList.value&&(e.closest&&e.closest(".e-list-item")?e=e.closest(".e-list-item").querySelector(".e-fullrow"):e.classList.contains("e-list-item")?e=e.querySelector(".e-fullrow"):e.classList.contains("e-icons")&&e.classList.contains("interaction")&&e.parentElement.parentElement.classList.contains("e-list-item")&&(e=e.parentElement.parentElement.querySelector(".e-fullrow"))),e.nextElementSibling&&(e.style.height=e.nextElementSibling.offsetHeight+"px"))},e.prototype.setBookmarkContentHeight=function(){if(this.treeObj){var e=this.treeObj.element;this.treeObj.fullRowSelect&&(e.classList.contains("e-treeview")&&(e=e.querySelector(".e-node-focus").querySelector(".e-fullrow")),e.nextElementSibling&&(e.style.height=e.nextElementSibling.offsetHeight+"px"))}},e.prototype.bindBookmarkListViewEvent=function(){var e=document.getElementsByClassName("e-pv-bookmark-view");e&&e[0]&&e[0].children.length>0&&e[0].children[1]&&e[0].children[1].addEventListener("mousedown",this.bookmarkListClickEvent.bind(this))},e.prototype.bookmarkListClickEvent=function(e){var t=this;if(e.target&&!e.target.classList.contains("e-icons")&&e.target.parentElement.parentElement){var i=e.target.parentElement.parentElement.id.split("_")[1];this.pdfViewer&&this.pdfViewer._dotnetInstance&&this.pdfViewer._dotnetInstance.invokeMethodAsync("BookmarkViewClosed",null),this.closeBookmarkContainer(),setTimeout((function(){t.navigateToBookmark(i,e.target.innerHTML,t.pdfViewer.fileName)}),300)}},e.prototype.closeBookmarkContainer=function(){this.pdfViewerBase.getElement("_bookmarks_container")&&sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&(this.pdfViewerBase.mobileScrollerContainer.style.display="")},e.prototype.navigateToBookmark=function(e,t,i){if(this.bookmarksDestination.bookMarkDestination[e]){var n=this.bookmarksDestination.bookMarkDestination[e].PageIndex,o=this.bookmarksDestination.bookMarkDestination[e].Y;-1!==n&&this.goToBookmark(n,o),this.pdfViewer.fireBookmarkClick(-1!==n?n+1:n,o,t,i)}},e.prototype.getBookmarks=function(){if(this.bookmarks&&this.bookmarksDestination)return{bookmarks:this.bookmarks,bookmarksDestination:this.bookmarksDestination}},e.prototype.goToBookmark=function(e,t){var i=this.pdfViewerBase.pageSize[e].height,n=(0===t?this.pdfViewerBase.pageSize[e].top*this.pdfViewerBase.getZoomFactor():this.pdfViewerBase.pageSize[e].top*this.pdfViewerBase.getZoomFactor()+(i-t)*this.pdfViewerBase.getZoomFactor()).toString();return this.pdfViewerBase.viewerContainer.scrollTop=parseInt(n),sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&(this.pdfViewerBase.mobileScrollerContainer.style.display="",this.pdfViewerBase.updateMobileScrollerPosition()),this.pdfViewerBase.focusViewerContainer(),!1},e.prototype.clear=function(){this.pdfViewerBase.navigationPane&&(this.pdfViewerBase.navigationPane.disableBookmarkButton(),this.pdfViewerBase.navigationPane.updateViewerContainerOnClose()),this.bookmarks&&(this.bookmarks.bookMark=[],this.bookmarks=null),this.bookmarksDestination&&(this.bookmarksDestination.bookMarkDestination=[]),this.bookmarkRequestHandler&&this.bookmarkRequestHandler.clear()},e.prototype.destroy=function(){this.clear()},e.prototype.getModuleName=function(){return"BookmarkView"},e}(),lt=function(){function e(e,t){var i=this;this.isTextSelection=!1,this.selectionStartPage=null,this.isBackwardPropagatedSelection=!1,this.contextMenuHeight=144,this.selectionRangeArray=[],this.selectionAnchorTouch=null,this.selectionFocusTouch=null,this.scrollMoveTimer=0,this.isMouseLeaveSelection=!1,this.isTouchSelection=!1,this.previousScrollDifference=0,this.topStoreLeft=null,this.topStoreRight=null,this.isTextSearched=!1,this.isSelectionStartTriggered=!1,this.onLeftTouchSelectElementTouchStart=function(e){i.initiateSelectionByTouch()},this.onRightTouchSelectElementTouchStart=function(e){i.initiateSelectionByTouch()},this.onLeftTouchSelectElementTouchEnd=function(e){i.terminateSelectionByTouch(e)},this.onRightTouchSelectElementTouchEnd=function(e){i.terminateSelectionByTouch(e)},this.onLeftTouchSelectElementTouchMove=function(e){var t;e.preventDefault(),e.target.style.zIndex="0";var n=i.dropDivElementRight,o=i.isTouchedWithinContainer(e);if(n&&o){var a=n.getBoundingClientRect(),s=e.changedTouches[0].clientX,r=e.changedTouches[0].clientY;if(e.target.style.zIndex="1000",t=i.getNodeElement(void 0,s,r,e,t)){var l=Math.sqrt((r-a.top)*(r-a.top)+(s-a.left)*(s-a.left)),d=i.isCloserTouchScroll(l),h=!1;if(r<=a.top?(i.dropElementLeft.style.transform="rotate(0deg)",i.dropElementRight.style.transform="rotate(-90deg)",h=i.selectTextByTouch(t.parentElement,s,r,!1,"left",d)):(i.dropElementLeft.style.transform="rotate(-90deg)",i.dropElementRight.style.transform="rotate(0deg)",h=i.selectTextByTouch(t.parentElement,s,r,!0,"left",d)),h){var p=i.dropDivElementLeft.getBoundingClientRect(),c=i.pdfViewerBase.pageSize[i.pdfViewerBase.currentPageNumber-1].top,u=i.getClientValueTop(r,i.pdfViewerBase.currentPageNumber-1),f=s-i.pdfViewerBase.getElement("_pageDiv_"+(i.pdfViewerBase.currentPageNumber-1)).getBoundingClientRect().left;i.dropDivElementLeft.style.top=c*i.pdfViewerBase.getZoomFactor()+u+"px",i.topStoreLeft={pageTop:c,topClientValue:i.getMagnifiedValue(u),pageNumber:i.pdfViewerBase.currentPageNumber-1,left:i.getMagnifiedValue(f),isHeightNeeded:!1},i.dropDivElementLeft.style.left=s-i.pdfViewerBase.viewerContainer.getBoundingClientRect().left-p.width/2+"px",i.previousScrollDifference=l}}}},this.onRightTouchSelectElementTouchMove=function(e){var t;e.preventDefault(),e.target.style.zIndex="0";var n=i.dropDivElementLeft,o=i.isTouchedWithinContainer(e);if(n&&o){var a=n.getBoundingClientRect(),s=e.changedTouches[0].clientX,r=e.changedTouches[0].clientY;if(e.target.style.zIndex="1000",t=i.getNodeElement(void 0,s,r,e,t)){var l=Math.sqrt((r-a.top)*(r-a.top)+(s-a.left)*(s-a.left)),d=i.isCloserTouchScroll(l),h=!1;if(r>=a.top?(i.dropElementRight.style.transform="rotate(-90deg)",i.dropElementLeft.style.transform="rotate(0deg)",h=i.selectTextByTouch(t.parentElement,s,r,!0,"right",d)):(i.dropElementRight.style.transform="rotate(0deg)",i.dropElementLeft.style.transform="rotate(-90deg)",h=i.selectTextByTouch(t.parentElement,s,r,!1,"right",d)),h){var p=i.pdfViewerBase.pageSize[i.pdfViewerBase.currentPageNumber-1].top,c=i.getClientValueTop(r,i.pdfViewerBase.currentPageNumber-1),u=i.dropDivElementRight.getBoundingClientRect();i.dropDivElementRight.style.top=p*i.pdfViewerBase.getZoomFactor()+c+"px";var f=s-i.pdfViewerBase.getElement("_pageDiv_"+(i.pdfViewerBase.currentPageNumber-1)).getBoundingClientRect().left;i.topStoreRight={pageTop:p,topClientValue:i.getMagnifiedValue(c),pageNumber:i.pdfViewerBase.currentPageNumber-1,left:i.getMagnifiedValue(f),isHeightNeeded:!1},i.dropDivElementRight.style.left=s-i.pdfViewerBase.viewerContainer.getBoundingClientRect().left-u.width/2+"px",i.previousScrollDifference=l}}}},this.pdfViewer=e,this.pdfViewerBase=t}return e.prototype.textSelectionOnMouseMove=function(e,t,i,n){var o=e;if(this.isTextSearched=!0,o.nodeType===o.TEXT_NODE){this.isSelectionStartTriggered||this.pdfViewerBase.getTextMarkupAnnotationMode()||(this.pdfViewer.fireTextSelectionStart(this.pdfViewerBase.currentPageNumber),this.isSelectionStartTriggered=!0),this.isBackwardPropagatedSelection=!1;var a=o.ownerDocument.createRange(),s=window.getSelection();if(null!==s.anchorNode){var r=s.anchorNode.compareDocumentPosition(s.focusNode);(!r&&s.anchorOffset>s.focusOffset||r===Node.DOCUMENT_POSITION_PRECEDING)&&(this.isBackwardPropagatedSelection=!0)}a.selectNodeContents(o);for(var l=0,d=a.endOffset;l<d;){a.setStart(o,l),a.setEnd(o,l+1);var h=(w=a.getBoundingClientRect()).right;if(n&&(h=parseInt(w.right.toString())),w.left<=t&&h>=t&&parseInt(w.top.toString())<=i&&w.bottom>=i)null!==s.anchorNode&&s.anchorNode.parentNode.classList.contains("e-pv-text")&&a.setStart(s.anchorNode,s.anchorOffset),s.removeAllRanges(),s.addRange(a),this.isTextSelection||(this.selectionStartPage=this.pdfViewerBase.currentPageNumber-1),this.isTextSelection=!0,!!document.documentMode||(this.isBackwardPropagatedSelection||n?s.extend(o,l):s.extend(o,l+1)),a.detach();l+=1}var p=this.pdfViewer.annotationModule;if(p&&p.textMarkupAnnotationModule&&p.textMarkupAnnotationModule.isEnableTextMarkupResizer(p.textMarkupAnnotationModule.currentTextMarkupAddMode)){var c=document.getElementById(this.pdfViewer.dataId+"_droplet_left");if(this.pdfViewerBase.isSelection&&s&&s.rangeCount>0){var u=s.getRangeAt(0).getBoundingClientRect(),f=u.left,g=u.top;this.pdfViewer.annotation.textMarkupAnnotationModule.updateLeftposition(f,g),this.pdfViewerBase.isSelection=!1}else c&&"none"===c.style.display&&this.pdfViewer.annotation.textMarkupAnnotationModule.updateLeftposition(t,i);this.pdfViewer.annotation.textMarkupAnnotationModule.updatePosition(t,i)}}else for(var m=0;m<o.childNodes.length;m++){var w;if(o.childNodes[m].nodeType===o.TEXT_NODE)(w=(a=this.getSelectionRange(m,o)).getBoundingClientRect()).left<=t&&w.right>=parseInt(t.toString())&&parseInt(w.top.toString())<=i&&w.bottom>=i?(a.detach(),this.textSelectionOnMouseMove(o.childNodes[m],t,i,n)):a.detach()}},e.prototype.textSelectionOnDrag=function(e,t,i,n){var o=e;if(this.isTextSearched=!0,o.nodeType===o.TEXT_NODE){this.isBackwardPropagatedSelection=!1;var a=o.ownerDocument.createRange(),s=window.getSelection();if(null!==s.anchorNode){var r=s.anchorNode.compareDocumentPosition(s.focusNode);(!r&&s.anchorOffset>s.focusOffset||r===Node.DOCUMENT_POSITION_PRECEDING)&&(this.isBackwardPropagatedSelection=!0)}a.selectNodeContents(o);for(var l=0,d=a.endOffset;l<d;){if(a.setStart(o,l),a.setEnd(o,l+1),(f=a.getBoundingClientRect()).left<=t&&f.right>=t&&parseInt(f.top.toString())<=i&&f.bottom>=i)return n?(null!==s.anchorNode&&s.anchorNode.parentNode.classList.contains("e-pv-text")&&a.setStart(s.anchorNode,s.anchorOffset),s.removeAllRanges(),s.addRange(a),s.extend(o,l)):s.focusNode&&(a.setEnd(s.focusNode,s.focusOffset),s.removeAllRanges(),s.addRange(a)),this.isTextSelection||(this.selectionStartPage=this.pdfViewerBase.currentPageNumber-1),this.isTextSelection=!0,a.detach(),!0;l+=1}if(this.pdfViewerBase.isSelection){var h=s.getRangeAt(0).getBoundingClientRect(),p=h.left,c=h.top;this.pdfViewer.annotation.textMarkupAnnotationModule.updateLeftposition(p,c),this.pdfViewerBase.isSelection=!1}this.pdfViewer.annotation.textMarkupAnnotationModule.updatePosition(t,i)}else for(var u=0;u<o.childNodes.length;u++){var f;if(o.childNodes[u].nodeType===o.TEXT_NODE)(f=(a=this.getSelectionRange(u,o)).getBoundingClientRect()).left<=t&&f.right>=t&&parseInt(f.top.toString())<=i&&f.bottom>=i?(a.detach(),this.textSelectionOnDrag(o.childNodes[u],t,i,n)):a.detach()}return null},e.prototype.selectTextRegion=function(e,t){for(var i=null,n=e-1,o=0;o<t.length;o++){var a=t[o],s=(a.left?a.left:a.Left)*this.pdfViewerBase.getZoomFactor(),r=(a.top?a.top:a.Top)*this.pdfViewerBase.getZoomFactor(),l=(a.width?a.width:a.Width)*this.pdfViewerBase.getZoomFactor(),d=(a.height?a.height:a.Height,this.pdfViewerBase.getElement("_textLayer_"+n));if(d){for(var h=d.childNodes,p=0;p<h.length;p++)if(h[p]){var c=h[p].getBoundingClientRect(),u=this.getClientValueTop(c.top,n),f=c.left-this.pdfViewerBase.getElement("_pageDiv_"+n).getBoundingClientRect().left,g=f+c.width,m=parseInt(h[p].style.left),w=parseInt(h[p].style.top),y=this.checkLeftBounds(f,m,g,s),S=this.checkTopBounds(u,w,r);if(y&&S){i=h[p];break}}if(null!=i){var v=this.pdfViewerBase.getElement("_textLayer_"+n).getBoundingClientRect();this.textSelectionOnMouseMove(i,s+v.left,r+v.top,!1),t.length-1===o&&this.textSelectionOnMouseMove(i,s+v.left+l,r+v.top,!1)}}}},e.prototype.checkLeftBounds=function(e,t,i,n){var o=!1;return(e===parseInt(n.toString())||parseInt(e.toString())===parseInt(n.toString())||e+1===parseInt(n.toString())||e-1===parseInt(n.toString())||t===parseInt(n.toString())||t===n||i>=n&&e<=n)&&(o=!0),o},e.prototype.checkTopBounds=function(e,t,i){var n=!1;return e!==parseInt(i.toString())&&parseInt(e.toString())!==parseInt(i.toString())&&parseInt((e+1).toString())!==parseInt(i.toString())&&parseInt((e-1).toString())!==parseInt(i.toString())&&t!==parseInt(i.toString())&&t!==i||(n=!0),n},e.prototype.textSelectionOnMouseLeave=function(e){var t=this;e.preventDefault();var i=this.pdfViewerBase.viewerContainer.offsetTop;this.pdfViewer.magnificationModule&&"fitToPage"===this.pdfViewer.magnificationModule.fitType||(e.clientY>i?this.scrollMoveTimer=setInterval((function(){t.scrollForwardOnSelection()}),500):this.scrollMoveTimer=setInterval((function(){t.scrollBackwardOnSelection()}),500))},e.prototype.scrollForwardOnSelection=function(){this.isMouseLeaveSelection=!0,this.pdfViewerBase.viewerContainer.scrollTop=this.pdfViewerBase.viewerContainer.scrollTop+200,this.stichSelectionOnScroll(this.pdfViewerBase.currentPageNumber-1)},e.prototype.scrollBackwardOnSelection=function(){this.isMouseLeaveSelection=!0,this.pdfViewerBase.viewerContainer.scrollTop=this.pdfViewerBase.viewerContainer.scrollTop-200,this.stichSelectionOnScroll(this.pdfViewerBase.currentPageNumber-1)},e.prototype.clear=function(){this.scrollMoveTimer&&(this.isMouseLeaveSelection=!1,clearInterval(this.scrollMoveTimer))},e.prototype.selectAWord=function(e,t,i,n){if(e.nodeType===e.TEXT_NODE){var o=window.getSelection();(f=e.ownerDocument.createRange()).selectNodeContents(e);for(var a=0,s=f.endOffset;a<s;){if(f.setStart(e,a),f.setEnd(e,a+1),(g=f.getBoundingClientRect()).left<=t&&g.right>=t&&g.top<=i&&g.bottom>=i){for(var r=e.textContent,l=[],d=void 0,h=void 0,p=0;p<r.length;p++)" "===r[p]&&l.push(p);for(var c=0;c<l.length;c++){if(a===l[c]&&(d=l[c],h=l[c]),l[0]>a){d=0,h=l[c];break}a>l[c]&&a<l[c+1]?(d=l[c],h=l[c+1]):a>l[c]&&(l[c+1]||(d=l[c]))}h||(h=r.length),0===d?f.setStart(e,d):f.setStart(e,d+1),f.setEnd(e,h),o.removeAllRanges(),o.addRange(f),this.isTextSelection=!0;var u=sf.base.isNullOrUndefined(f.startContainer.parentElement)?f.startContainer.parentNode:f.startContainer.parentElement;this.selectionStartPage=parseInt(u.id.split("_text_")[1]),n&&(this.selectionAnchorTouch={anchorNode:o.anchorNode.parentElement.id,anchorOffset:o.anchorOffset},this.selectionFocusTouch={focusNode:o.focusNode.parentElement.id,focusOffset:o.focusOffset}),sf.base.Browser.isIE||f.detach();break}a+=1}}else for(p=0;p<e.childNodes.length;p++){var f,g;(g=(f=this.getSelectionRange(p,e)).getBoundingClientRect()).left<=t&&g.right>=t&&g.top<=i&&g.bottom>=i?(f.detach(),this.selectAWord(e.childNodes[p],t,i,n)):f.detach()}},e.prototype.getSelectionRange=function(e,t){var i=t.childNodes[e].ownerDocument.createRange();return i.selectNodeContents(t.childNodes[e]),i},e.prototype.selectEntireLine=function(e){var t=[],i=e.target,n=i.getBoundingClientRect(),o=parseInt((n.top+n.height/2).toString()),a=parseInt(e.target.id.split("_text_")[1]),s=document.querySelectorAll('div[id*="'+this.pdfViewer.dataId+"_text_"+a+'"]');if(i.classList.contains("e-pv-text")){this.pdfViewer.fireTextSelectionStart(a+1);for(var r=0;r<s.length;r++){var l=s[r].getBoundingClientRect(),d=parseInt(l.top.toString()),h=parseInt(l.bottom.toString());if(d<=o&&h>o&&n.bottom+10>h){var p=s[r].id;""!==p&&t.push(p)}}var c=window.getSelection();c.removeAllRanges();var u=document.createRange(),f=t.length-1,g=document.getElementById(t[0]),m=document.getElementById(t[f]);m.childNodes.length>0?(u.setStart(g.childNodes[0],0),u.setEnd(m.childNodes[0],m.textContent.length)):(u.setStart(g.childNodes[0],0),u.setEnd(m,1)),this.selectionStartPage=parseInt(u.startContainer.parentElement.id.split("_text_")[1]),c.addRange(u),this.isTextSelection=!0,null!=c&&"MouseUp"===this.pdfViewer.contextMenuSettings.contextMenuAction&&this.calculateContextMenuPosition(e.clientY,e.clientY)}},e.prototype.enableTextSelectionMode=function(){this.pdfViewerBase.isTextSelectionDisabled=!1,this.pdfViewerBase.viewerContainer.classList.remove("e-disable-text-selection"),this.pdfViewerBase.viewerContainer.classList.add("e-enable-text-selection"),this.pdfViewerBase.viewerContainer.addEventListener("selectstart",(function(){return!0}))},e.prototype.clearTextSelection=function(){if(this.isTextSelection){if(this.pdfViewerBase.textLayer.clearDivSelection(),window.getSelection&&window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges(),this.pdfViewer.linkAnnotationModule){var e=this.pdfViewerBase.currentPageNumber-3;e=e<0?0:e;var t=this.pdfViewer.currentPageNumber+1;t=t<this.pdfViewerBase.pageCount-1?t:this.pdfViewerBase.pageCount-1;for(var i=e;i<=t;i++)this.pdfViewer.linkAnnotationModule.modifyZindexForTextSelection(i,!1)}this.pdfViewer.annotation&&this.pdfViewer.annotation.textMarkupAnnotationModule&&this.pdfViewer.annotation.textMarkupAnnotationModule.showHideDropletDiv(!0),this.selectionRangeArray=[],this.isTextSelection=!1,this.isTouchSelection=!1,this.pdfViewer.textSearchModule&&this.pdfViewer.textSearchModule.searchAfterSelection(),this.pdfViewerBase.contextMenuModule.close(),this.removeTouchElements()}},e.prototype.removeTouchElements=function(){this.dropDivElementLeft&&(this.dropDivElementLeft.parentElement.removeChild(this.dropDivElementLeft),this.dropDivElementLeft=null,this.dropElementLeft.style.transform="rotate(0deg)"),this.dropDivElementRight&&(this.dropDivElementRight.parentElement.removeChild(this.dropDivElementRight),this.dropDivElementRight=null,this.dropElementRight.style.transform="rotate(-90deg)")},e.prototype.resizeTouchElements=function(){var e=this.pdfViewerBase.viewerContainer.getBoundingClientRect().left;if(this.dropDivElementLeft){var t=this.dropDivElementLeft.getBoundingClientRect(),i=0,n=this.pdfViewerBase.getElement("_pageDiv_"+this.topStoreLeft.pageNumber).getBoundingClientRect();this.dropDivElementLeft.style.left=parseFloat(this.topStoreLeft.left.toString())*this.pdfViewerBase.getZoomFactor()+n.left-e-t.width/2+"px",this.topStoreLeft.isHeightNeeded&&(i=t.height/2*this.pdfViewerBase.getZoomFactor()),this.dropDivElementLeft.style.top=parseFloat(this.topStoreLeft.pageTop.toString())*this.pdfViewerBase.getZoomFactor()+parseFloat(this.topStoreLeft.topClientValue.toString())*this.pdfViewerBase.getZoomFactor()+i+"px"}if(this.dropDivElementRight){t=this.dropDivElementRight.getBoundingClientRect(),i=0;var o=this.pdfViewerBase.getElement("_pageDiv_"+this.topStoreRight.pageNumber).getBoundingClientRect();this.dropDivElementRight.style.left=parseFloat(this.topStoreRight.left.toString())*this.pdfViewerBase.getZoomFactor()+o.left-e-t.width/2+"px",this.topStoreRight.isHeightNeeded&&(i=t.height/2*this.pdfViewerBase.getZoomFactor()),this.dropDivElementRight.style.top=parseFloat(this.topStoreRight.pageTop.toString())*this.pdfViewerBase.getZoomFactor()+parseFloat(this.topStoreRight.topClientValue.toString())*this.pdfViewerBase.getZoomFactor()+i+"px"}},e.prototype.textSelectionOnMouseup=function(e){if(this.clear(),null!==window.getSelection().anchorNode){if(this.isMouseLeaveSelection=!1,this.isSelectionStartTriggered=!1,this.maintainSelectionOnZoom(!0,!1),this.fireTextSelectEnd(),this.pdfViewerBase.textLayer.getTextSearchStatus()){this.pdfViewerBase.textLayer.clearDivSelection();for(var t=this.pdfViewer.textSearchModule.getIndexes(),i=parseFloat(t.lowerPageValue.toString()),n=parseFloat(t.higherPageValue.toString()),o=i;o<n;o++)this.applySelectionRangeOnScroll(o);this.pdfViewer.textSearchModule.searchAfterSelection()}else this.applySpanForSelection();this.pdfViewer.linkAnnotationModule&&this.pdfViewer.linkAnnotationModule.modifyZindexForTextSelection(this.pdfViewerBase.currentPageNumber-1,!1),this.isTextSearched&&"MouseUp"===this.pdfViewer.contextMenuSettings.contextMenuAction&&(this.calculateContextMenuPosition(e.clientY,e.clientX),this.isTextSearched=!1)}else this.pdfViewerBase.textLayer.clearDivSelection(),this.pdfViewer.textSearchModule&&this.pdfViewer.textSearchModule.searchAfterSelection(),this.pdfViewerBase.contextMenuModule.close(),this.removeTouchElements()},e.prototype.fireTextSelectEnd=function(){if(0!==this.selectionRangeArray.length){for(var e=0,t="",i=[],n=0;n<this.selectionRangeArray.length;n++){t+=this.selectionRangeArray[n].textContent;for(var o=0;o<this.selectionRangeArray[n].rectangleBounds.length;o++){var a=this.selectionRangeArray[n].rectangleBounds[o];i.push({left:a.left,right:a.right,top:a.top,bottom:a.bottom,width:a.width,height:a.height,pageIndex:this.selectionRangeArray[n].pageNumber+1})}this.selectionRangeArray[n].isBackward&&0===n?e=this.selectionRangeArray[n].pageNumber+1:this.selectionRangeArray[n].isBackward||n!==this.selectionRangeArray.length-1||(e=this.selectionRangeArray[n].pageNumber+1)}this.pdfViewer.fireTextSelectionEnd(e,t,i)}},e.prototype.maintainSelectionOnZoom=function(e,t){var i=window.getSelection();if("Range"===i.type||!i.type&&!i.isCollapsed){var n=this.pdfViewerBase.textLayer.isBackWardSelection(i);if(null!==i.anchorNode){var o=parseInt(this.getNodeElementFromNode(i.anchorNode).id.split("_text_")[1]),a=parseInt(this.getNodeElementFromNode(i.focusNode).id.split("_text_")[1]);if(this.isTouchSelection&&isNaN(a))if(i.focusNode===this.pdfViewerBase.pageContainer){var s=this.pdfViewerBase.pageContainer.lastChild;s.classList.contains("e-pv-touch-select-drop")?a=parseInt(s.previousSibling.previousSibling.id.split("_pageDiv_")[1]):s.classList.contains("e-pv-page-div")&&(a=parseInt(s.id.split("_pageDiv_")[1]))}if(n)for(r=o;r>=a;r--)this.maintainSelectionOnScroll(r,t);else for(var r=o;r<=a;r++)this.maintainSelectionOnScroll(r,t)}e||i.removeAllRanges()}},e.prototype.isSelectionAvailableOnScroll=function(e){for(var t=!1,i=this.selectionRangeArray,n=0;n<i.length;n++)if(null!==i[n]&&e===i[n].pageNumber){t=!0,this.isTouchSelection&&!this.pdfViewerBase.getMagnified()&&(t=!1);break}return t},e.prototype.applySelectionRangeOnScroll=function(e){this.isMouseLeaveSelection?this.applySelectionMouseScroll(e):this.applySelectionRange(e)},e.prototype.getSelectionRangeFromArray=function(e){for(var t=!1,i=null,n=this.selectionRangeArray,o=0;o<n.length;o++)if(null!==n[o]&&e===n[o].pageNumber){i=n[o],t=!0;break}return{isSelectionAvailable:t,selectionRange:i}},e.prototype.applySelectionRange=function(e){var t=this.getSelectionRangeFromArray(e),i=t.isSelectionAvailable,n=document.getElementById(this.pdfViewer.dataId+"_textLayer_"+e);if(n&&i&&0!==n.childNodes.length){var o=t.selectionRange,a=void 0,s=void 0,r=void 0,l=void 0;if(o.isBackward){var d=parseInt(o.endNode.split("_text_")[1].split("_")[1]),h=parseInt(o.startNode.split("_text_")[1].split("_")[1]);d<h?(a=d,r=o.endOffset,l=o.startOffset,s=h):(a=h,r=o.endOffset,s=d,l=o.startOffset)}else a=parseInt(o.startNode.split("text_")[1].split("_")[1]),s=parseInt(o.endNode.split("text_")[1].split("_")[1]),r=o.startOffset,l=o.endOffset;window.getSelection().removeAllRanges(),this.pdfViewerBase.textLayer.applySpanForSelection(e,e,a,s,r,l),this.pdfViewer.textSearchModule&&this.pdfViewer.textSearchModule.searchAfterSelection()}},e.prototype.applySelectionMouseScroll=function(e){var t=this.getSelectionRangeFromArray(e);if(t.isSelectionAvailable){var i=t.selectionRange,n=window.getSelection(),o=document.getElementById(i.startNode).childNodes[0],a=document.getElementById(i.endNode).childNodes[0],s=document.createRange();if(null===n.anchorNode)i.isBackward?(s.setStart(a,i.endOffset),s.setEnd(o,i.startOffset)):(s.setStart(o,i.startOffset),s.setEnd(a,i.endOffset));else{var r=isNaN(parseInt(n.anchorNode.parentElement.id.split("_text_")[1]))?parseInt(n.anchorNode.id.split("_pageDiv_")[1]):parseInt(n.anchorNode.parentElement.id.split("_text_")[1]);isNaN(r)&&(r=parseInt(n.anchorNode.id.split("_text_")[1]));var l=isNaN(parseInt(n.focusNode.parentElement.id.split("_text_")[1]))?parseInt(n.focusNode.id.split("_pageDiv_")[1]):parseInt(n.focusNode.parentElement.id.split("_text_")[1]),d=parseInt(i.startNode.split("_text_")[1]);if(r===l&&r===d)i.isBackward?(s.setStart(a,i.endOffset),s.setEnd(o,i.startOffset)):(s.setStart(o,i.startOffset),s.setEnd(a,i.endOffset));else if(isNaN(r))isNaN(r)&&(i.isBackward?(s.setStart(a,i.endOffset),s.setEnd(o,i.startOffset)):(s.setStart(o,i.startOffset),s.setEnd(a,i.endOffset)));else if(isNaN(r)||i.isBackward){var h=this.pdfViewerBase.textLayer.isBackWardSelection(n);if(r>d&&d>l&&r!==l)h?n.extend(n.focusNode,n.focusOffset):(s.setStart(n.anchorNode,n.anchorOffset),s.setEnd(n.focusNode,n.focusOffset));else if(r<d&&d<l&&r!==l)h?n.extend(n.focusNode,n.focusOffset):(s.setStart(n.anchorNode,n.anchorOffset),s.setEnd(n.focusNode,n.focusOffset));else if(r<d)h?d!==this.selectionRangeArray[0].pageNumber?this.extendCurrentSelection(a.parentElement,i.endOffset,n,s):this.extendCurrentSelection(o.parentElement,i.startOffset,n,s):d!==this.selectionRangeArray[0].pageNumber?(s.setStart(n.anchorNode,n.anchorOffset),s.setEnd(a,i.endOffset)):(s.setStart(n.anchorNode,n.anchorOffset),s.setEnd(o,i.startOffset));else if(r===d)d===l?(s.setStart(o,i.startOffset),s.setEnd(o,i.startOffset),n.removeAllRanges(),n.addRange(s),s=document.createRange(),n.extend(a,i.endOffset)):h?this.extendCurrentSelection(a.parentElement,i.endOffset,n,s):(s.setStart(a,i.endOffset),s.setEnd(n.focusNode,n.focusOffset));else if(l===d)h?n.extend(n.focusNode,n.focusOffset):(s.setStart(n.anchorNode,n.anchorOffset),s.setEnd(n.focusNode,n.focusOffset));else if(r>d){var p=parseInt(i.startNode.split("_"+d+"_")[1]),c=parseInt(i.endNode.split("_"+d+"_")[1]);h?d!==this.selectionRangeArray[0].pageNumber?p<c?this.extendCurrentSelection(o.parentElement,i.startOffset,n,s):(s.setStart(a.parentElement,i.endOffset),s.setEnd(n.anchorNode,n.anchorOffset)):this.extendCurrentSelection(a.parentElement,i.endOffset,n,s):p<c?(s.setStart(o,i.startOffset),s.setEnd(n.focusNode,n.focusOffset)):(s.setStart(a,i.endOffset),s.setEnd(n.focusNode,n.focusOffset))}}else r<d&&d<l&&r!==l?(s.setStart(n.anchorNode,n.anchorOffset),s.setEnd(n.focusNode,n.focusOffset)):r<d?(s.setStart(n.anchorNode,n.anchorOffset),s.setEnd(a,i.endOffset)):(s.setStart(o,i.startOffset),s.setEnd(n.focusNode,n.focusOffset))}""!==s.toString()&&(n.removeAllRanges(),n.addRange(s))}},e.prototype.maintainSelectionOnScroll=function(e,t){var i=this.isSelectionAvailableOnScroll(e);this.isTextSelection&&!i&&this.maintainSelection(e,t)},e.prototype.maintainSelection=function(e,t){var i=window.getSelection();if(this.isTextSelection&&("Range"===i.type||!i.type&&!i.isCollapsed)){var n=parseInt(this.getNodeElementFromNode(i.anchorNode).id.split("_text_")[1]),o=parseInt(this.getNodeElementFromNode(i.focusNode).id.split("_text_")[1]);if(isNaN(o)&&null!==i.anchorNode)if(this.pdfViewerBase.textLayer.isBackWardSelection(i))o=parseInt(this.pdfViewerBase.pageContainer.firstChild.id.split("_pageDiv_")[1]);else{var a=this.pdfViewerBase.pageContainer.lastChild;o=a.classList.contains("e-pv-touch-select-drop")?parseInt(a.previousSibling.previousSibling.id.split("_pageDiv_")[1]):parseInt(a.id.split("_pageDiv_")[1])}var s=this.pdfViewerBase.textLayer.isBackWardSelection(i);if(this.isTouchSelection&&e>o&&e>n)return;if(n===o){var r=null,l=this.getSelectionBounds(i.getRangeAt(0),e),d=this.getSelectionRectangleBounds(i.getRangeAt(0),e),h=1===this.getNodeElementFromNode(i.anchorNode).childNodes.length?i.anchorOffset:this.getCorrectOffset(i.anchorNode,i.anchorOffset),p=1===this.getNodeElementFromNode(i.focusNode).childNodes.length?i.focusOffset:this.getCorrectOffset(i.focusNode,i.focusOffset);r={isBackward:s,startNode:this.getNodeElementFromNode(i.anchorNode).id,startOffset:h,endNode:this.getNodeElementFromNode(i.focusNode).id,endOffset:p,textContent:i.toString(),pageNumber:e,bound:l,rectangleBounds:d},this.pushSelectionRangeObject(r,e)}else{(r=this.createRangeObjectOnScroll(e,n,o))&&(this.pushSelectionRangeObject(r,e),t&&this.stichSelection(s,i,e))}}},e.prototype.getCorrectOffset=function(e,t){for(var i=0,n=this.getNodeElementFromNode(e),o=0;o<n.childNodes.length;o++){if(n.childNodes[o]===e){i+=t;break}i+=n.childNodes[o].textContent.length}return i},e.prototype.pushSelectionRangeObject=function(e,t){if(this.isTouchSelection){var i=this.selectionRangeArray.filter((function(e){return e.pageNumber===t}));if(i.length>0){var n=this.selectionRangeArray.indexOf(i[0]);return void this.selectionRangeArray.splice(n,1,e)}}var o=this.selectionRangeArray.filter((function(e){return e.pageNumber===t+1}));if(0===o.length)if(this.isTouchSelection&&0!==this.selectionRangeArray.length){var a=this.selectionRangeArray.filter((function(e){return e.pageNumber===t-1}));if(0!==a.length){var s=this.selectionRangeArray.indexOf(a[0]);this.selectionRangeArray.splice(s+1,0,e)}else{var r=this.selectionRangeArray[0];t<r.pageNumber?this.selectionRangeArray.splice(0,0,e):this.selectionRangeArray.push(e)}}else this.selectionRangeArray.push(e);else{var l=this.selectionRangeArray.indexOf(o[0]);this.selectionRangeArray.splice(l,0,e)}},e.prototype.extendCurrentSelection=function(e,t,i,n){var o=i.focusOffset,a=i.focusNode.parentElement.id,s=isNaN(parseInt(a.split("_text_")[1]))?parseInt(i.focusNode.id.split("_pageDiv_")[1]):parseInt(a.split("_text_")[1]);isNaN(parseInt(a.split("_text_")[1]))&&(a=this.pdfViewerBase.getElement("_textLayer_"+(s+1)).firstChild.id),n.setStart(e.childNodes[0],t),n.setEnd(e.childNodes[0],t),i.removeAllRanges(),i.addRange(n),i.extend(document.getElementById(a).childNodes[0],o)},e.prototype.stichSelection=function(e,t,i){var n,o=document.createRange();if(e)if(n=document.getElementById(this.pdfViewer.dataId+"_textLayer_"+(i-1))){(a=n.lastChild)||(a=(n=document.getElementById(this.pdfViewer.dataId+"_textLayer_"+(i-2))).lastChild),this.extendCurrentSelection(a,this.getTextLastLength(a),t,o)}else{var a=(n=document.getElementById(this.pdfViewer.dataId+"_textLayer_"+(i+1))).firstChild;this.extendCurrentSelection(a,0,t,o)}else if(n=document.getElementById(this.pdfViewer.dataId+"_textLayer_"+(i+1))){var s=n.firstChild;s||(s=(n=document.getElementById(this.pdfViewer.dataId+"_textLayer_"+(i+2))).firstChild),o.setStart(s.childNodes[0],0),o.setEnd(t.focusNode,t.focusOffset),t.removeAllRanges(),t.addRange(o)}},e.prototype.textSelectionOnMouseWheel=function(e){this.isMouseLeaveSelection=!0,this.stichSelectionOnScroll(e)},e.prototype.stichSelectionOnScroll=function(e){var t=window.getSelection();if(this.isTextSelection){var i,n=parseInt(this.getNodeElementFromNode(t.anchorNode).id.split("_text_")[1]),o=parseInt(this.getNodeElementFromNode(t.focusNode).id.split("_text_")[1]),a=void 0;if(n!==e&&o!==e)if(this.pdfViewerBase.textLayer.isBackWardSelection(t)){if(a=document.getElementById(this.pdfViewer.dataId+"_textLayer_"+(e-1)))(i=a.firstChild)&&this.extendSelectionStich(i.childNodes[0],0,t)}else if(a=document.getElementById(this.pdfViewer.dataId+"_textLayer_"+(e-1)))if(i=a.lastChild)i.childNodes[0]?this.extendSelectionStich(i.childNodes[0],this.getTextLastLength(i),t):this.extendSelectionStich(i,this.getTextLastLength(i),t);else{var s=(a=this.pdfViewerBase.getElement("_textLayer_"+e)).firstChild;this.extendSelectionStich(s.childNodes[0],0,t)}this.maintainSelectionArray()}},e.prototype.extendSelectionStich=function(e,t,i){i.extend&&i.extend(e,t)},e.prototype.createRangeObjectOnScroll=function(e,t,i){var n=window.getSelection();if(null!==n.anchorNode){var o=this.pdfViewerBase.textLayer.isBackWardSelection(n),a=void 0,s=void 0,r=void 0,l=void 0,d=document.getElementById(this.pdfViewer.dataId+"_textLayer_"+e);if(d.childNodes){if(o)e===t?(a=this.getNodeElementFromNode(n.anchorNode),s=d.firstChild,r=this.getCorrectOffset(n.anchorNode,n.anchorOffset),l=0):e<t&&e>i?(a=d.firstChild,s=d.lastChild,r=0,l=this.getTextLastLength(s)):e===i&&(a=this.getNodeElementFromNode(n.focusNode),s=d.lastChild,r=this.getCorrectOffset(n.focusNode,n.focusOffset),l=this.getTextLastLength(s));else if(e===t)a=this.getNodeElementFromNode(n.anchorNode),s=d.lastChild,r=this.getCorrectOffset(n.anchorNode,n.anchorOffset),l=this.getTextLastLength(s);else if(e>t&&e<i)a=d.firstChild,s=d.lastChild,r=0,l=this.getTextLastLength(s);else if(e===i){a=d.firstChild,-1!==this.getNodeElementFromNode(n.focusNode).id.indexOf(i.toString())?(s=this.getNodeElementFromNode(n.focusNode),l=this.getCorrectOffset(n.focusNode,n.focusOffset)):(s=document.getElementById(this.pdfViewer.dataId+"_textLayer_"+i).lastChild,l=this.getTextLastLength(s)),r=0}if(a&&s){var h=this.getSelectionRangeObject(a.id,r,s.id,l,e),p=h.toString(),c=this.getSelectionBounds(h,e),u=this.getSelectionRectangleBounds(h,e);return{isBackward:o,startNode:a.id,startOffset:r,endNode:s.id,endOffset:l,textContent:p,pageNumber:e,bound:c,rectangleBounds:u}}return null}}return null},e.prototype.getSelectionRangeObject=function(e,t,i,n,o){var a=document.getElementById(e),s=document.getElementById(i);a.childNodes[0]&&(a=a.childNodes[0]),s.childNodes[0]&&(s=s.childNodes[0]);var r=parseInt(e.split("_"+o+"_")[1]),l=parseInt(i.split("_"+o+"_")[1]),d=document.createRange();return r<=l?(d.setStart(a,t),d.setEnd(s,n)):(d.setStart(s,n),d.setEnd(a,t)),d},e.prototype.getSelectionBounds=function(e,t){var i=null;if(this.getNodeElementFromNode(e.startContainer)!==this.getNodeElementFromNode(e.endContainer)){var n=document.createRange(),o=this.createRangeForSelection(e.startContainer,e.endContainer,e.startOffset,e.endOffset,n);i=this.normalizeBounds(o.getBoundingClientRect(),t)}else i=this.normalizeBounds(e.getBoundingClientRect(),t);return i},e.prototype.getSelectionRectangleBounds=function(e,t){var i=[],n=null;if(this.getNodeElementFromNode(e.startContainer)!==this.getNodeElementFromNode(e.endContainer))for(var o=0,a=0,s=this.pdfViewerBase.textLayer.getPageIndex(e.startContainer),r=this.pdfViewerBase.textLayer.getTextIndex(e.startContainer,s),l=this.pdfViewerBase.textLayer.getPageIndex(e.endContainer),d=this.pdfViewerBase.textLayer.getTextIndex(e.endContainer,l),h=this.pdfViewerBase.getElement("_textLayer_"+l).childNodes,p=t===s?r:0;p<h.length;p++){var c=h[p];if(o=p===r?e.startOffset:0,a=p===d?e.endOffset:c.textContent.length,0!==o||0!==a){for(var u=document.createRange(),f=0;f<c.childNodes.length;f++){var g=c.childNodes[f];u.setStart(g,o),u.setEnd(g,a)}var m=this.normalizeBounds(u.getBoundingClientRect(),t);if(i.push(m),u.detach(),p===d)break}}else n=this.normalizeBounds(e.getBoundingClientRect(),t),i.push(n);return i},e.prototype.getTextId=function(e){var t=e.lastIndexOf("_"),i=e.substring(t+1,e.length);return parseInt(i)},e.prototype.normalizeBounds=function(e,t){var i=this.pdfViewerBase.getElement("_pageDiv_"+t);if(this.pdfViewerBase.isMixedSizeDocument){var n=this.pdfViewerBase.getElement("_textLayer_"+t);n&&(i=n)}var o=i.getBoundingClientRect();return{x:this.getMagnifiedValue(e.left-o.left),y:this.getMagnifiedValue(e.top-o.top),bottom:this.getMagnifiedValue(e.bottom-o.top),height:this.getMagnifiedValue(e.height),left:this.getMagnifiedValue(e.left-o.left),top:this.getMagnifiedValue(e.top-o.top),right:this.getMagnifiedValue(e.right-o.left),width:this.getMagnifiedValue(e.width)}},e.prototype.getMagnifiedValue=function(e){return e/this.pdfViewerBase.getZoomFactor()},e.prototype.getCurrentSelectionBounds=function(e){for(var t=null,i=this.selectionRangeArray,n=0;n<i.length;n++)null!==i[n]&&e===i[n].pageNumber&&(t=i[n].bound);return t},e.prototype.createRangeForSelection=function(e,t,i,n,o){return o.setStart(e,i),o.setEnd(t,n),o},e.prototype.maintainSelectionArray=function(){var e=this;if(0!==this.selectionRangeArray.length){var t=window.getSelection(),i=this.pdfViewerBase.textLayer.isBackWardSelection(t),n=isNaN(parseInt(this.getNodeElementFromNode(t.anchorNode).id.split("_text_")[1]))?parseInt(t.anchorNode.id.split("_pageDiv_")[1]):parseInt(this.getNodeElementFromNode(t.anchorNode).id.split("_text_")[1]);isNaN(n)&&(n=parseInt(t.anchorNode.id.split("_text_")[1]));var o=isNaN(parseInt(this.getNodeElementFromNode(t.focusNode).id.split("_text_")[1]))?parseInt(t.focusNode.id.split("_pageDiv_")[1]):parseInt(this.getNodeElementFromNode(t.focusNode).id.split("_text_")[1]);isNaN(o)&&(o=isNaN(parseInt(t.focusNode.id.split("_text_")[1]))?parseInt(t.focusNode.id.split("_textLayer_")[1]):parseInt(t.focusNode.id.split("_text_")[1]));var a=[];if((a=i?this.selectionRangeArray.filter((function(t){return!(o<t.pageNumber&&t.pageNumber<=e.selectionStartPage)})):this.selectionRangeArray.filter((function(t){return!(e.selectionStartPage<=t.pageNumber&&t.pageNumber<o)}))).length>0){for(var s=0;s<a.length;s++){var r=this.selectionRangeArray.indexOf(a[s]);-1!==r&&this.selectionRangeArray.splice(r,1)}1===this.selectionRangeArray.length&&(this.selectionRangeArray[0].pageNumber!==n&&this.selectionRangeArray[0].pageNumber!==o||(a=[]))}}},e.prototype.applySpanForSelection=function(){var e=window.getSelection();if(e.anchorNode!==e.focusNode||e.anchorOffset!==e.focusOffset||e.isCollapsed||e.removeAllRanges(),null!==e.anchorNode&&this.pdfViewerBase.viewerContainer.contains(this.getNodeElementFromNode(e.anchorNode))){var t=void 0,i=void 0,n=void 0,o=void 0,a=void 0,s=void 0;if(this.pdfViewerBase.textLayer.isBackWardSelection(e))t=parseInt(this.getNodeElementFromNode(e.focusNode).id.split("_text_")[1]),i=parseInt(this.getNodeElementFromNode(e.anchorNode).id.split("_text_")[1]),n=parseInt(this.getNodeElementFromNode(e.focusNode).id.split("_text_")[1].split("_")[1]),o=parseInt(this.getNodeElementFromNode(e.anchorNode).id.split("_text_")[1].split("_")[1]),a=e.focusOffset,s=e.anchorOffset;else{var r=this.getNodeElementFromNode(e.anchorNode),l=this.getNodeElementFromNode(e.focusNode);t=-1!==r.id.indexOf("text_")?parseInt(r.id.split("text_")[1]):parseInt(r.id.split("_textLayer_")[1]),i=-1!==l.id.indexOf("text_")?parseInt(l.id.split("text_")[1]):parseInt(l.id.split("_textLayer_")[1]);var d=!1;if(this.isTouchSelection&&e.focusNode===this.pdfViewerBase.pageContainer){var h=this.pdfViewerBase.pageContainer.lastChild;if(h.classList.contains("e-pv-touch-select-drop")){var p=h.previousSibling.previousSibling;i=parseInt(p.id.split("_pageDiv_")[1]),l=this.pdfViewerBase.getElement("_textLayer_"+i).lastChild,d=!0}else if(h.classList.contains("e-pv-page-div")){p=h;i=parseInt(p.id.split("_pageDiv_")[1]),l=this.pdfViewerBase.getElement("_textLayer_"+i).lastChild,d=!0}}r.classList.contains("e-pv-maintaincontent")&&(r=this.getNodeElementFromNode(r),t=parseInt(r.id.split("text_")[1])),l.classList.contains("e-pv-maintaincontent")&&(l=this.getNodeElementFromNode(l),i=parseInt(l.id.split("text_")[1])),t===i&&(r.contains(l)&&(r=l),l.contains(r)&&(l=r)),n=r.id.split("text_")[1]?parseInt(r.id.split("text_")[1].split("_")[1]):null,o=l.id.split("text_")[1]?parseInt(l.id.split("text_")[1].split("_")[1]):null,n=isNaN(n)?o:n,o=isNaN(o)?n:o,a=e.anchorOffset,s=d?l.textContent.length:e.focusOffset}this.pdfViewerBase.checkIsNormalText()&&(e.removeAllRanges(),this.pdfViewerBase.textLayer.clearDivSelection(),this.pdfViewerBase.textLayer.applySpanForSelection(t,i,n,o,a,s)),this.pdfViewer.textSearchModule&&this.pdfViewer.textSearchModule.searchAfterSelection()}},e.prototype.initiateTouchSelection=function(e,t,i){this.pdfViewerBase.isShapeBasedAnnotationsEnabled()&&this.pdfViewer.selectedItems.annotations.length>0&&this.pdfViewer.clearSelection(this.pdfViewer.selectedItems.annotations[0].pageIndex);var n=e.target,o=document.elementsFromPoint(e.touches[0].clientX,e.touches[0].clientY);0!==o.length&&o[0].classList.contains("e-pv-hyperlink")&&o[1].classList.contains("e-pv-text")&&(n=o[1]);var a=parseFloat(n.id.split("_")[2]);this.pdfViewer.fireTextSelectionStart(a+1),this.selectAWord(n,t,i,!0),this.createTouchSelectElement(e),this.maintainSelectionOnZoom(!0,!1),this.fireTextSelectEnd(),this.applySpanForSelection()},e.prototype.selectTextByTouch=function(e,t,i,n,o,a){var s=!1;if(e.nodeType===e.TEXT_NODE){var r=e.ownerDocument.createRange(),l=window.getSelection();r.selectNodeContents(e);for(var d=0,h=r.endOffset;d<h;){if(r.setStart(e,d),r.setEnd(e,d+1),(c=r.getBoundingClientRect()).left<=t&&c.right>=t&&c.top<=i&&c.bottom>=i)return null!=l.anchorNode&&(n&&r.setStart(l.anchorNode,l.anchorOffset),r=this.setTouchSelectionStartPosition(l,r,n,o,e,d,a),n&&l.extend(e,d),s=!0),r.detach(),s;d+=1}}else for(var p=0;p<e.childNodes.length;p++){var c,u=e.childNodes[p].ownerDocument.createRange();if(u.selectNodeContents(e.childNodes[p]),(c=u.getBoundingClientRect()).left<=t&&c.right>=t&&c.top<=i&&c.bottom>=i)return u.detach(),this.selectTextByTouch(e.childNodes[p],t,i,n,o,a);u.detach()}return s},e.prototype.setTouchSelectionStartPosition=function(e,t,i,n,o,a,s){if(i){if("left"===n){var r=this.getTouchFocusElement(e,!0);t.setStart(r.focusNode,r.focusOffset),t.setEnd(o,a),this.selectionAnchorTouch={anchorNode:t.endContainer.parentElement.id,anchorOffset:t.endOffset}}else if("right"===n){r=this.getTouchAnchorElement(e,!1);t.setStart(r.anchorNode,r.anchorOffset),t.setEnd(o,a),this.selectionFocusTouch={focusNode:t.endContainer.parentElement.id,focusOffset:t.endOffset}}}else if("left"===n)if(s)t.setStart(o,a),t.setEnd(e.focusNode,e.focusOffset),this.selectionAnchorTouch={anchorNode:t.startContainer.parentElement.id,anchorOffset:t.startOffset};else{r=this.getTouchFocusElement(e,!1);t.setStart(o,a),t.setEnd(r.focusNode,r.focusOffset),""===t.toString()&&(t.setStart(o,a),t.setEnd(e.focusNode,e.focusOffset)),this.selectionAnchorTouch={anchorNode:t.startContainer.parentElement.id,anchorOffset:t.startOffset}}else if("right"===n){r=this.getTouchAnchorElement(e,!0);t.setStart(o,a),t.setEnd(r.anchorNode,r.anchorOffset),""===t.toString()&&(t.setStart(r.anchorNode,r.anchorOffset),t.setEnd(o,a)),this.selectionFocusTouch={focusNode:t.startContainer.parentElement.id,focusOffset:t.startOffset}}return e.removeAllRanges(),e.addRange(t),t},e.prototype.getTouchAnchorElement=function(e,t){var i=document.getElementById(this.selectionAnchorTouch.anchorNode.toString()),n=null,o=0;return i?(n=i.childNodes[0],o=parseInt(this.selectionAnchorTouch.anchorOffset.toString())):t?(n=e.focusNode,o=e.focusOffset):(n=e.anchorNode,o=e.anchorOffset),{anchorNode:n,anchorOffset:o}},e.prototype.getTouchFocusElement=function(e,t){var i=document.getElementById(this.selectionFocusTouch.focusNode.toString()),n=null,o=0;return i?(n=i.childNodes[0],o=parseInt(this.selectionFocusTouch.focusOffset.toString())):t?(n=e.anchorNode,o=e.anchorOffset):(n=e.focusNode,o=e.focusOffset),{focusNode:n,focusOffset:o}},e.prototype.createTouchSelectElement=function(e){this.isTouchSelection=!0;var t=window.getSelection();if("Range"===t.type){this.dropDivElementLeft=sf.base.createElement("div",{id:this.pdfViewer.dataId+"_touchSelect_droplet_left",className:"e-pv-touch-select-drop"}),this.dropDivElementRight=sf.base.createElement("div",{id:this.pdfViewer.dataId+"_touchSelect_droplet_right",className:"e-pv-touch-select-drop"}),this.dropElementLeft=sf.base.createElement("div",{className:"e-pv-touch-ellipse"}),this.dropElementLeft.style.transform="rotate(0deg)",this.dropDivElementLeft.appendChild(this.dropElementLeft),this.dropElementRight=sf.base.createElement("div",{className:"e-pv-touch-ellipse"}),this.dropElementRight.style.transform="rotate(-90deg)",this.dropElementRight.style.margin="0 9px 0 0",this.dropDivElementRight.appendChild(this.dropElementRight),this.pdfViewerBase.pageContainer.appendChild(this.dropDivElementLeft),this.pdfViewerBase.pageContainer.appendChild(this.dropDivElementRight);var i=t.getRangeAt(0).getBoundingClientRect(),n=this.dropDivElementLeft.getBoundingClientRect(),o=this.pdfViewerBase.pageSize[this.pdfViewerBase.currentPageNumber-1].top,a=this.pdfViewerBase.viewerContainer.getBoundingClientRect().left,s=this.getClientValueTop(i.top,this.pdfViewerBase.currentPageNumber-1),r=s+o*this.pdfViewerBase.getZoomFactor()+n.height/2*this.pdfViewerBase.getZoomFactor()+"px";this.dropDivElementLeft.style.top=r,this.dropDivElementLeft.style.left=i.left-(a+n.width)+"px",this.dropDivElementRight.style.top=r,this.dropDivElementRight.style.left=i.left+i.width-a+"px";var l=this.pdfViewerBase.getElement("_pageDiv_"+(this.pdfViewerBase.currentPageNumber-1)).getBoundingClientRect().left,d=i.left-l;this.topStoreLeft={pageTop:o,topClientValue:this.getMagnifiedValue(s),pageNumber:this.pdfViewerBase.currentPageNumber-1,left:this.getMagnifiedValue(d),isHeightNeeded:!0},this.topStoreRight={pageTop:o,topClientValue:this.getMagnifiedValue(s),pageNumber:this.pdfViewerBase.currentPageNumber-1,left:this.getMagnifiedValue(d+i.width),isHeightNeeded:!0},this.dropDivElementLeft.addEventListener("touchstart",this.onLeftTouchSelectElementTouchStart),this.dropDivElementLeft.addEventListener("touchmove",this.onLeftTouchSelectElementTouchMove),this.dropDivElementLeft.addEventListener("touchend",this.onLeftTouchSelectElementTouchEnd),this.dropDivElementRight.addEventListener("touchstart",this.onRightTouchSelectElementTouchStart),this.dropDivElementRight.addEventListener("touchmove",this.onRightTouchSelectElementTouchMove),this.dropDivElementRight.addEventListener("touchend",this.onRightTouchSelectElementTouchEnd),this.pdfViewerBase.contextMenuModule.open(e.touches[0].clientX,e.touches[0].clientY,this.pdfViewerBase.viewerContainer)}},e.prototype.calculateContextMenuPosition=function(e,t){var i=this;if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){var n=e-this.contextMenuHeight;n<this.pdfViewerBase.toolbarHeight?e+=this.contextMenuHeight:e=n,e+this.contextMenuHeight>window.innerHeight&&(e-=this.contextMenuHeight)}"MouseUp"===this.pdfViewer.contextMenuSettings.contextMenuAction&&(t-=50);var o=this;setTimeout((function(){var n=document.getElementsByClassName("e-pv-maintaincontent")[0].getBoundingClientRect();if(n){e=n.bottom+o.contextMenuHeight+o.pdfViewerBase.toolbarHeight>window.innerHeight?n.top-(o.contextMenuHeight+o.pdfViewerBase.toolbarHeight-10):n.bottom+o.pdfViewerBase.toolbarHeight-10,t=n.left-35;var a=i.pdfViewer.toolbarModule?i.pdfViewer.toolbarModule.annotationToolbarModule:"null";a&&a.textMarkupToolbarElement&&0!==a.textMarkupToolbarElement.children.length||o.pdfViewerBase.contextMenuModule.open(e,t,o.pdfViewerBase.viewerContainer)}}))},e.prototype.initiateSelectionByTouch=function(){this.pdfViewerBase.textLayer.clearDivSelection(),this.pdfViewerBase.contextMenuModule.close();var e=this.pdfViewerBase.currentPageNumber-3;e=e<0?0:e;var t=this.pdfViewer.currentPageNumber+1;t=t<this.pdfViewerBase.pageCount-1?t:this.pdfViewerBase.pageCount-1;for(var i=e;i<=t;i++){var n=this.pdfViewerBase.getElement("_textLayer_"+i);n&&null!==n.childNodes&&this.applySelectionMouseScroll(i)}this.selectionRangeArray.length>0&&this.pdfViewer.fireTextSelectionStart(this.selectionRangeArray[0].pageNumber+1)},e.prototype.terminateSelectionByTouch=function(e){if(this.maintainSelectionOnZoom(!0,!1),this.applySpanForSelection(),this.pdfViewerBase.getTextMarkupAnnotationMode())this.pdfViewer.annotationModule.textMarkupAnnotationModule.drawTextMarkupAnnotations(this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode);else{this.fireTextSelectEnd();var t=e.changedTouches[0].clientY+e.currentTarget.clientHeight,i=this.getSpanBounds();t=i.bottom+this.contextMenuHeight+this.pdfViewerBase.toolbarHeight>window.innerHeight?i.top-(this.contextMenuHeight+this.pdfViewerBase.toolbarHeight):i.bottom+this.pdfViewerBase.toolbarHeight-10,this.pdfViewerBase.contextMenuModule.open(t,(i.right-i.left)/2,this.pdfViewerBase.viewerContainer)}},e.prototype.getSpanBounds=function(){var e=[],t=[],i=[],n=0,o=document.getElementsByClassName("e-pv-maintaincontent");if(o.length>0){for(var a=0;a<o.length;a++){var s=o[a].getBoundingClientRect();n+=s.height,e.push(s.width),t.push(s.right),i.push(s.left)}return{top:o[0].getBoundingClientRect().top,bottom:o[o.length-1].getBoundingClientRect().bottom,left:Math.min.apply(null,i),right:Math.max.apply(null,t),width:Math.max.apply(null,e),height:n}}},e.prototype.getNodeElement=function(e,t,i,n,o){if(document.caretRangeFromPoint)e=document.caretRangeFromPoint(t,i),o=this.onTouchElementScroll(e,o,i,n);else if(document.caretPositionFromPoint){var a=document.caretPositionFromPoint(t,i),s=document.caretPositionFromPoint(t,i);(e=document.createRange()).setStart(a.offsetNode,a.offset),e.setEnd(s.offsetNode,s.offset),o=this.onTouchElementScroll(e,o,i,n)}return o},e.prototype.isTouchedWithinContainer=function(e){var t=!1;return 0!==document.elementsFromPoint(e.touches[0].clientX,e.touches[0].clientY).length&&(t=!0),t},e.prototype.onTouchElementScroll=function(e,t,i,n){var o=this.pdfViewerBase.viewerContainer.scrollTop;if(null!=e){t=e.startContainer;var a=this.isScrolledOnScrollBar(n);this.pdfViewerBase.viewerContainer.contains(t.parentElement)&&!a||(i<this.pdfViewerBase.viewerContainer.clientHeight?this.pdfViewerBase.viewerContainer.scrollTop=o-30:this.pdfViewerBase.viewerContainer.scrollTop=o+30)}else i<this.pdfViewerBase.viewerContainer.clientHeight?this.pdfViewerBase.viewerContainer.scrollTop=o-30:this.pdfViewerBase.viewerContainer.scrollTop=o+30;return t},e.prototype.isCloserTouchScroll=function(e){var t=!1;return this.previousScrollDifference>e&&(t=!0),t},e.prototype.getClientValueTop=function(e,t){return this.pdfViewerBase.getElement("_pageDiv_"+t)?e-this.pdfViewerBase.getElement("_pageDiv_"+t).getBoundingClientRect().top:e},e.prototype.isScrolledOnScrollBar=function(e){var t=!1;return e.touches&&this.pdfViewerBase.viewerContainer.clientHeight+this.pdfViewerBase.viewerContainer.offsetTop<e.touches[0].clientY&&e.touches[0].clientY<this.pdfViewerBase.viewerContainer.offsetHeight+this.pdfViewerBase.viewerContainer.offsetTop&&(t=!0),t},e.prototype.getTextLastLength=function(e){return e?e.textContent.length:0},e.prototype.getNodeElementFromNode=function(e){return e.parentElement?e.parentElement:e.parentNode},e.prototype.copyText=function(){var e="";if(this.maintainSelectionOnZoom(!0,!1),this.selectionRangeArray.length>0)for(var t=0;t<this.selectionRangeArray.length;t++)e+=this.selectionRangeArray[t].textContent;if(e.length>0){this.pdfViewer.annotation&&(this.pdfViewer.annotation.isShapeCopied=!1);var i=document.createElement("textarea");i.contentEditable="true",i.textContent=e,this.pdfViewer.annotation&&this.pdfViewer.annotation.freeTextAnnotationModule&&(this.pdfViewer.annotation.freeTextAnnotationModule.selectedText=e),i.style.position="fixed",document.body.appendChild(i),i.select();try{document.execCommand("copy")}catch(e){console.warn("Copy to clipboard failed.",e)}finally{i&&document.body.removeChild(i)}}},e.prototype.destroy=function(){this.clear()},e.prototype.getModuleName=function(){return"TextSelection"},e}(),dt=function(){function e(e,t){var i=this;this.isTextSearch=!1,this.searchCount=0,this.searchIndex=0,this.currentSearchIndex=0,this.startIndex=null,this.searchPageIndex=null,this.searchString=null,this.isMatchCase=!1,this.searchRequestHandler=null,this.textContents=new Array,this.searchMatches=new Array,this.searchCollection=new Array,this.searchedPages=[],this.isPrevSearch=!1,this.tempElementStorage=new Array,this.isMessagePopupOpened=!1,this.isTextRetrieved=!1,this.isTextSearched=!1,this.isTextSearchEventTriggered=!1,this.isSearchText=!1,this.checkBoxOnChange=function(e){if(e.currentTarget&&e.currentTarget.checked?i.isMatchCase=!0:i.isMatchCase=!1,i.isTextSearch){i.resetVariables(),i.clearAllOccurrences();var t=i.searchInput.value;i.searchIndex=0,i.textSearch(t)}},this.searchKeypressHandler=function(e){i.enableNextButton(!0),i.enablePrevButton(!0),13===e.which?(i.initiateTextSearch(i.searchInput),i.updateSearchInputIcon(!1)):i.resetVariables()},this.searchClickHandler=function(e){i.searchButtonClick(i.searchBtn,i.searchInput)},this.nextButtonOnClick=function(e){i.nextSearch()},this.prevButtonOnClick=function(e){i.prevSearch()},this.pdfViewer=e,this.pdfViewerBase=t}return e.prototype.createTextSearchBox=function(){var e=this;this.searchBox=sf.base.createElement("div",{id:this.pdfViewer.dataId+"_search_box",className:"e-pv-search-bar"});var t=document.getElementById("toolbarContainer");t&&(this.searchBox.style.top=t.clientHeight+"px");var i=sf.base.createElement("div",{id:this.pdfViewer.dataId+"_search_box_elements",className:"e-pv-search-bar-elements"}),n=sf.base.createElement("div",{id:this.pdfViewer.dataId+"_search_input_container",className:"e-input-group e-pv-search-input"});this.searchInput=sf.base.createElement("input",{id:this.pdfViewer.dataId+"_search_input",className:"e-input"}),this.searchInput.type="text",this.pdfViewer._dotnetInstance.invokeMethodAsync("GetLocaleText","PdfViewer_Findindocument").then((function(t){e.searchInput.placeholder=t})),this.searchBtn=sf.base.createElement("span",{id:this.pdfViewer.dataId+"_search_box-icon",className:"e-input-group-icon e-input-search-group-icon e-pv-search-icon"}),n.appendChild(this.searchInput),n.appendChild(this.searchBtn),i.appendChild(n),this.pdfViewer.enableRtl?this.prevSearchBtn=this.createSearchBoxButtons("prev_occurrence","e-pv-next-search"):this.prevSearchBtn=this.createSearchBoxButtons("prev_occurrence","e-pv-prev-search"),this.prevSearchBtn.setAttribute("aria-label","Previous Search text"),i.appendChild(this.prevSearchBtn),this.pdfViewer.enableRtl?this.nextSearchBtn=this.createSearchBoxButtons("next_occurrence","e-pv-prev-search"):this.nextSearchBtn=this.createSearchBoxButtons("next_occurrence","e-pv-next-search"),this.nextSearchBtn.setAttribute("aria-label","Next Search text"),i.appendChild(this.nextSearchBtn);var o=sf.base.createElement("div",{id:this.pdfViewer.dataId+"_match_case_container",className:"e-pv-match-case-container"}),a=sf.base.createElement("input",{id:this.pdfViewer.dataId+"_match_case"});a.type="checkbox",a.style.height="17px",a.style.width="17px",a.addEventListener("change",this.checkBoxOnChange.bind(this)),o.appendChild(a),this.searchBox.appendChild(i),this.searchBox.appendChild(o),this.pdfViewerBase.mainContainer.appendChild(this.searchBox);var s=sf.base.createElement("span",{id:this.pdfViewer.dataId+"_search_box_text",styles:"position: absolute; padding-top: 3px; padding-left: 8px; padding-right: 8px; font-size: 13px"});this.pdfViewer._dotnetInstance.invokeMethodAsync("GetLocaleText","PdfViewer_Matchcase").then((function(e){s.textContent=e})),o.appendChild(s);var r=sf.base.createElement("div",{id:this.pdfViewer.dataId+"_textSearchLoadingIndicator"});n.appendChild(r),r.style.position="absolute",r.style.top="15px",r.style.left=n.clientWidth-46+"px",ie({target:r,cssClass:"e-spin-center"}),this.setLoaderProperties(r),this.showSearchBox(!1),this.pdfViewer.enableRtl?(this.searchBox.classList.add("e-rtl"),this.searchBox.style.left="88.3px"):(this.searchBox.classList.remove("e-rtl"),this.searchBox.style.right="88.3px"),this.searchInput.addEventListener("focus",(function(){e.searchInput.parentElement.classList.add("e-input-focus")})),this.searchInput.addEventListener("blur",(function(){e.searchInput.parentElement.classList.remove("e-input-focus")})),this.searchInput.addEventListener("keydown",this.searchKeypressHandler.bind(this)),this.searchBtn.addEventListener("click",this.searchClickHandler.bind(this)),this.nextSearchBtn.addEventListener("click",this.nextButtonOnClick.bind(this)),this.prevSearchBtn.addEventListener("click",this.prevButtonOnClick.bind(this))},e.prototype.setLoaderProperties=function(e){var t=e.firstChild.firstChild.firstChild;t&&(t.style.height="18px",t.style.width="18px",t.style.transformOrigin="9px 9px 9px")},e.prototype.showLoadingIndicator=function(e){var t=document.getElementById(this.pdfViewer.dataId+"_textSearchLoadingIndicator");t&&(e?ue(t):ge(t))},e.prototype.textSearchBoxOnResize=function(){if(this.pdfViewer.toolbarModule&&this.pdfViewer.enableToolbar){var e=this.pdfViewerBase.getElement("_toolbarContainer_popup");e&&e.contains(this.pdfViewerBase.getElement("_search").parentElement)&&(this.searchBox.style.right="0px")}else this.pdfViewerBase.viewerContainer.clientWidth+this.pdfViewerBase.viewerContainer.offsetLeft<this.searchBox.offsetLeft+this.searchBox.clientWidth?(this.searchBox.style.right="0px",this.searchBox.style.width=parseInt(this.searchBox.style.width)-(this.searchBox.offsetLeft+this.searchBox.clientWidth-this.pdfViewerBase.viewerContainer.clientWidth)+"px",this.searchInput.style.width=parseInt(this.searchInput.style.width)-(this.searchBox.offsetLeft+this.searchBox.clientWidth-this.pdfViewerBase.viewerContainer.clientWidth)+"px"):(this.searchBox.style.right="88.3px",this.searchBox.style.width="",this.searchInput.style.width="")},e.prototype.showSearchBox=function(e){if(e){this.searchBox.style.display="block",this.isMatchCase=!1,this.updateSearchInputIcon(e);var t=document.getElementById(this.pdfViewer.dataId+"_match_case");null!==t&&(t.checked=!1)}else this.searchBox.style.display="none",this.searchInput.value="";this.onTextSearchClose()},e.prototype.searchAfterSelection=function(){this.isTextSearch&&(this.initSearch(this.searchPageIndex,!0),this.highlightOthers())},e.prototype.initiateTextSearch=function(e){var t=e.value;t&&t.length>0&&" "===t[t.length-1]&&(t=t.slice(0,t.length-1)),this.initiateSearch(t)},e.prototype.initiateSearch=function(e){e!==this.searchString&&(this.isTextSearch=!1,this.searchPageIndex=this.pdfViewerBase.currentPageNumber-1),this.clearAllOccurrences(),""!==e&&(this.searchMatches.length>0&&(this.searchPageIndex=this.pdfViewer.currentPageNumber-1),this.searchMatches[this.searchPageIndex]&&e===this.searchString?0===this.searchMatches[this.searchPageIndex].length?this.initSearch(this.searchPageIndex,!1):this.nextSearch():(this.resetVariables(),this.searchIndex=0,this.textSearch(e)))},e.prototype.textSearch=function(e){if(""!==e||e){if(this.searchString=e,this.isTextSearch=!0,this.isSearchText=!0,this.searchPageIndex=this.pdfViewerBase.currentPageNumber-1,this.searchCount=0,this.isTextSearchEventTriggered=!1,this.showLoadingIndicator(!0),this.pdfViewer.fireTextSearchStart(e,this.isMatchCase),this.pdfViewer.isExtractText)if(this.isTextRetrieved)for(var t=0;t<this.pdfViewerBase.pageCount;t++)this.initSearch(t,!1,!0);else{this.isTextSearched=!0;for(t=0;t<this.documentTextCollection.length;t++)this.initSearch(t,!1,!0)}this.initSearch(this.searchPageIndex,!1),this.highlightOthers()}},e.prototype.nextSearch=function(){this.isPrevSearch=!1,this.isTextSearch=!0,this.isSearchText=!1,this.searchString?(this.clearAllOccurrences(),this.searchIndex=this.searchIndex+1,this.searchMatches.length>0&&(this.searchPageIndex=this.pdfViewer.currentPageNumber-1),this.searchMatches[this.searchPageIndex]?(this.searchIndex>=this.searchMatches[this.searchPageIndex].length?(this.searchIndex=0,this.searchPageIndex=this.searchPageIndex+1<this.pdfViewerBase.pageCount?this.searchPageIndex+1:0,this.pdfViewerBase.pageCount>1?this.initSearch(this.searchPageIndex,!1):(this.initSearch(this.searchPageIndex,!0),this.isMessagePopupOpened||this.onMessageBoxOpen(),this.pdfViewerBase.updateScrollTop(this.searchPageIndex)),this.showLoadingIndicator(!0)):(this.highlightSearchedTexts(this.searchPageIndex,!1,void 0),this.showLoadingIndicator(!1)),this.highlightOthers(!0)):this.initiateTextSearch(this.searchInput)):this.initiateTextSearch(this.searchInput)},e.prototype.prevSearch=function(){if(this.isPrevSearch=!0,this.isTextSearch=!0,this.isSearchText=!1,this.searchString)this.clearAllOccurrences(),this.searchIndex=this.searchIndex-1,this.searchIndex<0?(this.searchPageIndex=this.searchPageIndex-1<0?this.pdfViewerBase.pageCount-1:this.searchPageIndex-1,this.initSearch(this.searchPageIndex,!1),this.showLoadingIndicator(!0)):(this.highlightSearchedTexts(this.searchPageIndex,!1,void 0),this.showLoadingIndicator(!1)),this.highlightOthers(!0);else{this.searchIndex=this.searchIndex-1,this.searchPageIndex=this.searchPageIndex-1<0?this.pdfViewerBase.pageCount-1:this.searchPageIndex-1;var e=this.searchInput.value;this.textSearch(e)}},e.prototype.initSearch=function(e,t,i){var n=this.pdfViewerBase.getStoredData(e,!0),o=null,a=null,s=null;if(i){if(0!==this.documentTextCollection.length){var r=this.documentTextCollection[e][e],l=r.pageText?r.pageText:r.PageText;this.documentTextCollection[e]&&r&&this.getSearchTextContent(e,this.searchString,l,a,t,this.documentTextCollection[e])}}else n?(o=n.pageText,a=n.textContent,s=this.pdfViewerBase.textLayer.characterBound[e],this.textContents[e]=a,this.getPossibleMatches(e,this.searchString,o,a,t,s)):t||this.createRequestForSearch(e);this.pdfViewerBase.pageCount===(this.searchMatches&&this.searchMatches.length)&&(this.isTextSearchEventTriggered||(this.isTextSearchEventTriggered=!0,this.pdfViewer.fireTextSearchComplete(this.searchString,this.isMatchCase)))},e.prototype.getPossibleMatches=function(e,t,i,n,o,a){var s;if(this.searchMatches&&!this.searchMatches[e]){var r=i,l=t,d=r.replace(/(\s\r\n)/gm," ").replace(/(\r\n)/gm," "),h=i.replace(/(\s\r\n)/gm,"  ").replace(/(\r\n)/gm," "),p=d.replace(/[^a-zA-z0-9" "]/g,""),c=t.length;this.isMatchCase||(l=t.toLowerCase(),r=i.toLowerCase(),d=d.toLowerCase(),h=h.toLowerCase(),p=p.toLowerCase());for(var u=[],f=[],g=-c,m=-c,w=-c,y=-c,S=-c;(0!==g||0===g)&&""!==l&&" "!==l&&l;){if(g=r.indexOf(l,g+c),-1!==l.indexOf(" ")){var v=t.replace(" ","\r\n");m=r.indexOf(v,m+c),(m=-1)<=-1||m<g&&u.push(m)}if(g<=-1&&m<=-1)break;g<=-1||u.push(g),m>g&&!(m<=-1)&&u.push(m)}if(0==u.length){if(w=d.indexOf(l,w+c),y=h.indexOf(l,y+c),S=p.indexOf(l,S+c),-1!==w){g=-(s=this.correctLinetext(t,g,r))[0].length;for(var b=0;b<s.length;b++)g=r.indexOf(s[b].trim(),g+(void 0===s[b-1]?s[0].length:s[b-1].length)),f.push(g),f.length>1&&(f[1]-(f[0]+s[0].length)<=3?(u.push(f),this.searchMatches[e]=u):(b=-1,g=f[0]+s[0].length,f.splice(0,f.length)))}else if(-1!==S){g=-(s=this.correctLinetext(t,g,r))[0].length;for(b=0;b<s.length;b++)(g=r.indexOf(s[b].trim(),g+(void 0===s[b-1]?s[0].length:s[b-1].length)))>0&&f.push(g),f.length>1&&(f[1]-(f[0]+s[0].length)<=3?(u.push(f),this.searchMatches[e]=u):(b=-1,g=f[0]+s[0].length,f.splice(0,f.length)))}else if(-1!==y){g=-(s=this.correctLinetext(t,g,r))[0].length;for(b=0;b<s.length;b++)g=r.indexOf(s[b].trim(),g+(void 0===s[b-1]?s[0].length:s[b-1].length)),f.push(g),f.length>1&&(f[1]-(f[0]+s[0].length)<=3?(u.push(f),this.searchMatches[e]=u):(b=-1,g=f[0]+s[0].length,f.splice(0,f.length)))}u.length>1&&u.splice(1,u.length)}this.searchMatches&&u.length>0&&(this.searchMatches[e]=u)}if(o||(-1===this.searchedPages.indexOf(e)&&(this.searchedPages.push(e),this.startIndex=this.searchedPages[0]),this.updateSearchInputIcon(!1)),this.searchMatches&&this.searchMatches[e]&&0!==this.searchMatches[e].length)o||(this.isPrevSearch&&(this.searchIndex=this.searchMatches[e].length-1),this.pdfViewerBase.currentPageNumber-1!==this.searchPageIndex?(this.searchMatches.length>0&&(0===this.searchIndex||-1===this.searchIndex)&&this.searchPageIndex===this.currentSearchIndex?(this.isMessagePopupOpened||this.isSearchText||this.onMessageBoxOpen(),this.searchPageIndex=this.getSearchPage(this.pdfViewerBase.currentPageNumber-1),this.searchedPages=[this.searchPageIndex]):this.isPrevSearch&&this.searchMatches&&this.searchMatches.length>0&&this.searchMatches[this.searchPageIndex].length>0&&this.searchedPages.length===this.pdfViewerBase.pageCount&&this.startIndex-1===this.searchPageIndex&&(this.isMessagePopupOpened||this.onMessageBoxOpen(),this.searchedPages=[this.startIndex]),this.pdfViewerBase.updateScrollTop(this.searchPageIndex)):this.searchMatches&&this.searchMatches[this.searchPageIndex].length>0&&this.searchedPages.length===this.pdfViewerBase.pageCount&&this.startIndex===this.searchPageIndex&&this.pdfViewerBase.pageCount>1&&(this.isMessagePopupOpened||this.onMessageBoxOpen(),this.searchedPages=[this.startIndex])),this.highlightSearchedTexts(e,o,s);else if(!o){this.isPrevSearch?this.searchPageIndex=this.searchPageIndex-1<0?this.pdfViewerBase.pageCount-1:this.searchPageIndex-1:this.searchPageIndex=this.searchPageIndex+1<this.pdfViewerBase.pageCount?this.searchPageIndex+1:0;var V;if(V=this.searchMatches,-1===this.searchMatches.indexOf(V)&&this.searchedPages.length!==this.pdfViewerBase.pageCount)this.showLoadingIndicator(!0),this.initSearch(this.searchPageIndex,!1);else{var A=this.getSearchPage(e);this.searchMatches&&sf.base.isNullOrUndefined(this.searchMatches[this.searchPageIndex])&&this.searchedPages.length===this.pdfViewerBase.pageCount?(this.isMessagePopupOpened||this.onMessageBoxOpen(),this.pdfViewerBase.updateScrollTop(this.startIndex)):this.searchMatches&&this.searchMatches.length>0&&(0===this.searchIndex||-1===this.searchIndex)&&A===this.currentSearchIndex?(this.isPrevSearch?(this.isMessagePopupOpened||this.onMessageBoxOpen(),this.searchPageIndex=A,this.searchedPages=[A],this.searchIndex=-1):(this.isMessagePopupOpened||0===this.pdfViewerBase.currentPageNumber||this.isSearchText||this.onMessageBoxOpen(),this.searchPageIndex=A,this.searchedPages=[A],this.searchIndex=0),this.highlightSearchedTexts(this.searchPageIndex,o,void 0)):this.searchMatches&&this.searchMatches[this.searchPageIndex]&&this.searchMatches[this.searchPageIndex].length>0&&this.searchedPages.length===this.pdfViewerBase.pageCount&&(this.isMessagePopupOpened||this.onMessageBoxOpen(),this.searchPageIndex=this.startIndex,this.searchedPages=[this.searchPageIndex],this.searchIndex=0,this.pdfViewerBase.updateScrollTop(this.startIndex),this.highlightSearchedTexts(this.searchPageIndex,o,void 0))}}},e.prototype.correctLinetext=function(e,t,i){var n=[],o=e.toLowerCase().split(/[" "]+/);t=0;for(var a="",s=0;s<o.length;s++){var r=a+o[s];-1!==(t=i.indexOf(r,t))?(a+=o[s]+" ",s==o.length-1&&n.push(a)):(n.push(a),a=o[s]+" ",s==o.length-1&&n.push(a))}return n},e.prototype.getSearchTextContent=function(e,t,i,n,o,a){var s=i,r=t,l=t.length;this.isMatchCase||(r=t.toLowerCase(),s=i.toLowerCase());for(var d=[],h=-l,p=-l;0!==h&&""!==r&&" "!==r&&r;){if(h=s.indexOf(r,h+l),-1!==r.indexOf(" ")){var c=t.replace(" ","\r\n");(p=s.indexOf(c,p+l))<=-1||p<h&&d.push(p)}if(h<=-1&&p<=-1)break;h<=-1||d.push(h),p>h&&!(p<=-1)&&d.push(p)}0!==d.length&&(this.searchCount=this.searchCount+d.length),this.searchMatches[e]=d},e.prototype.getSearchPage=function(e){var t=null;if(this.isPrevSearch){for(var i=e;i>=0;i--)if(i!==e&&this.searchMatches[i]){t=i;break}if(!t)for(var n=this.pdfViewerBase.pageCount-1;n>e;n--)if(this.searchMatches[n]){t=n;break}}else{for(i=e;i<this.pdfViewerBase.pageCount;i++)if(i!==e&&this.searchMatches[i]){t=i;break}if(!t)if(0===e)t=e;else for(n=0;n<e;n++)if(this.searchMatches[n]){t=n;break}}return t},e.prototype.highlightSearchedTexts=function(e,t,i){var n,o=this.searchMatches[e],a={y:-100,x:-100},s=this.searchString,r=this.pdfViewerBase.textLayer.characterBound[e];if(t&&this.pdfViewerBase.currentPageNumber-1!==this.searchPageIndex&&this.searchMatches.length>0&&this.getSearchPage(this.pdfViewerBase.currentPageNumber-1),r){for(var l=0;l<o.length;l++){if(void 0!==o[l].length&&void 0!==i)if(l===this.searchIndex&&e===this.searchPageIndex)for(var d=0;d<i.length;d++)n="e-pv-search-text-highlight",this.searchString=i[d].trim(),this.addDivForSearch(l,e,r,this.searchString.length,n,d);else for(d=0;d<i.length;d++)n="e-pv-search-text-highlightother",this.searchString=i[d].trim(),this.addDivForSearch(l,e,r,this.searchString.length,n,d);else n=l===this.searchIndex&&e===this.searchPageIndex?"e-pv-search-text-highlight":"e-pv-search-text-highlightother";null==o[l].length&&this.addDivForSearch(l,e,r,this.searchString.length,n,void 0)}if(this.searchString=s,e===this.searchPageIndex&&!t){var h=this.pdfViewerBase.getElement("_searchtext_"+e+"_"+this.searchIndex);if(h){var p=this.getScrollElement(h);this.scrollToSearchStr(p,a)}else{this.pdfViewerBase.updateScrollTop(e);var c=this.pdfViewerBase.getElement("_searchtext_"+e+"_"+this.searchIndex);if(c){p=this.getScrollElement(c);this.scrollToSearchStr(p,a)}}}}},e.prototype.addDivForSearch=function(e,t,i,n,o,a){var s,r=this.pdfViewerBase.getElement("_textLayer_"+t);sf.base.isNullOrUndefined(r)&&"e-pv-search-text-highlight"===o&&this.pdfViewer.navigation&&this.pdfViewer.navigation.goToPage(t+1);for(var l=s=void 0!==this.searchMatches[t][e].length?this.searchMatches[t][e][a]:this.searchMatches[t][e],d=0;s<l+n;)s=this.addDivElement(s,i,n,o,e,t,l,d,a),d++;"e-pv-search-text-highlight"===o&&this.showLoadingIndicator(!1)},e.prototype.addDivElement=function(e,t,i,n,o,a,s,r,l){var d=0,h=0,p=0,c=0,u=!1;t[e]&&(c=t[e].X,p=t[e].Y);var f=0;for(e-s!=0&&(f=e-s,i+=1),f=f;f<i;f++){if(t[e])c>(m=t[e]).X&&(u=!0),d=d>(w=(p=p<m.Y?p:m.Y)<m.Y?m.Y-p:p-m.Y)+m.Height?d:w+m.Height,e++}var g=!1;if(u){var m,w;c=(m=t[s+i-1]).X,h=t[s].X-t[s+i-1].X,d=d>(w=(p=p<m.Y?p:m.Y)<m.Y?m.Y-p:p-m.Y)+m.Height?d:w+m.Height;for(var y=t[s-1].Y-t[s].Y,S=s+i-1;S>=s;S--)0===(m=t[S]).Width&&(y=m.Y-t[S-1].Y);h+=y}else if(s+i!==e)g=!0,t[e-1]&&(h=t[e-1].X-c);else{g=!1;var v=this.pdfViewerBase.getStoredData(a,!0),b=null;if(v)b=v.pageText;else if(this.pdfViewer.isExtractText&&0!==this.documentTextCollection.length){var V=this.documentTextCollection[a][a];b=V.pageText?V.pageText:V.PageText}t[e]?h=!b||""!==b[e]&&" "!==b[e]&&"\r"!==b[e]&&"\n"!==b[e]||0!==t[e].Width?t[e].X-c:t[e-1].X-c+t[e-1].Width:t[e-1]&&(h=t[e-1].X-c)}return this.createSearchTextDiv(o,a,d,h,p,c,n,g,r,l),e},e.prototype.createSearchTextDiv=function(e,t,i,n,o,a,s,r,l,d){var h="_searchtext_"+t+"_"+e;if(r&&(h+="_"+l),void 0!==d&&this.pdfViewerBase.getElement(h)){var p=sf.base.createElement("div",{id:this.pdfViewer.element.id+h+"_"+d}),c=this.pdfViewerBase.pageSize[t];if(this.calculateBounds(p,i,n,o,a,c),p.classList.add(s),"e-pv-search-text-highlight"===s){p.style.backgroundColor=""===this.pdfViewer.textSearchColorSettings.searchHighlightColor?"#fdd835":this.pdfViewer.textSearchColorSettings.searchHighlightColor;var u={left:a,top:o,width:n,height:i};this.pdfViewer.fireTextSearchHighlight(this.searchString,this.isMatchCase,u,t+1)}else"e-pv-search-text-highlightother"===s&&(p.style.backgroundColor=""===this.pdfViewer.textSearchColorSettings.searchColor?"#8b4c12":this.pdfViewer.textSearchColorSettings.searchColor);(f=this.pdfViewerBase.getElement("_textLayer_"+t))&&f.appendChild(p)}if(!this.pdfViewerBase.getElement(h)){var f;p=sf.base.createElement("div",{id:this.pdfViewer.dataId+h}),c=this.pdfViewerBase.pageSize[t];if(this.calculateBounds(p,i,n,o,a,c),p.classList.add(s),"e-pv-search-text-highlight"===s){p.style.backgroundColor=""===this.pdfViewer.textSearchColorSettings.searchHighlightColor?"#fdd835":this.pdfViewer.textSearchColorSettings.searchHighlightColor;u={left:a,top:o,width:n,height:i};this.pdfViewer.fireTextSearchHighlight(this.searchString,this.isMatchCase,u,t+1)}else"e-pv-search-text-highlightother"===s&&(p.style.backgroundColor=""===this.pdfViewer.textSearchColorSettings.searchColor?"#8b4c12":this.pdfViewer.textSearchColorSettings.searchColor);(f=this.pdfViewerBase.getElement("_textLayer_"+t))&&f.appendChild(p)}},e.prototype.calculateBounds=function(e,t,i,n,o,a){0===a.rotation||2===a.rotation?(e.style.height=Math.ceil(t)*this.pdfViewerBase.getZoomFactor()+"px",e.style.width=i*this.pdfViewerBase.getZoomFactor()+"px",2===a.rotation?(e.style.top=(a.height-n-t)*this.pdfViewerBase.getZoomFactor()+"px",e.style.left=Math.ceil(a.width-o-i)*this.pdfViewerBase.getZoomFactor()+"px"):(e.style.top=n*this.pdfViewerBase.getZoomFactor()+"px",e.style.left=o*this.pdfViewerBase.getZoomFactor()+"px")):1===a.rotation?(e.style.height=i*this.pdfViewerBase.getZoomFactor()+"px",e.style.width=t*this.pdfViewerBase.getZoomFactor()+"px",e.style.top=o*this.pdfViewerBase.getZoomFactor()+"px",e.style.left=(a.height-n-t)*this.pdfViewerBase.getZoomFactor()+"px"):3===a.rotation&&(e.style.height=i*this.pdfViewerBase.getZoomFactor()+"px",e.style.width=t*this.pdfViewerBase.getZoomFactor()+"px",e.style.left=(a.width-a.height+n)*this.pdfViewerBase.getZoomFactor()+"px",e.style.top=(a.height-o-i)*this.pdfViewerBase.getZoomFactor()+"px")},e.prototype.isClassAvailable=function(){for(var e=!1,t=0;t<this.tempElementStorage.length;t++)if(this.tempElementStorage[t].classString&&("e-pv-search-text-highlight"===this.tempElementStorage[t].classString||"e-pv-search-text-highlightother"===this.tempElementStorage[t].classString)){e=!0;break}return e},e.prototype.getScrollElement=function(e){var t=e;if(e.childNodes.length>0)for(var i=0;i<e.childNodes.length;i++)e.childNodes[i].classList&&e.childNodes[i].classList.contains("e-pv-search-text-highlight")&&(t=e.childNodes[i]);return t},e.prototype.scrollToSearchStr=function(e,t){for(var i=e.offsetParent,n=e.offsetTop+e.clientTop,o=e.offsetLeft+e.clientLeft;i.id!==this.pdfViewerBase.viewerContainer.id;)n+=i.offsetTop,o+=i.offsetLeft,i=i.offsetParent;t&&(n+=t.y,o+=t.x,(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode||this.pdfViewerBase.getZoomFactor()>1.5)&&(i.scrollLeft=o)),i.scrollTop=n,this.pdfViewerBase.updateMobileScrollerPosition()},e.prototype.resizeSearchElements=function(e){for(var t=document.querySelectorAll('div[id*="'+this.pdfViewer.dataId+"_searchtext_"+e+'"]'),i=0;i<t.length;i++){var n=t[i],o=1;this.pdfViewer.magnificationModule&&(o=this.pdfViewer.magnificationModule.previousZoomFactor);var a=e+"_"+o+"_"+this.pdfViewerBase.getZoomFactor();n.getAttribute("name")!==a&&(n.style.width=parseFloat(n.style.width)/o*this.pdfViewerBase.getZoomFactor()+"px",n.style.height=parseFloat(n.style.height)/o*this.pdfViewerBase.getZoomFactor()+"px",n.style.top=parseFloat(n.style.top)/o*this.pdfViewerBase.getZoomFactor()+"px",n.style.left=parseFloat(n.style.left)/o*this.pdfViewerBase.getZoomFactor()+"px",n.setAttribute("name",a))}},e.prototype.highlightOtherOccurrences=function(e){this.initSearch(e,!0)},e.prototype.highlightOthers=function(e){for(var t=this.getIndexes(),i=parseFloat(t.lowerPageValue.toString()),n=parseFloat(t.higherPageValue.toString()),o=i;o<=n;o++)this.highlightOtherOccurrences(o);e&&this.showLoadingIndicator(!1)},e.prototype.clearAllOccurrences=function(){for(var e=document.querySelectorAll('div[id*="'+this.pdfViewer.dataId+'_searchtext_"]'),t=0;t<e.length;t++)e[t].parentElement.removeChild(e[t])},e.prototype.getIndexes=function(){var e=this.pdfViewerBase.currentPageNumber-3;e=e>0?e:0;var t=this.pdfViewerBase.currentPageNumber+1;return{lowerPageValue:e,higherPageValue:t=t<this.pdfViewerBase.pageCount?t:this.pdfViewerBase.pageCount-1}},e.prototype.applyTextSelection=function(){if(this.pdfViewer.textSelectionModule&&!this.pdfViewerBase.isTextSelectionDisabled)for(var e=this.getIndexes(),t=parseFloat(e.lowerPageValue.toString()),i=parseFloat(e.higherPageValue.toString()),n=t;n<=i;n++)this.pdfViewer.textSelectionModule.applySelectionRangeOnScroll(n)},e.prototype.resetTextSearch=function(){this.resetVariables(),this.onTextSearchClose(),this.searchPageIndex=null,this.searchIndex=0,this.updateSearchInputIcon(!0),this.enableNextButton(!1),this.enablePrevButton(!1),this.documentTextCollection=[],this.isTextRetrieved=!1,this.isTextSearched=!1,this.isSearchText=!1,this.searchRequestHandler&&this.searchRequestHandler.clear()},e.prototype.onTextSearchClose=function(){this.isPrevSearch=!1,this.isTextSearch=!1,this.pdfViewerBase.pageCount>0&&this.clearAllOccurrences()},e.prototype.createRequestForSearch=function(e){var t=this,n=this.pdfViewer.element.clientHeight,o=this.pdfViewerBase.pageSize[e].width,a=(this.pdfViewerBase.pageSize[e].height,this.pdfViewerBase.getTileCount(o)),s=816>=o?1:a,r=816>=o?1:a,l=!1,d=this.pdfViewer.tileRenderingSettings;d.enableTileRendering&&d.x>0&&d.y>0&&(s=816>=o?1:d.x,r=816>=o?1:d.y),s>1&&r>1&&(l=!0);for(var h=function(d){for(var h=function(h){var c=void 0;c={xCoordinate:d,yCoordinate:h,pageNumber:e,viewPortWidth:816,viewPortHeight:n,documentId:t.pdfViewerBase.getDocumentId(),hashId:t.pdfViewerBase.hashId,zoomFactor:t.pdfViewerBase.getZoomFactor(),tilecount:a,action:"Search",elementId:t.pdfViewer.element.id,uniqueId:t.pdfViewerBase.documentId,tileXCount:s,tileYCount:r},p.pdfViewerBase.jsonDocumentId&&(c.documentId=p.pdfViewerBase.jsonDocumentId),p.searchRequestHandler=new xe(p.pdfViewer),p.searchRequestHandler.url=p.pdfViewer.serviceUrl+"/"+p.pdfViewer.serverActionSettings.renderPages,p.searchRequestHandler.responseType="json",p.searchRequestHandler.send(c),p.searchRequestHandler.onSuccess=function(n){var a=n.data;if(a){if("object"!==i(a))try{a=JSON.parse(a)}catch(e){t.pdfViewerBase.onControlError(500,a,this.pdfViewer.serverActionSettings.renderPages),a=null}if(a)if(sf.base.isNullOrUndefined(a.pageText)||a.uniqueId!==t.pdfViewerBase.documentId){if(l&&a.uniqueId===t.pdfViewerBase.documentId){t.pdfViewer.fireAjaxRequestSuccess(this.pdfViewer.serverActionSettings.renderPages,a);p=void 0!==a.pageNumber?a.pageNumber:e;t.pdfViewerBase.storeWinData(a,p,a.tileX,a.tileY),d===s-1&&h===r-1&&t.initSearch(e,!1)}}else{t.pdfViewer.fireAjaxRequestSuccess(this.pdfViewer.serverActionSettings.renderPages,a);var p=void 0!==a.pageNumber?a.pageNumber:e;816>=o?t.pdfViewerBase.storeWinData(a,p):t.pdfViewerBase.storeWinData(a,p,a.tileX,a.tileY),l?d===s-1&&h===r-1&&t.initSearch(e,!1):t.initSearch(e,!1)}}},p.searchRequestHandler.onFailure=function(e){t.pdfViewer.fireAjaxRequestFailed(e.status,e.statusText,this.pdfViewer.serverActionSettings.renderPages)},p.searchRequestHandler.onError=function(e){t.pdfViewerBase.openNotificationPopup(),t.pdfViewer.fireAjaxRequestFailed(e.status,e.statusText,this.pdfViewer.serverActionSettings.renderPages)}},c=0;c<r;c++)h(c)},p=this,c=0;c<s;c++)h(c)},e.prototype.getPDFDocumentTexts=function(){var e=50,t=this.pdfViewerBase.pageCount;e>=t&&(e=t),this.createRequestForGetPdfTexts(0,e)},e.prototype.createRequestForGetPdfTexts=function(e,t){var n,o=this;n={pageStartIndex:e,pageEndIndex:t,documentId:o.pdfViewerBase.getDocumentId(),hashId:o.pdfViewerBase.hashId,action:"RenderPdfTexts",elementId:o.pdfViewer.element.id,uniqueId:o.pdfViewerBase.documentId},this.pdfViewerBase.jsonDocumentId&&(n.documentId=this.pdfViewerBase.jsonDocumentId),this.searchRequestHandler=new xe(this.pdfViewer),this.searchRequestHandler.url=this.pdfViewer.serviceUrl+"/"+this.pdfViewer.serverActionSettings.renderTexts,this.searchRequestHandler.responseType="json",this.searchRequestHandler.send(n),this.searchRequestHandler.onSuccess=function(n){var a=n.data;if(a){if("object"!==i(a))try{a=JSON.parse(a)}catch(e){o.pdfViewerBase.onControlError(500,a,this.pdfViewer.serverActionSettings.renderTexts),a=null}if(a&&a.documentTextCollection&&a.uniqueId===o.pdfViewerBase.documentId){o.pdfViewer.fireAjaxRequestSuccess(this.pdfViewer.serverActionSettings.renderTexts,a),o.documentTextCollection.length>0?(o.documentTextCollection=a.documentTextCollection.concat(o.documentTextCollection),o.documentTextCollection=o.orderPdfTextCollections(o.documentTextCollection)):o.documentTextCollection=a.documentTextCollection;var s=o.pdfViewerBase.pageCount;t!==s?(e=t,(t+=50)>=s&&(t=s),o.createRequestForGetPdfTexts(e,t)):(o.isTextRetrieved=!0,o.pdfViewer.fireTextExtractionCompleted(o.documentTextCollection),o.isTextSearched&&o.searchString.length>0&&(o.textSearch(o.searchString),o.isTextSearched=!1))}}},this.searchRequestHandler.onFailure=function(e){o.pdfViewer.fireAjaxRequestFailed(e.status,e.statusText,this.pdfViewer.serverActionSettings.renderTexts)},this.searchRequestHandler.onError=function(e){o.pdfViewerBase.openNotificationPopup(),o.pdfViewer.fireAjaxRequestFailed(e.status,e.statusText,this.pdfViewer.serverActionSettings.renderTexts)}},e.prototype.orderPdfTextCollections=function(e){for(var t=[],i=0;i<e.length;i++)if(0===t.length)t.push(e[i]);else if(parseInt(Object.keys(e[i])[0])>parseInt(Object.keys(t[t.length-1])[0]))t.push(e[i]);else for(var n=0;n<t.length;n++)if(parseInt(Object.keys(e[i])[0])<parseInt(Object.keys(t[n])[0])){t.splice(n,0,e[i]);break}return t},e.prototype.createSearchBoxButtons=function(e,t){var i=sf.base.createElement("button",{id:this.pdfViewer.dataId+"_"+e,className:"e-btn e-icon-btn e-pv-search-btn "+t});i.setAttribute("type","button");var n=sf.base.createElement("span",{id:this.pdfViewer.dataId+"_"+e+"Icon",className:"e-pv-icon-search "+t+"-icon"});return i.disabled=!0,i.appendChild(n),i},e.prototype.enablePrevButton=function(e){sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode||(e?this.prevSearchBtn.removeAttribute("disabled"):this.prevSearchBtn&&(this.prevSearchBtn.disabled=!0))},e.prototype.enableNextButton=function(e){sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode||(e?this.nextSearchBtn.removeAttribute("disabled"):this.nextSearchBtn&&(this.nextSearchBtn.disabled=!0))},e.prototype.resetVariables=function(){this.searchedPages=[],this.searchMatches=new Array},e.prototype.searchButtonClick=function(e,t){(this.isMessagePopupOpened=!1,sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode)&&(e=this.pdfViewerBase.getElement("_search_box-icon").children[0].children[0],t=this.pdfViewerBase.getElement("_search_input"));e.classList.contains("e-pv-search-icon")?this.initiateTextSearch(t):e.classList.contains("e-pv-search-close")&&(this.showLoadingIndicator(!1),t.value="",this.resetTextSearch(),t.focus())},e.prototype.updateSearchInputIcon=function(e){this.searchBtn&&sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&(this.searchBtn=this.pdfViewerBase.getElement("_search_box-icon").children[0].children[0]),this.searchBtn&&(e?(this.searchBtn.classList.remove("e-pv-search-close"),this.searchBtn.classList.add("e-pv-search-icon")):(this.searchBtn.classList.remove("e-pv-search-icon"),this.searchBtn.classList.add("e-pv-search-close")))},e.prototype.onMessageBoxOpen=function(){var e=this;(this.showLoadingIndicator(!1),this.pdfViewerBase.getElement("_search_input").blur(),this.pdfViewerBase.isMouseDown&&"Ink"===this.pdfViewerBase.action&&(this.pdfViewerBase.isMouseDown=!1),this.isMessagePopupOpened=!0,!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode)?this.pdfViewer._dotnetInstance.invokeMethodAsync("GetLocaleText","PdfViewer_Nomatches").then((function(t){e.pdfViewerBase.textLayer.createNotificationPopup(t)})):this.pdfViewer._dotnetInstance.invokeMethodAsync("GetLocaleText","PdfViewer_NoTextFound").then((function(t){e.pdfViewerBase.navigationPane.createTooltipMobile(t,!0)}))},e.prototype.searchText=function(e,t){e&&e.length>0&&" "===e[e.length-1]&&(e=e.slice(0,e.length-1)),this.searchString=e,this.isMatchCase=t,this.isTextSearch&&(this.resetVariables(),this.clearAllOccurrences()),this.searchIndex=0,this.textSearch(e)},e.prototype.searchNext=function(){this.nextSearch()},e.prototype.searchPrevious=function(){this.prevSearch()},e.prototype.cancelTextSearch=function(){this.resetTextSearch()},e.prototype.destroy=function(){this.searchMatches=void 0},e.prototype.getModuleName=function(){return"TextSearch"},e}(),ht=function(){function e(e,t){this.printHeight=1123,this.printWidth=794,this.firefoxPrintHeight=1123,this.firefoxPrintWidth=794,this.pdfViewer=e,this.pdfViewerBase=t}return e.prototype.print=function(){if(this.pdfViewerBase.pageCount>0){this.printViewerContainer=sf.base.createElement("div",{id:this.pdfViewer.dataId+"_print_viewer_container",className:"e-pv-print-viewer-container"}),"Default"===this.pdfViewer.printMode?(this.pdfViewerBase.showPrintLoadingIndicator(!0),this.iframe=document.createElement("iframe"),this.iframe.className="iframeprint",this.iframe.id="iframePrint",this.iframe.style.position="fixed",this.iframe.style.top="-100000000px",document.body.appendChild(this.iframe),this.frameDoc=this.iframe.contentWindow?this.iframe.contentWindow:this.iframe.contentDocument,this.frameDoc.document.open()):(this.printWindow=window.open("","print","height="+window.outerHeight+",width="+window.outerWidth+",tabbar=no"),this.printWindow.moveTo(0,0),this.printWindow.resizeTo(screen.availWidth,screen.availHeight),this.createPrintLoadingIndicator(this.printWindow.document.body)),window.customStampCollection=new Map;var e=0,t=this.pdfViewer.annotationCollection,i=!1,n=0,o=0,a=this;if(this.pdfViewer.annotationSettings.skipPrint)i||e!=o||this.callPrintAction();else if(t&&t.length>0){for(o=this.pdfViewer.annotationCollection.length,e=0;e<t.length;e++)if(t[e].stampAnnotationType&&"image"==t[e].stampAnnotationType)if(t[e].stampAnnotationPath){(l=new Image).src=t[e].stampAnnotationPath,n++,i=!0,window.customStampCollection.set(t[e].annotationId,l),l.onload=function(){0==--n&&e==o&&a.callPrintAction()}}else{var s=this.pdfViewerBase.documentAnnotationCollections[t[e].pageNumber].stampAnnotations;if(s&&s.length>0)for(var r=0;r<s.length;r++){var l;if(s[r].Apperarance&&s[r].Apperarance[2]&&s[r].Apperarance[2].imagedata)(l=new Image).src=s[r].Apperarance[2].imagedata,n++,i=!0,window.customStampCollection.set(s[r].AnnotName,l),l.onload=function(){0==--n&&e==o&&a.callPrintAction()}}}i||e!=o||this.callPrintAction()}else i||e!=o||this.callPrintAction()}},e.prototype.callPrintAction=function(){var e=this;-1!==navigator.userAgent.indexOf("Firefox")&&(this.printHeight=this.firefoxPrintHeight,this.printWidth=this.firefoxPrintWidth),setTimeout((function(){for(var t=0;t<e.pdfViewerBase.pageCount;t++){var i=e.pdfViewerBase.pageSize[t].width,n=e.pdfViewerBase.pageSize[t].height;e.pdfViewer.printModule.createRequestForPrint(t,i,n,e.pdfViewerBase.pageCount)}e.pdfViewer.firePrintEnd(e.pdfViewer.downloadFileName)}),100)},e.prototype.createRequestForPrint=function(e,t,n,o){var a=this,s={pageNumber:e,pageWidth:t,pageHeight:n,documentId:this.pdfViewerBase.documentId,hashId:this.pdfViewerBase.hashId,zoomFactor:2,action:"PrintImages",elementId:this.pdfViewer.dataId,uniqueId:this.pdfViewerBase.documentId,digitalSignaturePresent:this.pdfViewerBase.digitalSignaturePresent(e)};this.pdfViewerBase.jsonDocumentId&&(s.documentId=this.pdfViewerBase.jsonDocumentId),a.pdfViewerBase.createFormfieldsJsonData(),a.printRequestHandler=new xe(a.pdfViewer),a.printRequestHandler.url=a.pdfViewer.serviceUrl+"/"+a.pdfViewer.serverActionSettings.print,a.printRequestHandler.responseType=null,a.printRequestHandler.mode=!1,this.pdfViewerBase.validateForm&&this.pdfViewer.enableFormFieldsValidation?(this.pdfViewer.fireValidatedFailed(a.pdfViewer.serverActionSettings.download),this.pdfViewerBase.validateForm=!1,this.pdfViewerBase.showPrintLoadingIndicator(!1)):a.printRequestHandler.send(s),a.printRequestHandler.onSuccess=function(o){a.pdfViewerBase.isPrint=!0;var s=o.data;if(s&&"object"!==i(s))try{"object"!==i(s=JSON.parse(s))&&(a.pdfViewerBase.onControlError(500,s,a.pdfViewer.serverActionSettings.print),s=null)}catch(e){a.pdfViewerBase.onControlError(500,s,a.pdfViewer.serverActionSettings.print),s=null}if(s&&s.uniqueId===a.pdfViewerBase.documentId){a.pdfViewer.fireAjaxRequestSuccess(a.pdfViewer.serverActionSettings.print,s);var r="";if(!a.pdfViewer.annotationSettings.skipPrint){var l=a.pdfViewerBase.documentAnnotationCollections;if(l&&l[s.pageNumber]&&a.pdfViewerBase.isTextMarkupAnnotationModule()){var d=l[s.pageNumber];if(a.pdfViewerBase.isImportAction){var h=d.textMarkupAnnotation,p=d.shapeAnnotation,c=d.measureShapeAnnotation,u=d.stampAnnotations,f=d.stickyNotesAnnotation;r=a.pdfViewer.annotationModule.textMarkupAnnotationModule.printTextMarkupAnnotations(h,s.pageNumber,u,p,c,f)}else r=a.pdfViewer.annotationModule.textMarkupAnnotationModule.printTextMarkupAnnotations(d.textMarkupAnnotation,s.pageNumber,d.stampAnnotations,d.shapeAnnotation,d.measureShapeAnnotation,d.stickyNoteAnnotation)}a.pdfViewerBase.isAnnotationCollectionRemoved&&(r=a.pdfViewer.annotationModule.textMarkupAnnotationModule.printTextMarkupAnnotations(null,s.pageNumber,null,null,null,null))}var g=s.pageNumber;a.printCanvas=sf.base.createElement("canvas",{id:a.pdfViewer.element.id+"_printCanvas_"+e,className:"e-pv-print-canvas"}),a.printCanvas.style.width=t+"px",a.printCanvas.style.height=n+"px";a.printCanvas.height=1.5*a.printHeight*2,a.printCanvas.width=1.5*a.printWidth*2;var m=a.printCanvas.getContext("2d"),w=new Image,y=new Image;w.onload=function(){s.pageHeight>s.pageWidth||!a.pdfViewer.enablePrintRotation?(m.drawImage(w,0,0,a.printCanvas.width,a.printCanvas.height),r&&m.drawImage(y,0,0,a.printCanvas.width,a.printCanvas.height)):(m.translate(.5*a.printCanvas.width,.5*a.printCanvas.height),m.rotate(-.5*Math.PI),m.translate(.5*-a.printCanvas.height,.5*-a.printCanvas.width),m.drawImage(w,0,0,a.printCanvas.height,a.printCanvas.width),r&&m.drawImage(y,0,0,a.printCanvas.height,a.printCanvas.width)),g===a.pdfViewerBase.pageCount-1&&a.printWindowOpen(),a.pdfViewer.renderDrawing(null,g)},w.src=s.image,y.src=r,a.printViewerContainer.appendChild(a.printCanvas)}a.pdfViewerBase.isPrint=!1},this.printRequestHandler.onFailure=function(e){a.pdfViewer.fireAjaxRequestFailed(e.status,e.statusText,a.pdfViewer.serverActionSettings.print)},this.printRequestHandler.onError=function(e){a.pdfViewerBase.openNotificationPopup(),a.pdfViewer.fireAjaxRequestFailed(e.status,e.statusText,a.pdfViewer.serverActionSettings.print)}},e.prototype.renderFieldsForPrint=function(e,t,i){var n,o=null;if(this.pdfViewer.formFieldsModule&&(o=this.pdfViewerBase.getItemFromSessionStorage("_formfields")),n="Default"===this.pdfViewer.printMode?this.frameDoc.document.getElementById("fields_"+e):this.printWindow.document.getElementById("fields_"+e),o)for(var a=JSON.parse(o),s=0;s<a.length;s++){var r=a[s];if(parseFloat(r.PageIndex)===e){var l=this.pdfViewer.formFieldsModule.createFormFields(r,e,s,n).currentField;if(l=l&&l.inputField?l.inputField:l){var d=r.LineBounds,h=r.Font;if(this.applyPosition(l,d,h,t,i),l.InsertSpaces=r.InsertSpaces,l.InsertSpaces){var p=parseInt(l.style.width)/l.maxLength-parseFloat(l.style.fontSize)/2-.6;l.style.letterSpacing=p+"px",l.style.fontFamily="monospace"}var c=this.pdfViewerBase.pageSize[e];if(c.width>c.height&&this.pdfViewer.enablePrintRotation){l.style.transform="rotate(-90deg)";var u=parseFloat(l.style.left),f=parseFloat(l.style.width)/2,g=parseFloat(l.style.height)/2,m=parseFloat(l.style.top),w=parseFloat(l.style.height);l.style.left=g-f+m+"px",l.style.top=c.width/i-w/t-(f/t-g/t+u)+"px"}"Textbox"===r.Name||"Password"===r.Name||"DropDown"===r.Name||"ListBox"===r.Name?l.style.backgroundColor="white":l.style.backgroundColor="transparent",r.IsSignatureField||(l.style.borderColor="transparent"),n.appendChild(l)}}}},e.prototype.applyPosition=function(e,t,i,n,o,a,s){if(t){var r=a?t.X/s/o:this.pdfViewer.formFieldsModule.ConvertPointToPixel(t.X)/o,l=a?t.Y/s/n:this.pdfViewer.formFieldsModule.ConvertPointToPixel(t.Y)/n,d=a?t.Width/s/o:this.pdfViewer.formFieldsModule.ConvertPointToPixel(t.Width)/o,h=a?t.Height/s/n:this.pdfViewer.formFieldsModule.ConvertPointToPixel(t.Height)/n,p=0;null!==i&&i.Height&&(e.style.fontFamily=i.Name,i.Italic&&(e.style.fontStyle="italic"),i.Bold&&(e.style.fontWeight="Bold"),p=this.pdfViewerBase.ConvertPointToPixel(i.Size)),sf.base.Browser.isIE&&(l-=1),"text"===e.type&&(h-=6,d-=7),e=e&&e.inputField?e.inputField:e,this.pdfViewerBase.setStyleToTextDiv(e,r,l,p,d,h,!0)}},e.prototype.printWindowOpen=function(){var e,t=this,i=navigator.userAgent;e="Default"===this.pdfViewer.printMode?this.frameDoc.document:this.printWindow.document;for(var n=0;n<this.printViewerContainer.children.length;n++){0===n&&(-1!==i.indexOf("Chrome")||-1!==i.indexOf("Safari")||-1!==i.indexOf("Firefox")?(e.write("<!DOCTYPE html>"),e.write("<html moznomarginboxes mozdisallowselectionprint><head><style>html, body { height: 100%; width:100% } img { height: 100%; width: 100%; display: block; }@media print { body { margin: 0cm; } img { width:auto; width:auto; box-sizing: border-box; }br, button { display: none; } div{ page-break-inside: avoid; }} @page{margin:0mm;  size:"+this.printWidth.toString()+"px "+this.printHeight.toString()+'px; }</style></head><body><center class="loader">')):(e.write("<!DOCTYPE html>"),e.write("<html><head><style>html, body { height: 100%; } img { height: 100%; width: 100%; }@media print { body { margin: 0cm; }img { width:auto; width:auto; box-sizing: border-box; }br, button { display: none; } div{ page-break-inside: avoid; }} @page{margin:0mm;  size:"+this.printWidth.toString()+"px "+this.printHeight.toString()+"px; }</style></head><body><center>")));var o=this.printViewerContainer.children[n].toDataURL();if(e.write('<div style="margin:0mm;width:'+this.printWidth.toString()+"px;height:"+this.printHeight.toString()+'px;position:relative"><img src="'+o+'" id="image_'+n+'" /><div id="fields_'+n+'" style="margin:0px;top:0px;left:0px;position:absolute;width:'+this.printWidth.toString()+"px;height:"+this.printHeight.toString()+'px;z-index:2"></div></div>'),this.pdfViewer.formFieldsModule){var a,s,r=this.pdfViewerBase.pageSize[n].width,l=this.pdfViewerBase.pageSize[n].height;l<r&&this.pdfViewer.enablePrintRotation?(a=l/this.printWidth,s=r/this.printHeight):(a=l/this.printHeight,s=r/this.printWidth),this.renderFieldsForPrint(n,a,s)}}if(sf.base.Browser.isIE||"edge"===sf.base.Browser.info.name||sf.base.Browser.isDevice||/Mobile/.test(navigator.userAgent)&&this.pdfViewer.enableDesktopMode)try{"Default"===this.pdfViewer.printMode?(this.pdfViewerBase.showPrintLoadingIndicator(!1),this.iframe.contentWindow.document.execCommand("print",!1,null)):this.printWindow.document.execCommand("print",!1,null)}catch(e){"Default"===this.pdfViewer.printMode?(this.pdfViewerBase.showPrintLoadingIndicator(!1),this.iframe.contentWindow.print()):this.printWindow.print()}else setTimeout((function(){"Default"===t.pdfViewer.printMode?(t.pdfViewerBase.showPrintLoadingIndicator(!1),t.iframe.contentWindow.print(),t.iframe.contentWindow.focus(),document.body.removeChild(t.iframe)):t.printWindow&&(t.printWindow.print(),t.printWindow.focus(),t.printWindow.close())}),200)},e.prototype.createPrintLoadingIndicator=function(e){var t=sf.base.createElement("div",{id:this.pdfViewer.dataId+"_printWindowcontainer"});t.style.height="100%",t.style.width="100%",t.style.position="absolute",t.style.zIndex=2e3,t.style.left=0,t.style.top=0,t.style.overflow="auto",t.style.backgroundColor="rgba(0, 0, 0, 0.3)",e.appendChild(t);var i=sf.base.createElement("div",{id:this.pdfViewer.dataId+"_printLoadingContainer"});i.style.position="absolute",i.style.width="50px",i.style.height="50px",i.style.left="46%",i.style.top="45%",t.style.zIndex=3e3,t.appendChild(i);var n=new Image;n.src="data:image/gif;base64,R0lGODlhNgA3APMAAP///wAAAHh4eBwcHA4ODtjY2FRUVNzc3MTExEhISIqKigAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAANgA3AAAEzBDISau9OOvNu/9gKI5kaZ4lkhBEgqCnws6EApMITb93uOqsRC8EpA1Bxdnx8wMKl51ckXcsGFiGAkamsy0LA9pAe1EFqRbBYCAYXXUGk4DWJhZN4dlAlMSLRW80cSVzM3UgB3ksAwcnamwkB28GjVCWl5iZmpucnZ4cj4eWoRqFLKJHpgSoFIoEe5ausBeyl7UYqqw9uaVrukOkn8LDxMXGx8ibwY6+JLxydCO3JdMg1dJ/Is+E0SPLcs3Jnt/F28XXw+jC5uXh4u89EQAh+QQJCgAAACwAAAAANgA3AAAEzhDISau9OOvNu/9gKI5kaZ5oqhYGQRiFWhaD6w6xLLa2a+iiXg8YEtqIIF7vh/QcarbB4YJIuBKIpuTAM0wtCqNiJBgMBCaE0ZUFCXpoknWdCEFvpfURdCcM8noEIW82cSNzRnWDZoYjamttWhphQmOSHFVXkZecnZ6foKFujJdlZxqELo1AqQSrFH1/TbEZtLM9shetrzK7qKSSpryixMXGx8jJyifCKc1kcMzRIrYl1Xy4J9cfvibdIs/MwMue4cffxtvE6qLoxubk8ScRACH5BAkKAAAALAAAAAA2ADcAAATOEMhJq7046827/2AojmRpnmiqrqwwDAJbCkRNxLI42MSQ6zzfD0Sz4YYfFwyZKxhqhgJJeSQVdraBNFSsVUVPHsEAzJrEtnJNSELXRN2bKcwjw19f0QG7PjA7B2EGfn+FhoeIiYoSCAk1CQiLFQpoChlUQwhuBJEWcXkpjm4JF3w9P5tvFqZsLKkEF58/omiksXiZm52SlGKWkhONj7vAxcbHyMkTmCjMcDygRNAjrCfVaqcm11zTJrIjzt64yojhxd/G28XqwOjG5uTxJhEAIfkECQoAAAAsAAAAADYANwAABM0QyEmrvTjrzbv/YCiOZGmeaKqurDAMAlsKRE3EsjjYxJDrPN8PRLPhhh8XDMk0KY/OF5TIm4qKNWtnZxOWuDUvCNw7kcXJ6gl7Iz1T76Z8Tq/b7/i8qmCoGQoacT8FZ4AXbFopfTwEBhhnQ4w2j0GRkgQYiEOLPI6ZUkgHZwd6EweLBqSlq6ytricICTUJCKwKkgojgiMIlwS1VEYlspcJIZAkvjXHlcnKIZokxJLG0KAlvZfAebeMuUi7FbGz2z/Rq8jozavn7Nev8CsRACH5BAkKAAAALAAAAAA2ADcAAATLEMhJq7046827/2AojmRpnmiqrqwwDAJbCkRNxLI42MSQ6zzfD0Sz4YYfFwzJNCmPzheUyJuKijVrZ2cTlrg1LwjcO5HFyeoJeyM9U++mfE6v2+/4PD6O5F/YWiqAGWdIhRiHP4kWg0ONGH4/kXqUlZaXmJlMBQY1BgVuUicFZ6AhjyOdPAQGQF0mqzauYbCxBFdqJao8rVeiGQgJNQkIFwdnB0MKsQrGqgbJPwi2BMV5wrYJetQ129x62LHaedO21nnLq82VwcPnIhEAIfkECQoAAAAsAAAAADYANwAABMwQyEmrvTjrzbv/YCiOZGmeaKqurDAMAlsKRE3EsjjYxJDrPN8PRLPhhh8XDMk0KY/OF5TIm4qKNWtnZxOWuDUvCNw7kcXJ6gl7Iz1T76Z8Tq/b7/g8Po7kX9haKoAZZ0iFGIc/iRaDQ40Yfj+RepSVlpeYAAgJNQkIlgo8NQqUCKI2nzNSIpynBAkzaiCuNl9BIbQ1tl0hraewbrIfpq6pbqsioaKkFwUGNQYFSJudxhUFZ9KUz6IGlbTfrpXcPN6UB2cHlgfcBuqZKBEAIfkECQoAAAAsAAAAADYANwAABMwQyEmrvTjrzbv/YCiOZGmeaKqurDAMAlsKRE3EsjjYxJDrPN8PRLPhhh8XDMk0KY/OF5TIm4qKNWtnZxOWuDUvCNw7kcXJ6gl7Iz1T76Z8Tq/b7yJEopZA4CsKPDUKfxIIgjZ+P3EWe4gECYtqFo82P2cXlTWXQReOiJE5bFqHj4qiUhmBgoSFho59rrKztLVMBQY1BgWzBWe8UUsiuYIGTpMglSaYIcpfnSHEPMYzyB8HZwdrqSMHxAbath2MsqO0zLLorua05OLvJxEAIfkECQoAAAAsAAAAADYANwAABMwQyEmrvTjrzbv/YCiOZGmeaKqurDAMAlsKRE3EsjjYxJDrPN8PRLPhfohELYHQuGBDgIJXU0Q5CKqtOXsdP0otITHjfTtiW2lnE37StXUwFNaSScXaGZvm4r0jU1RWV1hhTIWJiouMjVcFBjUGBY4WBWw1A5RDT3sTkVQGnGYYaUOYPaVip3MXoDyiP3k3GAeoAwdRnRoHoAa5lcHCw8TFxscduyjKIrOeRKRAbSe3I9Um1yHOJ9sjzCbfyInhwt3E2cPo5dHF5OLvJREAOwAAAAAAAAAAAA==",n.style.width="50px",n.style.height="50px",i.appendChild(n);var o=sf.base.createElement("div",{id:this.pdfViewer.dataId+"_printLabelContainer"});o.style.position="absolute",o.textContent="Loading ...",o.style.fontWeight="Bold",o.style.left="46%",o.style.top="54.5%",o.style.zIndex="3000",t.appendChild(o)},e.prototype.destroy=function(){this.printViewerContainer=void 0,this.frameDoc=void 0,this.printWindow=void 0},e.prototype.getModuleName=function(){return"Print"},e}(),pt=function(){function e(e,t){this.maintainTabIndex={},this.maintanMinTabindex={},this.isSignatureField=!1,this.isKeyDownCheck=!1,this.isMouseupOccurred=!1,this.previousZoomActionType=null,this.readOnlyCollection=[],this.isSignatureRendered=!1,this.signatureFieldCollection=[],this.selectedIndex=[],this.pdfViewer=e,this.pdfViewerBase=t}return e.prototype.renderFormFields=function(e){if(this.maxTabIndex=0,this.minTabIndex=-1,this.data=this.pdfViewerBase.getItemFromSessionStorage("_formfields"),this.data){this.formFieldsData=JSON.parse(this.data);var t=document.getElementById(this.pdfViewer.dataId+"_textLayer_"+e),i=document.getElementById(this.pdfViewer.dataId+"_pageCanvas_"+e),n=void 0;if(null!==this.formFieldsData&&null!==i&&null!==t){for(var o=!1,a=0;a<this.formFieldsData.length;a++){var s=this.formFieldsData[a];!o&&sf.base.isNullOrUndefined(s.ActualFieldName)&&s.PageIndex===e&&(n=parseInt(s.FieldName.split("_")[1]),o=!0)}for(a=0;a<this.formFieldsData.length;a++){var r=this.formFieldsData[a];if(""!==r.FieldName){r.IsInitialField&&(r.Name="InitialField");r.Font;if(parseFloat(r.PageIndex)==e){var l=this.createFormFields(r,e,a,null,n),d=l.currentField,h=l.count;if(d){var p=void 0,c=d.inputField;c&&(p=d.index,d=c);var u=this.createParentElement(r,e),f=r.LineBounds,g=r.Font,m=!1,w=0;if(0===r.Rotation?(m=!0,w=this.getAngle(e),u?u.style.transform="rotate("+w+"deg)":d.style.transform="rotate("+w+"deg)"):u?u.style.transform="rotate("+w+"deg)":d.style.transform="rotate("+w+"deg)",r.InsertSpaces?this.applyPosition(d,f,g,e,0,m):this.applyPosition(d,f,g,e,0,m,!1),d.InsertSpaces=r.InsertSpaces,d.InsertSpaces){var y=this.pdfViewerBase.getZoomFactor(),S=parseInt(d.style.width)/d.maxLength-parseFloat(d.style.fontSize)/2-.6*y;d.style.letterSpacing=S+"px",d.style.fontFamily="monospace",d.style.paddingLeft=S/2+"px"}r.uniqueID=this.pdfViewer.dataId+"input_"+e+"_"+a;for(var v=0;v<this.pdfViewer.formFieldCollections.length;v++)"text"!==d.type&&"password"!==d.type&&"textarea"!==d.type||"SignatureField"===r.Name||r.uniqueID===this.pdfViewer.formFieldCollections[v].id&&(this.pdfViewer.formFieldCollections[v].value=r.Text);if(/^((?!chrome|android).)*safari/i.test(navigator.userAgent)&&"DropDown"===r.Name&&(d.style.appearance="none",d.style.background="url(data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0Ljk1IDEwIj48ZGVmcz48c3R5bGU+LmNscy0xe2ZpbGw6I2ZmZjt9LmNscy0ye2ZpbGw6IzQ0NDt9PC9zdHlsZT48L2RlZnM+PHRpdGxlPmFycm93czwvdGl0bGU+PHJlY3QgY2xhc3M9ImNscy0xIiB3aWR0aD0iNC45NSIgaGVpZ2h0PSIxMCIvPjxwb2x5Z29uIGNsYXNzPSJjbHMtMiIgcG9pbnRzPSIxLjQxIDQuNjcgMi40OCAzLjE4IDMuNTQgNC42NyAxLjQxIDQuNjciLz48cG9seWdvbiBjbGFzcz0iY2xzLTIiIHBvaW50cz0iMy41NCA1LjMzIDIuNDggNi44MiAxLjQxIDUuMzMgMy41NCA1LjMzIi8+PC9zdmc+) no-repeat 100% 50%"),this.applyCommonProperties(d,e,a,r,m),this.checkIsReadonly(r,d),this.applyTabIndex(r,d,e),this.checkIsRequiredField(r,d),this.applyDefaultColor(d),this.updateFormFieldsCollection(r),"transparent"!=d.style.backgroundColor&&u&&(u.style.background="white"),0===r.Rotation){var b=this.getAngle(e);u?u.style.transform="rotate("+b+"deg)":d.style.transform="rotate("+b+"deg)"}if(u)u.appendChild(d),t.appendChild(u);else{d.style.position="absolute";var V=document.getElementById("signIcon"+e+"_"+p);V&&(V.style.left=d.style.left,V.style.top=d.style.top),t.appendChild(d)}d.addEventListener("focus",this.focusFormFields.bind(this)),d.addEventListener("blur",this.blurFormFields.bind(this)),d.addEventListener("click",this.updateFormFields.bind(this)),d.addEventListener("change",this.changeFormFields.bind(this)),d.addEventListener("keydown",this.updateFormFieldsValue.bind(this)),d.addEventListener("keyup",this.updateSameFieldsValue.bind(this)),n=h}}}}window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_formfields"),this.pdfViewerBase.setItemInSessionStorage(this.formFieldsData,"_formfields")}}},e.prototype.trim=function(e){return e.replace(/^\s+|\s+$/gm,"")},e.prototype.rgbaToHex=function(e){var t=e.substring(e.indexOf("(")).split(","),i=parseInt(this.trim(t[0].substring(1)),10),n=parseInt(this.trim(t[1]),10),o=parseInt(this.trim(t[2]),10),a=parseFloat(parseFloat(this.trim(t[3].substring(0,t[3].length-1))).toFixed(2)),s=[i.toString(16),n.toString(16),o.toString(16),Math.round(255*a).toString(16).substring(0,2)];return s.forEach((function(e,t){1===e.length&&(s[t]="0"+e)})),"#"+s.join("")},e.prototype.getListValues=function(e){for(var t=e.TextList,i=[],n=0;n<t.length;n++)t[n]===e.SelectedValue&&this.selectedIndex.push(n),i.push({itemName:t[n],itemValue:t[n]});return"ListBox"===this.getFormFieldType(e)&&(this.selectedIndex=e.SelectedList),i},e.prototype.createParentElement=function(e,t){var i;if("Textbox"===e.Name||"Password"===e.Name||"DropDown"===e.Name||"ListBox"===e.Name){(i=document.createElement("div")).style.background="white",(e.InsertSpaces||e.IsTransparent)&&(i.style.background="transparent");var n=e.LineBounds,o=e.Font;i.style.position="absolute";var a=!1;0===e.Rotation&&(a=!0);var s=e.InsertSpaces;this.applyPosition(i,n,o,t,0,a,!0,s)}return i},e.prototype.getAngle=function(e){var t=0,i=this.pdfViewerBase.pageSize[e];if(i.rotation)switch(i.rotation){case 0:t=0;break;case 1:t=90;break;case 2:t=180;break;case 3:t=270}return t},e.prototype.nextField=function(){this.signatureFieldNavigate(!0)},e.prototype.previousField=function(){this.signatureFieldNavigate(!1)},e.prototype.signatureFieldNavigate=function(e){var t,i=e,n=this.signatureFieldCollection;if(0===n.length&&(n=this.getSignField()),this.currentTarget){for(var o=0;o<n.length;o++)if(t=n[o],this.currentTarget.id===t.uniqueID){this.currentTarget=document.getElementById(t.uniqueID),this.getSignatureIndex(o,n.length,i);break}}else e&&(t=n[0]).uniqueID&&(this.currentTarget=document.getElementById(t.uniqueID),this.getSignatureIndex(0,n.length,i,!0))},e.prototype.getSignatureIndex=function(e,t,i,n){var o=e;n||(i?o++:o--),1===t?this.renderSignatureField(0):o<t&&o>=0?this.renderSignatureField(o):i?o>=t&&this.renderSignatureField(0):o<=0&&this.renderSignatureField(t-1)},e.prototype.renderSignatureField=function(e){var t,i=e,n=this.signatureFieldCollection;if(i<n.length){for(var o=0;o<n.length;o++){var a=n[i].uniqueID,s=n[o];if(a===s.uniqueID){var r=s.PageIndex>=0?s.PageIndex:s.pageNumber;this.pdfViewer.annotationModule.findRenderPageList(r)||this.pdfViewer.navigation.goToPage(r),this.currentTarget=document.getElementById(s.uniqueID),t=s;break}}if(null===this.currentTarget){r=t.PageIndex>=0?t.PageIndex:t.pageNumber;this.pdfViewer.navigation.goToPage(r),this.currentTarget=document.getElementById(t.uniqueID)}this.currentTarget&&("e-pdfviewer-signatureformfields-signature"===this.currentTarget.className?(document.getElementById(this.currentTarget.id).focus(),this.pdfViewer.select([this.currentTarget.id],null)):"e-pdfviewer-signatureformfields"===this.currentTarget.className&&document.getElementById(this.currentTarget.id).focus())}},e.prototype.setFocus=function(e){if(e){this.removeFocus();var t=document.getElementById(e);t.classList.add("e-pv-signature-focus");t.style.caretColor="transparent"}else this.currentTarget&&document.getElementById(this.currentTarget.id).focus()},e.prototype.removeFocus=function(){if(this.signatureFieldCollection){var e=this.signatureFieldCollection;0===e.length&&(e=this.getSignField());for(var t=0;t<this.signatureFieldCollection.length;t++){var i=this.signatureFieldCollection[t].uniqueID,n=document.getElementById(i);n&&n.classList.remove("e-pv-signature-focus")}}},e.prototype.getSignField=function(){return this.signatureFieldCollection=this.getFormFieldSignField(),this.signatureFieldCollection},e.prototype.getFormFieldSignField=function(){var e,t=this.pdfViewerBase.getItemFromSessionStorage("_formfields");if(t)for(var i=JSON.parse(t),n=0;n<i.length;n++)"SignatureField"===(e=i[n]).Name&&(e.uniqueID=this.pdfViewer.dataId+"input_"+e.PageIndex+"_"+n,this.signatureFieldCollection.push(i[n]));return this.signatureFieldCollection},e.prototype.formFieldCollections=function(){var e=this.pdfViewerBase.getItemFromSessionStorage("_formfields");if(e)for(var t=JSON.parse(e),i=0;i<t.length;i++){var n=t[i],o=n.Name;if("ink"!==n.Name){var a={name:this.retriveFieldName(n),id:this.pdfViewer.dataId+"input_"+parseFloat(n.PageIndex)+"_"+i,isReadOnly:!1,type:o,value:this.retriveCurrentValue(n),fontName:"",isRequired:n.IsRequired};"SignatureText"!==a.type&&this.pdfViewer.formFieldCollections.push(a)}}},e.prototype.updateFormFieldsCollection=function(e){var t,i=e.Name;t=null!=e.Value?e.Value:e.Text;var n={name:this.retriveFieldName(e),id:e.uniqueID,isReadOnly:e.IsReadonly,isRequired:e.IsRequired,isSelected:"CheckBox"!==i&&e.Selected,isChecked:"RadioButton"!==i&&e.Selected,type:i,value:"ListBox"===i||"DropDown"===i?e.SelectedValue:t,fontName:e.FontFamily?e.FontFamily:""};this.pdfViewer.formFieldCollections[this.pdfViewer.formFieldCollections.findIndex((function(e){return e.id===n.id}))]=n},e.prototype.updateFormFieldValues=function(e){if(this.readOnlyCollection.push(e.id),e){var t=document.getElementById(e.id);t&&(e.isReadOnly?(t.disabled=!0,t.style.backgroundColor="",t.style.cursor="default"):(""===t.style.backgroundColor&&(t.style.backgroundColor="rgba(0, 20, 200, 0.2)"),t.disabled=!1,t.style.cursor="")),this.updateDataInSession(t)}},e.prototype.retriveFieldName=function(e){var t;switch(e.Name){case"Textbox":case"Password":case"SignatureField":t=e.FieldName;break;case"RadioButton":case"CheckBox":t=e.GroupName;break;case"DropDown":case"ListBox":t=e.Text}return t},e.prototype.retriveCurrentValue=function(e){var t;switch(e.Name){case"Textbox":case"Password":t=e.Text;break;case"SignatureField":t=e.Value;break;case"RadioButton":case"CheckBox":t=e.Selected;break;case"DropDown":t=e.SelectedValue;break;case"ListBox":t=e.SelectedList}return t},e.prototype.getSignatureBounds=function(e,t,i){var n=this.pdfViewerBase.pageSize[i],o=0;switch(n.rotation){case 0:case 4:o=t;break;case 1:o={x:t.x+e.Width+t.width/3.5,y:n.width-e.X+t.height/4};break;case 2:o={x:n.width-t.x-t.width,y:n.height-t.y-t.height};break;case 3:o={x:t.y-t.width/2+t.height,y:t.x+t.width/3}}return o},e.prototype.downloadFormFieldsData=function(){var e=this.pdfViewerBase.getItemFromSessionStorage("_formfields");if(e){for(var t=JSON.parse(e),i={},n=[],o=0;o<t.length;o++)for(var a=o+1;a<t.length;a++)t[o].FieldName==t[a].FieldName&&(t[o].flagSet=!0,t[a].flagSet=!0);for(var s=0;s<t.length;s++){var r=t[s],l=r.IsRequired;if("Textbox"===r.Name||"Password"===r.Name||r.Multiline)!l||""!==r.Text&&null!==r.Text?delete this.pdfViewerBase.nonFillableFields[r.FieldName]:(this.pdfViewerBase.validateForm=!0,this.pdfViewerBase.nonFillableFields[r.FieldName]=r.Text),n={fieldValue:r.Text,isReadOnly:r.IsReadonly},i[r.FieldName]=n;else if("RadioButton"===r.Name)l&&!1===r.Selected?(this.pdfViewerBase.validateForm=!0,this.pdfViewerBase.nonFillableFields[r.GroupName]=r.Value):delete this.pdfViewerBase.nonFillableFields[r.GroupName],r.Value&&r.Selected?(n={fieldValue:r.Value,isReadOnly:r.IsReadonly},i[r.GroupName]=n):void 0!==i[r.GroupName]&&null!==i[r.GroupName]||(n={fieldValue:r.Selected,isReadOnly:r.IsReadonly},i[r.GroupName]=n);else if("CheckBox"===r.Name)l&&!1===r.Selected?(this.pdfViewerBase.validateForm=!0,this.pdfViewerBase.nonFillableFields[r.GroupName]=r.Selected):delete this.pdfViewerBase.nonFillableFields[r.GroupName],r.CheckboxIndex&&r.Selected?(n={fieldValue:r.CheckboxIndex,isReadOnly:r.IsReadonly},i[r.GroupName]=n):void 0!==i[r.GroupName]&&null!==i[r.GroupName]||(n={fieldValue:r.Selected,isReadOnly:r.IsReadonly},i[r.GroupName]=n);else if("DropDown"===r.Name)l&&""===r.SelectedValue?(this.pdfViewerBase.validateForm=!0,this.pdfViewerBase.nonFillableFields[r.FieldName]=r.SelectedValue):delete this.pdfViewerBase.nonFillableFields[r.FieldName],n={fieldValue:r.SelectedValue,isReadOnly:r.IsReadonly},i[r.FieldName]=n;else if("ListBox"===r.Name){for(var d=r.TextList,h=[],p=0;p<r.SelectedList.length;p++){var c=r.SelectedList[p];h.push(d[c])}n={fieldValue:JSON.stringify(h),isReadOnly:r.IsReadonly},i[r.Text]=n}else if("SignatureField"===r.Name){var u=void 0;if(null!==r.Value&&""!==r.Value||this.addSignaturePath(r),r.Value&&""!==r.Value){u=r.Value;var f=r.fontFamily?r.fontFamily:r.FontFamily;if(f)r.flagSet?(i[r.FieldName+"fontName_"+s]=f,i[r.FieldName+"fontSize_"+s]=r.fontSize?r.fontSize:r.FontSize):(i[r.FieldName+"fontName"]=f,i[r.FieldName+"fontSize"]=r.fontSize?r.fontSize:r.FontSize);else if(r.Value.split("base64,")[1])r.flagSet?i[r.FieldName+"ImageData_"+s]=!0:i[r.FieldName+"ImageData"]=!0;else{var g=sf.drawings.processPathData(r.Value);u=sf.drawings.splitArrayCollection(g)}}if(l&&null===r.Value||""===r.Value?(this.pdfViewerBase.validateForm=!0,this.pdfViewerBase.nonFillableFields[r.FieldName]=JSON.stringify(u)):delete this.pdfViewerBase.nonFillableFields[r.FieldName],i[r.FieldName]=JSON.stringify(u),r.Bounds){var m=this.getSignatureBounds(r.LineBounds,r.Bounds,r.PageIndex);r.Bounds.x=m.x,r.Bounds.y=m.y,r.flagSet?i[r.FieldName+"bounds_"+s]=JSON.stringify(r.Bounds):i[r.FieldName+"bounds"]=JSON.stringify(r.Bounds)}else{var w=r.LineBounds;m={x:this.ConvertPointToPixel(w.X),y:this.ConvertPointToPixel(w.Y),width:this.ConvertPointToPixel(w.Width),height:this.ConvertPointToPixel(w.Height)};i[r.FieldName+"bounds"]=JSON.stringify(m)}r.flagSet?i[r.FieldName+"isReadOnly_"+s]=r.IsReadonly:i[r.FieldName+"isReadOnly"]=r.IsReadonly}}return JSON.stringify(i)}},e.prototype.focusFormFields=function(e){var t=e.target;if(t&&"e-pdfviewer-signatureformfields"!==t.className&&"e-pdfviewer-signatureformfields e-pv-signature-focus"!==t.className){var i=t.style.backgroundColor,n=i.lastIndexOf(","),o=i.slice(0,n+1)+0+")";t.style.backgroundColor=o,t.style.boxShadow="0 0 5px "+("transparent"===t.style.borderColor?"#000000":t.style.borderColor)}else t&&!t.disabled&&("e-pdfviewer-signatureformfields"!==t.className&&"e-pdfviewer-signatureformfields-signature"!==t.className&&"e-pdfviewer-signatureformfields e-pv-signature-focus"!==t.className&&"e-pdfviewer-signatureformfields-signature  e-pv-signature-focus"!==t.className||this.setFocus(t.id))},e.prototype.blurFormFields=function(e){var t=e.target;if(t.InsertSpaces&&this.isKeyDownCheck){var i=parseInt(t.style.width)-parseInt(t.style.height)/2;t.style.width=i+"px",this.isKeyDownCheck=!1}"checkbox"===t.type?this.pdfViewer.fireFocusOutFormField(t.name,t.checked):this.pdfViewer.fireFocusOutFormField(t.name,t.value);var n=t.style.backgroundColor,o=n.lastIndexOf(","),a=n.slice(0,o+1)+.2+")";t.style.backgroundColor=a,t.style.boxShadow="none"},e.prototype.updateFormFields=function(e){var t=e.target;"e-pdfviewer-ListBox"===t.className?(t=t.parentElement,this.updateDataInSession(t)):"e-pdfviewer-signatureformfields"===t.className?this.currentTarget=t:"e-pv-buttonItem"!==t.className&&"button"!==t.type||this.pdfViewer.fireButtonFieldClickEvent(t.value,t.name,t.id);for(var i=0;i<this.pdfViewer.formFieldCollections.length;i++)t.id!==this.pdfViewer.formFieldCollections[i].id||t.disabled||(this.pdfViewer.fireFormFieldClickEvent("formFieldClicked",this.pdfViewer.formFieldCollections[i]),"e-pdfviewer-signatureformfields"!==t.className&&"e-pdfviewer-signatureformfields-signature"!==t.className&&"e-pdfviewer-signatureformfields e-pv-signature-focus"!==t.className&&"e-pdfviewer-signatureformfields-signature  e-pv-signature-focus"!==t.className||this.setFocus(t.id))},e.prototype.drawSignature=function(e,t,i,n){for(var o,a,s,r,l=this,d=this.pdfViewerBase.getItemFromSessionStorage("_formfields"),h=JSON.parse(d),p=this.currentTarget?this.currentTarget.name:i.name?i.name:i.offsetParent.name,c=function(){if(h[f].FieldName===p&&!sf.base.isNullOrUndefined(h[f].ActualFieldName)){var d=i=document.getElementById(h[f].uniqueID),c=d.offsetParent.offsetParent.id.split("_")[0],g=u.pdfViewer.nameTable[c];i&&i.offsetParent&&g&&(s=i.getBoundingClientRect(),r=i.offsetParent.offsetParent.offsetParent.getBoundingClientRect(),u.pdfViewerBase.drawSignatureWithTool=!0);var m,w,y=t||u.pdfViewerBase.signatureModule.outputString,S=n||u.pdfViewerBase.signatureModule.fontName,v=u.pdfViewerBase.getZoomFactor(),b=u.pdfViewerBase.drawSignatureWithTool?s.width/v:parseFloat(d.style.width)/v,V=u.pdfViewerBase.drawSignatureWithTool?s.height/v:parseFloat(d.style.height)/v,A=u.pdfViewerBase.drawSignatureWithTool?(s.left-r.left)/v:parseFloat(d.style.left)/v,x=u.pdfViewerBase.drawSignatureWithTool?(s.top-r.top)/v:parseFloat(d.style.top)/v,C=u.pdfViewerBase.drawSignatureWithTool?u.pdfViewerBase.getActivePage():parseFloat(d.id.split("_")[1]),I=u.pdfViewerBase.drawSignatureWithTool&&i.nextElementSibling?parseFloat(i.nextElementSibling.id.split("_")[1]):parseFloat(d.id.split("_")[2]),k=u.pdfViewerBase.signatureModule.saveImageString,T=u.getAngle(C);if("Type"===e){if(S||(S="Helvetica"),a=u.getSignBounds(I,T,C,v,A,x,b,V),u.pdfViewer.signatureFitMode&&"Default"!==u.pdfViewer.signatureFitMode||(a=u.getDefaultBoundsforSign(a)),"SignatureText"===(o={id:d.id,bounds:{x:a.x,y:a.y,width:a.width,height:a.height},pageIndex:C,data:y,modifiedDate:"",shapeAnnotationType:"SignatureText",opacity:1,rotateAngle:u.rotateAngle,annotName:"SignatureField",comments:[],review:{state:"",stateModel:"",modifiedDate:"",author:""},fontFamily:S,fontSize:a.height/1.35}).shapeAnnotationType){var M=u.getTextWidth(o.data,o.fontSize,o.fontFamily),P=1;M>a.width&&(P=a.width/M),o.fontSize=u.getFontSize(Math.floor(o.fontSize*P))}k=o.data,m=o.fontFamily,w=o.fontSize}else if("Image"===e){a=u.getSignBounds(I,T,C,v,A,x,b,V);var B=new Image,E=i;B.src=y,B.onload=function(){l.imageOnLoad(a,B,y,C,T,d,g,k,m,w,E)}}else if(-1!==y.indexOf("base64"))a=u.getSignBounds(I,T,C,v,A,x,b,V),u.pdfViewer.signatureFitMode&&"Default"!==u.pdfViewer.signatureFitMode||(a=u.getDefaultBoundsforSign(a)),o={id:d.id,bounds:{x:a.x,y:a.y,width:a.width,height:a.height},pageIndex:C,data:y,modifiedDate:"",shapeAnnotationType:"SignatureImage",opacity:1,rotateAngle:u.rotateAngle,annotName:"SignatureField",comments:[],review:{state:"",stateModel:"",modifiedDate:"",author:""}},k=o.data;else{if(u.pdfViewer.signatureFitMode&&"Default"!==u.pdfViewer.signatureFitMode)a=u.getSignBounds(I,T,C,v,A,x,b,V);else{var N=u.updateSignatureAspectRatio(y,!1,d);(a=u.getSignBounds(I,T,C,v,A,x,N.width,N.height,!0)).x=a.x+N.left,a.y=a.y+N.top}o={id:d.id,bounds:{x:a.x,y:a.y,width:a.width,height:a.height},pageIndex:C,data:y,modifiedDate:"",shapeAnnotationType:"Path",opacity:1,rotateAngle:u.rotateAngle,annotName:"SignatureField",comments:[],review:{state:"",stateModel:"",modifiedDate:"",author:""}}}if(u.pdfViewerBase.drawSignatureWithTool&&g){o.id=g.id+"_content";var D=u.pdfViewer.add(o);g.wrapper.children.push(D.wrapper)}else u.pdfViewer.add(o);if(o&&"Path"===o.shapeAnnotationType&&""!==y){u.pdfViewerBase.currentSignatureAnnot=o;var F={currentHeight:V,currentWidth:b,currentLeft:A,currentTop:x};u.pdfViewerBase.signatureModule.addSignatureCollection(a,F),k=u.pdfViewerBase.signatureModule.saveImageString,u.pdfViewerBase.currentSignatureAnnot=null}var L=document.getElementById(u.pdfViewer.dataId+"_annotationCanvas_"+C);u.pdfViewer.renderDrawing(L,C),u.pdfViewerBase.signatureModule.showSignatureDialog(!1),"e-pdfviewer-signatureformfields e-pv-signature-focus"===d.className?d.className="e-pdfviewer-signatureformfields-signature e-pv-signature-focus":d.className="e-pdfviewer-signatureformfields-signature",u.updateDataInSession(d,o.data,o.bounds,m,w),d.style.pointerEvents="none",u.pdfViewerBase.signatureModule.hideSignaturePanel(),u.pdfViewer.annotation&&u.pdfViewer.annotation.addAction(o.pageIndex,null,o,"FormField Value Change","",o,o),u.pdfViewer.fireSignatureAdd(o.pageIndex,o.id,"HandWrittenSignature",o.bounds,o.opacity,null,null,k),u.pdfViewer.fireFocusOutFormField(d.name,y),u.pdfViewerBase.drawSignatureWithTool=!1}},u=this,f=0;f<h.length;f++)c()},e.prototype.imageOnLoad=function(e,t,i,n,o,a,s,r,l,d,h){var p;if(h&&h.offsetParent&&s&&(this.pdfViewerBase.drawSignatureWithTool=!0),!this.pdfViewer.signatureFitMode||"Default"===this.pdfViewer.signatureFitMode){var c=Math.min(e.height/10,e.width/10),u=e.height-c,f=e.width-c,g=t.width,m=t.height,w=e.width,y=e.height,S=Math.min(f/g,u/m);if(e.width=g*S,e.height=m*S,e.x=e.x+(w-e.width)/2,e.y=e.y+(y-e.height)/2,r=(p={id:a.id,bounds:{x:e.x,y:e.y,width:e.width,height:e.height},pageIndex:n,data:i,modifiedDate:"",shapeAnnotationType:"SignatureImage",opacity:1,rotateAngle:o,annotName:"SignatureField",comments:[],review:{state:"",stateModel:"",modifiedDate:"",author:""}}).data,this.pdfViewerBase.drawSignatureWithTool&&s){p.id=s.id+"_content";var v=this.pdfViewer.add(p);s.wrapper.children.push(v.wrapper)}else this.pdfViewer.add(p);var b=document.getElementById(this.pdfViewer.element.id+"_annotationCanvas_"+n);this.pdfViewer.renderDrawing(b,n),this.pdfViewerBase.signatureModule.showSignatureDialog(!1),"e-pdfviewer-signatureformfields e-pv-signature-focus"===a.className?a.className="e-pdfviewer-signatureformfields-signature e-pv-signature-focus":a.className="e-pdfviewer-signatureformfields-signature",this.updateDataInSession(a,p.data,p.bounds,l,d),a.style.pointerEvents="none",this.pdfViewer.annotation&&this.pdfViewer.annotation.addAction(p.pageIndex,null,p,"FormField Value Change","",p,p),"SignatureImage"===p.shapeAnnotationType&&this.pdfViewer.fireSignatureAdd(p.pageIndex,p.id,p.shapeAnnotationType,p.bounds,p.opacity,null,null,r),this.pdfViewer.fireFocusOutFormField(a.name,i)}this.pdfViewerBase.signatureModule.hideSignaturePanel(),this.pdfViewerBase.drawSignatureWithTool=!1},e.prototype.getDefaultBoundsforSign=function(e){return{x:e.x+4,y:e.y+4,width:e.width-8,height:e.height-8}},e.prototype.getSignBounds=function(e,t,i,n,o,a,s,r,l){var d=document.getElementById("signIcon"+i+"_"+e),h=o*n-parseFloat(d.style.left)*n/n;return 90===t||270===t?(this.rotateAngle=0,l?{x:o-h/n-n,y:a+h/n+n,width:s,height:r}:{x:o-h/n-n,y:a+h/n+n,width:r,height:s}):(this.rotateAngle=0,{x:o,y:a,width:s,height:r})},e.prototype.updateSameFieldsValue=function(e){if(this.formFieldsData)for(var t=0;t<this.formFieldsData.length;t++){var i=this.formFieldsData[t];if(e.target.name===i.FieldName&&e.target.id!==i.uniqueID){var n=document.getElementById(this.formFieldsData[t].uniqueID);n?n.value=e.target.value:(i.Text=e.target.value,this.pdfViewerBase.setItemInSessionStorage(this.formFieldsData,"_formfields"))}}},e.prototype.updateFormFieldsValue=function(e){var t,i,n=e.target;if(n.InsertSpaces&&!this.isKeyDownCheck){var o=parseInt(n.style.width)+parseInt(n.style.height)/2;n.style.width=o+"px",this.isKeyDownCheck=!0}if(9===e.which&&n&&("e-pdfviewer-formFields"===n.className||"e-pdfviewer-signatureformfields e-pv-signature-focus"===n.className||"e-pdfviewer-signatureformfields-signature"===n.className)){var a=n.id.split("input_")[1].split("_")[0],s=document.getElementById(this.pdfViewer.element.id+"_textLayer_"+parseInt(a)).getElementsByClassName("e-pdfviewer-formFields"),r=!0;if(t=this.pdfViewer.formFieldCollections.findIndex((function(e){return e.id===n.id})),!e.shiftKey&&"Tab"===e.key){if(!(t+1<this.pdfViewer.formFieldCollections.length))return;i=this.pdfViewer.formFieldCollections[t+1]}this.pdfViewer.focusFormField(i),r=!0,e.preventDefault();for(var l=n.tabIndex+1;!r;){for(var d=0;d<s.length;d++)if(r=!1,s[d].tabIndex===l){s[d].focus(),r=!0,e.preventDefault();break}this.maintainTabIndex[a]===l&&(r=!0),l+=1}}if(e.shiftKey&&"Tab"===e.key){var h=this.pdfViewer.formFieldCollections.findIndex((function(e){return e.id===n.id})),p=h>0?this.pdfViewer.formFieldCollections[h-1]:this.pdfViewerBase.previousShiftTabElement;if(p&&p===this.pdfViewerBase.previousShiftTabElement){var c=document.getElementById(p.id);c&&c.focus()}else p||(p=this.pdfViewer.formFieldCollections[this.pdfViewer.formFieldCollections.length-1]),this.pdfViewer.focusFormField(p);e.preventDefault()}if(e.currentTarget.classList.contains("e-pdfviewer-signatureformfields")||e.currentTarget.classList.contains("e-pdfviewer-signatureformfields-signature"))if("Enter"===e.key){var u=e.target;this.currentTarget=u;for(var f=0;f<this.pdfViewer.formFieldCollections.length;f++)u.id===this.pdfViewer.formFieldCollections[f].id&&(this.setFocus(u.id),this.pdfViewer.fireFormFieldClickEvent("formFieldClicked",this.pdfViewer.formFieldCollections[f]))}else e.preventDefault()},e.prototype.changeFormFields=function(e){var t=e.target;this.updateDataInSession(t)},e.prototype.calculateSignatureBounds=function(e,t,i,n,o,a){var s=i/e,r=n/t,l=this.pdfViewerBase.getZoomFactor(),d=0,h=0,p=!1,c=!1,u=0,f=0;if(o)d=this.pdfViewer.handWrittenSignatureSettings.width?this.pdfViewer.handWrittenSignatureSettings.width:150,h=this.pdfViewer.handWrittenSignatureSettings.height?this.pdfViewer.handWrittenSignatureSettings.height:100;else{var g="100%"===a.style.width?a.clientWidth:parseFloat(a.style.width),m="100%"===a.style.height?a.clientHeight:parseFloat(a.style.height),w=g/m,y=m/g,S=e/t,v=t/e;if(w>S||y>S||Math.abs(w-y)<=1){var b=0;y>S||Math.abs(w-y)<=1?(c=!0,b=y/v):(p=!0,b=w/S),"rotate(90deg)"===a.style.transform||"rotate(270deg)"===a.style.transform?(d=m/l,h=g/l):(p&&(u=g/l,d=g/b/l,h=m/l),c&&(f=m/l,d=g/l,h=m/b/l))}else"rotate(90deg)"===a.style.transform||"rotate(270deg)"===a.style.transform?(d=m/l,h=g/l):(d=g/l,h=m/l)}var V=(e-i)/2,A=(t-n)/2;if(p)V=V/e*u,V+=(u*s-d*s)/2,A=A/t*h;else if(c){V=V/e*d,A=A/t*f,A+=(f*r-h*r)/2}else V=V/e*d,A=A/t*h;return{currentLeftDiff:V,currentTopDiff:A,currentWidth:d*=s,currentHeight:h*=r}},e.prototype.updateSignatureAspectRatio=function(e,t,i){for(var n,o,a=sf.drawings.processPathData(e),s=sf.drawings.splitArrayCollection(a),r=-1,l=-1,d=-1,h=-1,p=document.getElementById(this.pdfViewer.dataId+"_signatureCanvas_"),c=0;c<s.length;c++){var u=s[c];if(-1===r)r=parseFloat(u.x.toString()),d=parseFloat(u.x.toString()),l=parseFloat(u.y.toString()),h=parseFloat(u.y.toString());else{var f=parseFloat(u.x.toString()),g=parseFloat(u.y.toString());r>=f&&(r=f),l>=g&&(l=g),d<=f&&(d=f),h<=g&&(h=g)}}n=p?p.clientWidth:650,o=p?p.clientHeight:300;var m=d-r,w=h-l,y=this.calculateSignatureBounds(n,o,m,w,t,i);if(t){var S=this.pdfViewerBase.getZoomFactor(),v=this.pdfViewerBase.currentPageNumber-1,b=document.getElementById(this.pdfViewer.dataId+"_pageDiv_"+v);return{x:(parseFloat(b.style.width)/2-y.currentWidth/2)/S,y:(parseFloat(b.style.height)/2-y.currentHeight/2)/S,width:y.currentWidth,height:y.currentHeight}}return{left:y.currentLeftDiff,top:y.currentTopDiff,width:y.currentWidth,height:y.currentHeight}},e.prototype.updateDataInSession=function(e,t,i,n,o){this.pdfViewerBase.updateDocumentEditedProperty(!0);var a=[],s=" ",r=0,l=this.pdfViewerBase.getItemFromSessionStorage("_formfields");if(l){var d=JSON.parse(l);e&&"checkbox"!==e.type&&"radio"!==e.type&&(a=d.filter((function(t){return t.uniqueID===e.id}))).length>0&&(s=a[0].FieldName,r=d.filter((function(e){return e.FieldName===s})).length);for(var h=0;h<d.length;h++){var p=d[h];if(p.ActualFieldName===e.name&&(p.selectedIndex=e.selectedIndex),e.classList&&e.classList.contains("e-pdfviewer-signatureformfields-signature")?p.uniqueID===e.id:p.uniqueID===e.id||s===p.FieldName){if(e&&"text"===e.type||"password"===e.type||"textarea"===e.type||e.classList&&e.classList.contains("e-pdfviewer-signatureformfields-signature")){var c=e;c.classList.contains("e-pdfviewer-signatureformfields")||c.classList.contains("e-pdfviewer-signatureformfields-signature")?(t&&(p.Value=t),i&&(p.Bounds=i),n&&(p.FontFamily=n,p.FontSize=o)):(p.Text=e.value,p.Value=e.value)}else if("radio"===e.type){if(e.checked){for(var u=0;u<d.length;u++){d[u];d[u].GroupName===e.name&&(d[u].Selected=!1)}if(e.value==p.Value){p.Selected=!0;break}p.Selected=!1}}else if("checkbox"===e.type){for(u=0;u<d.length;u++){var f=d[u];if(f.GroupName===e.name){p.CheckBoxGroupName===f.CheckBoxGroupName&&e.checked?f.Selected=!0:f.Selected=!1;var g=document.getElementById(f.uniqueID);g&&(p.GroupName===e.name&&p.uniqueID!==g.id&&p.CheckBoxGroupName===f.CheckBoxGroupName?e.checked?(p.Selected=!0,g.checked=!0):(p.Selected=!1,g.checked=!1):p.GroupName===e.name&&p.uniqueID!==g.id&&(p.Selected=!1,g.checked=!1))}}e.checked?p.Selected=!0:p.Selected=!1}else if("select-one"===e.type&&0===e.size)for(var m=e.options[e.selectedIndex].textContent,w=e.children,y=0;y<w.length;y++)w[y].textContent===m&&(p.SelectedValue=m);else if("select-multiple"===e.type||e.size>0){m=e.selectedOptions;p.SelectedList=[];for(var S=0;S<m.length;S++)for(w=e.children,y=0;y<w.length;y++)w[y]===m[S]&&p.SelectedList.push(y)}if(e.disabled&&(p.IsReadonly=!0),this.updateFormFieldsCollection(p),0==--r)break}else e&&null!=e.getAttribute("list")&&"text"===e.type&&p.uniqueID===e.list.id&&(p.SelectedValue=e.value);this.updateFormFieldsCollection(p)}window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_formfields"),this.formFieldsData=d,this.pdfViewerBase.setItemInSessionStorage(d,"_formfields")}},e.prototype.applyCommonProperties=function(e,t,i,n,o){var a=document.getElementById(this.pdfViewer.dataId+"input_"+t+"_"+i);if(a){var s=document.getElementById(this.pdfViewer.dataId+"_textLayer_"+t);"select-one"!==e.type&&"text"!==e.type&&"textarea"!==e.type||a.parentElement===s||a.parentElement.remove(),a.remove()}var r,l,d,h,p=document.getElementById("signIcon"+t+"_"+t),c=parseFloat(e.style.left),u=parseInt(e.style.top),f=parseFloat(e.style.width),g=parseFloat(e.style.height),m=this.pdfViewerBase.getZoomFactor();p&&!o&&(r=parseFloat(p.style.width),l=parseFloat(p.style.height),"rotate(90deg)"==p.style.transform&&(p.style.transform="rotate(0deg)",d=g/2,h=r*m,p.style.left=c-(d-r*m)+h/2+"px"),"rotate(180deg)"==p.style.transform&&(p.style.transform="rotate(0deg)",p.style.left=c+"px",p.style.top=u+"px"),"rotate(270deg)"==p.style.transform&&(p.style.transform="rotate(0deg)",d=g/2,h=r*m,p.style.left=c-(d-h)+h/2+"px",p.style.top=u+(f+l*m)+l*m/2+"px")),n.IsSignatureField&&this.isSignatureField?(e.className="e-pdfviewer-signatureformfields-signature",e.style.pointerEvents="none"):n.IsSignatureField?n.Value?(e.className="e-pdfviewer-signatureformfields-signature",e.style.pointerEvents="none"):e.className="e-pdfviewer-signatureformfields":"Button"!==n.Name&&(e.className="e-pdfviewer-formFields"),e.id=this.pdfViewer.dataId+"input_"+t+"_"+i,e.style.zIndex=1e3},e.prototype.createFormFields=function(e,t,i,n,o){var a;switch(e.Name){case"Textbox":a=this.createTextBoxField(e,t,"text");break;case"Password":a=this.createTextBoxField(e,t,"password");break;case"RadioButton":a=this.createRadioBoxField(e,t,"radio");break;case"CheckBox":a=this.createRadioBoxField(e,t,"checkbox",n);break;case"DropDown":a=this.createDropDownField(e,t,i,n);break;case"ListBox":a=this.createListBoxField(e,t);break;case"SignatureField":a=this.createSignatureField(e,t,i,n,o);var s=!1;0===e.Rotation&&(s=!0),e.Value&&""!==e.Value&&(this.renderExistingAnnnot(e,i,n,s),this.isSignatureRendered=!0,o++);break;case"Button":a=this.createButtonField(e,t);break;case"ink":case"SignatureText":case"SignatureImage":e.Value&&""!==e.Value&&!this.isSignatureRendered&&this.renderExistingAnnnot(e,i,n)}return{currentField:a,count:o}},e.prototype.getFormFieldType=function(e){var t;switch(e.Name){case"Textbox":t="Textbox";break;case"Password":t="Password";break;case"RadioButton":t="RadioButton";break;case"CheckBox":t="CheckBox";break;case"DropDown":t="DropDown";break;case"ListBox":t="ListBox";break;case"SignatureField":t="SignatureField",e.IsInitialField&&(t="InitialField");break;case"InitialField":t="InitialField"}return t},e.prototype.applyZoomActionType=function(e,t){if("actualSize"===e.zoomActionType)t.pdfViewer.magnificationModule.isAutoZoom=!1,t.pdfViewer.magnificationModule.zoomTo(100);else if("fitToWidth"===e.zoomActionType)t.pdfViewer.magnificationModule.isAutoZoom=!1,t.pdfViewer.magnificationModule.fitToWidth();else if("fitToPage"===e.zoomActionType)t.pdfViewer.magnificationModule.isAutoZoom=!1,t.pdfViewer.magnificationModule.fitToPage();else if("namedDestination"===e.zoomActionType)-1!=e.ZoomValue&&null!=e.ZoomValue&&(t.pdfViewer.magnificationModule.isAutoZoom=!1,t.pdfViewer.magnificationModule.zoomTo(e.ZoomValue));else if("customZoom"===e.zoomActionType){var i=this.applyCustomZoom(e,t);100*i!=null&&100*i>0&&(t.pdfViewer.magnificationModule.isAutoZoom=!1,t.pdfViewer.magnificationModule.zoomTo(100*i))}},e.prototype.applyCustomZoom=function(e,t){var i=void 0,n=void 0,o=void 0,a=void 0,s=void 0,r=e.BoundX,l=e.BoundY,d=e.BoundHeight,h=e.BoundWidth,p=t.pdfViewerBase.viewerContainer.getBoundingClientRect().width,c=t.pdfViewerBase.viewerContainer.getBoundingClientRect().height;return null!=d&&null!=r&&null!=h&&null!=l&&(i=d-r,n=h-l),i&&null!=n&&(o=p/i,a=c/n),null!=o&&null!=a&&(s=Math.min(o,a)),s},e.prototype.createButtonField=function(e,t){var i=document.createElement("input");e.Value?(i.type="image",i.src=e.Value):i.type="button",i.className="e-pv-buttonItem",""!==e.Text?i.value=e.Text:i.value="",i.name=e.FieldName;var n=this,o=n.pdfViewerBase.pageSize[t].height,a=void 0;null!=(isNaN(parseInt(e.TargetIndex))?null:parseInt(e.TargetIndex))&&(a=n.pdfViewerBase.pageSize[e.TargetIndex]);var s=isNaN(parseFloat(e.FocusDestination))?null:parseFloat(e.FocusDestination),r=isNaN(parseFloat(e.BlurDestination))?null:parseFloat(e.BlurDestination);if(a){if(["MouseUp","MouseDown","MouseEnter","MouseLeave","Focus","Blur"].forEach((function(t){var s=parseFloat(e[t+"Destination"]);if(null!=(isNaN(s)?null:s)){var r=a.top*n.pdfViewerBase.getZoomFactor()+(o-s)*n.pdfViewerBase.getZoomFactor();void 0!==r&&i.addEventListener(t.toLowerCase(),(function(){n.bindButtonFieldAction(this,n,t,e,r)}))}})),null!=s){var l=a.top*n.pdfViewerBase.getZoomFactor()+(o-s)*n.pdfViewerBase.getZoomFactor();void 0!==l&&(i.onmouseup=function(){n.bindButtonFieldAction(this,n,"mouseup",e,l)})}else null!=r&&(i.onmouseup=function(){var e=document.getElementById(this.id);return null!=e&&e.focus(),!1})}return i},e.prototype.bindButtonFieldAction=function(e,t,i,n,o){if(null!=e){var a=n[i+"Destination"];if(a||(a=n.FocusDestination),null==a)return void(t.pdfViewerBase.viewerContainer.onscroll=null);t.pdfViewerBase.viewerContainer.onscroll=function(){this.isMouseupOccurred&&null!=n.zoomActionType&&(this.applyZoomActionType(n,t),this.isMouseupOccurred=!1,t.pdfViewerBase.viewerContainer.onscroll=null)}.bind(this),t.pdfViewerBase.viewerContainer.scrollTop=parseFloat(o),t.pdfViewerBase.isViewerMouseWheel=!0,this.isMouseupOccurred=!0}return!1},e.prototype.createTextBoxField=function(e,t,i){var n;if(1!==e.Visible)return e.Multiline?(n=document.createElement("textarea")).style.resize="none":(n=document.createElement("input")).type=i,e.MaxLength>0&&(n.maxLength=e.MaxLength),this.addAlignmentPropety(e,n),""!==e.Text?n.value=e.Text:n.value="",this.pdfViewer.enableAutoComplete||(n.autocomplete="off"),n.name=e.FieldName,n.setAttribute("aria-label","TextBoxField"),n},e.prototype.checkIsReadonly=function(e,t){for(var i=!1,n=0;n<this.readOnlyCollection.length;n++)if(t.id===this.readOnlyCollection[n]){i=!0;break}if(e.IsReadonly||!this.pdfViewer.enableFormFields||i)t.disabled=!0,t.style.cursor="default",t.style.backgroundColor="transparent";else{var o=e.BackColor;t.style.backgroundColor="rgba("+o.R+","+o.G+","+o.B+",0.2)";var a=e.FontColor;t.style.color="rgba("+a.R+","+a.G+","+a.B+",1)"}},e.prototype.formFieldsReadOnly=function(e){var t=document.getElementsByClassName("e-pdfviewer-formFields");this.makeformFieldsReadonly(t,e);var i=document.getElementsByClassName("e-pdfviewer-signatureformfields");this.makeformFieldsReadonly(i,e)},e.prototype.makeformFieldsReadonly=function(e,t){for(var i=0;i<e.length;i++)if(e[i]){var n=e[i];t?n.disabled=!1:(n.disabled=!0,n.style.cursor="default")}},e.prototype.applyTabIndex=function(e,t,i){t.tabIndex=0,this.maxTabIndex=Math.max(this.maxTabIndex,t.tabIndex),-1===this.minTabIndex&&(this.minTabIndex=t.tabIndex),this.minTabIndex=Math.min(this.minTabIndex,t.tabIndex),this.maintainTabIndex[i.toString()]=this.maxTabIndex,this.maintanMinTabindex[i.toString()]=this.minTabIndex},e.prototype.checkIsRequiredField=function(e,t){if(e.IsRequired)t.required=!0,t.style.border="1px solid red";else{var i=e.BorderColor;t.style.border=e.BorderWidth+"px",t.style.borderColor="rgba("+i.R+","+i.G+","+i.B+",1)"}if("checkbox"!==t.type&&"radio"!==t.type){var n=e.BorderStyle;this.addBorderStylePropety(n,t)}},e.prototype.applyDefaultColor=function(e){"button"===e.type||"rgba(255, 255, 255, 0.2)"!==e.style.backgroundColor&&"rgba(0, 0, 0, 0.2)"!==e.style.backgroundColor||(e.style.backgroundColor="rgba(0, 20, 200, 0.2)"),"rgba(255, 255, 255, 0.2)"===e.style.color&&(e.style.color="black")},e.prototype.addAlignmentPropety=function(e,t){switch(e.Alignment){case 0:t.style.textAlign="left";break;case 1:t.style.textAlign="center";break;case 2:t.style.textAlign="right";break;case 3:t.style.textAlign="justify"}},e.prototype.addBorderStylePropety=function(e,t){switch(e){case 0:t.style.borderStyle="solid";break;case 1:t.style.borderStyle="dashed";break;case 2:t.style.borderStyle="outset";break;case 3:t.style.borderStyle="inset";break;case 4:t.style.borderStyle="outset";break;case 5:t.style.borderStyle="dotted";break;case 6:t.style.borderStyle="inset"}},e.prototype.createRadioBoxField=function(e,t,i,n){var o=document.createElement("input");return o.type=i,e.Selected&&(o.checked=!0,o.setAttribute("checked",!0)),o.name=e.GroupName,o.value=e.Value,o.setAttribute("aria-label","RadioBoxField"),o},e.prototype.createDropDownField=function(e,t,i,n){var o=document.createElement("select"),a=e.TextList;if(e.Selected&&!n){var s=document.getElementById("editableDropdown"+t+"_"+i);s&&s.remove();var r=document.createElement("input");r.id="editableDropdown"+t+"_"+i,r.setAttribute("list",this.pdfViewer.dataId+"input_"+t+"_"+i);var l=e.LineBounds,d=e.Font;if(r.style.position="absolute",r.style.border="0px",this.applyPosition(r,l,d,t,e.Rotation),r.style.backgroundColor="rgba(0, 20, 200, 0.2)",r.className="e-pdfviewer-formFields",r.value=e.SelectedValue,n)n.appendChild(r);else document.getElementById(this.pdfViewer.dataId+"_textLayer_"+t).appendChild(r);r.addEventListener("focus",this.focusFormFields.bind(this)),r.addEventListener("blur",this.blurFormFields.bind(this)),r.addEventListener("click",this.updateFormFields.bind(this)),r.addEventListener("change",this.changeFormFields.bind(this)),r.addEventListener("keydown",this.updateFormFieldsValue.bind(this)),o=document.createElement("DATALIST")}for(var h=0;h<a.length;h++){var p=document.createElement("option");p.className="e-dropdownSelect",e.SelectedValue===a[h]||e.selectedIndex===h?p.selected=!0:p.selected=!1,"DATALIST"===o.nodeName&&(p.value=a[h]),p.innerHTML=a[h],o.appendChild(p)}return o.name=e.FieldName,o.setAttribute("aria-label","DropDownField"),o},e.prototype.createListBoxField=function(e,t){var i=document.createElement("select"),n=e.TextList;e.MultiSelect?i.multiple=!0:(i.multiple=!1,i.size=n.length);for(var o=0;o<n.length;o++){var a=document.createElement("option");a.className="e-pdfviewer-ListBox";for(var s=0;s<e.SelectedList.length;s++)e.SelectedList[s]===o&&(a.selected=!0);a.innerHTML=n[o],i.appendChild(a)}return i.name=e.Text,i},e.prototype.createSignatureField=function(e,t,i,n,o){var a=document.createElement("div");a.name=e.FieldName,1===e.Visible&&(a.style.visibility="hidden");var s=document.getElementById("signIcon"+t+"_"+i);s&&!n&&s.remove(),this.pdfViewerBase.isInitialField=e.IsInitialField;var r=this.pdfViewerBase.isInitialField?"Initial":"Sign",l=document.createElement("span"),d=document.getElementById(this.pdfViewer.dataId+"_textLayer_"+t),h=e.LineBounds,p=(e.Font,this.ConvertPointToPixel(h.X)),c=this.ConvertPointToPixel(h.Y),u=20>h.Width/2?h.Width/2:20;l.style.position="absolute",l.id="signIcon"+t+"_"+i;var f=this.pdfViewerBase.getZoomFactor(),g={left:p,top:c,width:u,height:10},m=this.getBounds(g,t);return l.style.transform="rotate(0deg)",l.style.left=m.left*f+"px",l.style.top=m.top*f+"px",sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode?(l.style.height="5px",l.style.width="10px",l.style.fontSize="3px"):(l.style.height=10*f+"px",l.style.width=u*f+"px",l.style.fontSize=10*f-1+"px"),l.style.padding="2px",l.style.textAlign="center",l.style.boxSizing="content-box",l.innerHTML=r,l.style.color="black",l.style.backgroundColor="orange",l.style.opacity=1,1===e.Visible&&(l.style.visibility="hidden"),d.appendChild(l),this.addSignaturePath(e,o),{inputField:a,index:i}},e.prototype.addSignaturePath=function(e,t){this.isSignatureField=!1;var i=this.pdfViewerBase.getItemFromSessionStorage("_formfields");if(i)for(var n=JSON.parse(i),o=0;o<n.length;o++){var a=n[o];if(("ink"===a.Name||"SignatureField"===a.Name||"SignatureImage"===a.Name||"SignatureText"===a.Name)&&a.FieldName===e.ActualFieldName+"_"+t&&a.Value&&""!==a.Value){e.Value=a.Value,e.FontFamily=a.FontFamily,e.FontSize=a.FontSize,this.isSignatureField=!0,e.Bounds||(e.Bounds=a.LineBounds);break}}return this.isSignatureField},e.prototype.getBounds=function(e,t,i,n){var o=this.pdfViewerBase.pageSize[t];return i>0?this.getBoundsPosition(i,e,o):this.getBoundsPosition(o.rotation,e,o,n)},e.prototype.getBoundsPosition=function(e,t,i,n){var o;if(n){switch(e){case 0:o=t;break;case 1:o={left:i.width-t.top-t.height-(t.width/2-t.height/2),top:t.left+(t.width/2-t.height/2),width:t.width,height:t.height};break;case 2:o={left:i.width-t.left-t.width,top:i.height-t.top-t.height,width:t.width,height:t.height};break;case 3:o={left:t.top-(t.width/2-t.height/2),top:i.height-t.left-t.width+(t.width/2-t.height/2),width:t.width,height:t.height}}o||(o=t)}else{switch(e){case 90:o={left:i.width-t.top-t.height,top:t.left,width:t.height,height:t.width};break;case 180:o={left:i.width-t.left-t.width,top:i.height-t.top-t.height,width:t.width,height:t.height};break;case 270:o={left:t.top,top:i.height-t.left-t.width,width:t.height,height:t.width};break;case 0:o=t;break;case 1:o={left:i.width-t.top-t.height,top:t.left,width:t.height,height:t.width};break;case 2:o={left:i.width-t.left-t.width,top:i.height-t.top-t.height,width:t.width,height:t.height};break;case 3:o={left:t.top,top:i.height-t.left-t.width,width:t.height,height:t.width}}o||(o=t)}return o},e.prototype.applyPosition=function(e,t,i,n,o,a,s,r){if(t){var l=0,d={left:this.ConvertPointToPixel(t.X),top:this.ConvertPointToPixel(t.Y)-.2,width:this.ConvertPointToPixel(t.Width),height:this.ConvertPointToPixel(t.Height)+.2},h=this.getBounds(d,n,o,a);null!==i&&i.Height&&(e.style.fontFamily=i.Name,i.Italic&&(e.style.fontStyle="italic"),i.Bold&&(e.style.fontWeight="Bold"),l=this.ConvertPointToPixel(i.Size)),void 0===s&&(e.style.padding="0px 2px 2px 2px"),this.pdfViewerBase.setStyleToTextDiv(e,h.left,h.top,l,h.width,h.height,!1,s,r)}},e.prototype.renderExistingAnnnot=function(e,t,i,n){if(!i){var o=void 0,a=void 0,s=void 0,r=void 0,l=void 0;(o=e.Bounds&&"ink"!==e.Name?e.Bounds:e.LineBounds).x||o.y||o.width||o.height?(a=o.x,s=o.y,r=o.width,l=o.height):(a=this.ConvertPointToPixel(o.X),s=this.ConvertPointToPixel(o.Y),r=this.ConvertPointToPixel(o.Width),l=this.ConvertPointToPixel(o.Height));var d=parseFloat(e.PageIndex),h={left:a,top:s,width:r,height:l},p=this.updateSignatureBounds(h,d,n),c=void 0,u=e.FontFamily?e.FontFamily:e.fontFamily;if(this.pdfViewerBase.isSignatureImageData(e.Value))c={id:this.pdfViewer.dataId+"input_"+d+"_"+t,bounds:p,pageIndex:d,data:e.Value,modifiedDate:"",shapeAnnotationType:"SignatureImage",opacity:1,rotateAngle:n?this.getAngle(d):0,annotName:"SignatureField",comments:[],review:{state:"",stateModel:"",modifiedDate:"",author:""}};else if(this.pdfViewerBase.isSignaturePathData(e.Value)){var f,g={left:p.x,top:p.y,width:p.width,height:p.height};f=this.updateSignatureBounds(g,d,!0),c={id:this.pdfViewer.dataId+"input_"+d+"_"+t,bounds:f,pageIndex:d,data:e.Value,modifiedDate:"",shapeAnnotationType:"Path",opacity:1,rotateAngle:0,annotName:"SignatureField",comments:[],review:{state:"",stateModel:"",modifiedDate:"",author:""}}}else(c={id:this.pdfViewer.dataId+"input_"+d+"_"+t,bounds:p,pageIndex:d,data:e.Value,modifiedDate:"",shapeAnnotationType:"SignatureText",opacity:1,rotateAngle:n?this.getAngle(d):0,annotName:"SignatureField",comments:[],review:{state:"",stateModel:"",modifiedDate:"",author:""},fontFamily:e.FontFamily,fontSize:e.FontSize}).fontFamily="TimesRoman"===u?"Times New Roman":u,c.fontSize=e.FontSize?e.FontSize:e.fontSize;if("SignatureField"!==e.Name&&"InitialField"!==e.Name||sf.base.isNullOrUndefined(e.id))this.pdfViewer.add(c);else{var m=e.id,w=document.getElementById(m+"_content_html_element"),y=this.pdfViewer.nameTable[m];c.id=y.id+"_content";var S=this.pdfViewer.add(c);if(y.wrapper.children.push(S.wrapper),!sf.base.isNullOrUndefined(w)&&this.isSignatureField){var v=w.children[0].children[0];v.style.pointerEvents="none",v.className="e-pdfviewer-signatureformfields-signature",v.parentElement.style.pointerEvents="none"}}e.Bounds=c.bounds;var b=document.getElementById(this.pdfViewer.dataId+"_annotationCanvas_"+d);this.pdfViewer.renderDrawing(b,d)}},e.prototype.updateSignatureBounds=function(e,t,i){var n=this.pdfViewerBase.pageSize[t];return n?i?1===n.rotation?{x:n.width-e.top-e.height-(e.width/2-e.height/2),y:e.left+(e.width/2-e.height/2),width:e.width,height:e.height}:2===n.rotation?{x:n.width-e.left-e.width,y:n.height-e.top-e.height,width:e.width,height:e.height}:3===n.rotation?{x:e.top-(e.width/2-e.height/2),y:n.height-e.left-e.width+(e.width/2-e.height/2),width:e.width,height:e.height}:{x:e.left,y:e.top,width:e.width,height:e.height}:1===n.rotation?{x:n.width-e.top-e.height,y:e.left,width:e.height,height:e.width}:2===n.rotation?{x:n.width-e.left-e.width,y:n.height-e.top-e.height,width:e.width,height:e.height}:3===n.rotation?{x:e.top,y:n.height-e.left-e.width,width:e.height,height:e.width}:{x:e.left,y:e.top,width:e.width,height:e.height}:{x:e.left,y:e.top,width:e.width,height:e.height}},e.prototype.resetFormFields=function(){for(var e=this.pdfViewer.formFieldCollections,t=0;t<e.length;t++){var i=e[t];if(this.currentTarget=document.getElementById(i.id),"Textbox"===i.type)this.currentTarget.value=i.value;else if("RadioButton"===i.type)this.currentTarget.checked=i.value,i.value&&this.updateDataInSession(this.currentTarget);else if("DropDown"===i.type)this.currentTarget.value=i.value;else if("CheckBox"===i.type)this.currentTarget.checked=i.value;else if("SignatureField"===i.type){var n=this.pdfViewer.nameTable[i.id];n&&(this.currentTarget&&"e-pdfviewer-signatureformfields-signature"===this.currentTarget.className&&(this.currentTarget.className="e-pdfviewer-signatureformfields",this.currentTarget.style.pointerEvents="",this.updateDataInSession(this.currentTarget,"")),this.pdfViewer.remove(n),this.pdfViewer.renderDrawing())}"RadioButton"!==i.type&&"SignatureField"!==i.type&&this.updateDataInSession(this.currentTarget)}},e.prototype.clearFormFieldStorage=function(){if(Math.round(JSON.stringify(window.sessionStorage).length/1024)>4500){for(var e=window.sessionStorage.length,t=[],i=0;i<e;i++)window.sessionStorage.key(i)&&window.sessionStorage.key(i).split("_")[3]&&"annotations"===window.sessionStorage.key(i).split("_")[3]&&(this.pdfViewerBase.formFieldStorage[window.sessionStorage.key(i)]=window.sessionStorage.getItem(window.sessionStorage.key(i)),t.push(window.sessionStorage.key(i)));if(t)for(i=0;i<t.length;i++)window.sessionStorage.removeItem(t[i])}},e.prototype.clearFormFields=function(e){var t=this.pdfViewerBase.getItemFromSessionStorage("_formfields");if(t){var i=void 0;i=e?[e]:JSON.parse(t);for(var n=!0,o=0;o<i.length;o++){var a=i[o];if(e&&(a.uniqueID=e.id,a.Name=e.type),this.currentTarget=document.getElementById(a.uniqueID),"Textbox"===a.Name)this.currentTarget.value="";else if("RadioButton"===a.Name)n&&(this.currentTarget.checked=!0,this.updateDataInSession(this.currentTarget),n=!1);else if("DropDown"===a.Name)this.currentTarget.value=a.TextList[0];else if("CheckBox"===a.Name)this.currentTarget.checked=!1;else if("SignatureField"===a.Name){var s=this.pdfViewer.nameTable[a.uniqueID];s&&(this.currentTarget&&"e-pdfviewer-signatureformfields-signature"===this.currentTarget.className&&(this.currentTarget.className="e-pdfviewer-signatureformfields",this.currentTarget.style.pointerEvents="",this.currentTarget.parentElement.style.pointerEvents="",this.updateDataInSession(this.currentTarget,""),e&&(e.value="",e.signatureType=[e.signatureType],e.signatureType[0]="")),this.pdfViewer.remove(s),this.pdfViewer.renderDrawing())}"SignatureField"!==a.Name&&"ink"!==a.Name&&"RadioButton"!==a.Name&&this.updateDataInSession(this.currentTarget)}}},e.prototype.ConvertPointToPixel=function(e){return e*(96/72)},e.prototype.destroy=function(){this.currentTarget=null,this.readOnlyCollection=[],this.pdfViewerBase&&this.pdfViewerBase.signatureModule&&this.pdfViewerBase.signatureModule.destroy()},e.prototype.getModuleName=function(){return"FormFields"},e.prototype.getTextWidth=function(e,t,i){var n,o=document.createElement("canvas").getContext("2d");return t&&(n=t+"px "+i),o.font=n||getComputedStyle(document.body).font,o.measureText(e).width},e.prototype.getFontSize=function(e){return e},e}(),ct=function(e,t,i,n){return new(i||(i=Promise))((function(o,a){function s(e){try{l(n.next(e))}catch(e){a(e)}}function r(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){e.done?o(e.value):new i((function(t){t(e.value)})).then(s,r)}l((n=n.apply(e,t||[])).next())}))},ut=function(e,t){var i,n,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function r(a){return function(r){return function(a){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],n=0}finally{i=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,r])}}};return{elementRef:null,dotnetRef:null,initialize:function(e,t,i,n,o){void 0===o&&(o=null),sf.base.enableBlazorMode();var a=new r(e,t,n,i);a.preRender(),a.cultureValue=o,a.render(),t&&("e-blazor-hidden e-pv-mobile-view"===t.className?t.className="e-control e-pdfviewer e-lib e-pv-mobile-view":t.className="e-control e-pdfviewer e-lib"),this.elementRef=t,this.dotnetRef=n,a.serviceUrl||(xe.prototype.send=this.viewerRequestHandler.bind(this))},updateOptions:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);0===t.selectedItems.annotations.length&&n.blazorAction&Y.AnnotationAdding&&delete t.selectedItems,sf.base.isNullOrUndefined(n)||sf.base.isNullOrUndefined(n.element)||(n.setOptions(t,n.options,i),n.options=t),n.blazorAction&=~Y.AnnotationAdding},updateCustomstamp:function(e,t){var i=window.sfBlazor.getCompInstance(e);t.customStamps&&i.renderCustomerStamp(t.customStamps[0])},invokeMethod:function(e,t,n,o){return ct(this,void 0,void 0,(function(){var a,s,r,l;return ut(this,(function(d){switch(d.label){case 0:return d.trys.push([0,4,,5]),a=null,s=window.sfBlazor.getCompInstance(e),(r=s)?(null===n||(r=s,r=this.getChildModule(r,n)),!(a=r[t].apply(r,o))||"object"!==i(a)||a instanceof Promise||(a=this.cleanStringify(a)),"saveAsBlob"==t&&a instanceof Promise?[4,this.promiseHandler(a)]:[3,2]):[3,3];case 1:a=d.sent(),d.label=2;case 2:return[2,a];case 3:return[3,5];case 4:return l=d.sent(),[2,this.throwError(l,r)];case 5:return[2,{}]}}))}))},promiseHandler:function(e){return ct(this,void 0,void 0,(function(){var t;return ut(this,(function(i){switch(i.label){case 0:return t=this,e instanceof Promise?[4,e.then((function(i){return ct(this,void 0,void 0,(function(){return ut(this,(function(n){switch(n.label){case 0:return[4,t.docEditFileReader(i).then((function(t){e=JSON.stringify({data:t.substr(t.indexOf(",")+1)})}))];case 1:return n.sent(),[2]}}))}))}))]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2,e]}}))}))},docEditFileReader:function(e){return ct(this,void 0,void 0,(function(){return ut(this,(function(t){return[2,new Promise((function(t,i){var n=new FileReader;n.onload=function(){t(n.result)},n.readAsDataURL(e)}))]}))}))},getMethodCall:function(e,t,i){try{var n=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(n)&&!sf.base.isNullOrUndefined(n.element))var o=n;if(o)return null==t||"null"==t?o[i]:(o=this.getChildModule(o,t))[i]}catch(e){this.throwError(e,o)}},setMethodCall:function(e,t,i,n){try{var o=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(o)&&!sf.base.isNullOrUndefined(o.element))var a=o;a&&((a=this.getChildModule(a,t))[i]=n[0])}catch(e){this.throwError(e,a)}},cleanStringify:function(e){try{return JSON.stringify(e)}catch(e){return console.log(e),""}},getChildModule:function(e,t){try{for(var i=t.split(","),n=0;n<i.length;n++)e=e[i[n]];return e}catch(e){}return e},viewerRequestHandler:function(e){return ct(this,void 0,void 0,(function(){var t,i,n;return ut(this,(function(o){switch(o.label){case 0:if(i=document.getElementById(e.elementId),n=window.sfBlazor.getCompInstance(e.elementId),this.dotnetRef=n._dotnetInstance,this.elementRef=i,!n)return[3,31];switch(e.action){case"Load":return[3,1];case"Unload":return[3,3];case"RenderPdfPages":return[3,5];case"VirtualLoad":return[3,7];case"Download":return[3,9];case"PrintImages":return[3,11];case"Search":return[3,13];case"Bookmarks":return[3,15];case"RenderThumbnailImages":return[3,17];case"RenderAnnotationComments":return[3,19];case"RenderPdfTexts":return[3,21];case"ImportAnnotations":return[3,23];case"ExportAnnotations":return[3,25];case"ExportFormFields":return[3,27];case"ImportFormFields":return[3,29]}return[3,31];case 1:return[4,this.dotnetRef.invokeMethodAsync("GetPDFInfo",e)];case 2:return t=o.sent(),n.viewerBase.loadRequestHandler.successHandler(t),[3,31];case 3:return[4,this.dotnetRef.invokeMethodAsync("GetPDFInfo",e)];case 4:return t=o.sent(),n.viewerBase.unloadRequestHandler.successHandler(t),[3,31];case 5:return[4,this.dotnetRef.invokeMethodAsync("GetPDFInfo",e)];case 6:return t=o.sent(),n.viewerBase.pageRequestHandler.successHandler(t),[3,31];case 7:return[4,this.dotnetRef.invokeMethodAsync("GetPDFInfo",e)];case 8:return t=o.sent(),n.viewerBase.virtualLoadRequestHandler.successHandler(t),[3,31];case 9:return[4,this.dotnetRef.invokeMethodAsync("GetPDFInfo",e)];case 10:return t=o.sent(),n.viewerBase.dowonloadRequestHandler.successHandler(t),[3,31];case 11:return[4,this.dotnetRef.invokeMethodAsync("GetPDFInfo",e)];case 12:return t=o.sent(),n.printModule.printRequestHandler.successHandler(t),[3,31];case 13:return[4,this.dotnetRef.invokeMethodAsync("GetPDFInfo",e)];case 14:return t=o.sent(),n.textSearchModule.searchRequestHandler.successHandler(t),[3,31];case 15:return[4,this.dotnetRef.invokeMethodAsync("GetPDFInfo",e)];case 16:return t=o.sent(),n.bookmarkViewModule.bookmarkRequestHandler.successHandler(t),[3,31];case 17:return[4,this.dotnetRef.invokeMethodAsync("GetPDFInfo",e)];case 18:return t=o.sent(),n.thumbnailViewModule.thumbnailRequestHandler.successHandler(t),[3,31];case 19:return[4,this.dotnetRef.invokeMethodAsync("GetPDFInfo",e)];case 20:return t=o.sent(),n.annotationModule.stickyNotesAnnotationModule.commentsRequestHandler.successHandler(t),[3,31];case 21:return[4,this.dotnetRef.invokeMethodAsync("GetPDFInfo",e)];case 22:return t=o.sent(),n.textSearchModule.searchRequestHandler.successHandler(t),[3,31];case 23:return[4,this.dotnetRef.invokeMethodAsync("GetPDFInfo",e)];case 24:return t=o.sent(),n.viewerBase.importAnnotationRequestHandler.successHandler(t),[3,31];case 25:return[4,this.dotnetRef.invokeMethodAsync("GetPDFInfo",e)];case 26:return t=o.sent(),n.viewerBase.exportAnnotationRequestHandler.successHandler(t),[3,31];case 27:return[4,this.dotnetRef.invokeMethodAsync("GetPDFInfo",e)];case 28:return t=o.sent(),n.viewerBase.exportFormFieldsRequestHandler.successHandler(t),[3,31];case 29:return[4,this.dotnetRef.invokeMethodAsync("GetPDFInfo",e)];case 30:return t=o.sent(),n.viewerBase.importFormFieldsRequestHandler.successHandler(t),[3,31];case 31:return[2]}}))}))}}}()}}]);(async()=>{await import(`${document.baseURI}_content/Syncfusion.Blazor/scripts/syncfusion-blazor-base.min.js?v=25.1.undefined`).then(()=>{sfBlazor.loadDependencies('sfpdfviewer');})})();