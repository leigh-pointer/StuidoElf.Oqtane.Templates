/*!*  filename: sf-schedule.min.js 
*     version : 25.1.40 
*     Copyright Syncfusion Inc. 2001 - 2024. All rights reserved. 
*     Use of this code is subject to the terms of our license.
*     A copy of the current license can be obtained at any time by e-mailing 
*     licensing@syncfusion.com. Any infringement will be prosecuted under 
*     applicable laws. 
*/
(window.webpackJsonp=window.webpackJsonp||[]).push([[58],{"./bundles/sf-schedule.js":function(e,t,i){"use strict";i.r(t);i("./modules/sf-schedule.js")},"./modules/sf-schedule.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Schedule=function(){"use strict";var e="e-rtl",t="e-popup-open",i="e-appointment-border";function n(e,t){var i,n=sf.base.createElement("div",{className:t}).cloneNode();return n.style.visibility="hidden",n.style.position="absolute",e.appendChild(n),i=n.offsetHeight,sf.base.remove(n),i}function s(e){var t=getComputedStyle(e);return window.WebKitCSSMatrix?new WebKitCSSMatrix(t.webkitTransform).m42:0}function r(e){var t=getComputedStyle(e);return window.WebKitCSSMatrix?new WebKitCSSMatrix(t.webkitTransform).m41:0}function a(e,t){var i=new Date(e.getTime());return t=(t-i.getDay()-7)%7,new Date(i.setDate(i.getDate()+t))}function o(e){return new Date(e.getFullYear(),e.getMonth())}function l(e){return new Date(e.getFullYear(),e.getMonth()+1,0)}function c(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate())}function p(e){var t=new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0).getTimezoneOffset(),i=e.getTimezoneOffset()-t;return e.getTime()-new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0).getTime()-60*i*1e3}function h(e,t){return e=new Date(""+e),new Date(e.setDate(e.getDate()+t))}function u(e,t){var i,n=(e=new Date(""+e)).getDate();return e.setDate(1),e.setMonth(e.getMonth()+t),e.setDate(Math.min(n,(i=e,new Date(i.getFullYear(),i.getMonth()+1,0).getDate()))),e}function d(e,t,i){var n=new Date(e.getTime());n.setHours(t.getHours()),n.setMinutes(t.getMinutes()),n.setSeconds(t.getSeconds());var s=new Date(e.getTime());return 0===i.getHours()?s=h(s,1):(s.setHours(i.getHours()),s.setMinutes(i.getMinutes()),s.setSeconds(i.getSeconds())),{startHour:n,endHour:s}}var f=null,g=window.devicePixelRatio||window.screen.availWidth/document.documentElement.clientWidth;function m(){if(null!==f)return f;var e,t=sf.base.createElement("div");t.style.cssText="width:100px;height: 100px;overflow: scroll;position: absolute;top: -9999px;",document.body.appendChild(t);var i=devicePixelRatio?"1.10"===devicePixelRatio.toFixed(2)||devicePixelRatio<=1?Math.ceil(devicePixelRatio%1):Math.floor(devicePixelRatio%1):0;return e=t.offsetWidth-t.clientWidth-i|0,document.body.removeChild(t),f=e}function v(e){var t=e.getFullYear(),i=e.getMonth(),n=e.getDate(),s=e.getHours(),r=e.getMinutes(),a=e.getSeconds(),o=e.getMilliseconds();return Date.UTC(t,i,n,s,r,a,o)}function b(e){var t=getComputedStyle(e);return e.offsetHeight+(parseInt(t.marginTop,10)||0)+(parseInt(t.marginBottom,10)||0)}function y(e){return new Date(+e-6e4*e.getTimezoneOffset())}function w(e){var t=new Date(+e+6e4*e.getTimezoneOffset());return new Date(t.getTime()+6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))}function S(e,t){var i=e.getTimezoneOffset();try{var n=new Date(e.toLocaleString("en-US",{timeZone:t}));return isNaN(n.getTime())?0:(e.getTime()-n.getTime())/6e4+i}catch(e){return 0}}var O,T,C,D,A,E,I,x,V,j,H,M=function(){function e(e){this.parent=e}return e.prototype.onDataReady=function(e){},e.prototype.getScrollXIndent=function(e){return e.offsetHeight-e.clientHeight>0?m():0},e.prototype.scrollTopPanel=function(e){this.getDatesHeaderElement().firstElementChild.scrollLeft=e.scrollLeft},e.prototype.scrollHeaderLabels=function(e){for(var t=this.element.querySelector(".e-date-header-wrap table"),i=t.offsetWidth/t.querySelectorAll("colgroup col").length,n=function(t,n){for(var s,r=0,a=0,o=n?-e.scrollLeft:e.scrollLeft,l=0,c=t;l<c.length;l++){var p=c[l];if((a+=parseInt(p.getAttribute("colSpan"),10))>Math.floor(o/i)){s=p;break}r+=p.offsetWidth}sf.base.isNullOrUndefined(s)||(s.children[0].style[n?"right":"left"]=o-r+"px")},s=0,r=[".e-header-year-cell",".e-header-month-cell",".e-header-week-cell",".e-header-cells"];s<r.length;s++){var a=r[s],o=[].slice.call(this.element.querySelectorAll(a));if(o.length>0){for(var l=0,c=o;l<c.length;l++){c[l].children[0].style[this.parent.options.enableRtl?"right":"left"]=""}n(o,this.parent.options.enableRtl)}}},e.prototype.getHeaderBarHeight=function(e){void 0===e&&(e=!1);var t=2,i=this.parent.element.querySelector(".e-schedule-toolbar");if(i&&(t+=b(i)),this.parent.uiStateValues.isGroupAdaptive||e){var n=this.parent.element.querySelector(".e-schedule-resource-toolbar");n&&(t+=n.offsetHeight)}return t},e.prototype.getDatesHeaderElement=function(){return this.element.querySelector(".e-date-header-container")},e.prototype.highlightCurrentTime=function(){},e.prototype.getStartHour=function(){var e=this.parent.getStartEndTime(this.parent.activeViewOptions.startHour);return sf.base.isNullOrUndefined(e)&&(e=new Date(2e3,0,0,0)),e},e.prototype.getEndHour=function(){var e=this.parent.getStartEndTime(this.parent.activeViewOptions.endHour);return sf.base.isNullOrUndefined(e)&&(e=new Date(2e3,0,0,0)),e},e.prototype.isCurrentDate=function(e){return e.setHours(0,0,0,0)===this.parent.getCurrentTime().setHours(0,0,0,0)},e.prototype.isCurrentMonth=function(e){return e.getFullYear()===this.parent.getCurrentTime().getFullYear()&&e.getMonth()===this.parent.getCurrentTime().getMonth()},e.prototype.isWorkDay=function(e,t){return void 0===t&&(t=this.parent.activeViewOptions.workDays),t.indexOf(e.getDay())>=0},e.prototype.isWorkHour=function(e,t,i,n){return!sf.base.isNullOrUndefined(t)&&!sf.base.isNullOrUndefined(i)&&(t.setMilliseconds(0),i.setMilliseconds(0),!(p(e)<p(t)||p(e)>=p(i)||!this.isWorkDay(e,n)))},e.prototype.getRenderDates=function(e){var t=[];if("Week"===this.parent.options.currentView||"TimelineWeek"===this.parent.options.currentView)for(var i=a(c(this.parent.options.selectedDate),this.parent.activeViewOptions.firstDayOfWeek),n=0,s=7*this.parent.activeViewOptions.interval;n<s;n++)(this.parent.activeViewOptions.showWeekend||this.isWorkDay(i,e))&&t.push(i),i=h(i,1);else if("WorkWeek"===this.parent.options.currentView||"TimelineWorkWeek"===this.parent.options.currentView){i=a(c(this.parent.options.selectedDate),this.parent.activeViewOptions.firstDayOfWeek),n=0;for(var r=7*this.parent.activeViewOptions.interval;n<r;n++)this.isWorkDay(i,e)&&t.push(i),i=h(i,1)}else{i=c(this.parent.options.selectedDate);do{(this.parent.activeViewOptions.showWeekend||this.isWorkDay(i,e))&&t.push(i),i=h(i,1)}while(this.parent.activeViewOptions.interval!==t.length)}return e||(this.renderDates=t),t},e.prototype.getColElements=function(){return[].slice.call(this.element.querySelectorAll(".e-content-wrap col, .e-date-header-wrap col"))},e.prototype.setColWidth=function(e){if(this.parent.isTimelineView()){var t=this.getColElements(),i=this.element.querySelector(".e-content-table tbody").getBoundingClientRect().width/(t.length/2);if(e.offsetHeight!==e.clientHeight){var n=this.parent.element.querySelector(".e-month-header-wrapper,.e-resource-column-wrap");sf.base.isNullOrUndefined(n)||sf.base.setStyleAttribute(n,{height:sf.base.formatUnit(e.clientHeight)})}[].slice.call(this.element.querySelectorAll(".e-header-cells")).forEach((function(e){var t=parseInt(e.getAttribute("colspan"),10);sf.base.setStyleAttribute(e,{width:sf.base.formatUnit(i*t)})}))}},e.prototype.resetColWidth=function(){for(var e=0,t=this.getColElements();e<t.length;e++){t[e].style.width=""}},e.prototype.getContentAreaElement=function(){return this.element.querySelector(".e-content-wrap")},e.prototype.scrollToDate=function(e){if(-1!==["Month","TimelineMonth"].indexOf(this.parent.options.currentView)&&!sf.base.isNullOrUndefined(e)){var t=this.getContentAreaElement(),i=this.parent.getMsFromDate(new Date(c(new Date(+e)).getTime())),n=t.querySelector('.e-work-cells[data-date="'+i+'"]');"Month"===this.parent.options.currentView&&n&&(t.scrollTop=n.offsetTop),"TimelineMonth"===this.parent.options.currentView&&n&&(this.parent.options.enableRtl?t.scrollLeft=-(this.parent.getContentTable().offsetWidth-n.offsetLeft-n.offsetWidth):t.scrollLeft=n.offsetLeft)}},e.prototype.getPanel=function(){return this.element},e.prototype.retainScrollPosition=function(){if(this.parent.options.enablePersistence){var e=this.element.querySelector(".e-content-wrap");if(!sf.base.isNullOrUndefined(e)){var t=JSON.parse(window.localStorage.getItem(this.parent.element.id));if(!sf.base.isNullOrUndefined(t)){var i=t.top,n=t.left;sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(n)||(e.scrollTop=i,e.scrollLeft=n)}}}},e.prototype.removeVirtualMask=function(){var e=this.parent.element.querySelector(".e-table-wrap");this.parent.activeViewOptions.enableVirtualMask&&e&&e.classList.contains("e-virtual-mask")&&sf.base.removeClass([e],"e-virtual-mask")},e}(),k=function(){function e(e){this.allDayLevel=0,this.moreIndicatorTop=0,this.parent=e,this.slotCount=e.activeViewOptions.timeScale.slotCount,this.interval=e.activeViewOptions.timeScale.interval,this.element=this.parent.activeView.getPanel()}return e.prototype.renderAppointments=function(){var e=this.element.querySelector(".e-all-day-appointment-section");e&&(sf.base.EventHandler.remove(e,"click",this.rowExpandCollapse),sf.base.EventHandler.add(e,"click",this.rowExpandCollapse,this));var t=this.parent.element.querySelector(".e-work-cells");if(t){for(var i=this.parent.element.querySelector(".e-content-wrap"),n=[].slice.call(i.querySelectorAll(".e-appointment")),s=[].slice.call(i.querySelectorAll(".e-block-appointment")),r=[].slice.call(this.parent.element.querySelectorAll(".e-all-day-appointment")),a=n.concat(s),o=0;o<r.length;o++)r[parseInt(o.toString(),10)].style.removeProperty("display"),r[parseInt(o.toString(),10)].style.removeProperty("visibility");var l=0,c=0,p=t.offsetParent;p&&(l=p.offsetHeight/p.querySelector("tbody").childElementCount,c=p.offsetWidth/p.querySelector("tbody tr").childElementCount);for(o=0;o<a.length;o++){var h="none"!==(O=a[parseInt(o.toString(),10)]).style.display;O.style.removeProperty("display"),O.style.removeProperty("visibility"),sf.base.removeClass([O],"e-event-action"),O.blur();var u=this.getColumn(O),d=this.getAppWidth(this.getColumnCounts(O)),f=this.getTopStartDuration(O),g=this.parent.activeViewOptions.timeScale.interval/this.parent.activeViewOptions.timeScale.slotCount*6e4,m=f/g*l;O.style.top=m+"px",O.style.left=this.getEventLeft(d,u),O.style.width=O.classList.contains("e-block-appointment")?"100%":d,O.style.height=(f+this.getDuration(O))/g*l-m+"px",h||this.parent.eventBase.wireAppointmentEvents(O)}var v=this.parent.element.querySelector(".e-all-day-row").offsetTop,b=r.length>0?r[0].offsetHeight:0,y=[].slice.call(this.parent.element.querySelectorAll(".e-all-day-appointment-wrapper"));this.setAllDayRowHeight(0);for(var w=0;w<y.length;w++){var S=y[parseInt(w.toString(),10)].children;for(o=0;o<S.length;o++){var O,T=0;if((O=S[parseInt(o.toString(),10)]).blur(),O.classList.contains("e-row-count-wrapper"))this.moreIndicatorTop=v+4*b,this.parent.uiStateValues.expand||(O.style.top=this.moreIndicatorTop+"px",T=4*b+4,this.setAllDayRowHeight(T));else{this.parent.uiStateValues.expand&&sf.base.removeClass([O],"e-appointment-hide");var C=this.getRowCount(O),D=this.getTotalLength(O);this.allDayLevel=this.allDayLevel<C?C:this.allDayLevel,O.style.top=v+C*b+"px",O.style.width=c*D-15+"px",T=4+(!this.parent.uiStateValues.expand&&this.allDayLevel>3?4*b:(this.allDayLevel+1)*b),this.parent.eventBase.wireAppointmentEvents(O),this.setAllDayRowHeight(T)}}}var A=[].slice.call(this.element.querySelectorAll(".e-more-indicator"));e&&(A.length>0?sf.base.removeClass([e],"e-disable"):sf.base.addClass([e],"e-disable"));for(o=0;o<A.length;o++)sf.base.EventHandler.clearEvents(A[parseInt(o.toString(),10)]),sf.base.EventHandler.add(A[parseInt(o.toString(),10)],"click",this.rowExpandCollapse,this);this.parent.setDimensions()}},e.prototype.getAppWidth=function(e){var t=(("Day"===this.parent.options.currentView?97:94)-e)/e;return(t<0?0:t)+"%"},e.prototype.getEventLeft=function(e,t){var i=(parseFloat(e)+1)*t;return(i>99?99:i)+"%"},e.prototype.setAllDayRowHeight=function(e){for(var t=[].slice.call(this.parent.element.querySelectorAll(".e-all-day-cells")),i=0;i<t.length;i++)t[parseInt(i.toString(),10)].style.height=e/12+"em";var n=this.parent.element.querySelector(".e-date-header-wrap");"auto"!==this.parent.options.height&&this.parent.options.enableAllDayScroll||sf.base.addClass([n],"e-all-day-auto");var s=this.parent.element.querySelector(".e-all-day-row");s.style.height="",this.parent.uiStateValues.expand&&"auto"!==this.parent.options.height&&this.parent.options.enableAllDayScroll?(s.style.height=e/12+"em",this.parent.eventBase.allDayExpandScroll(n)):(n.scrollTop=0,sf.base.removeClass([n],"e-all-day-scroll"))},e.prototype.getRowCount=function(e){return parseInt(e.getAttribute("data-row-index"),10)},e.prototype.getTotalLength=function(e){return parseInt(e.getAttribute("data-total-length"),10)},e.prototype.getDuration=function(e){return parseInt(e.getAttribute("data-duration"),10)},e.prototype.getTopStartDuration=function(e){return parseInt(e.getAttribute("data-top-start-duration"),10)},e.prototype.getColumnCounts=function(e){return parseInt(e.getAttribute("data-columns-count"),10)},e.prototype.getColumn=function(e){return parseInt(e.getAttribute("data-columns"),10)},e.prototype.rowExpandCollapse=function(){var e=this.element.querySelector(".e-all-day-appointment-section");this.parent.uiStateValues.expand=e.classList.contains("e-appointment-expand");var t,i=[].slice.call(this.parent.element.querySelectorAll(".e-all-day-appointment")),n=i.length>0?i[0].offsetHeight:0;this.parent.uiStateValues.expand?(e.setAttribute("title","Collapse-all-day-section"),e.setAttribute("aria-label","Collapse section"),t=(this.allDayLevel+1)*n+4):(e.setAttribute("title","Expand-all-day-section"),e.setAttribute("aria-label","Expand section"),t=4*n+4),this.setAllDayRowHeight(t),this.addOrRemoveClass(),this.parent.setDimensions()},e.prototype.addOrRemoveClass=function(){var e=this;[].slice.call(this.parent.element.querySelectorAll(".e-more-event")).filter((function(t){!e.parent.uiStateValues.expand&&e.allDayLevel>2?(sf.base.addClass([t],"e-appointment-hide"),t.setAttribute("tabindex","-1")):(sf.base.removeClass([t],"e-appointment-hide"),t.setAttribute("tabindex","0"))}));var t=this.element.querySelector(".e-all-day-appointment-section");this.parent.uiStateValues.expand?(sf.base.removeClass([t],"e-appointment-expand"),sf.base.addClass([t],"e-appointment-collapse")):(sf.base.removeClass([t],"e-appointment-collapse"),sf.base.addClass([t],"e-appointment-expand")),this.allDayLevel>2?sf.base.removeClass([t],"e-disable"):sf.base.addClass([t],"e-disable"),[].slice.call(this.element.querySelectorAll(".e-row-count-wrapper")).filter((function(t){!e.parent.uiStateValues.expand&&e.allDayLevel>2?(sf.base.removeClass([t],"e-disable"),t.style.top=e.moreIndicatorTop+"px"):sf.base.addClass([t],"e-disable")}))},e.prototype.initializeValues=function(){this.cellHeight=parseFloat(this.parent.element.querySelector(".e-content-wrap tbody tr").getBoundingClientRect().height.toFixed(2))},e.prototype.getHeight=function(e,t){var i=(t.getTime()-e.getTime())/6e4*(this.cellHeight*this.slotCount)/this.interval;return i=i<=0?this.cellHeight:i},e.prototype.renderNormalEvents=function(e,t){var i=e,n=i.startTime,s=i.endTime,r=0,a=this.getHeight(n,s);r=this.getTopValue(n,r);var o=this.parent.inlineModule.createInlineAppointmentElement();sf.base.setStyleAttribute(o,{width:this.getEventWidth(),height:a+"px",top:r+"px"}),[].slice.call(this.parent.element.querySelectorAll(".e-appointment-wrapper"))[parseInt(t.toString(),10)].appendChild(o)},e.prototype.getEventWidth=function(){var e="Day"===this.parent.options.currentView?97:94;return(e<0?0:e)+"%"},e.prototype.getTopValue=function(e,t){var i=c(this.parent.activeView.renderDates[parseInt(t.toString(),10)]);(new Date).setHours(0,0,0,0);var n=this.parent.eventBase.getStEdHours(i,this.parent.activeView.getStartHour(),this.parent.activeView.getEndHour()).startHour;return(60*(e.getHours()-n.getHours())+(e.getMinutes()-n.getMinutes()))*this.cellHeight*this.slotCount/this.interval},e.prototype.renderAllDayEvents=function(e,t){var i,n=e,s=this.parent.element.querySelector(".e-all-day-cells:first-child").offsetTop,r=1;n.Index=0,this.allDayLevel=this.allDayLevel<0?0:this.allDayLevel,i=100-("Day"===this.parent.options.currentView?4:7);var a=this.parent.element.querySelector(".e-all-day-appointment-wrapper:nth-child("+(t+1)+")"),o=this.parent.inlineModule.createInlineAppointmentElement();a.appendChild(o),r+=s+1,sf.base.setStyleAttribute(o,{width:i+"%",top:sf.base.formatUnit(r)}),sf.base.addClass([o],"e-all-day-appointment")},e}(),q=function(){function e(e){this.slots=[],this.isDoubleTapped=!1,this.parent=e}return e.prototype.getSelectedEventElements=function(e){if(this.removeSelectedAppointmentClass(),this.parent.selectedElements.length<=0)this.parent.selectedElements.push(e);else if(this.parent.selectedElements.filter((function(t){return t.getAttribute("data-guid")===e.getAttribute("data-guid")})).length<=0)for(var t='div[data-guid="'+e.getAttribute("data-guid")+'"]',i=0,n=[].slice.call(this.parent.element.querySelectorAll(t));i<n.length;i++){var s=n[i];this.parent.selectedElements.push(s)}else{var r=this.parent.selectedElements.filter((function(t){return t.getAttribute("data-guid")!==e.getAttribute("data-guid")}));this.parent.selectedElements=r}return e&&this.parent.selectedElements.length>0&&this.addSelectedAppointments(this.parent.selectedElements),this.parent.selectedElements},e.prototype.getSelectedEvents=function(){var e=[],t=[];return[].slice.call(this.parent.element.querySelectorAll("."+i)).filter((function(i){0===e.filter((function(e){return e===i.getAttribute("data-guid")})).length&&e.push(i.getAttribute("data-guid")),t.push(i)})),{element:t.length>1?t:t[0],guid:e}},e.prototype.removeSelectedAppointmentClass=function(){var e=this.getSelectedAppointments();sf.base.removeClass(e,i),"Agenda"!==this.parent.options.currentView&&"MonthAgenda"!==this.parent.options.currentView||sf.base.removeClass(e,"e-active-appointment-agenda")},e.prototype.addSelectedAppointments=function(e){"MonthAgenda"!==this.parent.options.currentView&&this.parent.removeSelectedClass(),sf.base.addClass(e,i)},e.prototype.getSelectedAppointments=function(){return[].slice.call(this.parent.element.querySelectorAll("."+i+",.e-appointment:focus"))},e.prototype.focusElement=function(){var e=document.querySelector("#"+this.parent.element.id+"_dialog_wrapper");if(!e||!e.classList.contains("e-popup-open")){var t=this.parent.getSelectedCells();if(t.length>0){if(this.parent.keyboardInteractionModule){var i=!sf.base.isNullOrUndefined(this.parent.activeCellsData)&&this.parent.activeCellsData.element||t[t.length-1];this.parent.keyboardInteractionModule.selectCells(i instanceof Array,i)}}else{var n=this.getSelectedAppointments();n.length>0&&n[n.length-1].focus()}}},e.prototype.splitEvent=function(e,t){var i=c(new Date(e.startTime+"")).getTime(),n=c(new Date(e.endTime+"")).getTime();if(p(e.endTime)<=0){var s=h(c(new Date(e.endTime+"")),-1).getTime();n=i>s?i:s}var r=i,a=n,o=[];if(i!==n){i<t[0].getTime()&&(i=t[0].getTime()),n>t[t.length-1].getTime()&&(n=t[t.length-1].getTime());for(var l=i,u=0;u<this.slots.length;u++){var d=this.slots[parseInt(u.toString(),10)];if("WorkWeek"===this.parent.options.currentView||"TimelineWorkWeek"===this.parent.options.currentView||this.parent.activeViewOptions.group.byDate||this.parent.activeViewOptions.showWeekend){for(var f=[],g=0,m=d;g<m.length;g++){var v=m[g];f.push(new Date(v))}var b=this.getRenderedDates(f);if(!sf.base.isNullOrUndefined(b)&&b.length>0){d=[];for(var y=0,w=b;y<w.length;y++){var S=w[y];d.push(S.getTime())}}}var O=d[0];if((l=l<=O&&n>=O?O:l)>n||O>n)break;if(!this.parent.activeViewOptions.group.byDate&&this.parent.activeViewOptions.showWeekend&&"WorkWeek"!==this.parent.options.currentView&&"TimelineWorkWeek"!==this.parent.options.currentView){var T=d.indexOf(l);if(-1!==T){var C=d.indexOf(n),D=-1!==C,A=(C=D?C:d.length-1)-T+1,E=d[parseInt(T.toString(),10)]!==r,I=d[parseInt(C.toString(),10)]!==a;if(o.push(this.cloneEventObject(e,d[parseInt(T.toString(),10)],d[parseInt(C.toString(),10)],A,E,I)),D)break}}else if(this.dateInRange(l,d[0],d[d.length-1])){for(var x=[],V=0;V<d.length;V++)this.dateInRange(d[parseInt(V.toString(),10)],r,a)&&x.push(d[parseInt(V.toString(),10)]);if(x.length>0)if(this.parent.activeViewOptions.group.byDate)for(var j=0,H=x;j<H.length;j++){var M=H[j];o.push(this.cloneEventObject(e,M,M,1,M!==r,M!==a))}else{E=x[0]!==r,I=x[x.length-1]!==a;o.push(this.cloneEventObject(e,x[0],x[x.length-1],x.length,E,I))}}}}else o.push(this.cloneEventObject(e,i,n,1,!1,!1));return o},e.prototype.dateInRange=function(e,t,i){return t<=e&&e<=i},e.prototype.cloneEventObject=function(e,t,i,n,s,r){var a=sf.base.extend({},e,null,!0),o={count:n,isLeft:s,isRight:r};return o.startTime=e.startTime,o.endTime=e.endTime,a.data=o,a.startTime=new Date(t),a.endTime=new Date(i),a},e.prototype.getRenderedDates=function(e){var t,i=0,n=e.length;if(e[0]<this.parent.options.minDate&&e[e.length-1]>this.parent.options.maxDate){for(var s=0;s<e.length;s++)e[parseInt(s.toString(),10)].getTime()===this.parent.options.minDate.getTime()&&(i=s),e[parseInt(s.toString(),10)].getTime()===this.parent.options.maxDate.getTime()&&(n=s);t=e.filter((function(t){return t>=e[parseInt(i.toString(),10)]&&t<=e[parseInt(n.toString(),10)]}))}return t},e.prototype.isValidEvent=function(e,t,i,n){var s=i.getTime()>n.startHour.getTime()&&t.getTime()<n.endHour.getTime(),r=n.startHour.getTime()<=t.getTime()&&e.startTime.getTime()>=n.startHour.getTime()&&e.endTime.getTime()<n.endHour.getTime()&&t.getTime()===i.getTime();return s||r},e.prototype.getStEdHours=function(e,t,i){var n=new Date(e.getTime());n.setHours(t.getHours()),n.setMinutes(t.getMinutes()),n.setSeconds(t.getSeconds());var s=new Date(e.getTime());return 0===i.getHours()?s.setDate(s.getDate()+1):(s.setHours(i.getHours()),s.setMinutes(i.getMinutes()),s.setSeconds(i.getSeconds())),{startHour:n,endHour:s}},e.prototype.appointmentBorderRemove=function(e){var i=e.target;sf.base.closest(i,".e-appointment")?"MonthAgenda"!==this.parent.options.currentView&&this.parent.removeSelectedClass():sf.base.closest(i,"."+t)||this.removeSelectedAppointmentClass()},e.prototype.wireAppointmentEvents=function(e,t,i){if(void 0===t&&(t=!1),void 0===i&&(i=!1),!this.parent.isPrintSchedule&&!e.classList.contains("e-block-appointment")){var n="true"===e.getAttribute("aria-disabled");sf.base.EventHandler.remove(e,"click",this.eventClick),sf.base.EventHandler.remove(e,"dblclick",this.eventDoubleClick),sf.base.EventHandler.remove(e,"touchstart",this.eventTouchClick),("TimelineYear"!==this.parent.options.currentView||i)&&(sf.base.EventHandler.add(e,"click",this.eventClick,this),this.parent.isAdaptive||sf.base.EventHandler.add(e,"touchstart",this.eventTouchClick,this),this.parent.isAdaptive||this.parent.activeViewOptions.readonly||n||sf.base.EventHandler.add(e,"dblclick",this.eventDoubleClick,this)),this.parent.activeViewOptions.readonly||n||t||(this.parent.resizeModule&&this.parent.resizeModule.wireResizeEvent(e),this.parent.dragAndDropModule&&this.parent.dragAndDropModule.wireDragEvent(e))}},e.prototype.eventTouchClick=function(e){var t=this;setTimeout((function(){return t.isDoubleTapped=!1}),250),e.preventDefault(),this.isDoubleTapped?this.eventDoubleClick(e):this.isDoubleTapped||(this.isDoubleTapped=!0,this.eventClick(e))},e.prototype.eventClick=function(e){var t=e.target;if(!(t.classList.contains("e-drag-clone")||t.classList.contains("e-resize-clone")||e.detail>1||t.classList.contains("e-block-appointment")||t.classList.contains("e-inline-subject")))if(t=sf.base.closest(e.target,".e-appointment"),(e.ctrlKey||e.metaKey)&&1===e.which&&this.parent.keyboardInteractionModule){this.parent.selectedElements=[].slice.call(this.parent.element.querySelectorAll("."+i)),this.getSelectedEventElements(t);var n=this.activeEventData(e,!1);this.parent.dotNetRef.invokeMethodAsync("TriggerEventClick",n,this.getMouseEvent(e),this.getGroupIndexFromElement(t),!0,!1)}else{this.removeSelectedAppointmentClass();n=this.activeEventData(e,!0);if(this.parent.dotNetRef.invokeMethodAsync("TriggerEventClick",n,this.getMouseEvent(e),this.getGroupIndexFromElement(t),!1,!1),this.parent.isAdaptive&&this.parent.isTapHold){var s=sf.base.closest(e.target,".e-appointment"),r=this.getSelectedEventElements(s);if(r.length>0){var a=1===r.length?r[0].querySelector(".e-subject").innerHTML:"("+r.length+")&nbsp;selected item(s)";this.parent.quickPopup.element.querySelector(".e-subject").innerHTML=a,r.length>1?sf.base.addClass([this.parent.quickPopup.element.querySelector(".e-edit-icon")],"e-hidden"):sf.base.removeClass([this.parent.quickPopup.element.querySelector(".e-edit-icon")],"e-hidden")}else this.parent.selectedElements=[],this.parent.onQuickPopupClose()}}},e.prototype.eventDoubleClick=function(e){if("touchstart"===e.type&&this.activeEventData(e,!0),!this.parent.activeEventData.element.classList.contains("e-inline-appointment")&&!this.parent.activeEventData.element.querySelector(".e-inline-subject")){var t=this.activeEventData(e,!1),i=sf.base.closest(e.target,".e-appointment");this.parent.dotNetRef.invokeMethodAsync("TriggerEventDoubleClick",t,this.getMouseEvent(e),this.getGroupIndexFromElement(i))}},e.prototype.getMouseEvent=function(e){if(-1!==e.type.indexOf("touch")){var t=e.event,i=t&&t.changedTouches?t.changedTouches[0]:e.changedTouches?e.changedTouches[0]:t||e;return{altKey:e.altKey,button:e.button,buttons:e.buttons,clientX:i.clientX,clientY:i.clientY,ctrlKey:e.ctrlKey,detail:e.detail,metaKey:e.metaKey,screenX:i.screenX,screenY:i.screenY,shiftKey:e.shiftKey,type:e.type}}return{altKey:e.altKey,button:e.button,buttons:e.buttons,clientX:e.clientX,clientY:e.clientY,ctrlKey:e.ctrlKey,detail:e.detail,metaKey:e.metaKey,screenX:e.screenX,screenY:e.screenY,shiftKey:e.shiftKey,type:e.type}},e.prototype.getGroupIndexFromElement=function(e){var t=parseInt(e.getAttribute("data-group-index"),10);return isNaN(t)?0:t},e.prototype.activeEventData=function(e,t){var i=sf.base.closest(e.target,".e-appointment"),n=i.getAttribute("data-guid");return t&&(i.parentElement.classList.contains(".e-more-appointment-wrapper")&&this.parent.morePopup&&this.parent.morePopup.element?this.addSelectedAppointments([].slice.call(this.parent.morePopup.element.querySelectorAll('div[data-guid="'+n+'"]'))):this.addSelectedAppointments([].slice.call(this.parent.element.querySelectorAll('.e-table-container div[data-guid="'+n+'"]'))),i.focus()),this.parent.activeEventData={element:i,guid:[n]},n},e.prototype.allDayExpandScroll=function(e){var t=0;[].slice.call(this.parent.element.querySelectorAll(".e-header-row")).forEach((function(e){[].slice.call(e.children).forEach((function(e){e.style.top=t+"px"})),t+=e.offsetHeight})),t=e.offsetHeight-t,this.parent.element.querySelector(".e-all-day-cells").style.height=t/12+"em",this.parent.uiStateValues.expand?sf.base.addClass([e],"e-all-day-scroll"):sf.base.removeClass([e],"e-all-day-scroll")},e.prototype.removeHeightProperty=function(e){for(var t=0,i=[].slice.call(this.parent.element.querySelectorAll("."+e+" tbody tr"));t<i.length;t++){i[t].firstElementChild.style.height=""}},e.prototype.addCellHeight=function(e,t,i,n,s,r){if(void 0===r&&(r=!0),this.parent.activeViewOptions.maxEventsPerRow>1&&!this.parent.options.rowAutoHeight)for(var a=[].slice.call(this.parent.element.querySelectorAll(e)),o=[].slice.call(this.parent.element.querySelectorAll(".e-week-number-wrapper tbody tr")),l=0,c=a;l<c.length;l++){var p=c[l],h=this.parent.activeViewOptions.maxEventsPerRow*(t+("Month"===this.parent.options.currentView?i:2)+n+s);o.length>0&&sf.base.setStyleAttribute(o[a.indexOf(p)].firstElementChild,{height:h+"px"}),sf.base.setStyleAttribute(p.firstElementChild,{height:h+"px"})}},e}(),P=(O=function(e,t){return(O=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}O(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),L=function(e){function t(t){var i=e.call(this,t)||this;i.renderedEvents=[],i.allDayLevel=0,i.moreIndicatorHeight=19,i.monthHeaderHeight=0,i.maxHeight=i.parent.options.enableMaxHeight&&!i.parent.options.enableIndicator&&!i.parent.options.rowAutoHeight;var n=i.parent.options.enableMaxHeight&&i.parent.options.enableIndicator&&!i.parent.options.rowAutoHeight;return i.maxOrIndicator=i.maxHeight||n,i.moreIndicatorHeight=i.parent.options.rowAutoHeight&&i.parent.options.ignoreWhitespace?0:i.moreIndicatorHeight,i.eventTop="Month"===i.parent.options.currentView?7:0,i}return P(t,e),t.prototype.renderAppointments=function(){var e=this,t=[].slice.call(this.parent.element.querySelectorAll(".e-appointment, .e-more-indicator, .e-block-appointment, .e-block-indicator")),i=this.parent.element.querySelector(".e-work-cells");if(i){var s=this.parent.element.querySelector(".e-content-wrap");if(this.parent.options.rowAutoHeight&&(this.parent.uiStateValues.top=s.scrollTop,this.parent.uiStateValues.left=s.scrollLeft),this.removeHeightProperty("e-content-table"),t.forEach((function(t){e.removedPositionedStyles(t)})),this.monthHeaderHeight=0,"Month"===this.parent.options.currentView){if(this.parent.options.rowAutoHeight){var r=[].slice.call(this.parent.element.querySelectorAll(".e-content-wrap table tr td:first-child")),a=this.parent.element.querySelector(".e-content-table").clientHeight/r.length;r.forEach((function(e){sf.base.setStyleAttribute(e,{height:a+"px"})}))}this.monthHeaderHeight=i.firstElementChild.offsetHeight}this.eventHeight=n(this.parent.element,"e-appointment");this.addCellHeight(".e-content-table tbody tr",this.eventHeight,"Month"===this.parent.options.currentView?0:2,this.monthHeaderHeight,this.moreIndicatorHeight);var o=i.offsetParent;o&&(this.cellHeight=o.offsetHeight/o.querySelector("tbody").childElementCount,this.cellWidth=o.offsetWidth/o.querySelector("tbody tr").childElementCount);var l=n(this.parent.element.querySelector(".e-current-panel"),"e-appointment");this.dateRender=this.parent.activeView.renderDates;for(var c=[],p=[],h=[],u=0;u<t.length;u++){var d=t[parseInt(u.toString(),10)];sf.base.removeClass([d],"e-event-action");var f="none"!==d.style.display;d.style.removeProperty("display"),d.blur();var g=this.getStartTime(d),m=this.getOverLapCount(d),v=this.getDataCount(d)*this.cellWidth;v=d.classList.contains("e-block-appointment")?v:v-5;var b=0,y=0,w=this.getGroupIndex(d),S=this.getCellTd(w,g);if(S){var O=sf.base.closest(S,"tr"),T=this.monthHeaderHeight+(m+1)*l+this.moreIndicatorHeight+this.eventTop,C=O.firstElementChild,D=O.sectionRowIndex;sf.base.isNullOrUndefined(p[parseInt(D.toString(),10)])&&(p[parseInt(D.toString(),10)]=S.getBoundingClientRect().height,c[parseInt(D.toString(),10)]=S.offsetTop),this.parent.options.rowAutoHeight&&this.updateCellHeight(C,T,D,p);var A=c[parseInt(D.toString(),10)],E=this.monthHeaderHeight+(d.classList.contains("e-block-appointment")?A:A+m*l)+this.eventTop,I=p[parseInt(D.toString(),10)],x=S.cellIndex;sf.base.isNullOrUndefined(h[parseInt(x.toString(),10)])&&(h[parseInt(x.toString(),10)]=S.offsetLeft),this.parent.options.enableRtl?y=S.parentElement.offsetWidth-h[parseInt(x.toString(),10)]-this.cellWidth:b=h[parseInt(x.toString(),10)],d.classList.contains("e-more-indicator")?this.updateMoreIndicator(d,y,b,A):d.classList.contains("e-block-indicator")?this.updateBlockIndicator(d,y,b,S,A):(sf.base.setStyleAttribute(d,{width:v+"px",left:b+"px",right:y+"px",top:E+"px"}),this.maxOrIndicator&&this.setMaxEventHeight(d,S,I),d.classList.contains("e-block-appointment")&&sf.base.setStyleAttribute(d,{height:I-(E-A)+"px"}),d.classList.contains("e-appointment")&&!f&&this.parent.eventBase.wireAppointmentEvents(d))}}this.updateRowHeight(l)}},t.prototype.removedPositionedStyles=function(e){e.style.removeProperty("width"),e.style.removeProperty("height"),e.style.removeProperty("left"),e.style.removeProperty("right"),e.style.removeProperty("top"),e.style.removeProperty("visibility")},t.prototype.updateMoreIndicator=function(e,t,i,n){var s=this.cellHeight-this.moreIndicatorHeight;sf.base.setStyleAttribute(e,{top:n+s+"px",width:this.cellWidth-2+"px",left:i+"px",right:t+"px"})},t.prototype.updateBlockIndicator=function(e,t,i,n,s){this.parent.options.enableRtl?e.style.right=t+this.cellWidth-24+"px":e.style.left=i+this.cellWidth-24+"px";var r=n.firstElementChild;r&&(e.style.marginTop=r.offsetTop+2+"px"),e.style.top=s+"px",e.style.position="absolute"},t.prototype.setMaxEventHeight=function(e,t,i){var n=i-("Month"===this.parent.options.currentView?b(t.querySelector(".e-date-header")):0)-(this.maxHeight?2:this.moreIndicatorHeight);sf.base.setStyleAttribute(e,{height:n+"px","align-items":"center"})},t.prototype.getCellTd=function(e,t){return this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive?this.parent.element.querySelector('.e-content-wrap tbody td[data-group-index="'+e.toString()+'"][data-date="'+t.getTime()+'"]'):this.parent.element.querySelector('.e-content-wrap tbody td[data-date="'+t.getTime()+'"]')},t.prototype.getGroupIndex=function(e){var t=parseInt(e.getAttribute("data-group-index"),10);return t||0},t.prototype.getOverLapCount=function(e){return parseInt(e.getAttribute("data-index"),10)},t.prototype.getStartTime=function(e){return new Date(parseInt(e.getAttribute("data-start"),10))},t.prototype.getEndTime=function(e){return new Date(parseInt(e.getAttribute("data-end"),10))},t.prototype.getDataCount=function(e){return parseInt(e.getAttribute("data-total-length"),10)},t.prototype.updateRowHeight=function(e){if(this.parent.options.rowAutoHeight){this.updateBlockElements(),this.updateNormalEventElements(e),this.updateBlockIndicatorEle();var t={cssProperties:this.parent.getCssProperties(),isPreventScrollUpdate:!0,scrollPosition:{left:this.parent.uiStateValues.left,top:this.parent.uiStateValues.top}};if(this.parent.onScrollUiUpdate(t),"Month"===this.parent.options.currentView&&this.parent.element.querySelector(".e-week-number-wrapper")){var i=[].slice.call(this.parent.element.querySelectorAll(".e-content-wrap table tr td:first-child"));[].slice.call(this.parent.element.querySelectorAll(".e-week-number")).forEach((function(e,t){sf.base.setStyleAttribute(e,{height:i[parseInt(t.toString(),10)].style.height})})),this.parent.element.querySelector(".e-week-number-wrapper").scrollTop=this.parent.element.querySelector(".e-content-wrap").scrollTop}}},t.prototype.updateBlockIndicatorEle=function(){for(var e=0,t=[].slice.call(this.parent.element.querySelectorAll(".e-block-indicator"));e<t.length;e++){var i=t[e],n=this.getStartTime(i),s=this.getGroupIndex(i),r=this.getCellTd(s,n),a=0,o=0;this.parent.options.enableRtl?o=r.parentElement.offsetWidth-r.offsetLeft-this.cellWidth:a=r.offsetLeft,this.updateBlockIndicator(i,o,a,r,r.offsetTop)}},t.prototype.updateBlockElements=function(){for(var e=0,t=[].slice.call(this.parent.element.querySelectorAll(".e-block-appointment"));e<t.length;e++){var i=t[e],n=this.getStartTime(i),s=this.getGroupIndex(i),r=this.getCellTd(s,n),a=r.offsetHeight-this.monthHeaderHeight-this.eventTop,o=r.offsetWidth,l=Math.round(i.offsetWidth/o);l*=o;var c=0,p=0;this.parent.options.enableRtl?p=r.parentElement.offsetWidth-r.offsetLeft-this.cellWidth:c=r.offsetLeft;var h=r.offsetTop+this.monthHeaderHeight+this.eventTop;sf.base.setStyleAttribute(i,{width:l+"px",left:c+"px",right:p+"px",height:a+"px",top:h+"px"})}},t.prototype.updateNormalEventElements=function(e){for(var t=0,i=[].slice.call(this.parent.element.querySelectorAll(".e-appointment"));t<i.length;t++){var n=i[t],s=this.getStartTime(n),r=this.getGroupIndex(n),a=this.getCellTd(r,s),o=this.getOverLapCount(n),l=0,c=0;this.parent.options.enableRtl?c=a.parentElement.offsetWidth-a.offsetLeft-this.cellWidth:l=a.offsetLeft;var p=this.monthHeaderHeight+a.offsetTop+o*e+this.eventTop;sf.base.setStyleAttribute(n,{left:l+"px",right:c+"px",top:p+"px"})}},t.prototype.updateCellHeight=function(e,t,i,n){t>n[parseInt(i.toString(),10)]&&(n[parseInt(i.toString(),10)]=t,sf.base.setStyleAttribute(e,{height:t+"px"}))},t.prototype.getSlotDates=function(e){this.slots=[];for(var t=this.dateRender.map((function(e){return+e})),i=this.parent.activeViewOptions.showWeekend?7:e.length;t.length>0;)this.slots.push(t.splice(0,i))},t.prototype.renderEvents=function(e,t,i){var n=e.startTime,s=this.parent.getIndexOfDate(this.dateRender,c(n)),r=e.data.count*this.cellWidth-5,a=this.workCells[parseInt(s.toString(),10)],o=this.parent.inlineModule.createInlineAppointmentElement();sf.base.setStyleAttribute(o,{width:r+"px"}),this.renderEventElement(o,a)},t.prototype.renderEventElement=function(e,t){var i=sf.base.createElement("div",{className:"e-appointment-wrapper"});i.appendChild(e),t.appendChild(i)},t}(q),R=(T=function(e,t){return(T=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}T(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),W=function(e){function t(t){var i=e.call(this,t)||this;return i.isInverseTableSelect=!0,i.baseCssClass="e-vertical-view",i}return R(t,e),t.prototype.onDataReady=function(){(this.removeVirtualMask(),this.parent.activeViewOptions.timeScale.enable)?new k(this.parent).renderAppointments():new L(this.parent).renderAppointments()},t.prototype.onContentScroll=function(e){this.parent.removeNewEventElement();var t=e.target;this.parent.onVirtualScroll(),this.scrollLeftPanel(t),this.scrollTopPanel(t),this.parent.uiStateValues.top=t.scrollTop,this.parent.uiStateValues.left=t.scrollLeft,this.parent.onClosePopup(),this.parent.setPersistence()},t.prototype.onAdaptiveMove=function(e){this.parent.uiStateValues.action&&e.cancelable&&e.preventDefault()},t.prototype.scrollLeftPanel=function(e){var t=this.getLeftPanelElement();sf.base.isNullOrUndefined(t)||(t.scrollTop=e.scrollTop)},t.prototype.onScrollUiUpdate=function(e){var t=this.parent.element.querySelector(".e-date-header-wrap"),i=this.getHeaderBarHeight(),n=this.getLeftPanelElement(),s=this.getContentAreaElement(),r=this.getDatesHeaderElement(),a=this.parent.element.offsetHeight-i-r.offsetHeight;this.setContentHeight(s,n,a),this.setColWidth(s);var o=m();r.firstElementChild.style[e.cssProperties.rtlBorder]="",r.style[e.cssProperties.rtlPadding]="";var l=!this.parent.options.enableAllDayScroll||!(s.offsetWidth-s.clientWidth<=t.offsetWidth-t.clientWidth&&t.classList.contains("e-all-day-scroll"));s.offsetWidth-s.clientWidth>0&&l?(r.firstElementChild.style[e.cssProperties.border]=o>0?"1px":"0px",r.style[e.cssProperties.padding]=o>0?o-1+"px":"0px"):(r.firstElementChild.style[e.cssProperties.border]="",r.style[e.cssProperties.padding]=""),e.isPreventScrollUpdate||(this.parent.uiStateValues.isInitial?(this.parent.isTimelineView()&&(s.scrollTop=this.parent.uiStateValues.top),this.scrollToWorkHour(),this.parent.uiStateValues.isInitial=!1):(n&&(n.scrollTop=this.parent.uiStateValues.top),s.scrollTop=this.parent.uiStateValues.top,s.scrollLeft=this.parent.uiStateValues.left)),this.highlightCurrentTime();var c=this.parent.element.querySelector(".e-table-wrap table");c&&!c.classList.contains("e-outer-table")&&sf.base.addClass([c],"e-outer-table"),this.retainScrollPosition()},t.prototype.setContentHeight=function(e,t,i){sf.base.isNullOrUndefined(t)||(t.style.height="auto"===this.parent.options.height?"auto":sf.base.formatUnit(i-this.getScrollXIndent(e))),e.style.height="auto"===this.parent.options.height?"auto":sf.base.formatUnit(i)},t.prototype.scrollToWorkHour=function(){if(this.parent.options.workHours.highlight){var e=this.element.querySelector(".e-work-hours");e&&(this.getContentAreaElement().scrollTop=e.offsetTop,this.parent.uiStateValues.top=e.offsetTop,this.parent.uiStateValues.left=0)}},t.prototype.scrollToHour=function(e,t){var i=this.parent.getStartEndTime(e);if(!sf.base.isNullOrUndefined(t)){var n=this.parent.getMsFromDate(new Date(c(new Date(+t)).getTime())),s=this.element.querySelector('.e-header-cells[data-date="'+n+'"]');if(s)if(this.parent.options.enableRtl){var r=this.element.querySelector(".e-content-table");this.getContentAreaElement().scrollLeft=-(r.offsetWidth-s.offsetLeft-s.offsetWidth)}else this.getContentAreaElement().scrollLeft=s.offsetLeft}sf.base.isNullOrUndefined(i)||(this.getContentAreaElement().scrollTop=this.getTopFromDateTime(i))},t.prototype.scrollToDate=function(e){this.scrollToHour(null,e)},t.prototype.isWorkHourRange=function(e){return this.getStartHour().getTime()<=e.getTime()&&this.getEndHour().getTime()>=e.getTime()},t.prototype.highlightCurrentTime=function(){var e=this,t=[].slice.call(this.element.querySelectorAll(".e-current-day"));t.length>0&&sf.base.removeClass(t,"e-current-day");for(var i='.e-date-header[data-date="'+y(c(new Date(this.parent.getCurrentTime()))).getTime().toString()+'"]',n=0,s=t=[].slice.call(this.element.querySelectorAll(i));n<s.length;n++){var r=s[n];sf.base.addClass([r],"e-current-day")}if(this.parent.activeViewOptions.timeScale.enable&&!(this.parent.isTimelineView()&&this.parent.activeViewOptions.headerRows&&this.parent.activeViewOptions.headerRows.length>0&&"Hour"!==this.parent.activeViewOptions.headerRows.slice(-1)[0].option))if(this.parent.options.showTimeIndicator&&this.isWorkHourRange(this.parent.getCurrentTime())){var a=this.getCurrentTimeIndicatorIndex(),o=this.getLeftPanelElement();if(sf.base.isNullOrUndefined(o)||sf.base.removeClass(o.querySelectorAll(".e-hide-childs"),"e-hide-childs"),a.length>0)[].slice.call(this.element.querySelectorAll(".e-work-cells")).length>0&&this.changeCurrentTimePosition(),sf.base.isNullOrUndefined(this.currentTimeIndicatorTimer)&&(this.currentTimeIndicatorTimer=window.setInterval((function(){e.changeCurrentTimePosition()}),6e4));else this.clearCurrentTimeIndicatorTimer()}else this.clearCurrentTimeIndicatorTimer()},t.prototype.getCurrentTimeIndicatorIndex=function(){for(var e=[],t=[].slice.call(this.element.querySelectorAll(".e-timeline-wrapper")),i=y(c(new Date(this.parent.getCurrentTime()))).getTime().toString(),n=0,s=t.length;n<s;n++)t[parseInt(n.toString(),10)].getAttribute("data-date")===i&&e.push(n);return e},t.prototype.clearCurrentTimeIndicatorTimer=function(){if(!sf.base.isNullOrUndefined(this.currentTimeIndicatorTimer)){window.clearInterval(this.currentTimeIndicatorTimer),this.currentTimeIndicatorTimer=null,this.removeCurrentTimeIndicatorElements();var e=this.parent.element.querySelector(".e-table-wrap table");e&&this.parent.options.enableRtl&&this.parent.isTimelineView()&&sf.base.removeClass([e],"e-outer-table")}},t.prototype.removeCurrentTimeIndicatorElements=function(){for(var e=0,t=[].slice.call(this.element.querySelectorAll(".e-previous-timeline,.e-current-timeline,.e-current-time"));e<t.length;e++){var i=t[e];sf.base.remove(i)}},t.prototype.changeCurrentTimePosition=function(){if(!this.parent.isDestroyed){this.removeCurrentTimeIndicatorElements();var e=this.getCurrentTimeIndicatorIndex(),t=this.parent.getContentTable().rows[0],i=this.getTopFromDateTime(this.parent.getCurrentTime()),n=sf.base.formatUnit(i),s=Math.floor(i/t.cells[0].offsetHeight);if(!sf.base.isNullOrUndefined(s)&&!isNaN(s)){for(var r=[].slice.call(this.element.querySelectorAll(".e-timeline-wrapper")),a=0,o=e[0];a<o;a++)r[parseInt(a.toString(),10)].appendChild(sf.base.createElement("div",{className:"e-previous-timeline",styles:"top:"+n}));for(var l=0,c=e;l<c.length;l++){var p=c[l];r[parseInt(p.toString(),10)].appendChild(sf.base.createElement("div",{className:"e-current-timeline",styles:"top:"+n}))}var h=sf.base.createElement("div",{innerHTML:this.parent.getTimeString(this.parent.getCurrentTime()),className:"e-current-time",styles:"top:"+n}),u=this.getLeftPanelElement();if(!sf.base.isNullOrUndefined(u)){var d=[].slice.call(u.querySelectorAll("tr"));s<=d.length&&(sf.base.removeClass(u.querySelectorAll(".e-hide-childs"),"e-hide-childs"),sf.base.addClass([d[parseInt(s.toString(),10)].lastElementChild],"e-hide-childs"),sf.base.prepend([h],u),h.style.top=sf.base.formatUnit(h.offsetTop-h.offsetHeight/2))}}}},t.prototype.getTopFromDateTime=function(e){var t=this.getStartHour();return(60*(e.getHours()-t.getHours())+(e.getMinutes()-t.getMinutes()))*this.getWorkCellHeight()*this.parent.activeViewOptions.timeScale.slotCount/this.parent.activeViewOptions.timeScale.interval},t.prototype.getWorkCellHeight=function(){return this.element.querySelector(".e-work-cells").offsetHeight},t.prototype.renderLayout=function(){this.element=this.parent.element.querySelector(".e-table-wrap");for(var e=0,t=[].slice.call(this.element.querySelectorAll(".e-date-header-wrap td.e-header-cells"));e<t.length;e++){var i=t[e];sf.base.EventHandler.clearEvents(i),this.wireMouseEvents(i)}for(var n=0,s=[].slice.call(this.element.querySelectorAll(".e-date-header-wrap td.e-all-day-cells"));n<s.length;n++){i=s[n];sf.base.EventHandler.clearEvents(i),this.wireCellEvents(i)}this.parent.virtualScrollModule&&this.parent.virtualScrollModule.setTranslateValue();var r=this.element.querySelector(".e-content-wrap"),a=this.element.querySelector(".e-content-table tbody");sf.base.EventHandler.clearEvents(a),this.wireCellEvents(a),sf.base.EventHandler.clearEvents(r),sf.base.EventHandler.add(r,"scroll",this.onContentScroll,this),sf.base.EventHandler.add(r,sf.base.Browser.touchMoveEvent,this.onAdaptiveMove,this),this.parent.setDimensions()},t.prototype.wireCellEvents=function(e){this.parent.isPrintSchedule||(sf.base.EventHandler.add(e,"mousedown",this.parent.workCellAction.cellMouseDown,this.parent.workCellAction),this.wireMouseEvents(e))},t.prototype.wireMouseEvents=function(e){this.parent.isPrintSchedule||(sf.base.EventHandler.add(e,"click",this.parent.workCellAction.cellClick,this.parent.workCellAction),this.parent.isAdaptive||sf.base.EventHandler.add(e,"dblclick",this.parent.workCellAction.cellDblClick,this.parent.workCellAction))},t.prototype.getLeftPanelElement=function(){return this.element.querySelector(".e-time-cells-wrap")},t.prototype.getEndDateFromStartDate=function(e){var t=6e4*this.parent.activeViewOptions.timeScale.interval/this.parent.activeViewOptions.timeScale.slotCount,i=new Date(e.getTime());return i.setMilliseconds(i.getMilliseconds()+t),i},t.prototype.destroy=function(){if(this.clearCurrentTimeIndicatorTimer(),this.parent.removeNewEventElement(),this.element){var e=this.getContentAreaElement();e&&sf.base.EventHandler.remove(e,"scroll",this.onContentScroll),this.element=null}},t}(M),U=(C=function(e,t){return(C=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}C(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),N=function(e){function t(t,i){var n=e.call(this,t)||this;n.startHour=n.parent.activeView.getStartHour(),n.endHour=n.parent.activeView.getEndHour(),n.slotCount=n.parent.activeViewOptions.timeScale.slotCount,n.interval=n.parent.activeViewOptions.timeScale.interval,n.day=0,n.rowIndex=0,n.renderType=i;var s=[].slice.call(n.parent.element.querySelectorAll(".e-content-table tbody tr"));return n.dayLength=0===s.length?0:s[0].children.length,n.content=n.parent.element.querySelector(".e-content-table"),n}return U(t,e),t.prototype.getSlotDates=function(){this.slots=[],this.slots.push(this.parent.activeView.renderDates.map((function(e){return+e}))),this.parent.activeViewOptions.headerRows.length>0&&"Hour"!==this.parent.activeViewOptions.headerRows[this.parent.activeViewOptions.headerRows.length-1].option?(this.renderType="day",this.cellWidth=Math.ceil(this.content.getBoundingClientRect().width)/this.dateRender.length,this.slotsPerDay=1):this.slotsPerDay=this.dayLength/this.dateRender.length},t.prototype.renderAppointments=function(){var e=this,t=[].slice.call(this.parent.element.querySelectorAll(".e-appointment, .e-more-indicator, .e-block-appointment, .e-block-indicator")),i=this.parent.element.querySelector(".e-work-cells");if(i){var s=this.parent.element.querySelector(".e-content-wrap");this.parent.options.rowAutoHeight&&(this.parent.uiStateValues.top=s.scrollTop,this.parent.uiStateValues.left=s.scrollLeft),this.removeHeightProperty("e-content-table"),this.eventHeight=n(this.parent.element.querySelector(".e-table-wrap"),"e-appointment");var r=".e-content-table tbody tr";if(this.addCellHeight(r,this.eventHeight,2,this.moreIndicatorHeight,0),t.forEach((function(t){e.removedPositionedStyles(t)})),this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive){this.removeHeightProperty("e-resource-column-table");var a=[].slice.call(this.parent.element.querySelectorAll(".e-appointment-container")),o=i.getBoundingClientRect().height;a.forEach((function(e){e.style.height=o+"px"})),r=".e-resource-column-table tbody tr",this.addCellHeight(r,this.eventHeight,2,this.moreIndicatorHeight,0)}var l=i.offsetParent;l&&(this.cellHeight=l.offsetHeight/l.querySelector("tbody").childElementCount,this.cellWidth=l.offsetWidth/l.querySelector("tbody tr").childElementCount);var p=n(this.parent.element.querySelector(".e-current-panel"),"e-appointment");this.dateRender=this.parent.activeView.renderDates,this.getSlotDates();for(var h=[],u=0;u<t.length;u++){var d=t[parseInt(u.toString(),10)];sf.base.removeClass([d],"e-event-action"),d.blur();var f="none"!==d.style.display;d.style.removeProperty("display");var g=w(this.getStartTime(d)),m=w(this.getEndTime(d));if(this.day=this.parent.getIndexOfDate(this.dateRender,c(new Date(g.getTime()))),this.day>=0){var v=this.getOverLapCount(d),b=this.getDataCount(d),y="true"===this.isAllDayData(d),S=this.getEventWidth(g,m,y,b);S="day"===this.renderType?S-2:S;var O=0,T=0,C=this.getPosition(g,m,!d.classList.contains("e-more-indicator")&&y,this.day);S=S<=0?this.cellWidth:S;var D=this.getGroupIndex(d),A=d.classList.contains("e-block-appointment")?0:(this.maxHeight?0:2)+v*(p+2);this.parent.options.enableRtl?T=C:O=C;var E=(v+1)*(p+2)+this.moreIndicatorHeight;if(d.classList.contains("e-more-indicator")){var I=this.cellHeight-this.moreIndicatorHeight;d.style.top=0+I+"px",d.style.width=this.cellWidth+"px",d.style.left=Math.floor(O/this.cellWidth)*this.cellWidth+"px",d.style.right=Math.floor(T/this.cellWidth)*this.cellWidth+"px"}else if(d.classList.contains("e-block-indicator"))C=Math.floor(C/this.cellWidth)*this.cellWidth+this.cellWidth-22,this.parent.options.enableRtl?d.style.right=C+"px":d.style.left=C+"px",d.style.top=0+this.cellHeight-18+"px";else if(sf.base.setStyleAttribute(d,{width:S+"px",left:O+"px",right:T+"px",top:A+"px"}),this.maxOrIndicator&&this.setMaxEventHeight(d),d.classList.contains("e-block-appointment")&&sf.base.setStyleAttribute(d,{height:this.cellHeight-1+"px"}),d.classList.contains("e-appointment")&&!f&&this.parent.eventBase.wireAppointmentEvents(d),this.parent.options.rowAutoHeight){var x=this.getFirstChild(D);sf.base.isNullOrUndefined(h[parseInt(D.toString(),10)])&&(h[parseInt(D.toString(),10)]=Math.ceil(x.getBoundingClientRect().height),d.parentElement.style.height=h[parseInt(D.toString(),10)]+"px"),this.updateCellHeight(x,E,D,h)}}}this.updateRowHeight()}},t.prototype.updateRowHeight=function(){if(this.parent.options.rowAutoHeight){this.updateBlockElements();var e=sf.base.isNullOrUndefined(this.parent.activeViewOptions.group.resources)||0===this.parent.activeViewOptions.group.resources.length,t={cssProperties:this.parent.getCssProperties(),isPreventScrollUpdate:e,scrollPosition:{left:this.parent.uiStateValues.left,top:this.parent.uiStateValues.top}};this.parent.virtualScrollModule&&this.parent.virtualScrollModule.updateVirtualScrollHeight(),this.parent.onScrollUiUpdate(t)}},t.prototype.updateBlockElements=function(){for(var e=0,t=[].slice.call(this.parent.element.querySelectorAll(".e-block-appointment"));e<t.length;e++){var i=t[e],n=parseInt(i.getAttribute("data-group-index"),10),s=this.getFirstChild(n),r=s.offsetWidth;i.style.height=s.offsetHeight+"px";var a=Math.round(i.offsetWidth/r);i.style.width=r*a+"px"}for(var o=0,l=[].slice.call(this.parent.element.querySelectorAll(".e-block-indicator"));o<l.length;o++){i=l[o],n=parseInt(i.getAttribute("data-group-index"),10);i.style.top=this.getFirstChild(n).offsetHeight-18+"px"}},t.prototype.setMaxEventHeight=function(e){sf.base.setStyleAttribute(e,{height:this.cellHeight-(this.maxHeight?0:2)-(this.maxHeight?0:this.moreIndicatorHeight)+"px"})},t.prototype.getFirstChild=function(e){var t="";return this.parent.activeViewOptions.group.resources.length>0&&(t='[data-group-index="'+e.toString()+'"]'),this.parent.element.querySelector(".e-content-table tbody td"+t)},t.prototype.updateCellHeight=function(e,t,i,n){if(t>n[parseInt(i.toString(),10)]){if(n[parseInt(i.toString(),10)]=t,sf.base.setStyleAttribute(e,{height:t+"px"}),this.parent.activeViewOptions.group.resources.length>0){var s=this.parent.element.querySelector('.e-resource-column-table tbody td[data-group-index="'+i+'"]'),r=this.parent.element.querySelector('.e-appointment-container[data-group-index="'+i+'"]');s&&sf.base.setStyleAttribute(s,{height:t+"px"}),r&&sf.base.setStyleAttribute(r,{height:t+"px"})}var a=this.parent.element.querySelector(".e-month-header-wrapper table tr:nth-child("+(e.parentElement.rowIndex+1)+") td");a&&sf.base.setStyleAttribute(a,{height:t+"px"})}},t.prototype.isAllDayData=function(e){return e.getAttribute("data-all-day")},t.prototype.getEventWidth=function(e,t,i,n){return"day"===this.renderType||i?n*this.slotsPerDay*this.cellWidth:this.isSameDay(e,t)?this.getSameDayEventsWidth(e,t):this.getSpannedEventsWidth(e,t,n)},t.prototype.getSameDayEventsWidth=function(e,t){return(v(t)-v(e))/6e4*(this.cellWidth*this.slotCount)/this.interval},t.prototype.getSpannedEventsWidth=function(e,t,i){var n,s=i*this.slotsPerDay*this.cellWidth,r=d(c(new Date(e.getTime())),this.startHour,this.endHour),a=this.getSameDayEventsWidth(r.startHour,e);if(-1===this.parent.getIndexOfDate(this.dateRender,c(new Date(t.getTime()))))n=0;else{var o=d(c(new Date(t.getTime())),this.startHour,this.endHour);n=this.getSameDayEventsWidth(t,o.endHour),n=this.slotsPerDay*this.cellWidth===n?0:n}var l=a+n;return s>l?s-l:s-a},t.prototype.isSameDay=function(e,t){return this.parent.getIndexOfDate(this.dateRender,c(new Date(e.getTime())))===this.parent.getIndexOfDate(this.dateRender,c(new Date(t.getTime())))},t.prototype.getAppointmentLeft=function(e,t,i){var n=this.isSameDay(t,e.startHour)?(v(t)-v(e.startHour))/(6e4*this.interval)*this.slotCount:0;return 0===i?n:Math.round((v(e.endHour)-v(e.startHour))/6e4/this.interval*this.slotCount)*i+n},t.prototype.getPosition=function(e,t,i,n){if("day"===this.renderType||i)return n*this.slotsPerDay*this.cellWidth;var s=d(c(new Date(this.dateRender[parseInt(n.toString(),10)].getTime())),this.startHour,this.endHour);return(s.endHour.getTime()<=t.getTime()&&s.startHour.getTime()>=e.getTime()?this.getAppointmentLeft(s,s.startHour,n):s.endHour.getTime()<=t.getTime()?this.getAppointmentLeft(s,e,n):s.startHour.getTime()>=e.getTime()?this.getAppointmentLeft(s,s.startHour,n):this.getAppointmentLeft(s,e,n))*this.cellWidth},t.prototype.getRowTop=function(e,t){return this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive?t?this.parent.element.querySelector('.e-content-wrap tbody td[data-group-index="'+e.toString()+'"]').offsetTop:this.cellHeight*e:0},t.prototype.renderEvents=function(e,t,i){var n=e.data,s=e.startTime,r=e.endTime;this.dateRender=this.parent.activeView.renderDates,this.day=this.parent.getIndexOfDate(this.dateRender,c(new Date(s.getTime()))),this.rowIndex=t;var a=this.getCellTd(),o=this.eventHeight,l=n.count,p=this.getEventWidth(s,r,e.isAllDay,l);p="day"===this.renderType?p-2:p;var h=this.getPosition(s,r,e.isAllDay,this.day);p=p<=0?this.cellWidth:p;var u=2+(o+2),d=this.parent.options.enableRtl?0:h,f=this.parent.options.enableRtl?h:0,g=this.parent.inlineModule.createInlineAppointmentElement();sf.base.setStyleAttribute(g,{width:p+"px",left:d+"px",right:f+"px",top:u+"px"}),this.renderEventElement(g,a)},t.prototype.getCellTd=function(){var e=this.parent.uiStateValues.isGroupAdaptive?0:this.rowIndex;return this.eventContainers[parseInt(e.toString(),10)]},t}(L),B=(D=function(e,t){return(D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}D(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),z=function(e){function t(t){var i=e.call(this,t)||this;return i.baseCssClass="e-timeline-view",i}return B(t,e),t.prototype.getLeftPanelElement=function(){return this.element.querySelector(".e-resource-column-wrap")},t.prototype.scrollTopPanel=function(t){e.prototype.scrollTopPanel.call(this,t),this.scrollHeaderLabels(t)},t.prototype.scrollToWorkHour=function(){var e=this.parent.getStartEndTime(this.parent.options.workHours.start),t=this.isWorkDay(this.parent.options.selectedDate)&&this.parent.options.workHours.highlight&&!sf.base.isNullOrUndefined(e)?new Date(+this.parent.options.selectedDate).setHours(e.getHours(),e.getMinutes(),0,0):new Date(+this.parent.options.selectedDate).setHours(0,0,0,0),i=this.getScrollableElement(t);sf.base.isNullOrUndefined(i)&&(e=this.parent.getStartEndTime(this.parent.activeViewOptions.startHour),t=new Date(+this.parent.options.selectedDate).setHours(e.getHours(),e.getMinutes(),0,0),i=this.getScrollableElement(t)),i&&(this.getContentAreaElement().scrollLeft=this.parent.options.enableRtl?-(this.parent.getContentTable().offsetWidth-i.offsetLeft-i.offsetWidth):i.offsetLeft)},t.prototype.getScrollableElement=function(e){var t='[data-date="'+this.parent.getMsFromDate(new Date(e))+'"]';return this.element.querySelector(t)},t.prototype.scrollToHour=function(e,t){var i,n,s;if(t&&(n=this.parent.getIndexOfDate(this.renderDates,this.parent.resetTime(t)))>=0&&(i=t,!sf.base.isNullOrUndefined(e))){var r=e.split(":");2===r.length&&(i=new Date(t.setHours(parseInt(r[0],10),parseInt(r[1],10),0)))}(i=sf.base.isNullOrUndefined(t)?this.parent.getStartEndTime(e):i,sf.base.isNullOrUndefined(i))||(s=sf.base.isNullOrUndefined(e)||!this.parent.activeViewOptions.timeScale.enable?n*this.getWorkCellWidth():sf.base.isNullOrUndefined(t)?this.getLeftFromDateTime(null,i):this.getLeftFromDateTime([n],i),this.getContentAreaElement().scrollLeft=this.parent.options.enableRtl?-s:s)},t.prototype.changeCurrentTimePosition=function(){if(!this.parent.isDestroyed){this.removeCurrentTimeIndicatorElements();var e=this.getCurrentTimeIndicatorIndex(),t=this.getLeftFromDateTime(e,this.parent.getCurrentTime()),i=this.element.querySelector(".e-content-table").offsetHeight,n=this.element.querySelector(".e-date-header-wrap");if(this.element.querySelector(".e-content-wrap").appendChild(sf.base.createElement("div",{className:"e-current-timeline",styles:(this.parent.options.enableRtl?"right":"left")+":"+sf.base.formatUnit(t)+"; height:"+sf.base.formatUnit(i)})),this.parent.virtualScrollModule){var s=this.parent.element.querySelector(".e-current-timeline"),r=this.parent.element.querySelector(".e-content-wrap table");sf.base.setStyleAttribute(s,{transform:r.style.transform})}var a=sf.base.createElement("div",{innerHTML:this.parent.getTimeString(this.parent.getCurrentTime()),className:"e-current-time"});n.appendChild(a),a.style[this.parent.options.enableRtl?"right":"left"]=sf.base.formatUnit(t-a.offsetWidth/2)}},t.prototype.getLeftFromDateTime=function(e,t){var i=this.getStartHour(),n=this.getEndHour(),s=0,r=60*(t.getHours()-i.getHours())+(t.getMinutes()-i.getMinutes());if(!sf.base.isNullOrUndefined(e)){var a=0===n.getHours()?24:n.getHours();0!==e[0]&&(s=e[0]*(60*(a-i.getHours()))+(n.getMinutes()-i.getMinutes())),r=s+r}return r*this.getWorkCellWidth()*this.parent.activeViewOptions.timeScale.slotCount/this.parent.activeViewOptions.timeScale.interval},t.prototype.getWorkCellWidth=function(){return this.element.querySelector(".e-work-cells").getBoundingClientRect().width},t.prototype.getCurrentTimeIndicatorIndex=function(){var e=[],t=this.parent.getIndexOfDate(this.renderDates,this.parent.resetTime(this.parent.getCurrentTime()));return t>=0&&e.push(t),e},t.prototype.renderEvents=function(){},t.prototype.onDataReady=function(){(this.removeVirtualMask(),this.parent.activeViewOptions.timeScale.enable)?new N(this.parent,"hour").renderAppointments():new N(this.parent,"day").renderAppointments()},t}(W),Y=(A=function(e,t){return(A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}A(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),F=function(e){function t(t){var i=e.call(this,t)||this;return i.dayNameFormat="wide",i.isInverseTableSelect=!1,i.allDayLevel=0,i}return Y(t,e),t.prototype.onDataReady=function(e){if("MonthAgenda"!==this.parent.options.currentView){var t=new L(this.parent);this.removeVirtualMask(),t.renderAppointments()}else this.parent.eventBase.removeSelectedAppointmentClass()},t.prototype.onContentScroll=function(e){this.parent.removeNewEventElement(),this.parent.onVirtualScroll(),this.scrollTopPanel(e.target),this.scrollLeftPanel(e.target),this.parent.uiStateValues.top=e.target.scrollTop,this.parent.uiStateValues.left=e.target.scrollLeft,this.parent.setPersistence()},t.prototype.scrollLeftPanel=function(e){var t=this.getLeftPanelElement();t&&(t.scrollTop=e.scrollTop)},t.prototype.getLeftPanelElement=function(){return this.element.querySelector(".e-week-number-wrapper")},t.prototype.onScrollUiUpdate=function(e){var t=this.getHeaderBarHeight(),i=this.getDatesHeaderElement(),n=this.getContentAreaElement(),s=this.parent.element.offsetHeight-t-i.offsetHeight,r=this.getLeftPanelElement();"auto"!==this.parent.options.height?this.setContentHeight(n,r,s):(n.style.height="auto",r&&(r.style.height="auto"));var a=m();if(i.firstElementChild.style[e.cssProperties.rtlBorder]="",i.style[e.cssProperties.rtlPadding]="",n.offsetWidth-n.clientWidth>0?(i.firstElementChild.style[e.cssProperties.border]=a>0?"1px":"0px",i.style[e.cssProperties.padding]=a>0?a-1+"px":"0px"):(i.firstElementChild.style[e.cssProperties.border]="",i.style[e.cssProperties.padding]=""),this.setColWidth(n),e.scrollPosition||!e.isPreventScrollUpdate&&"TimelineMonth"===this.parent.options.currentView){var o="TimelineMonth"===this.parent.options.currentView?this.parent.uiStateValues.top:e.scrollPosition.top;r&&(r.scrollTop=o),n.scrollTop=o,this.parent.uiStateValues.isInitial?(this.scrollToSelectedDate(),this.parent.uiStateValues.isInitial=!1):n.scrollLeft="TimelineMonth"===this.parent.options.currentView?this.parent.uiStateValues.left:e.scrollPosition.left}else this.scrollToSelectedDate();this.retainScrollPosition()},t.prototype.scrollToSelectedDate=function(){var e=this.element.querySelector('.e-header-cells[data-date="'+this.parent.getMsFromDate(this.parent.options.selectedDate)+'"]'),t=this.getContentAreaElement();sf.base.isNullOrUndefined(e)?t.scrollLeft=0:t.scrollLeft=this.parent.options.enableRtl?-(this.parent.getContentTable().offsetWidth-e.offsetLeft-e.offsetWidth):e.offsetLeft,0===t.scrollLeft&&this.parent.uiStateValues.isInitial&&(this.parent.uiStateValues.left=0)},t.prototype.setContentHeight=function(e,t,i){e.style.height="auto","Month"===this.parent.options.currentView&&(e.style.height=sf.base.formatUnit(i)),t&&("MonthAgenda"===this.parent.options.currentView&&(i=this.element.querySelector(".e-content-table").offsetHeight),t.style.height="auto",t.style.height=sf.base.formatUnit(i-this.getScrollXIndent(e)))},t.prototype.renderLayout=function(){"Month"!==this.parent.options.currentView&&"MonthAgenda"!==this.parent.options.currentView||(this.parent.eventBase&&this.parent.eventBase.removeHeightProperty("e-content-table"),"Month"===this.parent.options.currentView&&this.parent.element.querySelector(".e-week-number-wrapper")&&[].slice.call(this.parent.element.querySelectorAll(".e-week-number")).forEach((function(e){e.style.height=""})));this.element=this.parent.element.querySelector(".e-table-wrap");for(var e=0,t=[].slice.call(this.element.querySelectorAll(".e-date-header-wrap td.e-header-cells"));e<t.length;e++){var i=t[e];sf.base.EventHandler.clearEvents(i),this.wireCellEvents(i)}var n=this.element.querySelector(".e-content-table tbody");sf.base.EventHandler.clearEvents(n),this.wireCellEvents(n),this.parent.virtualScrollModule&&this.parent.virtualScrollModule.setTranslateValue();var s=this.element.querySelector(".e-content-wrap");sf.base.EventHandler.clearEvents(s),sf.base.EventHandler.add(s,"scroll",this.onContentScroll,this),this.renderAppointmentContainer(),this.parent.setDimensions(),this.parent.uiStateValues.isCustomMonth&&(this.parent.uiStateValues.isCustomMonth=!1)},t.prototype.wireCellEvents=function(e){this.parent.isPrintSchedule||(sf.base.EventHandler.add(e,"mousedown",this.parent.workCellAction.cellMouseDown,this.parent.workCellAction),sf.base.EventHandler.add(e,"click",this.parent.workCellAction.cellClick,this.parent.workCellAction),this.parent.isAdaptive||sf.base.EventHandler.add(e,"dblclick",this.parent.workCellAction.cellDblClick,this.parent.workCellAction))},t.prototype.renderAppointmentContainer=function(){},t.prototype.getMonthStart=function(e){var t=a(this.parent.uiStateValues.isCustomMonth&&"Month"===this.parent.options.currentView&&!sf.base.isNullOrUndefined(this.parent.activeViewOptions.displayDate)?new Date(this.parent.activeViewOptions.displayDate):!this.parent.uiStateValues.isCustomMonth&&this.isCustomMonth()?e:o(e),this.parent.activeViewOptions.firstDayOfWeek);return new Date(t.getFullYear(),t.getMonth(),t.getDate())},t.prototype.getMonthEnd=function(e){return this.isCustomMonth()?h(this.getMonthStart(e),7*(this.parent.activeViewOptions.numberOfWeeks>0?this.parent.activeViewOptions.numberOfWeeks:6)-1):h(a(l(u(e,this.parent.activeViewOptions.interval-1)),this.parent.activeViewOptions.firstDayOfWeek),6)},t.prototype.getRenderDates=function(e){var t=[],i=c(this.parent.options.selectedDate),n=this.getMonthStart(i),s=this.getMonthEnd(i);do{(this.parent.activeViewOptions.showWeekend||this.isWorkDay(n,e))&&t.push(n),n=h(n,1)}while(n.getTime()<=s.getTime());return e||(this.renderDates=t),t},t.prototype.isCustomMonth=function(){return"Month"===this.parent.options.currentView&&(!sf.base.isNullOrUndefined(this.parent.activeViewOptions.displayDate)||this.parent.activeViewOptions.numberOfWeeks>0)},t.prototype.getEndDateFromStartDate=function(e){return h(new Date(e.getTime()),1)},t.prototype.destroy=function(){this.parent.isDestroyed||(this.parent.removeNewEventElement(),this.element=null)},t}(M),_=(E=function(e,t){return(E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}E(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),X=function(e){function t(t){return e.call(this,t)||this}return _(t,e),t.prototype.renderAppointmentContainer=function(){"auto"!==this.getContentAreaElement().style.height&&this.setEventWrapperHeight()},t.prototype.setEventWrapperHeight=function(){var e=this.getHeaderBarHeight(!0),t=this.getContentAreaElement().firstElementChild,i=this.element.querySelector(".e-date-header-wrap"),n=this.parent.element.offsetHeight-e-i.offsetHeight-t.offsetHeight,s=this.element.querySelector(".e-wrapper-container"),r=this.element.querySelector(".e-appointment-wrap");"auto"!==this.parent.options.height&&(s.style.height=r.style.height=sf.base.formatUnit(n))},t}(F),G=(I=function(e,t){return(I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}I(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),K=function(e){function t(t){var i=e.call(this,t)||this;return i.isInverseTableSelect=!0,i}return G(t,e),t.prototype.onDataReady=function(e){var t=new N(this.parent,"day");this.removeVirtualMask(),t.renderAppointments()},t.prototype.getLeftPanelElement=function(){return this.element.querySelector(".e-resource-column-wrap")},t.prototype.scrollTopPanel=function(t){e.prototype.scrollTopPanel.call(this,t),this.scrollHeaderLabels(t)},t.prototype.setContentHeight=function(e,t,i){t&&(t.style.height=sf.base.formatUnit(i-this.getScrollXIndent(e))),e.style.height=sf.base.formatUnit(i)},t.prototype.getMonthStart=function(e){var t=o(c(e));return new Date(t.getFullYear(),t.getMonth(),t.getDate())},t.prototype.getMonthEnd=function(e){var t=o(c(e));return l(u(new Date(+t),this.parent.activeViewOptions.interval-1))},t}(F),Q=(x=function(e,t){return(x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}x(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),J=function(e){function t(t){var i=e.call(this,t)||this;return i.isInverseTableSelect=!1,i}return Q(t,e),t.prototype.renderLayout=function(){if(this.element=this.parent.element.querySelector(".e-table-wrap"),"TimelineYear"===this.parent.options.currentView){var e="Horizontal"===this.parent.activeViewOptions.orientation,t=this.parent.activeViewOptions.group.resources.length>0;this.isInverseTableSelect=!(e&&!t);for(var i=0,n=[].slice.call(this.element.querySelectorAll(".e-work-cells:not(.e-other-month)"));i<n.length;i++){var s=n[i];sf.base.EventHandler.clearEvents(s),this.wireEvents(s,"cell")}this.parent.virtualScrollModule&&!e&&this.parent.virtualScrollModule.setTranslateValue()}this.wireEvents(this.element.querySelector(".e-content-wrap"),"scroll"),this.parent.setDimensions()},t.prototype.onContentScroll=function(e){var t=e.target;this.parent.onVirtualScroll(),sf.base.isNullOrUndefined(this.element)&&(this.element=t);var i=this.getDatesHeaderElement();i&&(i.firstElementChild.scrollLeft=t.scrollLeft);var n=this.element.querySelector(".e-month-header-wrapper,.e-resource-column-wrap");n&&(n.scrollTop=t.scrollTop),this.parent.isAdaptive||(this.parent.uiStateValues.top=e.target.scrollTop),this.parent.uiStateValues.left=e.target.scrollLeft,this.parent.setPersistence()},t.prototype.onScrollUiUpdate=function(e){var t=this.parent.element.offsetHeight-this.getHeaderBarHeight(),i=this.element.querySelector(".e-date-header-container");i&&(t-=i.offsetHeight);var n=this.element.querySelector(".e-content-wrap"),s=this.element.querySelector(".e-month-header-wrapper,.e-resource-column-wrap"),r="auto"===this.parent.options.height;if(n&&(n.style.height=r?"auto":sf.base.formatUnit(t)),s&&(s.style.height=r?"auto":sf.base.formatUnit(t-this.getScrollXIndent(n))),!this.parent.isAdaptive&&i){var a=m();n.offsetWidth-n.clientWidth>0?(i.firstElementChild.style[e.cssProperties.border]=a>0?"1px":"0px",i.style[e.cssProperties.padding]=a>0?a-1+"px":"0px"):(i.firstElementChild.style[e.cssProperties.border]="",i.style[e.cssProperties.padding]="")}this.resetColWidth(),this.setColWidth(this.getContentAreaElement()),e.isPreventScrollUpdate||(this.parent.uiStateValues.isInitial?(this.parent.uiStateValues.isInitial=!1,this.parent.uiStateValues.top=this.parent.uiStateValues.left=0):(s&&(s.scrollTop=this.parent.uiStateValues.top),n.scrollTop=this.parent.uiStateValues.top,n.scrollLeft=this.parent.uiStateValues.left)),this.retainScrollPosition()},t.prototype.onDataReady=function(){var e=n(this.element.querySelector(".e-event-table"),"e-appointment");if(this.removeVirtualMask(),"TimelineYear"===this.parent.options.currentView){var t=this.parent.options.rowAutoHeight&&this.parent.options.ignoreWhitespace?0:19;this.element=this.parent.element.querySelector(".e-table-wrap"),this.removeCellHeight();var i=".e-content-table tbody tr";this.parent.eventBase.addCellHeight(i,e,2,t,0),i="."+(this.parent.activeViewOptions.group.resources.length>0&&"Vertical"==this.parent.activeViewOptions.orientation?"e-resource-column-table":"e-month-header-wrapper")+" tbody tr",this.parent.eventBase.addCellHeight(i,e,2,t,0);var s=this.element.querySelector(".e-work-cells:not(.e-other-month)"),r=0,a=0,o=s.offsetParent;o&&(r=o.offsetHeight/o.querySelector("tbody").childElementCount,a=o.offsetWidth/o.querySelector("tbody tr").childElementCount);var l=[].slice.call(this.parent.element.querySelectorAll(".e-appointment-container")),c=[].slice.call(o.querySelectorAll("tbody tr"));l.forEach((function(e,t){e.classList.contains("e-hidden")?e.removeAttribute("style"):e.style.height=c[parseInt(t.toString(),10)].getBoundingClientRect().height+"px"}));for(var p=s.querySelector(".e-date-header"),h=sf.base.isNullOrUndefined(p)?0:b(p),u=void 0,d=void 0,f=[],g=void 0,m=this.element.querySelectorAll(".e-appointment, .e-more-indicator"),v=0;v<m.length;v++){var y=m[parseInt(v.toString(),10)];sf.base.removeClass([y],"e-event-action");var w="none"!==y.style.display;y.style.removeProperty("display"),y.blur();var S=void 0,O=void 0,T=void 0,C=void 0;if(S=null!=this.parent.activeViewOptions.group.resources&&this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive?this.element.querySelector('.e-work-cells[data-date="'+y.getAttribute("data-date")+'"][data-group-index="'+y.getAttribute("data-group-index")+'"]'):this.element.querySelector('.e-work-cells[data-date="'+y.getAttribute("data-date")+'"]'),this.parent.options.enableRtl?d=S.cellIndex*a:u=S.cellIndex*a,!sf.base.isNullOrUndefined(S)){if(y.classList.contains("e-appointment")){var D=parseInt(y.getAttribute("data-index"),10);O=h+e*D+2,this.parent.options.rowAutoHeight||(T=this.parent.options.enableMaxHeight&&!this.parent.options.enableIndicator?r-h-2:this.parent.options.enableMaxHeight&&this.parent.options.enableIndicator?r-h-t:e),C=a*parseInt(y.getAttribute("data-total-length"),10)-2,w||this.parent.eventBase.wireAppointmentEvents(y);var A=(D+1)*e+(0!==t?t:2)+h;if(this.parent.options.rowAutoHeight&&r<A){var E=S.parentNode,I=E.sectionRowIndex;sf.base.isNullOrUndefined(f[parseInt(I.toString(),10)])&&(f[parseInt(I.toString(),10)]=Math.ceil(E.getBoundingClientRect().height),y.parentElement.style.height=f[parseInt(I.toString(),10)]+"px"),this.updateCellHeight(S,A,I,f)}}else sf.base.isNullOrUndefined(g)&&(g=y.getBoundingClientRect().height),O=r-g,C=a-2;y.style.width=C+"px",y.style.height=T+"px",y.style.right=d+"px",y.style.left=u+"px",y.style.top=O+"px"}}this.updateRowHeight()}},t.prototype.updateRowHeight=function(){if(this.parent.options.rowAutoHeight){var e={cssProperties:this.parent.getCssProperties(),isPreventScrollUpdate:!0,scrollPosition:{left:this.parent.uiStateValues.left,top:this.parent.uiStateValues.top}};this.parent.virtualScrollModule&&this.parent.virtualScrollModule.updateVirtualScrollHeight(),this.parent.onScrollUiUpdate(e)}},t.prototype.updateCellHeight=function(e,t,i,n){if(t>n[parseInt(i.toString(),10)]){n[parseInt(i.toString(),10)]=t,sf.base.setStyleAttribute(e.parentElement.querySelector("td"),{height:t+"px"});var s=[].slice.call(this.parent.element.querySelectorAll(".e-event-table .e-event-container"));if(sf.base.setStyleAttribute(s[parseInt(i.toString(),10)],{height:t+"px"}),this.parent.activeViewOptions.group.resources.length>0){var r=this.parent.element.querySelector('.e-resource-column-table tbody td[data-group-index="'+e.getAttribute("data-group-index")+'"]');r&&sf.base.setStyleAttribute(r,{height:t+"px"})}var a=this.parent.element.querySelector(".e-month-header-wrapper table tr:nth-child("+(e.parentElement.rowIndex+1)+") td");a&&sf.base.setStyleAttribute(a,{height:t+"px"})}},t.prototype.removeCellHeight=function(){for(var e=0,t=[].slice.call(this.element.querySelectorAll(".e-month-header-wrapper tbody tr,.e-resource-column-table tbody tr,.e-content-table tbody tr"));e<t.length;e++){t[e].firstElementChild.style.height=""}},t.prototype.getStartDate=function(){return new Date(this.parent.options.selectedDate.getFullYear(),this.parent.activeViewOptions.firstMonthOfYear-1,1)},t.prototype.getEndDate=function(){return h(u(this.getStartDate(),this.parent.activeViewOptions.monthsCount),-1)},t.prototype.getEndDateFromStartDate=function(e){var t=new Date(e.getTime());return this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive&&(t=l(t)),h(new Date(t.getTime()),1)},t.prototype.wireEvents=function(e,t){this.parent.isPrintSchedule||("cell"===t?"TimelineYear"===this.parent.options.currentView&&(sf.base.EventHandler.add(e,"mousedown",this.parent.workCellAction.cellMouseDown,this.parent.workCellAction),sf.base.EventHandler.add(e,"click",this.parent.workCellAction.cellClick,this.parent.workCellAction),this.parent.isAdaptive||sf.base.EventHandler.add(e,"dblclick",this.parent.workCellAction.cellDblClick,this.parent.workCellAction)):sf.base.EventHandler.add(e,"scroll",this.onContentScroll,this))},t.prototype.scrollToDate=function(e){var t=this.parent.getMsFromDate(new Date(c(new Date(+e)).getTime()));if("TimelineYear"===this.parent.options.currentView){if(null!==this.parent.activeViewOptions.group.resources&&this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive){var i=o(new Date(+e));t=+this.parent.getMsFromDate(new Date(c(new Date(+i)).getTime()))}if(r=this.element.querySelector('[data-date="'+t+'"]')){var n=this.getContentAreaElement();if(this.parent.options.enableRtl){var s=this.element.querySelector(".e-content-table");n.scrollLeft=-(s.offsetWidth-r.offsetLeft-r.offsetWidth)}else n.scrollLeft=r.offsetLeft;n.scrollTop=r.offsetTop}}else{var r;(r=this.element.querySelector('.e-work-cells:not(.e-other-month)[data-date="'+t+'"]'))&&(r=sf.base.closest(r,".e-month-calendar"),this.getContentAreaElement().scrollTop=r.offsetTop)}},t.prototype.destroy=function(){this.parent.isDestroyed||this.element&&(this.element=null)},t}(M),Z=(V=function(e,t){return(V=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}V(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),$=function(e){function t(t){var i=e.call(this,t)||this;return i.viewClass="e-agenda-view",i.isInverseTableSelect=!1,i.translateY=0,i.itemCount=0,i.elementHeight=70,i.bufferCount=3,i.renderedCount=10,i}return Z(t,e),t.prototype.renderLayout=function(){this.element=this.parent.element.querySelector(".e-table-wrap"),this.parent.isPrintSchedule||this.wireEvents(),this.parent.setDimensions()},t.prototype.onDataReady=function(e,t,i){if(this.parent.eventBase.removeSelectedAppointmentClass(),this.parent.options.enablePersistence)this.retainScrollPosition();else if(this.parent.activeViewOptions.allowVirtualScrolling){var n=this.element.querySelector(".e-virtual-track");n||(n=sf.base.createElement("div",{className:"e-virtual-track"}));var s=this.element.querySelector(".e-content-wrap");n.style.height=t*this.elementHeight-s.offsetHeight+"px",s.appendChild(n),i&&(s.scrollTop=this.translateY=0,this.setTranslate(s)),this.itemCount=t}},t.prototype.wireEvents=function(){sf.base.EventHandler.add(this.element.querySelector(".e-content-wrap"),"scroll",this.agendaScrolling,this)},t.prototype.unWireEvents=function(){sf.base.EventHandler.remove(this.element.querySelector(".e-content-wrap"),"scroll",this.agendaScrolling)},t.prototype.agendaScrolling=function(){if(this.parent.onClosePopup(),this.parent.activeViewOptions.allowVirtualScrolling){var e=this.element.querySelector(".e-content-wrap"),t=this.element.querySelector(".e-agenda-item");this.elementHeight=t?t.offsetHeight:this.elementHeight;var i=void 0;e.scrollTop-this.translateY<0?(i=~~(e.scrollTop/this.elementHeight),this.translateY=e.scrollTop,this.setTranslate(e),this.beforeInvoke(i)):e.scrollTop-this.translateY>this.elementHeight*this.bufferCount&&(i=(i=~~(e.scrollTop/this.elementHeight))>this.itemCount?this.itemCount-this.renderedCount:i,this.translateY=e.scrollTop,this.translateY>this.itemCount*this.elementHeight-this.renderedCount*this.elementHeight&&(this.translateY=this.itemCount*this.elementHeight-this.renderedCount*this.elementHeight),this.setTranslate(e),this.beforeInvoke(i))}this.parent.setPersistence()},t.prototype.beforeInvoke=function(e){var t=this;window.clearTimeout(this.timeValue),this.timeValue=window.setTimeout((function(){t.triggerScrolling(e)}),100)},t.prototype.triggerScrolling=function(e){this.parent.dotNetRef.invokeMethodAsync("AgendaScroll",e)},t.prototype.setTranslate=function(e){sf.base.setStyleAttribute(e.querySelector("table"),{transform:"translateY("+this.translateY+"px)"})},t.prototype.getEndDateFromStartDate=function(e){return c(h(e,1))},t.prototype.onScrollUiUpdate=function(){var e=this.getHeaderBarHeight(),t=this.element.querySelector(".e-content-wrap");"auto"!==this.parent.options.height?t.style.height=sf.base.formatUnit(this.parent.element.offsetHeight-e):t.style.height="auto"},t.prototype.scrollToDate=function(e){var t=this.parent.getMsFromDate(new Date(c(new Date(+e)).getTime())),i=this.element.querySelector('.e-agenda-cells[data-date="'+t+'"]');i&&(this.getContentAreaElement().scrollTop=i.offsetTop)},t.prototype.destroy=function(){this.parent.isDestroyed||this.element&&(this.unWireEvents(),this.element=null)},t}(M),ee=function(){function e(e){this.parent=e}return e.prototype.cellMouseDown=function(e){this.isPreventAction(e)||this.parent.onCellMouseDown(e)},e.prototype.cellClick=function(e){if(this.parent.isTapHold&&this.parent.onQuickPopupClose(),sf.base.isNullOrUndefined(this.parent.morePopup)||this.parent.morePopup.hide(),!(this.isPreventAction(e)||sf.base.closest(e.target,".e-disable-dates")||e.detail>1)){var t=sf.base.closest(e.target,".e-work-cells,.e-all-day-cells,.e-header-cells");if(!(sf.base.isNullOrUndefined(t)||t.classList.contains("e-header-cells")&&"Month"===this.parent.options.currentView)){if(!sf.base.isNullOrUndefined(sf.base.closest(e.target,".e-new-event")))return(r=sf.base.extend({},this.parent.activeCellsData,null,!0)).startTime=y(r.startTime),r.endTime=y(r.endTime),void this.parent.dotNetRef.invokeMethodAsync("OnOpenEditor",r,"Add");var i=sf.base.closest(e.target,".e-navigate"),n=this.parent.getNavigateView(),s=this.parent.options.currentView===n;if(sf.base.isNullOrUndefined(i)||s){if(this.parent.activeViewOptions.readonly&&"MonthAgenda"!==this.parent.options.currentView)return void this.parent.onClosePopup();if(this.parent.isAdaptive&&(e.target.classList.contains("e-more-indicator")||sf.base.closest(e.target,".e-more-indicator")))return;var r;if((t.classList.contains("e-work-cells")||t.classList.contains("e-all-day-cells"))&&e.shiftKey&&1===e.which&&this.parent.keyboardInteractionModule)return void this.parent.keyboardInteractionModule.onMouseSelection(e);this.parent.activeCellsData=this.parent.getCellDetails(t),this.parent.currentCell=t,(r=sf.base.extend({},this.parent.activeCellsData,{cancel:!1,mouseEventArgs:this.parent.eventBase.getMouseEvent(e),name:"cellClick"},!0)).startTime=y(r.startTime),r.endTime=y(r.endTime),this.parent.dotNetRef.invokeMethodAsync("TriggerCellClick",r)}else{var a=this.parent.getDateFromElement(t);if(!sf.base.isNullOrUndefined(a)&&!this.parent.isAdaptive){var o=new Date(this.parent.getMsFromDate(a));sf.base.isNullOrUndefined(this.parent.morePopup)||this.parent.morePopup.hide(),this.parent.dotNetRef.invokeMethodAsync("OnViewNavigate",o,this.parent.getNavigateView())}}}}},e.prototype.cellDblClick=function(e){if(!(this.parent.activeViewOptions.readonly||this.isPreventAction(e)||sf.base.closest(e.target,".e-disable-dates"))){var t=sf.base.extend({},this.parent.activeCellsData,{cancel:!1,mouseEventArgs:this.parent.eventBase.getMouseEvent(e),name:"OnCellDoubleClick"},!0);t.startTime=y(t.startTime),t.endTime=y(t.endTime),this.parent.dotNetRef.invokeMethodAsync("OnOpenEditor",t,"Add")}},e.prototype.isPreventAction=function(e){if(sf.base.closest(e.target,".e-navigate"))return!1;if(sf.base.closest(e.target,".e-appointment-wrapper")&&!sf.base.closest(e.target,".e-more-indicator"))return!0;var t=sf.base.closest(e.target,".e-appointment");return!sf.base.isNullOrUndefined(t)||(t=sf.base.closest(e.target,".e-header-cells"),!(!this.parent.isTimelineView()||sf.base.isNullOrUndefined(t)&&!sf.base.closest(e.target,".e-other-month")))},e}(),te=function(){function e(e){this.selectedCells=[],this.keyConfigs={downArrow:"downarrow",upArrow:"uparrow",rightArrow:"rightarrow",leftArrow:"leftarrow",shiftDownArrow:"shift+downarrow",shiftUpArrow:"shift+uparrow",shiftRightArrow:"shift+rightarrow",shiftLeftArrow:"shift+leftarrow",ctrlLeftArrow:"ctrl+leftarrow",ctrlRightArrow:"ctrl+rightarrow",altOne:"alt+1",altTwo:"alt+2",altThree:"alt+3",altFour:"alt+4",altFive:"alt+5",altSix:"alt+6",altSeven:"alt+7",altEight:"alt+8",altNine:"alt+9",altT:"alt+t",enter:"enter",escape:"escape",delete:"delete",backspace:"backspace",home:"home",pageUp:"pageup",pageDown:"pagedown",tab:"tab",shiftTab:"shift+tab",fTwelve:"f12"},this.parent=e,this.parent.element.tabIndex=-1===this.parent.element.tabIndex?0:this.parent.element.tabIndex,this.keyboardModule=new sf.base.KeyboardEvents(this.parent.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})}return e.prototype.keyActionHandler=function(e){switch(e.action){case"downArrow":case"shiftDownArrow":this.processDown(e,e.shiftKey);break;case"altT":this.parent.options.selectedDate.getTime()!==(new Date).setHours(0,0,0,0)&&this.parent.dotNetRef.invokeMethodAsync("OnDateNavigate","Today");break;case"upArrow":case"shiftUpArrow":this.processUp(e,e.shiftKey);break;case"leftArrow":case"shiftLeftArrow":this.processLeft(e,e.shiftKey);break;case"rightArrow":case"shiftRightArrow":this.processRight(e,e.shiftKey);break;case"ctrlLeftArrow":this.parent.dotNetRef.invokeMethodAsync("OnDateNavigate","Previous");break;case"ctrlRightArrow":this.parent.dotNetRef.invokeMethodAsync("OnDateNavigate","Next");break;case"altOne":case"altTwo":case"altThree":case"altFour":case"altFive":case"altSix":case"altSeven":case"altEight":case"altNine":this.processViewNavigation(e);break;case"enter":this.processEnter(e);break;case"home":this.focusFirstCell();break;case"tab":case"shiftTab":this.processTab(e,e.shiftKey);break;case"delete":case"backspace":this.processDelete();break;case"escape":this.processEscape();break;case"fTwelve":this.parent.options.allowInline&&this.parent.inlineModule&&(e.preventDefault(),this.processFTwelve(e))}},e.prototype.processFTwelve=function(e){var t=e.target;(t.classList.contains("e-work-cells")||t.classList.contains("e-all-day-cells"))&&(this.parent.activeCellsData=this.getSelectedElements(t),this.parent.inlineModule.cellEdit()),t.classList.contains("e-appointment")&&t.click()},e.prototype.onCellMouseDown=function(e){if(!e.shiftKey&&(this.initialTarget=this.getClosestCell(e),!this.parent.activeViewOptions.readonly&&"MonthAgenda"!==this.parent.options.currentView&&this.initialTarget&&(e.target.classList.contains("e-work-cells")&&3!==e.which&&(this.parent.removeSelectedClass(),sf.base.EventHandler.add(this.parent.getContentTable(),"mousemove",this.onMouseSelection,this),sf.base.EventHandler.add(this.parent.getContentTable(),"mouseup",this.onMoveup,this)),e.target.classList.contains("e-all-day-cells")&&3!==e.which))){this.parent.removeSelectedClass();var t=this.parent.getAllDayRow();sf.base.EventHandler.add(t,"mousemove",this.onMouseSelection,this),sf.base.EventHandler.add(t,"mouseup",this.onMoveup,this)}},e.prototype.onMouseSelection=function(e){var t=[].slice.call(this.parent.element.querySelectorAll(".e-appointment"));sf.base.addClass(t,"e-allow-select");var i=this.parent.boundaryValidation(e.pageY,e.pageX);if(i.bottom||i.top||i.left||i.right){var n=this.parent.element.querySelector(".e-content-wrap"),s=n.offsetHeight<=n.scrollHeight&&n.scrollTop>=0&&n.scrollTop+n.offsetHeight<=n.scrollHeight,r=n.offsetWidth<=n.scrollWidth&&n.scrollLeft>=0&&n.scrollLeft+n.offsetWidth<=n.scrollWidth;s&&(i.top||i.bottom)&&(n.scrollTop+=i.top?-e.target.offsetHeight:e.target.offsetHeight),r&&(i.left||i.right)&&(n.scrollLeft+=i.left?-e.target.offsetWidth:e.target.offsetWidth)}var a=this.getClosestCell(e);a&&this.selectCells(!0,a)},e.prototype.getClosestCell=function(e){return sf.base.closest(e.target,".e-work-cells,.e-all-day-cells")},e.prototype.onMoveup=function(e){var t=[].slice.call(this.parent.element.querySelectorAll(".e-appointment"));if(sf.base.removeClass(t,"e-allow-select"),e.target.classList.contains("e-work-cells")&&(sf.base.EventHandler.remove(this.parent.getContentTable(),"mousemove",this.onMouseSelection),sf.base.EventHandler.remove(this.parent.getContentTable(),"mouseup",this.onMoveup)),e.target.classList.contains("e-all-day-cells")){var i=this.parent.getAllDayRow();sf.base.EventHandler.remove(i,"mousemove",this.onMouseSelection),sf.base.EventHandler.remove(i,"mouseup",this.onMoveup)}if(!this.isPreventAction(e)){var n=sf.base.closest(e.target,".e-work-cells,.e-all-day-cells,.e-header-cells");if(("TimelineYear"!==this.parent.options.currentView||!n.classList.contains("e-other-month"))&&(this.parent.activeCellsData=this.getSelectedElements(n),this.parent.options.quickInfoOnSelectionEnd&&this.parent.element.querySelectorAll(".e-selected-cell").length>1)){this.parent.currentCell=n;var s=sf.base.extend(this.parent.activeCellsData,{cancel:!1,mouseEventArgs:e,name:"cellClick"},!0);s.startTime=y(s.startTime),s.endTime=y(s.endTime),this.parent.dotNetRef.invokeMethodAsync("TriggerCellClick",s)}}},e.prototype.processEnter=function(e){if(!(this.parent.activeViewOptions.readonly&&!e.target.classList.contains("e-appointment")||this.isPreventAction(e)||"TimelineYear"===this.parent.options.currentView&&e.target.classList.contains("e-other-month"))){var t=e.target;if(sf.base.closest(t,".e-quick-popup-wrapper"))t.classList.contains("e-event-details")||t.classList.contains("e-event-create")||t.classList.contains("e-event-edit")||t.classList.contains("e-event-delete")||t.classList.contains("e-close")?(t.click(),e.preventDefault()):t.classList.contains("e-subject")&&(this.parent.element.querySelector(".e-event-create").click(),e.preventDefault());else if(t.classList.contains("e-resource-cells")&&t.classList.contains("e-parent-node")){var i=t.querySelector(".e-resource-tree-icon");i&&i.click()}else if(t.classList.contains("e-work-cells")||t.classList.contains("e-all-day-cells")){this.parent.activeCellsData=this.getSelectedElements(t),this.parent.currentCell=t;var n=sf.base.extend(this.parent.activeCellsData,{cancel:!1,mouseEventArgs:e});this.parent.options.allowInline?this.parent.inlineModule.cellEdit():(n.startTime=y(n.startTime),n.endTime=y(n.endTime),"Year"===this.parent.options.currentView?t.click():this.parent.dotNetRef.invokeMethodAsync("TriggerCellClick",n))}else if(t.classList.contains("e-inline-subject"))this.parent.inlineCrudActions(t);else if(t.classList.contains("e-appointment")||t.classList.contains("e-more-event-close")||t.classList.contains("e-all-day-appointment-section")||t.classList.contains("e-more-indicator"))t.click();else if(t.classList.contains("e-header-date")){var s=this.parent.getDateFromElement(t);return this.parent.dotNetRef.invokeMethodAsync("OnViewNavigate",new Date(this.parent.getMsFromDate(s)),this.parent.getNavigateView()),void this.processEscape()}}},e.prototype.getSelectedElements=function(e){var t;if(this.selectedCells.length>1&&e.classList.contains("e-selected-cell")){var i=this.parent.getCellDetails(this.selectedCells[0]),n=this.parent.getCellDetails(this.selectedCells.slice(-1)[0]);i.endTime=n.endTime,i.element=e,t=i}else t=this.parent.getCellDetails(e);return t},e.prototype.getCells=function(e,t,i){var n=this.parent.getContentTable(),s="TimelineYear"===this.parent.options.currentView,r=s&&!e?".e-work-cells:not(.e-other-month)":"td",a=[].slice.call(n.querySelectorAll(r)),o=n.rows.length,l=n.rows[0].cells.length;if(t.classList.contains("e-all-day-cells")){var c=this.parent.getAllDayRow();a=[].slice.call(c.cells),o=1,l=c.cells.length}var p=a.indexOf(t),h=a.indexOf(i),u=[];if(e){for(var d=0;d<l;d++)for(var f=0;f<o;f++){var g=a[l*f+d];s&&g.classList.contains("e-other-month")||u.push(g)}p=u.indexOf(t),h=u.indexOf(i)}if(p>h){var m=p;p=h,h=m}return(e?u:a).slice(p,h+1)},e.prototype.focusFirstCell=function(){if("Agenda"===this.parent.options.currentView){var e=this.parent.getContentTable().querySelector(".e-agenda-cells");return e.setAttribute("tabindex","0"),void e.focus()}if(this.parent.eventBase.removeSelectedAppointmentClass(),this.parent.isTimelineView()&&"TimelineYear"!==this.parent.options.currentView){var t=this.parent.element.querySelector(".e-content-table tr:not(.e-hidden) .e-work-cells:not(.e-resource-group-cells)");this.selectCells(!1,t)}else if(this.parent.options.currentView.indexOf("Year")>-1){var i=".e-work-cells:not(.e-other-month):not(.e-resource-group-cells)";i+="TimelineYear"===this.parent.options.currentView&&"Vertical"===this.parent.activeViewOptions.orientation?'[data-date="'+y(this.parent.activeView.getStartDate()).getTime()+'"]':"",this.selectCells(!1,this.parent.element.querySelector(i))}else this.selectCells(!1,this.parent.getWorkCellElements()[0])},e.prototype.isInverseTableSelect=function(){return this.parent.activeView.isInverseTableSelect},e.prototype.selectCells=function(e,t){this.parent.removeSelectedClass();var i=t instanceof Array?t.slice(-1)[0]:t;if(e){var n=void 0;if(!this.parent.options.allowMultiRowSelection)if("TimelineYear"===this.parent.options.currentView&&"Horizontal"===this.parent.activeViewOptions.orientation||"Month"===this.parent.options.currentView)i="TimelineYear"===this.parent.options.currentView&&this.parent.activeViewOptions.group.resources.length>0?this.initialTarget:this.initialTarget.parentElement.children[i.cellIndex];else["Day","Week","WorkWeek","TimelineDay","TimelineWeek","TimelineWorkWeek","TimelineMonth","TimelineYear"].indexOf(this.parent.options.currentView)>-1&&(i=i.parentElement.children[this.initialTarget.cellIndex]);var s=this.getCells(this.isInverseTableSelect(),this.initialTarget,i);if(this.parent.activeViewOptions.group.resources.length>0){n=this.initialTarget.getAttribute("data-group-index");for(var r=[],a=0,o=s;a<o.length;a++){(u=o[a]).getAttribute("data-group-index")===n&&r.push(u)}s=r}if(this.parent.options.allowMultiCellSelection||(s=[this.initialTarget]),this.selectedCells=s,s.length>2&&!i.classList.contains("e-all-day-cells")){var l=this.getAllDayCells(s);if(this.parent.activeViewOptions.group.resources.length>0){for(var c=[],p=0,h=l;p<h.length;p++){var u;(u=h[p]).getAttribute("data-group-index")===n&&c.push(u)}l=c}s=s.concat(l)}i.getAttribute("data-group-index")!==n&&this.parent.activeViewOptions.group.resources.length>0&&(i=this.selectedCells[this.selectedCells.length-1]),this.parent.addSelectedClass(s,i)}else this.initialTarget=i,this.selectedCells=[i],this.parent.addSelectedClass([i],i)},e.prototype.selectAppointment=function(e,t){var i=this.getAppointmentElements();if(!(i.length<0)){var n;if(this.parent.eventBase.removeSelectedAppointmentClass(),t.classList.contains("e-appointment")){var s=i.indexOf(t);n=i[e?s-1:s+1]}else n=e?i[i.length-1]:i[0];n&&(this.parent.eventBase.addSelectedAppointments([n]),n.focus(),sf.base.addClass([n],"e-active-appointment-agenda"))}},e.prototype.selectAppointmentElementFromWorkCell=function(e,t){this.parent.eventBase.removeSelectedAppointmentClass(),this.parent.removeSelectedClass()},e.prototype.getAllDayCells=function(e){var t=this.parent.getAllDayRow();if(!t)return[];var i=e[0],n=e[e.length-1],s=this.parent.getCellDetails(i);return this.parent.getCellDetails(n).endTime.getTime()-s.startTime.getTime()>=864e5?[].slice.call(t.cells).slice(i.cellIndex,n.cellIndex+1):[]},e.prototype.getAppointmentElements=function(){return[].slice.call(this.parent.element.querySelectorAll(".e-appointment"))},e.prototype.getAppointmentElementsByGuid=function(e){return[].slice.call(this.parent.element.querySelectorAll('div[data-guid="'+e+'"]'))},e.prototype.getUniqueAppointmentElements=function(){var e=this.getAppointmentElements(),t=[];return e.map((function(e){return e.getAttribute("data-guid")})).filter((function(i,n,s){s.indexOf(i)===n&&t.push(e[parseInt(n.toString(),10)])})),t},e.prototype.getWorkCellFromAppointmentElement=function(e){return null},e.prototype.processViewNavigation=function(e){var t=parseInt(e.key,10)-1,i=[].slice.call(this.parent.element.querySelectorAll(".e-schedule-toolbar .e-toolbar-item.e-views"));t<i.length&&(this.parent.quickPopup&&this.parent.quickPopup.hide(),this.parent.morePopup&&this.parent.morePopup.hide(),this.parent.headerPopup&&this.parent.headerPopup.hide(),i[parseInt(t.toString(),10)].click())},e.prototype.cancelUpDownAction=function(e){var t=e&&"Vertical"===this.parent.activeViewOptions.orientation,i=this.parent.activeViewOptions.group.resources.length>0;return!!(t&&i||e&&this.initialTarget&&this.initialTarget.classList.contains("e-other-month"))||!((!this.parent.isTimelineView()||e)&&"MonthAgenda"!==this.parent.options.currentView)},e.prototype.processUp=function(e,i){var n="TimelineYear"===this.parent.options.currentView;if(!(i&&this.cancelUpDownAction(n)||this.preventYearNavigation())){var s=e.target,r=this.parent.getSelectedCells(),a=this.parent.eventBase.getSelectedAppointments(),o=this.parent.element.querySelector(".e-more-popup-wrapper"),l=this.getQuickPopupElement();if(r.length>0&&!e.target.classList.contains("e-work-cells")&&(s=r[r.length-1]),a.length>0&&!o.classList.contains(t)&&!l.classList.contains(t)&&-1!==["Day","Week","WorkWeek","Month"].indexOf(this.parent.options.currentView)&&(s=this.getWorkCellFromAppointmentElement(a[a.length-1]),this.parent.eventBase.removeSelectedAppointmentClass()),s)if(s.classList.contains("e-work-cells")&&!this.parent.element.querySelector("."+t)){var c=this.parent.getTableRows(),p=c.indexOf(s.parentElement),h=void 0;if(n&&i&&0===this.parent.activeViewOptions.group.resources.length&&(h=this.isInverseTableSelect()?this.getVerticalUpDownCell(c,s,p,!0):this.getHorizontalUpDownCell(c,s,p,!0)),(p>0||h)&&p<c.length){if(h=h||c[p-1].cells[s.cellIndex],"Year"===this.parent.options.currentView&&h.classList.contains("e-other-month")){if(!(y(this.parent.activeView.getStartDate()).getTime()<+h.getAttribute("data-date")))return;h=this.getYearUpDownCell(c,p-1,s.cellIndex,!0)}this.selectCells(i,h)}}else"Agenda"!==this.parent.options.currentView&&"MonthAgenda"!==this.parent.options.currentView||this.selectAppointment(!0,s)}},e.prototype.processDown=function(e,i){var n="TimelineYear"===this.parent.options.currentView;if(!(i&&this.cancelUpDownAction(n)||this.preventYearNavigation())){var s=e.target,r=this.parent.getSelectedCells(),a=this.parent.eventBase.getSelectedAppointments(),o=this.parent.element.querySelector(".e-more-popup-wrapper"),l=this.getQuickPopupElement();r.length>0&&!e.target.classList.contains("e-work-cells")&&(s=r[r.length-1]),a.length>0&&!o.classList.contains(t)&&!l.classList.contains(t)&&-1!==["Day","Week","WorkWeek","Month"].indexOf(this.parent.options.currentView)&&(s=this.getWorkCellFromAppointmentElement(a[a.length-1]),this.parent.eventBase.removeSelectedAppointmentClass());var c=this.parent.getTableRows();if(s)if(s.classList.contains("e-work-cells")&&!this.parent.element.querySelector("."+t)){var p=c.indexOf(s.parentElement),h=void 0;if(n&&i&&0===this.parent.activeViewOptions.group.resources.length&&(h=this.isInverseTableSelect()?this.getVerticalUpDownCell(c,s,p,!1):this.getHorizontalUpDownCell(c,s,p,!1)),p>=0&&(p<c.length-1||h)){if(h=h||c[p+1].cells[s.cellIndex],"Year"===this.parent.options.currentView&&h.classList.contains("e-other-month")){if(!(y(this.parent.activeView.getEndDate()).getTime()>+h.getAttribute("data-date")))return;h=this.getYearUpDownCell(c,p+1,s.cellIndex,!1)}this.selectCells(i,h)}}else"Agenda"!==this.parent.options.currentView&&"MonthAgenda"!==this.parent.options.currentView||this.selectAppointment(!1,s)}},e.prototype.getYearUpDownCell=function(e,t,i,n){for(;e[parseInt(t.toString(),10)]&&e[parseInt(t.toString(),10)].cells[parseInt(i.toString(),10)].classList.contains("e-other-month");)t+=n?-1:1;return e[parseInt(t.toString(),10)].cells[parseInt(i.toString(),10)]},e.prototype.getHorizontalUpDownCell=function(e,t,i,n){var s=e[i+(n?-1:1)],r=s?s.cells[t.cellIndex]:t;if(r.classList.contains("e-other-month")){var a=s.querySelector(".e-work-cells:not(.e-other-month)"),o='[data-date="'+y(l(new Date(+a.getAttribute("data-date")))).getTime()+'"]';r=r.cellIndex<a.cellIndex?a:s.querySelector(o)}return r},e.prototype.getVerticalUpDownCell=function(e,t,i,n){var s=n&&i>0||!n&&i<e.length-1?e[i+(n?-1:1)].cells[t.cellIndex]:void 0;if(!s||s.classList.contains("e-other-month")){if(e[parseInt(i.toString(),10)].cells[t.cellIndex-(n?1:-1)]){var r=+t.getAttribute("data-date")-(n?864e5:-864e5);return this.parent.getContentTable().querySelector('.e-work-cells[data-date="'+r+'"]')}s=t}return s},e.prototype.processLeftRight=function(e){var t="Year"===this.parent.options.currentView?e.closest("tbody"):this.parent.getContentTable(),i=e.parentNode.sectionRowIndex;return{element:t,rowIndex:i,columnIndex:e.cellIndex,maxIndex:t.rows[parseInt(i.toString(),10)].cells.length}},e.prototype.getQuickPopupElement=function(){return(this.parent.isAdaptive?document.body:this.parent.element).querySelector(".e-quick-popup-wrapper")},e.prototype.isCancelLeftRightAction=function(e,i,n){var s="MonthAgenda"===this.parent.options.currentView||n&&this.initialTarget&&this.initialTarget.classList.contains("e-other-month");if("Agenda"===this.parent.options.currentView||i&&s||this.preventYearNavigation())return!0;if(this.isPreventAction(e)&&i)return!0;var r=this.parent.element.querySelector(".e-more-popup-wrapper"),a=this.getQuickPopupElement();return!(!r.classList.contains(t)&&!a.classList.contains(t))},e.prototype.processRight=function(e,t){var i="TimelineYear"===this.parent.options.currentView;if(!this.isCancelLeftRightAction(e,t,i)){var n,s=this.parent.getSelectedCells(),r=this.parent.eventBase.getSelectedAppointments(),a=e.target;if(s.length>0&&!a.classList.contains("e-work-cells")&&!a.classList.contains("e-all-day-cells")&&(a=s[s.length-1]),!(r.length>0)||(a=this.getWorkCellFromAppointmentElement(r[r.length-1]),this.parent.eventBase.removeSelectedAppointmentClass(),a))if(a.classList.contains("e-work-cells")&&e.target.classList.contains("e-work-cells")){var o=this.processLeftRight(a),c=new Date(+a.getAttribute("data-date")),p="Year"===this.parent.options.currentView&&c.getTime()===y(l(c)).getTime();if(o.columnIndex>=0&&o.columnIndex<o.maxIndex-1&&!p)n=this.calculateNextPrevDate(a,o.element.rows[o.rowIndex].cells[a.cellIndex+1],"right"),i&&t&&n.classList.contains("e-other-month")&&(n=this.getTimelineYearTargetCell(o,a,!0)),sf.base.isNullOrUndefined(n)||this.selectCells(t,n);else if(o.columnIndex===o.maxIndex-1||p)if(!this.isInverseTableSelect()&&o.rowIndex<o.element.rows.length-1&&!p){n=this.calculateNextPrevDate(a,o.element.rows[o.rowIndex+1].cells[0],"right");var h=i&&t&&n.classList.contains("e-other-month");n=h?this.getHorizontalLeftRightCell(o,a,!0):n,sf.base.isNullOrUndefined(n)||this.selectCells(t,n)}else if(!t&&p&&c.getTime()!==y(this.parent.activeView.getEndDate()).getTime())return void this.selectCells(t,this.parent.element.querySelector(':not(.e-other-month)[data-date="'+(c.getTime()+864e5)+'"]'))}else if(a.classList.contains("e-all-day-cells")){var u=a.cellIndex,d=this.parent.getAllDayRow(),f=d.cells.length;u>=0&&u<f-1&&this.selectCells(t,d.cells[u+1])}}},e.prototype.processLeft=function(e,t){var i="TimelineYear"===this.parent.options.currentView;if(!this.isCancelLeftRightAction(e,t,i)){var n,s=e.target,r=this.parent.getSelectedCells();r.length>0&&!s.classList.contains("e-work-cells")&&!s.classList.contains("e-all-day-cells")&&(s=r[r.length-1]);var a=this.parent.eventBase.getSelectedAppointments();if(!(a.length>0)||(s=this.getWorkCellFromAppointmentElement(a[a.length-1]),this.parent.eventBase.removeSelectedAppointmentClass(),s))if(e.target.classList.contains("e-work-cells")&&s.classList.contains("e-work-cells")){var l=this.processLeftRight(s),c=new Date(+s.getAttribute("data-date")),p="Year"===this.parent.options.currentView&&c.getTime()===y(o(c)).getTime();if(l.columnIndex>0&&l.columnIndex<l.maxIndex&&!p)n=this.calculateNextPrevDate(s,l.element.rows[l.rowIndex].cells[s.cellIndex-1],"left"),i&&t&&n.classList.contains("e-other-month")&&(n=this.getTimelineYearTargetCell(l,s,!1)),sf.base.isNullOrUndefined(n)||this.selectCells(t,n);else if(0===l.columnIndex||p)if(!this.isInverseTableSelect()&&l.rowIndex>0){n=this.calculateNextPrevDate(s,l.element.rows[l.rowIndex-1].cells[l.maxIndex-1],"left");var h=i&&t&&n.classList.contains("e-other-month");n=h?this.getHorizontalLeftRightCell(l,s,!1):n,sf.base.isNullOrUndefined(n)||this.selectCells(t,n)}else if(!t&&p&&c.getTime()!==y(this.parent.activeView.getStartDate()).getTime())return void this.selectCells(t,this.parent.element.querySelector('[data-date="'+(c.getTime()-864e5)+'"]'))}else if(s.classList.contains("e-all-day-cells")){var u=s.cellIndex,d=this.parent.getAllDayRow(),f=d.cells.length;u>0&&u<f&&this.selectCells(t,d.cells[u-1])}}},e.prototype.preventYearNavigation=function(){return"Year"===this.parent.options.currentView&&this.initialTarget&&this.initialTarget.classList.contains("e-other-month")},e.prototype.getTimelineYearTargetCell=function(e,t,i){return this.isInverseTableSelect()?this.getVerticalLeftRightCell(t,i):this.getHorizontalLeftRightCell(e,t,i)},e.prototype.getHorizontalLeftRightCell=function(e,t,i){var n=e.element.rows[t.parentNode.sectionRowIndex+(i?1:-1)];if(n){var s=i?".e-work-cells:not(.e-other-month)":'[data-date="'+(+t.getAttribute("data-date")-864e5)+'"]';return n.querySelector(s)}return t},e.prototype.getVerticalLeftRightCell=function(e,t){var i=new Date(+e.getAttribute("data-date")),n=y(new Date(i.getFullYear(),i.getMonth()+(t?1:-1),1)),s=this.parent.getContentTable(),r=s.querySelector('[data-date="'+n.getTime()+'"]');return r.parentNode.sectionRowIndex>e.parentNode.sectionRowIndex?r:s.querySelector('[data-date="'+y(l(n)).getTime()+'"]')},e.prototype.calculateNextPrevDate=function(e,t,i){var n=this.initialTarget.getAttribute("data-group-index");if(this.parent.activeViewOptions.group.resources.length>0&&"Month"===this.parent.options.currentView&&e&&t&&t.getAttribute("data-group-index")!==n){var s=this.parent.getDateFromElement(e),r="right"===i?new Date(s.setDate(s.getDate()+1)):new Date(s.setDate(s.getDate()-1));t=[].slice.call(this.parent.element.querySelectorAll('td[data-date="'+this.parent.getMsFromDate(r).toString()+'"][data-group-index="'+n+'"]'))[0]}return t},e.prototype.getFocusableElements=function(e){return[].slice.call(e.querySelectorAll('a[href]:not([tabindex="-1"]),input:not([disabled]):not([tabindex="-1"]),textarea:not([disabled]):not([tabindex="-1"]),button:not([disabled]):not([tabindex="-1"]),select:not([disabled]):not([tabindex="-1"]),[tabindex]:not([tabindex="-1"]),[contentEditable=true]:not([tabindex="-1"])'))},e.prototype.processTabOnPopup=function(e,t){var i=this,n=this.getFocusableElements(t),s=(n=n.filter((function(e){var t=i.parent.element.querySelector(".e-popup-footer");return t&&t.offsetParent?!(e.classList.contains("e-edit")||e.classList.contains("e-delete")):!(e.classList.contains("e-event-edit")||e.classList.contains("e-event-delete"))})))[0],r=n[n.length-1];sf.base.isNullOrUndefined(r)||document.activeElement!==r||e.shiftKey||(e.preventDefault(),s.focus()),!sf.base.isNullOrUndefined(s)&&document.activeElement===s&&e.shiftKey&&(e.preventDefault(),r.focus())},e.prototype.processTab=function(e,i){var n=e.target;if(n.classList.contains("e-inline-subject")&&this.parent.inlineEdit&&(n=n.closest(".e-appointment"),this.parent.inlineCrudActions(e.target)),"TimelineYear"===this.parent.options.currentView&&n.classList.contains("e-other-month"))n.classList.contains("e-selected-cell")&&this.parent.removeSelectedClass();else{var s=sf.base.closest(n,".e-quick-popup-wrapper,.e-more-popup-wrapper");if(s&&s.classList.contains(t))return s.classList.contains("e-more-popup-wrapper")&&this.parent.eventBase.removeSelectedAppointmentClass(),void this.processTabOnPopup(e,s);if(n.classList.contains("e-resource-cells")&&this.parent.isTimelineView()&&this.parent.activeViewOptions.group.resources.length>0){var r=parseInt(n.getAttribute("data-group-index"),10),a='.e-appointment[data-group-index="'+(i?r-1:r)+'"]',o=[].slice.call(this.parent.element.querySelectorAll(a));if(o.length>0){this.parent.eventBase.removeSelectedAppointmentClass();var l=i?o.slice(-1)[0]:o[0];this.parent.eventBase.addSelectedAppointments([l]),l.focus(),e.preventDefault()}else if(r===parseInt(this.parent.element.querySelector(".e-resource-column-wrap").getAttribute("data-rendered-index"),10))this.parent.element.focus(),e.preventDefault();else if(this.parent.virtualScrollModule){var c=this.parent.element.querySelector(".e-virtual-track"),p=Math.round(c.offsetHeight/parseInt(this.parent.element.querySelector(".e-resource-column-wrap").getAttribute("data-expanded-index"),10));this.parent.element.querySelector(".e-content-wrap").scrollTop=(i?r-1:r+1)*p,this.parent.virtualScrollModule.virtualScrolling()}else this.setScrollPosition(r)}else if(n.classList.contains("e-schedule"))this.parent.eventBase.removeSelectedAppointmentClass();else if(n.classList.contains("e-appointment")){var h=[].slice.call(this.parent.element.querySelectorAll(".e-appointment")),u=this.parent.eventBase.getSelectedAppointments(),d="TimelineYear"===this.parent.options.currentView;if((this.parent.isTimelineView()&&!d||d&&"Vertical"===this.parent.activeViewOptions.orientation)&&this.parent.activeViewOptions.group.resources.length>0){r=parseInt(n.getAttribute("data-group-index"),10);h=[].slice.call(this.parent.element.querySelectorAll('.e-appointment[data-group-index="'+r+'"]'));var f='.e-resource-cells[data-group-index="'+(i?r:r+1)+'"]',g=this.parent.element.querySelector(f);if(g&&(i&&n.getAttribute("data-guid")===h[0].getAttribute("data-guid")||!i&&n.getAttribute("data-guid")===h.slice(-1)[0].getAttribute("data-guid")))return this.parent.eventBase.removeSelectedAppointmentClass(),this.parent.virtualScrollModule?g.focus({preventScroll:!0}):g.focus(),this.parent.isTimelineView()&&this.parent.activeViewOptions.group.resources.length>0&&sf.base.isNullOrUndefined(this.parent.virtualScrollModule)&&this.setScrollPosition(r),void e.preventDefault()}if(u.length>0&&(n=u[u.length-1]),this.parent.eventBase.removeSelectedAppointmentClass(),!i&&n.getAttribute("data-guid")===h[h.length-1].getAttribute("data-guid")||i&&n.getAttribute("data-guid")===h[0].getAttribute("data-guid"))return;"Agenda"!==this.parent.options.currentView&&"MonthAgenda"!==this.parent.options.currentView||(this.selectAppointment(i,n),e.preventDefault())}else{var m=this.parent.getSelectedCells();if(m.length>0&&!n.classList.contains("e-appointment"))return n=m[m.length-1],this.selectAppointmentElementFromWorkCell(i,n),void e.preventDefault();n&&!n.classList.contains("e-resource-cells")&&this.parent.isTimelineView()&&this.parent.activeViewOptions.group.resources.length>0&&this.processTabOnResourceCells(n,i)}}},e.prototype.processDelete=function(){var e=document.activeElement;if("MonthAgenda"===this.parent.options.currentView){var t=this.parent.eventBase.getSelectedEvents().element;t&&(e=t&&sf.base.isNullOrUndefined(t.length)?t:t[0])}if(e&&e.classList.contains("e-appointment")){if(sf.base.addClass([e],i),this.parent.activeEventData=this.parent.eventBase.getSelectedEvents(),this.parent.activeViewOptions.readonly||e.classList.contains("e-read-only"))return;this.parent.dotNetRef.invokeMethodAsync("ProcessDelete",this.parent.activeEventData.guid)}},e.prototype.processEscape=function(){this.parent.onClosePopup(),this.parent.onMoreEventPopupClose(),this.parent.headerPopup&&this.parent.headerPopup.hide(),this.parent.inlineModule&&(this.parent.eventBase.focusElement(),this.parent.inlineModule.removeInlineAppointmentElement())},e.prototype.isPreventAction=function(e){var t=sf.base.closest(e.target,".e-resource-group-cells");return!(!this.parent.isTimelineView()||sf.base.isNullOrUndefined(t))},e.prototype.processTabOnResourceCells=function(e,t){var i=[].slice.call(this.parent.element.querySelectorAll('[tabIndex="0"]')),n=i.indexOf(e),s=t?i[n-1]:i[n+1];if(s&&s.classList.contains("e-resource-cells")){var r=parseInt(s.getAttribute("data-group-index"),10);if(this.parent.virtualScrollModule){var a=this.parent.element.querySelector(".e-resource-column-wrap");[].slice.call(this.parent.element.querySelectorAll(".e-resource-cells")).forEach((function(e){e.getBoundingClientRect().top<a.getBoundingClientRect().top&&e.setAttribute("tabindex","-1")}))}else this.setScrollPosition(r)}},e.prototype.setScrollPosition=function(e){var t=this.parent.element.querySelector('.e-work-cells[data-group-index="'+e+'"]');t&&(this.parent.element.querySelector(".e-content-wrap").scrollTop=t.offsetTop)},e.prototype.destroy=function(){this.selectedCells=[],this.keyboardModule.destroy()},e}(),ie=function(){function e(e){this.daysVariation=0,this.parent=e,this.actionObj={X:0,Y:0,groupIndex:0,cellWidth:0,cellHeight:0,slotInterval:0,interval:0,actionIndex:0,cloneElement:[],originalElement:[],action:null,isAllDay:null,excludeSelectors:null,index:0,navigationInterval:null,scrollInterval:null},this.scrollArgs={element:null,width:0,height:0},this.resizeEdges={left:!1,right:!1,top:!1,bottom:!1},this.scrollEdges={left:!1,right:!1,top:!1,bottom:!1}}return e.prototype.calculateIntervalTime=function(e){var t=new Date(+e);return t.setMinutes(Math.floor(t.getMinutes()/this.actionObj.interval)*this.actionObj.interval),t},e.prototype.getContentAreaDimension=function(){var e=this.parent.element.querySelector(".e-content-wrap"),t=[].slice.call(e.querySelector("tr").children);!this.parent.isTimelineView()&&this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive&&(t=this.getResourceElements(t));var i=t[0].getBoundingClientRect(),n=t.slice(-1)[0].getBoundingClientRect();return{bottom:e.scrollHeight-5,left:this.parent.options.enableRtl?n.left:i.left,right:this.parent.options.enableRtl?i.right:n.right,top:0,leftOffset:this.parent.options.enableRtl?n.right:i.right,rightOffset:this.parent.options.enableRtl?i.left:n.left}},e.prototype.getPageCoordinates=function(e){var t=e.event;return t&&t.changedTouches?t.changedTouches[0]:e.changedTouches?e.changedTouches[0]:t||e},e.prototype.getIndex=function(e){var t=[].slice.call(this.parent.getContentTable().querySelector("tr").children),i={minIndex:0,maxIndex:t.length-1};if("resize"===this.actionObj.action&&this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive&&!this.parent.isTimelineView()){var n=this.getResourceElements(t);i.minIndex=n[0].cellIndex,i.maxIndex=n.slice(-1)[0].cellIndex}return e<i.minIndex&&(e=i.minIndex),e>i.maxIndex&&(e=i.maxIndex),e},e.prototype.updateTimePosition=function(e,t){for(var i=0,n=0,s=this.actionObj.cloneElement;n<s.length;n++){var r=s[n].querySelector(".e-time");if(r){var a=this.actionObj.start,o=this.actionObj.end;t&&t.length>0&&i<t.length&&(a=t[parseInt(i.toString(),10)].startTime,o=t[parseInt(i.toString(),10)].endTime),r.innerHTML=this.parent.getTimeString(a)+" - "+this.parent.getTimeString(o)}i++}if(this.parent.activeViewOptions.timeScale.enable&&this.parent.isAdaptive&&"Month"!==this.parent.options.currentView&&"TimelineMonth"!==this.parent.options.currentView){var l=this.parent.element.querySelector(".e-clone-time-indicator");if(!l){l=sf.base.createElement("div",{className:"e-clone-time-indicator"});var c=this.parent.isTimelineView()?"e-date-header-wrap":"e-time-cells-wrap";this.parent.element.querySelector("."+c).appendChild(l)}l.innerHTML=this.parent.getTimeString(e);var p=0;if(this.parent.isTimelineView())if(this.parent.options.enableRtl){var h=parseInt(this.actionObj.clone.style.right,10);p="drag"===this.actionObj.action||this.resizeEdges.left?h+this.actionObj.clone.offsetWidth:h,l.style.right=sf.base.formatUnit(p)}else{var u=parseInt(this.actionObj.clone.style.left,10);p="drag"===this.actionObj.action||this.resizeEdges.left?u:u+this.actionObj.clone.offsetWidth,l.style.left=sf.base.formatUnit(p)}else p="drag"===this.actionObj.action||this.resizeEdges.top?this.actionObj.clone.offsetTop:this.actionObj.clone.offsetTop+this.actionObj.clone.offsetHeight,l.style.top=sf.base.formatUnit(p)}},e.prototype.getResourceElements=function(e){var t=this;return e.filter((function(e){return parseInt(e.getAttribute("data-group-index"),10)===t.actionObj.groupIndex}))},e.prototype.getOriginalElement=function(e){var t,i=e.getAttribute("data-guid");if(e.offsetParent&&e.offsetParent.classList.contains("e-more-event-popup")||this.parent.isTimelineView())t=[].slice.call(this.parent.element.querySelectorAll('[data-guid="'+i+'"]'));else{var n=sf.base.closest(e,"tr");t=[].slice.call(n.querySelectorAll('[data-guid="'+i+'"]'))}return t},e.prototype.createCloneElement=function(e){var t=sf.base.createElement("div",{innerHTML:e.outerHTML}).children[0],i=["e-schedule-event-clone"];return i.push("drag"===this.actionObj.action?"e-drag-clone":"e-resize-clone"),"Month"!==this.parent.options.currentView&&"TimelineMonth"!==this.parent.options.currentView&&(this.parent.isTimelineView()||this.parent.activeViewOptions.timeScale.enable)||i.push("e-month-event"),sf.base.addClass([t],i),sf.base.addClass([e],"e-event-action"),sf.base.isNullOrUndefined(e.parentElement)||e.parentElement.appendChild(t),t.style.width=sf.base.formatUnit(t.offsetWidth-2),this.parent.options.eventDragArea&&"drag"===this.actionObj.action&&document.querySelector(this.parent.options.eventDragArea).appendChild(t),sf.base.setStyleAttribute(t,{border:"0px"}),""!==e.style.backgroundColor&&sf.base.setStyleAttribute(t,{backgroundColor:e.style.backgroundColor}),t},e.prototype.removeCloneElementClasses=function(){var e=this.actionObj.originalElement;"Month"!==this.parent.options.currentView&&"TimelineYear"!==this.parent.options.currentView&&"Day"!==this.parent.options.currentView&&"Week"!==this.parent.options.currentView&&"WorkWeek"!==this.parent.options.currentView&&(this.parent.isTimelineView()||this.parent.activeViewOptions.timeScale.enable)||(e=[].slice.call(this.parent.element.querySelectorAll(".e-event-action,."+i))),sf.base.removeClass(e,["e-event-action",i])},e.prototype.removeCloneElement=function(){this.actionObj.originalElement=[];for(var e=0,t=[].slice.call(this.parent.element.querySelectorAll(".e-dynamic-clone"));e<t.length;e++){var i=t[e];sf.base.remove(i)}for(var n=0,s=this.actionObj.cloneElement;n<s.length;n++){var r=s[n];sf.base.isNullOrUndefined(r.parentNode)||sf.base.remove(r)}this.actionObj.cloneElement=[];var a=this.parent.element.querySelector(".e-clone-time-indicator");a&&sf.base.remove(a)},e.prototype.getCursorElement=function(e){var t=this.getPageCoordinates(e);return document.elementFromPoint(t.clientX,t.clientY)},e.prototype.autoScroll=function(){var e=this.parent.element.querySelector(".e-content-wrap"),t=e.offsetHeight<=e.scrollHeight,i=e.offsetWidth<=e.scrollWidth,n=t&&e.scrollTop>=0&&e.scrollTop+e.offsetHeight<=e.scrollHeight,s=i&&e.scrollLeft>=0&&e.scrollLeft+e.offsetWidth<=e.scrollWidth;n&&(this.scrollEdges.top||this.scrollEdges.bottom)&&(e.scrollTop+=this.scrollEdges.top?-this.actionObj.scroll.scrollBy:this.actionObj.scroll.scrollBy,"resize"===this.actionObj.action&&e.scrollHeight!==e.offsetHeight+e.scrollTop&&e.scrollTop>0&&(this.actionObj.Y+=this.scrollEdges.top?this.actionObj.scroll.scrollBy:-this.actionObj.scroll.scrollBy)),s&&(this.scrollEdges.left||this.scrollEdges.right)&&(e.scrollLeft+=this.scrollEdges.left?-this.actionObj.scroll.scrollBy:this.actionObj.scroll.scrollBy,"resize"===this.actionObj.action&&e.scrollWidth!==e.offsetWidth+e.scrollLeft&&e.scrollLeft>0&&(this.actionObj.X+=this.scrollEdges.left?this.actionObj.scroll.scrollBy:-this.actionObj.scroll.scrollBy))},e.prototype.autoScrollValidation=function(){if(!this.actionObj.scroll.enable)return!1;var e=this.parent.boundaryValidation(this.actionObj.pageY,this.actionObj.pageX);return this.scrollEdges=e,e.bottom||e.top||e.left||e.right},e.prototype.actionClass=function(e){"addClass"===e?sf.base.addClass([this.parent.element],"e-event-action"):sf.base.removeClass([this.parent.element],"e-event-action")},e.prototype.updateScrollPosition=function(){var e=this;this.actionObj.scroll.enable&&sf.base.isNullOrUndefined(this.actionObj.scrollInterval)&&(this.actionObj.scrollInterval=window.setInterval((function(){if(e.autoScrollValidation()&&!e.actionObj.clone.classList.contains("e-all-day-appointment")){if(e.parent.isTimelineView()&&e.parent.activeViewOptions.group.resources.length>0&&e.actionObj.groupIndex<0)return;e.autoScroll(),e.actionObj.action}}),this.actionObj.scroll.timeDelay))},e.prototype.updateOriginalElement=function(e){var t='[data-id="'+e.getAttribute("data-id")+'"]';this.parent.activeViewOptions.group.resources.length>0&&(t=t.concat('[data-group-index = "'+e.getAttribute("data-group-index")+'"]'));var i=[].slice.call(this.parent.element.querySelectorAll(t));sf.base.addClass(i,"e-event-action");var n=[].slice.call(this.parent.element.querySelectorAll(".e-schedule-event-clone"));sf.base.removeClass(n,"e-event-action")},e.prototype.getCloneEventDetailElement=function(e){return e.querySelector(".e-appointment-details")||[].slice.call(e.children).filter((function(e){return!e.classList.contains("e-event-resize")}))[0]},e.prototype.getUpdatedEvent=function(e,t,i){var n=JSON.parse(JSON.stringify(i));return n.startTime=e,n.endTime=t,n},e.prototype.getMonthDiff=function(e,t){var i;return i=12*(t.getFullYear()-e.getFullYear()),i-=e.getMonth(),(i+=t.getMonth())<=0?0:i},e.prototype.getEventCount=function(e,t){var i=new Date(this.parent.options.selectedDate.getFullYear(),t,1),n=h(new Date(this.parent.options.selectedDate.getFullYear(),t+1,0),1),s=sf.base.extend({},e,null,!0),r=s.startTime,a=s.endTime,o=1;return r.getTime()<i.getTime()&&(s.startTime=i),a.getTime()>n.getTime()&&(s.endTime=n),0===this.parent.activeViewOptions.group.resources.length&&(o=Math.ceil((s.endTime.getTime()-s.startTime.getTime())/864e5)),s.count=o,s},e.prototype.dynamicYearlyEventsRendering=function(e,t,i,n){if(void 0===t&&(t=!1),void 0===n&&(n=!1),sf.base.isNullOrUndefined(this.parent.options.eventDragArea)){var s=y(c(e.startTime)).getTime(),r='.e-work-cells[data-date="'+s+'"]';if(this.parent.activeViewOptions.group.resources.length>0){if(!t&&"Vertical"===this.parent.activeViewOptions.orientation){var a=c(new Date(+this.parent.element.querySelector(".e-work-cells").getAttribute("data-date"))),o=u(new Date(+this.parent.element.querySelector(".e-work-cells:last-child").getAttribute("data-date")),1);e.startTime<a&&e.endTime>a?(s=y(a).getTime(),e.count=this.getMonthDiff(a,h(e.endTime,-1))+1):e.endTime>o&&e.startTime<o&&(e.count=this.getMonthDiff(e.startTime,h(o,-1))+1)}var l=isNaN(e.groupIndex)?this.actionObj.groupIndex:e.groupIndex;r='.e-work-cells[data-date="'+(s=1!==new Date(s).getDate()?new Date(new Date(s).setDate(1)).getTime():s)+'"][data-group-index="'+l+'"]'}var p=this.parent.element.querySelector(r);if(!sf.base.isNullOrUndefined(p)){var d=this.actionObj.cellWidth-7;(t&&(this.resizeEdges.left||this.resizeEdges.right)||n)&&(d=this.actionObj.cellWidth*e.count);var f=this.createAppointmentElement(this.actionObj.groupIndex,i),g=p.querySelector(".e-date-header"),m=g?b(g):0;if(sf.base.setStyleAttribute(f,{overflow:"hidden",padding:"3px",position:"absolute",width:d+"px",top:m+"px"}),t){var v=this.actionObj.cellHeight*e.count-m-7;(this.resizeEdges.right||this.resizeEdges.left)&&(v=parseInt(this.actionObj.clone.style.height,10)),sf.base.setStyleAttribute(f,{height:v+"px"})}var w=p.parentElement.sectionRowIndex,S=[].slice.call(this.parent.element.querySelectorAll(".e-appointment-container"))[parseInt(w.toString(),10)];this.renderCloneElement(S,f,p,i)}}},e.prototype.dynamicEventsRendering=function(e,t){if(sf.base.isNullOrUndefined(this.parent.options.eventDragArea)){var i=this.parent.activeView.renderDates.slice(0),n=[].slice.call(this.parent.element.querySelectorAll(".e-work-cells")),s=this.parent.activeViewOptions.workDays;if(this.parent.activeViewOptions.group.resources.length>0){var r='.e-work-cells[data-group-index="'+(D=isNaN(e.groupIndex)?this.actionObj.groupIndex:e.groupIndex)+'"]',a=(n=[].slice.call(this.parent.element.querySelectorAll(r)))[0].querySelectorAll('[data-group-index="'+D+'"]').length,o=0;n.length>0&&(i=[]);for(var l=0,p=n;l<p.length;l++){var h=p[l];i.push(this.parent.getDateFromElement(h)),o<a&&(s.push(i[parseInt(o.toString(),10)].getDay()),o++)}}if(this.monthEvent.dateRender=i,this.monthEvent.getSlotDates(s),this.resizeEdges.left||this.resizeEdges.right)for(var u=0,d=[].slice.call(this.parent.element.querySelectorAll(".e-schedule-event-clone"));u<d.length;u++){var f=d[u];sf.base.remove(f)}for(var g=0,m=this.monthEvent.splitEvent(e,i);g<m.length;g++){var v=m[g],y=this.parent.getIndexOfDate(i,c(v.startTime)),w=n[parseInt(y.toString(),10)];if(!sf.base.isNullOrUndefined(w)){var S=v.data.count*this.actionObj.cellWidth-7,O=this.createAppointmentElement(this.actionObj.groupIndex,t),T=w.querySelector(".e-date-header"),C=T?w.offsetTop+b(T):w.offsetTop,D=isNaN(v.groupIndex)?parseInt(w.getAttribute("data-group-index"),10):v.groupIndex,A=isNaN(D)?".e-appointment-container":'.e-appointment-container[data-group-index="'+D+'"]';sf.base.setStyleAttribute(O,{width:S+"px",top:C+"px"});var E=this.parent.element.querySelector(A);this.renderCloneElement(E,O,w,t)}}}},e.prototype.renderCloneElement=function(e,t,i,n){if(e){t.setAttribute("drag","true"),sf.base.addClass([t],"e-schedule-event-clone");var s=n||this.actionObj.clone;""!==s.style.backgroundColor&&sf.base.setStyleAttribute(t,{backgroundColor:s.style.backgroundColor}),sf.base.addClass([t],[].slice.call(s.classList)),t.classList.remove("e-event-action");var r=0,a=0;this.parent.options.enableRtl?a=i.parentElement.offsetWidth-i.offsetLeft-i.offsetWidth:r=i.offsetLeft,sf.base.setStyleAttribute(t,{left:r+"px",right:a+"px",border:"0px","pointer-events":"none"});var o=e.querySelector(".e-appointment-wrapper");o||(o=sf.base.createElement("div",{className:"e-appointment-wrapper"}),e.appendChild(o)),o.appendChild(t),this.actionObj.cloneElement.push(o)}},e.prototype.getReadonlyAttribute=function(e){return e.getAttribute("aria-disabled")},e.prototype.createAppointmentElement=function(e,t){var i=t?this.getCloneEventDetailElement(t).outerHTML:sf.base.isNullOrUndefined(this.cloneEventDetail)?"":this.cloneEventDetail.outerHTML,n=sf.base.createElement("div",{className:"e-appointment",innerHTML:i});return this.parent.activeViewOptions.group.resources.length>0&&n.setAttribute("data-group-index",e.toString()),n},e.prototype.destroy=function(){this.parent.isDestroyed||(this.actionObj={},this.scrollArgs={},this.resizeEdges={left:!1,right:!1,top:!1,bottom:!1},this.scrollEdges={left:!1,right:!1,top:!1,bottom:!1})},e}(),ne=(j=function(e,t){return(j=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}j(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),se=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ne(t,e),t.prototype.wireResizeEvent=function(e){for(var t=0,i=[].slice.call(e.querySelectorAll(".e-event-resize"));t<i.length;t++){var n=i[t];sf.base.EventHandler.clearEvents(n),sf.base.EventHandler.add(n,sf.base.Browser.touchStartEvent,this.resizeStart,this)}},t.prototype.resizeHelper=function(){if(this.parent.activeViewOptions.group.resources.length>0&&this.parent.activeViewOptions.group.allowGroupEdit)for(var e=0,t=this.actionObj.originalElement.length;e<t;e++){var i=this.createCloneElement(this.actionObj.originalElement[parseInt(e.toString(),10)]);this.actionObj.cloneElement[parseInt(e.toString(),10)]=i,this.actionObj.element===this.actionObj.originalElement[parseInt(e.toString(),10)]&&(this.actionObj.clone=i)}else this.actionObj.clone=this.createCloneElement(this.actionObj.element),this.actionObj.cloneElement=[this.actionObj.clone],this.actionObj.originalElement=[this.actionObj.element]},t.prototype.resizeStart=function(e){var t=this;this.actionObj.action="resize",this.actionObj.slotInterval=this.parent.activeViewOptions.timeScale.interval/this.parent.activeViewOptions.timeScale.slotCount,this.actionObj.interval=this.actionObj.slotInterval;var i=sf.base.closest(e.target,".e-event-resize");this.actionObj.element=sf.base.closest(i,".e-appointment");var n=this.actionObj.element.getAttribute("data-guid"),s=parseInt(this.actionObj.element.getAttribute("data-group-index")||"0",10),r={cancel:!1,event:this.parent.eventBase.getMouseEvent(e),interval:Math.round(this.actionObj.interval),scroll:{enable:!0,scrollBy:30,timeDelay:100},groupIndex:s};this.parent.dotNetRef.invokeMethodAsync("OnResizeStart",r,n).then((function(n){var r=n.resizeEventArgs;Math.round(t.actionObj.interval)===r.interval&&(r.interval=t.actionObj.interval),t.actionObj.event=sf.base.extend({},n,null,!0),delete t.actionObj.event.resizeEventArgs,t.actionObj.event.startTime=new Date(t.actionObj.event.startTime),t.actionObj.event.endTime=new Date(t.actionObj.event.endTime);var a=sf.base.extend({},t.actionObj.event,null,!0);if(!r.cancel){t.actionClass("addClass"),t.parent.uiStateValues.action=!0,t.resizeEdges={left:i.classList.contains("e-left-handler"),right:i.classList.contains("e-right-handler"),top:i.classList.contains("e-top-handler"),bottom:i.classList.contains("e-bottom-handler")},t.actionObj.groupIndex=t.parent.uiStateValues.isGroupAdaptive?t.parent.uiStateValues.groupIndex:0;var o=t.parent.element.querySelector(".e-work-cells").getBoundingClientRect();t.actionObj.cellWidth=o.width,t.actionObj.cellHeight=o.height;var l=t.parent.activeViewOptions.headerRows.map((function(e){return e.option}));if(t.parent.isTimelineView()&&l.length>0&&["Date","Hour"].indexOf(l.slice(-1)[0])<0){for(var c=t.parent.getContentTable().querySelector("tr"),p=0,h=0,u=[].slice.call(c.children);h<u.length;h++){var d=u[h];p+=parseInt(d.getAttribute("colspan"),10)}var f=c.getBoundingClientRect();t.actionObj.cellWidth=f.width/p,t.actionObj.cellHeight=f.height}var g=t.getPageCoordinates(e);t.actionObj.X=g.pageX,t.actionObj.Y=g.pageY,t.actionObj.groupIndex=s,t.actionObj.interval=r.interval,t.actionObj.scroll=r.scroll,t.actionObj.start=a.startTime,t.actionObj.end=a.endTime,t.actionObj.originalElement=t.getOriginalElement(t.actionObj.element),"Month"!==t.parent.options.currentView&&"TimelineYear"!==t.parent.options.currentView&&(t.parent.isTimelineView()||t.parent.activeViewOptions.timeScale.enable)||(t.daysVariation=-1,t.cloneEventDetail=t.getCloneEventDetailElement(t.actionObj.element),"TimelineYear"!==t.parent.options.currentView&&(t.monthEvent=new L(t.parent)));var m=t.parent.element.querySelector(".e-content-wrap");t.scrollArgs={element:m,width:m.scrollWidth,height:m.scrollHeight},sf.base.EventHandler.add(document,sf.base.Browser.touchMoveEvent,t.resizing,t),sf.base.EventHandler.add(document,sf.base.Browser.touchEndEvent,t.resizeStop,t)}}))},t.prototype.resizing=function(e){if(this.parent.onQuickPopupClose(),0===this.parent.element.querySelectorAll(".e-resize-clone").length&&this.resizeHelper(),sf.base.isNullOrUndefined(e.target)||!e.target.classList.contains("e-disable-dates")){var t=this.getPageCoordinates(e);if("Month"===this.parent.options.currentView||"TimelineYear"===this.parent.options.currentView){var i=document.documentElement,n=(window.pageXOffset||i.scrollLeft)-(i.clientLeft||0),s=(window.pageYOffset||i.scrollTop)-(i.clientTop||0);this.actionObj.pageX=t.pageX-n,this.actionObj.pageY=t.pageY-s}else this.actionObj.pageX=t.pageX,this.actionObj.pageY=t.pageY;this.updateScrollPosition(),this.updateResizingDirection(e)}},t.prototype.updateResizingDirection=function(e){if("Month"!==this.parent.options.currentView&&"TimelineYear"!==this.parent.options.currentView&&(this.parent.isTimelineView()||this.parent.activeViewOptions.timeScale.enable)){var t=this.resizeValidation(e);if(this.resizeEdges.left){if(t){var i=this.getLeftRightStyles(e,!0);if(parseInt(i.width,10)<1)return;for(var n=0,s=this.actionObj.cloneElement;n<s.length;n++){var r=s[n];sf.base.setStyleAttribute(r,i),sf.base.addClass([r],"e-left-handler")}}this.horizontalResizing(!this.parent.options.enableRtl)}if(this.resizeEdges.right){if(t){var a=this.getLeftRightStyles(e,!1);if(parseInt(a.width,10)<1)return;for(var o=0,l=this.actionObj.cloneElement;o<l.length;o++){r=l[o];sf.base.setStyleAttribute(r,a),sf.base.addClass([r],"e-right-handler")}}this.horizontalResizing(this.parent.options.enableRtl)}if(this.resizeEdges.top){if(t){var c=this.getTopBottomStyles(e,!0);if(parseInt(c.height,10)<1)return;for(var p=0,h=this.actionObj.cloneElement;p<h.length;p++){r=h[p];sf.base.setStyleAttribute(r,c),sf.base.addClass([r],"e-top-handler")}}this.verticalResizing(!0)}if(this.resizeEdges.bottom){if(t){var u=this.getTopBottomStyles(e,!1);if(parseInt(u.height,10)<1)return;for(var d=0,f=this.actionObj.cloneElement;d<f.length;d++){r=f[d];sf.base.setStyleAttribute(r,u),sf.base.addClass([r],"e-bottom-handler")}}this.verticalResizing(!1)}}else this.monthResizing()},t.prototype.monthResizing=function(){this.removeCloneElement();var e=document.elementFromPoint(this.actionObj.pageX,this.actionObj.pageY);if(!sf.base.isNullOrUndefined(e)){var t=this.parent.getDateFromElement(e),i=!(this.parent.activeViewOptions.group.resources.length>0)||parseInt(e.getAttribute("data-group-index"),10)===this.actionObj.groupIndex,n=this.actionObj.event.startTime,s=this.actionObj.event.endTime;if(!this.parent.options.enableRtl&&this.resizeEdges.left||this.parent.options.enableRtl&&this.resizeEdges.right||this.resizeEdges.top?n=t:(!this.parent.options.enableRtl&&this.resizeEdges.right||this.parent.options.enableRtl&&this.resizeEdges.left||this.resizeEdges.bottom)&&(s=h(t,1)),i&&n<s){this.actionObj.start=n,this.actionObj.end=s;var r=this.getUpdatedEvent(this.actionObj.start,this.actionObj.end,this.actionObj.event);"TimelineYear"===this.parent.options.currentView?this.yearEventsRendering(r):this.dynamicEventsRendering(r),this.updateOriginalElement(this.actionObj.clone)}else if("TimelineYear"===this.parent.options.currentView)for(var a=0,o=[].slice.call(this.parent.element.querySelectorAll(".e-schedule-event-clone"));a<o.length;a++){var l=o[a];this.actionObj.cloneElement.push(l)}}},t.prototype.yearEventsRendering=function(e){for(var t=0,i=[].slice.call(this.parent.element.querySelectorAll(".e-schedule-event-clone"));t<i.length;t++){var n=i[t];sf.base.remove(n)}var s=new Date(e.endTime),r=0;0===this.parent.activeViewOptions.group.resources.length&&(r=this.getMonthDiff(e.startTime,h(s,-1)));for(var a=0;a<=r;a++){var o=void 0;0===this.parent.activeViewOptions.group.resources.length?o=this.getEventCount(e,this.actionObj.start.getMonth()+a):(o=sf.base.extend({},e,null,!0),s=this.resizeEdges.left||this.resizeEdges.right?h(s,-1):s,o.count=this.getMonthDiff(e.startTime,s)+(this.resizeEdges.top?0:1)),this.dynamicYearlyEventsRendering(o,!0)}},t.prototype.resizeStop=function(){sf.base.EventHandler.remove(document,sf.base.Browser.touchMoveEvent,this.resizing),sf.base.EventHandler.remove(document,sf.base.Browser.touchEndEvent,this.resizeStop),clearInterval(this.actionObj.scrollInterval),this.actionObj.scrollInterval=null,this.removeCloneElementClasses(),this.removeCloneElement(),this.actionClass("removeClass"),this.parent.uiStateValues.action=!1;var e=this.actionObj.element.getAttribute("data-guid"),t=y(this.actionObj.start),i=y(this.actionObj.end);this.parent.dotNetRef.invokeMethodAsync("OnResizeStop",t,i,e,this.actionObj.groupIndex)},t.prototype.verticalResizing=function(e){var t=this.actionObj.clone.offsetTop;e||(t+=this.actionObj.clone.offsetHeight);var i=t/this.actionObj.cellHeight*this.actionObj.slotInterval,n=this.actionObj.clone.offsetParent;if(!sf.base.isNullOrUndefined(n)){var s=c(this.parent.getDateFromElement(n));s.setHours(this.parent.activeView.getStartHour().getHours()),s.setMinutes(i+this.parent.activeView.getStartHour().getMinutes()),e?this.actionObj.start=this.calculateIntervalTime(s):this.actionObj.end=this.calculateIntervalTime(s),this.updateTimePosition(s)}},t.prototype.horizontalResizing=function(e){var t,i=this.actionObj.event.startTime,n=this.actionObj.event.endTime,s=this.parent.options.currentView;if(this.parent.isTimelineView()){var r=this.parent.getContentTable().querySelector("tr");if(this.parent.activeViewOptions.headerRows.length>0){var a=this.parent.activeViewOptions.headerRows.map((function(e){return e.option}));s=a.slice(-1)[0],"TimelineMonth"===this.parent.options.currentView&&"Hour"===s&&(s=a.slice(-2)[0]||"Month")}t=e?i:n;var o=0,l=[].slice.call(r.children),c=!1,p=this.actionObj.cellWidth/(this.parent.activeViewOptions.timeScale.interval/this.parent.activeViewOptions.timeScale.slotCount),u=parseFloat(this.parent.options.enableRtl?this.actionObj.clone.style.right:this.actionObj.clone.style.left);if(u=Math.round(u/p)*p,-1!==["Year","Month","Week","Date"].indexOf(s)){for(var d=0,f=0,g=l;f<g.length;f++){var m=g[f];d+=parseInt(m.getAttribute("colspan"),10)}var v=this.parent.options.enableRtl?parseInt(this.actionObj.clone.style.right,10):parseInt(this.actionObj.clone.style.left,10);e||(v+=Math.round(this.actionObj.clone.getBoundingClientRect().width/this.actionObj.cellWidth)*this.actionObj.cellWidth-this.actionObj.cellWidth),c=(o=Math.round(v/(r.getBoundingClientRect().width/d)))===l.length,o=o<0?0:o>=d?d-1:o}else{var b=this.actionObj.cellWidth;if(o=e?Math.floor(u/this.actionObj.cellWidth):Math.ceil((u+(this.actionObj.clone.getBoundingClientRect().width-b))/this.actionObj.cellWidth),this.parent.options.enableRtl){var y=0;("TimelineMonth"===s||!this.parent.activeViewOptions.timeScale.enable&&"TimelineMonth"!==this.parent.options.currentView)&&(y=this.actionObj.cellWidth);var w=Math.floor(u/this.actionObj.cellWidth)*this.actionObj.cellWidth+(e?0:this.actionObj.clone.getBoundingClientRect().width-y);o=Math.floor(w/this.actionObj.cellWidth)}c=o===l.length,o=this.getIndex(o)}var S=void 0;if(S=-1!==["Year","Month","Week","Date"].indexOf(s)?new Date(this.parent.activeView.renderDates[parseInt(o.toString(),10)].getTime()):this.parent.getDateFromElement(r.children[parseInt(o.toString(),10)]),-1===["TimelineMonth","Year","Month","Week","Date"].indexOf(s)&&this.parent.activeViewOptions.timeScale.enable){e||(u+=this.actionObj.clone.getBoundingClientRect().width);var O=Math.ceil(this.actionObj.slotInterval/this.actionObj.cellWidth*(u-Math.floor(u/this.actionObj.cellWidth)*this.actionObj.cellWidth));O=c||!e&&0===O?this.actionObj.slotInterval:O,(t=new Date(S.getTime())).setMinutes(t.getMinutes()+O),this.updateTimePosition(t)}else t=new Date(S.setHours(t.getHours(),t.getMinutes(),t.getSeconds()))}else{var T=sf.base.closest(this.actionObj.clone,"td").cellIndex,C=Math.ceil((e?this.actionObj.element.getBoundingClientRect().width:0)/this.actionObj.cellWidth)*this.actionObj.cellWidth,D=(d=Math.ceil((this.actionObj.clone.getBoundingClientRect().width-C)/this.actionObj.cellWidth),r=sf.base.closest(this.actionObj.clone,"tr"),e?T-d:T+d-1);D=this.parent.virtualScrollModule&&this.parent.virtualScrollModule.isHorizontalScroll&&this.parent.activeViewOptions.timeScale.enable?D:this.getIndex(D),t=this.parent.getDateFromElement(r.children[parseInt(D.toString(),10)]),e?t.setHours(i.getHours(),i.getMinutes(),i.getSeconds()):t.setHours(n.getHours(),n.getMinutes(),n.getSeconds())}var A=-1!==["TimelineMonth","Year","Month","Week","Date"].indexOf(s)||!this.parent.activeViewOptions.timeScale.enable;if(e)this.actionObj.event.endTime.getTime()-t.getTime()<=0&&(t=new Date(this.actionObj.event.startTime.getTime())),this.actionObj.start=A?t:this.calculateIntervalTime(t);else{var E=A&&0===t.getHours()&&0===t.getMinutes()?h(t,1):t;this.actionObj.end=A?E:this.calculateIntervalTime(E)}},t.prototype.getTopBottomStyles=function(e,t){var i=this.parent.element.querySelector(".e-content-wrap"),n=this.actionObj.cellHeight/this.actionObj.slotInterval*this.actionObj.interval,s=t?this.actionObj.element.offsetHeight+(this.actionObj.Y-this.actionObj.pageY):this.actionObj.element.offsetHeight+(this.actionObj.pageY-this.actionObj.Y),r=t?this.actionObj.element.offsetTop-(this.actionObj.Y-this.actionObj.pageY):this.actionObj.clone.offsetTop;return s=r<0||this.actionObj.clone.offsetTop+this.actionObj.clone.offsetHeight>this.scrollArgs.height?this.actionObj.clone.offsetHeight:s,r=r<0?0:r,s=(r=Math.floor(r/n)*n)+s>=i.scrollHeight?i.scrollHeight-r:Math.ceil(s/n)*n,{height:sf.base.formatUnit(s<this.actionObj.cellHeight?Math.floor(s/n)*n:s),top:sf.base.formatUnit(s<this.actionObj.cellHeight&&t?Math.ceil(r/n)*n:r),left:"0px",right:"0px",width:"100%"}},t.prototype.getLeftRightStyles=function(e,t){var i={},n=this.parent.isTimelineView(),s=["TimelineDay","TimelineWeek","TimelineWorkWeek"].indexOf(this.parent.options.currentView)>-1&&this.parent.activeViewOptions.timeScale.enable,r=this.actionObj.cellWidth/this.actionObj.slotInterval*this.actionObj.interval,a=t?this.actionObj.X-this.actionObj.pageX:this.actionObj.pageX-this.actionObj.X,o=n?this.actionObj.element.getBoundingClientRect().width/this.actionObj.cellWidth*this.actionObj.cellWidth:"Month"===this.parent.options.currentView||!this.parent.isTimelineView()&&!this.parent.activeViewOptions.timeScale.enable?this.actionObj.element.getBoundingClientRect().width:Math.ceil(this.actionObj.element.getBoundingClientRect().width/this.actionObj.cellWidth)*this.actionObj.cellWidth,l=o+Math.ceil(a/this.actionObj.cellWidth)*this.actionObj.cellWidth,c=this.parent.options.enableRtl?parseInt(this.actionObj.element.style.right,10):this.actionObj.clone.offsetLeft;if(s){if(l=o+Math.ceil(a/r)*r,!t){var p=(+parseFloat(this.actionObj.element.style[this.parent.options.enableRtl?"right":"left"])).toFixed(1),h=Math.round(o/r)*r;p===c.toFixed(1)&&h===o||(l=Math.round((c+l)/r)*r-c)}this.actionObj.event.isAllDay=!1}var u=!t&&l+this.actionObj.clone.offsetLeft>this.scrollArgs.width?this.actionObj.clone.getBoundingClientRect().width:l;if(this.parent.options.enableRtl){var d=n?parseInt(this.actionObj.element.style.right,10):-(l-this.actionObj.cellWidth);d=n?d:t||d>0?0:d,n&&!t&&(d-=Math.ceil((this.actionObj.pageX-this.actionObj.X)/r)*r)<0&&(d=parseInt(this.actionObj.clone.style.right,10),u=parseInt(this.actionObj.clone.style.width,10)),d=d>=this.scrollArgs.width?this.scrollArgs.width-this.actionObj.cellWidth:d,i.right=sf.base.formatUnit(d),u=u+d>this.scrollArgs.width?this.actionObj.clone.getBoundingClientRect().width:u}else{var f=t?this.actionObj.element.offsetLeft-(this.actionObj.X-this.actionObj.pageX):this.parent.options.enableRtl?this.actionObj.element.offsetLeft:0;n&&(f=t?f:parseInt(this.actionObj.clone.style.left,10),f=this.parent.options.enableRtl?t?f:this.actionObj.pageX<this.actionObj.X-this.actionObj.clone.getBoundingClientRect().width?parseInt(this.actionObj.clone.style.right,10):f:t&&this.actionObj.pageX>this.actionObj.X+this.actionObj.clone.getBoundingClientRect().width&&this.actionObj.clone.getBoundingClientRect().width===this.actionObj.cellWidth?parseInt(this.actionObj.clone.style.left,10):f);var g=f;(f=n?s?t?this.actionObj.element.offsetLeft-Math.ceil((this.actionObj.element.offsetLeft-f)/r)*r:f:Math.floor(f/this.actionObj.cellWidth)*this.actionObj.cellWidth:Math.ceil(Math.abs(f)/this.actionObj.cellWidth)*this.actionObj.cellWidth)<0&&(n&&t&&f%r?(f=parseInt(this.actionObj.clone.style.left,10),u=parseInt(this.actionObj.clone.style.width,10)):(f=0,u=this.actionObj.clone.getBoundingClientRect().width));var m=Math.ceil(this.actionObj.clone.getBoundingClientRect().width/this.actionObj.cellWidth)*this.actionObj.cellWidth;t&&(i.left=sf.base.formatUnit(n?f:t?g<0?-f:Math.ceil((o-m)/this.actionObj.cellWidth)*this.actionObj.cellWidth:f))}return i.width=sf.base.formatUnit(u),i},t.prototype.resizeValidation=function(e){var t=this.getPageCoordinates(e),i=this.getContentAreaDimension(),n=this.parent.isTimelineView()&&this.parent.activeViewOptions.timeScale.enable,s=this.actionObj.cellWidth,r=!1;return this.resizeEdges.left&&(t.pageX<i.leftOffset&&t.pageX>=i.left&&n&&(s=0),r=t.pageX-s>=i.left),this.resizeEdges.right&&(t.pageX>i.rightOffset&&t.pageX<=i.right&&n&&(s=0),r=t.pageX+s<=i.right),this.resizeEdges.top&&(r=this.actionObj.clone.offsetTop>=i.top),this.resizeEdges.bottom&&(r=this.actionObj.clone.offsetTop+this.actionObj.clone.offsetHeight<=this.scrollArgs.height),r},t}(ie),re=(H=function(e,t){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}H(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),ae=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.widthUptoCursorPoint=0,t.heightUptoCursorPoint=0,t.cursorPointIndex=0,t.isHeaderRows=!1,t.isTimelineDayProcess=!1,t.widthPerMinute=0,t.heightPerMinute=0,t.minDiff=0,t.isStepDragging=!1,t.isMorePopupOpened=!1,t.isAllDayDrag=!1,t.isMultiSelect=!1,t.multiData=[],t.updatedData=[],t.swagData=[],t.startTime=0,t.isAllDayTarget=!1,t.targetTd=null,t.cloneElements=[],t.isCursorAhead=!1,t}return re(t,e),t.prototype.wireDragEvent=function(e){e.ej2_instances&&[].slice.call(e.ej2_instances).forEach((function(e){return e.destroy()}));new sf.base.Draggable(e,{abort:".e-event-resize",clone:!0,isDragScroll:!0,enableTapHold:this.parent.isAdaptive,enableTailMode:!!this.parent.options.eventDragArea,cursorAt:this.parent.options.eventDragArea?{left:-20,top:-20}:{left:0,top:0},dragArea:this.parent.options.eventDragArea?document.querySelector(this.parent.options.eventDragArea):this.parent.element.querySelector(".e-content-table"),distance:5,dragStart:this.dragStart.bind(this),drag:this.drag.bind(this),dragStop:this.dragStop.bind(this),enableAutoScroll:!1,helper:this.dragHelper.bind(this),queryPositionInfo:this.dragPosition.bind(this)})},t.prototype.dragHelper=function(e){var t=this;this.setDragActionDefaultValues(),this.actionObj.element=e.element,this.actionObj.action="drag";var i=[];return!this.parent.options.allowMultiDrag||sf.base.isNullOrUndefined(this.parent.selectedElements)||0===this.parent.selectedElements.length||this.parent.selectedElements.length>0&&-1===this.parent.selectedElements.indexOf(this.actionObj.element)?i=[e.element]:(i=this.parent.selectedElements,this.isMultiSelect=!0),i.forEach((function(e){var i=t.createCloneElement(e);e.getAttribute("data-guid")===t.actionObj.element.getAttribute("data-guid")&&(t.actionObj.clone=i,t.parent.options.eventDragArea||"Month"===t.parent.options.currentView||!t.parent.activeViewOptions.timeScale.enable||t.parent.isTimelineView()||t.actionObj.element.classList.contains("e-all-day-appointment")||sf.base.setStyleAttribute(t.actionObj.clone,{cursor:"move",left:"0%",right:"0%",width:"100%"}),t.actionObj.clone.style.top=sf.base.formatUnit(t.actionObj.element.offsetTop)),t.actionObj.cloneElement.push(i),t.cloneElements.push(i),t.actionObj.originalElement.push(e)})),this.actionObj.clone},t.prototype.dragPosition=function(e){if(this.parent.options.eventDragArea)return{left:e.left,top:e.top};var t,i=this.actionObj.cellHeight/this.actionObj.slotInterval*this.actionObj.interval,n=sf.base.formatUnit(0);(this.parent.isTimelineView()||"Month"===this.parent.options.currentView||!this.parent.isTimelineView()&&!this.parent.activeViewOptions.timeScale.enable)&&(n=sf.base.formatUnit(this.actionObj.clone.offsetLeft)),t=this.isStepDragging?Math.ceil(this.actionObj.clone.getBoundingClientRect().right)+this.actionObj.interval:this.actionObj.clone.getBoundingClientRect().right;var s,r=this.parent.element.querySelector(".e-content-wrap").getBoundingClientRect().right;if(!(this.parent.isTimelineView()&&"TimelineYear"!==this.parent.options.currentView&&!this.parent.options.enableRtl&&this.actionObj.pageX>t)||this.isMorePopupOpened||this.actionObj.pageX>r||(this.isCursorAhead=!0),"Month"===this.parent.options.currentView||this.parent.isTimelineView()||!this.parent.activeViewOptions.timeScale.enable||!sf.base.isNullOrUndefined(this.actionObj.clone.offsetParent)&&this.actionObj.clone.offsetParent.classList.contains("e-more-event-popup"))s=sf.base.formatUnit(this.actionObj.clone.offsetTop);else if(this.actionObj.clone.classList.contains("e-all-day-appointment"))s=sf.base.formatUnit(this.parent.element.querySelector(".e-all-day-row").offsetTop),sf.base.setStyleAttribute(this.actionObj.clone,{width:sf.base.formatUnit(Math.ceil(this.actionObj.clone.offsetWidth/this.actionObj.cellWidth)*this.actionObj.cellWidth),right:this.parent.options.enableRtl&&sf.base.formatUnit(0)});else{this.actionObj.element.classList.contains("e-all-day-appointment")&&!this.actionObj.clone.classList.contains("e-all-day-appointment")&&sf.base.setStyleAttribute(this.actionObj.clone,{height:sf.base.formatUnit(this.actionObj.cellHeight),width:sf.base.formatUnit(this.actionObj.cellWidth-1),pointerEvents:"none"});var a=parseInt(e.top,10);a=a<0?0:a,s=sf.base.formatUnit(Math.ceil(a/i)*i);var o=this.parent.element.querySelector(".e-content-wrap").scrollHeight,l=parseInt(s,10)+this.actionObj.clone.offsetHeight;l>o&&(s=parseInt(s,10)-(l-o)+"px")}return{left:n,top:s}},t.prototype.setDragActionDefaultValues=function(){this.actionObj.action="drag",this.actionObj.isAllDay=null,this.actionObj.slotInterval=this.parent.activeViewOptions.timeScale.interval/this.parent.activeViewOptions.timeScale.slotCount,this.actionObj.interval=this.actionObj.slotInterval;var e=this.parent.element.querySelector(".e-work-cells");this.actionObj.cellWidth=e.offsetWidth,this.actionObj.cellHeight=e.offsetHeight},t.prototype.dragStart=function(e){var t=this,i=[],n=this.actionObj.element.getAttribute("data-guid");this.isMultiSelect&&this.parent.selectedElements.forEach((function(e){var t=e.getAttribute("data-guid");-1===i.indexOf(t)&&i.push(t)}));var s=this.parent.eventBase.getMouseEvent(e.event),r=parseInt(this.actionObj.element.getAttribute("data-group-index")||"0",10),a={cancel:!1,event:s,excludeSelectors:null,interval:Math.round(this.actionObj.interval),navigation:{enable:!1,timeDelay:2e3},scroll:{enable:!0,scrollBy:30,timeDelay:100},left:s.clientX,top:s.clientY,groupIndex:r};this.parent.uiStateValues.action=!0,this.parent.dotNetRef.invokeMethodAsync("OnDragStart",a,n,i).then((function(i){var n=i.dragEventArgs;Math.round(t.actionObj.interval)===n.interval&&(n.interval=t.actionObj.interval),t.actionObj.isAllDay=i.isAllDay,t.actionObj.event=sf.base.extend({},i,null,!0),delete t.actionObj.event.dragEventArgs,t.actionObj.event.startTime=new Date(t.actionObj.event.startTime),t.actionObj.event.endTime=new Date(t.actionObj.event.endTime);var s=sf.base.extend({},t.actionObj.event,null,!0);if(n.cancel||!sf.base.isNullOrUndefined(t.actionObj.element)&&sf.base.isNullOrUndefined(t.actionObj.element.parentElement)){var a=t.actionObj.element.ej2_instances[0];return sf.base.isNullOrUndefined(a)||a.intDestroy(e.event),t.actionObj.action="",t.removeCloneElementClasses(),t.removeCloneElement(),void(t.parent.uiStateValues.action=!1)}e.bindEvents(e.dragElement),t.actionClass("addClass"),t.isMultiSelect&&!sf.base.isNullOrUndefined(i.selectedData)&&(delete t.actionObj.event.selectedData,delete s.selectedData,t.startTime=s.startTime.getTime(),t.getSelectedData(i.selectedData)),t.parent.uiStateValues.action=!0,t.actionObj.start=s.startTime,t.actionObj.end=s.endTime,t.actionObj.groupIndex=r,t.actionObj.interval=n.interval,t.actionObj.navigation=n.navigation,t.actionObj.scroll=n.scroll,t.actionObj.excludeSelectors=n.excludeSelectors;var o=t.parent.element.querySelector(".e-content-wrap");if(t.scrollArgs={element:o,width:o.scrollWidth,height:o.scrollHeight},t.widthPerMinute=t.actionObj.cellWidth/t.actionObj.slotInterval*t.actionObj.interval,t.heightPerMinute=t.actionObj.cellHeight/t.actionObj.slotInterval*t.actionObj.interval,t.widthUptoCursorPoint=0,t.heightUptoCursorPoint=0,t.cursorPointIndex=-1,t.isHeaderRows=!1,t.isTimelineDayProcess=!1,t.minDiff=0,t.isMorePopupOpened=!1,t.daysVariation=-1,t.isAllDayTarget=t.actionObj.clone.classList.contains("e-all-day-appointment"),t.parent.isTimelineView()||!t.parent.activeViewOptions.timeScale.enable){!sf.base.isNullOrUndefined(t.actionObj.clone.offsetParent)&&t.actionObj.clone.offsetParent.classList.contains("e-more-event-popup")&&(t.isMorePopupOpened=!0);var l=t.parent.activeViewOptions.headerRows;t.isHeaderRows=l.length>0&&"Hour"!==l[l.length-1].option&&"Date"!==l[l.length-1].option,t.isTimelineDayProcess=!t.parent.activeViewOptions.timeScale.enable||t.isHeaderRows||"TimelineMonth"===t.parent.options.currentView||l.length>0&&"Date"===l[l.length-1].option,t.isStepDragging=!t.isTimelineDayProcess&&t.actionObj.slotInterval!==t.actionObj.interval,t.isTimelineDayProcess?t.timelineEventModule=new N(t.parent,"day"):t.timelineEventModule=new N(t.parent,"hour")}("Month"!==t.parent.options.currentView&&"TimelineYear"!==t.parent.options.currentView&&(t.parent.isTimelineView()||t.parent.activeViewOptions.timeScale.enable)||(t.startTime=c(new Date(t.startTime)).getTime(),t.updateOriginalElement(t.actionObj.clone),t.cloneEventDetail=t.getCloneEventDetailElement(t.actionObj.clone),t.monthEvent=new L(t.parent)),"Day"===t.parent.options.currentView||"Week"===t.parent.options.currentView||"WorkWeek"===t.parent.options.currentView)&&(t.verticalEvent=new k(t.parent),t.splitEvent(t.actionObj.event).forEach((function(e){var i='.e-day-wrapper[data-date="'+y(c(e.startTime)).getTime()+'"]';t.parent.activeViewOptions.group.resources.length>0&&(i=i.concat('[data-group-index = "'+t.actionObj.groupIndex+'"]'));var n=t.parent.element.querySelector(i);if(n){var s=n.querySelector('[data-guid="'+t.actionObj.clone.getAttribute("data-guid")+'"]');s&&sf.base.addClass([s],"e-event-action")}})))}))},t.prototype.getSelectedData=function(e){var t=this;e.forEach((function(e){e.startTime=new Date(e.startTime),e.endTime=new Date(e.endTime),t.multiData.push(e)}))},t.prototype.drag=function(e){if(this.parent.onQuickPopupClose(this.isMultiSelect),sf.base.isNullOrUndefined(e.target)||!e.target.classList.contains("e-disable-dates")){var t=sf.base.extend({},this.actionObj.event,null,!0),i=this.getPageCoordinates(e);if(this.actionObj.Y=this.actionObj.pageY=i.pageY,this.actionObj.X=this.actionObj.pageX=i.pageX,this.actionObj.target=e.target,this.widthUptoCursorPoint=0===this.widthUptoCursorPoint?Math.ceil(Math.abs(this.actionObj.clone.getBoundingClientRect().left-this.actionObj.X)/this.widthPerMinute)*this.widthPerMinute:this.widthUptoCursorPoint,this.widthUptoCursorPoint=this.isMorePopupOpened?this.actionObj.cellWidth:this.widthUptoCursorPoint,this.heightUptoCursorPoint=0===this.heightUptoCursorPoint?Math.ceil(Math.abs(this.actionObj.clone.getBoundingClientRect().top-this.actionObj.Y)/this.heightPerMinute)*this.heightPerMinute:this.heightUptoCursorPoint,this.isAllDayDrag=this.parent.activeViewOptions.timeScale.enable?this.actionObj.clone.classList.contains("e-all-day-appointment"):this.actionObj.event.isAllDay,this.isStepDragging&&0===this.minDiff&&this.calculateMinutesDiff(t),("Month"===this.parent.options.currentView||this.isAllDayDrag)&&this.daysVariation<0){var n=this.parent.getDateFromElement(this.actionObj.target);if(sf.base.isNullOrUndefined(n))this.daysVariation=0;else{var s=c(n),r=c(t.startTime);this.daysVariation=(s.getTime()-r.getTime())/864e5}}else this.daysVariation=0;if(this.parent.options.eventDragArea){var a=i.target;this.actionObj.clone.style.top=sf.base.formatUnit(a.offsetTop),this.actionObj.clone.style.left=sf.base.formatUnit(a.offsetLeft),sf.base.closest(a,".e-schedule")?"Week"!==this.parent.options.currentView&&"WorkWeek"!==this.parent.options.currentView&&"Day"!==this.parent.options.currentView&&(this.actionObj.clone.style.width=sf.base.formatUnit(this.actionObj.element.offsetWidth)):(this.actionObj.clone.style.height="",this.actionObj.clone.style.width="")}this.updateScrollPosition(),this.updateNavigatingPosition(e),this.updateDraggingDateTime(e);var o={data:t,event:e,element:this.actionObj.element,startTime:this.actionObj.start,endTime:this.actionObj.end};this.parent.activeViewOptions.group.resources.length>0&&(o.groupIndex=this.actionObj.groupIndex)}},t.prototype.calculateMinutesDiff=function(e){this.parent.options.enableRtl?this.minDiff=(this.actionObj.clone.offsetWidth-this.widthUptoCursorPoint)/this.widthPerMinute*this.actionObj.interval:this.minDiff=this.widthUptoCursorPoint/this.widthPerMinute*this.actionObj.interval;var t=e.startTime,i=d(this.parent.activeView.renderDates[0],this.parent.activeView.getStartHour(),this.parent.activeView.getEndHour());i.startHour.getTime()>t.getTime()&&(this.minDiff=this.minDiff+(i.startHour.getTime()-t.getTime())/6e4)},t.prototype.dragStop=function(e){if(this.isCursorAhead=!1,this.removeCloneElementClasses(),this.removeCloneElement(),clearInterval(this.actionObj.navigationInterval),this.actionObj.navigationInterval=null,clearInterval(this.actionObj.scrollInterval),this.actionObj.scrollInterval=null,this.actionClass("removeClass"),this.parent.uiStateValues.action=!1,this.actionObj.action=null,!this.isAllowDrop(e)){var t=this.actionObj.element.getAttribute("data-guid"),i=y(this.actionObj.start),n=y(this.actionObj.end),s=[];this.updatedData.length>0&&this.updatedData.forEach((function(e){s.push({startTime:y(e.startTime),endTime:y(e.endTime),isAllDay:e.isAllDay,guid:e.guid,groupIndex:e.groupIndex})}));var r=!(this.parent.activeViewOptions.group.resources.length>0)||parseInt(this.actionObj.element.getAttribute("data-group-index"),10)===this.actionObj.groupIndex,a=this.parent.activeViewOptions.group.resources.length>0?this.actionObj.groupIndex:-1,o=[];if(this.parent.activeViewOptions.group.resources.length>0&&this.parent.activeViewOptions.group.allowGroupEdit)if(-1===(o=this.getOriginalElement(this.actionObj.element).map((function(e){return parseInt(e.getAttribute("data-group-index"),10)}))).indexOf(this.actionObj.groupIndex)){var l=parseInt(this.actionObj.clone.getAttribute("data-group-index"),10);(o=o.filter((function(e){return e!==l}))).push(this.actionObj.groupIndex)}else o=[];var c=this.parent.eventBase.getMouseEvent(e.event),p={cancel:!1,event:c,left:c.clientX,top:c.clientY,startTime:i,endTime:n,groupIndex:a};this.parent.dotNetRef.invokeMethodAsync("OnDragStop",p,t,r,this.actionObj.isAllDay,o,s),this.updatedData=[],this.multiData=[],this.isMultiSelect=!1,this.parent.selectedElements=[],this.cloneElements=[]}},t.prototype.updateNavigatingPosition=function(e){var t=this;if(this.actionObj.navigation.enable){var i=this.parent.getCurrentTime();sf.base.isNullOrUndefined(this.actionObj.navigationInterval)&&(this.actionObj.navigationInterval=window.setInterval((function(){if(i){var n=t.parent.getCurrentTime().getSeconds(),s=i.getSeconds()+t.actionObj.navigation.timeDelay/1e3;(s=s>=60?s-60:s)===n&&(i=t.parent.getCurrentTime(),t.viewNavigation(),t.updateDraggingDateTime(e))}}),this.actionObj.navigation.timeDelay))}},t.prototype.updateDraggingDateTime=function(e){!sf.base.isNullOrUndefined(this.actionObj.clone.offsetParent)&&this.actionObj.clone.offsetParent.classList.contains("e-more-event-popup")?this.morePopupEventDragging(e):this.parent.isTimelineView()&&"TimelineYear"!==this.parent.options.currentView?(this.timelineEventModule.dateRender=this.parent.activeView.renderDates,this.timelineEventModule.cellWidth=this.actionObj.cellWidth,this.timelineEventModule.getSlotDates(),this.actionObj.cellWidth=this.isHeaderRows?this.timelineEventModule.cellWidth:this.actionObj.cellWidth,this.calculateTimelineTime(e)):"Month"===this.parent.options.currentView||"TimelineYear"===this.parent.options.currentView||!this.parent.isTimelineView()&&!this.parent.activeViewOptions.timeScale.enable?this.calculateVerticalDate(e):this.calculateVerticalTime(e)},t.prototype.navigationWrapper=function(){if(this.parent.isTimelineView()){var e=void 0,t=(e=this.parent.activeViewOptions.group.resources.length>0?this.parent.element.querySelectorAll(".e-appointment-container:not(.e-hidden)").item(this.actionObj.index):this.parent.element.querySelector(".e-appointment-container")).querySelector(".e-appointment-wrapper");t||(t=sf.base.createElement("div",{className:"e-appointment-wrapper"}),e.appendChild(t)),t.appendChild(this.actionObj.clone)}else if("Month"!==this.parent.options.currentView&&this.parent.activeViewOptions.timeScale.enable){var i=this.actionObj.clone.classList.contains("e-all-day-appointment")?".e-all-day-appointment-wrapper":".e-appointment-wrapper";if(this.parent.element.querySelectorAll(i).item(this.actionObj.index).appendChild(this.actionObj.clone),".e-all-day-appointment-wrapper"===i){var n=this.getAllDayEventHeight(),s=[].slice.call(this.parent.element.querySelectorAll(".e-all-day-cells:first-child"));if(s[0].offsetHeight<n)for(var r=0,a=s;r<a.length;r++){a[r].style.height=(n+2)/12+"em"}this.actionObj.clone.style.height=sf.base.formatUnit(n)}this.actionObj.height=parseInt(this.actionObj.clone.style.height,10)}else{var o=[].slice.call(this.parent.element.querySelectorAll(".e-work-cells"));this.actionObj.index=this.parent.activeView.renderDates.length<this.actionObj.index?this.parent.activeView.renderDates.length-1:this.actionObj.index;var l=o[this.actionObj.index].querySelector(".e-appointment-wrapper");l||(l=sf.base.createElement("div",{className:"e-appointment-wrapper"}),o[this.actionObj.index].appendChild(l)),l.appendChild(this.actionObj.clone)}},t.prototype.viewNavigation=function(){var e,t=this.parent.element.querySelector(".e-content-wrap");t&&(!this.scrollEdges.top&&!this.scrollEdges.bottom||sf.base.closest(this.actionObj.clone,".e-all-day-appointment-wrapper"))&&(0===t.scrollLeft&&Math.round(this.actionObj.X)<=Math.round(t.getBoundingClientRect().left+this.actionObj.cellWidth+window.pageXOffset)?e=this.parent.options.enableRtl?"Next":"Previous":Math.round(t.scrollLeft)+t.clientWidth===t.scrollWidth&&Math.round(this.actionObj.X)>=Math.round(t.getBoundingClientRect().right-this.actionObj.cellWidth+window.pageXOffset)&&(e=this.parent.options.enableRtl?"Previous":"Next"),e&&this.parent.dotNetRef.invokeMethodAsync("OnDateNavigate",e))},t.prototype.morePopupEventDragging=function(e){if(!(sf.base.isNullOrUndefined(e.target)||e.target&&sf.base.isNullOrUndefined(sf.base.closest(e.target,"td")))){var t=sf.base.extend({},this.actionObj.event,null,!0),i=t.endTime.getTime()-t.startTime.getTime(),n=sf.base.closest(e.target,"td"),s=this.parent.getDateFromElement(n),r=new Date(s.getTime());r.setMilliseconds(i),this.parent.activeViewOptions.group.resources.length>0&&(this.actionObj.groupIndex=parseInt(n.getAttribute("data-group-index"),10)),this.actionObj.start=new Date(s.getTime()),this.actionObj.end=new Date(r.getTime()),this.actionObj.clone.style.top=sf.base.formatUnit(n.offsetParent.offsetTop),this.actionObj.clone.style.left=sf.base.formatUnit(n.offsetLeft),this.actionObj.clone.style.width=sf.base.formatUnit(n.offsetWidth);var a,o=n;if("TimelineYear"!==this.parent.options.currentView&&this.parent.isTimelineView()){var l=sf.base.closest(n,"tr").rowIndex;o=this.parent.element.querySelectorAll(".e-appointment-container").item(l)}(a=o.querySelector(".e-appointment-wrapper"))||(a=sf.base.createElement("div",{className:"e-appointment-wrapper"}),o.appendChild(a)),this.appendCloneElement(a)}},t.prototype.calculateVerticalTime=function(e){var t=this;if(!(sf.base.isNullOrUndefined(this.actionObj.target)||this.actionObj.target&&sf.base.isNullOrUndefined(sf.base.closest(this.actionObj.target,"tr"))||!sf.base.closest(this.actionObj.target,"td").classList.contains("e-work-cells")&&!sf.base.closest(this.actionObj.target,"td").classList.contains("e-all-day-cells"))){this.parent.activeViewOptions.timeScale.enable&&this.swapDragging(e);var i=this.parent.element.querySelector(".e-content-wrap"),n=sf.base.extend({},this.actionObj.event,null,!0),s=n.startTime,r=n.endTime.getTime()-s.getTime(),a=Math.floor(parseInt(this.actionObj.clone.style.top,10)/this.actionObj.cellHeight)*this.actionObj.cellHeight;a=a<0?0:a,(this.scrollEdges.top||this.scrollEdges.bottom)&&(a=this.scrollEdges.top?i.scrollTop-this.heightUptoCursorPoint+this.actionObj.cellHeight:i.scrollTop+i.offsetHeight-this.actionObj.clone.offsetHeight+(this.actionObj.clone.offsetHeight-this.heightUptoCursorPoint),a=Math.round(a/this.actionObj.cellHeight)*this.actionObj.cellHeight,i.scrollTop>0&&(this.actionObj.clone.style.top=sf.base.formatUnit(a)));var o,l,p=a/this.actionObj.cellHeight,u=this.actionObj.cellHeight/this.actionObj.slotInterval,d=parseFloat(this.actionObj.clone.style.top)-a,f=sf.base.closest(this.actionObj.target,"td").classList.contains("e-all-day-cells");if(this.isAllDayDrag||this.parent.virtualScrollModule&&this.parent.virtualScrollModule.isHorizontalScroll&&f)o=this.parent.element.querySelector(".e-all-day-row");else o=[].slice.call(this.parent.getContentTable().querySelectorAll("tr"))[parseInt(p.toString(),10)];(sf.base.closest(this.actionObj.target,"td").classList.contains("e-work-cells")||f)&&(l=sf.base.closest(this.actionObj.target,"td").cellIndex);var g=sf.base.isNullOrUndefined(l)?sf.base.closest(this.actionObj.clone,"td").cellIndex:l;if(this.actionObj.index=g,!sf.base.isNullOrUndefined(o)){var m,v,b=o.children[parseInt(g.toString(),10)];this.parent.activeViewOptions.group.resources.length>0&&(this.actionObj.groupIndex=parseInt(b.getAttribute("data-group-index"),10)),this.parent.activeViewOptions.timeScale.enable&&!this.isAllDayDrag?(this.appendCloneElement(this.getEventWrapper(g)),(m=this.parent.getDateFromElement(b)).setMinutes(m.getMinutes()+Math.round(d/u)),v=new Date(m.getTime()),this.actionObj.element.classList.contains("e-all-day-appointment")?v.setMinutes(v.getMinutes()+this.actionObj.slotInterval):v.setMilliseconds(r)):((m=this.parent.getDateFromElement(b)).setDate(m.getDate()-this.daysVariation),m.setHours(s.getHours(),s.getMinutes(),s.getSeconds()),(v=new Date(m.getTime())).setMilliseconds(r),!this.actionObj.element.classList.contains("e-all-day-appointment")&&this.actionObj.clone.classList.contains("e-all-day-appointment")&&(v=h(c(v),1)),this.updateAllDayEvents(m,v,this.parent.activeViewOptions.group.byDate?g:void 0)),this.actionObj.start=new Date(+m),this.actionObj.end=new Date(+v);for(var y=this.getUpdatedEvent(this.actionObj.start,this.actionObj.end,this.actionObj.event),w=0,S=[].slice.call(this.parent.element.querySelectorAll(".e-dynamic-clone"));w<S.length;w++){var O=S[w];sf.base.remove(O)}if(this.multiData.length>0){if(this.isAllDayTarget&&this.isAllDayDrag&&!sf.base.isNullOrUndefined(this.actionObj.isAllDay)&&!this.actionObj.isAllDay){var T=new Date(parseInt(sf.base.closest(this.actionObj.target,"td").getAttribute("data-date"),10)),C=new Date(+T+6e4*T.getTimezoneOffset()).getTime();this.multiData.forEach((function(e){if(t.swagData.push(sf.base.extend({},e,null,!0)),e.isAllDay){e.startTime=new Date(e.startTime.getTime()+(C-t.startTime));var i=new Date(e.startTime),n=new Date(i.setMinutes(i.getMinutes()+t.actionObj.slotInterval));e.endTime=n,e.isAllDay=!1}})),this.startTime=C}if(this.isAllDayTarget&&this.isAllDayDrag&&!sf.base.isNullOrUndefined(this.actionObj.isAllDay)&&this.actionObj.isAllDay&&this.swagData.length>0){this.multiData=this.swagData,this.swagData=[];var D=sf.base.extend({},this.actionObj.event,null,!0);this.startTime=D.startTime.getTime()}var A=void 0,E=void 0;if(this.parent.activeViewOptions.group.resources.length>0){var I=parseInt(this.actionObj.element.getAttribute("data-group-index"),10);if(A=this.actionObj.groupIndex-I,this.parent.activeViewOptions.group.byDate){var x=[].slice.call(this.parent.element.querySelectorAll(".e-content-table tbody tr"));E=Math.max.apply(Math,x.map((function(e){return parseInt(e.getAttribute("data-group-index"),10)})))}else{x=[].slice.call(this.parent.element.querySelectorAll(".e-resource-cells"));E=parseInt(x[x.length-1].getAttribute("data-group-index"),10)}}for(var V=y.startTime.getTime()-this.startTime,j=0;j<this.multiData.length;j++){if(this.updatedData[parseInt(j.toString(),10)]=this.updateMultipleData(this.multiData[parseInt(j.toString(),10)],V),this.parent.activeViewOptions.group.resources.length>0){var H=parseInt(this.actionObj.cloneElement[parseInt(j.toString(),10)].getAttribute("data-group-index"),10)+A;this.updatedData[parseInt(j.toString(),10)].groupIndex=this.getResourceGroupIndex(H,E)}var M=this.getDayIndex(this.updatedData[parseInt(j.toString(),10)]);if(M>=0){O=this.getEventWrapper(M,this.updatedData[parseInt(j.toString(),10)].isAllDay);this.appendCloneElement(O,this.actionObj.cloneElement[parseInt(j.toString(),10)]),this.updateEventHeight(this.updatedData[parseInt(j.toString(),10)],j,M)}else sf.base.isNullOrUndefined(this.actionObj.cloneElement[parseInt(j.toString(),10)].parentNode)||sf.base.remove(this.actionObj.cloneElement[parseInt(j.toString(),10)])}}else this.updateEventHeight(y);this.updateTimePosition(this.actionObj.start,this.updatedData)}}},t.prototype.getResourceGroupIndex=function(e,t){return e<0?0:e>t?t:e},t.prototype.updateMultipleData=function(e,t){var i=sf.base.extend({},e,null,!0);!sf.base.isNullOrUndefined(this.actionObj.isAllDay)&&this.parent.activeViewOptions.timeScale.enable&&(this.isAllDayTarget&&i.isAllDay||!this.isAllDayTarget&&!i.isAllDay)&&(i.isAllDay=this.actionObj.isAllDay);var n=i.endTime.getTime()-i.startTime.getTime();if(i.isAllDay){var s=Math.ceil(t/864e5),r=Math.ceil(n/864e5),a=new Date(i.startTime);i.startTime=c(new Date(a.setDate(a.getDate()+s))),i.endTime=h(i.startTime,r)}else i.startTime=new Date(i.startTime.getTime()+t),i.endTime=new Date(i.startTime.getTime()+n);return i},t.prototype.getDayIndex=function(e){var t=sf.base.extend({},e,null,!0),i=this.parent.getMsFromDate(t.startTime),n="";(n="."+(this.parent.activeViewOptions.timeScale.enable&&t.isAllDay?"e-all-day-appointment-wrapper":"e-work-cells")+'[data-date="'+i+'"]',this.parent.activeViewOptions.group.resources.length>0)&&(n=n+'[data-group-index="'+(isNaN(e.groupIndex)?this.actionObj.groupIndex:e.groupIndex)+'"]');return this.targetTd=this.parent.element.querySelector(n),sf.base.isNullOrUndefined(this.targetTd)?-1:this.targetTd.cellIndex},t.prototype.splitEvent=function(e){var t=[],i=e.startTime,n=e.endTime;if(c(new Date(i.getTime()))<c(new Date(n.getTime()))){var s=this.parent.activeView.getStartHour(),r=this.parent.activeView.getEndHour(),a=d(c(i),s,r),o=d(c(n),s,r),l=sf.base.extend({},e,null,!0);l.endTime=a.endHour,t.push(l);var p=sf.base.extend({},e,null,!0);p.startTime=o.startHour,t.push(p)}else t.push(e);return t},t.prototype.updateEventHeight=function(e,t,i){this.verticalEvent.initializeValues();for(var n=c(sf.base.extend({},e,null,!0).startTime),s=-1,r=this.parent.getIndexOfDate(this.parent.activeView.renderDates,n),a=this.splitEvent(e),o=(e.endTime.getTime()-e.startTime.getTime())/864e5>=1,l=e.isAllDay||o||a.length>2?[e]:a,p=0;p<l.length;p++){if(p>0){var h='.e-day-wrapper[data-date="'+y(c(l[parseInt(p.toString(),10)].startTime)).getTime()+'"]';this.parent.activeViewOptions.group.resources.length>0&&(h=h.concat('[data-group-index = "'+this.actionObj.groupIndex+'"]'));var u=this.parent.element.querySelector(h);u?(r+=1,s=u.cellIndex):r=-1}if(r>=0){var d=l[parseInt(p.toString(),10)],f=d.startTime,g=d.endTime,m=0,v=this.verticalEvent.getHeight(f,g);if(m=this.verticalEvent.getTopValue(f,r),sf.base.isNullOrUndefined(t))0===p?(this.actionObj.clone.style.top=sf.base.formatUnit(m),this.actionObj.clone.style.height=sf.base.formatUnit(v)):this.renderSpannedEvents(d,s,m,v);else{var b=this.actionObj.cellWidth;if(e.isAllDay){m=this.parent.element.querySelector(".e-all-day-row").offsetTop,v=this.getAllDayEventHeight();var w=e.endTime.getTime()-e.startTime.getTime(),S=Math.ceil(w/864e5);S>=0&&(b=S*this.actionObj.cellWidth)}this.actionObj.cloneElement[parseInt(t.toString(),10)]&&(0===p?(this.actionObj.cloneElement[parseInt(t.toString(),10)].style.top=sf.base.formatUnit(m),this.actionObj.cloneElement[parseInt(t.toString(),10)].style.height=sf.base.formatUnit(v),this.actionObj.cloneElement[parseInt(t.toString(),10)].style.width=sf.base.formatUnit(b),this.actionObj.cloneElement[parseInt(t.toString(),10)].style.left=sf.base.formatUnit(0)):this.renderSpannedEvents(d,s,m,v))}}}},t.prototype.renderSpannedEvents=function(e,t,i,n){if(e.startTime.getTime()!==e.endTime.getTime()){var s=this.createAppointmentElement(this.actionObj.groupIndex);sf.base.addClass([s],["e-schedule-event-clone","e-dynamic-clone"]),sf.base.setStyleAttribute(s,{width:"100%",height:n+"px",top:i+"px",border:"0px"});var r=this.actionObj.clone;""!==r.style.backgroundColor&&sf.base.setStyleAttribute(s,{backgroundColor:r.style.backgroundColor}),[].slice.call(this.parent.element.querySelectorAll(".e-appointment-wrapper"))[parseInt(t.toString(),10)].appendChild(s)}},t.prototype.isSpannedEvent=function(e,t){var i=d(t,this.parent.activeView.getStartHour(),this.parent.activeView.getEndHour()),n=sf.base.extend({},e,null,!0);return n.isSpanned={isBottom:!1,isTop:!1},e.startTime.getTime()<i.startHour.getTime()&&(n.startTime=i.startHour,n.isSpanned.isTop=!0),e.endTime.getTime()>i.endHour.getTime()&&(n.endTime=i.endHour,n.isSpanned.isBottom=!0),n},t.prototype.updateAllDayEvents=function(e,t,i){this.parent.eventBase.slots=[];var n=this.getUpdatedEvent(e,t,this.actionObj.event),s=this.parent.activeView.renderDates;this.parent.eventBase.slots.push(this.parent.activeView.renderDates.map((function(e){return+e}))),this.parent.activeViewOptions.group.resources.length>0&&(this.parent.eventBase.slots=[],this.parent.eventBase.slots.push(s.map((function(e){return+e}))));var r=this.parent.eventBase.splitEvent(n,s),a='.e-all-day-cells[data-date="'+this.parent.getMsFromDate(r[0].startTime)+'"]';this.parent.activeViewOptions.group.resources.length>0&&(a=a.concat('[data-group-index = "'+this.actionObj.groupIndex+'"]'));var o=[].slice.call(this.parent.element.querySelectorAll(a));if(o.length>0||!sf.base.isNullOrUndefined(i)){var l=sf.base.isNullOrUndefined(i)?o[0].cellIndex:i;this.appendCloneElement(this.getEventWrapper(l)),this.actionObj.clone.style.width=sf.base.formatUnit(r[0].data.count*this.actionObj.cellWidth)}},t.prototype.swapDragging=function(e){var t=sf.base.closest(this.actionObj.target,"td").cellIndex;if(sf.base.closest(this.actionObj.target,".e-date-header-wrap")&&!sf.base.closest(this.actionObj.clone,".e-all-day-appointment-wrapper")){sf.base.addClass([this.actionObj.clone],"e-all-day-appointment"),this.appendCloneElement(this.getEventWrapper(t)),this.actionObj.isAllDay=!0;var i=this.getAllDayEventHeight(),n=[].slice.call(this.parent.element.querySelectorAll(".e-all-day-cells:first-child"));if(n[0].offsetHeight<i)for(var s=0,r=n;s<r.length;s++){r[s].style.height=(i+2)/12+"em"}sf.base.setStyleAttribute(this.actionObj.clone,{width:sf.base.formatUnit(this.actionObj.cellWidth),height:sf.base.formatUnit(i),top:sf.base.formatUnit(this.parent.element.querySelector(".e-all-day-row").offsetTop)})}if(sf.base.closest(this.actionObj.target,".e-work-cells")&&!sf.base.closest(this.actionObj.clone,".e-day-wrapper")){sf.base.removeClass([this.actionObj.clone],"e-all-day-appointment"),this.appendCloneElement(this.getEventWrapper(t)),this.actionObj.isAllDay=!1;var a=0===this.actionObj.element.offsetHeight?this.actionObj.height:this.actionObj.element.offsetHeight;sf.base.setStyleAttribute(this.actionObj.clone,{left:sf.base.formatUnit(0),height:sf.base.formatUnit(a),width:sf.base.formatUnit(this.actionObj.cellWidth)})}},t.prototype.calculateVerticalDate=function(e){var t=this;if(!(sf.base.isNullOrUndefined(e.target)||e.target&&sf.base.isNullOrUndefined(sf.base.closest(e.target,"tr"))||e.target&&"DIV"===e.target.tagName)){sf.base.isNullOrUndefined(this.parent.options.eventDragArea)&&this.removeCloneElement();var i=sf.base.extend({},this.actionObj.event,null,!0),n=i.endTime.getTime()-i.startTime.getTime(),s=sf.base.closest(this.actionObj.target,"td");if(!sf.base.isNullOrUndefined(s)){var r=s.parentElement;if(this.actionObj.index=r.rowIndex*r.children.length+s.cellIndex,s=[].slice.call(this.parent.element.querySelectorAll(".e-work-cells"))[this.actionObj.index],sf.base.isNullOrUndefined(s))return;var a=this.parent.getDateFromElement(s);if(!sf.base.isNullOrUndefined(a)){this.parent.activeViewOptions.group.resources.length>0&&(this.actionObj.groupIndex=parseInt(s.getAttribute("data-group-index"),10));var o=new Date(a.setDate(a.getDate()-this.daysVariation)),l=new Date(o.getTime()),p=new Date(l.getTime()),h=i.startTime.getTime()-c(i.startTime).getTime();l=new Date(l.getTime()+h),p=new Date(l.getTime()+n),this.actionObj.start=new Date(l.getTime()),this.actionObj.end=new Date(p.getTime())}}var u=this.getUpdatedEvent(this.actionObj.start,this.actionObj.end,this.actionObj.event);if(sf.base.isNullOrUndefined(this.parent.options.eventDragArea))for(var d=0,f=[].slice.call(this.parent.element.querySelectorAll(".e-schedule-event-clone"));d<f.length;d++){var g=f[d];sf.base.remove(g)}var m="Vertical"===this.parent.activeViewOptions.orientation&&this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive||"Horizontal"===this.parent.activeViewOptions.orientation&&(0===this.parent.activeViewOptions.group.resources.length||this.parent.uiStateValues.isGroupAdaptive);if(this.multiData&&this.multiData.length>0){var v=c(new Date(u.startTime));h=v.getTime()-this.startTime;"TimelineYear"===this.parent.options.currentView&&this.parent.activeViewOptions.group.resources.length>0&&(h=12*(v.getFullYear()-new Date(this.startTime).getFullYear()),h-=new Date(this.startTime).getMonth(),h+=v.getMonth());var b=void 0,y=void 0;if(this.parent.activeViewOptions.group.resources.length>0){var w=parseInt(this.actionObj.element.getAttribute("data-group-index"),10);if(b=this.actionObj.groupIndex-w,this.parent.activeViewOptions.group.byDate&&"TimelineYear"!==this.parent.options.currentView){var S=[].slice.call(this.parent.element.querySelectorAll(".e-content-table tbody tr"));y=Math.max.apply(Math,S.map((function(e){return parseInt(e.getAttribute("data-group-index"),10)})))}else{S=[].slice.call(this.parent.element.querySelectorAll(".e-resource-cells"));y=parseInt(S[S.length-1].getAttribute("data-group-index"),10)}}for(var O=function(e){T.updatedData[parseInt(e.toString(),10)]=T.updateMultipleVerticalDate(T.multiData[parseInt(e.toString(),10)],h);var i=T.cloneElements.find((function(i){return i.getAttribute("data-guid")===t.updatedData[parseInt(e.toString(),10)].guid}));if(T.parent.activeViewOptions.group.resources.length>0&&i){var n=parseInt(i.getAttribute("data-group-index"),10)+b;T.updatedData[parseInt(e.toString(),10)].groupIndex=T.getResourceGroupIndex(n,y)}"TimelineYear"===T.parent.options.currentView?T.yearEventsRendering(T.updatedData[parseInt(e.toString(),10)],m,i):T.dynamicEventsRendering(T.updatedData[parseInt(e.toString(),10)],i)},T=this,C=0;C<this.multiData.length;C++)O(C)}else"TimelineYear"===this.parent.options.currentView?this.yearEventsRendering(u,m,null):this.dynamicEventsRendering(u)}},t.prototype.yearEventsRendering=function(e,t,i){if(t){var n=h(e.endTime,-1);if(0===this.parent.activeViewOptions.group.resources.length){for(var s=this.getMonthDiff(e.startTime,n),r=0;r<=s;r++){var a=this.getEventCount(e,this.actionObj.start.getMonth()+r);this.dynamicYearlyEventsRendering(a,!1,i,t)}return}e.count=this.getMonthDiff(e.startTime,n)+1}this.dynamicYearlyEventsRendering(e,!1,i,t)},t.prototype.updateMultipleVerticalDate=function(e,t){var i=sf.base.extend({},e,null,!0),n=i.endTime.getTime()-i.startTime.getTime(),s=new Date(i.startTime);if("TimelineYear"===this.parent.options.currentView&&this.parent.activeViewOptions.group.resources.length>0)i.startTime=new Date(s.setMonth(s.getMonth()+t));else{var r=Math.ceil(t/864e5);i.startTime=new Date(s.setDate(s.getDate()+r))}return i.endTime=new Date(i.startTime.getTime()+n),i},t.prototype.calculateTimelineTime=function(e){var t,i=sf.base.extend({},this.actionObj.event,null,!0),n=i.endTime.getTime()-i.startTime.getTime(),s=this.parent.options.enableRtl?Math.abs(this.actionObj.clone.offsetLeft)-this.actionObj.clone.offsetWidth:parseInt(this.actionObj.clone.style.left,10);s=Math.floor(s/this.actionObj.cellWidth)*this.actionObj.cellWidth,this.parent.options.enableRtl&&(t=Math.abs(parseInt(this.actionObj.clone.style.right,10)),this.actionObj.clone.style.right=sf.base.formatUnit(t)),s=this.getOffsetValue(s,t);var r=this.getColumnIndex(s),a=this.parent.element.querySelector(".e-content-wrap").getBoundingClientRect().right,o=this.parent.isTimelineView()&&!this.parent.options.enableRtl&&this.actionObj.pageX>this.actionObj.clone.getBoundingClientRect().right&&!this.isMorePopupOpened&&!(this.actionObj.pageX>a);!this.isCursorAhead&&!o||this.isStepDragging||(this.isCursorAhead=!0);var l=Math.floor((this.actionObj.pageX-this.actionObj.clone.getBoundingClientRect().left)/this.actionObj.cellWidth);this.parent.options.enableRtl&&(l=Math.abs(Math.floor((this.actionObj.pageX-this.actionObj.clone.getBoundingClientRect().right)/this.actionObj.cellWidth))-1),this.cursorPointIndex<0&&this.cursorIndex(e,i,s,l);var p=this.parent.getContentTable().querySelector("tr"),h=this.getCursorCurrentIndex(r,l,p);h=h<0?0:h;var u=this.isHeaderRows?new Date(this.timelineEventModule.dateRender[parseInt(h.toString(),10)].getTime()):this.parent.getDateFromElement(p.children[parseInt(h.toString(),10)]);if(this.isStepDragging){var d=this.getWidthDiff(p,h);if(0!==d){var f=Math.ceil(d/this.widthPerMinute);u.setMinutes(u.getMinutes()+f*this.actionObj.interval),u.setMinutes(u.getMinutes()-this.minDiff);var g=6e4*this.actionObj.interval;f=Math.abs(u.getTime()-this.actionObj.start.getTime())/g;var m=Math.trunc(f);m!==f&&(f=m*g*(u>this.actionObj.start?1:-1),u=new Date(this.actionObj.start.getTime()+f))}else u=this.actionObj.start}else if(this.isCursorAhead||o){var v=this.isTimelineDayProcess?1440:this.actionObj.slotInterval;u.setMinutes(u.getMinutes()+v),u.setMilliseconds(-n),u.getTime()===c(u).getTime()&&0===u.getMinutes()&&0===n&&u.setMinutes(-v)}else u.setMinutes(u.getMinutes()-this.cursorPointIndex*(this.isTimelineDayProcess?1440:this.actionObj.slotInterval));if(this.isStepDragging||(u=this.calculateIntervalTime(u)),this.isTimelineDayProcess){var b=i.startTime;u.setHours(b.getHours(),b.getMinutes(),b.getSeconds())}if(this.parent.options.eventDragArea){var y=this.parent.getDateFromElement(e.target);sf.base.isNullOrUndefined(y)||(u=y)}var w=new Date(u.getTime());w.setMilliseconds(n);var S=[this.getUpdatedEvent(u,w,this.actionObj.event)];if(this.multiData.length>0){for(var O=S[0].startTime.getTime()-this.startTime,T=0;T<this.multiData.length;T++)this.updatedData[parseInt(T.toString(),10)]=this.updateMultipleData(this.multiData[parseInt(T.toString(),10)],O);S=this.updatedData}if(this.parent.activeViewOptions.group.resources.length>0){var C=this.parent.element.querySelector(".e-resource-column-wrap");this.parent.virtualScrollModule?parseInt(C.getAttribute("data-expanded-index"),10):parseInt(C.getAttribute("data-rendered-index"),10);var D=parseInt(this.actionObj.element.getAttribute("data-group-index"),10);this.calculateResourceGroupingPosition(e),this.actionObj.groupIndex-D}for(var A=0;A<S.length;A++){var E=this.timelineEventModule.splitEvent(S[parseInt(A.toString(),10)],this.timelineEventModule.dateRender);if(0===E.length)return;var I=E[0].data,x=this.getStartTime(E[0],I),V=this.getEndTime(E[0],I),j=this.timelineEventModule.getEventWidth(x,V,i.isAllDay,I.count),H=this.parent.getIndexOfDate(this.timelineEventModule.dateRender,c(new Date(x.getTime())));H=H<0?0:H;var M=this.timelineEventModule.getPosition(x,V,i.isAllDay,H),k=this.multiData.length>0?this.actionObj.cloneElement[parseInt(A.toString(),10)]:this.actionObj.clone;if("TimelineMonth"===this.parent.options.currentView||!this.parent.activeViewOptions.timeScale.enable){x=c(x);var q='.e-work-cells[data-date="'+this.parent.getMsFromDate(x)+'"]',P=this.parent.element.querySelector(q);sf.base.isNullOrUndefined(P)&&(j=0)}this.parent.options.enableRtl?k.style.right=sf.base.formatUnit(M):k.style.left=sf.base.formatUnit(M),this.isMorePopupOpened||(k.style.width=sf.base.formatUnit(j)),this.parent.activeViewOptions.group.resources.length>0&&this.setResourceTopPosition(e,k),this.actionObj.start=new Date(u.getTime()),this.actionObj.end=new Date(w.getTime()),this.updateTimePosition(this.actionObj.start,this.updatedData)}},t.prototype.getStartTime=function(e,t){var i=e.startTime,n=d(i,this.timelineEventModule.startHour,this.timelineEventModule.endHour);return i=n.startHour.getTime()>=t.startTime?n.startHour:n.endHour.getTime()<=t.startTime?this.getNextDay(n.startHour,t):t.startTime,t.trimStartTime=e.isAllDay?n.startHour:t.startTime,i},t.prototype.getNextDay=function(e,t){for(var i,n=1;n<=this.timelineEventModule.dateRender.length;n++)if(i=h(e,n),-1!==this.parent.getIndexOfDate(this.timelineEventModule.dateRender,c(new Date(e.getTime()))))return t.count=t.count-1,i;return i},t.prototype.getEndTime=function(e,t){var i=e.endTime,n=d(i,this.timelineEventModule.startHour,this.timelineEventModule.endHour);return"TimelineMonth"===this.parent.options.currentView||!this.parent.activeViewOptions.timeScale.enable||this.parent.activeViewOptions.headerRows.length>0&&"Hour"!==this.parent.activeViewOptions.headerRows.slice(-1)[0].option?i=t.endTime:(i=t.endTime,n.endHour.getTime()<=t.endTime&&(i=n.endHour),n.startHour.getTime()>=t.endTime.getTime()&&!e.isAllDay&&(i=this.getPreviousDay(n.startHour,n.endHour,t))),t.trimEndTime=e.isAllDay?n.endHour:t.endTime,i},t.prototype.getPreviousDay=function(e,t,i){for(var n=1;n<=this.timelineEventModule.dateRender.length;n++){var s=h(t,-n);if(-1!==this.parent.getIndexOfDate(this.timelineEventModule.dateRender,c(new Date(e.getTime())))){(s=c(new Date(s.getTime()))).setHours(t.getHours(),t.getMinutes(),t.getSeconds());var r=i.count,a=i.endTime;return i.count=0!==a.getHours()||0!==a.getMinutes()?r-1:r,s}}return i.endTime},t.prototype.getOffsetValue=function(e,t){if(this.scrollEdges.left||this.scrollEdges.right){var i=this.parent.element.querySelector(".e-content-wrap");this.parent.options.enableRtl?(t=i.offsetWidth-i.scrollLeft,this.scrollEdges.right?t=t-i.offsetWidth+this.actionObj.clone.offsetWidth-(this.actionObj.clone.offsetWidth-this.widthUptoCursorPoint):(t+=this.widthUptoCursorPoint)-this.widthUptoCursorPoint>=i.scrollWidth&&(this.actionObj.clone.style.width=sf.base.formatUnit(this.actionObj.clone.offsetWidth-this.widthUptoCursorPoint+this.actionObj.cellWidth),t=i.scrollLeft-i.scrollWidth),this.actionObj.clone.style.left=sf.base.formatUnit(t)):(this.scrollEdges.left?(e=i.scrollLeft-this.widthUptoCursorPoint+this.actionObj.cellWidth,i.scrollLeft+i.offsetWidth>=i.offsetWidth?i.scrollLeft=i.scrollLeft-1:0===this.actionObj.clone.offsetLeft&&(e=i.scrollLeft)):e=i.scrollLeft+i.offsetWidth-this.actionObj.clone.offsetWidth+(this.actionObj.clone.offsetWidth-this.widthUptoCursorPoint),e=e<0?0:e,this.actionObj.clone.style.left=sf.base.formatUnit(e))}return e},t.prototype.getWidthDiff=function(e,t){var i=this.scrollArgs.element.getBoundingClientRect();if(i.left<=this.actionObj.pageX&&i.right>=this.actionObj.pageX){var n=e.children[parseInt(t.toString(),10)].offsetLeft,s=this.actionObj.pageX-i.left;return this.parent.options.enableRtl?n+this.actionObj.cellWidth-(this.scrollArgs.element.scrollLeft+s):this.scrollArgs.element.scrollLeft+s-n}return 0},t.prototype.getColumnIndex=function(e){var t=Math.floor(e/this.actionObj.cellWidth);return this.isHeaderRows?t:this.getIndex(t)},t.prototype.getCursorCurrentIndex=function(e,t,i){var n=e+t;if(this.isHeaderRows){var s=Math.floor(i.offsetWidth/this.actionObj.cellWidth);return n>s-1?s-1:n}return n>i.children.length-1?i.children.length-1:n},t.prototype.cursorIndex=function(e,t,i,n){var s=sf.base.closest(e.target,".e-work-cells");if(sf.base.isNullOrUndefined(s)||this.isMorePopupOpened)this.cursorPointIndex=0;else{var r=this.parent.getDateFromElement(s);if(this.isHeaderRows){var a=Math.floor(i/this.actionObj.cellWidth);r=new Date(this.timelineEventModule.dateRender[a+n].getTime())}var o=r.getTime()-new Date(t.startTime).getTime();if(this.isTimelineDayProcess)this.cursorPointIndex=Math.abs(Math.ceil(o/864e5));else{var l=Math.floor(o/6e4/(this.actionObj.slotInterval/this.actionObj.cellWidth));this.cursorPointIndex=Math.floor(l/this.actionObj.cellWidth),this.cursorPointIndex=this.cursorPointIndex<0?0:this.cursorPointIndex}}},t.prototype.setResourceTopPosition=function(e,t){var i=this.parent.element.querySelectorAll(".e-appointment-container:not(.e-hidden)").item(this.actionObj.index),n=i.querySelector(".e-appointment-wrapper");n||(n=sf.base.createElement("div",{className:"e-appointment-wrapper"}),i.appendChild(n)),this.appendCloneElement(n,t);var s=0;if(this.parent.options.rowAutoHeight){var r=this.getCursorElement(e);r&&(s=r.offsetParent.classList.contains("e-appointment")?r.offsetParent.offsetTop:s)}t.style.top=sf.base.formatUnit(s)},t.prototype.calculateResourceGroupingPosition=function(e){var t=this.parent.element.querySelector(".e-content-wrap"),i=[].slice.call(this.parent.element.querySelectorAll(".e-content-wrap .e-content-table tr:not(.e-hidden)")),n=s(t.querySelector("table"));n=sf.base.isNullOrUndefined(n)?0:n;var r=this.parent.options.rowAutoHeight?~~(t.querySelector("table").offsetHeight/i.length):this.actionObj.cellHeight,a=Math.floor(Math.floor(this.actionObj.Y+(t.scrollTop-n-window.scrollY)-t.getBoundingClientRect().top)/r);a=a<0?0:a>i.length-1?i.length-1:a,this.actionObj.index=a;var o=sf.base.closest(e.target,"td");this.actionObj.groupIndex=o&&!isNaN(parseInt(o.getAttribute("data-group-index"),10))?parseInt(o.getAttribute("data-group-index"),10):this.actionObj.groupIndex},t.prototype.appendCloneElement=function(e,t){void 0===t&&(t=null),t=sf.base.isNullOrUndefined(t)?this.actionObj.clone:t,this.parent.options.eventDragArea?document.querySelector(this.parent.options.eventDragArea).appendChild(t):e.appendChild(t)},t.prototype.getEventWrapper=function(e,t){var i;if(sf.base.isNullOrUndefined(t)&&(t=this.actionObj.clone.classList.contains("e-all-day-appointment")),this.parent.activeViewOptions.timeScale.enable){var n=t?".e-all-day-appointment-wrapper":".e-appointment-wrapper";i=this.parent.element.querySelectorAll(n).item(e)}else{var s=this.parent.element.querySelectorAll(".e-work-cells").item(e);(i=s.querySelector(".e-appointment-wrapper"))||(i=sf.base.createElement("div",{className:"e-appointment-wrapper"}),s.appendChild(i))}return i},t.prototype.getAllDayEventHeight=function(){var e=sf.base.createElement("div",{className:"e-appointment"});this.parent.element.querySelector(".e-all-day-appointment-wrapper").appendChild(e);var t=e.offsetHeight;return sf.base.remove(e),t},t.prototype.isAllowDrop=function(e){if(!this.actionObj.excludeSelectors)return!1;for(var t=!1,i=0,n=this.actionObj.excludeSelectors.split(",");i<n.length;i++){var s=n[i];if(e.target.classList.contains(s)){t=!0;break}}return t},t}(ie),oe=function(){function e(e){this.translateY=0,this.itemSize=60,this.bufferCount=3,this.renderedLength=0,this.averageRowHeight=0,this.startIndex=0,this.isResourceCell=!1,this.previousTop=0,this.isInitialized=!0,this.parent=e}return e.prototype.getRenderedCount=function(){var e=this.parent.element.querySelector(".e-content-table");return this.renderedLength=e.querySelector("tbody").children.length,this.renderedLength},e.prototype.triggerScrolling=function(){this.parent.dotNetRef.invokeMethodAsync("OnContentUpdate",this.startIndex)},e.prototype.setTranslateValue=function(){this.setItemSize();var e=this.parent.element.querySelector(".e-content-table");if(this.isHorizontalScroll){var t=this.parent.element.querySelector(".e-virtual-track");if(t){var i=this.parent.element.querySelector(".e-date-header-wrap tbody tr");t.style.width=i.offsetWidth+"px"}e.classList.contains("e-virtual-relative")&&sf.base.removeClass([e],"e-virtual-relative"),sf.base.setStyleAttribute(e,{transform:"translateX("+this.translateY+"px)"});var n=this.parent.element.querySelector(".e-event-table");n&&sf.base.setStyleAttribute(n,{transform:"translateX("+this.translateY+"px)"})}else{var s=this.parent.element.querySelector(".e-resource-column-wrap"),r=this.parent.element.querySelector(".e-content-wrap"),a=this.parent.element.querySelector(".e-event-table"),o=this.parent.element.querySelector(".e-current-timeline");this.setVirtualTrackHeight(s),e.classList.contains("e-virtual-relative")&&sf.base.removeClass([e],"e-virtual-relative"),this.setTranslate(s,r,a,o),r.scrollTop=s.scrollTop}},e.prototype.setVirtualTrackHeight=function(e){var t=this.parent.element.querySelector(".e-virtual-track");if(t){var i=parseInt(e.getAttribute("data-expanded-count"),10);t.style.height=i*this.itemSize+"px"}},e.prototype.updateVirtualScrollHeight=function(){var e=this.parent.element.querySelector(".e-virtual-track"),t=this.parent.element.querySelector(".e-resource-column-wrap"),i=parseInt(t.getAttribute("data-rendered-index"),10),n=parseInt(t.getAttribute("data-expanded-index"),10),s=parseInt(t.getAttribute("data-expanded-count"),10);if(i!==n){var r=this.parent.element.querySelector(".e-content-table");this.renderedLength=r.querySelector("tbody").children.length,e.style.height=r.offsetHeight+(s-this.renderedLength)*r.offsetHeight/this.renderedLength+"px"}else e.style.height="";this.averageRowHeight=e.offsetHeight/s},e.prototype.updateVirtualTrackHeight=function(e){var t=this.parent.element.querySelector(".e-resource-column-wrap"),i=parseInt(t.getAttribute("data-rendered-index"),10),n=parseInt(t.getAttribute("data-expanded-index"),10),s=this.getRenderedCount()+(n-i),r=parseInt(t.getAttribute("data-expanded-count"),10);s=s>r?r:s,e.style.height=s*this.itemSize+"px"},e.prototype.setItemSize=function(){if(this.isHorizontalScroll){var e=this.parent.element.querySelector(".e-work-cells");this.itemSize=e.getBoundingClientRect().width||this.itemSize}else this.itemSize=n(this.parent.activeView.element,"e-work-cells")||this.itemSize},e.prototype.beforeInvoke=function(e,t,i,n){var s=this;if(window.clearTimeout(this.timeValue),this.timeValue=window.setTimeout((function(){s.triggerScrolling()}),250),this.isHorizontalScroll)return this.setTranslateX(),this.updateContent(),void(this.previousTop=t.scrollLeft);this.updateContent(),document.activeElement&&document.activeElement.classList.contains("e-resource-cells")&&(this.isResourceCell=!0,this.focusedEle=document.activeElement,this.parent.element.focus()),this.setTranslate(e,t,i,n),this.previousTop=t.scrollTop},e.prototype.setTranslateX=function(){var e,t=this.parent.element.querySelector(".e-content-table"),i=t.querySelector("tbody tr").children.length;if(this.parent.activeViewOptions.group.byDate)e=this.parent.element.querySelector(".e-date-header-wrap tbody tr");else{var n=[].slice.call(this.parent.element.querySelectorAll(".e-date-header-wrap .e-resource-cells"));e=n[n.length-1].parentElement}for(var s=e.childElementCount,a=0,o={startIndex:void 0,endIndex:void 0},l=0;l<s;l++){if(a+=parseInt(e.children[parseInt(l.toString(),10)].getAttribute("colspan"),10),this.startIndex<a&&sf.base.isNullOrUndefined(o.startIndex)&&(o.startIndex=a-parseInt(e.children[parseInt(l.toString(),10)].getAttribute("colspan"),10),l===s-1)){o.endIndex=a;break}if(this.startIndex+this.renderedLength<a&&sf.base.isNullOrUndefined(o.endIndex)){o.endIndex=a;break}}var c=Math.abs(r(t));if(i+o.startIndex!==o.endIndex||o.startIndex!==c/this.itemSize){var p=o.startIndex*this.itemSize;if(this.isContentUpdate=!0,c!==p){this.translateY=this.parent.options.enableRtl?-p:p;var h=this.parent.element.querySelector(".e-event-table");h&&sf.base.setStyleAttribute(h,{transform:"translateX("+this.translateY+"px)"}),sf.base.setStyleAttribute(t,{transform:"translateX("+this.translateY+"px)"})}}},e.prototype.virtualScrolling=function(){this.parent.onClosePopup(),this.parent.morePopup&&this.parent.morePopup.hide();var e=this.parent.element.querySelector(".e-content-wrap");if(this.isHorizontalScroll){this.isContentUpdate=!1;var t=this.itemSize*this.bufferCount;Math.abs(e.scrollLeft)-Math.abs(this.translateY)<=0?(this.leftScroll(e),this.previousTop!==e.scrollLeft&&this.beforeInvoke(null,e,null,null)):Math.abs(e.scrollLeft)-Math.abs(this.translateY)>t&&(this.rightScroll(e),this.previousTop!==e.scrollLeft&&this.beforeInvoke(null,e,null,null))}else{var i=this.parent.element.querySelector(".e-resource-column-wrap"),n=this.parent.element.querySelector(".e-event-table"),s=this.parent.element.querySelector(".e-current-timeline"),r=this.parent.element.querySelector(".e-content-table");this.renderedLength=i.querySelector("tbody").children.length;var a=parseInt(i.querySelector("tbody td").getAttribute("data-group-index"),10),o=this.parent.options.rowAutoHeight?r.offsetHeight-e.offsetHeight:this.bufferCount*this.itemSize;sf.base.addClass([e],"e-transition"),this.setItemSize(),e.scrollTop-this.translateY<=0&&!this.isInitialized?(this.upScroll(e,a),this.previousTop!==e.scrollTop&&(this.isDownScroll=!1,this.beforeInvoke(i,e,n,s))):e.scrollTop-this.translateY>o&&(this.downScroll(e),this.previousTop!==e.scrollTop&&(this.isDownScroll=!0,this.beforeInvoke(i,e,n,s))),this.isInitialized=!1}},e.prototype.upScroll=function(e,t){var i=~~(e.scrollTop/this.itemSize);if(this.parent.options.rowAutoHeight&&(i=i>t?t-this.bufferCount:i),i=i>0?i:0,0===t)this.translateY=e.scrollTop;else{var n=this.parent.options.rowAutoHeight?this.averageRowHeight:this.itemSize;this.translateY=e.scrollTop-this.bufferCount*n>0?e.scrollTop-this.bufferCount*n:0}this.startIndex=i},e.prototype.downScroll=function(e){var t=this.parent.element.querySelector(".e-resource-column-wrap");if(t.getAttribute("data-rendered-index")===t.getAttribute("data-expanded-index"))return null;var i=this.parent.options.rowAutoHeight?this.averageRowHeight:this.itemSize,n=~~(e.scrollTop/i),s=n+this.renderedLength,r=parseInt(t.getAttribute("data-expanded-count"),10);s=s>r?n+(r-n):s,this.translateY=e.scrollTop,this.translateY>r*i-this.renderedLength*i&&(this.translateY=r*i-this.renderedLength*i),this.startIndex=s-this.renderedLength},e.prototype.leftScroll=function(e){var t=~~(Math.abs(e.scrollLeft)/this.itemSize);t=t>0?t:0,this.translateY=t*this.itemSize,this.parent.options.enableRtl&&(this.translateY=-this.translateY),this.startIndex=t},e.prototype.rightScroll=function(e){var t=[].slice.call(this.parent.element.querySelectorAll(".e-date-header-wrap tbody tr"));t=[].slice.call(t[t.length-1].children);var i=~~(Math.abs(e.scrollLeft)/this.itemSize)+this.renderedLength;i=i>t.length-1?t.length:i,this.startIndex=i-this.renderedLength,this.translateY=this.startIndex*this.itemSize,this.parent.options.enableRtl&&(this.translateY=-this.translateY)},e.prototype.setTranslate=function(e,t,i,n){sf.base.setStyleAttribute(e.querySelector("table"),{transform:"translateY("+this.translateY+"px)"}),sf.base.setStyleAttribute(t.querySelector("table"),{transform:"translateY("+this.translateY+"px)"}),sf.base.setStyleAttribute(i,{transform:"translateY("+this.translateY+"px)"}),sf.base.isNullOrUndefined(n)||sf.base.setStyleAttribute(n,{transform:"translateY("+this.translateY+"px)"})},e.prototype.setTabIndex=function(){var e,t=this.parent.element.querySelector(".e-resource-column-wrap"),i=[].slice.call(this.parent.element.querySelectorAll(".e-resource-cells"));if(i&&t){var n=t.getBoundingClientRect().top;i.forEach((function(e){e.getBoundingClientRect().top>=n?e.setAttribute("tabindex","0"):e.setAttribute("tabindex","-1")}))}this.focusedEle&&(e=this.parent.element.querySelector('.e-resource-cells[tabindex="0"][data-group-index="'+this.focusedEle.getAttribute("data-group-index")+'"]')),e||(e=this.parent.element.querySelector('.e-resource-cells[tabindex="0"]')),this.isResourceCell&&e&&(e.focus(),this.isResourceCell=!1)},e.prototype.hideAppointments=function(){[].slice.call(this.parent.element.querySelectorAll(".e-appointment:not(.e-schedule-event-clone),.e-more-indicator")).forEach((function(e){e.style.visibility="hidden"}))},e.prototype.updateContent=function(){if(this.parent.activeViewOptions.enableVirtualMask){if(!this.isContentUpdate&&this.isHorizontalScroll)return;this.hideAppointments();var e=this.parent.element.querySelector(".e-table-wrap");e&&!e.classList.contains("e-virtual-mask")&&sf.base.addClass([e],"e-virtual-mask")}else if(this.isHorizontalScroll||"TimelineYear"===this.parent.options.currentView)this.isHorizontalScroll&&this.isContentUpdate&&this.hideAppointments();else{var t=[].slice.call(this.parent.element.querySelector(".e-event-table").children);if(t.length<=0)return;var i=parseInt(t[0].getAttribute("data-group-index"),10),n=parseInt(t[t.length-1].getAttribute("data-group-index"),10);if(this.isDownScroll&&!(i<=this.startIndex&&this.startIndex<=n)||!this.isDownScroll&&this.startIndex+this.renderedLength<=i&&this.startIndex+this.renderedLength<=n)for(var s=0;s<t.length;s++){[].slice.call(t[parseInt(s.toString(),10)].children).forEach((function(e){e.style.visibility="hidden"}))}}},e.prototype.getResourceCount=function(){var e=this.isHorizontalScroll?this.parent.element.clientWidth:this.parent.element.clientHeight;return this.renderedLength=Math.ceil(e/this.itemSize)+this.bufferCount,this.renderedLength},e.prototype.destroy=function(){var e=this.parent.element.querySelector(".e-resource-column-wrap table"),t=this.parent.element.querySelector(".e-event-table"),i=this.parent.element.querySelector(".e-current-timeline"),n=this.parent.element.querySelector(".e-content-table");e&&(e.style.transform="none"),n&&(n.style.transform="none"),t&&(t.style.transform="none"),i&&(i.style.transform="none")},e}(),le=function(){function e(e){this.parent=e}return e.prototype.inlineEdit=function(e,n,s,r,a){if(void 0===s&&(s=null),"Cell"===e){var o=this.parent.element.querySelector(".e-more-popup-wrapper");o&&o.classList.contains(t)&&this.parent.morePopup.hide(),!(this.parent.currentCell.classList.contains("e-work-cells")||this.parent.currentCell.classList.contains("e-all-day-cells"))||0!==this.parent.getSelectedCells().length&&"TimelineYear"!==this.parent.options.currentView||this.parent.selectCell(this.parent.currentCell),this.removeInlineAppointmentElement(),this.eventWrapColor=a,this.cellEdit()}else{if(n)return;var l=this.parent.element.querySelector('.e-appointment[data-guid="'+s+'"]');this.parent.element.querySelector(".e-more-popup-wrapper")&&this.parent.element.querySelector(".e-more-popup-wrapper").classList.contains("e-popup-open")&&(l=this.parent.element.querySelector('.e-more-popup-wrapper .e-appointment[data-guid="'+s+'"]')),this.parent.element.querySelector(".e-inline-subject")!==l.querySelector(".e-inline-subject")&&this.removeInlineAppointmentElement(),this.eventEdit(l),r&&(this.parent.eventBase.removeSelectedAppointmentClass(),sf.base.addClass([l],i))}},e.prototype.cellEdit=function(){var e=this.generateEventData(),t=this.parent.activeCellsData.element.cellIndex,i=this.getEventDaysCount(e);i>1&&(i=Math.round(i),t-=--i);var n=new Date(""+e.startTime).getTime(),s=new Date(""+e.endTime).getTime(),r=e.groupIndex||0;"Day"===this.parent.options.currentView||"Week"===this.parent.options.currentView||"WorkWeek"===this.parent.options.currentView?this.createVerticalViewInline(e,t):"Month"===this.parent.options.currentView?this.createMonthViewInline(e,r,n,s):this.createTimelineViewInline(e,n,s,r);var a=this.parent.element.querySelector(".e-inline-subject");a&&a.focus()},e.prototype.createInlineAppointmentElement=function(){var e=sf.base.createElement("div",{className:"e-appointment e-inline-appointment"}),t=sf.base.createElement("div",{className:"e-appointment-details"});e.appendChild(t);var i=sf.base.createElement("input",{className:"e-inline-subject"});return t.appendChild(i),""!==this.eventWrapColor&&sf.base.setStyleAttribute(e,{backgroundColor:this.eventWrapColor}),e},e.prototype.removeInlineAppointmentElement=function(){var e=[].slice.call(this.parent.element.querySelectorAll(".e-inline-appointment"));e.length>0&&e.forEach((function(e){return sf.base.remove(e)}));var t=this.parent.element.querySelector(".e-inline-subject");if(t){var i=sf.base.closest(t,".e-appointment");sf.base.removeClass([i.querySelector(".e-subject")],"e-disable"),sf.base.remove(t)}},e.prototype.createVerticalViewInline=function(e,t){var i=this.getEventDaysCount(e),n=new k(this.parent);if(n.initializeValues(),i>=1){n.allDayElement=[].slice.call(this.parent.element.querySelectorAll(".e-all-day-cells"));var s=[].slice.call(this.parent.element.querySelectorAll(".e-all-day-appointment")),r=0;s.length>0&&(r=Math.floor(this.parent.element.querySelector(".e-all-day-row").getBoundingClientRect().height/s[0].offsetHeight)-1),n.allDayLevel=r,n.renderAllDayEvents(e,t)}else n.renderNormalEvents(e,t)},e.prototype.createMonthViewInline=function(e,t,i,s){var r=this.getEventDaysCount(e),a=this.parent.eventBase.cloneEventObject(e,i,s,r,!1,!1),o=new L(this.parent),l=this.parent.activeView.renderDates.slice(0),c=this.parent.activeView.renderDates,p=this.parent.activeViewOptions.workDays;if(this.parent.activeCellsData.groupIndex>=0?o.workCells=[].slice.call(this.parent.element.querySelectorAll('.e-work-cells[data-group-index="'+t+'"]')):o.workCells=[].slice.call(this.parent.element.querySelectorAll(".e-work-cells")),this.parent.activeViewOptions.group.resources.length>0){var h=0;o.workCells.length>0&&(l=[]);for(var u=0,d=o.workCells;u<d.length;u++){var f=d[u];l.push(this.parent.getDateFromElement(f)),p.push(l[parseInt(h.toString(),10)].getDay()),h++}}o.dateRender=l,o.cellWidth=o.workCells[0].offsetWidth,o.cellHeight=o.workCells[0].offsetHeight,o.eventHeight=n(this.parent.element,"e-appointment"),o.getSlotDates(p);for(var g=o.getRenderedDates(c),m=0,v=o.splitEvent(a,g||c);m<v.length;m++){var b=v[m];o.renderEvents(b,t)}this.parent.element.querySelector(".e-inline-subject").focus()},e.prototype.createTimelineViewInline=function(e,t,i,s){var r=this.getEventDaysCount(e),a=this.parent.eventBase.cloneEventObject(e,t,i,r,!1,!1),o=new N(this.parent,this.parent.activeViewOptions.timeScale.enable?"hour":"day");o.dateRender=this.parent.activeView.renderDates,o.eventContainers=[].slice.call(this.parent.element.querySelectorAll(".e-appointment-container")),this.parent.activeCellsData.groupIndex>=0?o.workCells=[].slice.call(this.parent.element.querySelectorAll('.e-work-cells[data-group-index="'+s+'"]')):o.workCells=[].slice.call(this.parent.element.querySelectorAll(".e-work-cells"));var l=this.parent.element.querySelector(".e-work-cells");o.inlineValue=this.parent.options.allowInline,o.cellWidth=l.offsetWidth,o.cellHeight=l.offsetHeight;var c=0===this.parent.element.querySelectorAll(".e-content-table tbody tr").length?0:this.parent.element.querySelectorAll(".e-content-table tbody tr")[0].children.length;o.slotsPerDay=c/o.dateRender.length,o.eventHeight=n(o.parent.element,"e-appointment"),o.renderEvents(a,s)},e.prototype.getEventDaysCount=function(e){var t=e.startTime,i=e.endTime;return Math.abs(i.getTime()-t.getTime())/864e5},e.prototype.generateEventData=function(e){var t=this.parent.element.querySelector(".e-inline-subject"),i=t?t.value:e?e.innerHTML:"",n={};return n.subject=i,n.startTime=this.parent.activeCellsData.startTime,n.endTime=this.parent.activeCellsData.endTime,n.isAllDay=this.parent.activeCellsData.isAllDay,this.parent.activeCellsData.groupIndex>=0&&(n.groupIndex=this.parent.activeCellsData.groupIndex),n},e.prototype.eventEdit=function(e){var t,i=this.parent.element.querySelector(".e-inline-subject");if(i)t=i.value;else{var n=e.querySelector(".e-subject"),s=e.querySelector(".e-time");if(t=n.innerText,i=sf.base.createElement("input",{className:"e-inline-subject",attrs:{value:t}}),sf.base.addClass([n],"e-disable"),sf.base.closest(e,".e-more-popup-wrapper"))e.insertBefore(i,n);else if(["Agenda","MonthAgenda"].indexOf(this.parent.options.currentView)>-1){var r=e.querySelector(".e-subject-wrap");r.insertBefore(i,r.firstChild)}else{var a=["TimelineDay","TimelineWeek","TimelineWorkWeek","TimelineMonth"].indexOf(this.parent.options.currentView)>-1?".e-inner-wrap":".e-appointment-details";e.querySelector(a).insertBefore(i,s)}i.focus()}i.setSelectionRange(t.length,t.length)},e}(),ce=function(){function e(e,t,i,n,s,r){window.sfBlazor=window.sfBlazor,this.element=t,this.dotNetRef=s,this.options=i,this.activeViewOptions=n,this.dataId=e,window.sfBlazor.setCompInstance(this),this.isAdaptive=sf.base.Browser.isDevice,this.isPrintSchedule=!sf.base.isNullOrUndefined(r),this.uiStateValues={expand:!1,isInitial:!0,left:0,top:0,isGroupAdaptive:i.isGroupAdaptive,isIgnoreOccurrence:!1,groupIndex:0,action:!1,isBlock:!1,isCustomMonth:!0},this.isAdaptive&&!this.element.classList.contains("e-device")&&sf.base.addClass([this.element],"e-device"),this.render()}return e.prototype.render=function(e){if(void 0===e&&(e=!1),this.setHeight(),this.workCellAction=new ee(this),this.initializeLayout(this.options.currentView),this.eventBase=new q(this),this.isPrintSchedule||(this.options.allowKeyboardInteraction&&!this.keyboardInteractionModule?this.keyboardInteractionModule=new te(this):!this.options.allowKeyboardInteraction&&this.keyboardInteractionModule&&(this.keyboardInteractionModule.destroy(),this.keyboardInteractionModule=null),this.options.allowDragAndDrop?this.dragAndDropModule=new ae(this):!this.options.allowDragAndDrop&&this.dragAndDropModule&&(this.dragAndDropModule.destroy(),this.dragAndDropModule=null),this.options.allowResizing?this.resizeModule=new se(this):!this.options.allowResizing&&this.resizeModule&&(this.resizeModule.destroy(),this.resizeModule=null)),this.options.allowInline&&(this.inlineModule=new le(this)),this.isPrintSchedule||e||this.wireEvents(),this.virtualScrollModule){var t=this.virtualScrollModule.getResourceCount();this.dotNetRef.invokeMethodAsync("SetRenderedCount",t)}},e.prototype.initializeLayout=function(e){switch(this.activeView&&this.activeView.destroy(),e){case"Day":case"Week":case"WorkWeek":this.activeView=new W(this);break;case"TimelineDay":case"TimelineWorkWeek":case"TimelineWeek":this.activeView=new z(this);break;case"Month":this.activeView=new F(this);break;case"MonthAgenda":this.activeView=new X(this);break;case"TimelineMonth":this.activeView=new K(this);break;case"Year":case"TimelineYear":this.activeView=new J(this);break;case"Agenda":this.activeView=new $(this)}this.activeView&&(this.virtualScrollModule&&(this.virtualScrollModule.destroy(),this.virtualScrollModule=null),(-1===["Agenda","MonthAgenda","Year","TimelineYear"].indexOf(this.options.currentView)||"TimelineYear"===this.options.currentView&&"Vertical"===this.activeViewOptions.orientation)&&this.activeViewOptions.allowVirtualScrolling&&this.activeViewOptions.group.resources.length>0&&!this.uiStateValues.isGroupAdaptive&&(this.virtualScrollModule=new oe(this),this.isTimelineView()?this.uiStateValues.top=0:(this.virtualScrollModule.isHorizontalScroll=!0,this.uiStateValues.left=0)),this.globalize=new sf.base.Internationalization(this.options.locale),this.activeView.getRenderDates(),this.activeView.renderLayout())},e.prototype.scrollContentReady=function(e){if(this.virtualScrollModule){if(e){this.virtualScrollModule.updateVirtualTrackHeight(this.element.querySelector(".e-virtual-track"));var t=this.element.querySelector(".e-current-timeline");sf.base.isNullOrUndefined(t)||(t.style.height=this.element.querySelector(".e-content-table").offsetHeight+"px");var i={cssProperties:this.getCssProperties(),isPreventScrollUpdate:!0};return void this.onScrollUiUpdate(i)}this.virtualScrollModule.setTranslateValue(),this.virtualScrollModule.setTabIndex()}else{[].slice.call(this.element.querySelectorAll(".e-appointment-container")).forEach((function(e){e.style.height=""}));i={cssProperties:this.getCssProperties(),isPreventScrollUpdate:!0};this.onScrollUiUpdate(i)}},e.prototype.scrollToResource=function(e,t){var i=this.element.querySelector(".e-content-wrap");if(this.options.currentView.indexOf("Timeline")<0||"TimelineYear"===this.options.currentView&&"Horizontal"===this.activeViewOptions.orientation){t=this.activeViewOptions.group.byDate?t+1:t;var n=this.element.querySelectorAll(".e-date-header-wrap tbody tr")[parseInt(t.toString(),10)];i.scrollLeft=n.children[parseInt(e.toString(),10)].offsetLeft}else if(this.virtualScrollModule&&"TimelineYear"!==this.options.currentView){var s=this.element.querySelector(".e-virtual-track"),r=this.element.querySelector(".e-resource-column-wrap"),a=Math.round(s.offsetHeight/parseInt(r.getAttribute("data-expanded-count"),10));if(i.scrollTop=e*a-(this.virtualScrollModule.bufferCount-1)*a,this.virtualScrollModule.virtualScrolling(),this.options.rowAutoHeight)(o=this.element.querySelector('.e-work-cells[data-group-index="'+e+'"]'))&&!o.parentElement.classList.contains("e-hidden")&&(i.scrollTop=i.scrollTop<o.offsetTop?o.offsetTop:i.scrollTop+o.offsetTop);else i.scrollTop=e*a}else{var o;(o=this.element.querySelector('.e-work-cells[data-group-index="'+e+'"]'))&&!o.parentElement.classList.contains("e-hidden")&&(i.scrollTop=o.offsetTop)}},e.prototype.dataReady=function(e,t){this.activeView&&([].slice.call(this.element.querySelectorAll(".e-schedule-event-clone")).forEach((function(e){sf.base.remove(e)})),this.activeView.onDataReady({},e,t))},e.prototype.isTimelineView=function(){return-1!==this.options.currentView.indexOf("Timeline")},e.prototype.isAllDayCell=function(e){return!(!(["Month","TimelineMonth","TimelineYear","MonthAgenda"].indexOf(this.options.currentView)>-1||e.classList.contains("e-all-day-cells")||e.classList.contains("e-header-cells"))&&this.activeViewOptions.timeScale.enable)||!!(this.isTimelineView()&&this.activeViewOptions.headerRows.length>0&&"Hour"!==this.activeViewOptions.headerRows.slice(-1)[0].option)},e.prototype.getDateFromElement=function(e){var t=e.getAttribute("data-date");if(!sf.base.isNullOrUndefined(t)){var i=parseInt(t,10),n=new Date(i),s=new Date(+n+6e4*n.getTimezoneOffset());return new Date(s.getTime()+6e4*(s.getTimezoneOffset()-n.getTimezoneOffset()))}},e.prototype.getMsFromDate=function(e){return new Date(+e-6e4*e.getTimezoneOffset()).getTime()},e.prototype.getTimeString=function(e){return this.globalize.formatDate(e,{format:this.options.timeFormat,type:"time"})},e.prototype.getDateTime=function(e){return e instanceof Date?new Date(e.getTime()):new Date(e)},e.prototype.getStartEndTime=function(e){if(!sf.base.isNullOrUndefined(e)&&""!==e){var t=this.resetTime(this.getCurrentTime()),i=e.split(":");return 2===i.length&&t.setHours(parseInt(i[0],10),parseInt(i[1],10),0),t}return null},e.prototype.resetTime=function(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate())},e.prototype.getCurrentTime=function(){if(this.options.timezone){var e=(new Date).getTimezoneOffset();return function(e,t,i){"string"==typeof t&&(t=S(e,t)),"string"==typeof i&&(i=S(e,i));var n=e.getTimezoneOffset(),s=(e=new Date(e.getTime()+6e4*(t-i))).getTimezoneOffset();return new Date(e.getTime()+6e4*(s-n))}(new Date,e,this.options.timezone)}return new Date},e.prototype.boundaryValidation=function(e,t){var i={left:!1,right:!1,top:!1,bottom:!1},n=this.element.querySelector(".e-content-wrap").getBoundingClientRect();return e<n.top+30+window.pageYOffset&&e>n.top+window.pageYOffset&&(i.top=!0),e>n.bottom-30+window.pageYOffset&&e<n.bottom+window.pageYOffset&&(i.bottom=!0),t<n.left+30+window.pageXOffset&&t>n.left+window.pageXOffset&&(i.left=!0),t>n.right-30+window.pageXOffset&&t<n.right+window.pageXOffset&&(i.right=!0),i},e.prototype.onCellMouseDown=function(e){this.keyboardInteractionModule&&this.keyboardInteractionModule.onCellMouseDown(e)},e.prototype.getNavigateView=function(){return this.isTimelineView()?"TimelineMonth"===this.options.currentView||"TimelineYear"===this.options.currentView?"TimelineDay":"Agenda":"Day"},e.prototype.addSelectedClass=function(e,t){for(var i=0,n=e;i<n.length;i++){n[i].setAttribute("aria-selected","true")}sf.base.addClass(e,"e-selected-cell"),t&&(t.setAttribute("tabindex","0"),t.focus())},e.prototype.removeSelectedClass=function(){for(var e=this.getSelectedCells(),t=0,i=e;t<i.length;t++){var n=i[t];n.setAttribute("aria-selected","false"),n.removeAttribute("tabindex")}sf.base.removeClass(e,"e-selected-cell"),this.keyboardInteractionModule&&this.keyboardInteractionModule.selectedCells.length>0&&(this.keyboardInteractionModule.selectedCells=[])},e.prototype.setWorkHours=function(e,t,i,n){var s;s=this.getWorkHourCells(e,t,i,n),sf.base.addClass(s,"e-work-hours")},e.prototype.resetWorkHours=function(e,t,i,n){if(void 0===e&&(e=this.activeView.renderDates),e&&t&&i){var s=this.getWorkHourCells(e,t,i,n);sf.base.removeClass(s,"e-work-hours")}else{var r=[].slice.call(this.element.querySelectorAll(".e-work-hours"));sf.base.removeClass(r,"e-work-hours")}},e.prototype.getWorkHourCells=function(e,t,i,n){if(["Agenda","MonthAgenda","Month","TimelineMonth"].indexOf(this.options.currentView)>-1)return[];var s=this.getStartEndTime(t),r=this.getStartEndTime(i),a=this.getContentTable();if(sf.base.isNullOrUndefined(s)||sf.base.isNullOrUndefined(r)||!a)return[];s.setMilliseconds(0),r.setMilliseconds(0);var o=this.activeView.getStartHour();s<o&&(s=o);var l=this.activeView.getEndHour();r>l&&(r=l);for(var c=6e4*this.activeViewOptions.timeScale.interval/this.activeViewOptions.timeScale.slotCount,p=Math.round((s.getTime()-o.getTime())/c),h=Math.ceil((r.getTime()-o.getTime())/c),u=p,d=h,f=[],g=0,m=e;g<m.length;g++){var v=m[g];v=this.getDateTime(v),this.resetTime(v);var b=this.activeView.renderDates,y=this.getIndexOfDate(b,v);if(y>=0){if(this.isTimelineView()){var w=Math.round((l.getTime()-o.getTime())/c);p=u+y*w,h=d+y*w}for(var S=p;S<h;S++)if(this.isTimelineView()){var O=sf.base.isNullOrUndefined(n)?0:n;f.push(a.rows[parseInt(O.toString(),10)].cells[parseInt(S.toString(),10)])}else if(sf.base.isNullOrUndefined(n))f.push(a.rows[parseInt(S.toString(),10)].cells[parseInt(y.toString(),10)]);else{var T=[].slice.call(a.rows[parseInt(S.toString(),10)].querySelectorAll('.e-work-cells[data-group-index="'+n+'"]'));f.push(T[parseInt(y.toString(),10)])}}}return f},e.prototype.getCellDetails=function(e){var t=e instanceof Array?e:[e],i=sf.base.getElement(t[0]),n=sf.base.getElement(t.slice(-1)[0]),s=this.getDateFromElement(i),r=this.getDateFromElement(n);if(!sf.base.isNullOrUndefined(s)&&!sf.base.isNullOrUndefined(r)){var a=this.isTimelineView()&&!sf.base.isNullOrUndefined(n.getAttribute("colSpan"))&&this.activeViewOptions.headerRows.length>0,o=a?parseInt(n.getAttribute("colSpan"),10):1,l={startTime:s,endTime:r=!this.activeViewOptions.timeScale.enable||a||n.classList.contains("e-all-day-cells")||n.classList.contains("e-header-cells")?h(new Date(r.getTime()),o):this.activeView.getEndDateFromStartDate(r),isAllDay:this.isAllDayCell(i),element:i},c=i.getAttribute("data-group-index");return sf.base.isNullOrUndefined(c)||(l.groupIndex=parseInt(c,10)),l}},e.prototype.getSelectedElements=function(){return this.keyboardInteractionModule&&this.keyboardInteractionModule.selectedCells.length>0?this.keyboardInteractionModule.selectedCells:this.getSelectedCells()},e.prototype.getSelectedCells=function(){return[].slice.call(this.element.querySelectorAll(".e-selected-cell"))},e.prototype.selectCell=function(e){this.removeSelectedClass(),this.addSelectedClass([e],e)},e.prototype.getAllDayRow=function(){return this.element.querySelector(".e-all-day-row")},e.prototype.getTableRows=function(){return[].slice.call(this.element.querySelectorAll(".e-content-table tbody tr:not(.e-hidden)"))},e.prototype.getWorkCellElements=function(){return[].slice.call(this.element.querySelectorAll(".e-work-cells"))},e.prototype.getContentTable=function(){return this.element.querySelector(".e-content-table tbody")},e.prototype.getIndexOfDate=function(e,t){return e.map(Number).indexOf(+t)},e.prototype.setHeight=function(){this.element.style.height=sf.base.formatUnit(this.options.height)},e.prototype.setDimensions=function(){this.setHeight();var e={cssProperties:this.getCssProperties()};this.onScrollUiUpdate(e)},e.prototype.getCssProperties=function(){return{border:this.options.enableRtl?"borderLeftWidth":"borderRightWidth",padding:this.options.enableRtl?"paddingLeft":"paddingRight",rtlBorder:this.options.enableRtl?"borderRightWidth":"borderLeftWidth",rtlPadding:this.options.enableRtl?"paddingRight":"paddingLeft"}},e.prototype.onScrollUiUpdate=function(e){this.activeView&&this.activeView.onScrollUiUpdate(e)},e.prototype.onVirtualScroll=function(){this.virtualScrollModule&&this.virtualScrollModule.virtualScrolling()},e.prototype.removeNewEventElement=function(){var e=this.element.querySelector(".e-new-event");sf.base.isNullOrUndefined(e)||sf.base.remove(e)},e.prototype.closeSidebar=function(e){var t=this.element.querySelector(".e-sidebar");!sf.base.closest(e.target,".e-icon-menu,.e-sidebar")&&t&&t.classList.contains("e-open")&&this.element.querySelector(".e-icon-menu").click()},e.prototype.closeHeaderPopup=function(e){var t=sf.base.closest(e.target,".e-date-range,.e-header-popup,.e-day,.e-selected"),i=this.element.querySelector(".e-header-popup");sf.base.isNullOrUndefined(t)&&i&&this.headerPopup&&this.headerPopup.hide()},e.prototype.closeQuickPopup=function(e){var t,i=".e-quick-popup-wrapper,.e-header-cells,.e-all-day-cells,.e-work-cells,.e-appointment,.e-popup",n=sf.base.closest(e.target,i),s=this.element.querySelector(".e-quick-popup-wrapper");sf.base.isNullOrUndefined(n)&&(s&&s.childElementCount>0&&this.quickPopup&&(t=!0),sf.base.closest(e.target,".e-appointment,.e-header-cells")&&this.removeNewEventElement(),!sf.base.closest(e.target,i)&&this.quickPopup&&(t=!0,this.removeNewEventElement()),t&&this.onClosePopup())},e.prototype.beforeOpenEditor=function(){this.removeNewEventElement()},e.prototype.createCalendarPopup=function(){var e=this.element.querySelector(".e-header-popup");e&&!this.headerPopup&&(this.headerPopup=new sf.popups.Popup(e,{actionOnScroll:"hide",targetType:"relative",relateTo:this.isAdaptive?this.element.querySelector(".e-schedule-toolbar"):this.element.querySelector(".e-date-range"),position:{X:"left",Y:"bottom"},enableRtl:this.options.enableRtl}),this.headerPopup.isStringTemplate=!0),this.headerPopup&&(this.headerPopup.element.classList.contains(t)?this.headerPopup.hide():this.headerPopup.show())},e.prototype.ctrlKeySelect=function(e){if(!this.isAdaptive){this.selectedElements=[],this.selectedElements=[].slice.call(this.element.querySelectorAll("."+i));var t=this.element.querySelector('.e-appointment[data-guid="'+e+'"]');this.eventBase.getSelectedEventElements(t)}},e.prototype.createQuickPopup=function(e,i,n){if(this.isAdaptive&&sf.base.isNullOrUndefined(e)&&!n){var s=this.element.querySelector(".e-new-event");return sf.base.isNullOrUndefined(s)&&(s=sf.base.createElement("div",{className:"e-new-event",innerHTML:'<div class="e-title">New Event</div>'})),void this.currentCell.appendChild(s)}var r=this.element.querySelector(".e-quick-popup-wrapper");if(sf.base.isNullOrUndefined(e)||(this.currentCell=this.element.querySelector('.e-appointment[data-guid="'+e+'"]'),!this.currentCell&&this.morePopup&&this.morePopup.element.classList.contains(t)&&(this.currentCell=this.morePopup.element.querySelector('.e-appointment[data-guid="'+e+'"]')),this.element.querySelectorAll('.e-appointment[data-guid="'+e+'"]').length>1&&this.activeEventData&&!sf.base.isNullOrUndefined(this.activeEventData.element)&&this.activeEventData.element.getAttribute("data-guid")===e&&(this.currentCell=this.activeEventData.element),this.activeEventData={element:this.currentCell,guid:[e]}),sf.base.isNullOrUndefined(this.currentCell)&&(this.currentCell=this.element.querySelector(".e-table-container")),!(this.currentCell.classList.contains("e-work-cells")||this.currentCell.classList.contains("e-all-day-cells"))||0!==this.getSelectedCells().length&&"TimelineYear"!==this.options.currentView||this.selectCell(this.currentCell),!n){if(r&&!this.quickPopup&&(this.isAdaptive&&document.body.appendChild(r),this.quickPopup=new sf.popups.Popup(r,{targetType:this.isAdaptive?"container":"relative",enableRtl:this.options.enableRtl,relateTo:this.currentCell,open:this.quickPopupOpen.bind(this),hideAnimation:this.isAdaptive?{name:"ZoomOut"}:{name:"FadeOut",duration:150},showAnimation:this.isAdaptive?{name:"ZoomIn"}:{name:"FadeIn",duration:150},collision:this.isAdaptive?{X:"fit",Y:"fit"}:this.options.enableRtl?{X:"flip",Y:"fit"}:{X:"none",Y:"fit"},position:this.isAdaptive||this.options.enableRtl?{X:"left",Y:"top"}:{X:"right",Y:"top"},viewPortElement:this.isAdaptive?document.body:this.element,zIndex:this.isAdaptive?1004:3}),this.quickPopup.isStringTemplate=!0),this.quickPopup)this.isAdaptive&&sf.base.addClass([this.quickPopup.element],"e-device"),this.quickPopup.relateTo=this.currentCell,this.quickPopup.element.querySelector(".e-event-popup")&&this.applyEventColor(),this.adjustPopupPosition();i&&(this.eventBase.removeSelectedAppointmentClass(),this.eventBase.addSelectedAppointments([].slice.call(this.element.querySelectorAll('div[data-guid="'+e+'"]'))),this.activeEventData.element.focus())}},e.prototype.applyEventColor=function(){var e="";e="Agenda"===this.options.currentView||"MonthAgenda"===this.options.currentView?this.options.enableRtl?"border-right-color":"border-left-color":"background-color";var t=this.activeEventData.element.style[e];if(""!==t){var i=this.quickPopup.element.querySelector(".e-popup-header"),n=this.quickPopup.element.querySelector(".e-popup-footer");n&&"block"===getComputedStyle(n).display&&(i=this.quickPopup.element.querySelector(".e-subject"))&&(i.style.borderLeftColor=t,t="rgba("+t.match(/\d+/g).slice(0,3).join()+",0.3)"),i&&(i.style.backgroundColor=t)}},e.prototype.inlineEdit=function(e,t,i,n,s){void 0===i&&(i=null),this.inlineModule.inlineEdit(e,t,i,n,s)},e.prototype.inlineCrudActions=function(e){if(sf.base.closest(e,".e-inline-appointment")){var t=this.inlineModule.generateEventData(e);t.startTime=y(t.startTime),t.endTime=y(t.endTime),this.dotNetRef.invokeMethodAsync("AddInlineAppointment",t,t.groupIndex)}else{var i=e.value;this.dotNetRef.invokeMethodAsync("SaveInlineAppointment",i)}this.inlineModule.removeInlineAppointmentElement()},e.prototype.quickPopupOpen=function(){if(this.isAdaptive)this.quickPopup.element.style.top="0px";else if(this.quickPopup.element.querySelector(".e-cell-popup")){var e=this.quickPopup.element.querySelector(".e-subject");e&&e.focus()}else{var t=this.quickPopup.element.querySelector(".e-event-edit"),i=this.quickPopup.element.querySelector(".e-edit");if(t&&t.hasAttribute("disabled")||i&&i.hasAttribute("disabled")){var n=this.quickPopup.element.querySelector(".e-event-delete"),s=this.quickPopup.element.querySelector(".e-delete");if(n&&n.hasAttribute("disabled")||s&&s.hasAttribute("disabled")){var r=this.quickPopup.element.querySelector(".e-close");r&&r.focus()}else n&&n.focus(),s&&s.focus()}else t&&t.focus(),i&&i.focus()}},e.prototype.adjustPopupPosition=function(){var e=this.quickPopup.element.style.display;if(this.quickPopup.element.style.display="block",this.isAdaptive)this.quickPopup.element.removeAttribute("style"),this.quickPopup.element.style.display="block",this.quickPopup.element.style.height=sf.base.formatUnit(this.isTapHold?65:window.innerHeight);else{var t=this.virtualScrollModule&&this.virtualScrollModule.isHorizontalScroll&&!sf.base.isNullOrUndefined(sf.base.closest(this.currentCell,".e-content-wrap")),i=this.element.querySelector(".e-content-wrap table");this.quickPopup.offsetX=t&&!this.options.enableRtl?r(i)+10:10,this.quickPopup.collision={X:this.options.enableRtl?"flip":"none",Y:"fit"},this.quickPopup.position={X:this.options.enableRtl?"left":"right",Y:"top"},this.quickPopup.dataBind(),this.quickPopup.refreshPosition(null,!0);var n=sf.popups.isCollide(this.quickPopup.element,this.element);if(n.indexOf(this.options.enableRtl?"left":"right")>-1)this.quickPopup.offsetX=-this.currentCell.offsetWidth-10-this.quickPopup.element.offsetWidth,t&&!this.options.enableRtl&&(this.quickPopup.offsetX=r(i)+this.quickPopup.offsetX),this.quickPopup.dataBind(),this.quickPopup.refreshPosition(null,!0),sf.popups.isCollide(this.quickPopup.element,this.element).indexOf("left")>-1&&(this.quickPopup.position={X:"center",Y:"center"},this.quickPopup.collision={X:"fit",Y:"fit"},this.quickPopup.offsetX=-this.quickPopup.element.offsetWidth/2,this.quickPopup.dataBind());if(this.virtualScrollModule&&!this.virtualScrollModule.isHorizontalScroll&&(n.indexOf("top")>-1||n.indexOf("bottom")>-1)){var a=s(i);this.quickPopup.offsetY=a,this.quickPopup.dataBind()}}this.quickPopup.element.style.display=e,this.quickPopup.dataBind(),this.quickPopup.show()},e.prototype.onQuickPopupClose=function(e,t){void 0===e&&(e=!1),void 0===t&&(t=!1),this.isTapHold=!1,t?this.quickPopup&&this.quickPopup.hide():this.onClosePopup(),e||this.eventBase.focusElement()},e.prototype.onClosePopup=function(){this.quickPopup&&this.quickPopup.element.classList.contains("e-popup-open")&&this.dotNetRef.invokeMethodAsync("CloseQuickInfoPopupAsync")},e.prototype.createMoreEventPopup=function(e,t){var i=this.element.querySelector(".e-more-popup-wrapper");if(i&&!this.morePopup&&(this.isAdaptive&&document.body.appendChild(i),this.morePopup=new sf.popups.Popup(i,{targetType:this.isAdaptive?"container":"relative",enableRtl:this.options.enableRtl,hideAnimation:{name:"ZoomOut",duration:300},showAnimation:{name:"ZoomIn",duration:300},open:this.morePopupOpen.bind(this),collision:this.isAdaptive?{X:"fit",Y:"fit"}:this.options.enableRtl?{X:"flip",Y:"fit"}:{X:"flip",Y:"flip"},viewPortElement:this.isAdaptive?document.body:this.element,zIndex:this.isAdaptive?1002:2}),this.morePopup.isStringTemplate=!0),this.morePopup){if("Year"===this.options.currentView){var n=this.element.querySelector(':not(.e-other-month)[data-date="'+t+'"]');n&&(this.activeCellsData=this.getCellDetails(n))}for(var s=this.morePopup.element.querySelectorAll(".e-appointment"),r=0;r<s.length;r++){var a=s[parseInt(r.toString(),10)];this.eventBase.wireAppointmentEvents(a,"Year"===this.options.currentView,!0)}var o=this.element.querySelector("."+e+'[data-date="'+t+'"]');"Year"===this.options.currentView?o=-1!==e.indexOf("e-other-month")?sf.base.closest(o,".e-other-month"):this.element.querySelector(':not(.e-other-month)[data-date="'+t+'"]'):this.activeCellsData=this.getCellDetails(o),this.morePopup&&this.isAdaptive&&(sf.base.addClass([this.morePopup.element],"e-device"),this.morePopup.element.removeAttribute("style")),this.morePopup.relateTo=o,this.quickPopup&&this.onClosePopup(),this.morePopup.show()}},e.prototype.morePopupOpen=function(){if(!this.isAdaptive){var e=this.morePopup.element.querySelector(".e-header-date");e&&e.focus()}},e.prototype.onMoreEventPopupClose=function(){if(this.morePopup&&this.morePopup.element.classList.contains(t)){if(this.activeCellsData&&this.activeCellsData.element)if("Year"===this.options.currentView)this.selectCell(this.activeCellsData.element);else{var e=void 0,i=parseInt(this.activeCellsData.element.getAttribute("data-date"),10),n=parseInt(this.activeCellsData.element.getAttribute("data-group-index"),10);(e=isNaN(n)?this.element.querySelector('.e-more-indicator[data-start="'+i+'"]'):this.element.querySelector('.e-more-indicator[data-start="'+i+'"][data-group-index="'+n+'"]'))&&e.focus()}this.onQuickPopupClose(),this.morePopup.hide()}},e.prototype.getTooltipPosition=function(e,t){var i;i=t?this.element.querySelector(".e-quick-popup-wrapper"):document.querySelector("#"+this.element.id+"_dialog_wrapper .e-dlg-content");var n=(t?i.querySelector("#QuickInfo"+e):i.querySelector("#"+e)).getBoundingClientRect(),s=i.getBoundingClientRect(),r={};r[""+e]="top:"+(n.bottom-s.top+i.scrollTop+9)+"px;left:"+(n.left-s.left+i.scrollLeft+n.width/2)+"px;",this.dotNetRef.invokeMethodAsync("ErrorPositioning",r,t)},e.prototype.scrollTo=function(e,t){t=sf.base.isNullOrUndefined(t)?t:this.getDateTime(t),this.activeView.scrollToDate&&sf.base.isNullOrUndefined(e)&&t?this.activeView.scrollToDate(t):this.activeView.scrollToHour&&this.activeView.scrollToHour(e,t)},e.prototype.print=function(){var e=this.element.cloneNode(!0);e.id=this.element.id+"_print",document.body.appendChild(e);var t=this.getScrollableElement(this.element),i=t.scrollTop,n=t.scrollLeft;this.printScheduler(e,n,i,!0)},e.prototype.printScheduler=function(e,t,i,n){for(var s=this,r="",a=0,o=[].slice.call(document.querySelectorAll("base, link, style"));a<o.length;a++){r+=o[a].outerHTML}var l=sf.base.createElement("div");e.style.width=this.element.offsetWidth+"px";var c=n?550:window.outerHeight,p=n?100*Math.round(parseInt(e.style.width,10)/100):window.outerWidth;l.appendChild(e);var h=window.open("","print","height="+c+",width="+p+",tabbar=no");h.document.write("<!DOCTYPE html> <html><head>"+r+"</head><body>"+l.innerHTML+"<script> (function() { window.ready = true; })(); <\/script></body></html>"),h.document.close(),h.focus(),setTimeout((function(){var e=s.getScrollableElement(h.document.body);e.scrollLeft=t,e.scrollTop=i;var n=h.document.querySelector(".e-date-header-wrap");n&&(n.scrollLeft=e.scrollLeft);var r=h.document.querySelector(".e-time-cells-wrap");r&&(r.scrollTop=i);var a="MonthAgenda"===s.options.currentView?".e-appointment-wrap":".e-content-wrap",o=h.document.querySelector(a);o&&(o.scrollLeft=e.scrollLeft,o.scrollTop=e.scrollTop),h.print(),h.close()}),2e3)},e.prototype.getScrollableElement=function(e){var t="MonthAgenda"===this.options.currentView?".e-appointment-wrap":".e-content-wrap";return e.querySelector(t)},e.prototype.allDayRowScrollUpdate=function(){var e=this.element.querySelector(".e-date-header-wrap"),t=this.element.querySelector(".e-all-day-row");if(!sf.base.isNullOrUndefined(t)){if("auto"!==this.options.height&&this.options.enableAllDayScroll)e.classList.contains("e-all-day-auto")&&sf.base.removeClass([e],"e-all-day-auto"),this.eventBase.allDayExpandScroll(e);else if(sf.base.addClass([e],"e-all-day-auto"),e.classList.contains("e-all-day-scroll")&&sf.base.removeClass([e],"e-all-day-scroll"),this.uiStateValues.expand){var i=[].slice.call(this.element.querySelectorAll(".e-all-day-cells"));i[0].style.height=t.style.height?t.style.height:i[1].style.height}if(this.uiStateValues.expand){var n={cssProperties:this.getCssProperties()};this.onScrollUiUpdate(n)}else t.style.height=""}},e.prototype.wireEvents=function(){this.wireTouchEvents(),sf.base.EventHandler.add(window,"resize",this.onScheduleResize,this),sf.base.EventHandler.add(window,"orientationchange",this.onScheduleResize,this),sf.base.EventHandler.add(document,sf.base.Browser.touchStartEvent,this.onDocumentClick,this)},e.prototype.unwireEvents=function(){this.unwireTouchEvents(),sf.base.EventHandler.remove(window,"resize",this.onScheduleResize),sf.base.EventHandler.remove(window,"orientationchange",this.onScheduleResize),sf.base.EventHandler.remove(document,sf.base.Browser.touchStartEvent,this.onDocumentClick)},e.prototype.wireTouchEvents=function(){var e=this.element.querySelector(".e-table-container");e&&sf.base.isNullOrUndefined(this.touchObj)&&(this.touchObj=new sf.base.Touch(e,{tapHold:this.tapHoldHandler.bind(this)}))},e.prototype.unwireTouchEvents=function(){this.touchObj&&this.touchObj.destroy()},e.prototype.tapHoldHandler=function(e){var t=sf.base.closest(e.originalEvent.target,".e-appointment");if(!sf.base.isNullOrUndefined(t)&&this.isAdaptive){var i=t.getAttribute("data-guid");return this.isTapHold=!0,this.selectedElements=[],this.eventBase.getSelectedEventElements(t),void this.dotNetRef.invokeMethodAsync("OnTapHold",i,this.isTapHold)}},e.prototype.onScheduleResize=function(){var e;this.onClosePopup(),this.morePopup&&this.morePopup.hide(),e=window.devicePixelRatio||window.screen.availWidth/document.documentElement.clientWidth,g!=e&&(f=null,g=e),this.activeView.resetColWidth(),this.onScrollUiUpdate({cssProperties:this.getCssProperties(),isPreventScrollUpdate:!0}),this.dataReady()},e.prototype.onDocumentClick=function(e){var i=e.target;if(this.options.allowInline){var n=this.element.querySelector(".e-inline-subject");!i.classList.contains("e-inline-subject")&&n&&""!==n.value?this.inlineCrudActions(n):i.classList.contains("e-inline-subject")||this.inlineModule.removeInlineAppointmentElement()}this.closeHeaderPopup(e),this.closeSidebar(e),this.closeQuickPopup(e),this.eventBase&&this.eventBase.appointmentBorderRemove(e),!this.morePopup||sf.base.closest(i,".e-more-popup-wrapper")||i.classList.contains("e-more-indicator")||sf.base.closest(i,"."+t)||sf.base.closest(i,".e-work-cells")||this.morePopup.hide()},e.prototype.changeInitial=function(e,t,i,n){return this.options.viewIndex!==i||e!==t?(this.uiStateValues.top=e.indexOf("Timeline")>-1&&t.indexOf("Timeline")<0?0:this.uiStateValues.top,["Day","Week","WorkWeek"].indexOf(e)>-1&&["Day","Week","WorkWeek"].indexOf(t)<0||e.indexOf("Timeline")>-1||e.indexOf("Year")>-1):n&&e.indexOf("Timeline")>-1&&e.indexOf("Year")<0},e.prototype.setPersistence=function(){if(this.options.enablePersistence){var e={selectedDate:this.options.selectedDate,currentView:this.options.currentView,viewIndex:this.options.viewIndex},t=this.element.querySelector(".e-content-wrap");sf.base.isNullOrUndefined(t)||(e.top=t.scrollTop,e.left=t.scrollLeft),window.localStorage.setItem(this.element.id,JSON.stringify(e))}},e.prototype.destroy=function(){this.isDestroyed=!0,this.setPersistence(),this.unwireEvents(),this.headerPopup&&this.headerPopup.destroy(),this.quickPopup&&(this.quickPopup.destroy(),sf.base.remove(this.quickPopup.element),this.quickPopup=null),this.morePopup&&(this.morePopup.destroy(),sf.base.remove(this.morePopup.element),this.morePopup=null),this.keyboardInteractionModule&&this.keyboardInteractionModule.destroy(),this.activeView&&(this.activeView.destroy(),this.activeView=null)},e}();return{initialize:function(e,t,i,n,s){t&&e&&(i.selectedDate=new Date(i.selectedDate),i.minDate=new Date(i.minDate),i.maxDate=new Date(i.maxDate),sf.base.isNullOrUndefined(n.group.resources)&&(n.group.resources=[]),new ce(e,t,i,n,s).dataReady(),t.querySelector(".e-content-placeholder")&&(t.querySelector(".e-content-placeholder").style.display="none"),s.invokeMethodAsync("TriggerCreatedEvent"))},updateLayout:function(t,i,n,s){i.selectedDate=new Date(i.selectedDate),i.minDate=new Date(i.minDate),i.maxDate=new Date(i.maxDate),sf.base.isNullOrUndefined(n.group.resources)&&(n.group.resources=[]);var r=window.sfBlazor.getCompInstance(t);if(r&&r.element){var a=r.options.enableRtl==i.enableRtl;r.uiStateValues.isInitial=r.changeInitial(i.currentView,r.options.currentView,i.viewIndex,s),r.options=i,r.activeViewOptions=n,r.uiStateValues.isGroupAdaptive=i.isGroupAdaptive,r.options.enableRtl&&!r.element.classList.contains(e)?sf.base.addClass([r.element],e):!r.options.enableRtl&&r.element.classList.contains(e)&&sf.base.removeClass([r.element],e),r.render(!0),r.setPersistence(),r.allDayRowScrollUpdate(),a||r.dataReady()}},printWithOptions:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);if(n&&n.element){var s=Object.assign({},n.options),r=Object.assign({},n.activeViewOptions);s.selectedDate=new Date(s.selectedDate),s.minDate=new Date(s.minDate),s.maxDate=new Date(s.maxDate);var a=n.element.cloneNode(!0);a.id=a.id+"_print";var o=n.getScrollableElement(n.element),l=o.scrollTop,c=o.scrollLeft;document.body.appendChild(a),s.height=i.height,s.width=i.width;var p=new ce(null,a,s,r,t,!0);"MonthAgenda"!==s.currentView&&p.dataReady(void 0,void 0),p.printScheduler(a,c,l),p.destroy()}},loadCldr:function(e){sf.base.loadCldr(JSON.parse(e))},createCalendarPopup:function(e){var t=window.sfBlazor.getCompInstance(e);t&&t.element&&t.createCalendarPopup()},exportSave:function(e,t){if(navigator.msSaveBlob){for(var i=window.atob(t),n=new Uint8Array(i.length),s=0;s<i.length;s++)n[parseInt(s.toString(),10)]=i.charCodeAt(s);var r=new Blob([n.buffer],{type:"application/octet-stream"});navigator.msSaveBlob(r,e)}else{var a=document.createElement("a");a.download=e,a.href="data:application/octet-stream;base64,"+t,document.body.appendChild(a),a.click(),document.body.removeChild(a)}},exportToICS:function(e,t){var i=new Blob([e],{type:"data:text/calendar;charset=utf8"});if(t=(t||"Calendar")+".ics",navigator.msSaveBlob)navigator.msSaveBlob(i,t);else{var n=document.createElementNS("http://www.w3.org/1999/xhtml","a");n.download=t,n.href=URL.createObjectURL(i);var s=document.createEvent("MouseEvent");s.initEvent("click",!0,!0),n.dispatchEvent(s),setTimeout((function(){URL.revokeObjectURL(n.href),n.href=void 0}))}},scrollTo:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);n&&n.element&&n.scrollTo(t,i)},destroy:function(e){var t=window.sfBlazor.getCompInstance(e);t&&t.element&&t.destroy()},validation:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);n&&n.element&&n.getTooltipPosition(t,i)},addSelectedEventClass:function(e,t){var i=window.sfBlazor.getCompInstance(e);i&&i.element&&i.eventBase&&i.eventBase.addSelectedAppointments([].slice.call(i.element.querySelectorAll('div[data-guid="'+t+'"]')))},addSelectedClass:function(e){var t=window.sfBlazor.getCompInstance(e);t&&t.element&&t.currentCell&&t.selectCell(t.currentCell)},createQuickPopup:function(e,t,i,n){var s=window.sfBlazor.getCompInstance(e);s&&s.element&&s.createQuickPopup(t,i,n)},adjustPopupPosition:function(e){var t=window.sfBlazor.getCompInstance(e);t&&t.element&&t.adjustPopupPosition()},closeQuickInfoPopup:function(e){var t=window.sfBlazor.getCompInstance(e);t&&t.element&&t.onQuickPopupClose(!1,!0)},createMoreEventPopup:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);n&&n.element&&n.createMoreEventPopup(t,i)},moreEventPopupClose:function(e){var t=window.sfBlazor.getCompInstance(e);t&&t.element&&t.onMoreEventPopupClose()},dataReady:function(e,t,i,n){var s=window.sfBlazor.getCompInstance(e);s&&s.element&&(s.uiStateValues.isGroupAdaptive=t,s.dataReady(i,n))},beforeOpenEditor:function(e){var t=window.sfBlazor.getCompInstance(e);t&&t.element&&t.beforeOpenEditor()},scrollContentReady:function(e,t){var i=window.sfBlazor.getCompInstance(e);i&&i.element&&i.scrollContentReady(t)},scrollToResource:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);n&&n.element&&n.scrollToResource(t,i)},printSchedule:function(e){var t=window.sfBlazor.getCompInstance(e);t&&t.element&&t.print()},inlineEdit:function(e,t,i,n,s,r){void 0===n&&(n=null);var a=window.sfBlazor.getCompInstance(e);a&&a.element&&a.inlineEdit(t,i,n,s,r)},setWorkHours:function(e,t,i,n,s){var r=window.sfBlazor.getCompInstance(e);r&&r.element&&r.setWorkHours(t,i,n,s)},resetWorkHours:function(e,t,i,n,s){var r=window.sfBlazor.getCompInstance(e);r&&r.element&&r.resetWorkHours(t,i,n,s)},getSelectedDetails:function(e,t){var n=window.sfBlazor.getCompInstance(e);if(n&&n.element){if(t){var s=[];return(r=[].slice.call(n.element.querySelectorAll("."+i))).forEach((function(e){s.push(e.getAttribute("data-guid"))})),JSON.stringify(s)}var r=n.getSelectedElements(),a=n.getCellDetails(r);return a.startTime=y(a.startTime),a.endTime=y(a.endTime),JSON.stringify(a)}return null},ctrlKeySelect:function(e,t){var i=window.sfBlazor.getCompInstance(e);i&&i.element&&i.ctrlKeySelect(t)},getTargetDetails:function(e,t,i,n){var s=window.sfBlazor.getCompInstance(e);if(s&&s.element){var r=document.elementFromPoint(t,i),a=void 0;if(r&&"event"===n){if(a=sf.base.closest(r,".e-appointment"))return JSON.stringify(a.getAttribute("data-guid"))}else if(r&&"cell"===n){if(a=sf.base.closest(r,".e-header-cells,.e-all-day-cells,.e-work-cells")){var o=s.getCellDetails(a);return o.startTime=y(o.startTime),o.endTime=y(o.endTime),JSON.stringify(o)}}else if(r&&"resource"===n)return a=sf.base.closest(r,".e-resource-cells"),JSON.stringify(a.getAttribute("data-group-index"));return null}return null},getRowIndex:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);if(n&&n.element){var s=document.elementFromPoint(t,i),r=void 0;return s?(r=sf.base.closest(s,".e-resource-cells"),JSON.stringify(r.parentNode.sectionRowIndex.toString())):null}return null},getElementInfo:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);if(n&&n.element){var s=document.elementFromPoint(t,i);if(!s)return null;var r={elementType:""},a=sf.base.closest(s,".e-appointment");if(a)return r.elementType="event",r.guid=a.getAttribute("data-guid"),JSON.stringify(r);var o=sf.base.closest(s,".e-header-cells,.e-all-day-cells,.e-work-cells");if(o){o.classList.contains("e-work-cells")?r.elementType="workCell":o.classList.contains("e-all-day-cells")?r.elementType="allDayCell":o.classList.contains("e-header-cells")&&(r.elementType="headerCell");var l=n.getCellDetails(o);return r.startTime=y(l.startTime),r.endTime=y(l.endTime),r.isAllDay=l.isAllDay,"workCell"===r.elementType&&(r.groupIndex=parseInt(o.getAttribute("data-group-index"),10)),JSON.stringify(r)}var c=sf.base.closest(s,".e-resource-cells,.e-resource-column");if(c){r.elementType="resource";var p=!0;return p=("TimelineYear"!==n.options.currentView||!c.closest(".e-horizontal"))&&p,n.isTimelineView()&&p?(r.groupIndex=parseInt(c.getAttribute("data-group-index"),10),JSON.stringify(r)):(r.rowIndex=c.parentNode.sectionRowIndex,r.colIndex=c.cellIndex,JSON.stringify(r))}var h=sf.base.closest(s,".e-time-slots");if(h){var u=-1,d=void 0;n.isTimelineView()?(u=h.cellIndex,d=n.element.querySelectorAll(".e-content-wrap tbody td:nth-child("+(u+1)+") .e-work-cells")[0]):(u=h.parentElement.rowIndex,d=n.element.querySelectorAll(".e-content-wrap tbody tr:nth-child("+(u+1)+") .e-work-cells")[0]);l=n.getCellDetails(d);return r.startTime=y(l.startTime),r.endTime=y(l.endTime),r.elementType="majorSlot",h.classList.contains("e-time-cells")&&(r.elementType="minorSlot"),JSON.stringify(r)}}return null},updateEventProps:function(e,t){var i=window.sfBlazor.getCompInstance(e);i&&i.element&&(i.options.enableIndicator=t.enableIndicator,i.options.enableMaxHeight=t.enableMaxHeight,i.options.ignoreWhitespace=t.ignoreWhitespace)}}}()}}]);(async()=>{await import(`${document.baseURI}_content/Syncfusion.Blazor/scripts/syncfusion-blazor-base.min.js?v=25.1.undefined`).then(()=>{sfBlazor.loadDependencies('sfschedule');})})();